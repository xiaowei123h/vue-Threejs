webpackJsonp([0],{"+T91":function(e,t,r){"use strict";var n=r("6+nK"),i=r("9icu"),o={findSpan:function(e,t,r){var n=r.length-e-1;if(t>=r[n])return n-1;if(t<=r[e])return e;for(var i=e,o=n,a=Math.floor((i+o)/2);t<r[a]||t>=r[a+1];)t<r[a]?o=a:i=a,a=Math.floor((i+o)/2);return a},calcBasisFunctions:function(e,t,r,n){var i=[],o=[],a=[];i[0]=1;for(var s=1;s<=r;++s){o[s]=t-n[e+1-s],a[s]=n[e+s]-t;for(var l=0,u=0;u<s;++u){var c=a[u+1],h=o[s-u],d=i[u]/(c+h);i[u]=l+c*d,l=h*d}i[s]=l}return i},calcBSplinePoint:function(e,t,r,i){for(var o=this.findSpan(e,i,t),a=this.calcBasisFunctions(o,i,e,t),s=new n.Vector4(0,0,0,0),l=0;l<=e;++l){var u=r[o-e+l],c=a[l],h=u.w*c;s.x+=u.x*h,s.y+=u.y*h,s.z+=u.z*h,s.w+=u.w*c}return s},calcBasisFunctionDerivatives:function(e,t,r,n,i){for(var o=[],a=0;a<=r;++a)o[a]=0;var s=[];for(a=0;a<=n;++a)s[a]=o.slice(0);var l=[];for(a=0;a<=r;++a)l[a]=o.slice(0);l[0][0]=1;for(var u=o.slice(0),c=o.slice(0),h=1;h<=r;++h){u[h]=t-i[e+1-h],c[h]=i[e+h]-t;for(var d=0,p=0;p<h;++p){var f=c[p+1],m=u[h-p];l[h][p]=f+m;var v=l[p][h-1]/l[h][p];l[p][h]=d+f*v,d=m*v}l[h][h]=d}for(h=0;h<=r;++h)s[0][h]=l[h][r];for(p=0;p<=r;++p){var g=0,y=1,b=[];for(a=0;a<=r;++a)b[a]=o.slice(0);b[0][0]=1;for(var w=1;w<=n;++w){var x=0,_=p-w,T=r-w;p>=w&&(b[y][0]=b[g][0]/l[T+1][_],x=b[y][0]*l[_][T]);var A=p-1<=T?w-1:r-p;for(h=_>=-1?1:-_;h<=A;++h)b[y][h]=(b[g][h]-b[g][h-1])/l[T+1][_+h],x+=b[y][h]*l[_+h][T];p<=T&&(b[y][w]=-b[g][w-1]/l[T+1][p],x+=b[y][w]*l[p][T]),s[w][p]=x;h=g;g=y,y=h}}for(p=r,w=1;w<=n;++w){for(h=0;h<=r;++h)s[w][h]*=p;p*=r-w}return s},calcBSplineDerivatives:function(e,t,r,i,o){for(var a=o<e?o:e,s=[],l=this.findSpan(e,i,t),u=this.calcBasisFunctionDerivatives(l,i,e,a,t),c=[],h=0;h<r.length;++h){var d=(f=r[h].clone()).w;f.x*=d,f.y*=d,f.z*=d,c[h]=f}for(var p=0;p<=a;++p){for(var f=c[l-e].clone().multiplyScalar(u[p][0]),m=1;m<=e;++m)f.add(c[l-e+m].clone().multiplyScalar(u[p][m]));s[p]=f}for(p=a+1;p<=o+1;++p)s[p]=new n.Vector4(0,0,0);return s},calcKoverI:function(e,t){for(var r=1,n=2;n<=e;++n)r*=n;var i=1;for(n=2;n<=t;++n)i*=n;for(n=2;n<=e-t;++n)i*=n;return r/i},calcRationalCurveDerivatives:function(e){for(var t=e.length,r=[],i=[],o=0;o<t;++o){var a=e[o];r[o]=new n.Vector3(a.x,a.y,a.z),i[o]=a.w}for(var s=[],l=0;l<t;++l){var u=r[l].clone();for(o=1;o<=l;++o)u.sub(s[l-o].clone().multiplyScalar(this.calcKoverI(l,o)*i[o]));s[l]=u.divideScalar(i[0])}return s},calcNURBSDerivatives:function(e,t,r,n,i){var o=this.calcBSplineDerivatives(e,t,r,n,i);return this.calcRationalCurveDerivatives(o)},calcSurfacePoint:function(e,t,r,i,o,a,s,l){for(var u=this.findSpan(e,a,r),c=this.findSpan(t,s,i),h=this.calcBasisFunctions(u,a,e,r),d=this.calcBasisFunctions(c,s,t,i),p=[],f=0;f<=t;++f){p[f]=new n.Vector4(0,0,0,0);for(var m=0;m<=e;++m){var v=o[u-e+m][c-t+f].clone(),g=v.w;v.x*=g,v.y*=g,v.z*=g,p[f].add(v.multiplyScalar(h[m]))}}var y=new n.Vector4(0,0,0,0);for(f=0;f<=t;++f)y.add(p[f].multiplyScalar(d[f]));y.divideScalar(y.w),l.set(y.x,y.y,y.z)}},a=function(e,t,r,i,o){n.Curve.call(this),this.degree=e,this.knots=t,this.controlPoints=[],this.startKnot=i||0,this.endKnot=o||this.knots.length-1;for(var a=0;a<r.length;++a){var s=r[a];this.controlPoints[a]=new n.Vector4(s.x,s.y,s.z,s.w)}};(a.prototype=Object.create(n.Curve.prototype)).constructor=a,a.prototype.getPoint=function(e,t){var r=t||new n.Vector3,i=this.knots[this.startKnot]+e*(this.knots[this.endKnot]-this.knots[this.startKnot]),a=o.calcBSplinePoint(this.degree,this.knots,this.controlPoints,i);return 1!=a.w&&a.divideScalar(a.w),r.set(a.x,a.y,a.z)},a.prototype.getTangent=function(e,t){var r=t||new n.Vector3,i=this.knots[0]+e*(this.knots[this.knots.length-1]-this.knots[0]),a=o.calcNURBSDerivatives(this.degree,this.knots,this.controlPoints,i,1);return r.copy(a[1]).normalize(),r},r.d(t,"a",function(){return l});var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(){var e,t,r;function o(e){n.Loader.call(this,e)}function l(e,t){this.textureLoader=e,this.manager=t}function u(){}function c(){}function h(){}function d(){}function p(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t}function f(){}function m(e){var t=e.match(/FBXVersion: (\d+)/);if(t)return parseInt(t[1]);throw new Error("THREE.FBXLoader: Cannot find the version number for the file given.")}function v(e){return e/46186158e3}o.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:o,load:function(e,t,r,i){var o=this,a=""===o.path?n.LoaderUtils.extractUrlBase(e):o.path,s=new n.FileLoader(this.manager);s.setPath(o.path),s.setResponseType("arraybuffer"),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(r){try{t(o.parse(r,a))}catch(t){i?i(t):console.error(t),o.manager.itemError(e)}},r,i)},parse:function(t,r){if(a="Kaydara FBX Binary  \0",(o=t).byteLength>=a.length&&a===A(o,0,a.length))e=(new d).parse(t);else{var i=A(t);if(!function(e){var t=["K","a","y","d","a","r","a","\\","F","B","X","\\","B","i","n","a","r","y","\\","\\"],r=0;function n(t){var n=e[t-1];return e=e.slice(r+t),r++,n}for(var i=0;i<t.length;++i){var o=n(1);if(o===t[i])return!1}return!0}(i))throw new Error("THREE.FBXLoader: Unknown format.");if(m(i)<7e3)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+m(i));e=(new h).parse(i)}var o,a;return new l(new n.TextureLoader(this.manager).setPath(this.resourcePath||r).setCrossOrigin(this.crossOrigin),this.manager).parse(e)}}),l.prototype={constructor:l,parse:function(){t=this.parseConnections();var e=this.parseImages(),n=this.parseTextures(e),i=this.parseMaterials(n),o=this.parseDeformers(),a=(new u).parse(o);return this.parseScene(o,a,i),r},parseConnections:function(){var t=new Map;"Connections"in e&&e.Connections.connections.forEach(function(e){var r=e[0],n=e[1],i=e[2];t.has(r)||t.set(r,{parents:[],children:[]});var o={ID:n,relationship:i};t.get(r).parents.push(o),t.has(n)||t.set(n,{parents:[],children:[]});var a={ID:r,relationship:i};t.get(n).children.push(a)});return t},parseImages:function(){var t={},r={};if("Video"in e.Objects){var n=e.Objects.Video;for(var i in n){var o=n[i];if(t[u=parseInt(i)]=o.RelativeFilename||o.Filename,"Content"in o){var a=o.Content instanceof ArrayBuffer&&o.Content.byteLength>0,s="string"==typeof o.Content&&""!==o.Content;if(a||s){var l=this.parseImage(n[i]);r[o.RelativeFilename||o.Filename]=l}}}}for(var u in t){var c=t[u];void 0!==r[c]?t[u]=r[c]:t[u]=t[u].split("\\").pop()}return t},parseImage:function(e){var t,r=e.Content,n=e.RelativeFilename||e.Filename,i=n.slice(n.lastIndexOf(".")+1).toLowerCase();switch(i){case"bmp":t="image/bmp";break;case"jpg":case"jpeg":t="image/jpeg";break;case"png":t="image/png";break;case"tif":t="image/tiff";break;case"tga":null===this.manager.getHandler(".tga")&&console.warn("FBXLoader: TGA loader not found, skipping ",n),t="image/tga";break;default:return void console.warn('FBXLoader: Image type "'+i+'" is not supported.')}if("string"==typeof r)return"data:"+t+";base64,"+r;var o=new Uint8Array(r);return window.URL.createObjectURL(new Blob([o],{type:t}))},parseTextures:function(t){var r=new Map;if("Texture"in e.Objects){var n=e.Objects.Texture;for(var i in n){var o=this.parseTexture(n[i],t);r.set(parseInt(i),o)}}return r},parseTexture:function(e,t){var r=this.loadTexture(e,t);r.ID=e.id,r.name=e.attrName;var i=e.WrapModeU,o=e.WrapModeV,a=void 0!==i?i.value:0,s=void 0!==o?o.value:0;if(r.wrapS=0===a?n.RepeatWrapping:n.ClampToEdgeWrapping,r.wrapT=0===s?n.RepeatWrapping:n.ClampToEdgeWrapping,"Scaling"in e){var l=e.Scaling.value;r.repeat.x=l[0],r.repeat.y=l[1]}return r},loadTexture:function(e,r){var i,o,a=this.textureLoader.path,s=t.get(e.id).children;void 0!==s&&s.length>0&&void 0!==r[s[0].ID]&&(0!==(i=r[s[0].ID]).indexOf("blob:")&&0!==i.indexOf("data:")||this.textureLoader.setPath(void 0));var l=e.FileName.slice(-3).toLowerCase();if("tga"===l){var u=this.manager.getHandler(".tga");null===u?(console.warn("FBXLoader: TGA loader not found, creating placeholder texture for",e.RelativeFilename),o=new n.Texture):o=u.load(i)}else"psd"===l?(console.warn("FBXLoader: PSD textures are not supported, creating placeholder texture for",e.RelativeFilename),o=new n.Texture):o=this.textureLoader.load(i);return this.textureLoader.setPath(a),o},parseMaterials:function(t){var r=new Map;if("Material"in e.Objects){var n=e.Objects.Material;for(var i in n){var o=this.parseMaterial(n[i],t);null!==o&&r.set(parseInt(i),o)}}return r},parseMaterial:function(e,r){var i=e.id,o=e.attrName,a=e.ShadingModel;if("object"===(void 0===a?"undefined":s(a))&&(a=a.value),!t.has(i))return null;var l,u=this.parseParameters(e,r,i);switch(a.toLowerCase()){case"phong":l=new n.MeshPhongMaterial;break;case"lambert":l=new n.MeshLambertMaterial;break;default:console.warn('THREE.FBXLoader: unknown material type "%s". Defaulting to MeshPhongMaterial.',a),l=new n.MeshPhongMaterial}return l.setValues(u),l.name=o,l},parseParameters:function(e,r,i){var o={};e.BumpFactor&&(o.bumpScale=e.BumpFactor.value),e.Diffuse?o.color=(new n.Color).fromArray(e.Diffuse.value):!e.DiffuseColor||"Color"!==e.DiffuseColor.type&&"ColorRGB"!==e.DiffuseColor.type||(o.color=(new n.Color).fromArray(e.DiffuseColor.value)),e.DisplacementFactor&&(o.displacementScale=e.DisplacementFactor.value),e.Emissive?o.emissive=(new n.Color).fromArray(e.Emissive.value):!e.EmissiveColor||"Color"!==e.EmissiveColor.type&&"ColorRGB"!==e.EmissiveColor.type||(o.emissive=(new n.Color).fromArray(e.EmissiveColor.value)),e.EmissiveFactor&&(o.emissiveIntensity=parseFloat(e.EmissiveFactor.value)),e.Opacity&&(o.opacity=parseFloat(e.Opacity.value)),o.opacity<1&&(o.transparent=!0),e.ReflectionFactor&&(o.reflectivity=e.ReflectionFactor.value),e.Shininess&&(o.shininess=e.Shininess.value),e.Specular?o.specular=(new n.Color).fromArray(e.Specular.value):e.SpecularColor&&"Color"===e.SpecularColor.type&&(o.specular=(new n.Color).fromArray(e.SpecularColor.value));var a=this;return t.get(i).children.forEach(function(e){var t=e.relationship;switch(t){case"Bump":o.bumpMap=a.getTexture(r,e.ID);break;case"Maya|TEX_ao_map":o.aoMap=a.getTexture(r,e.ID);break;case"DiffuseColor":case"Maya|TEX_color_map":o.map=a.getTexture(r,e.ID),o.map.encoding=n.sRGBEncoding;break;case"DisplacementColor":o.displacementMap=a.getTexture(r,e.ID);break;case"EmissiveColor":o.emissiveMap=a.getTexture(r,e.ID),o.emissiveMap.encoding=n.sRGBEncoding;break;case"NormalMap":case"Maya|TEX_normal_map":o.normalMap=a.getTexture(r,e.ID);break;case"ReflectionColor":o.envMap=a.getTexture(r,e.ID),o.envMap.mapping=n.EquirectangularReflectionMapping,o.envMap.encoding=n.sRGBEncoding;break;case"SpecularColor":o.specularMap=a.getTexture(r,e.ID),o.specularMap.encoding=n.sRGBEncoding;break;case"TransparentColor":case"TransparencyFactor":o.alphaMap=a.getTexture(r,e.ID),o.transparent=!0;break;case"AmbientColor":case"ShininessExponent":case"SpecularFactor":case"VectorDisplacementColor":default:console.warn("THREE.FBXLoader: %s map is not supported in three.js, skipping texture.",t)}}),o},getTexture:function(r,n){return"LayeredTexture"in e.Objects&&n in e.Objects.LayeredTexture&&(console.warn("THREE.FBXLoader: layered textures are not supported in three.js. Discarding all but first layer."),n=t.get(n).children[0].ID),r.get(n)},parseDeformers:function(){var r={},n={};if("Deformer"in e.Objects){var i=e.Objects.Deformer;for(var o in i){var a=i[o],s=t.get(parseInt(o));if("Skin"===a.attrType){var l=this.parseSkeleton(s,i);l.ID=o,s.parents.length>1&&console.warn("THREE.FBXLoader: skeleton attached to more than one geometry is not supported."),l.geometryID=s.parents[0].ID,r[o]=l}else if("BlendShape"===a.attrType){var u={id:o};u.rawTargets=this.parseMorphTargets(s,i),u.id=o,s.parents.length>1&&console.warn("THREE.FBXLoader: morph target attached to more than one geometry is not supported."),n[o]=u}}}return{skeletons:r,morphTargets:n}},parseSkeleton:function(e,t){var r=[];return e.children.forEach(function(e){var i=t[e.ID];if("Cluster"===i.attrType){var o={ID:e.ID,indices:[],weights:[],transformLink:(new n.Matrix4).fromArray(i.TransformLink.a)};"Indexes"in i&&(o.indices=i.Indexes.a,o.weights=i.Weights.a),r.push(o)}}),{rawBones:r,bones:[]}},parseMorphTargets:function(e,r){for(var n=[],i=0;i<e.children.length;i++){var o=e.children[i],a=r[o.ID],s={name:a.attrName,initialWeight:a.DeformPercent,id:a.id,fullWeights:a.FullWeights.a};if("BlendShapeChannel"!==a.attrType)return;s.geoID=t.get(parseInt(o.ID)).children.filter(function(e){return void 0===e.relationship})[0].ID,n.push(s)}return n},parseScene:function(i,o,a){r=new n.Group;var s=this.parseModels(i.skeletons,o,a),l=e.Objects.Model,u=this;s.forEach(function(e){var n=l[e.ID];u.setLookAtProperties(e,n),t.get(e.ID).parents.forEach(function(t){var r=s.get(t.ID);void 0!==r&&r.add(e)}),null===e.parent&&r.add(e)}),this.bindSkeleton(i.skeletons,o,s),this.createAmbientLight(),this.setupMorphMaterials(),r.traverse(function(e){if(e.userData.transformData){e.parent&&(e.userData.transformData.parentMatrixWorld=e.parent.matrix);var t=x(e.userData.transformData);e.applyMatrix4(t)}});var h=(new c).parse();1===r.children.length&&r.children[0].isGroup&&(r.children[0].animations=h,r=r.children[0]),r.animations=h},parseModels:function(r,i,o){var a=new Map,s=e.Objects.Model;for(var l in s){var u=parseInt(l),c=s[l],h=t.get(u),d=this.buildSkeleton(h,r,u,c.attrName);if(!d){switch(c.attrType){case"Camera":d=this.createCamera(h);break;case"Light":d=this.createLight(h);break;case"Mesh":d=this.createMesh(h,i,o);break;case"NurbsCurve":d=this.createCurve(h,i);break;case"LimbNode":case"Root":d=new n.Bone;break;case"Null":default:d=new n.Group}d.name=c.attrName?n.PropertyBinding.sanitizeNodeName(c.attrName):"",d.ID=u}this.getTransformData(d,c),a.set(u,d)}return a},buildSkeleton:function(e,t,r,i){var o=null;return e.parents.forEach(function(e){for(var a in t){var s=t[a];s.rawBones.forEach(function(t,a){if(t.ID===e.ID){var l=o;(o=new n.Bone).matrixWorld.copy(t.transformLink),o.name=i?n.PropertyBinding.sanitizeNodeName(i):"",o.ID=r,s.bones[a]=o,null!==l&&o.add(l)}})}}),o},createCamera:function(t){var r,i;if(t.children.forEach(function(t){var r=e.Objects.NodeAttribute[t.ID];void 0!==r&&(i=r)}),void 0===i)r=new n.Object3D;else{var o=0;void 0!==i.CameraProjectionType&&1===i.CameraProjectionType.value&&(o=1);var a=1;void 0!==i.NearPlane&&(a=i.NearPlane.value/1e3);var s=1e3;void 0!==i.FarPlane&&(s=i.FarPlane.value/1e3);var l=window.innerWidth,u=window.innerHeight;void 0!==i.AspectWidth&&void 0!==i.AspectHeight&&(l=i.AspectWidth.value,u=i.AspectHeight.value);var c=l/u,h=45;void 0!==i.FieldOfView&&(h=i.FieldOfView.value);var d=i.FocalLength?i.FocalLength.value:null;switch(o){case 0:r=new n.PerspectiveCamera(h,c,a,s),null!==d&&r.setFocalLength(d);break;case 1:r=new n.OrthographicCamera(-l/2,l/2,u/2,-u/2,a,s);break;default:console.warn("THREE.FBXLoader: Unknown camera type "+o+"."),r=new n.Object3D}}return r},createLight:function(t){var r,i;if(t.children.forEach(function(t){var r=e.Objects.NodeAttribute[t.ID];void 0!==r&&(i=r)}),void 0===i)r=new n.Object3D;else{var o;o=void 0===i.LightType?0:i.LightType.value;var a=16777215;void 0!==i.Color&&(a=(new n.Color).fromArray(i.Color.value));var s=void 0===i.Intensity?1:i.Intensity.value/100;void 0!==i.CastLightOnObject&&0===i.CastLightOnObject.value&&(s=0);var l=0;void 0!==i.FarAttenuationEnd&&(l=void 0!==i.EnableFarAttenuation&&0===i.EnableFarAttenuation.value?0:i.FarAttenuationEnd.value);switch(o){case 0:r=new n.PointLight(a,s,l,1);break;case 1:r=new n.DirectionalLight(a,s);break;case 2:var u=Math.PI/3;void 0!==i.InnerAngle&&(u=n.MathUtils.degToRad(i.InnerAngle.value));var c=0;void 0!==i.OuterAngle&&(c=n.MathUtils.degToRad(i.OuterAngle.value),c=Math.max(c,1)),r=new n.SpotLight(a,s,l,u,c,1);break;default:console.warn("THREE.FBXLoader: Unknown light type "+i.LightType.value+", defaulting to a PointLight."),r=new n.PointLight(a,s)}void 0!==i.CastShadows&&1===i.CastShadows.value&&(r.castShadow=!0)}return r},createMesh:function(e,t,r){var i,o=null,a=null,s=[];return e.children.forEach(function(e){t.has(e.ID)&&(o=t.get(e.ID)),r.has(e.ID)&&s.push(r.get(e.ID))}),s.length>1?a=s:s.length>0?a=s[0]:(a=new n.MeshPhongMaterial({color:13421772}),s.push(a)),"color"in o.attributes&&s.forEach(function(e){e.vertexColors=!0}),o.FBX_Deformer?(s.forEach(function(e){e.skinning=!0}),(i=new n.SkinnedMesh(o,a)).normalizeSkinWeights()):i=new n.Mesh(o,a),i},createCurve:function(e,t){var r=e.children.reduce(function(e,r){return t.has(r.ID)&&(e=t.get(r.ID)),e},null),i=new n.LineBasicMaterial({color:3342591,linewidth:1});return new n.Line(r,i)},getTransformData:function(e,t){var r={};"InheritType"in t&&(r.inheritType=parseInt(t.InheritType.value)),r.eulerOrder="RotationOrder"in t?_(t.RotationOrder.value):"ZYX","Lcl_Translation"in t&&(r.translation=t.Lcl_Translation.value),"PreRotation"in t&&(r.preRotation=t.PreRotation.value),"Lcl_Rotation"in t&&(r.rotation=t.Lcl_Rotation.value),"PostRotation"in t&&(r.postRotation=t.PostRotation.value),"Lcl_Scaling"in t&&(r.scale=t.Lcl_Scaling.value),"ScalingOffset"in t&&(r.scalingOffset=t.ScalingOffset.value),"ScalingPivot"in t&&(r.scalingPivot=t.ScalingPivot.value),"RotationOffset"in t&&(r.rotationOffset=t.RotationOffset.value),"RotationPivot"in t&&(r.rotationPivot=t.RotationPivot.value),e.userData.transformData=r},setLookAtProperties:function(i,o){"LookAtProperty"in o&&t.get(i.ID).children.forEach(function(t){if("LookAtProperty"===t.relationship){var o=e.Objects.Model[t.ID];if("Lcl_Translation"in o){var a=o.Lcl_Translation.value;void 0!==i.target?(i.target.position.fromArray(a),r.add(i.target)):i.lookAt((new n.Vector3).fromArray(a))}}})},bindSkeleton:function(e,r,i){var o=this.parsePoseNodes();for(var a in e){var s=e[a];t.get(parseInt(s.ID)).parents.forEach(function(e){if(r.has(e.ID)){var a=e.ID;t.get(a).parents.forEach(function(e){i.has(e.ID)&&i.get(e.ID).bind(new n.Skeleton(s.bones),o[e.ID])})}})}},parsePoseNodes:function(){var t={};if("Pose"in e.Objects){var r=e.Objects.Pose;for(var i in r)if("BindPose"===r[i].attrType){var o=r[i].PoseNode;Array.isArray(o)?o.forEach(function(e){t[e.Node]=(new n.Matrix4).fromArray(e.Matrix.a)}):t[o.Node]=(new n.Matrix4).fromArray(o.Matrix.a)}}return t},createAmbientLight:function(){if("GlobalSettings"in e&&"AmbientColor"in e.GlobalSettings){var t=e.GlobalSettings.AmbientColor.value,i=t[0],o=t[1],a=t[2];if(0!==i||0!==o||0!==a){var s=new n.Color(i,o,a);r.add(new n.AmbientLight(s,1))}}},setupMorphMaterials:function(){var e=this;r.traverse(function(t){t.isMesh&&t.geometry.morphAttributes.position&&t.geometry.morphAttributes.position.length&&(Array.isArray(t.material)?t.material.forEach(function(r,n){e.setupMorphMaterial(t,r,n)}):e.setupMorphMaterial(t,t.material))})},setupMorphMaterial:function(e,t,n){var i=e.uuid,o=t.uuid,a=!1;if(r.traverse(function(e){e.isMesh&&(Array.isArray(e.material)?e.material.forEach(function(t){t.uuid===o&&e.uuid!==i&&(a=!0)}):e.material.uuid===o&&e.uuid!==i&&(a=!0))}),!0===a){var s=t.clone();s.morphTargets=!0,void 0===n?e.material=s:e.material[n]=s}else t.morphTargets=!0}},u.prototype={constructor:u,parse:function(r){var n=new Map;if("Geometry"in e.Objects){var i=e.Objects.Geometry;for(var o in i){var a=t.get(parseInt(o)),s=this.parseGeometry(a,i[o],r);n.set(parseInt(o),s)}}return n},parseGeometry:function(e,t,r){switch(t.attrType){case"Mesh":return this.parseMeshGeometry(e,t,r);case"NurbsCurve":return this.parseNurbsGeometry(t)}},parseMeshGeometry:function(t,r,n){var i=n.skeletons,o=[],a=t.parents.map(function(t){return e.Objects.Model[t.ID]});if(0!==a.length){var s=t.children.reduce(function(e,t){return void 0!==i[t.ID]&&(e=i[t.ID]),e},null);t.children.forEach(function(e){void 0!==n.morphTargets[e.ID]&&o.push(n.morphTargets[e.ID])});var l=a[0],u={};"RotationOrder"in l&&(u.eulerOrder=_(l.RotationOrder.value)),"InheritType"in l&&(u.inheritType=parseInt(l.InheritType.value)),"GeometricTranslation"in l&&(u.translation=l.GeometricTranslation.value),"GeometricRotation"in l&&(u.rotation=l.GeometricRotation.value),"GeometricScaling"in l&&(u.scale=l.GeometricScaling.value);var c=x(u);return this.genGeometry(r,s,o,c)}},genGeometry:function(e,t,r,i){var o=new n.BufferGeometry;e.attrName&&(o.name=e.attrName);var a=this.parseGeoNode(e,t),s=this.genBuffers(a),l=new n.Float32BufferAttribute(s.vertex,3);if(l.applyMatrix4(i),o.setAttribute("position",l),s.colors.length>0&&o.setAttribute("color",new n.Float32BufferAttribute(s.colors,3)),t&&(o.setAttribute("skinIndex",new n.Uint16BufferAttribute(s.weightsIndices,4)),o.setAttribute("skinWeight",new n.Float32BufferAttribute(s.vertexWeights,4)),o.FBX_Deformer=t),s.normal.length>0){var u=(new n.Matrix3).getNormalMatrix(i),c=new n.Float32BufferAttribute(s.normal,3);c.applyNormalMatrix(u),o.setAttribute("normal",c)}if(s.uvs.forEach(function(e,t){var r="uv"+(t+1).toString();0===t&&(r="uv"),o.setAttribute(r,new n.Float32BufferAttribute(s.uvs[t],2))}),a.material&&"AllSame"!==a.material.mappingType){var h=s.materialIndex[0],d=0;if(s.materialIndex.forEach(function(e,t){e!==h&&(o.addGroup(d,t-d,h),h=e,d=t)}),o.groups.length>0){var p=o.groups[o.groups.length-1],f=p.start+p.count;f!==s.materialIndex.length&&o.addGroup(f,s.materialIndex.length-f,h)}0===o.groups.length&&o.addGroup(0,s.materialIndex.length,s.materialIndex[0])}return this.addMorphTargets(o,e,r,i),o},parseGeoNode:function(e,t){var r={};if(r.vertexPositions=void 0!==e.Vertices?e.Vertices.a:[],r.vertexIndices=void 0!==e.PolygonVertexIndex?e.PolygonVertexIndex.a:[],e.LayerElementColor&&(r.color=this.parseVertexColors(e.LayerElementColor[0])),e.LayerElementMaterial&&(r.material=this.parseMaterialIndices(e.LayerElementMaterial[0])),e.LayerElementNormal&&(r.normal=this.parseNormals(e.LayerElementNormal[0])),e.LayerElementUV){r.uv=[];for(var n=0;e.LayerElementUV[n];)e.LayerElementUV[n].UV&&r.uv.push(this.parseUVs(e.LayerElementUV[n])),n++}return r.weightTable={},null!==t&&(r.skeleton=t,t.rawBones.forEach(function(e,t){e.indices.forEach(function(n,i){void 0===r.weightTable[n]&&(r.weightTable[n]=[]),r.weightTable[n].push({id:t,weight:e.weights[i]})})})),r},genBuffers:function(e){var t={vertex:[],normal:[],colors:[],uvs:[],materialIndex:[],vertexWeights:[],weightsIndices:[]},r=0,n=0,i=!1,o=[],a=[],s=[],l=[],u=[],c=[],h=this;return e.vertexIndices.forEach(function(d,p){var f=!1;d<0&&(d^=-1,f=!0);var m=[],v=[];if(o.push(3*d,3*d+1,3*d+2),e.color){var g=y(p,r,d,e.color);s.push(g[0],g[1],g[2])}if(e.skeleton){if(void 0!==e.weightTable[d]&&e.weightTable[d].forEach(function(e){v.push(e.weight),m.push(e.id)}),v.length>4){i||(console.warn("THREE.FBXLoader: Vertex has more than 4 skinning weights assigned to vertex. Deleting additional weights."),i=!0);var b=[0,0,0,0],w=[0,0,0,0];v.forEach(function(e,t){var r=e,n=m[t];w.forEach(function(e,t,i){if(r>e){i[t]=r,r=e;var o=b[t];b[t]=n,n=o}})}),m=b,v=w}for(;v.length<4;)v.push(0),m.push(0);for(var x=0;x<4;++x)u.push(v[x]),c.push(m[x])}if(e.normal){g=y(p,r,d,e.normal);a.push(g[0],g[1],g[2])}if(e.material&&"AllSame"!==e.material.mappingType)var _=y(p,r,d,e.material)[0];e.uv&&e.uv.forEach(function(e,t){var n=y(p,r,d,e);void 0===l[t]&&(l[t]=[]),l[t].push(n[0]),l[t].push(n[1])}),n++,f&&(h.genFace(t,e,o,_,a,s,l,u,c,n),r++,n=0,o=[],a=[],s=[],l=[],u=[],c=[])}),t},genFace:function(e,t,r,n,i,o,a,s,l,u){for(var c=2;c<u;c++)e.vertex.push(t.vertexPositions[r[0]]),e.vertex.push(t.vertexPositions[r[1]]),e.vertex.push(t.vertexPositions[r[2]]),e.vertex.push(t.vertexPositions[r[3*(c-1)]]),e.vertex.push(t.vertexPositions[r[3*(c-1)+1]]),e.vertex.push(t.vertexPositions[r[3*(c-1)+2]]),e.vertex.push(t.vertexPositions[r[3*c]]),e.vertex.push(t.vertexPositions[r[3*c+1]]),e.vertex.push(t.vertexPositions[r[3*c+2]]),t.skeleton&&(e.vertexWeights.push(s[0]),e.vertexWeights.push(s[1]),e.vertexWeights.push(s[2]),e.vertexWeights.push(s[3]),e.vertexWeights.push(s[4*(c-1)]),e.vertexWeights.push(s[4*(c-1)+1]),e.vertexWeights.push(s[4*(c-1)+2]),e.vertexWeights.push(s[4*(c-1)+3]),e.vertexWeights.push(s[4*c]),e.vertexWeights.push(s[4*c+1]),e.vertexWeights.push(s[4*c+2]),e.vertexWeights.push(s[4*c+3]),e.weightsIndices.push(l[0]),e.weightsIndices.push(l[1]),e.weightsIndices.push(l[2]),e.weightsIndices.push(l[3]),e.weightsIndices.push(l[4*(c-1)]),e.weightsIndices.push(l[4*(c-1)+1]),e.weightsIndices.push(l[4*(c-1)+2]),e.weightsIndices.push(l[4*(c-1)+3]),e.weightsIndices.push(l[4*c]),e.weightsIndices.push(l[4*c+1]),e.weightsIndices.push(l[4*c+2]),e.weightsIndices.push(l[4*c+3])),t.color&&(e.colors.push(o[0]),e.colors.push(o[1]),e.colors.push(o[2]),e.colors.push(o[3*(c-1)]),e.colors.push(o[3*(c-1)+1]),e.colors.push(o[3*(c-1)+2]),e.colors.push(o[3*c]),e.colors.push(o[3*c+1]),e.colors.push(o[3*c+2])),t.material&&"AllSame"!==t.material.mappingType&&(e.materialIndex.push(n),e.materialIndex.push(n),e.materialIndex.push(n)),t.normal&&(e.normal.push(i[0]),e.normal.push(i[1]),e.normal.push(i[2]),e.normal.push(i[3*(c-1)]),e.normal.push(i[3*(c-1)+1]),e.normal.push(i[3*(c-1)+2]),e.normal.push(i[3*c]),e.normal.push(i[3*c+1]),e.normal.push(i[3*c+2])),t.uv&&t.uv.forEach(function(t,r){void 0===e.uvs[r]&&(e.uvs[r]=[]),e.uvs[r].push(a[r][0]),e.uvs[r].push(a[r][1]),e.uvs[r].push(a[r][2*(c-1)]),e.uvs[r].push(a[r][2*(c-1)+1]),e.uvs[r].push(a[r][2*c]),e.uvs[r].push(a[r][2*c+1])})},addMorphTargets:function(t,r,n,i){if(0!==n.length){t.morphTargetsRelative=!0,t.morphAttributes.position=[];var o=this;n.forEach(function(n){n.rawTargets.forEach(function(n){var a=e.Objects.Geometry[n.geoID];void 0!==a&&o.genMorphGeometry(t,r,a,i,n.name)})})}},genMorphGeometry:function(e,t,r,i,o){for(var a=void 0!==t.PolygonVertexIndex?t.PolygonVertexIndex.a:[],s=void 0!==r.Vertices?r.Vertices.a:[],l=void 0!==r.Indexes?r.Indexes.a:[],u=3*e.attributes.position.count,c=new Float32Array(u),h=0;h<l.length;h++){var d=3*l[h];c[d]=s[3*h],c[d+1]=s[3*h+1],c[d+2]=s[3*h+2]}var p={vertexIndices:a,vertexPositions:c},f=this.genBuffers(p),m=new n.Float32BufferAttribute(f.vertex,3);m.name=o||r.attrName,m.applyMatrix4(i),e.morphAttributes.position.push(m)},parseNormals:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Normals.a,i=[];return"IndexToDirect"===r&&("NormalIndex"in e?i=e.NormalIndex.a:"NormalsIndex"in e&&(i=e.NormalsIndex.a)),{dataSize:3,buffer:n,indices:i,mappingType:t,referenceType:r}},parseUVs:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.UV.a,i=[];return"IndexToDirect"===r&&(i=e.UVIndex.a),{dataSize:2,buffer:n,indices:i,mappingType:t,referenceType:r}},parseVertexColors:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType,n=e.Colors.a,i=[];return"IndexToDirect"===r&&(i=e.ColorIndex.a),{dataSize:4,buffer:n,indices:i,mappingType:t,referenceType:r}},parseMaterialIndices:function(e){var t=e.MappingInformationType,r=e.ReferenceInformationType;if("NoMappingInformation"===t)return{dataSize:1,buffer:[0],indices:[0],mappingType:"AllSame",referenceType:r};for(var n=e.Materials.a,i=[],o=0;o<n.length;++o)i.push(o);return{dataSize:1,buffer:n,indices:i,mappingType:t,referenceType:r}},parseNurbsGeometry:function(e){if(void 0===a)return console.error("THREE.FBXLoader: The loader relies on NURBSCurve for any nurbs present in the model. Nurbs will show up as empty geometry."),new n.BufferGeometry;var t=parseInt(e.Order);if(isNaN(t))return console.error("THREE.FBXLoader: Invalid Order %s given for geometry ID: %s",e.Order,e.id),new n.BufferGeometry;for(var r,i,o=t-1,s=e.KnotVector.a,l=[],u=e.Points.a,c=0,h=u.length;c<h;c+=4)l.push((new n.Vector4).fromArray(u,c));if("Closed"===e.Form)l.push(l[0]);else if("Periodic"===e.Form){r=o,i=s.length-1-r;for(c=0;c<o;++c)l.push(l[c])}var d=new a(o,s,l,r,i).getPoints(7*l.length),p=new Float32Array(3*d.length);d.forEach(function(e,t){e.toArray(p,3*t)});var f=new n.BufferGeometry;return f.setAttribute("position",new n.BufferAttribute(p,3)),f}},c.prototype={constructor:c,parse:function(){var e=[],t=this.parseClips();if(void 0!==t)for(var r in t){var n=t[r],i=this.addClip(n);e.push(i)}return e},parseClips:function(){if(void 0!==e.Objects.AnimationCurve){var t=this.parseAnimationCurveNodes();this.parseAnimationCurves(t);var r=this.parseAnimationLayers(t);return this.parseAnimStacks(r)}},parseAnimationCurveNodes:function(){var t=e.Objects.AnimationCurveNode,r=new Map;for(var n in t){var i=t[n];if(null!==i.attrName.match(/S|R|T|DeformPercent/)){var o={id:i.id,attr:i.attrName,curves:{}};r.set(o.id,o)}}return r},parseAnimationCurves:function(r){var n=e.Objects.AnimationCurve;for(var i in n){var o={id:n[i].id,times:n[i].KeyTime.a.map(v),values:n[i].KeyValueFloat.a},a=t.get(o.id);if(void 0!==a){var s=a.parents[0].ID,l=a.parents[0].relationship;l.match(/X/)?r.get(s).curves.x=o:l.match(/Y/)?r.get(s).curves.y=o:l.match(/Z/)?r.get(s).curves.z=o:l.match(/d|DeformPercent/)&&r.has(s)&&(r.get(s).curves.morph=o)}}},parseAnimationLayers:function(i){var o=e.Objects.AnimationLayer,a=new Map;for(var s in o){var l=[],u=t.get(parseInt(s));if(void 0!==u)u.children.forEach(function(o,a){if(i.has(o.ID)){var s=i.get(o.ID);if(void 0!==s.curves.x||void 0!==s.curves.y||void 0!==s.curves.z){if(void 0===l[a])if(void 0!==(f=t.get(o.ID).parents.filter(function(e){return void 0!==e.relationship})[0].ID)){if(void 0===(c=e.Objects.Model[f.toString()]))return void console.warn("THREE.FBXLoader: Encountered a unused curve.",o);var u={modelName:c.attrName?n.PropertyBinding.sanitizeNodeName(c.attrName):"",ID:c.id,initialPosition:[0,0,0],initialRotation:[0,0,0],initialScale:[1,1,1]};r.traverse(function(e){e.ID===c.id&&(u.transform=e.matrix,e.userData.transformData&&(u.eulerOrder=e.userData.transformData.eulerOrder))}),u.transform||(u.transform=new n.Matrix4),"PreRotation"in c&&(u.preRotation=c.PreRotation.value),"PostRotation"in c&&(u.postRotation=c.PostRotation.value),l[a]=u}l[a]&&(l[a][s.attr]=s)}else if(void 0!==s.curves.morph){if(void 0===l[a]){var c,h=t.get(o.ID).parents.filter(function(e){return void 0!==e.relationship})[0].ID,d=t.get(h).parents[0].ID,p=t.get(d).parents[0].ID,f=t.get(p).parents[0].ID;u={modelName:(c=e.Objects.Model[f]).attrName?n.PropertyBinding.sanitizeNodeName(c.attrName):"",morphName:e.Objects.Deformer[h].attrName};l[a]=u}l[a][s.attr]=s}}}),a.set(parseInt(s),l)}return a},parseAnimStacks:function(r){var n=e.Objects.AnimationStack,i={};for(var o in n){var a=t.get(parseInt(o)).children;a.length>1&&console.warn("THREE.FBXLoader: Encountered an animation stack with multiple layers, this is currently not supported. Ignoring subsequent layers.");var s=r.get(a[0].ID);i[o]={name:n[o].attrName,layer:s}}return i},addClip:function(e){var t=[],r=this;return e.layer.forEach(function(e){t=t.concat(r.generateTracks(e))}),new n.AnimationClip(e.name,-1,t)},generateTracks:function(e){var t=[],r=new n.Vector3,i=new n.Quaternion,o=new n.Vector3;if(e.transform&&e.transform.decompose(r,i,o),r=r.toArray(),i=(new n.Euler).setFromQuaternion(i,e.eulerOrder).toArray(),o=o.toArray(),void 0!==e.T&&Object.keys(e.T.curves).length>0){var a=this.generateVectorTrack(e.modelName,e.T.curves,r,"position");void 0!==a&&t.push(a)}if(void 0!==e.R&&Object.keys(e.R.curves).length>0){var s=this.generateRotationTrack(e.modelName,e.R.curves,i,e.preRotation,e.postRotation,e.eulerOrder);void 0!==s&&t.push(s)}if(void 0!==e.S&&Object.keys(e.S.curves).length>0){var l=this.generateVectorTrack(e.modelName,e.S.curves,o,"scale");void 0!==l&&t.push(l)}if(void 0!==e.DeformPercent){var u=this.generateMorphTrack(e);void 0!==u&&t.push(u)}return t},generateVectorTrack:function(e,t,r,i){var o=this.getTimesForAllAxes(t),a=this.getKeyframeTrackValues(o,t,r);return new n.VectorKeyframeTrack(e+"."+i,o,a)},generateRotationTrack:function(e,t,r,i,o,a){void 0!==t.x&&(this.interpolateRotations(t.x),t.x.values=t.x.values.map(n.MathUtils.degToRad)),void 0!==t.y&&(this.interpolateRotations(t.y),t.y.values=t.y.values.map(n.MathUtils.degToRad)),void 0!==t.z&&(this.interpolateRotations(t.z),t.z.values=t.z.values.map(n.MathUtils.degToRad));var s=this.getTimesForAllAxes(t),l=this.getKeyframeTrackValues(s,t,r);void 0!==i&&((i=i.map(n.MathUtils.degToRad)).push(a),i=(new n.Euler).fromArray(i),i=(new n.Quaternion).setFromEuler(i)),void 0!==o&&((o=o.map(n.MathUtils.degToRad)).push(a),o=(new n.Euler).fromArray(o),o=(new n.Quaternion).setFromEuler(o).invert());for(var u=new n.Quaternion,c=new n.Euler,h=[],d=0;d<l.length;d+=3)c.set(l[d],l[d+1],l[d+2],a),u.setFromEuler(c),void 0!==i&&u.premultiply(i),void 0!==o&&u.multiply(o),u.toArray(h,d/3*4);return new n.QuaternionKeyframeTrack(e+".quaternion",s,h)},generateMorphTrack:function(e){var t=e.DeformPercent.curves.morph,i=t.values.map(function(e){return e/100}),o=r.getObjectByName(e.modelName).morphTargetDictionary[e.morphName];return new n.NumberKeyframeTrack(e.modelName+".morphTargetInfluences["+o+"]",t.times,i)},getTimesForAllAxes:function(e){var t=[];return void 0!==e.x&&(t=t.concat(e.x.times)),void 0!==e.y&&(t=t.concat(e.y.times)),void 0!==e.z&&(t=t.concat(e.z.times)),t=t.sort(function(e,t){return e-t}).filter(function(e,t,r){return r.indexOf(e)==t})},getKeyframeTrackValues:function(e,t,r){var n=r,i=[],o=-1,a=-1,s=-1;return e.forEach(function(e){if(t.x&&(o=t.x.times.indexOf(e)),t.y&&(a=t.y.times.indexOf(e)),t.z&&(s=t.z.times.indexOf(e)),-1!==o){var r=t.x.values[o];i.push(r),n[0]=r}else i.push(n[0]);if(-1!==a){var l=t.y.values[a];i.push(l),n[1]=l}else i.push(n[1]);if(-1!==s){var u=t.z.values[s];i.push(u),n[2]=u}else i.push(n[2])}),i},interpolateRotations:function(e){for(var t=1;t<e.values.length;t++){var r=e.values[t-1],n=e.values[t]-r,i=Math.abs(n);if(i>=180){for(var o=i/180,a=n/o,s=r+a,l=e.times[t-1],u=(e.times[t]-l)/o,c=l+u,h=[],d=[];c<e.times[t];)h.push(c),c+=u,d.push(s),s+=a;e.times=S(e.times,t,h),e.values=S(e.values,t,d)}}}},h.prototype={constructor:h,getPrevNode:function(){return this.nodeStack[this.currentIndent-2]},getCurrentNode:function(){return this.nodeStack[this.currentIndent-1]},getCurrentProp:function(){return this.currentProp},pushStack:function(e){this.nodeStack.push(e),this.currentIndent+=1},popStack:function(){this.nodeStack.pop(),this.currentIndent-=1},setCurrentProp:function(e,t){this.currentProp=e,this.currentPropName=t},parse:function(e){this.currentIndent=0,this.allNodes=new f,this.nodeStack=[],this.currentProp=[],this.currentPropName="";var t=this,r=e.split(/[\r\n]+/);return r.forEach(function(e,n){var i=e.match(/^[\s\t]*;/),o=e.match(/^[\s\t]*$/);if(!i&&!o){var a=e.match("^\\t{"+t.currentIndent+"}(\\w+):(.*){",""),s=e.match("^\\t{"+t.currentIndent+"}(\\w+):[\\s\\t\\r\\n](.*)"),l=e.match("^\\t{"+(t.currentIndent-1)+"}}");a?t.parseNodeBegin(e,a):s?t.parseNodeProperty(e,s,r[++n]):l?t.popStack():e.match(/^[^\s\t}]/)&&t.parseNodePropertyContinued(e)}}),this.allNodes},parseNodeBegin:function(e,t){var r=t[1].trim().replace(/^"/,"").replace(/"$/,""),n=t[2].split(",").map(function(e){return e.trim().replace(/^"/,"").replace(/"$/,"")}),i={name:r},o=this.parseNodeAttr(n),a=this.getCurrentNode();0===this.currentIndent?this.allNodes.add(r,i):r in a?("PoseNode"===r?a.PoseNode.push(i):void 0!==a[r].id&&(a[r]={},a[r][a[r].id]=a[r]),""!==o.id&&(a[r][o.id]=i)):"number"==typeof o.id?(a[r]={},a[r][o.id]=i):"Properties70"!==r&&(a[r]="PoseNode"===r?[i]:i),"number"==typeof o.id&&(i.id=o.id),""!==o.name&&(i.attrName=o.name),""!==o.type&&(i.attrType=o.type),this.pushStack(i)},parseNodeAttr:function(e){var t=e[0];""!==e[0]&&(t=parseInt(e[0]),isNaN(t)&&(t=e[0]));var r="",n="";return e.length>1&&(r=e[1].replace(/^(\w+)::/,""),n=e[2]),{id:t,name:r,type:n}},parseNodeProperty:function(e,t,r){var n=t[1].replace(/^"/,"").replace(/"$/,"").trim(),i=t[2].replace(/^"/,"").replace(/"$/,"").trim();"Content"===n&&","===i&&(i=r.replace(/"/g,"").replace(/,$/,"").trim());var o=this.getCurrentNode();if("Properties70"!==o.name){if("C"===n){var a=i.split(",").slice(1),s=parseInt(a[0]),l=parseInt(a[1]),u=i.split(",").slice(3);n="connections",function(e,t){for(var r=0,n=e.length,i=t.length;r<i;r++,n++)e[n]=t[r]}(i=[s,l],u=u.map(function(e){return e.trim().replace(/^"/,"")})),void 0===o[n]&&(o[n]=[])}"Node"===n&&(o.id=i),n in o&&Array.isArray(o[n])?o[n].push(i):"a"!==n?o[n]=i:o.a=i,this.setCurrentProp(o,n),"a"===n&&","!==i.slice(-1)&&(o.a=T(i))}else this.parseNodeSpecialProperty(e,n,i)},parseNodePropertyContinued:function(e){var t=this.getCurrentNode();t.a+=e,","!==e.slice(-1)&&(t.a=T(t.a))},parseNodeSpecialProperty:function(e,t,r){var n=r.split('",').map(function(e){return e.trim().replace(/^\"/,"").replace(/\s/,"_")}),i=n[0],o=n[1],a=n[2],s=n[3],l=n[4];switch(o){case"int":case"enum":case"bool":case"ULongLong":case"double":case"Number":case"FieldOfView":l=parseFloat(l);break;case"Color":case"ColorRGB":case"Vector3D":case"Lcl_Translation":case"Lcl_Rotation":case"Lcl_Scaling":l=T(l)}this.getPrevNode()[i]={type:o,type2:a,flag:s,value:l},this.setCurrentProp(this.getPrevNode(),i)}},d.prototype={constructor:d,parse:function(e){var t=new p(e);t.skip(23);var r=t.getUint32();if(r<6400)throw new Error("THREE.FBXLoader: FBX version not supported, FileVersion: "+r);for(var n=new f;!this.endOfContent(t);){var i=this.parseNode(t,r);null!==i&&n.add(i.name,i)}return n},endOfContent:function(e){return e.size()%16==0?(e.getOffset()+160+16&-16)>=e.size():e.getOffset()+160+16>=e.size()},parseNode:function(e,t){var r={},n=t>=7500?e.getUint64():e.getUint32(),i=t>=7500?e.getUint64():e.getUint32();t>=7500?e.getUint64():e.getUint32();var o=e.getUint8(),a=e.getString(o);if(0===n)return null;for(var s=[],l=0;l<i;l++)s.push(this.parseProperty(e));var u=s.length>0?s[0]:"",c=s.length>1?s[1]:"",h=s.length>2?s[2]:"";for(r.singleProperty=1===i&&e.getOffset()===n;n>e.getOffset();){var d=this.parseNode(e,t);null!==d&&this.parseSubNode(a,r,d)}return r.propertyList=s,"number"==typeof u&&(r.id=u),""!==c&&(r.attrName=c),""!==h&&(r.attrType=h),""!==a&&(r.name=a),r},parseSubNode:function(e,t,r){if(!0===r.singleProperty){var n=r.propertyList[0];Array.isArray(n)?(t[r.name]=r,r.a=n):t[r.name]=n}else if("Connections"===e&&"C"===r.name){var i=[];r.propertyList.forEach(function(e,t){0!==t&&i.push(e)}),void 0===t.connections&&(t.connections=[]),t.connections.push(i)}else if("Properties70"===r.name){Object.keys(r).forEach(function(e){t[e]=r[e]})}else if("Properties70"===e&&"P"===r.name){var o,a=r.propertyList[0],s=r.propertyList[1],l=r.propertyList[2],u=r.propertyList[3];0===a.indexOf("Lcl ")&&(a=a.replace("Lcl ","Lcl_")),0===s.indexOf("Lcl ")&&(s=s.replace("Lcl ","Lcl_")),o="Color"===s||"ColorRGB"===s||"Vector"===s||"Vector3D"===s||0===s.indexOf("Lcl_")?[r.propertyList[4],r.propertyList[5],r.propertyList[6]]:r.propertyList[4],t[a]={type:s,type2:l,flag:u,value:o}}else void 0===t[r.name]?"number"==typeof r.id?(t[r.name]={},t[r.name][r.id]=r):t[r.name]=r:"PoseNode"===r.name?(Array.isArray(t[r.name])||(t[r.name]=[t[r.name]]),t[r.name].push(r)):void 0===t[r.name][r.id]&&(t[r.name][r.id]=r)},parseProperty:function(e){var t=e.getString(1);switch(t){case"C":return e.getBoolean();case"D":return e.getFloat64();case"F":return e.getFloat32();case"I":return e.getInt32();case"L":return e.getInt64();case"R":var r=e.getUint32();return e.getArrayBuffer(r);case"S":r=e.getUint32();return e.getString(r);case"Y":return e.getInt16();case"b":case"c":case"d":case"f":case"i":case"l":var n=e.getUint32(),o=e.getUint32(),a=e.getUint32();if(0===o)switch(t){case"b":case"c":return e.getBooleanArray(n);case"d":return e.getFloat64Array(n);case"f":return e.getFloat32Array(n);case"i":return e.getInt32Array(n);case"l":return e.getInt64Array(n)}void 0===i.a&&console.error("THREE.FBXLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var s=new p(new i.a(new Uint8Array(e.getArrayBuffer(a))).decompress().buffer);switch(t){case"b":case"c":return s.getBooleanArray(n);case"d":return s.getFloat64Array(n);case"f":return s.getFloat32Array(n);case"i":return s.getInt32Array(n);case"l":return s.getInt64Array(n)}default:throw new Error("THREE.FBXLoader: Unknown property type "+t)}}},p.prototype={constructor:p,getOffset:function(){return this.offset},size:function(){return this.dv.buffer.byteLength},skip:function(e){this.offset+=e},getBoolean:function(){return 1==(1&this.getUint8())},getBooleanArray:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getBoolean());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getInt64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),2147483648&t?(t=4294967295&~t,4294967295===(e=4294967295&~e)&&(t=t+1&4294967295),-(4294967296*t+(e=e+1&4294967295))):4294967296*t+e},getInt64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt64());return t},getUint64:function(){var e,t;return this.littleEndian?(e=this.getUint32(),t=this.getUint32()):(t=this.getUint32(),e=this.getUint32()),4294967296*t+e},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat64());return t},getArrayBuffer:function(e){var t=this.dv.buffer.slice(this.offset,this.offset+e);return this.offset+=e,t},getString:function(e){for(var t=[],r=0;r<e;r++)t[r]=this.getUint8();var i=t.indexOf(0);return i>=0&&(t=t.slice(0,i)),n.LoaderUtils.decodeText(new Uint8Array(t))}},f.prototype={constructor:f,add:function(e,t){this[e]=t}};var g=[];function y(e,t,r,n){var i;switch(n.mappingType){case"ByPolygonVertex":i=e;break;case"ByPolygon":i=t;break;case"ByVertice":i=r;break;case"AllSame":i=n.indices[0];break;default:console.warn("THREE.FBXLoader: unknown attribute mapping type "+n.mappingType)}"IndexToDirect"===n.referenceType&&(i=n.indices[i]);var o=i*n.dataSize,a=o+n.dataSize;return function(e,t,r,n){for(var i=r,o=0;i<n;i++,o++)e[o]=t[i];return e}(g,n.buffer,o,a)}var b=new n.Euler,w=new n.Vector3;function x(e){var t,r=new n.Matrix4,i=new n.Matrix4,o=new n.Matrix4,a=new n.Matrix4,s=new n.Matrix4,l=new n.Matrix4,u=new n.Matrix4,c=new n.Matrix4,h=new n.Matrix4,d=new n.Matrix4,p=new n.Matrix4,f=e.inheritType?e.inheritType:0;(e.translation&&r.setPosition(w.fromArray(e.translation)),e.preRotation)&&((t=e.preRotation.map(n.MathUtils.degToRad)).push(e.eulerOrder),i.makeRotationFromEuler(b.fromArray(t)));e.rotation&&((t=e.rotation.map(n.MathUtils.degToRad)).push(e.eulerOrder),o.makeRotationFromEuler(b.fromArray(t)));e.postRotation&&((t=e.postRotation.map(n.MathUtils.degToRad)).push(e.eulerOrder),a.makeRotationFromEuler(b.fromArray(t)));e.scale&&s.scale(w.fromArray(e.scale)),e.scalingOffset&&u.setPosition(w.fromArray(e.scalingOffset)),e.scalingPivot&&l.setPosition(w.fromArray(e.scalingPivot)),e.rotationOffset&&c.setPosition(w.fromArray(e.rotationOffset)),e.rotationPivot&&h.setPosition(w.fromArray(e.rotationPivot)),e.parentMatrixWorld&&(d=e.parentMatrixWorld);var m=i.multiply(o).multiply(a),v=new n.Matrix4;d.extractRotation(v),(new n.Matrix4).copyPosition(d);var g=new n.Matrix4;g.copy(v).invert().multiply(d);var y=new n.Matrix4;if(0===f)y.copy(v).multiply(m).multiply(g).multiply(s);else if(1===f)y.copy(v).multiply(g).multiply(m).multiply(s);else{var x=new n.Matrix4;x.copy(s).invert();var _=(new n.Matrix4).multiply(g).multiply(x);y.copy(v).multiply(m).multiply(_).multiply(s)}var T=new n.Matrix4;T.copy(h).invert();var A=new n.Matrix4;A.copy(l).invert();var S=new n.Matrix4;S.copy(r).multiply(c).multiply(h).multiply(i).multiply(o).multiply(a).multiply(T).multiply(u).multiply(l).multiply(s).multiply(A);var E=(new n.Matrix4).copyPosition(S),C=(new n.Matrix4).copy(d).multiply(E);return p.copyPosition(C),S=(new n.Matrix4).multiply(p).multiply(y)}function _(e){var t=["ZYX","YZX","XZY","ZXY","YXZ","XYZ"];return 6===(e=e||0)?(console.warn("THREE.FBXLoader: unsupported Euler Order: Spherical XYZ. Animations and rotations may be incorrect."),t[0]):t[e]}function T(e){return e.split(",").map(function(e){return parseFloat(e)})}function A(e,t,r){return void 0===t&&(t=0),void 0===r&&(r=e.byteLength),n.LoaderUtils.decodeText(new Uint8Array(e,t,r))}function S(e,t,r){return e.slice(0,t).concat(r).concat(e.slice(t))}return o}()},"/nNp":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("6+nK"),i=r("aC6u");function o(e,t){i.a.call(this,e),t=t||{},this.shared=void 0===t.shared||t.shared,this.unique=void 0!==t.unique&&t.unique}o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.build=function(e,t,r,a){if(t=t||this.getType(e),this.getShared(e,t)){var s=this.getUnique(e,t);s&&void 0===this.constructor.uuid&&(this.constructor.uuid=n.MathUtils.generateUUID()),r=e.getUuid(r||this.getUuid(),!s);var l=e.getNodeData(r),u=l.output||this.getType(e);if(e.analyzing)return(l.deps||0)>0||this.getLabel()?(this.appendDepsNode(e,l,t),this.generate(e,t,r)):i.a.prototype.build.call(this,e,t,r);if(s)return l.name=l.name||i.a.prototype.build.call(this,e,t,r),l.name;if(!this.getLabel()&&(!this.getShared(e,u)||e.context.ignoreCache||1===l.deps))return i.a.prototype.build.call(this,e,t,r);r=this.getUuid(!1);var c=this.getTemp(e,r);if(c)return e.format(c,u,t);c=o.prototype.generate.call(this,e,t,r,l.output,a);var h=this.generate(e,u,r);return e.addNodeCode(c+" = "+h+";"),e.format(c,u,t)}return i.a.prototype.build.call(this,e,t,r)},o.prototype.getShared=function(e,t){return"sampler2D"!==t&&"samplerCube"!==t&&this.shared},o.prototype.getUnique=function(){return this.unique},o.prototype.setLabel=function(e){return this.label=e,this},o.prototype.getLabel=function(){return this.label},o.prototype.getUuid=function(e){var t=(e||void 0==e)&&this.constructor.uuid||this.uuid;return"string"==typeof this.scope&&(t=this.scope+"-"+t),t},o.prototype.getTemp=function(e,t){t=t||this.uuid;var r=e.getVars()[t];return r?r.name:void 0},o.prototype.generate=function(e,t,r,n,i){return this.getShared(e,t)||console.error("THREE.TempNode is not shared!"),r=r||this.uuid,e.getTempVar(r,n||this.getType(e),i,this.getLabel()).name}},"3dmC":function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i={hilbert2D:function(e,t,r,o,a,s,l){e=void 0!==e?e:new n.Vector3(0,0,0);var u=(t=void 0!==t?t:10)/2,c=(r=void 0!==r?r:1,o=void 0!==o?o:0,a=void 0!==a?a:1,s=void 0!==s?s:2,l=void 0!==l?l:3,[new n.Vector3(e.x-u,e.y,e.z-u),new n.Vector3(e.x-u,e.y,e.z+u),new n.Vector3(e.x+u,e.y,e.z+u),new n.Vector3(e.x+u,e.y,e.z-u)]),h=[c[o],c[a],c[s],c[l]];if(0<=--r){var d=[];return Array.prototype.push.apply(d,i.hilbert2D(h[0],u,r,o,l,s,a)),Array.prototype.push.apply(d,i.hilbert2D(h[1],u,r,o,a,s,l)),Array.prototype.push.apply(d,i.hilbert2D(h[2],u,r,o,a,s,l)),Array.prototype.push.apply(d,i.hilbert2D(h[3],u,r,s,a,o,l)),d}return h},hilbert3D:function(e,t,r,o,a,s,l,u,c,h,d){e=void 0!==e?e:new n.Vector3(0,0,0);var p=(t=void 0!==t?t:10)/2,f=(r=void 0!==r?r:1,o=void 0!==o?o:0,a=void 0!==a?a:1,s=void 0!==s?s:2,l=void 0!==l?l:3,u=void 0!==u?u:4,c=void 0!==c?c:5,h=void 0!==h?h:6,d=void 0!==d?d:7,[new n.Vector3(e.x-p,e.y+p,e.z-p),new n.Vector3(e.x-p,e.y+p,e.z+p),new n.Vector3(e.x-p,e.y-p,e.z+p),new n.Vector3(e.x-p,e.y-p,e.z-p),new n.Vector3(e.x+p,e.y-p,e.z-p),new n.Vector3(e.x+p,e.y-p,e.z+p),new n.Vector3(e.x+p,e.y+p,e.z+p),new n.Vector3(e.x+p,e.y+p,e.z-p)]),m=[f[o],f[a],f[s],f[l],f[u],f[c],f[h],f[d]];if(--r>=0){var v=[];return Array.prototype.push.apply(v,i.hilbert3D(m[0],p,r,o,l,u,d,h,c,s,a)),Array.prototype.push.apply(v,i.hilbert3D(m[1],p,r,o,d,h,a,s,c,u,l)),Array.prototype.push.apply(v,i.hilbert3D(m[2],p,r,o,d,h,a,s,c,u,l)),Array.prototype.push.apply(v,i.hilbert3D(m[3],p,r,s,l,o,a,h,d,u,c)),Array.prototype.push.apply(v,i.hilbert3D(m[4],p,r,s,l,o,a,h,d,u,c)),Array.prototype.push.apply(v,i.hilbert3D(m[5],p,r,u,l,s,c,h,a,o,d)),Array.prototype.push.apply(v,i.hilbert3D(m[6],p,r,u,l,s,c,h,a,o,d)),Array.prototype.push.apply(v,i.hilbert3D(m[7],p,r,h,c,s,a,o,l,u,d)),v}return m}}},"5AVf":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("6+nK"),i=r("OkqS"),o=function(e){n.Loader.call(this,e)};o.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:o,load:function(e,t,r,i){var o=this,a=""===o.path?n.LoaderUtils.extractUrlBase(e):o.path,s=new n.FileLoader(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(r){try{t(o.parse(r,a))}catch(t){i?i(t):console.error(t),o.manager.itemError(e)}},r,i)},options:{set convertUpAxis(e){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},parse:function(e,t){function r(e,t){for(var r=[],n=e.childNodes,i=0,o=n.length;i<o;i++){var a=n[i];a.nodeName===t&&r.push(a)}return r}function o(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=t[n];return r}function a(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=parseFloat(t[n]);return r}function s(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),r=new Array(t.length),n=0,i=t.length;n<i;n++)r[n]=parseInt(t[n]);return r}function l(e){return e.substring(1)}function u(e){return 0===Object.keys(e).length}function c(e,t,n,i){var o=r(e,t)[0];if(void 0!==o)for(var a=r(o,n),s=0;s<a.length;s++)i(a[s])}function h(e,t){for(var r in e){e[r].build=t(e[r])}}function d(e,t){return void 0!==e.build?e.build:(e.build=t(e),e.build)}function p(e){for(var t={inputs:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":var o=l(i.getAttribute("source")),a=i.getAttribute("semantic");t.inputs[a]=o}}return t}function f(e){var t={},r=e.getAttribute("target").split("/"),n=r.shift(),i=r.shift(),o=-1!==i.indexOf("("),a=-1!==i.indexOf(".");if(a)i=(r=i.split(".")).shift(),t.member=r.shift();else if(o){var s=i.split("(");i=s.shift();for(var u=0;u<s.length;u++)s[u]=parseInt(s[u].replace(/\)/,""));t.indices=s}return t.id=n,t.sid=i,t.arraySyntax=o,t.memberSyntax=a,t.sampler=l(e.getAttribute("source")),t}function m(e){var t=[],r=e.channels,n=e.samplers,i=e.sources;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o],s=n[a.sampler],l=s.inputs.INPUT,u=s.inputs.OUTPUT;x(g(a,i[l],i[u]),t)}return t}function v(e){return d(qe.animations[e],m)}function g(e,t,r){var n,i,o,a,s,l,u=qe.nodes[e.id],c=Ie(u.id),h=u.transforms[e.sid],d=u.matrix.clone().transpose(),p={};switch(h){case"matrix":for(o=0,a=t.array.length;o<a;o++)if(n=t.array[o],i=o*r.stride,void 0===p[n]&&(p[n]={}),!0===e.arraySyntax){var f=r.array[i],m=e.indices[0]+4*e.indices[1];p[n][m]=f}else for(s=0,l=r.stride;s<l;s++)p[n][s]=r.array[i+s];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',h)}var v=function(e,t){var r=[];for(var n in e)r.push({time:parseFloat(n),value:e[n]});r.sort(function(e,t){return e.time-t.time});for(var i=0;i<16;i++)_(r,i,t.elements[i]);return r}(p,d);return{name:c.uuid,keyframes:v}}var y=new n.Vector3,b=new n.Vector3,w=new n.Quaternion;function x(e,t){for(var r=e.keyframes,i=e.name,o=[],a=[],s=[],l=[],u=0,c=r.length;u<c;u++){var h=r[u],d=h.time,p=h.value;Te.fromArray(p).transpose(),Te.decompose(y,w,b),o.push(d),a.push(y.x,y.y,y.z),s.push(w.x,w.y,w.z,w.w),l.push(b.x,b.y,b.z)}return a.length>0&&t.push(new n.VectorKeyframeTrack(i+".position",o,a)),s.length>0&&t.push(new n.QuaternionKeyframeTrack(i+".quaternion",o,s)),l.length>0&&t.push(new n.VectorKeyframeTrack(i+".scale",o,l)),t}function _(e,t,r){var n,i,o,a=!0;for(i=0,o=e.length;i<o;i++)void 0===(n=e[i]).value[t]?n.value[t]=null:a=!1;if(!0===a)for(i=0,o=e.length;i<o;i++)(n=e[i]).value[t]=r;else!function(e,t){for(var r,n,i=0,o=e.length;i<o;i++){var a=e[i];if(null===a.value[t]){if(r=T(e,i,t),n=A(e,i,t),null===r){a.value[t]=n.value[t];continue}if(null===n){a.value[t]=r.value[t];continue}S(a,r,n,t)}}}(e,t)}function T(e,t,r){for(;t>=0;){var n=e[t];if(null!==n.value[r])return n;t--}return null}function A(e,t,r){for(;t<e.length;){var n=e[t];if(null!==n.value[r])return n;t++}return null}function S(e,t,r,n){r.time-t.time!=0?e.value[n]=(e.time-t.time)*(r.value[n]-t.value[n])/(r.time-t.time)+t.value[n]:e.value[n]=t.value[n]}function E(e){for(var t=[],r=e.name,i=e.end-e.start||-1,o=e.animations,a=0,s=o.length;a<s;a++)for(var l=v(o[a]),u=0,c=l.length;u<c;u++)t.push(l[u]);return new n.AnimationClip(r,i,t)}function C(e){return d(qe.clips[e],E)}function M(e){for(var t={sources:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=a(i.textContent);break;case"source":var o=i.getAttribute("id");t.sources[o]=ie(i);break;case"joints":t.joints=N(i);break;case"vertex_weights":t.vertexWeights=O(i)}}return t}function N(e){for(var t={inputs:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":var o=i.getAttribute("semantic"),a=l(i.getAttribute("source"));t.inputs[o]=a}}return t}function O(e){for(var t={inputs:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":var o=i.getAttribute("semantic"),a=l(i.getAttribute("source")),u=parseInt(i.getAttribute("offset"));t.inputs[o]={id:a,offset:u};break;case"vcount":t.vcount=s(i.textContent);break;case"v":t.v=s(i.textContent)}}return t}function R(e){var t={id:e.id},r=qe.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){var t,r,i,o={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},a=e.sources,s=e.vertexWeights,l=s.vcount,u=s.v,c=s.inputs.JOINT.offset,h=s.inputs.WEIGHT.offset,d=e.sources[e.joints.inputs.JOINT],p=e.sources[e.joints.inputs.INV_BIND_MATRIX],f=a[s.inputs.WEIGHT.id].array,m=0;for(t=0,i=l.length;t<i;t++){var v=l[t],g=[];for(r=0;r<v;r++){var y=u[m+c],b=u[m+h],w=f[b];g.push({index:y,weight:w}),m+=2}for(g.sort(A),r=0;r<4;r++){var x=g[r];void 0!==x?(o.indices.array.push(x.index),o.weights.array.push(x.weight)):(o.indices.array.push(0),o.weights.array.push(0))}}e.bindShapeMatrix?o.bindMatrix=(new n.Matrix4).fromArray(e.bindShapeMatrix).transpose():o.bindMatrix=(new n.Matrix4).identity();for(t=0,i=d.array.length;t<i;t++){var _=d.array[t],T=(new n.Matrix4).fromArray(p.array,t*p.stride).transpose();o.joints.push({name:_,boneInverse:T})}return o;function A(e,t){return t.weight-e.weight}}(e.skin),r.sources.skinIndices=t.skin.indices,r.sources.skinWeights=t.skin.weights),t}function k(e){return void 0!==e.build?e.build:e.init_from}function L(e){var t=qe.images[e];return void 0!==t?d(t,k):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function I(e){for(var t={surfaces:{},samplers:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"newparam":P(i,t);break;case"technique":t.technique=U(i);break;case"extra":t.extra=G(i)}}return t}function P(e,t){for(var r=e.getAttribute("sid"),n=0,i=e.childNodes.length;n<i;n++){var o=e.childNodes[n];if(1===o.nodeType)switch(o.nodeName){case"surface":t.surfaces[r]=B(o);break;case"sampler2D":t.samplers[r]=D(o)}}}function B(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"init_from":t.init_from=i.textContent}}return t}function D(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"source":t.source=i.textContent}}return t}function U(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=i.nodeName,t.parameters=F(i)}}return t}function F(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[i.nodeName]=z(i);break;case"transparent":t[i.nodeName]={opaque:i.getAttribute("opaque"),data:z(i)}}}return t}function z(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"color":t[i.nodeName]=a(i.textContent);break;case"float":t[i.nodeName]=parseFloat(i.textContent);break;case"texture":t[i.nodeName]={id:i.getAttribute("texture"),extra:V(i)}}}return t}function V(e){for(var t={technique:{}},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"extra":j(i,t)}}return t}function j(e,t){for(var r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"technique":H(i,t)}}}function H(e,t){for(var r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[i.nodeName]=parseFloat(i.textContent);break;case"wrapU":case"wrapV":"TRUE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=1:"FALSE"===i.textContent.toUpperCase()?t.technique[i.nodeName]=0:t.technique[i.nodeName]=parseInt(i.textContent)}}}function G(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"technique":t.technique=X(i)}}return t}function X(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"double_sided":t[i.nodeName]=parseInt(i.textContent)}}return t}function Y(e){return e}function W(e){var t,r,i=(t=e.url,d(qe.effects[t],Y)),o=i.profile.technique,a=i.profile.extra;switch(o.type){case"phong":case"blinn":r=new n.MeshPhongMaterial;break;case"lambert":r=new n.MeshLambertMaterial;break;default:r=new n.MeshBasicMaterial}function s(e){var t=i.profile.samplers[e.id],r=null;void 0!==t?r=L(i.profile.surfaces[t.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),r=L(e.id));if(null!==r){var o=function(e){var t,r=e.slice(2+(e.lastIndexOf(".")-1>>>0));switch(r=r.toLowerCase()){case"tga":t=He;break;default:t=Xe}return t}(r);if(void 0!==o){var a=o.load(r),s=e.extra;if(void 0!==s&&void 0!==s.technique&&!1===u(s.technique)){var l=s.technique;a.wrapS=l.wrapU?n.RepeatWrapping:n.ClampToEdgeWrapping,a.wrapT=l.wrapV?n.RepeatWrapping:n.ClampToEdgeWrapping,a.offset.set(l.offsetU||0,l.offsetV||0),a.repeat.set(l.repeatU||1,l.repeatV||1)}else a.wrapS=n.RepeatWrapping,a.wrapT=n.RepeatWrapping;return a}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",r),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}r.name=e.name||"";var l=o.parameters;for(var c in l){var h=l[c];switch(c){case"diffuse":h.color&&r.color.fromArray(h.color),h.texture&&(r.map=s(h.texture));break;case"specular":h.color&&r.specular&&r.specular.fromArray(h.color),h.texture&&(r.specularMap=s(h.texture));break;case"bump":h.texture&&(r.normalMap=s(h.texture));break;case"ambient":h.texture&&(r.lightMap=s(h.texture));break;case"shininess":h.float&&r.shininess&&(r.shininess=h.float);break;case"emission":h.color&&r.emissive&&r.emissive.fromArray(h.color),h.texture&&(r.emissiveMap=s(h.texture))}}var p=l.transparent,f=l.transparency;if(void 0===f&&p&&(f={float:1}),void 0===p&&f&&(p={opaque:"A_ONE",data:{color:[1,1,1,1]}}),p&&f)if(p.data.texture)r.transparent=!0;else{var m=p.data.color;switch(p.opaque){case"A_ONE":r.opacity=m[3]*f.float;break;case"RGB_ZERO":r.opacity=1-m[0]*f.float;break;case"A_ZERO":r.opacity=1-m[3]*f.float;break;case"RGB_ONE":r.opacity=m[0]*f.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',p.opaque)}r.opacity<1&&(r.transparent=!0)}return void 0!==a&&void 0!==a.technique&&1===a.technique.double_sided&&(r.side=n.DoubleSide),r}function J(e){return d(qe.materials[e],W)}function q(e){for(var t=0;t<e.childNodes.length;t++){var r=e.childNodes[t];switch(r.nodeName){case"technique_common":return K(r)}}return{}}function K(e){for(var t={},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];switch(n.nodeName){case"perspective":case"orthographic":t.technique=n.nodeName,t.parameters=Q(n)}}return t}function Q(e){for(var t={},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];switch(n.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[n.nodeName]=parseFloat(n.textContent)}}return t}function Z(e){var t;switch(e.optics.technique){case"perspective":t=new n.PerspectiveCamera(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var r=e.optics.parameters.ymag,i=e.optics.parameters.xmag,o=e.optics.parameters.aspect_ratio;i=void 0===i?r*o:i,r=void 0===r?i/o:r,i*=.5,r*=.5,t=new n.OrthographicCamera(-i,i,r,-r,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new n.PerspectiveCamera}return t.name=e.name||"",t}function $(e){var t=qe.cameras[e];return void 0!==t?d(t,Z):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function ee(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=i.nodeName,t.parameters=te(i)}}return t}function te(e){for(var t={},r=0,i=e.childNodes.length;r<i;r++){var o=e.childNodes[r];if(1===o.nodeType)switch(o.nodeName){case"color":var s=a(o.textContent);t.color=(new n.Color).fromArray(s);break;case"falloff_angle":t.falloffAngle=parseFloat(o.textContent);break;case"quadratic_attenuation":var l=parseFloat(o.textContent);t.distance=l?Math.sqrt(1/l):0}}return t}function re(e){var t;switch(e.technique){case"directional":t=new n.DirectionalLight;break;case"point":t=new n.PointLight;break;case"spot":t=new n.SpotLight;break;case"ambient":t=new n.AmbientLight}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function ne(e){var t=qe.lights[e];return void 0!==t?d(t,re):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function ie(e){for(var t={array:[],stride:3},n=0;n<e.childNodes.length;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"float_array":t.array=a(i.textContent);break;case"Name_array":t.array=o(i.textContent);break;case"technique_common":var s=r(i,"accessor")[0];void 0!==s&&(t.stride=parseInt(s.getAttribute("stride")))}}return t}function oe(e){for(var t={},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];1===n.nodeType&&(t[n.getAttribute("semantic")]=l(n.getAttribute("source")))}return t}function ae(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"input":var o=l(i.getAttribute("source")),a=i.getAttribute("semantic"),u=parseInt(i.getAttribute("offset")),c=parseInt(i.getAttribute("set")),h=c>0?a+c:a;t.inputs[h]={id:o,offset:u},t.stride=Math.max(t.stride,u+1),"TEXCOORD"===a&&(t.hasUV=!0);break;case"vcount":t.vcount=s(i.textContent);break;case"p":t.p=s(i.textContent)}}return t}function se(e){for(var t=0,r=0,n=e.length;r<n;r++){!0===e[r].hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function le(e){var t={},r=e.sources,n=e.vertices,i=e.primitives;if(0===i.length)return{};var o=function(e){for(var t={},r=0;r<e.length;r++){var n=e[r];void 0===t[n.type]&&(t[n.type]=[]),t[n.type].push(n)}return t}(i);for(var a in o){var s=o[a];se(s),t[a]=ue(s,r,n)}return t}function ue(e,t,r){for(var i={},o={array:[],stride:0},a={array:[],stride:0},s={array:[],stride:0},l={array:[],stride:0},u={array:[],stride:0},c=[],h=4,d=[],p=4,f=new n.BufferGeometry,m=[],v=0,g=0;g<e.length;g++){var y=e[g],b=y.inputs,w=0;switch(y.type){case"lines":case"linestrips":w=2*y.count;break;case"triangles":w=3*y.count;break;case"polylist":for(var x=0;x<y.count;x++){var _=y.vcount[x];switch(_){case 3:w+=3;break;case 4:w+=6;break;default:w+=3*(_-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",y.type)}for(var T in f.addGroup(v,w,g),v+=w,y.material&&m.push(y.material),b){var A=b[T];switch(T){case"VERTEX":for(var S in r){var E=r[S];switch(S){case"POSITION":var C=o.array.length;if(ce(y,t[E],A.offset,o.array),o.stride=t[E].stride,t.skinWeights&&t.skinIndices&&(ce(y,t.skinIndices,A.offset,c),ce(y,t.skinWeights,A.offset,d)),!1===y.hasUV&&!0===e.uvsNeedsFix){w=(o.array.length-C)/o.stride;for(var M=0;M<w;M++)s.array.push(0,0)}break;case"NORMAL":ce(y,t[E],A.offset,a.array),a.stride=t[E].stride;break;case"COLOR":ce(y,t[E],A.offset,u.array),u.stride=t[E].stride;break;case"TEXCOORD":ce(y,t[E],A.offset,s.array),s.stride=t[E].stride;break;case"TEXCOORD1":ce(y,t[E],A.offset,l.array),s.stride=t[E].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',S)}}break;case"NORMAL":ce(y,t[A.id],A.offset,a.array),a.stride=t[A.id].stride;break;case"COLOR":ce(y,t[A.id],A.offset,u.array),u.stride=t[A.id].stride;break;case"TEXCOORD":ce(y,t[A.id],A.offset,s.array),s.stride=t[A.id].stride;break;case"TEXCOORD1":ce(y,t[A.id],A.offset,l.array),l.stride=t[A.id].stride}}}return o.array.length>0&&f.setAttribute("position",new n.Float32BufferAttribute(o.array,o.stride)),a.array.length>0&&f.setAttribute("normal",new n.Float32BufferAttribute(a.array,a.stride)),u.array.length>0&&f.setAttribute("color",new n.Float32BufferAttribute(u.array,u.stride)),s.array.length>0&&f.setAttribute("uv",new n.Float32BufferAttribute(s.array,s.stride)),l.array.length>0&&f.setAttribute("uv2",new n.Float32BufferAttribute(l.array,l.stride)),c.length>0&&f.setAttribute("skinIndex",new n.Float32BufferAttribute(c,h)),d.length>0&&f.setAttribute("skinWeight",new n.Float32BufferAttribute(d,p)),i.data=f,i.type=e[0].type,i.materialKeys=m,i}function ce(e,t,r,n){var i=e.p,o=e.stride,a=e.vcount;function s(e){for(var t=i[e+r]*u,o=t+u;t<o;t++)n.push(l[t])}var l=t.array,u=t.stride;if(void 0!==e.vcount)for(var c=0,h=0,d=a.length;h<d;h++){var p=a[h];if(4===p){var f=c+1*o,m=c+2*o,v=c+3*o;s(c+0*o),s(f),s(v),s(f),s(m),s(v)}else if(3===p){f=c+1*o,m=c+2*o;s(c+0*o),s(f),s(m)}else if(p>4)for(var g=1,y=p-2;g<=y;g++){f=c+o*g,m=c+o*(g+1);s(c+0*o),s(f),s(m)}c+=o*p}else for(h=0,d=i.length;h<d;h+=o)s(h)}function he(e){return d(qe.geometries[e],le)}function de(e){return void 0!==e.build?e.build:e}function pe(e,t){for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"joint":t.joints[n.getAttribute("sid")]=fe(n);break;case"link":t.links.push(ve(n))}}}function fe(e){for(var t,r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"prismatic":case"revolute":t=me(n)}}return t}function me(e,t){t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new n.Vector3,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(var r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"axis":var o=a(i.textContent);t.axis.fromArray(o);break;case"limits":var s=i.getElementsByTagName("max")[0],l=i.getElementsByTagName("min")[0];t.limits.max=parseFloat(s.textContent),t.limits.min=parseFloat(l.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function ve(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"attachment_full":t.attachments.push(ge(n));break;case"matrix":case"translate":case"rotate":t.transforms.push(ye(n))}}return t}function ge(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"link":t.links.push(ve(n));break;case"matrix":case"translate":case"rotate":t.transforms.push(ye(n))}}return t}function ye(e){var t={type:e.nodeName},r=a(e.textContent);switch(t.type){case"matrix":t.obj=new n.Matrix4,t.obj.fromArray(r).transpose();break;case"translate":t.obj=new n.Vector3,t.obj.fromArray(r);break;case"rotate":t.obj=new n.Vector3,t.obj.fromArray(r),t.angle=n.MathUtils.degToRad(r[3])}return t}function be(e,t){for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"technique_common":we(n,t)}}}function we(e,t){for(var r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"inertia":t.inertia=a(n.textContent);break;case"mass":t.mass=a(n.textContent)[0]}}}function xe(e){for(var t={target:e.getAttribute("target").split("/").pop()},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"axis":var i=n.getElementsByTagName("param")[0];t.axis=i.textContent;var o=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=o.substr(0,o.length-1)}}return t}function _e(e){return void 0!==e.build?e.build:e}var Te=new n.Matrix4,Ae=new n.Vector3;function Se(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new n.Matrix4,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},r=0;r<e.childNodes.length;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"node":t.nodes.push(i.getAttribute("id")),Se(i);break;case"instance_camera":t.instanceCameras.push(l(i.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(Ee(i));break;case"instance_light":t.instanceLights.push(l(i.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(Ee(i));break;case"instance_node":t.instanceNodes.push(l(i.getAttribute("url")));break;case"matrix":var o=a(i.textContent);t.matrix.multiply(Te.fromArray(o).transpose()),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"translate":o=a(i.textContent);Ae.fromArray(o),t.matrix.multiply(Te.makeTranslation(Ae.x,Ae.y,Ae.z)),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"rotate":o=a(i.textContent);var s=n.MathUtils.degToRad(o[3]);t.matrix.multiply(Te.makeRotationAxis(Ae.fromArray(o),s)),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"scale":o=a(i.textContent);t.matrix.scale(Ae.fromArray(o)),t.transforms[i.getAttribute("sid")]=i.nodeName;break;case"extra":break;default:console.log(i)}}return Le(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):qe.nodes[t.id]=t,t}function Ee(e){for(var t={id:l(e.getAttribute("url")),materials:{},skeletons:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];switch(n.nodeName){case"bind_material":for(var i=n.getElementsByTagName("instance_material"),o=0;o<i.length;o++){var a=i[o],s=a.getAttribute("symbol"),u=a.getAttribute("target");t.materials[s]=l(u)}break;case"skeleton":t.skeletons.push(l(n.textContent))}}return t}function Ce(e,t){var r,i,o,a=[],s=[];for(r=0;r<e.length;r++){var l=e[r];if(Le(l))Me(Ie(l),t,a);else if(o=l,void 0!==qe.visualScenes[o])for(var u=qe.visualScenes[l].children,c=0;c<u.length;c++){var h=u[c];if("JOINT"===h.type)Me(Ie(h.id),t,a)}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",l)}for(r=0;r<t.length;r++)for(c=0;c<a.length;c++)if((i=a[c]).bone.name===t[r].name){s[r]=i,i.processed=!0;break}for(r=0;r<a.length;r++)!1===(i=a[r]).processed&&(s.push(i),i.processed=!0);var d=[],p=[];for(r=0;r<s.length;r++)i=s[r],d.push(i.bone),p.push(i.boneInverse);return new n.Skeleton(d,p)}function Me(e,t,r){e.traverse(function(e){if(!0===e.isBone){for(var i,o=0;o<t.length;o++){var a=t[o];if(a.name===e.name){i=a.boneInverse;break}}void 0===i&&(i=new n.Matrix4),r.push({bone:e,boneInverse:i,processed:!1})}})}function Ne(e){for(var t,r=[],i=e.matrix,o=e.nodes,a=e.type,s=e.instanceCameras,l=e.instanceControllers,u=e.instanceLights,c=e.instanceGeometries,h=e.instanceNodes,p=0,f=o.length;p<f;p++)r.push(Ie(o[p]));for(p=0,f=s.length;p<f;p++){var m=$(s[p]);null!==m&&r.push(m.clone())}for(p=0,f=l.length;p<f;p++)for(var v=l[p],g=(t=v.id,d(qe.controllers[t],R)),y=ke(he(g.id),v.materials),b=Ce(v.skeletons,g.skin.joints),w=0,x=y.length;w<x;w++){var _;(_=y[w]).isSkinnedMesh&&(_.bind(b,g.skin.bindMatrix),_.normalizeSkinWeights()),r.push(_)}for(p=0,f=u.length;p<f;p++){var T=ne(u[p]);null!==T&&r.push(T.clone())}for(p=0,f=c.length;p<f;p++)for(w=0,x=(y=ke(he((v=c[p]).id),v.materials)).length;w<x;w++)r.push(y[w]);for(p=0,f=h.length;p<f;p++)r.push(Ie(h[p]).clone());if(0===o.length&&1===r.length)_=r[0];else{_="JOINT"===a?new n.Bone:new n.Group;for(p=0;p<r.length;p++)_.add(r[p])}return _.name="JOINT"===a?e.sid:e.name,_.matrix.copy(i),_.matrix.decompose(_.position,_.quaternion,_.scale),_}var Oe=new n.MeshBasicMaterial({color:16711935});function Re(e,t){for(var r=[],n=0,i=e.length;n<i;n++){var o=t[e[n]];void 0===o?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[n]),r.push(Oe)):r.push(J(o))}return r}function ke(e,t){var r=[];for(var i in e){var o=e[i],a=Re(o.materialKeys,t);0===a.length&&("lines"===i||"linestrips"===i?a.push(new n.LineBasicMaterial):a.push(new n.MeshPhongMaterial));var s=void 0!==o.data.attributes.skinIndex;if(s)for(var l=0,u=a.length;l<u;l++)a[l].skinning=!0;var c,h=1===a.length?a[0]:a;switch(i){case"lines":c=new n.LineSegments(o.data,h);break;case"linestrips":c=new n.Line(o.data,h);break;case"triangles":case"polylist":c=s?new n.SkinnedMesh(o.data,h):new n.Mesh(o.data,h)}r.push(c)}return r}function Le(e){return void 0!==qe.nodes[e]}function Ie(e){return d(qe.nodes[e],Ne)}function Pe(e){var t=new n.Group;t.name=e.name;for(var r=e.children,i=0;i<r.length;i++){var o=r[i];t.add(Ie(o.id))}return t}function Be(e){return d(qe.visualScenes[e],Pe)}if(0===e.length)return{scene:new n.Scene};var De=(new DOMParser).parseFromString(e,"application/xml"),Ue=r(De,"COLLADA")[0],Fe=De.getElementsByTagName("parsererror")[0];if(void 0!==Fe){var ze,Ve=r(Fe,"div")[0];return ze=Ve?Ve.textContent:function(e){for(var t="",r=[e];r.length;){var n=r.shift();n.nodeType===Node.TEXT_NODE?t+=n.textContent:(t+="\n",r.push.apply(r,n.childNodes))}return t.trim()}(Fe),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",ze),null}var je=Ue.getAttribute("version");console.log("THREE.ColladaLoader: File version",je);var He,Ge=function(e){return{unit:function(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}(r(e,"unit")[0]),upAxis:function(e){return void 0!==e?e.textContent:"Y_UP"}(r(e,"up_axis")[0])}}(r(Ue,"asset")[0]),Xe=new n.TextureLoader(this.manager);Xe.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),i.a&&(He=new i.a(this.manager)).setPath(this.resourcePath||t);var Ye=[],We={},Je=0,qe={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};c(Ue,"library_animations","animation",function e(t){for(var r={sources:{},samplers:{},channels:{}},i=!1,o=0,a=t.childNodes.length;o<a;o++){var s,l=t.childNodes[o];if(1===l.nodeType)switch(l.nodeName){case"source":s=l.getAttribute("id"),r.sources[s]=ie(l);break;case"sampler":s=l.getAttribute("id"),r.samplers[s]=p(l);break;case"channel":s=l.getAttribute("target"),r.channels[s]=f(l);break;case"animation":e(l),i=!0;break;default:console.log(l)}}!1===i&&(qe.animations[t.getAttribute("id")||n.MathUtils.generateUUID()]=r)}),c(Ue,"library_animation_clips","animation_clip",function(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"instance_animation":t.animations.push(l(i.getAttribute("url")))}}qe.clips[e.getAttribute("id")]=t}),c(Ue,"library_controllers","controller",function(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"skin":t.id=l(i.getAttribute("source")),t.skin=M(i);break;case"morph":t.id=l(i.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}qe.controllers[e.getAttribute("id")]=t}),c(Ue,"library_images","image",function(e){var t={init_from:r(e,"init_from")[0].textContent};qe.images[e.getAttribute("id")]=t}),c(Ue,"library_effects","effect",function(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"profile_COMMON":t.profile=I(i)}}qe.effects[e.getAttribute("id")]=t}),c(Ue,"library_materials","material",function(e){for(var t={name:e.getAttribute("name")},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"instance_effect":t.url=l(i.getAttribute("url"))}}qe.materials[e.getAttribute("id")]=t}),c(Ue,"library_cameras","camera",function(e){for(var t={name:e.getAttribute("name")},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"optics":t.optics=q(i)}}qe.cameras[e.getAttribute("id")]=t}),c(Ue,"library_lights","light",function(e){for(var t={},r=0,n=e.childNodes.length;r<n;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"technique_common":t=ee(i)}}qe.lights[e.getAttribute("id")]=t}),c(Ue,"library_geometries","geometry",function(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},n=r(e,"mesh")[0];if(void 0!==n){for(var i=0;i<n.childNodes.length;i++){var o=n.childNodes[i];if(1===o.nodeType){var a=o.getAttribute("id");switch(o.nodeName){case"source":t.sources[a]=ie(o);break;case"vertices":t.vertices=oe(o);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",o.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(ae(o));break;default:console.log(o)}}}qe.geometries[e.getAttribute("id")]=t}}),c(Ue,"library_nodes","node",Se),c(Ue,"library_visual_scenes","visual_scene",function(e){var t={name:e.getAttribute("name"),children:[]};!function(e){for(var t=e.getElementsByTagName("node"),r=0;r<t.length;r++){var n=t[r];!1===n.hasAttribute("id")&&n.setAttribute("id","three_default_"+Je++)}}(e);for(var n=r(e,"node"),i=0;i<n.length;i++)t.children.push(Se(n[i]));qe.visualScenes[e.getAttribute("id")]=t}),c(Ue,"library_kinematics_models","kinematics_model",function(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"technique_common":pe(n,t)}}qe.kinematicsModels[e.getAttribute("id")]=t}),c(Ue,"library_physics_models","physics_model",function(e){for(var t={name:e.getAttribute("name")||"",rigidBodies:{}},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"rigid_body":t.rigidBodies[n.getAttribute("name")]={},be(n,t.rigidBodies[n.getAttribute("name")])}}qe.physicsModels[e.getAttribute("id")]=t}),c(Ue,"scene","instance_kinematics_scene",function(e){for(var t={bindJointAxis:[]},r=0;r<e.childNodes.length;r++){var n=e.childNodes[r];if(1===n.nodeType)switch(n.nodeName){case"bind_joint_axis":t.bindJointAxis.push(xe(n))}}qe.kinematicsScenes[l(e.getAttribute("url"))]=t}),h(qe.animations,m),h(qe.clips,E),h(qe.controllers,R),h(qe.images,k),h(qe.effects,Y),h(qe.materials,W),h(qe.cameras,Z),h(qe.lights,re),h(qe.geometries,le),h(qe.visualScenes,Pe),function(){var e=qe.clips;if(!0===u(e)){if(!1===u(qe.animations)){var t=[];for(var r in qe.animations)for(var i=v(r),o=0,a=i.length;o<a;o++)t.push(i[o]);Ye.push(new n.AnimationClip("default",-1,t))}}else for(var r in e)Ye.push(C(r))}(),function(){var e=Object.keys(qe.kinematicsModels)[0],t=Object.keys(qe.kinematicsScenes)[0],r=Object.keys(qe.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var i,o=(i=e,d(qe.kinematicsModels[i],de)),s=function(e){return d(qe.kinematicsScenes[e],_e)}(t),l=Be(r),u=s.bindJointAxis,c={},h=0,p=u.length;h<p;h++){var f=u[h],m=Ue.querySelector('[sid="'+f.target+'"]');if(m){var v=m.parentElement;y(f.jointIndex,v)}}var g=new n.Matrix4;We={joints:o&&o.joints,getJointValue:function(e){var t=c[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var r=c[e];if(r){var i=r.joint;if(t>i.limits.max||t<i.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+i.limits.min+", max: "+i.limits.max+").");else if(i.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var o=r.object,a=i.axis,s=r.transforms;Te.identity();for(var l=0;l<s.length;l++){var u=s[l];if(u.sid&&-1!==u.sid.indexOf(e))switch(i.type){case"revolute":Te.multiply(g.makeRotationAxis(a,n.MathUtils.degToRad(t)));break;case"prismatic":Te.multiply(g.makeTranslation(a.x*t,a.y*t,a.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+i.type)}else switch(u.type){case"matrix":Te.multiply(u.obj);break;case"translate":Te.multiply(g.makeTranslation(u.obj.x,u.obj.y,u.obj.z));break;case"scale":Te.scale(u.obj);break;case"rotate":Te.multiply(g.makeRotationAxis(u.obj,u.angle))}}o.matrix.copy(Te),o.matrix.decompose(o.position,o.quaternion,o.scale),c[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function y(e,t){var r=t.getAttribute("name"),i=o.joints[e];l.traverse(function(o){o.name===r&&(c[e]={object:o,transforms:function(e){for(var t=[],r=Ue.querySelector('[id="'+e.id+'"]'),i=0;i<r.childNodes.length;i++){var o=r.childNodes[i];if(1===o.nodeType)switch(o.nodeName){case"matrix":var s=a(o.textContent),l=(new n.Matrix4).fromArray(s).transpose();t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:l});break;case"translate":case"scale":var s=a(o.textContent),u=(new n.Vector3).fromArray(s);t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:u});break;case"rotate":var s=a(o.textContent),u=(new n.Vector3).fromArray(s),c=n.MathUtils.degToRad(s[3]);t.push({sid:o.getAttribute("sid"),type:o.nodeName,obj:u,angle:c})}}return t}(t),joint:i,position:i.zeroPosition})})}}();var Ke=function(e){return Be(l(r(e,"instance_visual_scene")[0].getAttribute("url")))}(r(Ue,"scene")[0]);return"Z_UP"===Ge.upAxis&&Ke.quaternion.setFromEuler(new n.Euler(-Math.PI/2,0,0)),Ke.scale.multiplyScalar(Ge.unit),{animations:Ye,kinematics:We,library:qe,scene:Ke}}})},"5WRe":function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(e,t){void 0===t&&(console.warn('THREE.FlyControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,t&&this.domElement.setAttribute("tabindex",-1),this.movementSpeed=1,this.rollSpeed=.005,this.dragToLook=!1,this.autoForward=!1;var r,i,o=this,a={type:"change"};function s(e,t){return function(){t.apply(e,arguments)}}function l(e){e.preventDefault()}this.tmpQuaternion=new n.Quaternion,this.mouseStatus=0,this.moveState={up:0,down:0,left:0,right:0,forward:0,back:0,pitchUp:0,pitchDown:0,yawLeft:0,yawRight:0,rollLeft:0,rollRight:0},this.moveVector=new n.Vector3(0,0,0),this.rotationVector=new n.Vector3(0,0,0),this.keydown=function(e){if(!e.altKey){switch(e.keyCode){case 16:this.movementSpeedMultiplier=.1;break;case 87:this.moveState.forward=1;break;case 83:this.moveState.back=1;break;case 65:this.moveState.left=1;break;case 68:this.moveState.right=1;break;case 82:this.moveState.up=1;break;case 70:this.moveState.down=1;break;case 38:this.moveState.pitchUp=1;break;case 40:this.moveState.pitchDown=1;break;case 37:this.moveState.yawLeft=1;break;case 39:this.moveState.yawRight=1;break;case 81:this.moveState.rollLeft=1;break;case 69:this.moveState.rollRight=1}this.updateMovementVector(),this.updateRotationVector()}},this.keyup=function(e){switch(e.keyCode){case 16:this.movementSpeedMultiplier=1;break;case 87:this.moveState.forward=0;break;case 83:this.moveState.back=0;break;case 65:this.moveState.left=0;break;case 68:this.moveState.right=0;break;case 82:this.moveState.up=0;break;case 70:this.moveState.down=0;break;case 38:this.moveState.pitchUp=0;break;case 40:this.moveState.pitchDown=0;break;case 37:this.moveState.yawLeft=0;break;case 39:this.moveState.yawRight=0;break;case 81:this.moveState.rollLeft=0;break;case 69:this.moveState.rollRight=0}this.updateMovementVector(),this.updateRotationVector()},this.mousedown=function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus++;else{switch(e.button){case 0:this.moveState.forward=1;break;case 2:this.moveState.back=1}this.updateMovementVector()}},this.mousemove=function(e){if(!this.dragToLook||this.mouseStatus>0){var t=this.getContainerDimensions(),r=t.size[0]/2,n=t.size[1]/2;this.moveState.yawLeft=-(e.pageX-t.offset[0]-r)/r,this.moveState.pitchDown=(e.pageY-t.offset[1]-n)/n,this.updateRotationVector()}},this.mouseup=function(e){if(e.preventDefault(),e.stopPropagation(),this.dragToLook)this.mouseStatus--,this.moveState.yawLeft=this.moveState.pitchDown=0;else{switch(e.button){case 0:this.moveState.forward=0;break;case 2:this.moveState.back=0}this.updateMovementVector()}this.updateRotationVector()},this.update=(r=new n.Quaternion,i=new n.Vector3,function(e){var t=e*o.movementSpeed,n=e*o.rollSpeed;o.object.translateX(o.moveVector.x*t),o.object.translateY(o.moveVector.y*t),o.object.translateZ(o.moveVector.z*t),o.tmpQuaternion.set(o.rotationVector.x*n,o.rotationVector.y*n,o.rotationVector.z*n,1).normalize(),o.object.quaternion.multiply(o.tmpQuaternion),(i.distanceToSquared(o.object.position)>1e-6||8*(1-r.dot(o.object.quaternion))>1e-6)&&(o.dispatchEvent(a),r.copy(o.object.quaternion),i.copy(o.object.position))}),this.updateMovementVector=function(){var e=this.moveState.forward||this.autoForward&&!this.moveState.back?1:0;this.moveVector.x=-this.moveState.left+this.moveState.right,this.moveVector.y=-this.moveState.down+this.moveState.up,this.moveVector.z=-e+this.moveState.back},this.updateRotationVector=function(){this.rotationVector.x=-this.moveState.pitchDown+this.moveState.pitchUp,this.rotationVector.y=-this.moveState.yawRight+this.moveState.yawLeft,this.rotationVector.z=-this.moveState.rollRight+this.moveState.rollLeft},this.getContainerDimensions=function(){return this.domElement!=document?{size:[this.domElement.offsetWidth,this.domElement.offsetHeight],offset:[this.domElement.offsetLeft,this.domElement.offsetTop]}:{size:[window.innerWidth,window.innerHeight],offset:[0,0]}},this.dispose=function(){this.domElement.removeEventListener("contextmenu",l,!1),this.domElement.removeEventListener("mousedown",c,!1),this.domElement.removeEventListener("mousemove",u,!1),this.domElement.removeEventListener("mouseup",h,!1),window.removeEventListener("keydown",d,!1),window.removeEventListener("keyup",p,!1)};var u=s(this,this.mousemove),c=s(this,this.mousedown),h=s(this,this.mouseup),d=s(this,this.keydown),p=s(this,this.keyup);this.domElement.addEventListener("contextmenu",l,!1),this.domElement.addEventListener("mousemove",u,!1),this.domElement.addEventListener("mousedown",c,!1),this.domElement.addEventListener("mouseup",h,!1),window.addEventListener("keydown",d,!1),window.addEventListener("keyup",p,!1),this.updateMovementVector(),this.updateRotationVector()};i.prototype=Object.create(n.EventDispatcher.prototype),i.prototype.constructor=i},"5l0I":function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("/nNp"),i=/^([a-z_0-9]+)\s([a-z_0-9]+)\s?\=?\s?(.*?)(\;|$)/i;function o(e,t){n.a.call(this),this.parse(e||o.PI,t)}o.PI="PI",o.PI2="PI2",o.RECIPROCAL_PI="RECIPROCAL_PI",o.RECIPROCAL_PI2="RECIPROCAL_PI2",o.LOG2="LOG2",o.EPSILON="EPSILON",o.prototype=Object.create(n.a.prototype),o.prototype.constructor=o,o.prototype.nodeType="Const",o.prototype.getType=function(e){return e.getTypeByFormat(this.type)},o.prototype.parse=function(e,t){this.src=e||"";var r,n,o="",a=this.src.match(i);this.useDefine=t||"#"===this.src.charAt(0),a&&a.length>1?(n=a[1],r=a[2],o=a[3]):(r=this.src,n="f"),this.name=r,this.type=n,this.value=o},o.prototype.build=function(e,t){return"source"!==t?(e.include(this),e.format(this.name,this.getType(e),t)):this.value?this.useDefine?"#define "+this.name+" "+this.value:"const "+this.type+" "+this.name+" = "+this.value+";":this.useDefine?this.src:void 0},o.prototype.generate=function(e,t){return e.format(this.name,this.getType(e),t)},o.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.parse(e.src,e.useDefine),this},o.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src,!0===t.useDefine&&(t.useDefine=!0)),t}},"6FbT":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={nodes:{},keywords:{},add:function(e){this.nodes[e.name]=e},addKeyword:function(e,t,r){r=void 0===r||r,this.keywords[e]={callback:t,cache:r}},remove:function(e){delete this.nodes[e.name]},removeKeyword:function(e){delete this.keywords[e]},get:function(e){return this.nodes[e]},getKeyword:function(e,t){return this.keywords[e].callback.call(this,t)},getKeywordData:function(e){return this.keywords[e]},contains:function(e){return void 0!==this.nodes[e]},containsKeyword:function(e){return void 0!==this.keywords[e]}}},"6SgS":function(e,t,r){"use strict";r.d(t,"a",function(){return w});var n=r("6+nK"),i=r("TUKu"),o=r("7zw7"),a=r("6FbT"),s=r("Oi88"),l=r("5l0I"),u=r("loLV"),c=r("6cqF"),h=r("Ai5a"),d=r("pCsw"),p=r("Y9dU"),f=r("WcTe"),m=r("voZv"),v=o.a.elements,g=["float","vec2","vec3","vec4"],y={float:"f",vec2:"v2",vec3:"v3",vec4:"v4",mat4:"v4",int:"i",bool:"b"},b={t:"sampler2D",tc:"samplerCube",b:"bool",i:"int",f:"float",c:"vec3",v2:"vec2",v3:"vec3",v4:"vec4",m3:"mat3",m4:"mat4"};function w(){this.slots=[],this.caches=[],this.contexts=[],this.keywords={},this.nodeData={},this.requires={uv:[],color:[],lights:!1,fog:!1,transparent:!1,irradiance:!1},this.includes={consts:[],functions:[],structs:[]},this.attributes={},this.prefixCode=["#ifdef TEXTURE_LOD_EXT","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCubeLodEXT(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2DLodEXT(a, b, c)","#else","\t#define texCube(a, b) textureCube(a, b)","\t#define texCubeBias(a, b, c) textureCube(a, b, c)","\t#define tex2D(a, b) texture2D(a, b)","\t#define tex2DBias(a, b, c) texture2D(a, b, c)","#endif","#include <packing>","#include <common>"].join("\n"),this.parsCode={vertex:"",fragment:""},this.code={vertex:"",fragment:""},this.nodeCode={vertex:"",fragment:""},this.resultCode={vertex:"",fragment:""},this.finalCode={vertex:"",fragment:""},this.inputs={uniforms:{list:[],vertex:[],fragment:[]},vars:{varying:[],vertex:[],fragment:[]}},this.defines={},this.uniforms={},this.extensions={},this.updaters=[],this.nodes=[],this.analyzing=!1}w.prototype={constructor:w,build:function(e,t){this.buildShader("vertex",e),this.buildShader("fragment",t);for(var r=0;r<this.requires.uv.length;r++)if(this.requires.uv[r]){var n=r>0?r+1:"";this.addVaryCode("varying vec2 vUv"+n+";"),r>0&&this.addVertexParsCode("attribute vec2 uv"+n+";"),this.addVertexFinalCode("vUv"+n+" = uv"+n+";")}return this.requires.color[0]&&(this.addVaryCode("varying vec4 vColor;"),this.addVertexParsCode("attribute vec4 color;"),this.addVertexFinalCode("vColor = color;")),this.requires.color[1]&&(this.addVaryCode("varying vec4 vColor2;"),this.addVertexParsCode("attribute vec4 color2;"),this.addVertexFinalCode("vColor2 = color2;")),this.requires.position&&(this.addVaryCode("varying vec3 vPosition;"),this.addVertexFinalCode("vPosition = transformed;")),this.requires.worldPosition&&(this.addVaryCode("varying vec3 vWPosition;"),this.addVertexFinalCode("vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;")),this.requires.normal&&(this.addVaryCode("varying vec3 vObjectNormal;"),this.addVertexFinalCode("vObjectNormal = normal;")),this.requires.worldNormal&&(this.addVaryCode("varying vec3 vWNormal;"),this.addVertexFinalCode("vWNormal = inverseTransformDirection( transformedNormal, viewMatrix ).xyz;")),this},buildShader:function(e,t){this.resultCode[e]=t.build(this.setShader(e),"v4")},setMaterial:function(e,t){return this.material=e,this.renderer=t,this.requires.lights=e.lights,this.requires.fog=e.fog,this.mergeDefines(e.defines),this},addFlow:function(e,t,r){return this.addSlot(e).addCache(t).addContext(r)},removeFlow:function(){return this.removeSlot().removeCache().removeContext()},addCache:function(e){return this.cache=e||"",this.caches.push(this.cache),this},removeCache:function(){return this.caches.pop(),this.cache=this.caches[this.caches.length-1]||"",this},addContext:function(e){return this.context=Object.assign({},this.context,e),this.context.extra=this.context.extra||{},this.contexts.push(this.context),this},removeContext:function(){return this.contexts.pop(),this.context=this.contexts[this.contexts.length-1]||{},this},addSlot:function(e){return this.slot=e||"",this.slots.push(this.slot),this},removeSlot:function(){return this.slots.pop(),this.slot=this.slots[this.slots.length-1]||"",this},addVertexCode:function(e){this.addCode(e,"vertex")},addFragmentCode:function(e){this.addCode(e,"fragment")},addCode:function(e,t){this.code[t||this.shader]+=e+"\n"},addVertexNodeCode:function(e){this.addNodeCode(e,"vertex")},addFragmentNodeCode:function(e){this.addNodeCode(e,"fragment")},addNodeCode:function(e,t){this.nodeCode[t||this.shader]+=e+"\n"},clearNodeCode:function(e){e=e||this.shader;var t=this.nodeCode[e];return this.nodeCode[e]="",t},clearVertexNodeCode:function(){return this.clearNodeCode("vertex")},clearFragmentNodeCode:function(){return this.clearNodeCode("fragment")},addVertexFinalCode:function(e){this.addFinalCode(e,"vertex")},addFragmentFinalCode:function(e){this.addFinalCode(e,"fragment")},addFinalCode:function(e,t){this.finalCode[t||this.shader]+=e+"\n"},addVertexParsCode:function(e){this.addParsCode(e,"vertex")},addFragmentParsCode:function(e){this.addParsCode(e,"fragment")},addParsCode:function(e,t){this.parsCode[t||this.shader]+=e+"\n"},addVaryCode:function(e){this.addVertexParsCode(e),this.addFragmentParsCode(e)},isCache:function(e){return-1!==this.caches.indexOf(e)},isSlot:function(e){return-1!==this.slots.indexOf(e)},define:function(e,t){this.defines[e]=void 0===t?1:t},require:function(e){this.requires[e]=!0},isDefined:function(e){return void 0!==this.defines[e]},getVar:function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"varying",i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"V",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",a=this.getVars(n),s=a[e];if(!s){var l=a.length;s={name:r||"node"+i+l+(o?"_"+o:""),type:t},a.push(s),a[e]=s}return s},getTempVar:function(e,t,r,n){return this.getVar(e,t,r,this.shader,"T",n)},getAttribute:function(e,t){if(!this.attributes[e]){var r=this.getVar(e,t);this.addVertexParsCode("attribute "+t+" "+e+";"),this.addVertexFinalCode(r.name+" = "+e+";"),this.attributes[e]={varying:r,name:e,type:t}}return this.attributes[e]},getCode:function(e){return[this.prefixCode,this.parsCode[e],this.getVarListCode(this.getVars("varying"),"varying"),this.getVarListCode(this.inputs.uniforms[e],"uniform"),this.getIncludesCode("consts",e),this.getIncludesCode("structs",e),this.getIncludesCode("functions",e),"void main() {",this.getVarListCode(this.getVars(e)),this.code[e],this.resultCode[e],this.finalCode[e],"}"].join("\n")},getVarListCode:function(e,t){t=t||"";for(var r="",n=0,i=e.length;n<i;++n){var o=e[n],a=o.type,s=o.name,l=this.getFormatByType(a);if(void 0===l)throw new Error("Node pars "+l+" not found.");r+=t+" "+l+" "+s+";\n"}return r},getVars:function(e){return this.inputs.vars[e||this.shader]},getNodeData:function(e){var t=e.isNode?e.uuid:e;return this.nodeData[t]=this.nodeData[t]||{}},createUniform:function(e,t,r,n,o,a){var s=this.inputs.uniforms,l=s.list.length,u=new i.a({type:t,name:n||"nodeU"+l+(a?"_"+a:""),node:r,needsUpdate:o});return s.list.push(u),s[e].push(u),s[e][u.name]=u,this.uniforms[u.name]=u,u},createVertexUniform:function(e,t,r,n,i){return this.createUniform("vertex",e,t,r,n,i)},createFragmentUniform:function(e,t,r,n,i){return this.createUniform("fragment",e,t,r,n,i)},include:function(e,t,r){var n;if(e="string"==typeof e?a.a.get(e):e,!1===this.context.include)return e.name;e instanceof s.a?n=this.includes.functions:e instanceof l.a?n=this.includes.consts:e instanceof u.a&&(n=this.includes.structs);var i=n[this.shader]=n[this.shader]||[];if(e){var o=i[e.name];if(o||(o=i[e.name]={node:e,deps:[]},i.push(o),o.src=e.build(this,"source")),e instanceof s.a&&t&&i[t.name]&&-1==i[t.name].deps.indexOf(e)&&(i[t.name].deps.push(e),e.includes&&e.includes.length)){var c=0;do{this.include(e.includes[c++],t)}while(c<e.includes.length)}return r&&(o.src=r),e.name}throw new Error("Include not found.")},colorToVectorProperties:function(e){return e.replace("r","x").replace("g","y").replace("b","z").replace("a","w")},colorToVector:function(e){return e.replace(/c/g,"v3")},getIncludes:function(e,t){return this.includes[e][t||this.shader]},getIncludesCode:function(){function e(e,t){return e.deps.length-t.deps.length}return function(t,r){if(!(i=this.getIncludes(t,r)))return"";for(var n="",i=i.sort(e),o=0;o<i.length;o++)i[o].src&&(n+=i[o].src+"\n");return n}}(),getConstructorFromLength:function(e){return g[e-1]},isTypeMatrix:function(e){return/^m/.test(e)},getTypeLength:function(e){return"f"===e?1:parseInt(this.colorToVector(e).substr(1))},getTypeFromLength:function(e){return 1===e?"f":"v"+e},findNode:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(void 0!==t&&t.isNode)return t}},resolve:function(){for(var e=0;e<arguments.length;e++){var t=arguments[e];if(void 0!==t){if(t.isNode)return t;if(t.isTexture)switch(t.mapping){case n.CubeReflectionMapping:case n.CubeRefractionMapping:return new f.a(t);case n.CubeUVReflectionMapping:case n.CubeUVRefractionMapping:return new m.a(new p.a(t));default:return new p.a(t)}else{if(t.isVector2)return new c.a(t);if(t.isVector3)return new h.a(t);if(t.isVector4)return new d.a(t)}}}},format:function(e,t,r){switch(this.colorToVector(r+" <- "+t)){case"f <- v2":case"f <- v3":case"f <- v4":return e+".x";case"f <- i":case"f <- b":return"float( "+e+" )";case"v2 <- f":return"vec2( "+e+" )";case"v2 <- v3":case"v2 <- v4":return e+".xy";case"v2 <- i":case"v2 <- b":return"vec2( float( "+e+" ) )";case"v3 <- f":return"vec3( "+e+" )";case"v3 <- v2":return"vec3( "+e+", 0.0 )";case"v3 <- v4":return e+".xyz";case"v3 <- i":case"v3 <- b":return"vec2( float( "+e+" ) )";case"v4 <- f":return"vec4( "+e+" )";case"v4 <- v2":return"vec4( "+e+", 0.0, 1.0 )";case"v4 <- v3":return"vec4( "+e+", 1.0 )";case"v4 <- i":case"v4 <- b":return"vec4( float( "+e+" ) )";case"i <- f":case"i <- b":return"int( "+e+" )";case"i <- v2":case"i <- v3":case"i <- v4":return"int( "+e+".x )";case"b <- f":return"( "+e+" != 0.0 )";case"b <- v2":return"( "+e+" != vec2( 0.0 ) )";case"b <- v3":return"( "+e+" != vec3( 0.0 ) )";case"b <- v4":return"( "+e+" != vec4( 0.0 ) )";case"b <- i":return"( "+e+" != 0 )"}return e},getTypeByFormat:function(e){return y[e]||e},getFormatByType:function(e){return b[e]||e},getUuid:function(e,t){return(t=void 0===t||t)&&this.cache&&(e=this.cache+"-"+e),e},getElementByIndex:function(e){return v[e]},getIndexByElement:function(e){return v.indexOf(e)},isShader:function(e){return this.shader===e},setShader:function(e){return this.shader=e,this},mergeDefines:function(e){for(var t in e)this.defines[t]=e[t];return this.defines},mergeUniform:function(e){for(var t in e)this.uniforms[t]=e[t];return this.uniforms},getTextureEncodingFromMap:function(e){var t;return e?e.isTexture?t=e.encoding:e.isWebGLRenderTarget&&(console.warn("THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead."),t=e.texture.encoding):t=n.LinearEncoding,t===n.LinearEncoding&&this.context.gamma&&(t=n.GammaEncoding),t}}},"6cqF":function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("6+nK"),i=r("hwmT"),o=r("7zw7");function a(e,t){i.a.call(this,"v2"),this.value=e instanceof n.Vector2?e:new n.Vector2(e,t)}a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.nodeType="Vector2",o.a.addShortcuts(a.prototype,"value",["x","y"]),a.prototype.generateReadonly=function(e,t,r,n){return e.format("vec2( "+this.x+", "+this.y+" )",n,t)},a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.value.copy(e),this},a.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,!0===this.readonly&&(t.readonly=!0)),t}},"7zw7":function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={elements:["x","y","z","w"],addShortcuts:function(){function e(e,t,r){return r?{get:function(){return this[e][t][r]},set:function(n){this[e][t][r]=n}}:{get:function(){return this[e][t]},set:function(r){this[e][t]=r}}}return function(t,r,n){for(var i={},o=0;o<n.length;++o){var a=n[o].split("."),s=a[0],l=a[1];i[s]=e(r,s,l)}Object.defineProperties(t,i)}}()}},"85s5":function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("6+nK"),i=r("fcDU"),o=r("fD1D"),a=r("PMB9"),s=function(e,t){if(this.renderer=e,void 0===t){var r={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat},a=e.getSize(new n.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=a.width,this._height=a.height,(t=new n.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,r)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===i.a&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===o.a&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new o.a(i.a),this.clock=new n.Clock};Object.assign(s.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,r,n=this.renderer.getRenderTarget(),i=!1,o=this.passes.length;for(r=0;r<o;r++)if(!1!==(t=this.passes[r]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(r),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,i),t.needsSwap){if(i){var s=this.renderer.getContext(),l=this.renderer.state.buffers.stencil;l.setFunc(s.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),l.setFunc(s.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==a.b&&(t instanceof a.b?i=!0:t instanceof a.a&&(i=!1))}this.renderer.setRenderTarget(n)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new n.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var r=this._width*this._pixelRatio,n=this._height*this._pixelRatio;this.renderTarget1.setSize(r,n),this.renderTarget2.setSize(r,n);for(var i=0;i<this.passes.length;i++)this.passes[i].setSize(r,n)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var l,u,c,h=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(h.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),h.FullScreenQuad=(l=new n.OrthographicCamera(-1,1,1,-1,0,1),u=new n.PlaneBufferGeometry(2,2),c=function(e){this._mesh=new n.Mesh(u,e)},Object.defineProperty(c.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(c.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,l)}}),c)},"8GJm":function(e,t,r){"use strict";(function(e,n){r.d(t,"a",function(){return l});var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){this._tweens={},this._tweensAddedDuringUpdate={}};o.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var r=Object.keys(this._tweens);if(0===r.length)return!1;for(e=void 0!==e?e:l.now();0<r.length;){this._tweensAddedDuringUpdate={};for(var n=0;n<r.length;n++){var i=this._tweens[r[n]];i&&!1===i.update(e)&&(i._isPlaying=!1,t||delete this._tweens[r[n]])}r=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var a,s,l=new o;l.Group=o,l._nextId=0,l.nextId=function(){return l._nextId++},"undefined"==typeof self&&void 0!==e&&e.hrtime?l.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?l.now=self.performance.now.bind(self.performance):void 0!==Date.now?l.now=Date.now:l.now=function(){return(new Date).getTime()},l.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=l.Easing.Linear.None,this._interpolationFunction=l.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||l,this._id=l.nextId()},l.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},duration:function(e){return this._duration=e,this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?l.now()+parseFloat(e):e:l.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==0&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,r,n;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),r=(e-this._startTime)/this._duration,r=0===this._duration||1<r?1:r,n=this._easingFunction(r),this._valuesEnd)if(void 0!==this._valuesStart[t]){var i=this._valuesStart[t]||0,o=this._valuesEnd[t];o instanceof Array?this._object[t]=this._interpolationFunction(o,n):("string"==typeof o&&(o="+"===o.charAt(0)||"-"===o.charAt(0)?i+parseFloat(o):parseFloat(o)),"number"==typeof o&&(this._object[t]=i+(o-i)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==r)return!0;if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var a=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=a}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var s=0,l=this._chainedTweens.length;s<l;s++)this._chainedTweens[s].start(this._startTime+this._duration);return!1}},l.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)}},Bounce:{In:function(e){return 1-l.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*l.Easing.Bounce.In(2*e):.5*l.Easing.Bounce.Out(2*e-1)+.5}}},l.Interpolation={Linear:function(e,t){var r=e.length-1,n=r*t,i=Math.floor(n),o=l.Interpolation.Utils.Linear;return t<0?o(e[0],e[1],n):1<t?o(e[r],e[r-1],r-n):o(e[i],e[r<i+1?r:i+1],n-i)},Bezier:function(e,t){for(var r=0,n=e.length-1,i=Math.pow,o=l.Interpolation.Utils.Bernstein,a=0;a<=n;a++)r+=i(1-t,n-a)*i(t,a)*e[a]*o(n,a);return r},CatmullRom:function(e,t){var r=e.length-1,n=r*t,i=Math.floor(n),o=l.Interpolation.Utils.CatmullRom;return e[0]===e[r]?(t<0&&(i=Math.floor(n=r*(1+t))),o(e[(i-1+r)%r],e[i],e[(i+1)%r],e[(i+2)%r],n-i)):t<0?e[0]-(o(e[0],e[0],e[1],e[1],-n)-e[0]):1<t?e[r]-(o(e[r],e[r],e[r-1],e[r-1],n-r)-e[r]):o(e[i?i-1:0],e[i],e[r<i+1?r:i+1],e[r<i+2?r:i+2],n-i)},Utils:{Linear:function(e,t,r){return(t-e)*r+e},Bernstein:function(e,t){var r=l.Interpolation.Utils.Factorial;return r(e)/r(t)/r(e-t)},Factorial:(s=[1],function(e){var t=1;if(s[e])return s[e];for(var r=e;1<r;r--)t*=r;return s[e]=t}),CatmullRom:function(e,t,r,n,i){var o=.5*(r-e),a=.5*(n-t),s=i*i;return(2*t-2*r+o+a)*(i*s)+(-3*t+3*r-2*o-a)*s+o*i+t}}},a=this,"function"==typeof define&&r("nErl")?define([],function(){return l}):void 0!==n&&"object"==("undefined"==typeof exports?"undefined":i(exports))?n.exports=l:void 0!==a&&(a.TWEEN=l)}).call(t,r("W2nU"),r("f1Eh")(e))},"9icu":function(e,t,r){"use strict";r.d(t,"a",function(){return z});
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */var n={},i=void 0,o=n;function a(e,t){var r,n=e.split("."),a=o;!(n[0]in a)&&a.execScript&&a.execScript("var "+n[0]);for(;n.length&&(r=n.shift());)n.length||t===i?a=a[r]?a[r]:a[r]={}:a[r]=t}var s="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function l(e){var t,r,n,i,o,a,l,u,c,h,d=e.length,p=0,f=Number.POSITIVE_INFINITY;for(u=0;u<d;++u)e[u]>p&&(p=e[u]),e[u]<f&&(f=e[u]);for(t=1<<p,r=new(s?Uint32Array:Array)(t),n=1,i=0,o=2;n<=p;){for(u=0;u<d;++u)if(e[u]===n){for(a=0,l=i,c=0;c<n;++c)a=a<<1|1&l,l>>=1;for(h=n<<16|u,c=a;c<t;c+=o)r[c]=h;++i}++n,i<<=1,o<<=1}return[r,p,f]}function u(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=s?new Uint8Array(e):e,this.m=!1,this.i=h,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case c:this.b=32768,this.c=new(s?Uint8Array:Array)(32768+this.h+258);break;case h:this.b=0,this.c=new(s?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var c=0,h=1,d={t:c,s:h};u.prototype.k=function(){for(;!this.m;){var e=R(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,r=this.a,n=this.c,o=this.b,a=t.length,u=i,d=n.length,p=i;if(this.d=this.f=0,r+1>=a)throw Error("invalid uncompressed block header: LEN");if(u=t[r++]|t[r++]<<8,r+1>=a)throw Error("invalid uncompressed block header: NLEN");if(u===~(t[r++]|t[r++]<<8))throw Error("invalid uncompressed block header: length verify");if(r+u>t.length)throw Error("input buffer is broken");switch(this.i){case c:for(;o+u>n.length;){if(u-=p=d-o,s)n.set(t.subarray(r,r+p),o),o+=p,r+=p;else for(;p--;)n[o++]=t[r++];this.b=o,n=this.e(),o=this.b}break;case h:for(;o+u>n.length;)n=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(s)n.set(t.subarray(r,r+u),o),o+=u,r+=u;else for(;u--;)n[o++]=t[r++];this.a=r,this.b=o,this.c=n;break;case 1:this.j(M,O);break;case 2:var f,m,g,y,b=R(this,5)+257,w=R(this,5)+1,x=R(this,4)+4,_=new(s?Uint8Array:Array)(v.length),T=i,A=i,S=i,E=i,C=i;for(C=0;C<x;++C)_[v[C]]=R(this,3);if(!s)for(C=x,x=_.length;C<x;++C)_[v[C]]=0;for(f=l(_),T=new(s?Uint8Array:Array)(b+w),C=0,y=b+w;C<y;)switch(A=k(this,f)){case 16:for(E=3+R(this,2);E--;)T[C++]=S;break;case 17:for(E=3+R(this,3);E--;)T[C++]=0;S=0;break;case 18:for(E=11+R(this,7);E--;)T[C++]=0;S=0;break;default:S=T[C++]=A}m=l(s?T.subarray(0,b):T.slice(0,b)),g=l(s?T.subarray(b):T.slice(b)),this.j(m,g);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var p,f,m=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],v=s?new Uint16Array(m):m,g=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],y=s?new Uint16Array(g):g,b=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],w=s?new Uint8Array(b):b,x=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],_=s?new Uint16Array(x):x,T=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],A=s?new Uint8Array(T):T,S=new(s?Uint8Array:Array)(288);for(p=0,f=S.length;p<f;++p)S[p]=143>=p?8:255>=p?9:279>=p?7:8;var E,C,M=l(S),N=new(s?Uint8Array:Array)(30);for(E=0,C=N.length;E<C;++E)N[E]=5;var O=l(N);function R(e,t){for(var r,n=e.f,i=e.d,o=e.input,a=e.a,s=o.length;i<t;){if(a>=s)throw Error("input buffer is broken");n|=o[a++]<<i,i+=8}return r=n&(1<<t)-1,e.f=n>>>t,e.d=i-t,e.a=a,r}function k(e,t){for(var r,n,i=e.f,o=e.d,a=e.input,s=e.a,l=a.length,u=t[0],c=t[1];o<c&&!(s>=l);)i|=a[s++]<<o,o+=8;if((n=(r=u[i&(1<<c)-1])>>>16)>o)throw Error("invalid code length: "+n);return e.f=i>>n,e.d=o-n,e.a=s,65535&r}function L(e,t){var r,n;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),r=e[this.a++],n=e[this.a++],15&r){case I:this.method=I;break;default:throw Error("unsupported compression method")}if(0!=((r<<8)+n)%31)throw Error("invalid fcheck flag:"+((r<<8)+n)%31);if(32&n)throw Error("fdict flag is not supported");this.q=new u(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}u.prototype.j=function(e,t){var r=this.c,n=this.b;this.o=e;for(var i,o,a,s,l=r.length-258;256!==(i=k(this,e));)if(256>i)n>=l&&(this.b=n,r=this.e(),n=this.b),r[n++]=i;else for(s=y[o=i-257],0<w[o]&&(s+=R(this,w[o])),i=k(this,t),a=_[i],0<A[i]&&(a+=R(this,A[i])),n>=l&&(this.b=n,r=this.e(),n=this.b);s--;)r[n]=r[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},u.prototype.w=function(e,t){var r=this.c,n=this.b;this.o=e;for(var i,o,a,s,l=r.length;256!==(i=k(this,e));)if(256>i)n>=l&&(l=(r=this.e()).length),r[n++]=i;else for(s=y[o=i-257],0<w[o]&&(s+=R(this,w[o])),i=k(this,t),a=_[i],0<A[i]&&(a+=R(this,A[i])),n+s>l&&(l=(r=this.e()).length);s--;)r[n]=r[n++-a];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},u.prototype.e=function(){var e,t,r=new(s?Uint8Array:Array)(this.b-32768),n=this.b-32768,i=this.c;if(s)r.set(i.subarray(32768,r.length));else for(e=0,t=r.length;e<t;++e)r[e]=i[e+32768];if(this.g.push(r),this.l+=r.length,s)i.set(i.subarray(n,n+32768));else for(e=0;32768>e;++e)i[e]=i[n+e];return this.b=32768,i},u.prototype.z=function(e){var t,r,n,i=this.input.length/this.a+1|0,o=this.input,a=this.c;return e&&("number"==typeof e.p&&(i=e.p),"number"==typeof e.u&&(i+=e.u)),2>i?r=(n=(o.length-this.a)/this.o[2]/2*258|0)<a.length?a.length+n:a.length<<1:r=a.length*i,s?(t=new Uint8Array(r)).set(a):t=a,this.c=t},u.prototype.n=function(){var e,t,r,n,i,o=0,a=this.c,l=this.g,u=new(s?Uint8Array:Array)(this.l+(this.b-32768));if(0===l.length)return s?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,r=l.length;t<r;++t)for(n=0,i=(e=l[t]).length;n<i;++n)u[o++]=e[n];for(t=32768,r=this.b;t<r;++t)u[o++]=a[t];return this.g=[],this.buffer=u},u.prototype.v=function(){var e,t=this.b;return s?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},L.prototype.k=function(){var e,t,r=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(r[this.a++]<<24|r[this.a++]<<16|r[this.a++]<<8|r[this.a++])>>>0;var n=e;if("string"==typeof n){var i,o,a=n.split("");for(i=0,o=a.length;i<o;i++)a[i]=(255&a[i].charCodeAt(0))>>>0;n=a}for(var s,l=1,u=0,c=n.length,h=0;0<c;){c-=s=1024<c?1024:c;do{u+=l+=n[h++]}while(--s);l%=65521,u%=65521}if(t!==(u<<16|l)>>>0)throw Error("invalid adler-32 checksum")}return e};var I=8;a("Zlib.Inflate",L),a("Zlib.Inflate.prototype.decompress",L.prototype.k);var P,B,D,U,F={ADAPTIVE:d.s,BLOCK:d.t};if(Object.keys)P=Object.keys(F);else for(B in P=[],D=0,F)P[D++]=B;for(D=0,U=P.length;D<U;++D)a("Zlib.Inflate.BufferType."+(B=P[D]),F[B]);var z=n.Zlib.Inflate},A9m1:function(e,t,r){"use strict";r.d(t,"a",function(){return i}),r.d(t,"c",function(){return o}),r.d(t,"b",function(){return a});var n=r("6+nK"),i=function(e){n.Object3D.call(this),this.element=e||document.createElement("div"),this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.addEventListener("removed",function(){this.traverse(function(e){e.element instanceof Element&&null!==e.element.parentNode&&e.element.parentNode.removeChild(e.element)})})};i.prototype=Object.assign(Object.create(n.Object3D.prototype),{constructor:i,copy:function(e,t){return n.Object3D.prototype.copy.call(this,e,t),this.element=e.element.cloneNode(!0),this}});var o=function(e){i.call(this,e)};o.prototype=Object.create(i.prototype),o.prototype.constructor=o;var a=function(){var e,t,r,a,s=this,l=new n.Matrix4,u={camera:{fov:0,style:""},objects:new WeakMap},c=document.createElement("div");c.style.overflow="hidden",this.domElement=c;var h=document.createElement("div");h.style.WebkitTransformStyle="preserve-3d",h.style.transformStyle="preserve-3d",h.style.pointerEvents="none",c.appendChild(h);var d=/Trident/i.test(navigator.userAgent);function p(e){return Math.abs(e)<1e-10?0:e}function f(e){var t=e.elements;return"matrix3d("+p(t[0])+","+p(-t[1])+","+p(t[2])+","+p(t[3])+","+p(t[4])+","+p(-t[5])+","+p(t[6])+","+p(t[7])+","+p(t[8])+","+p(-t[9])+","+p(t[10])+","+p(t[11])+","+p(t[12])+","+p(-t[13])+","+p(t[14])+","+p(t[15])+")"}function m(e,t){var n=e.elements,i="matrix3d("+p(n[0])+","+p(n[1])+","+p(n[2])+","+p(n[3])+","+p(-n[4])+","+p(-n[5])+","+p(-n[6])+","+p(-n[7])+","+p(n[8])+","+p(n[9])+","+p(n[10])+","+p(n[11])+","+p(n[12])+","+p(n[13])+","+p(n[14])+","+p(n[15])+")";return d?"translate(-50%,-50%)translate("+r+"px,"+a+"px)"+t+i:"translate(-50%,-50%)"+i}this.getSize=function(){return{width:e,height:t}},this.setSize=function(n,i){r=(e=n)/2,a=(t=i)/2,c.style.width=n+"px",c.style.height=i+"px",h.style.width=n+"px",h.style.height=i+"px"};var v,g,y=(v=new n.Vector3,g=new n.Vector3,function(e,t){return v.setFromMatrixPosition(e.matrixWorld),g.setFromMatrixPosition(t.matrixWorld),v.distanceToSquared(g)});function b(e){for(var t=function(e){var t=[];return e.traverse(function(e){e instanceof i&&t.push(e)}),t}(e).sort(function(e,t){return u.objects.get(e).distanceToCameraSquared-u.objects.get(t).distanceToCameraSquared}),r=t.length,n=0,o=t.length;n<o;n++)t[n].element.style.zIndex=r-n}this.render=function(e,t){var n=t.projectionMatrix.elements[5]*a;if(u.camera.fov!==n&&(t.isPerspectiveCamera?(c.style.WebkitPerspective=n+"px",c.style.perspective=n+"px"):(c.style.WebkitPerspective="",c.style.perspective=""),u.camera.fov=n),!0===e.autoUpdate&&e.updateMatrixWorld(),null===t.parent&&t.updateMatrixWorld(),t.isOrthographicCamera)var v=-(t.right+t.left)/2,g=(t.top+t.bottom)/2;var w=t.isOrthographicCamera?"scale("+n+")translate("+p(v)+"px,"+p(g)+"px)"+f(t.matrixWorldInverse):"translateZ("+n+"px)"+f(t.matrixWorldInverse),x=w+"translate("+r+"px,"+a+"px)";u.camera.style===x||d||(h.style.WebkitTransform=x,h.style.transform=x,u.camera.style=x),function e(t,r,n,a){if(t instanceof i){var c;t.onBeforeRender(s,r,n),t instanceof o?(l.copy(n.matrixWorldInverse),l.transpose(),l.copyPosition(t.matrixWorld),l.scale(t.scale),l.elements[3]=0,l.elements[7]=0,l.elements[11]=0,l.elements[15]=1,c=m(l,a)):c=m(t.matrixWorld,a);var p=t.element,f=u.objects.get(t);if(void 0===f||f.style!==c){p.style.WebkitTransform=c,p.style.transform=c;var v={style:c};d&&(v.distanceToCameraSquared=y(n,t)),u.objects.set(t,v)}p.style.display=t.visible?"":"none",p.parentNode!==h&&h.appendChild(p),t.onAfterRender(s,r,n)}for(var g=0,b=t.children.length;g<b;g++)e(t.children[g],r,n,a)}(e,e,t,w),d&&b(e)}}},Ah8h:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n,i,o,a=r("6+nK");function s(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(s.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),s.FullScreenQuad=(n=new a.OrthographicCamera(-1,1,1,-1,0,1),i=new a.PlaneBufferGeometry(2,2),o=function(e){this._mesh=new a.Mesh(i,e)},Object.defineProperty(o.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(o.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,n)}}),o)},Ai5a:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("6+nK"),i=r("hwmT"),o=r("7zw7");function a(e,t,r){i.a.call(this,"v3"),this.value=e instanceof n.Vector3?e:new n.Vector3(e,t,r)}a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.nodeType="Vector3",o.a.addShortcuts(a.prototype,"value",["x","y","z"]),a.prototype.generateReadonly=function(e,t,r,n){return e.format("vec3( "+this.x+", "+this.y+", "+this.z+" )",n,t)},a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.value.copy(e),this},a.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,t.z=this.z,!0===this.readonly&&(t.readonly=!0)),t}},B0Ky:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("6+nK"),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(e){n.Loader.call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};o.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:o,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,r,i){var o=this,a=new n.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(e){var r={attributeIDs:o.defaultAttributeIDs,attributeTypes:o.defaultAttributeTypes,useUniqueIDs:!1};o.decodeGeometry(e,r).then(t).catch(i)},r,i)},decodeDracoFile:function(e,t,r,n){var i={attributeIDs:r||this.defaultAttributeIDs,attributeTypes:n||this.defaultAttributeTypes,useUniqueIDs:!!r};this.decodeGeometry(e,i).then(t)},decodeGeometry:function(e,t){var r=this;for(var n in t.attributeTypes){var i=t.attributeTypes[n];void 0!==i.BYTES_PER_ELEMENT&&(t.attributeTypes[n]=i.name)}var a,s=JSON.stringify(t);if(o.taskCache.has(e)){var l=o.taskCache.get(e);if(l.key===s)return l.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var u=this.workerNextTaskID++,c=e.byteLength,h=this._getWorker(u,c).then(function(r){return a=r,new Promise(function(r,n){a._callbacks[u]={resolve:r,reject:n},a.postMessage({type:"decode",id:u,taskConfig:t,buffer:e},[e])})}).then(function(e){return r._createGeometry(e.geometry)});return h.catch(function(){return!0}).then(function(){a&&u&&r._releaseTask(a,u)}),o.taskCache.set(e,{key:s,promise:h}),h},_createGeometry:function(e){var t=new n.BufferGeometry;e.index&&t.setIndex(new n.BufferAttribute(e.index.array,1));for(var r=0;r<e.attributes.length;r++){var i=e.attributes[r],o=i.name,a=i.array,s=i.itemSize;t.setAttribute(o,new n.BufferAttribute(a,s))}return t},_loadLibrary:function(e,t){var r=new n.FileLoader(this.manager);return r.setPath(this.decoderPath),r.setResponseType(t),r.setWithCredentials(this.withCredentials),new Promise(function(t,n){r.load(e,t,void 0,n)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){var e=this;if(this.decoderPending)return this.decoderPending;var t="object"!==("undefined"==typeof WebAssembly?"undefined":i(WebAssembly))||"js"===this.decoderConfig.type,r=[];return t?r.push(this._loadLibrary("draco_decoder.js","text")):(r.push(this._loadLibrary("draco_wasm_wrapper.js","text")),r.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(r).then(function(r){var n=r[0];t||(e.decoderConfig.wasmBinary=r[1]);var i=o.DRACOWorker.toString(),a=["/* draco decoder */",n,"","/* worker */",i.substring(i.indexOf("{")+1,i.lastIndexOf("}"))].join("\n");e.workerSourceURL=URL.createObjectURL(new Blob([a]))}),this.decoderPending},_getWorker:function(e,t){var r=this;return this._initDecoder().then(function(){var n;r.workerPool.length<r.workerLimit?((n=new Worker(r.workerSourceURL))._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:r.decoderConfig}),n.onmessage=function(e){var t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},r.workerPool.push(n)):r.workerPool.sort(function(e,t){return e._taskLoad>t._taskLoad?-1:1});return(n=r.workerPool[r.workerPool.length-1])._taskCosts[e]=t,n._taskLoad+=t,n})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map(function(e){return e._taskLoad}))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),o.DRACOWorker=function(){var e,t;function r(e,t,r,n,i,o){var a=o.num_components(),s=r.num_points()*a,l=s*i.BYTES_PER_ELEMENT,u=function(e,t){switch(t){case Float32Array:return e.DT_FLOAT32;case Int8Array:return e.DT_INT8;case Int16Array:return e.DT_INT16;case Int32Array:return e.DT_INT32;case Uint8Array:return e.DT_UINT8;case Uint16Array:return e.DT_UINT16;case Uint32Array:return e.DT_UINT32}}(e,i),c=e._malloc(l);t.GetAttributeDataArrayForAllPoints(r,o,u,l,c);var h=new i(e.HEAPF32.buffer,c,s).slice();return e._free(c),{name:n,array:h,itemSize:a}}onmessage=function(n){var i=n.data;switch(i.type){case"init":e=i.decoderConfig,t=new Promise(function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)});break;case"decode":var o=i.buffer,a=i.taskConfig;t.then(function(e){var t=e.draco,n=new t.Decoder,s=new t.DecoderBuffer;s.Init(new Int8Array(o),o.byteLength);try{var l=function(e,t,n,i){var o,a,s=i.attributeIDs,l=i.attributeTypes,u=t.GetEncodedGeometryType(n);if(u===e.TRIANGULAR_MESH)o=new e.Mesh,a=t.DecodeBufferToMesh(n,o);else{if(u!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,a=t.DecodeBufferToPointCloud(n,o)}if(!a.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+a.error_msg());var c={index:null,attributes:[]};for(var h in s){var d,p,f=self[l[h]];if(i.useUniqueIDs)p=s[h],d=t.GetAttributeByUniqueId(o,p);else{if(-1===(p=t.GetAttributeId(o,e[s[h]])))continue;d=t.GetAttribute(o,p)}c.attributes.push(r(e,t,o,h,f,d))}u===e.TRIANGULAR_MESH&&(c.index=function(e,t,r){var n=3*r.num_faces(),i=4*n,o=e._malloc(i);t.GetTrianglesUInt32Array(r,i,o);var a=new Uint32Array(e.HEAPF32.buffer,o,n).slice();return e._free(o),{array:a,itemSize:1}}(e,t,o));return e.destroy(o),c}(t,n,s,a),u=l.attributes.map(function(e){return e.array.buffer});l.index&&u.push(l.index.array.buffer),self.postMessage({type:"decode",id:i.id,geometry:l},u)}catch(e){console.error(e),self.postMessage({type:"error",id:i.id,error:e.message})}finally{t.destroy(s),t.destroy(n)}})}}},o.taskCache=new WeakMap,o.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},o.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},o.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},o.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")}},B6oc:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function e(t,r){n.Mesh.call(this,t),this.type="Reflector";var i=this,o=void 0!==(r=r||{}).color?new n.Color(r.color):new n.Color(8355711),a=r.textureWidth||512,s=r.textureHeight||512,l=r.clipBias||0,u=r.shader||e.ReflectorShader,c=new n.Plane,h=new n.Vector3,d=new n.Vector3,p=new n.Vector3,f=new n.Matrix4,m=new n.Vector3(0,0,-1),v=new n.Vector4,g=new n.Vector3,y=new n.Vector3,b=new n.Vector4,w=new n.Matrix4,x=new n.PerspectiveCamera,_={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBFormat},T=new n.WebGLRenderTarget(a,s,_);n.MathUtils.isPowerOfTwo(a)&&n.MathUtils.isPowerOfTwo(s)||(T.texture.generateMipmaps=!1);var A=new n.ShaderMaterial({uniforms:n.UniformsUtils.clone(u.uniforms),fragmentShader:u.fragmentShader,vertexShader:u.vertexShader});A.uniforms.tDiffuse.value=T.texture,A.uniforms.color.value=o,A.uniforms.textureMatrix.value=w,this.material=A,this.onBeforeRender=function(e,t,r){if(d.setFromMatrixPosition(i.matrixWorld),p.setFromMatrixPosition(r.matrixWorld),f.extractRotation(i.matrixWorld),h.set(0,0,1),h.applyMatrix4(f),g.subVectors(d,p),!(g.dot(h)>0)){g.reflect(h).negate(),g.add(d),f.extractRotation(r.matrixWorld),m.set(0,0,-1),m.applyMatrix4(f),m.add(p),y.subVectors(d,m),y.reflect(h).negate(),y.add(d),x.position.copy(g),x.up.set(0,1,0),x.up.applyMatrix4(f),x.up.reflect(h),x.lookAt(y),x.far=r.far,x.updateMatrixWorld(),x.projectionMatrix.copy(r.projectionMatrix),w.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),w.multiply(x.projectionMatrix),w.multiply(x.matrixWorldInverse),w.multiply(i.matrixWorld),c.setFromNormalAndCoplanarPoint(h,d),c.applyMatrix4(x.matrixWorldInverse),v.set(c.normal.x,c.normal.y,c.normal.z,c.constant);var n=x.projectionMatrix;b.x=(Math.sign(v.x)+n.elements[8])/n.elements[0],b.y=(Math.sign(v.y)+n.elements[9])/n.elements[5],b.z=-1,b.w=(1+n.elements[10])/n.elements[14],v.multiplyScalar(2/v.dot(b)),n.elements[2]=v.x,n.elements[6]=v.y,n.elements[10]=v.z+1-l,n.elements[14]=v.w,T.texture.encoding=e.outputEncoding,i.visible=!1;var o=e.getRenderTarget(),a=e.xr.enabled,s=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(T),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,x),e.xr.enabled=a,e.shadowMap.autoUpdate=s,e.setRenderTarget(o);var u=r.viewport;void 0!==u&&e.state.viewport(u),i.visible=!0}},this.getRenderTarget=function(){return T}};i.prototype=Object.create(n.Mesh.prototype),i.prototype.constructor=i,i.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")}},Dfdy:function(e,t,r){"use strict";r.d(t,"a",function(){return T});var n,i,o,a,s,l,u,c,h,d,p,f,m,v,g=r("6+nK"),y=r("/nNp"),b=r("5l0I"),w=r("KkAi"),x=r("Oi88"),_=r("nXFl");function T(e,t){y.a.call(this,"v4"),this.input=e,this.method=t||T.LINEAR_TO_LINEAR}T.Nodes=(n=new x.a(["vec4 LinearToLinear( in vec4 value ) {","\treturn value;","}"].join("\n")),i=new x.a(["vec4 GammaToLinear( in vec4 value, in float gammaFactor ) {","\treturn vec4( pow( value.xyz, vec3( gammaFactor ) ), value.w );","}"].join("\n")),o=new x.a(["vec4 LinearToGamma( in vec4 value, in float gammaFactor ) {","\treturn vec4( pow( value.xyz, vec3( 1.0 / gammaFactor ) ), value.w );","}"].join("\n")),a=new x.a(["vec4 sRGBToLinear( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.w );","}"].join("\n")),s=new x.a(["vec4 LinearTosRGB( in vec4 value ) {","\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.w );","}"].join("\n")),l=new x.a(["vec4 RGBEToLinear( in vec4 value ) {","\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );","}"].join("\n")),u=new x.a(["vec4 LinearToRGBE( in vec4 value ) {","\tfloat maxComponent = max( max( value.r, value.g ), value.b );","\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );","\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );","}"].join("\n")),c=new x.a(["vec3 RGBMToLinear( in vec4 value, in float maxRange ) {","\treturn vec4( value.xyz * value.w * maxRange, 1.0 );","}"].join("\n")),h=new x.a(["vec3 LinearToRGBM( in vec4 value, in float maxRange ) {","\tfloat maxRGB = max( value.x, max( value.g, value.b ) );","\tfloat M      = clamp( maxRGB / maxRange, 0.0, 1.0 );","\tM            = ceil( M * 255.0 ) / 255.0;","\treturn vec4( value.rgb / ( M * maxRange ), M );","}"].join("\n")),d=new x.a(["vec3 RGBDToLinear( in vec4 value, in float maxRange ) {","\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );","}"].join("\n")),p=new x.a(["vec3 LinearToRGBD( in vec4 value, in float maxRange ) {","\tfloat maxRGB = max( value.x, max( value.g, value.b ) );","\tfloat D      = max( maxRange / maxRGB, 1.0 );","\tD            = clamp( floor( D ) / 255.0, 0.0, 1.0 );","\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );","}"].join("\n")),f=new b.a("const mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );"),m=new x.a(["vec4 LinearToLogLuv( in vec4 value ) {","\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;","\tXp_Y_XYZp = max(Xp_Y_XYZp, vec3(1e-6, 1e-6, 1e-6));","\tvec4 vResult;","\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;","\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;","\tvResult.w = fract(Le);","\tvResult.z = (Le - (floor(vResult.w*255.0))/255.0)/255.0;","\treturn vResult;","}"].join("\n"),[f]),v=new b.a("const mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );"),{LinearToLinear:n,GammaToLinear:i,LinearToGamma:o,sRGBToLinear:a,LinearTosRGB:s,RGBEToLinear:l,LinearToRGBE:u,RGBMToLinear:c,LinearToRGBM:h,RGBDToLinear:d,LinearToRGBD:p,cLogLuvM:f,LinearToLogLuv:m,cLogLuvInverseM:v,LogLuvToLinear:new x.a(["vec4 LogLuvToLinear( in vec4 value ) {","\tfloat Le = value.z * 255.0 + value.w;","\tvec3 Xp_Y_XYZp;","\tXp_Y_XYZp.y = exp2((Le - 127.0) / 2.0);","\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;","\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;","\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;","\treturn vec4( max(vRGB, 0.0), 1.0 );","}"].join("\n"),[v])}),T.LINEAR_TO_LINEAR="LinearToLinear",T.GAMMA_TO_LINEAR="GammaToLinear",T.LINEAR_TO_GAMMA="LinearToGamma",T.SRGB_TO_LINEAR="sRGBToLinear",T.LINEAR_TO_SRGB="LinearTosRGB",T.RGBE_TO_LINEAR="RGBEToLinear",T.LINEAR_TO_RGBE="LinearToRGBE",T.RGBM_TO_LINEAR="RGBMToLinear",T.LINEAR_TO_RGBM="LinearToRGBM",T.RGBD_TO_LINEAR="RGBDToLinear",T.LINEAR_TO_RGBD="LinearToRGBD",T.LINEAR_TO_LOG_LUV="LinearToLogLuv",T.LOG_LUV_TO_LINEAR="LogLuvToLinear",T.getEncodingComponents=function(e){switch(e){case g.LinearEncoding:return["Linear"];case g.sRGBEncoding:return["sRGB"];case g.RGBEEncoding:return["RGBE"];case g.RGBM7Encoding:return["RGBM",new w.a(7).setReadonly(!0)];case g.RGBM16Encoding:return["RGBM",new w.a(16).setReadonly(!0)];case g.RGBDEncoding:return["RGBD",new w.a(256).setReadonly(!0)];case g.GammaEncoding:return["Gamma",new _.a("float( GAMMA_FACTOR )","f")]}},T.prototype=Object.create(y.a.prototype),T.prototype.constructor=T,T.prototype.nodeType="ColorSpace",T.prototype.hashProperties=["method"],T.prototype.generate=function(e,t){var r=this.input.build(e,"v4"),n=this.getType(e),i=T.Nodes[this.method],o=e.include(i);if(o===T.LINEAR_TO_LINEAR)return e.format(r,n,t);if(2===i.inputs.length){var a=this.factor.build(e,"f");return e.format(o+"( "+r+", "+a+" )",n,t)}return e.format(o+"( "+r+" )",n,t)},T.prototype.fromEncoding=function(e){var t=T.getEncodingComponents(e);this.method="LinearTo"+t[0],this.factor=t[1]},T.prototype.fromDecoding=function(e){var t=T.getEncodingComponents(e);this.method=t[0]+"ToLinear",this.factor=t[1]},T.prototype.copy=function(e){return y.a.prototype.copy.call(this,e),this.input=e.input,this.method=e.method,this},T.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).input=this.input.toJSON(e).uuid,t.method=this.method),t}},DqHV:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={isWebGLAvailable:function(){try{var e=document.createElement("canvas");return!(!window.WebGLRenderingContext||!e.getContext("webgl")&&!e.getContext("experimental-webgl"))}catch(e){return!1}},isWebGL2Available:function(){try{var e=document.createElement("canvas");return!(!window.WebGL2RenderingContext||!e.getContext("webgl2"))}catch(e){return!1}},getWebGLErrorMessage:function(){return this.getErrorMessage(1)},getWebGL2ErrorMessage:function(){return this.getErrorMessage(2)},getErrorMessage:function(e){var t={1:window.WebGLRenderingContext,2:window.WebGL2RenderingContext},r='Your $0 does not seem to support <a href="http://khronos.org/webgl/wiki/Getting_a_WebGL_Implementation" style="color:#000">$1</a>',n=document.createElement("div");return n.id="webglmessage",n.style.fontFamily="monospace",n.style.fontSize="13px",n.style.fontWeight="normal",n.style.textAlign="center",n.style.background="#fff",n.style.color="#000",n.style.padding="1.5em",n.style.width="400px",n.style.margin="5em auto 0",r=(r=t[e]?r.replace("$0","graphics card"):r.replace("$0","browser")).replace("$1",{1:"WebGL",2:"WebGL 2"}[e]),n.innerHTML=r,n}}},EKta:function(e,t,r){"use strict";t.byteLength=function(e){var t=u(e),r=t[0],n=t[1];return 3*(r+n)/4-n},t.toByteArray=function(e){var t,r,n=u(e),a=n[0],s=n[1],l=new o(function(e,t,r){return 3*(t+r)/4-r}(0,a,s)),c=0,h=s>0?a-4:a;for(r=0;r<h;r+=4)t=i[e.charCodeAt(r)]<<18|i[e.charCodeAt(r+1)]<<12|i[e.charCodeAt(r+2)]<<6|i[e.charCodeAt(r+3)],l[c++]=t>>16&255,l[c++]=t>>8&255,l[c++]=255&t;2===s&&(t=i[e.charCodeAt(r)]<<2|i[e.charCodeAt(r+1)]>>4,l[c++]=255&t);1===s&&(t=i[e.charCodeAt(r)]<<10|i[e.charCodeAt(r+1)]<<4|i[e.charCodeAt(r+2)]>>2,l[c++]=t>>8&255,l[c++]=255&t);return l},t.fromByteArray=function(e){for(var t,r=e.length,i=r%3,o=[],a=0,s=r-i;a<s;a+=16383)o.push(c(e,a,a+16383>s?s:a+16383));1===i?(t=e[r-1],o.push(n[t>>2]+n[t<<4&63]+"==")):2===i&&(t=(e[r-2]<<8)+e[r-1],o.push(n[t>>10]+n[t>>4&63]+n[t<<2&63]+"="));return o.join("")};for(var n=[],i=[],o="undefined"!=typeof Uint8Array?Uint8Array:Array,a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",s=0,l=a.length;s<l;++s)n[s]=a[s],i[a.charCodeAt(s)]=s;function u(e){var t=e.length;if(t%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var r=e.indexOf("=");return-1===r&&(r=t),[r,r===t?0:4-r%4]}function c(e,t,r){for(var i,o,a=[],s=t;s<r;s+=3)i=(e[s]<<16&16711680)+(e[s+1]<<8&65280)+(255&e[s+2]),a.push(n[(o=i)>>18&63]+n[o>>12&63]+n[o>>6&63]+n[63&o]);return a.join("")}i["-".charCodeAt(0)]=62,i["_".charCodeAt(0)]=63},EuP9:function(e,t,r){"use strict";(function(e){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <http://feross.org>
 * @license  MIT
 */
var n=r("EKta"),i=r("ujcs"),o=r("sOR5");function a(){return l.TYPED_ARRAY_SUPPORT?2147483647:1073741823}function s(e,t){if(a()<t)throw new RangeError("Invalid typed array length");return l.TYPED_ARRAY_SUPPORT?(e=new Uint8Array(t)).__proto__=l.prototype:(null===e&&(e=new l(t)),e.length=t),e}function l(e,t,r){if(!(l.TYPED_ARRAY_SUPPORT||this instanceof l))return new l(e,t,r);if("number"==typeof e){if("string"==typeof t)throw new Error("If encoding is specified then the first argument must be a string");return h(this,e)}return u(this,e,t,r)}function u(e,t,r,n){if("number"==typeof t)throw new TypeError('"value" argument must not be a number');return"undefined"!=typeof ArrayBuffer&&t instanceof ArrayBuffer?function(e,t,r,n){if(t.byteLength,r<0||t.byteLength<r)throw new RangeError("'offset' is out of bounds");if(t.byteLength<r+(n||0))throw new RangeError("'length' is out of bounds");t=void 0===r&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,r):new Uint8Array(t,r,n);l.TYPED_ARRAY_SUPPORT?(e=t).__proto__=l.prototype:e=d(e,t);return e}(e,t,r,n):"string"==typeof t?function(e,t,r){"string"==typeof r&&""!==r||(r="utf8");if(!l.isEncoding(r))throw new TypeError('"encoding" must be a valid string encoding');var n=0|f(t,r),i=(e=s(e,n)).write(t,r);i!==n&&(e=e.slice(0,i));return e}(e,t,r):function(e,t){if(l.isBuffer(t)){var r=0|p(t.length);return 0===(e=s(e,r)).length?e:(t.copy(e,0,0,r),e)}if(t){if("undefined"!=typeof ArrayBuffer&&t.buffer instanceof ArrayBuffer||"length"in t)return"number"!=typeof t.length||(n=t.length)!=n?s(e,0):d(e,t);if("Buffer"===t.type&&o(t.data))return d(e,t.data)}var n;throw new TypeError("First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.")}(e,t)}function c(e){if("number"!=typeof e)throw new TypeError('"size" argument must be a number');if(e<0)throw new RangeError('"size" argument must not be negative')}function h(e,t){if(c(t),e=s(e,t<0?0:0|p(t)),!l.TYPED_ARRAY_SUPPORT)for(var r=0;r<t;++r)e[r]=0;return e}function d(e,t){var r=t.length<0?0:0|p(t.length);e=s(e,r);for(var n=0;n<r;n+=1)e[n]=255&t[n];return e}function p(e){if(e>=a())throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a().toString(16)+" bytes");return 0|e}function f(e,t){if(l.isBuffer(e))return e.length;if("undefined"!=typeof ArrayBuffer&&"function"==typeof ArrayBuffer.isView&&(ArrayBuffer.isView(e)||e instanceof ArrayBuffer))return e.byteLength;"string"!=typeof e&&(e=""+e);var r=e.length;if(0===r)return 0;for(var n=!1;;)switch(t){case"ascii":case"latin1":case"binary":return r;case"utf8":case"utf-8":case void 0:return z(e).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*r;case"hex":return r>>>1;case"base64":return V(e).length;default:if(n)return z(e).length;t=(""+t).toLowerCase(),n=!0}}function m(e,t,r){var n=e[t];e[t]=e[r],e[r]=n}function v(e,t,r,n,i){if(0===e.length)return-1;if("string"==typeof r?(n=r,r=0):r>2147483647?r=2147483647:r<-2147483648&&(r=-2147483648),r=+r,isNaN(r)&&(r=i?0:e.length-1),r<0&&(r=e.length+r),r>=e.length){if(i)return-1;r=e.length-1}else if(r<0){if(!i)return-1;r=0}if("string"==typeof t&&(t=l.from(t,n)),l.isBuffer(t))return 0===t.length?-1:g(e,t,r,n,i);if("number"==typeof t)return t&=255,l.TYPED_ARRAY_SUPPORT&&"function"==typeof Uint8Array.prototype.indexOf?i?Uint8Array.prototype.indexOf.call(e,t,r):Uint8Array.prototype.lastIndexOf.call(e,t,r):g(e,[t],r,n,i);throw new TypeError("val must be string, number or Buffer")}function g(e,t,r,n,i){var o,a=1,s=e.length,l=t.length;if(void 0!==n&&("ucs2"===(n=String(n).toLowerCase())||"ucs-2"===n||"utf16le"===n||"utf-16le"===n)){if(e.length<2||t.length<2)return-1;a=2,s/=2,l/=2,r/=2}function u(e,t){return 1===a?e[t]:e.readUInt16BE(t*a)}if(i){var c=-1;for(o=r;o<s;o++)if(u(e,o)===u(t,-1===c?0:o-c)){if(-1===c&&(c=o),o-c+1===l)return c*a}else-1!==c&&(o-=o-c),c=-1}else for(r+l>s&&(r=s-l),o=r;o>=0;o--){for(var h=!0,d=0;d<l;d++)if(u(e,o+d)!==u(t,d)){h=!1;break}if(h)return o}return-1}function y(e,t,r,n){r=Number(r)||0;var i=e.length-r;n?(n=Number(n))>i&&(n=i):n=i;var o=t.length;if(o%2!=0)throw new TypeError("Invalid hex string");n>o/2&&(n=o/2);for(var a=0;a<n;++a){var s=parseInt(t.substr(2*a,2),16);if(isNaN(s))return a;e[r+a]=s}return a}function b(e,t,r,n){return j(z(t,e.length-r),e,r,n)}function w(e,t,r,n){return j(function(e){for(var t=[],r=0;r<e.length;++r)t.push(255&e.charCodeAt(r));return t}(t),e,r,n)}function x(e,t,r,n){return w(e,t,r,n)}function _(e,t,r,n){return j(V(t),e,r,n)}function T(e,t,r,n){return j(function(e,t){for(var r,n,i,o=[],a=0;a<e.length&&!((t-=2)<0);++a)r=e.charCodeAt(a),n=r>>8,i=r%256,o.push(i),o.push(n);return o}(t,e.length-r),e,r,n)}function A(e,t,r){return 0===t&&r===e.length?n.fromByteArray(e):n.fromByteArray(e.slice(t,r))}function S(e,t,r){r=Math.min(e.length,r);for(var n=[],i=t;i<r;){var o,a,s,l,u=e[i],c=null,h=u>239?4:u>223?3:u>191?2:1;if(i+h<=r)switch(h){case 1:u<128&&(c=u);break;case 2:128==(192&(o=e[i+1]))&&(l=(31&u)<<6|63&o)>127&&(c=l);break;case 3:o=e[i+1],a=e[i+2],128==(192&o)&&128==(192&a)&&(l=(15&u)<<12|(63&o)<<6|63&a)>2047&&(l<55296||l>57343)&&(c=l);break;case 4:o=e[i+1],a=e[i+2],s=e[i+3],128==(192&o)&&128==(192&a)&&128==(192&s)&&(l=(15&u)<<18|(63&o)<<12|(63&a)<<6|63&s)>65535&&l<1114112&&(c=l)}null===c?(c=65533,h=1):c>65535&&(c-=65536,n.push(c>>>10&1023|55296),c=56320|1023&c),n.push(c),i+=h}return function(e){var t=e.length;if(t<=E)return String.fromCharCode.apply(String,e);var r="",n=0;for(;n<t;)r+=String.fromCharCode.apply(String,e.slice(n,n+=E));return r}(n)}t.Buffer=l,t.SlowBuffer=function(e){+e!=e&&(e=0);return l.alloc(+e)},t.INSPECT_MAX_BYTES=50,l.TYPED_ARRAY_SUPPORT=void 0!==e.TYPED_ARRAY_SUPPORT?e.TYPED_ARRAY_SUPPORT:function(){try{var e=new Uint8Array(1);return e.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===e.foo()&&"function"==typeof e.subarray&&0===e.subarray(1,1).byteLength}catch(e){return!1}}(),t.kMaxLength=a(),l.poolSize=8192,l._augment=function(e){return e.__proto__=l.prototype,e},l.from=function(e,t,r){return u(null,e,t,r)},l.TYPED_ARRAY_SUPPORT&&(l.prototype.__proto__=Uint8Array.prototype,l.__proto__=Uint8Array,"undefined"!=typeof Symbol&&Symbol.species&&l[Symbol.species]===l&&Object.defineProperty(l,Symbol.species,{value:null,configurable:!0})),l.alloc=function(e,t,r){return function(e,t,r,n){return c(t),t<=0?s(e,t):void 0!==r?"string"==typeof n?s(e,t).fill(r,n):s(e,t).fill(r):s(e,t)}(null,e,t,r)},l.allocUnsafe=function(e){return h(null,e)},l.allocUnsafeSlow=function(e){return h(null,e)},l.isBuffer=function(e){return!(null==e||!e._isBuffer)},l.compare=function(e,t){if(!l.isBuffer(e)||!l.isBuffer(t))throw new TypeError("Arguments must be Buffers");if(e===t)return 0;for(var r=e.length,n=t.length,i=0,o=Math.min(r,n);i<o;++i)if(e[i]!==t[i]){r=e[i],n=t[i];break}return r<n?-1:n<r?1:0},l.isEncoding=function(e){switch(String(e).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(e,t){if(!o(e))throw new TypeError('"list" argument must be an Array of Buffers');if(0===e.length)return l.alloc(0);var r;if(void 0===t)for(t=0,r=0;r<e.length;++r)t+=e[r].length;var n=l.allocUnsafe(t),i=0;for(r=0;r<e.length;++r){var a=e[r];if(!l.isBuffer(a))throw new TypeError('"list" argument must be an Array of Buffers');a.copy(n,i),i+=a.length}return n},l.byteLength=f,l.prototype._isBuffer=!0,l.prototype.swap16=function(){var e=this.length;if(e%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(var t=0;t<e;t+=2)m(this,t,t+1);return this},l.prototype.swap32=function(){var e=this.length;if(e%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(var t=0;t<e;t+=4)m(this,t,t+3),m(this,t+1,t+2);return this},l.prototype.swap64=function(){var e=this.length;if(e%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(var t=0;t<e;t+=8)m(this,t,t+7),m(this,t+1,t+6),m(this,t+2,t+5),m(this,t+3,t+4);return this},l.prototype.toString=function(){var e=0|this.length;return 0===e?"":0===arguments.length?S(this,0,e):function(e,t,r){var n=!1;if((void 0===t||t<0)&&(t=0),t>this.length)return"";if((void 0===r||r>this.length)&&(r=this.length),r<=0)return"";if((r>>>=0)<=(t>>>=0))return"";for(e||(e="utf8");;)switch(e){case"hex":return N(this,t,r);case"utf8":case"utf-8":return S(this,t,r);case"ascii":return C(this,t,r);case"latin1":case"binary":return M(this,t,r);case"base64":return A(this,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return O(this,t,r);default:if(n)throw new TypeError("Unknown encoding: "+e);e=(e+"").toLowerCase(),n=!0}}.apply(this,arguments)},l.prototype.equals=function(e){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");return this===e||0===l.compare(this,e)},l.prototype.inspect=function(){var e="",r=t.INSPECT_MAX_BYTES;return this.length>0&&(e=this.toString("hex",0,r).match(/.{2}/g).join(" "),this.length>r&&(e+=" ... ")),"<Buffer "+e+">"},l.prototype.compare=function(e,t,r,n,i){if(!l.isBuffer(e))throw new TypeError("Argument must be a Buffer");if(void 0===t&&(t=0),void 0===r&&(r=e?e.length:0),void 0===n&&(n=0),void 0===i&&(i=this.length),t<0||r>e.length||n<0||i>this.length)throw new RangeError("out of range index");if(n>=i&&t>=r)return 0;if(n>=i)return-1;if(t>=r)return 1;if(t>>>=0,r>>>=0,n>>>=0,i>>>=0,this===e)return 0;for(var o=i-n,a=r-t,s=Math.min(o,a),u=this.slice(n,i),c=e.slice(t,r),h=0;h<s;++h)if(u[h]!==c[h]){o=u[h],a=c[h];break}return o<a?-1:a<o?1:0},l.prototype.includes=function(e,t,r){return-1!==this.indexOf(e,t,r)},l.prototype.indexOf=function(e,t,r){return v(this,e,t,r,!0)},l.prototype.lastIndexOf=function(e,t,r){return v(this,e,t,r,!1)},l.prototype.write=function(e,t,r,n){if(void 0===t)n="utf8",r=this.length,t=0;else if(void 0===r&&"string"==typeof t)n=t,r=this.length,t=0;else{if(!isFinite(t))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");t|=0,isFinite(r)?(r|=0,void 0===n&&(n="utf8")):(n=r,r=void 0)}var i=this.length-t;if((void 0===r||r>i)&&(r=i),e.length>0&&(r<0||t<0)||t>this.length)throw new RangeError("Attempt to write outside buffer bounds");n||(n="utf8");for(var o=!1;;)switch(n){case"hex":return y(this,e,t,r);case"utf8":case"utf-8":return b(this,e,t,r);case"ascii":return w(this,e,t,r);case"latin1":case"binary":return x(this,e,t,r);case"base64":return _(this,e,t,r);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return T(this,e,t,r);default:if(o)throw new TypeError("Unknown encoding: "+n);n=(""+n).toLowerCase(),o=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};var E=4096;function C(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(127&e[i]);return n}function M(e,t,r){var n="";r=Math.min(e.length,r);for(var i=t;i<r;++i)n+=String.fromCharCode(e[i]);return n}function N(e,t,r){var n=e.length;(!t||t<0)&&(t=0),(!r||r<0||r>n)&&(r=n);for(var i="",o=t;o<r;++o)i+=F(e[o]);return i}function O(e,t,r){for(var n=e.slice(t,r),i="",o=0;o<n.length;o+=2)i+=String.fromCharCode(n[o]+256*n[o+1]);return i}function R(e,t,r){if(e%1!=0||e<0)throw new RangeError("offset is not uint");if(e+t>r)throw new RangeError("Trying to access beyond buffer length")}function k(e,t,r,n,i,o){if(!l.isBuffer(e))throw new TypeError('"buffer" argument must be a Buffer instance');if(t>i||t<o)throw new RangeError('"value" argument is out of bounds');if(r+n>e.length)throw new RangeError("Index out of range")}function L(e,t,r,n){t<0&&(t=65535+t+1);for(var i=0,o=Math.min(e.length-r,2);i<o;++i)e[r+i]=(t&255<<8*(n?i:1-i))>>>8*(n?i:1-i)}function I(e,t,r,n){t<0&&(t=4294967295+t+1);for(var i=0,o=Math.min(e.length-r,4);i<o;++i)e[r+i]=t>>>8*(n?i:3-i)&255}function P(e,t,r,n,i,o){if(r+n>e.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("Index out of range")}function B(e,t,r,n,o){return o||P(e,0,r,4),i.write(e,t,r,n,23,4),r+4}function D(e,t,r,n,o){return o||P(e,0,r,8),i.write(e,t,r,n,52,8),r+8}l.prototype.slice=function(e,t){var r,n=this.length;if(e=~~e,t=void 0===t?n:~~t,e<0?(e+=n)<0&&(e=0):e>n&&(e=n),t<0?(t+=n)<0&&(t=0):t>n&&(t=n),t<e&&(t=e),l.TYPED_ARRAY_SUPPORT)(r=this.subarray(e,t)).__proto__=l.prototype;else{var i=t-e;r=new l(i,void 0);for(var o=0;o<i;++o)r[o]=this[o+e]}return r},l.prototype.readUIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n},l.prototype.readUIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e+--t],i=1;t>0&&(i*=256);)n+=this[e+--t]*i;return n},l.prototype.readUInt8=function(e,t){return t||R(e,1,this.length),this[e]},l.prototype.readUInt16LE=function(e,t){return t||R(e,2,this.length),this[e]|this[e+1]<<8},l.prototype.readUInt16BE=function(e,t){return t||R(e,2,this.length),this[e]<<8|this[e+1]},l.prototype.readUInt32LE=function(e,t){return t||R(e,4,this.length),(this[e]|this[e+1]<<8|this[e+2]<<16)+16777216*this[e+3]},l.prototype.readUInt32BE=function(e,t){return t||R(e,4,this.length),16777216*this[e]+(this[e+1]<<16|this[e+2]<<8|this[e+3])},l.prototype.readIntLE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=this[e],i=1,o=0;++o<t&&(i*=256);)n+=this[e+o]*i;return n>=(i*=128)&&(n-=Math.pow(2,8*t)),n},l.prototype.readIntBE=function(e,t,r){e|=0,t|=0,r||R(e,t,this.length);for(var n=t,i=1,o=this[e+--n];n>0&&(i*=256);)o+=this[e+--n]*i;return o>=(i*=128)&&(o-=Math.pow(2,8*t)),o},l.prototype.readInt8=function(e,t){return t||R(e,1,this.length),128&this[e]?-1*(255-this[e]+1):this[e]},l.prototype.readInt16LE=function(e,t){t||R(e,2,this.length);var r=this[e]|this[e+1]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt16BE=function(e,t){t||R(e,2,this.length);var r=this[e+1]|this[e]<<8;return 32768&r?4294901760|r:r},l.prototype.readInt32LE=function(e,t){return t||R(e,4,this.length),this[e]|this[e+1]<<8|this[e+2]<<16|this[e+3]<<24},l.prototype.readInt32BE=function(e,t){return t||R(e,4,this.length),this[e]<<24|this[e+1]<<16|this[e+2]<<8|this[e+3]},l.prototype.readFloatLE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!0,23,4)},l.prototype.readFloatBE=function(e,t){return t||R(e,4,this.length),i.read(this,e,!1,23,4)},l.prototype.readDoubleLE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!0,52,8)},l.prototype.readDoubleBE=function(e,t){return t||R(e,8,this.length),i.read(this,e,!1,52,8)},l.prototype.writeUIntLE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=1,o=0;for(this[t]=255&e;++o<r&&(i*=256);)this[t+o]=e/i&255;return t+r},l.prototype.writeUIntBE=function(e,t,r,n){(e=+e,t|=0,r|=0,n)||k(this,e,t,r,Math.pow(2,8*r)-1,0);var i=r-1,o=1;for(this[t+i]=255&e;--i>=0&&(o*=256);)this[t+i]=e/o&255;return t+r},l.prototype.writeUInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,255,0),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),this[t]=255&e,t+1},l.prototype.writeUInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeUInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,65535,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeUInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t+3]=e>>>24,this[t+2]=e>>>16,this[t+1]=e>>>8,this[t]=255&e):I(this,e,t,!0),t+4},l.prototype.writeUInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,4294967295,0),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},l.prototype.writeIntLE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);k(this,e,t,r,i-1,-i)}var o=0,a=1,s=0;for(this[t]=255&e;++o<r&&(a*=256);)e<0&&0===s&&0!==this[t+o-1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},l.prototype.writeIntBE=function(e,t,r,n){if(e=+e,t|=0,!n){var i=Math.pow(2,8*r-1);k(this,e,t,r,i-1,-i)}var o=r-1,a=1,s=0;for(this[t+o]=255&e;--o>=0&&(a*=256);)e<0&&0===s&&0!==this[t+o+1]&&(s=1),this[t+o]=(e/a>>0)-s&255;return t+r},l.prototype.writeInt8=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,1,127,-128),l.TYPED_ARRAY_SUPPORT||(e=Math.floor(e)),e<0&&(e=255+e+1),this[t]=255&e,t+1},l.prototype.writeInt16LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8):L(this,e,t,!0),t+2},l.prototype.writeInt16BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,2,32767,-32768),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>8,this[t+1]=255&e):L(this,e,t,!1),t+2},l.prototype.writeInt32LE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),l.TYPED_ARRAY_SUPPORT?(this[t]=255&e,this[t+1]=e>>>8,this[t+2]=e>>>16,this[t+3]=e>>>24):I(this,e,t,!0),t+4},l.prototype.writeInt32BE=function(e,t,r){return e=+e,t|=0,r||k(this,e,t,4,2147483647,-2147483648),e<0&&(e=4294967295+e+1),l.TYPED_ARRAY_SUPPORT?(this[t]=e>>>24,this[t+1]=e>>>16,this[t+2]=e>>>8,this[t+3]=255&e):I(this,e,t,!1),t+4},l.prototype.writeFloatLE=function(e,t,r){return B(this,e,t,!0,r)},l.prototype.writeFloatBE=function(e,t,r){return B(this,e,t,!1,r)},l.prototype.writeDoubleLE=function(e,t,r){return D(this,e,t,!0,r)},l.prototype.writeDoubleBE=function(e,t,r){return D(this,e,t,!1,r)},l.prototype.copy=function(e,t,r,n){if(r||(r=0),n||0===n||(n=this.length),t>=e.length&&(t=e.length),t||(t=0),n>0&&n<r&&(n=r),n===r)return 0;if(0===e.length||0===this.length)return 0;if(t<0)throw new RangeError("targetStart out of bounds");if(r<0||r>=this.length)throw new RangeError("sourceStart out of bounds");if(n<0)throw new RangeError("sourceEnd out of bounds");n>this.length&&(n=this.length),e.length-t<n-r&&(n=e.length-t+r);var i,o=n-r;if(this===e&&r<t&&t<n)for(i=o-1;i>=0;--i)e[i+t]=this[i+r];else if(o<1e3||!l.TYPED_ARRAY_SUPPORT)for(i=0;i<o;++i)e[i+t]=this[i+r];else Uint8Array.prototype.set.call(e,this.subarray(r,r+o),t);return o},l.prototype.fill=function(e,t,r,n){if("string"==typeof e){if("string"==typeof t?(n=t,t=0,r=this.length):"string"==typeof r&&(n=r,r=this.length),1===e.length){var i=e.charCodeAt(0);i<256&&(e=i)}if(void 0!==n&&"string"!=typeof n)throw new TypeError("encoding must be a string");if("string"==typeof n&&!l.isEncoding(n))throw new TypeError("Unknown encoding: "+n)}else"number"==typeof e&&(e&=255);if(t<0||this.length<t||this.length<r)throw new RangeError("Out of range index");if(r<=t)return this;var o;if(t>>>=0,r=void 0===r?this.length:r>>>0,e||(e=0),"number"==typeof e)for(o=t;o<r;++o)this[o]=e;else{var a=l.isBuffer(e)?e:z(new l(e,n).toString()),s=a.length;for(o=0;o<r-t;++o)this[o+t]=a[o%s]}return this};var U=/[^+\/0-9A-Za-z-_]/g;function F(e){return e<16?"0"+e.toString(16):e.toString(16)}function z(e,t){var r;t=t||1/0;for(var n=e.length,i=null,o=[],a=0;a<n;++a){if((r=e.charCodeAt(a))>55295&&r<57344){if(!i){if(r>56319){(t-=3)>-1&&o.push(239,191,189);continue}if(a+1===n){(t-=3)>-1&&o.push(239,191,189);continue}i=r;continue}if(r<56320){(t-=3)>-1&&o.push(239,191,189),i=r;continue}r=65536+(i-55296<<10|r-56320)}else i&&(t-=3)>-1&&o.push(239,191,189);if(i=null,r<128){if((t-=1)<0)break;o.push(r)}else if(r<2048){if((t-=2)<0)break;o.push(r>>6|192,63&r|128)}else if(r<65536){if((t-=3)<0)break;o.push(r>>12|224,r>>6&63|128,63&r|128)}else{if(!(r<1114112))throw new Error("Invalid code point");if((t-=4)<0)break;o.push(r>>18|240,r>>12&63|128,r>>6&63|128,63&r|128)}}return o}function V(e){return n.toByteArray(function(e){if((e=function(e){return e.trim?e.trim():e.replace(/^\s+|\s+$/g,"")}(e).replace(U,"")).length<2)return"";for(;e.length%4!=0;)e+="=";return e}(e))}function j(e,t,r,n){for(var i=0;i<n&&!(i+r>=t.length||i>=e.length);++i)t[i+r]=e[i];return i}}).call(t,r("DuR2"))},FktL:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i={computeTangents:function(e){var t=e.index,r=e.attributes;if(null!==t&&void 0!==r.position&&void 0!==r.normal&&void 0!==r.uv){var i=t.array,o=r.position.array,a=r.normal.array,s=r.uv.array,l=o.length/3;void 0===r.tangent&&e.setAttribute("tangent",new n.BufferAttribute(new Float32Array(4*l),4));for(var u=r.tangent.array,c=[],h=[],d=0;d<l;d++)c[d]=new n.Vector3,h[d]=new n.Vector3;var p=new n.Vector3,f=new n.Vector3,m=new n.Vector3,v=new n.Vector2,g=new n.Vector2,y=new n.Vector2,b=new n.Vector3,w=new n.Vector3,x=e.groups;0===x.length&&(x=[{start:0,count:i.length}]);d=0;for(var _=x.length;d<_;++d)for(var T=L=(k=x[d]).start,A=L+k.count;T<A;T+=3)I(i[T+0],i[T+1],i[T+2]);var S,E,C,M=new n.Vector3,N=new n.Vector3,O=new n.Vector3,R=new n.Vector3;for(d=0,_=x.length;d<_;++d){var k,L;for(T=L=(k=x[d]).start,A=L+k.count;T<A;T+=3)P(i[T+0]),P(i[T+1]),P(i[T+2])}}else console.error("THREE.BufferGeometryUtils: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");function I(e,t,r){p.fromArray(o,3*e),f.fromArray(o,3*t),m.fromArray(o,3*r),v.fromArray(s,2*e),g.fromArray(s,2*t),y.fromArray(s,2*r),f.sub(p),m.sub(p),g.sub(v),y.sub(v);var n=1/(g.x*y.y-y.x*g.y);isFinite(n)&&(b.copy(f).multiplyScalar(y.y).addScaledVector(m,-g.y).multiplyScalar(n),w.copy(m).multiplyScalar(g.x).addScaledVector(f,-y.x).multiplyScalar(n),c[e].add(b),c[t].add(b),c[r].add(b),h[e].add(w),h[t].add(w),h[r].add(w))}function P(e){O.fromArray(a,3*e),R.copy(O),E=c[e],M.copy(E),M.sub(O.multiplyScalar(O.dot(E))).normalize(),N.crossVectors(R,E),C=N.dot(h[e]),S=C<0?-1:1,u[4*e]=M.x,u[4*e+1]=M.y,u[4*e+2]=M.z,u[4*e+3]=S}},mergeBufferGeometries:function(e,t){for(var r=null!==e[0].index,i=new Set(Object.keys(e[0].attributes)),o=new Set(Object.keys(e[0].morphAttributes)),a={},s={},l=e[0].morphTargetsRelative,u=new n.BufferGeometry,c=0,h=0;h<e.length;++h){var d=e[h],p=0;if(r!==(null!==d.index))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(var f in d.attributes){if(!i.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+'. All geometries must have compatible attributes; make sure "'+f+'" attribute exists among all geometries, or in none of them.'),null;void 0===a[f]&&(a[f]=[]),a[f].push(d.attributes[f]),p++}if(p!==i.size)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". Make sure all geometries have the same number of attributes."),null;if(l!==d.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(var f in d.morphAttributes){if(!o.has(f))return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+".  .morphAttributes must be consistent throughout all geometries."),null;void 0===s[f]&&(s[f]=[]),s[f].push(d.morphAttributes[f])}if(u.userData.mergedUserData=u.userData.mergedUserData||[],u.userData.mergedUserData.push(d.userData),t){var m;if(r)m=d.index.count;else{if(void 0===d.attributes.position)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed with geometry at index "+h+". The geometry must have either an index or a position attribute"),null;m=d.attributes.position.count}u.addGroup(c,m,h),c+=m}}if(r){var v=0,g=[];for(h=0;h<e.length;++h){for(var y=e[h].index,b=0;b<y.count;++b)g.push(y.getX(b)+v);v+=e[h].attributes.position.count}u.setIndex(g)}for(var f in a){var w=this.mergeBufferAttributes(a[f]);if(!w)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+f+" attribute."),null;u.setAttribute(f,w)}for(var f in s){var x=s[f][0].length;if(0===x)break;u.morphAttributes=u.morphAttributes||{},u.morphAttributes[f]=[];for(h=0;h<x;++h){var _=[];for(b=0;b<s[f].length;++b)_.push(s[f][b][h]);var T=this.mergeBufferAttributes(_);if(!T)return console.error("THREE.BufferGeometryUtils: .mergeBufferGeometries() failed while trying to merge the "+f+" morphAttribute."),null;u.morphAttributes[f].push(T)}}return u},mergeBufferAttributes:function(e){for(var t,r,i,o=0,a=0;a<e.length;++a){var s=e[a];if(s.isInterleavedBufferAttribute)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. InterleavedBufferAttributes are not supported."),null;if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(void 0===r&&(r=s.itemSize),r!==s.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(void 0===i&&(i=s.normalized),i!==s.normalized)return console.error("THREE.BufferGeometryUtils: .mergeBufferAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;o+=s.array.length}var l=new t(o),u=0;for(a=0;a<e.length;++a)l.set(e[a].array,u),u+=e[a].array.length;return new n.BufferAttribute(l,r,i)},interleaveAttributes:function(e){for(var t,r=0,i=0,o=0,a=e.length;o<a;++o){var s=e[o];if(void 0===t&&(t=s.array.constructor),t!==s.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;r+=s.array.length,i+=s.itemSize}var l=new n.InterleavedBuffer(new t(r),i),u=0,c=[],h=["getX","getY","getZ","getW"],d=["setX","setY","setZ","setW"],p=0;for(a=e.length;p<a;p++){var f=(s=e[p]).itemSize,m=s.count,v=new n.InterleavedBufferAttribute(l,f,u,s.normalized);c.push(v),u+=f;for(var g=0;g<m;g++)for(var y=0;y<f;y++)v[d[y]](g,s[h[y]](g))}return c},estimateBytesUsed:function(e){var t=0;for(var r in e.attributes){var n=e.getAttribute(r);t+=n.count*n.itemSize*n.array.BYTES_PER_ELEMENT}var i=e.getIndex();return t+=i?i.count*i.itemSize*i.array.BYTES_PER_ELEMENT:0},mergeVertices:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e-4;t=Math.max(t,Number.EPSILON);for(var r={},i=e.getIndex(),o=e.getAttribute("position"),a=i?i.count:o.count,s=0,l=Object.keys(e.attributes),u={},c={},h=[],d=["getX","getY","getZ","getW"],p=0,f=l.length;p<f;p++){u[w=l[p]]=[],(A=e.morphAttributes[w])&&(c[w]=new Array(A.length).fill().map(function(){return[]}))}var m=Math.log10(1/t),v=Math.pow(10,m);for(p=0;p<a;p++){var g=i?i.getX(p):p,y="",b=0;for(f=l.length;b<f;b++)for(var w=l[b],x=(T=e.getAttribute(w)).itemSize,_=0;_<x;_++)y+=~~(T[d[_]](g)*v)+",";if(y in r)h.push(r[y]);else{for(b=0,f=l.length;b<f;b++){w=l[b];var T=e.getAttribute(w),A=e.morphAttributes[w],S=(x=T.itemSize,u[w]),E=c[w];for(_=0;_<x;_++){var C=d[_];if(S.push(T[C](g)),A)for(var M=0,N=A.length;M<N;M++)E[M].push(A[M][C](g))}}r[y]=s,h.push(s),s++}}var O=e.clone();for(p=0,f=l.length;p<f;p++){w=l[p];var R=e.getAttribute(w),k=new R.array.constructor(u[w]);T=new n.BufferAttribute(k,R.itemSize,R.normalized);if(O.setAttribute(w,T),w in c)for(b=0;b<c[w].length;b++){var L=e.morphAttributes[w][b],I=(k=new L.array.constructor(c[w][b]),new n.BufferAttribute(k,L.itemSize,L.normalized));O.morphAttributes[w][b]=I}}return O.setIndex(h),O},toTrianglesDrawMode:function(e,t){if(t===n.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===n.TriangleFanDrawMode||t===n.TriangleStripDrawMode){var r=e.getIndex();if(null===r){var i=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<o.count;a++)i.push(a);e.setIndex(i),r=e.getIndex()}var s=r.count-2,l=[];if(t===n.TriangleFanDrawMode)for(a=1;a<=s;a++)l.push(r.getX(0)),l.push(r.getX(a)),l.push(r.getX(a+1));else for(a=0;a<s;a++)a%2==0?(l.push(r.getX(a)),l.push(r.getX(a+1)),l.push(r.getX(a+2))):(l.push(r.getX(a+2)),l.push(r.getX(a+1)),l.push(r.getX(a)));l.length/3!==s&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var u=e.clone();return u.setIndex(l),u.clearGroups(),u}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}}},Glcs:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(e){n.DataTextureLoader.call(this,e),this.type=n.UnsignedByteType};i.prototype=Object.assign(Object.create(n.DataTextureLoader.prototype),{constructor:i,parse:function(e){var t=function(e,t){switch(e){case 1:console.error("RGBELoader Read Error: "+(t||""));break;case 2:console.error("RGBELoader Write Error: "+(t||""));break;case 3:console.error("RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("RGBELoader: Error: "+(t||""))}return-1},r=function(e,t,r){t=t||1024;for(var n=e.pos,i=-1,o=0,a="",s=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));0>(i=s.indexOf("\n"))&&o<t&&n<e.byteLength;)a+=s,o+=s.length,n+=128,s+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(n,n+128)));return-1<i&&(!1!==r&&(e.pos+=o+i+1),a+s.slice(0,i))},i=function(e,t,r,i){var o=e[t+3],a=Math.pow(2,o-128)/255;r[i+0]=n.DataUtils.toHalfFloat(e[t+0]*a),r[i+1]=n.DataUtils.toHalfFloat(e[t+1]*a),r[i+2]=n.DataUtils.toHalfFloat(e[t+2]*a)},o=new Uint8Array(e);o.pos=0;var a,s,l,u,c,h,d=function(e){var n,i,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(n=r(e)))return t(1,"no header found");if(!(i=n.match(/^#\?(\S+)$/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=i[1],u.string+=n+"\n";!1!==(n=r(e));)if(u.string+=n+"\n","#"!==n.charAt(0)){if((i=n.match(o))&&(u.gamma=parseFloat(i[1],10)),(i=n.match(a))&&(u.exposure=parseFloat(i[1],10)),(i=n.match(s))&&(u.valid|=2,u.format=i[1]),(i=n.match(l))&&(u.valid|=4,u.height=parseInt(i[1],10),u.width=parseInt(i[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=n+"\n";return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(o);if(-1!==d){var p=d.width,f=d.height,m=function(e,r,n){var i,o,a,s,l,u,c,h,d,p,f,m,v,g=r,y=n;if(g<8||g>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(g!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");if(!(i=new Uint8Array(4*r*n)).length)return t(4,"unable to allocate buffer space");for(o=0,a=0,h=4*g,v=new Uint8Array(4),u=new Uint8Array(h);y>0&&a<e.byteLength;){if(a+4>e.byteLength)return t(1);if(v[0]=e[a++],v[1]=e[a++],v[2]=e[a++],v[3]=e[a++],2!=v[0]||2!=v[1]||(v[2]<<8|v[3])!=g)return t(3,"bad rgbe scanline format");for(c=0;c<h&&a<e.byteLength;){if((m=(s=e[a++])>128)&&(s-=128),0===s||c+s>h)return t(3,"bad scanline data");if(m)for(l=e[a++],d=0;d<s;d++)u[c++]=l;else u.set(e.subarray(a,a+s),c),c+=s,a+=s}for(p=g,d=0;d<p;d++)f=0,i[o]=u[d+f],f+=g,i[o+1]=u[d+f],f+=g,i[o+2]=u[d+f],f+=g,i[o+3]=u[d+f],o+=4;y--}return i}(o.subarray(o.pos),p,f);if(-1!==m){switch(this.type){case n.UnsignedByteType:var v=m,g=n.RGBEFormat,y=n.UnsignedByteType;break;case n.FloatType:for(var b=m.length/4*3,w=new Float32Array(b),x=0;x<b;x++)l=w,u=3*x,void 0,void 0,c=(a=m)[(s=4*x)+3],h=Math.pow(2,c-128)/255,l[u+0]=a[s+0]*h,l[u+1]=a[s+1]*h,l[u+2]=a[s+2]*h;v=w,g=n.RGBFormat,y=n.FloatType;break;case n.HalfFloatType:b=m.length/4*3;var _=new Uint16Array(b);for(x=0;x<b;x++)i(m,4*x,_,3*x);v=_,g=n.RGBFormat,y=n.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:p,height:f,data:v,header:d.string,gamma:d.gamma,exposure:d.exposure,format:g,type:y}}}return null},setDataType:function(e){return this.type=e,this},load:function(e,t,r,i){return n.DataTextureLoader.prototype.load.call(this,e,function(e,r){switch(e.type){case n.UnsignedByteType:e.encoding=n.RGBEEncoding,e.minFilter=n.NearestFilter,e.magFilter=n.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case n.FloatType:case n.HalfFloatType:e.encoding=n.LinearEncoding,e.minFilter=n.LinearFilter,e.magFilter=n.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,r)},r,i)}})},GoTt:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function e(t,r){n.Mesh.call(this,t),this.type="Refractor";var i=this,o=void 0!==(r=r||{}).color?new n.Color(r.color):new n.Color(8355711),a=r.textureWidth||512,s=r.textureHeight||512,l=r.clipBias||0,u=r.shader||e.RefractorShader,c=new n.PerspectiveCamera;c.matrixAutoUpdate=!1,c.userData.refractor=!0;var h=new n.Plane,d=new n.Matrix4,p={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBFormat},f=new n.WebGLRenderTarget(a,s,p);n.MathUtils.isPowerOfTwo(a)&&n.MathUtils.isPowerOfTwo(s)||(f.texture.generateMipmaps=!1),this.material=new n.ShaderMaterial({uniforms:n.UniformsUtils.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader,transparent:!0}),this.material.uniforms.color.value=o,this.material.uniforms.tDiffuse.value=f.texture,this.material.uniforms.textureMatrix.value=d;var m,v,g,y,b,w,x,_,T=(m=new n.Vector3,v=new n.Vector3,g=new n.Matrix4,y=new n.Vector3,b=new n.Vector3,function(e){return m.setFromMatrixPosition(i.matrixWorld),v.setFromMatrixPosition(e.matrixWorld),y.subVectors(m,v),g.extractRotation(i.matrixWorld),b.set(0,0,1),b.applyMatrix4(g),y.dot(b)<0}),A=function(){var e=new n.Vector3,t=new n.Vector3,r=new n.Quaternion,o=new n.Vector3;return function(){i.matrixWorld.decompose(t,r,o),e.set(0,0,1).applyQuaternion(r).normalize(),e.negate(),h.setFromNormalAndCoplanarPoint(e,t)}}(),S=(w=new n.Plane,x=new n.Vector4,_=new n.Vector4,function(e){c.matrixWorld.copy(e.matrixWorld),c.matrixWorldInverse.copy(c.matrixWorld).invert(),c.projectionMatrix.copy(e.projectionMatrix),c.far=e.far,w.copy(h),w.applyMatrix4(c.matrixWorldInverse),x.set(w.normal.x,w.normal.y,w.normal.z,w.constant);var t=c.projectionMatrix;_.x=(Math.sign(x.x)+t.elements[8])/t.elements[0],_.y=(Math.sign(x.y)+t.elements[9])/t.elements[5],_.z=-1,_.w=(1+t.elements[10])/t.elements[14],x.multiplyScalar(2/x.dot(_)),t.elements[2]=x.x,t.elements[6]=x.y,t.elements[10]=x.z+1-l,t.elements[14]=x.w});this.onBeforeRender=function(e,t,r){f.texture.encoding=e.outputEncoding,!0!==r.userData.refractor&&!0!=!T(r)&&(A(),function(e){d.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),d.multiply(e.projectionMatrix),d.multiply(e.matrixWorldInverse),d.multiply(i.matrixWorld)}(r),S(r),function(e,t,r){i.visible=!1;var n=e.getRenderTarget(),o=e.xr.enabled,a=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(f),!1===e.autoClear&&e.clear(),e.render(t,c),e.xr.enabled=o,e.shadowMap.autoUpdate=a,e.setRenderTarget(n);var s=r.viewport;void 0!==s&&e.state.viewport(s),i.visible=!0}(e,t,r))},this.getRenderTarget=function(){return f}};i.prototype=Object.create(n.Mesh.prototype),i.prototype.constructor=i,i.RefractorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")}},IPH8:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={uniforms:{tDiffuse:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 tex = texture2D( tDiffuse, vUv );","\tgl_FragColor = LinearTosRGB( tex );","}"].join("\n")}},IVZE:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r("6+nK"),i=new n.Vector3,o=new n.Vector3,a=new n.Matrix3,s=["a","b","c"];function l(e,t,r){this.object=e,this.size=void 0!==t?t:.1;var i=void 0!==r?r:16711680,o=0,a=this.object.geometry;a&&a.isGeometry?o=3*a.faces.length:a&&a.isBufferGeometry&&(o=a.attributes.normal.count);var s=new n.BufferGeometry,l=new n.Float32BufferAttribute(2*o*3,3);s.setAttribute("position",l),n.LineSegments.call(this,s,new n.LineBasicMaterial({color:i,toneMapped:!1})),this.type="VertexNormalsHelper",this.matrixAutoUpdate=!1,this.update()}l.prototype=Object.create(n.LineSegments.prototype),l.prototype.constructor=l,l.prototype.update=function(){this.object.updateMatrixWorld(!0),a.getNormalMatrix(this.object.matrixWorld);var e=this.object.matrixWorld,t=this.geometry.attributes.position,r=this.object.geometry;if(r&&r.isGeometry)for(var n=r.vertices,l=r.faces,u=0,c=0,h=l.length;c<h;c++)for(var d=l[c],p=0,f=d.vertexNormals.length;p<f;p++){var m=n[d[s[p]]],v=d.vertexNormals[p];i.copy(m).applyMatrix4(e),o.copy(v).applyMatrix3(a).normalize().multiplyScalar(this.size).add(i),t.setXYZ(u,i.x,i.y,i.z),u+=1,t.setXYZ(u,o.x,o.y,o.z),u+=1}else if(r&&r.isBufferGeometry){var g=r.attributes.position,y=r.attributes.normal;for(u=0,p=0,f=g.count;p<f;p++)i.set(g.getX(p),g.getY(p),g.getZ(p)).applyMatrix4(e),o.set(y.getX(p),y.getY(p),y.getZ(p)),o.applyMatrix3(a).normalize().multiplyScalar(this.size).add(i),t.setXYZ(u,i.x,i.y,i.z),u+=1,t.setXYZ(u,o.x,o.y,o.z),u+=1}t.needsUpdate=!0}},IW8f:function(e,t,r){"use strict";var n=r("6+nK"),i=function(){function e(e,t){this.mesh=e,this.iks=t||[],this._valid()}var t,r,i,o,a,s,l,u,c,h;function d(e,t){n.Object3D.call(this),this.root=e,this.iks=t||[],this.matrix.copy(e.matrixWorld),this.matrixAutoUpdate=!1,this.sphereGeometry=new n.SphereBufferGeometry(.25,16,8),this.targetSphereMaterial=new n.MeshBasicMaterial({color:new n.Color(16746632),depthTest:!1,depthWrite:!1,transparent:!0}),this.effectorSphereMaterial=new n.MeshBasicMaterial({color:new n.Color(8978312),depthTest:!1,depthWrite:!1,transparent:!0}),this.linkSphereMaterial=new n.MeshBasicMaterial({color:new n.Color(8947967),depthTest:!1,depthWrite:!1,transparent:!0}),this.lineMaterial=new n.LineBasicMaterial({color:new n.Color(16711680),depthTest:!1,depthWrite:!1,transparent:!0}),this._init()}return e.prototype={constructor:e,update:(t=new n.Quaternion,r=new n.Vector3,i=new n.Vector3,o=new n.Vector3,a=new n.Vector3,s=new n.Vector3,l=new n.Quaternion,u=new n.Vector3,c=new n.Vector3,h=new n.Vector3,function(){for(var e=this.mesh.skeleton.bones,n=this.iks,d=Math,p=0,f=n.length;p<f;p++){var m=n[p],v=e[m.effector],g=e[m.target];r.setFromMatrixPosition(g.matrixWorld);for(var y=m.links,b=void 0!==m.iteration?m.iteration:1,w=0;w<b;w++){for(var x=!1,_=0,T=y.length;_<T;_++){var A=e[y[_].index];if(!1===y[_].enabled)break;var S=y[_].limitation,E=y[_].rotationMin,C=y[_].rotationMax;A.matrixWorld.decompose(s,l,u),l.invert(),o.setFromMatrixPosition(v.matrixWorld),a.subVectors(o,s),a.applyQuaternion(l),a.normalize(),i.subVectors(r,s),i.applyQuaternion(l),i.normalize();var M=i.dot(a);if(M>1?M=1:M<-1&&(M=-1),!((M=d.acos(M))<1e-5)){if(void 0!==m.minAngle&&M<m.minAngle&&(M=m.minAngle),void 0!==m.maxAngle&&M>m.maxAngle&&(M=m.maxAngle),c.crossVectors(a,i),c.normalize(),t.setFromAxisAngle(c,M),A.quaternion.multiply(t),void 0!==S){var N=A.quaternion.w;N>1&&(N=1);var O=d.sqrt(1-N*N);A.quaternion.set(S.x*O,S.y*O,S.z*O,N)}void 0!==E&&A.rotation.setFromVector3(A.rotation.toVector3(h).max(E)),void 0!==C&&A.rotation.setFromVector3(A.rotation.toVector3(h).min(C)),A.updateMatrixWorld(!0),x=!0}}if(!x)break}}return this}),createHelper:function(){return new d(this.mesh,this.mesh.geometry.userData.MMD.iks)},_valid:function(){for(var e=this.iks,t=this.mesh.skeleton.bones,r=0,n=e.length;r<n;r++){var i,o,a=e[r],s=t[a.effector],l=a.links;i=s;for(var u=0,c=l.length;u<c;u++)o=t[l[u].index],i.parent!==o&&console.warn("THREE.CCDIKSolver: bone "+i.name+" is not the child of bone "+o.name),i=o}}},d.prototype=Object.assign(Object.create(n.Object3D.prototype),{constructor:d,updateMatrixWorld:function(){var e=new n.Matrix4,t=new n.Vector3;function r(e,r){return t.setFromMatrixPosition(e.matrixWorld).applyMatrix4(r)}function i(e,t,n,i){var o=r(n,i);e[3*t+0]=o.x,e[3*t+1]=o.y,e[3*t+2]=o.z}return function(t){var o=this.root;if(this.visible){var a=0,s=this.iks,l=o.skeleton.bones;e.copy(o.matrixWorld).invert();for(var u=0,c=s.length;u<c;u++){var h=s[u],d=l[h.target],p=l[h.effector],f=this.children[a++],m=this.children[a++];f.position.copy(r(d,e)),m.position.copy(r(p,e));for(var v=0,g=h.links.length;v<g;v++){var y=l[h.links[v].index];this.children[a++].position.copy(r(y,e))}var b=this.children[a++],w=b.geometry.attributes.position.array;i(w,0,d,e),i(w,1,p,e);for(v=0,g=h.links.length;v<g;v++){i(w,v+2,y=l[h.links[v].index],e)}b.geometry.attributes.position.needsUpdate=!0}}this.matrix.copy(o.matrixWorld),n.Object3D.prototype.updateMatrixWorld.call(this,t)}}(),_init:function(){var e=this,t=this.iks;function r(t){return new n.Line(function(e){var t=new n.BufferGeometry,r=new Float32Array(3*(2+e.links.length));return t.setAttribute("position",new n.BufferAttribute(r,3)),t}(t),e.lineMaterial)}for(var i=0,o=t.length;i<o;i++){var a=t[i];this.add(new n.Mesh(e.sphereGeometry,e.targetSphereMaterial)),this.add(new n.Mesh(e.sphereGeometry,e.effectorSphereMaterial));for(var s=0,l=a.links.length;s<l;s++)this.add(new n.Mesh(e.sphereGeometry,e.linkSphereMaterial));this.add(r(a))}}}),e}(),o=function(){function e(e,r,i,o){if("undefined"==typeof Ammo)throw new Error("THREE.MMDPhysics: Import ammo.js https://github.com/kripken/ammo.js");i=i||[],o=o||{},this.manager=new t,this.mesh=e,this.unitStep=void 0!==o.unitStep?o.unitStep:1/65,this.maxStepNum=void 0!==o.maxStepNum?o.maxStepNum:3,this.gravity=new n.Vector3(0,-98,0),void 0!==o.gravity&&this.gravity.copy(o.gravity),this.world=void 0!==o.world?o.world:null,this.bodies=[],this.constraints=[],this._init(e,r,i)}function t(){this.threeVector3s=[],this.threeMatrix4s=[],this.threeQuaternions=[],this.threeEulers=[],this.transforms=[],this.quaternions=[],this.vector3s=[]}function r(e,t,r,n){this.mesh=e,this.world=t,this.params=r,this.manager=n,this.body=null,this.bone=null,this.boneOffsetForm=null,this.boneOffsetFormInverse=null,this._init()}function i(e,t,r,n,i,o){this.mesh=e,this.world=t,this.bodyA=r,this.bodyB=n,this.params=i,this.manager=o,this.constraint=null,this._init()}function o(e,t){n.Object3D.call(this),this.root=e,this.physics=t,this.matrix.copy(e.matrixWorld),this.matrixAutoUpdate=!1,this.materials=[],this.materials.push(new n.MeshBasicMaterial({color:new n.Color(16746632),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this.materials.push(new n.MeshBasicMaterial({color:new n.Color(8978312),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this.materials.push(new n.MeshBasicMaterial({color:new n.Color(8947967),wireframe:!0,depthTest:!1,depthWrite:!1,opacity:.25,transparent:!0})),this._init()}var a,s,l,u;return e.prototype={constructor:e,update:function(e){var t,r=this.manager,n=this.mesh,i=!1,o=r.allocThreeVector3(),a=r.allocThreeQuaternion(),s=r.allocThreeVector3();return n.matrixWorld.decompose(o,a,s),1===s.x&&1===s.y&&1===s.z||(i=!0),i&&(null!==(t=n.parent)&&(n.parent=null),s.copy(this.mesh.scale),n.scale.set(1,1,1),n.updateMatrixWorld(!0)),this._updateRigidBodies(),this._stepSimulation(e),this._updateBones(),i&&(null!==t&&(n.parent=t),n.scale.copy(s)),r.freeThreeVector3(s),r.freeThreeQuaternion(a),r.freeThreeVector3(o),this},reset:function(){for(var e=0,t=this.bodies.length;e<t;e++)this.bodies[e].reset();return this},warmup:function(e){for(var t=0;t<e;t++)this.update(1/60);return this},setGravity:function(e){return this.world.setGravity(new Ammo.btVector3(e.x,e.y,e.z)),this.gravity.copy(e),this},createHelper:function(){return new o(this.mesh,this)},_init:function(e,t,r){var n=this.manager,i=e.parent;null!==i&&(i=null);var o=n.allocThreeVector3(),a=n.allocThreeQuaternion(),s=n.allocThreeVector3();o.copy(e.position),a.copy(e.quaternion),s.copy(e.scale),e.position.set(0,0,0),e.quaternion.set(0,0,0,1),e.scale.set(1,1,1),e.updateMatrixWorld(!0),null===this.world&&(this.world=this._createWorld(),this.setGravity(this.gravity)),this._initRigidBodies(t),this._initConstraints(r),null!==i&&(e.parent=i),e.position.copy(o),e.quaternion.copy(a),e.scale.copy(s),e.updateMatrixWorld(!0),this.reset(),n.freeThreeVector3(o),n.freeThreeQuaternion(a),n.freeThreeVector3(s)},_createWorld:function(){var e=new Ammo.btDefaultCollisionConfiguration,t=new Ammo.btCollisionDispatcher(e),r=new Ammo.btDbvtBroadphase,n=new Ammo.btSequentialImpulseConstraintSolver;return new Ammo.btDiscreteDynamicsWorld(t,r,n,e)},_initRigidBodies:function(e){for(var t=0,n=e.length;t<n;t++)this.bodies.push(new r(this.mesh,this.world,e[t],this.manager))},_initConstraints:function(e){for(var t=0,r=e.length;t<r;t++){var n=e[t],o=this.bodies[n.rigidBodyIndex1],a=this.bodies[n.rigidBodyIndex2];this.constraints.push(new i(this.mesh,this.world,o,a,n,this.manager))}},_stepSimulation:function(e){var t=this.unitStep,r=e,n=1+(e/t|0);r<t&&(r=t,n=1),n>this.maxStepNum&&(n=this.maxStepNum),this.world.stepSimulation(r,n,t)},_updateRigidBodies:function(){for(var e=0,t=this.bodies.length;e<t;e++)this.bodies[e].updateFromBone()},_updateBones:function(){for(var e=0,t=this.bodies.length;e<t;e++)this.bodies[e].updateBone()}},t.prototype={constructor:t,allocThreeVector3:function(){return this.threeVector3s.length>0?this.threeVector3s.pop():new n.Vector3},freeThreeVector3:function(e){this.threeVector3s.push(e)},allocThreeMatrix4:function(){return this.threeMatrix4s.length>0?this.threeMatrix4s.pop():new n.Matrix4},freeThreeMatrix4:function(e){this.threeMatrix4s.push(e)},allocThreeQuaternion:function(){return this.threeQuaternions.length>0?this.threeQuaternions.pop():new n.Quaternion},freeThreeQuaternion:function(e){this.threeQuaternions.push(e)},allocThreeEuler:function(){return this.threeEulers.length>0?this.threeEulers.pop():new n.Euler},freeThreeEuler:function(e){this.threeEulers.push(e)},allocTransform:function(){return this.transforms.length>0?this.transforms.pop():new Ammo.btTransform},freeTransform:function(e){this.transforms.push(e)},allocQuaternion:function(){return this.quaternions.length>0?this.quaternions.pop():new Ammo.btQuaternion},freeQuaternion:function(e){this.quaternions.push(e)},allocVector3:function(){return this.vector3s.length>0?this.vector3s.pop():new Ammo.btVector3},freeVector3:function(e){this.vector3s.push(e)},setIdentity:function(e){e.setIdentity()},getBasis:function(e){var t=this.allocQuaternion();return e.getBasis().getRotation(t),t},getBasisAsMatrix3:function(e){var t=this.getBasis(e),r=this.quaternionToMatrix3(t);return this.freeQuaternion(t),r},getOrigin:function(e){return e.getOrigin()},setOrigin:function(e,t){e.getOrigin().setValue(t.x(),t.y(),t.z())},copyOrigin:function(e,t){var r=t.getOrigin();this.setOrigin(e,r)},setBasis:function(e,t){e.setRotation(t)},setBasisFromMatrix3:function(e,t){var r=this.matrix3ToQuaternion(t);this.setBasis(e,r),this.freeQuaternion(r)},setOriginFromArray3:function(e,t){e.getOrigin().setValue(t[0],t[1],t[2])},setOriginFromThreeVector3:function(e,t){e.getOrigin().setValue(t.x,t.y,t.z)},setBasisFromArray3:function(e,t){var r=this.allocThreeQuaternion(),n=this.allocThreeEuler();n.set(t[0],t[1],t[2]),this.setBasisFromThreeQuaternion(e,r.setFromEuler(n)),this.freeThreeEuler(n),this.freeThreeQuaternion(r)},setBasisFromThreeQuaternion:function(e,t){var r=this.allocQuaternion();r.setX(t.x),r.setY(t.y),r.setZ(t.z),r.setW(t.w),this.setBasis(e,r),this.freeQuaternion(r)},multiplyTransforms:function(e,t){var r=this.allocTransform();this.setIdentity(r);var n=this.getBasisAsMatrix3(e),i=this.getBasisAsMatrix3(t),o=this.getOrigin(e),a=this.getOrigin(t),s=this.multiplyMatrix3ByVector3(n,a),l=this.addVector3(s,o);this.setOrigin(r,l);var u=this.multiplyMatrices3(n,i);return this.setBasisFromMatrix3(r,u),this.freeVector3(s),this.freeVector3(l),r},inverseTransform:function(e){var t=this.allocTransform(),r=this.getBasisAsMatrix3(e),n=this.getOrigin(e),i=this.transposeMatrix3(r),o=this.negativeVector3(n),a=this.multiplyMatrix3ByVector3(i,o);return this.setOrigin(t,a),this.setBasisFromMatrix3(t,i),this.freeVector3(o),this.freeVector3(a),t},multiplyMatrices3:function(e,t){var r=[],n=this.rowOfMatrix3(e,0),i=this.rowOfMatrix3(e,1),o=this.rowOfMatrix3(e,2),a=this.columnOfMatrix3(t,0),s=this.columnOfMatrix3(t,1),l=this.columnOfMatrix3(t,2);return r[0]=this.dotVectors3(n,a),r[1]=this.dotVectors3(n,s),r[2]=this.dotVectors3(n,l),r[3]=this.dotVectors3(i,a),r[4]=this.dotVectors3(i,s),r[5]=this.dotVectors3(i,l),r[6]=this.dotVectors3(o,a),r[7]=this.dotVectors3(o,s),r[8]=this.dotVectors3(o,l),this.freeVector3(n),this.freeVector3(i),this.freeVector3(o),this.freeVector3(a),this.freeVector3(s),this.freeVector3(l),r},addVector3:function(e,t){var r=this.allocVector3();return r.setValue(e.x()+t.x(),e.y()+t.y(),e.z()+t.z()),r},dotVectors3:function(e,t){return e.x()*t.x()+e.y()*t.y()+e.z()*t.z()},rowOfMatrix3:function(e,t){var r=this.allocVector3();return r.setValue(e[3*t+0],e[3*t+1],e[3*t+2]),r},columnOfMatrix3:function(e,t){var r=this.allocVector3();return r.setValue(e[t+0],e[t+3],e[t+6]),r},negativeVector3:function(e){var t=this.allocVector3();return t.setValue(-e.x(),-e.y(),-e.z()),t},multiplyMatrix3ByVector3:function(e,t){var r=this.allocVector3(),n=this.rowOfMatrix3(e,0),i=this.rowOfMatrix3(e,1),o=this.rowOfMatrix3(e,2),a=this.dotVectors3(n,t),s=this.dotVectors3(i,t),l=this.dotVectors3(o,t);return r.setValue(a,s,l),this.freeVector3(n),this.freeVector3(i),this.freeVector3(o),r},transposeMatrix3:function(e){var t=[];return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],t},quaternionToMatrix3:function(e){var t=[],r=e.x(),n=e.y(),i=e.z(),o=e.w(),a=r*r,s=n*n,l=i*i,u=r*n,c=n*i,h=i*r,d=r*o,p=n*o,f=i*o;return t[0]=1-2*(s+l),t[1]=2*(u-f),t[2]=2*(h+p),t[3]=2*(u+f),t[4]=1-2*(l+a),t[5]=2*(c-d),t[6]=2*(h-p),t[7]=2*(c+d),t[8]=1-2*(a+s),t},matrix3ToQuaternion:function(e){var t,r,n,i,o,a=e[0]+e[4]+e[8];a>0?(o=.25*(t=2*Math.sqrt(a+1)),r=(e[7]-e[5])/t,n=(e[2]-e[6])/t,i=(e[3]-e[1])/t):e[0]>e[4]&&e[0]>e[8]?(t=2*Math.sqrt(1+e[0]-e[4]-e[8]),o=(e[7]-e[5])/t,r=.25*t,n=(e[1]+e[3])/t,i=(e[2]+e[6])/t):e[4]>e[8]?(t=2*Math.sqrt(1+e[4]-e[0]-e[8]),o=(e[2]-e[6])/t,r=(e[1]+e[3])/t,n=.25*t,i=(e[5]+e[7])/t):(t=2*Math.sqrt(1+e[8]-e[0]-e[4]),o=(e[3]-e[1])/t,r=(e[2]+e[6])/t,n=(e[5]+e[7])/t,i=.25*t);var s=this.allocQuaternion();return s.setX(r),s.setY(n),s.setZ(i),s.setW(o),s}},r.prototype={constructor:e.RigidBody,reset:function(){return this._setTransformFromBone(),this},updateFromBone:function(){return-1!==this.params.boneIndex&&0===this.params.type&&this._setTransformFromBone(),this},updateBone:function(){return 0===this.params.type||-1===this.params.boneIndex?this:(this._updateBoneRotation(),1===this.params.type&&this._updateBonePosition(),this.bone.updateMatrixWorld(!0),2===this.params.type&&this._setPositionFromBone(),this)},_init:function(){var e=this.manager,t=this.params,r=this.mesh.skeleton.bones,i=-1===t.boneIndex?new n.Bone:r[t.boneIndex],o=function(e){switch(e.shapeType){case 0:return new Ammo.btSphereShape(e.width);case 1:return new Ammo.btBoxShape(new Ammo.btVector3(e.width,e.height,e.depth));case 2:return new Ammo.btCapsuleShape(e.width,e.height);default:throw"unknown shape type "+e.shapeType}}(t),a=0===t.type?0:t.weight,s=e.allocVector3();s.setValue(0,0,0),0!==a&&o.calculateLocalInertia(a,s);var l=e.allocTransform();e.setIdentity(l),e.setOriginFromArray3(l,t.position),e.setBasisFromArray3(l,t.rotation);var u=e.allocThreeVector3(),c=e.allocTransform();e.setIdentity(c),e.setOriginFromThreeVector3(c,i.getWorldPosition(u));var h=e.multiplyTransforms(c,l),d=new Ammo.btDefaultMotionState(h),p=new Ammo.btRigidBodyConstructionInfo(a,d,o,s);p.set_m_friction(t.friction),p.set_m_restitution(t.restitution);var f=new Ammo.btRigidBody(p);0===t.type&&(f.setCollisionFlags(2|f.getCollisionFlags()),f.setActivationState(4)),f.setDamping(t.positionDamping,t.rotationDamping),f.setSleepingThresholds(0,0),this.world.addRigidBody(f,1<<t.groupIndex,t.groupTarget),this.body=f,this.bone=i,this.boneOffsetForm=l,this.boneOffsetFormInverse=e.inverseTransform(l),e.freeVector3(s),e.freeTransform(h),e.freeTransform(c),e.freeThreeVector3(u)},_getBoneTransform:function(){var e=this.manager,t=e.allocThreeVector3(),r=e.allocThreeQuaternion(),n=e.allocThreeVector3();this.bone.matrixWorld.decompose(t,r,n);var i=e.allocTransform();e.setOriginFromThreeVector3(i,t),e.setBasisFromThreeQuaternion(i,r);var o=e.multiplyTransforms(i,this.boneOffsetForm);return e.freeTransform(i),e.freeThreeVector3(n),e.freeThreeQuaternion(r),e.freeThreeVector3(t),o},_getWorldTransformForBone:function(){var e=this.manager,t=this.body.getCenterOfMassTransform();return e.multiplyTransforms(t,this.boneOffsetFormInverse)},_setTransformFromBone:function(){var e=this.manager,t=this._getBoneTransform();this.body.setCenterOfMassTransform(t),this.body.getMotionState().setWorldTransform(t),e.freeTransform(t)},_setPositionFromBone:function(){var e=this.manager,t=this._getBoneTransform(),r=e.allocTransform();this.body.getMotionState().getWorldTransform(r),e.copyOrigin(r,t),this.body.setCenterOfMassTransform(r),this.body.getMotionState().setWorldTransform(r),e.freeTransform(r),e.freeTransform(t)},_updateBoneRotation:function(){var e=this.manager,t=this._getWorldTransformForBone(),r=e.getBasis(t),n=e.allocThreeQuaternion(),i=e.allocThreeQuaternion(),o=e.allocThreeQuaternion();n.set(r.x(),r.y(),r.z(),r.w()),i.setFromRotationMatrix(this.bone.matrixWorld),i.conjugate(),i.multiply(n),o.setFromRotationMatrix(this.bone.matrix),this.bone.quaternion.copy(i.multiply(o).normalize()),e.freeThreeQuaternion(n),e.freeThreeQuaternion(i),e.freeThreeQuaternion(o),e.freeQuaternion(r),e.freeTransform(t)},_updateBonePosition:function(){var e=this.manager,t=this._getWorldTransformForBone(),r=e.allocThreeVector3(),n=e.getOrigin(t);r.set(n.x(),n.y(),n.z()),this.bone.parent&&this.bone.parent.worldToLocal(r),this.bone.position.copy(r),e.freeThreeVector3(r),e.freeTransform(t)}},i.prototype={constructor:i,_init:function(){var e=this.manager,t=this.params,r=this.bodyA,n=this.bodyB,i=e.allocTransform();e.setIdentity(i),e.setOriginFromArray3(i,t.position),e.setBasisFromArray3(i,t.rotation);var o=e.allocTransform(),a=e.allocTransform();r.body.getMotionState().getWorldTransform(o),n.body.getMotionState().getWorldTransform(a);var s=e.inverseTransform(o),l=e.inverseTransform(a),u=e.multiplyTransforms(s,i),c=e.multiplyTransforms(l,i),h=new Ammo.btGeneric6DofSpringConstraint(r.body,n.body,u,c,!0),d=e.allocVector3(),p=e.allocVector3(),f=e.allocVector3(),m=e.allocVector3();d.setValue(t.translationLimitation1[0],t.translationLimitation1[1],t.translationLimitation1[2]),p.setValue(t.translationLimitation2[0],t.translationLimitation2[1],t.translationLimitation2[2]),f.setValue(t.rotationLimitation1[0],t.rotationLimitation1[1],t.rotationLimitation1[2]),m.setValue(t.rotationLimitation2[0],t.rotationLimitation2[1],t.rotationLimitation2[2]),h.setLinearLowerLimit(d),h.setLinearUpperLimit(p),h.setAngularLowerLimit(f),h.setAngularUpperLimit(m);for(var v=0;v<3;v++)0!==t.springPosition[v]&&(h.enableSpring(v,!0),h.setStiffness(v,t.springPosition[v]));for(v=0;v<3;v++)0!==t.springRotation[v]&&(h.enableSpring(v+3,!0),h.setStiffness(v+3,t.springRotation[v]));if(void 0!==h.setParam)for(v=0;v<6;v++)h.setParam(2,.475,v);this.world.addConstraint(h,!0),this.constraint=h,e.freeTransform(i),e.freeTransform(o),e.freeTransform(a),e.freeTransform(s),e.freeTransform(l),e.freeTransform(u),e.freeTransform(c),e.freeVector3(d),e.freeVector3(p),e.freeVector3(f),e.freeVector3(m)}},o.prototype=Object.assign(Object.create(n.Object3D.prototype),{constructor:o,updateMatrixWorld:(a=new n.Vector3,s=new n.Quaternion,l=new n.Vector3,u=new n.Matrix4,function(e){var t=this.root;if(this.visible){var r=this.physics.bodies;u.copy(t.matrixWorld).decompose(a,s,l).compose(a,s,l.set(1,1,1)).invert();for(var i=0,o=r.length;i<o;i++){var c=r[i].body,h=this.children[i],d=c.getCenterOfMassTransform(),p=d.getOrigin(),f=d.getRotation();h.position.set(p.x(),p.y(),p.z()).applyMatrix4(u),h.quaternion.setFromRotationMatrix(u).multiply(s.set(f.x(),f.y(),f.z(),f.w()))}}this.matrix.copy(t.matrixWorld).decompose(a,s,l).compose(a,s,l.set(1,1,1)),n.Object3D.prototype.updateMatrixWorld.call(this,e)}),_init:function(){var e=this.physics.bodies;function t(e){switch(e.shapeType){case 0:return new n.SphereBufferGeometry(e.width,16,8);case 1:return new n.BoxBufferGeometry(2*e.width,2*e.height,2*e.depth,8,8,8);case 2:return new function(e,t,r,i){var o=new n.CylinderBufferGeometry(e,e,t,r,i,!0),a=new n.Mesh(new n.SphereBufferGeometry(e,r,i,0,2*Math.PI,0,Math.PI/2)),s=new n.Mesh(new n.SphereBufferGeometry(e,r,i,0,2*Math.PI,Math.PI/2,Math.PI/2));return a.position.set(0,t/2,0),s.position.set(0,-t/2,0),a.updateMatrix(),s.updateMatrix(),o.merge(a.geometry,a.matrix),o.merge(s.geometry,s.matrix),o}(e.width,e.height,16,8);default:return null}}for(var r=0,i=e.length;r<i;r++){var o=e[r].params;this.add(new n.Mesh(t(o),this.materials[o.type]))}}}),e}();r.d(t,"a",function(){return a});var a=function(){function e(e){e=e||{},this.meshes=[],this.camera=null,this.cameraTarget=new n.Object3D,this.cameraTarget.name="target",this.audio=null,this.audioManager=null,this.objects=new WeakMap,this.configuration={sync:void 0===e.sync||e.sync,afterglow:void 0!==e.afterglow?e.afterglow:0,resetPhysicsOnLoop:void 0===e.resetPhysicsOnLoop||e.resetPhysicsOnLoop},this.enabled={animation:!0,ik:!0,grant:!0,physics:!0,cameraAnimation:!0},this.onBeforePhysics=function(){},this.sharedPhysics=!1,this.masterPhysics=null}function t(e,t){t=t||{},this.audio=e,this.elapsedTime=0,this.currentTime=0,this.delayTime=void 0!==t.delayTime?t.delayTime:0,this.audioDuration=this.audio.buffer.duration,this.duration=this.audioDuration+this.delayTime}function r(e,t){this.mesh=e,this.grants=t||[]}var a;return e.prototype={constructor:e,add:function(e,t){if(t=t||{},e.isSkinnedMesh)this._addMesh(e,t);else if(e.isCamera)this._setupCamera(e,t);else{if("Audio"!==e.type)throw new Error("THREE.MMDAnimationHelper.add: accepts only THREE.SkinnedMesh or THREE.Camera or THREE.Audio instance.");this._setupAudio(e,t)}return this.configuration.sync&&this._syncDuration(),this},remove:function(e){if(e.isSkinnedMesh)this._removeMesh(e);else if(e.isCamera)this._clearCamera(e);else{if("Audio"!==e.type)throw new Error("THREE.MMDAnimationHelper.remove: accepts only THREE.SkinnedMesh or THREE.Camera or THREE.Audio instance.");this._clearAudio(e)}return this.configuration.sync&&this._syncDuration(),this},update:function(e){null!==this.audioManager&&this.audioManager.control(e);for(var t=0;t<this.meshes.length;t++)this._animateMesh(this.meshes[t],e);return this.sharedPhysics&&this._updateSharedPhysics(e),null!==this.camera&&this._animateCamera(this.camera,e),this},pose:function(e,t,r){!1!==(r=r||{}).resetPose&&e.pose();for(var i=e.skeleton.bones,o=t.bones,a={},s=0,l=i.length;s<l;s++)a[i[s].name]=s;var u=new n.Vector3,c=new n.Quaternion;for(s=0,l=o.length;s<l;s++){var h=o[s],d=a[h.name];if(void 0!==d){var p=i[d];p.position.add(u.fromArray(h.translation)),p.quaternion.multiply(c.fromArray(h.quaternion))}}return e.updateMatrixWorld(!0),!1!==r.ik&&this._createCCDIKSolver(e).update(r.saveOriginalBonesBeforeIK),!1!==r.grant&&this.createGrantSolver(e).update(),this},enable:function(e,t){if(void 0===this.enabled[e])throw new Error("THREE.MMDAnimationHelper.enable: unknown key "+e);if(this.enabled[e]=t,"physics"===e)for(var r=0,n=this.meshes.length;r<n;r++)this._optimizeIK(this.meshes[r],t);return this},createGrantSolver:function(e){return new r(e,e.geometry.userData.MMD.grants)},_addMesh:function(e,t){if(this.meshes.indexOf(e)>=0)throw new Error("THREE.MMDAnimationHelper._addMesh: SkinnedMesh '"+e.name+"' has already been added.");return this.meshes.push(e),this.objects.set(e,{looped:!1}),this._setupMeshAnimation(e,t.animation),!1!==t.physics&&this._setupMeshPhysics(e,t),this},_setupCamera:function(e,t){if(this.camera===e)throw new Error("THREE.MMDAnimationHelper._setupCamera: Camera '"+e.name+"' has already been set.");return this.camera&&this.clearCamera(this.camera),this.camera=e,e.add(this.cameraTarget),this.objects.set(e,{}),void 0!==t.animation&&this._setupCameraAnimation(e,t.animation),this},_setupAudio:function(e,r){if(this.audio===e)throw new Error("THREE.MMDAnimationHelper._setupAudio: Audio '"+e.name+"' has already been set.");return this.audio&&this.clearAudio(this.audio),this.audio=e,this.audioManager=new t(e,r),this.objects.set(this.audioManager,{duration:this.audioManager.duration}),this},_removeMesh:function(e){for(var t=!1,r=0,n=0,i=this.meshes.length;n<i;n++)this.meshes[n]!==e?this.meshes[r++]=this.meshes[n]:(this.objects.delete(e),t=!0);if(!t)throw new Error("THREE.MMDAnimationHelper._removeMesh: SkinnedMesh '"+e.name+"' has not been added yet.");return this.meshes.length=r,this},_clearCamera:function(e){if(e!==this.camera)throw new Error("THREE.MMDAnimationHelper._clearCamera: Camera '"+e.name+"' has not been set yet.");return this.camera.remove(this.cameraTarget),this.objects.delete(this.camera),this.camera=null,this},_clearAudio:function(e){if(e!==this.audio)throw new Error("THREE.MMDAnimationHelper._clearAudio: Audio '"+e.name+"' has not been set yet.");return this.objects.delete(this.audioManager),this.audio=null,this.audioManager=null,this},_setupMeshAnimation:function(e,t){var r=this.objects.get(e);if(void 0!==t){var i=Array.isArray(t)?t:[t];r.mixer=new n.AnimationMixer(e);for(var o=0,a=i.length;o<a;o++)r.mixer.clipAction(i[o]).play();r.mixer.addEventListener("loop",function(e){var t=e.action._clip.tracks;t.length>0&&".bones"!==t[0].name.slice(0,6)||(r.looped=!0)})}return r.ikSolver=this._createCCDIKSolver(e),r.grantSolver=this.createGrantSolver(e),this},_setupCameraAnimation:function(e,t){var r=Array.isArray(t)?t:[t],i=this.objects.get(e);i.mixer=new n.AnimationMixer(e);for(var o=0,a=r.length;o<a;o++)i.mixer.clipAction(r[o]).play()},_setupMeshPhysics:function(e,t){var r=this.objects.get(e);if(void 0===t.world&&this.sharedPhysics){var n=this._getMasterPhysics();null!==n&&(world=n.world)}r.physics=this._createMMDPhysics(e,t),r.mixer&&!1!==t.animationWarmup&&(this._animateMesh(e,0),r.physics.reset()),r.physics.warmup(void 0!==t.warmup?t.warmup:60),this._optimizeIK(e,!0)},_animateMesh:function(e,t){var r=this.objects.get(e),n=r.mixer,i=r.ikSolver,o=r.grantSolver,a=r.physics,s=r.looped;n&&this.enabled.animation&&(this._restoreBones(e),n.update(t),this._saveBones(e),i&&this.enabled.ik&&(e.updateMatrixWorld(!0),i.update()),o&&this.enabled.grant&&o.update()),!0===s&&this.enabled.physics&&(a&&this.configuration.resetPhysicsOnLoop&&a.reset(),r.looped=!1),a&&this.enabled.physics&&!this.sharedPhysics&&(this.onBeforePhysics(e),a.update(t))},_animateCamera:function(e,t){var r=this.objects.get(e).mixer;r&&this.enabled.cameraAnimation&&(r.update(t),e.updateProjectionMatrix(),e.up.set(0,1,0),e.up.applyQuaternion(e.quaternion),e.lookAt(this.cameraTarget.position))},_optimizeIK:function(e,t){for(var r=e.geometry.userData.MMD.iks,n=e.geometry.userData.MMD.bones,i=0,o=r.length;i<o;i++)for(var a=r[i].links,s=0,l=a.length;s<l;s++){var u=a[s];u.enabled=!0!==t||!(n[u.index].rigidBodyType>0)}},_createCCDIKSolver:function(e){if(void 0===i)throw new Error("THREE.MMDAnimationHelper: Import CCDIKSolver.");return new i(e,e.geometry.userData.MMD.iks)},_createMMDPhysics:function(e,t){if(void 0===o)throw new Error("THREE.MMDPhysics: Import MMDPhysics.");return new o(e,e.geometry.userData.MMD.rigidBodies,e.geometry.userData.MMD.constraints,t)},_syncDuration:function(){for(var e=0,t=this.objects,r=this.meshes,n=this.camera,i=this.audioManager,o=0,a=r.length;o<a;o++){if(void 0!==(u=this.objects.get(r[o]).mixer))for(var s=0;s<u._actions.length;s++){var l=u._actions[s]._clip;t.has(l)||t.set(l,{duration:l.duration}),e=Math.max(e,t.get(l).duration)}}if(null!==n&&void 0!==(u=this.objects.get(n).mixer))for(o=0,a=u._actions.length;o<a;o++){l=u._actions[o]._clip;t.has(l)||t.set(l,{duration:l.duration}),e=Math.max(e,t.get(l).duration)}null!==i&&(e=Math.max(e,t.get(i).duration)),e+=this.configuration.afterglow;for(o=0,a=this.meshes.length;o<a;o++){var u;if(void 0!==(u=this.objects.get(this.meshes[o]).mixer)){s=0;for(var c=u._actions.length;s<c;s++)u._actions[s]._clip.duration=e}}if(null!==n&&void 0!==(u=this.objects.get(n).mixer))for(o=0,a=u._actions.length;o<a;o++)u._actions[o]._clip.duration=e;null!==i&&(i.duration=e)},_updatePropertyMixersBuffer:function(e){for(var t=this.objects.get(e).mixer,r=t._bindings,n=t._accuIndex,i=0,o=r.length;i<o;i++){var a=r[i],s=a.buffer,l=(n+1)*a.valueSize;a.binding.getValue(s,l)}},_saveBones:function(e){var t=this.objects.get(e),r=e.skeleton.bones,n=t.backupBones;void 0===n&&(n=new Float32Array(7*r.length),t.backupBones=n);for(var i=0,o=r.length;i<o;i++){var a=r[i];a.position.toArray(n,7*i),a.quaternion.toArray(n,7*i+3)}},_restoreBones:function(e){var t=this.objects.get(e).backupBones;if(void 0!==t)for(var r=e.skeleton.bones,n=0,i=r.length;n<i;n++){var o=r[n];o.position.fromArray(t,7*n),o.quaternion.fromArray(t,7*n+3)}},_getMasterPhysics:function(){if(null!==this.masterPhysics)return this.masterPhysics;for(var e=0,t=this.meshes.length;e<t;e++){var r=this.meshes[e].physics;if(void 0!==r&&null!==r)return this.masterPhysics=r,this.masterPhysics}return null},_updateSharedPhysics:function(e){if(0!==this.meshes.length&&this.enabled.physics&&this.sharedPhysics){var t=this._getMasterPhysics();if(null!==t){for(var r=0,n=this.meshes.length;r<n;r++){null!==(i=this.meshes[r].physics)&&void 0!==i&&i.updateRigidBodies()}t.stepSimulation(e);for(r=0,n=this.meshes.length;r<n;r++){var i;null!==(i=this.meshes[r].physics)&&void 0!==i&&i.updateBones()}}}}},t.prototype={constructor:t,control:function(e){return this.elapsed+=e,this.currentTime+=e,this._shouldStopAudio()&&this.audio.stop(),this._shouldStartAudio()&&this.audio.play(),this},_shouldStartAudio:function(){if(this.audio.isPlaying)return!1;for(;this.currentTime>=this.duration;)this.currentTime-=this.duration;return!(this.currentTime<this.delayTime)&&!(this.currentTime-this.delayTime>this.audioDuration)},_shouldStopAudio:function(){return this.audio.isPlaying&&this.currentTime>=this.duration}},r.prototype={constructor:r,update:(a=new n.Quaternion,function(){for(var e=this.mesh.skeleton.bones,t=this.grants,r=0,n=t.length;r<n;r++){var i=t[r],o=e[i.index],s=e[i.parentIndex];i.isLocal?(i.affectPosition,i.affectRotation):(i.affectPosition,i.affectRotation&&(a.set(0,0,0,1),a.slerp(s.quaternion,i.ratio),o.quaternion.multiply(a)))}return this})},e}()},Iu6k:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),n.Object3D.call(this),this.visible=!1,this.domElement=t;var r=new o;this.add(r);var i=new a;this.add(i);var s=this;H("camera",e),H("object",void 0),H("enabled",!0),H("axis",null),H("mode","translate"),H("translationSnap",null),H("rotationSnap",null),H("scaleSnap",null),H("space","world"),H("size",1),H("dragging",!1),H("showX",!0),H("showY",!0),H("showZ",!0);var l={type:"change"},u={type:"mouseDown"},c={type:"mouseUp",mode:s.mode},h={type:"objectChange"},d=new n.Raycaster;function p(e,t,r){for(var n=t.intersectObject(e,!0),i=0;i<n.length;i++)if(n[i].object.visible||r)return n[i];return!1}var f=new n.Vector3,m=new n.Vector3,v=new n.Quaternion,g={X:new n.Vector3(1,0,0),Y:new n.Vector3(0,1,0),Z:new n.Vector3(0,0,1)},y=new n.Vector3,b=new n.Vector3,w=new n.Vector3,x=new n.Vector3,_=new n.Vector3,T=new n.Vector3,A=0,S=new n.Vector3,E=new n.Quaternion,C=new n.Vector3,M=new n.Vector3,N=new n.Quaternion,O=new n.Quaternion,R=new n.Vector3,k=new n.Vector3,L=new n.Quaternion,I=new n.Vector3,P=new n.Vector3,B=new n.Quaternion,D=new n.Quaternion,U=new n.Vector3,F=new n.Vector3,z=new n.Vector3,V=new n.Quaternion,j=new n.Vector3;function H(e,t){var n=t;Object.defineProperty(s,e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,i[e]=t,r[e]=t,s.dispatchEvent({type:e+"-changed",value:t}),s.dispatchEvent(l))}}),s[e]=t,i[e]=t,r[e]=t}function G(e){if(s.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var r=e.changedTouches?e.changedTouches[0]:e,n=t.getBoundingClientRect();return{x:(r.clientX-n.left)/n.width*2-1,y:-(r.clientY-n.top)/n.height*2+1,button:e.button}}function X(e){if(s.enabled)switch(e.pointerType){case"mouse":case"pen":s.pointerHover(G(e))}}function Y(e){s.enabled&&(s.domElement.style.touchAction="none",s.domElement.ownerDocument.addEventListener("pointermove",W,!1),s.pointerHover(G(e)),s.pointerDown(G(e)))}function W(e){s.enabled&&s.pointerMove(G(e))}function J(e){s.enabled&&(s.domElement.style.touchAction="",s.domElement.ownerDocument.removeEventListener("pointermove",W,!1),s.pointerUp(G(e)))}H("worldPosition",P),H("worldPositionStart",k),H("worldQuaternion",B),H("worldQuaternionStart",L),H("cameraPosition",S),H("cameraQuaternion",E),H("pointStart",y),H("pointEnd",b),H("rotationAxis",x),H("rotationAngle",A),H("eye",F),t.addEventListener("pointerdown",Y,!1),t.addEventListener("pointermove",X,!1),s.domElement.ownerDocument.addEventListener("pointerup",J,!1),this.dispose=function(){t.removeEventListener("pointerdown",Y),t.removeEventListener("pointermove",X),s.domElement.ownerDocument.removeEventListener("pointermove",W),s.domElement.ownerDocument.removeEventListener("pointerup",J),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(M,N,R),this.object.matrixWorld.decompose(P,B,U),O.copy(N).invert(),D.copy(B).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(S,E,C),F.copy(S).sub(P).normalize(),n.Object3D.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging){d.setFromCamera(e,this.camera);var t=p(r.picker[this.mode],d);this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){d.setFromCamera(e,this.camera);var t=p(i,d,!0);if(t){var r=this.space;if("scale"===this.mode?r="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(r="world"),"local"===r&&"rotate"===this.mode){var n=this.rotationSnap;"X"===this.axis&&n&&(this.object.rotation.x=Math.round(this.object.rotation.x/n)*n),"Y"===this.axis&&n&&(this.object.rotation.y=Math.round(this.object.rotation.y/n)*n),"Z"===this.axis&&n&&(this.object.rotation.z=Math.round(this.object.rotation.z/n)*n)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),z.copy(this.object.position),V.copy(this.object.quaternion),j.copy(this.object.scale),this.object.matrixWorld.decompose(k,L,I),y.copy(t.point).sub(k)}this.dragging=!0,u.mode=this.mode,this.dispatchEvent(u)}},this.pointerMove=function(e){var t=this.axis,r=this.mode,n=this.object,o=this.space;if("scale"===r?o="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(o="world"),void 0!==n&&null!==t&&!1!==this.dragging&&-1===e.button){d.setFromCamera(e,this.camera);var a=p(i,d,!0);if(a){if(b.copy(a.point).sub(k),"translate"===r)w.copy(b).sub(y),"local"===o&&"XYZ"!==t&&w.applyQuaternion(D),-1===t.indexOf("X")&&(w.x=0),-1===t.indexOf("Y")&&(w.y=0),-1===t.indexOf("Z")&&(w.z=0),"local"===o&&"XYZ"!==t?w.applyQuaternion(V).divide(R):w.applyQuaternion(O).divide(R),n.position.copy(w).add(z),this.translationSnap&&("local"===o&&(n.position.applyQuaternion(v.copy(V).invert()),-1!==t.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.position.applyQuaternion(V)),"world"===o&&(n.parent&&n.position.add(f.setFromMatrixPosition(n.parent.matrixWorld)),-1!==t.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.parent&&n.position.sub(f.setFromMatrixPosition(n.parent.matrixWorld))));else if("scale"===r){if(-1!==t.search("XYZ")){var s=b.length()/y.length();b.dot(y)<0&&(s*=-1),m.set(s,s,s)}else f.copy(y),m.copy(b),f.applyQuaternion(D),m.applyQuaternion(D),m.divide(f),-1===t.search("X")&&(m.x=1),-1===t.search("Y")&&(m.y=1),-1===t.search("Z")&&(m.z=1);n.scale.copy(j).multiply(m),this.scaleSnap&&(-1!==t.search("X")&&(n.scale.x=Math.round(n.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(n.scale.y=Math.round(n.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(n.scale.z=Math.round(n.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===r){w.copy(b).sub(y);var u=20/P.distanceTo(f.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(x.copy(F),A=b.angleTo(y),_.copy(y).normalize(),T.copy(b).normalize(),A*=T.cross(_).dot(F)<0?1:-1):"XYZE"===t?(x.copy(w).cross(F).normalize(),A=w.dot(f.copy(x).cross(this.eye))*u):"X"!==t&&"Y"!==t&&"Z"!==t||(x.copy(g[t]),f.copy(g[t]),"local"===o&&f.applyQuaternion(B),A=w.dot(f.cross(F).normalize())*u),this.rotationSnap&&(A=Math.round(A/this.rotationSnap)*this.rotationSnap),this.rotationAngle=A,"local"===o&&"E"!==t&&"XYZE"!==t?(n.quaternion.copy(V),n.quaternion.multiply(v.setFromAxisAngle(x,A)).normalize()):(x.applyQuaternion(O),n.quaternion.copy(v.setFromAxisAngle(x,A)),n.quaternion.multiply(V).normalize())}this.dispatchEvent(l),this.dispatchEvent(h)}}},this.pointerUp=function(e){0===e.button&&(this.dragging&&null!==this.axis&&(c.mode=this.mode,this.dispatchEvent(c)),this.dragging=!1,this.axis=null)},this.getMode=function(){return s.mode},this.setMode=function(e){s.mode=e},this.setTranslationSnap=function(e){s.translationSnap=e},this.setRotationSnap=function(e){s.rotationSnap=e},this.setScaleSnap=function(e){s.scaleSnap=e},this.setSize=function(e){s.size=e},this.setSpace=function(e){s.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};i.prototype=Object.assign(Object.create(n.Object3D.prototype),{constructor:i,isTransformControls:!0});var o=function(){n.Object3D.call(this),this.type="TransformControlsGizmo";var e=new n.MeshBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,side:n.DoubleSide,fog:!1,toneMapped:!1}),t=new n.LineBasicMaterial({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),r=e.clone();r.opacity=.15;var i=e.clone();i.opacity=.33;var o=e.clone();o.color.set(16711680);var a=e.clone();a.color.set(65280);var s=e.clone();s.color.set(255);var l=e.clone();l.opacity=.25;var u=l.clone();u.color.set(16776960);var c=l.clone();c.color.set(65535);var h=l.clone();h.color.set(16711935),e.clone().color.set(16776960);var d=t.clone();d.color.set(16711680);var p=t.clone();p.color.set(65280);var f=t.clone();f.color.set(255);var m=t.clone();m.color.set(65535);var v=t.clone();v.color.set(16711935);var g=t.clone();g.color.set(16776960);var y=t.clone();y.color.set(7895160);var b=g.clone();b.opacity=.25;var w=new n.CylinderBufferGeometry(0,.05,.2,12,1,!1),x=new n.BoxBufferGeometry(.125,.125,.125),_=new n.BufferGeometry;_.setAttribute("position",new n.Float32BufferAttribute([0,0,0,1,0,0],3));var T,A=function(e,t){for(var r=new n.BufferGeometry,i=[],o=0;o<=64*t;++o)i.push(0,Math.cos(o/32*Math.PI)*e,Math.sin(o/32*Math.PI)*e);return r.setAttribute("position",new n.Float32BufferAttribute(i,3)),r},S={X:[[new n.Mesh(w,o),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new n.Mesh(w,o),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new n.Line(_,d)]],Y:[[new n.Mesh(w,a),[0,1,0],null,null,"fwd"],[new n.Mesh(w,a),[0,1,0],[Math.PI,0,0],null,"bwd"],[new n.Line(_,p),null,[0,0,Math.PI/2]]],Z:[[new n.Mesh(w,s),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new n.Mesh(w,s),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new n.Line(_,f),null,[0,-Math.PI/2,0]]],XYZ:[[new n.Mesh(new n.OctahedronBufferGeometry(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new n.Mesh(new n.PlaneBufferGeometry(.295,.295),u.clone()),[.15,.15,0]],[new n.Line(_,g),[.18,.3,0],null,[.125,1,1]],[new n.Line(_,g),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new n.Mesh(new n.PlaneBufferGeometry(.295,.295),c.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new n.Line(_,m),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new n.Line(_,m),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new n.Mesh(new n.PlaneBufferGeometry(.295,.295),h.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new n.Line(_,v),[.18,0,.3],null,[.125,1,1]],[new n.Line(_,v),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},E={X:[[new n.Mesh(new n.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new n.Mesh(new n.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[0,.6,0]]],Z:[[new n.Mesh(new n.CylinderBufferGeometry(.2,0,1,4,1,!1),r),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new n.Mesh(new n.OctahedronBufferGeometry(.2,0),r)]],XY:[[new n.Mesh(new n.PlaneBufferGeometry(.4,.4),r),[.2,.2,0]]],YZ:[[new n.Mesh(new n.PlaneBufferGeometry(.4,.4),r),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new n.Mesh(new n.PlaneBufferGeometry(.4,.4),r),[.2,0,.2],[-Math.PI/2,0,0]]]},C={START:[[new n.Mesh(new n.OctahedronBufferGeometry(.01,2),i),null,null,null,"helper"]],END:[[new n.Mesh(new n.OctahedronBufferGeometry(.01,2),i),null,null,null,"helper"]],DELTA:[[new n.Line((T=new n.BufferGeometry,T.setAttribute("position",new n.Float32BufferAttribute([0,0,0,1,1,1],3)),T),i),null,null,null,"helper"]],X:[[new n.Line(_,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n.Line(_,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n.Line(_,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},M={X:[[new n.Line(A(1,.5),d)],[new n.Mesh(new n.OctahedronBufferGeometry(.04,0),o),[0,0,.99],null,[1,3,1]]],Y:[[new n.Line(A(1,.5),p),null,[0,0,-Math.PI/2]],[new n.Mesh(new n.OctahedronBufferGeometry(.04,0),a),[0,0,.99],null,[3,1,1]]],Z:[[new n.Line(A(1,.5),f),null,[0,Math.PI/2,0]],[new n.Mesh(new n.OctahedronBufferGeometry(.04,0),s),[.99,0,0],null,[1,3,1]]],E:[[new n.Line(A(1.25,1),b),null,[0,Math.PI/2,0]],[new n.Mesh(new n.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new n.Mesh(new n.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new n.Mesh(new n.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new n.Mesh(new n.CylinderBufferGeometry(.03,0,.15,4,1,!1),b),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new n.Line(A(1,1),y),null,[0,Math.PI/2,0]]]},N={AXIS:[[new n.Line(_,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},O={X:[[new n.Mesh(new n.TorusBufferGeometry(1,.1,4,24),r),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new n.Mesh(new n.TorusBufferGeometry(1,.1,4,24),r),[0,0,0],[Math.PI/2,0,0]]],Z:[[new n.Mesh(new n.TorusBufferGeometry(1,.1,4,24),r),[0,0,0],[0,0,-Math.PI/2]]],E:[[new n.Mesh(new n.TorusBufferGeometry(1.25,.1,2,24),r)]],XYZE:[[new n.Mesh(new n.SphereBufferGeometry(.7,10,8),r)]]},R={X:[[new n.Mesh(x,o),[.8,0,0],[0,0,-Math.PI/2]],[new n.Line(_,d),null,null,[.8,1,1]]],Y:[[new n.Mesh(x,a),[0,.8,0]],[new n.Line(_,p),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new n.Mesh(x,s),[0,0,.8],[Math.PI/2,0,0]],[new n.Line(_,f),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new n.Mesh(x,u),[.85,.85,0],null,[2,2,.2]],[new n.Line(_,g),[.855,.98,0],null,[.125,1,1]],[new n.Line(_,g),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new n.Mesh(x,c),[0,.85,.85],null,[.2,2,2]],[new n.Line(_,m),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new n.Line(_,m),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new n.Mesh(x,h),[.85,0,.85],null,[2,.2,2]],[new n.Line(_,v),[.855,0,.98],null,[.125,1,1]],[new n.Line(_,v),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new n.Mesh(new n.BoxBufferGeometry(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new n.Mesh(new n.BoxBufferGeometry(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new n.Mesh(new n.BoxBufferGeometry(.125,.125,.125),l.clone()),[0,0,1.1]]]},k={X:[[new n.Mesh(new n.CylinderBufferGeometry(.2,0,.8,4,1,!1),r),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new n.Mesh(new n.CylinderBufferGeometry(.2,0,.8,4,1,!1),r),[0,.5,0]]],Z:[[new n.Mesh(new n.CylinderBufferGeometry(.2,0,.8,4,1,!1),r),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new n.Mesh(x,r),[.85,.85,0],null,[3,3,.2]]],YZ:[[new n.Mesh(x,r),[0,.85,.85],null,[.2,3,3]]],XZ:[[new n.Mesh(x,r),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new n.Mesh(new n.BoxBufferGeometry(.2,.2,.2),r),[1.1,0,0]]],XYZY:[[new n.Mesh(new n.BoxBufferGeometry(.2,.2,.2),r),[0,1.1,0]]],XYZZ:[[new n.Mesh(new n.BoxBufferGeometry(.2,.2,.2),r),[0,0,1.1]]]},L={X:[[new n.Line(_,i.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n.Line(_,i.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n.Line(_,i.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},I=function(e){var t=new n.Object3D;for(var r in e)for(var i=e[r].length;i--;){var o=e[r][i][0].clone(),a=e[r][i][1],s=e[r][i][2],l=e[r][i][3],u=e[r][i][4];o.name=r,o.tag=u,a&&o.position.set(a[0],a[1],a[2]),s&&o.rotation.set(s[0],s[1],s[2]),l&&o.scale.set(l[0],l[1],l[2]),o.updateMatrix();var c=o.geometry.clone();c.applyMatrix4(o.matrix),o.geometry=c,o.renderOrder=1/0,o.position.set(0,0,0),o.rotation.set(0,0,0),o.scale.set(1,1,1),t.add(o)}return t},P=new n.Vector3(0,0,0),B=new n.Euler,D=new n.Vector3(0,1,0),U=new n.Vector3(0,0,0),F=new n.Matrix4,z=new n.Quaternion,V=new n.Quaternion,j=new n.Quaternion,H=new n.Vector3(1,0,0),G=new n.Vector3(0,1,0),X=new n.Vector3(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=I(S)),this.add(this.gizmo.rotate=I(M)),this.add(this.gizmo.scale=I(R)),this.add(this.picker.translate=I(E)),this.add(this.picker.rotate=I(O)),this.add(this.picker.scale=I(k)),this.add(this.helper.translate=I(C)),this.add(this.helper.rotate=I(N)),this.add(this.helper.scale=I(L)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:j;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var r=[];r=(r=(r=r.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var i=0;i<r.length;i++){var o,a=r[i];if(a.visible=!0,a.rotation.set(0,0,0),a.position.copy(this.worldPosition),o=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),a.scale.set(1,1,1).multiplyScalar(o*this.size/7),"helper"!==a.tag){if(a.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){"X"!==a.name&&"XYZX"!==a.name||Math.abs(D.copy(H).applyQuaternion(t).dot(this.eye))>.99&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Y"!==a.name&&"XYZY"!==a.name||Math.abs(D.copy(G).applyQuaternion(t).dot(this.eye))>.99&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Z"!==a.name&&"XYZZ"!==a.name||Math.abs(D.copy(X).applyQuaternion(t).dot(this.eye))>.99&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XY"===a.name&&Math.abs(D.copy(X).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"YZ"===a.name&&Math.abs(D.copy(H).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XZ"===a.name&&Math.abs(D.copy(G).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),-1!==a.name.search("X")&&(D.copy(H).applyQuaternion(t).dot(this.eye)<0?"fwd"===a.tag?a.visible=!1:a.scale.x*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Y")&&(D.copy(G).applyQuaternion(t).dot(this.eye)<0?"fwd"===a.tag?a.visible=!1:a.scale.y*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Z")&&(D.copy(X).applyQuaternion(t).dot(this.eye)<0?"fwd"===a.tag?a.visible=!1:a.scale.z*=-1:"bwd"===a.tag&&(a.visible=!1))}else"rotate"===this.mode&&(V.copy(t),D.copy(this.eye).applyQuaternion(z.copy(t).invert()),-1!==a.name.search("E")&&a.quaternion.setFromRotationMatrix(F.lookAt(this.eye,U,G)),"X"===a.name&&(z.setFromAxisAngle(H,Math.atan2(-D.y,D.z)),z.multiplyQuaternions(V,z),a.quaternion.copy(z)),"Y"===a.name&&(z.setFromAxisAngle(G,Math.atan2(D.x,D.z)),z.multiplyQuaternions(V,z),a.quaternion.copy(z)),"Z"===a.name&&(z.setFromAxisAngle(X,Math.atan2(D.y,D.x)),z.multiplyQuaternions(V,z),a.quaternion.copy(z)));a.visible=a.visible&&(-1===a.name.indexOf("X")||this.showX),a.visible=a.visible&&(-1===a.name.indexOf("Y")||this.showY),a.visible=a.visible&&(-1===a.name.indexOf("Z")||this.showZ),a.visible=a.visible&&(-1===a.name.indexOf("E")||this.showX&&this.showY&&this.showZ),a.material._opacity=a.material._opacity||a.material.opacity,a.material._color=a.material._color||a.material.color.clone(),a.material.color.copy(a.material._color),a.material.opacity=a.material._opacity,this.enabled?this.axis&&(a.name===this.axis?(a.material.opacity=1,a.material.color.lerp(new n.Color(1,1,1),.5)):this.axis.split("").some(function(e){return a.name===e})?(a.material.opacity=1,a.material.color.lerp(new n.Color(1,1,1),.5)):(a.material.opacity*=.25,a.material.color.lerp(new n.Color(1,1,1),.5))):(a.material.opacity*=.5,a.material.color.lerp(new n.Color(1,1,1),.5))}else a.visible=!1,"AXIS"===a.name?(a.position.copy(this.worldPositionStart),a.visible=!!this.axis,"X"===this.axis&&(z.setFromEuler(B.set(0,0,0)),a.quaternion.copy(t).multiply(z),Math.abs(D.copy(H).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Y"===this.axis&&(z.setFromEuler(B.set(0,0,Math.PI/2)),a.quaternion.copy(t).multiply(z),Math.abs(D.copy(G).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Z"===this.axis&&(z.setFromEuler(B.set(0,Math.PI/2,0)),a.quaternion.copy(t).multiply(z),Math.abs(D.copy(X).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"XYZE"===this.axis&&(z.setFromEuler(B.set(0,Math.PI/2,0)),D.copy(this.rotationAxis),a.quaternion.setFromRotationMatrix(F.lookAt(U,D,G)),a.quaternion.multiply(z),a.visible=this.dragging),"E"===this.axis&&(a.visible=!1)):"START"===a.name?(a.position.copy(this.worldPositionStart),a.visible=this.dragging):"END"===a.name?(a.position.copy(this.worldPosition),a.visible=this.dragging):"DELTA"===a.name?(a.position.copy(this.worldPositionStart),a.quaternion.copy(this.worldQuaternionStart),P.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),P.applyQuaternion(this.worldQuaternionStart.clone().invert()),a.scale.copy(P),a.visible=this.dragging):(a.quaternion.copy(t),this.dragging?a.position.copy(this.worldPositionStart):a.position.copy(this.worldPosition),this.axis&&(a.visible=-1!==this.axis.search(a.name)))}n.Object3D.prototype.updateMatrixWorld.call(this)}};o.prototype=Object.assign(Object.create(n.Object3D.prototype),{constructor:o,isTransformControlsGizmo:!0});var a=function(){n.Mesh.call(this,new n.PlaneBufferGeometry(1e5,1e5,2,2),new n.MeshBasicMaterial({visible:!1,wireframe:!0,side:n.DoubleSide,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane";var e=new n.Vector3(1,0,0),t=new n.Vector3(0,1,0),r=new n.Vector3(0,0,1),i=new n.Vector3,o=new n.Vector3,a=new n.Vector3,s=new n.Matrix4,l=new n.Quaternion;this.updateMatrixWorld=function(){var u=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(u="local"),e.set(1,0,0).applyQuaternion("local"===u?this.worldQuaternion:l),t.set(0,1,0).applyQuaternion("local"===u?this.worldQuaternion:l),r.set(0,0,1).applyQuaternion("local"===u?this.worldQuaternion:l),a.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":a.copy(this.eye).cross(e),o.copy(e).cross(a);break;case"Y":a.copy(this.eye).cross(t),o.copy(t).cross(a);break;case"Z":a.copy(this.eye).cross(r),o.copy(r).cross(a);break;case"XY":o.copy(r);break;case"YZ":o.copy(e);break;case"XZ":a.copy(r),o.copy(t);break;case"XYZ":case"E":o.set(0,0,0)}break;case"rotate":default:o.set(0,0,0)}0===o.length()?this.quaternion.copy(this.cameraQuaternion):(s.lookAt(i.set(0,0,0),o,a),this.quaternion.setFromRotationMatrix(s)),n.Object3D.prototype.updateMatrixWorld.call(this)}};a.prototype=Object.assign(Object.create(n.Mesh.prototype),{constructor:a,isTransformControlsPlane:!0})},JQAX:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(e,t){void 0===t&&console.warn('THREE.TrackballControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.TrackballControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.');var r=this,i={NONE:-1,ROTATE:0,ZOOM:1,PAN:2,TOUCH_ROTATE:3,TOUCH_ZOOM_PAN:4};this.object=e,this.domElement=t,this.enabled=!0,this.screen={left:0,top:0,width:0,height:0},this.rotateSpeed=1,this.zoomSpeed=1.2,this.panSpeed=.3,this.noRotate=!1,this.noZoom=!1,this.noPan=!1,this.staticMoving=!1,this.dynamicDampingFactor=.2,this.minDistance=0,this.maxDistance=1/0,this.keys=[65,83,68],this.mouseButtons={LEFT:n.MOUSE.ROTATE,MIDDLE:n.MOUSE.ZOOM,RIGHT:n.MOUSE.PAN},this.target=new n.Vector3;var o=new n.Vector3,a=1,s=i.NONE,l=i.NONE,u=new n.Vector3,c=new n.Vector2,h=new n.Vector2,d=new n.Vector3,p=0,f=new n.Vector2,m=new n.Vector2,v=0,g=0,y=new n.Vector2,b=new n.Vector2;this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.up0=this.object.up.clone(),this.zoom0=this.object.zoom;var w={type:"change"},x={type:"start"},_={type:"end"};this.handleResize=function(){var e=r.domElement.getBoundingClientRect(),t=r.domElement.ownerDocument.documentElement;r.screen.left=e.left+window.pageXOffset-t.clientLeft,r.screen.top=e.top+window.pageYOffset-t.clientTop,r.screen.width=e.width,r.screen.height=e.height};var T,A,S,E,C,M,N,O,R,k,L,I=(T=new n.Vector2,function(e,t){return T.set((e-r.screen.left)/r.screen.width,(t-r.screen.top)/r.screen.height),T}),P=function(){var e=new n.Vector2;return function(t,n){return e.set((t-.5*r.screen.width-r.screen.left)/(.5*r.screen.width),(r.screen.height+2*(r.screen.top-n))/r.screen.width),e}}();function B(e){if(!1!==r.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(e.preventDefault(),e.stopPropagation(),s===i.NONE)switch(e.button){case r.mouseButtons.LEFT:s=i.ROTATE;break;case r.mouseButtons.MIDDLE:s=i.ZOOM;break;case r.mouseButtons.RIGHT:s=i.PAN;break;default:s=i.NONE}var t=l!==i.NONE?l:s;t!==i.ROTATE||r.noRotate?t!==i.ZOOM||r.noZoom?t!==i.PAN||r.noPan||(y.copy(I(e.pageX,e.pageY)),b.copy(y)):(f.copy(I(e.pageX,e.pageY)),m.copy(f)):(h.copy(P(e.pageX,e.pageY)),c.copy(h));r.domElement.ownerDocument.addEventListener("pointermove",D,!1),r.domElement.ownerDocument.addEventListener("pointerup",U,!1),r.dispatchEvent(x)}(e)}}function D(e){if(!1!==r.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===r.enabled)return;e.preventDefault(),e.stopPropagation();var t=l!==i.NONE?l:s;t!==i.ROTATE||r.noRotate?t!==i.ZOOM||r.noZoom?t!==i.PAN||r.noPan||b.copy(I(e.pageX,e.pageY)):m.copy(I(e.pageX,e.pageY)):(c.copy(h),h.copy(P(e.pageX,e.pageY)))}(e)}}function U(e){if(!1!==r.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===r.enabled)return;e.preventDefault(),e.stopPropagation(),s=i.NONE,r.domElement.ownerDocument.removeEventListener("pointermove",D),r.domElement.ownerDocument.removeEventListener("pointerup",U),r.dispatchEvent(_)}(e)}}function F(e){!1!==r.enabled&&(window.removeEventListener("keydown",F),l===i.NONE&&(e.keyCode!==r.keys[i.ROTATE]||r.noRotate?e.keyCode!==r.keys[i.ZOOM]||r.noZoom?e.keyCode!==r.keys[i.PAN]||r.noPan||(l=i.PAN):l=i.ZOOM:l=i.ROTATE))}function z(){!1!==r.enabled&&(l=i.NONE,window.addEventListener("keydown",F,!1))}function V(e){if(!1!==r.enabled&&!0!==r.noZoom){switch(e.preventDefault(),e.stopPropagation(),e.deltaMode){case 2:f.y-=.025*e.deltaY;break;case 1:f.y-=.01*e.deltaY;break;default:f.y-=25e-5*e.deltaY}r.dispatchEvent(x),r.dispatchEvent(_)}}function j(e){if(!1!==r.enabled){switch(e.preventDefault(),e.touches.length){case 1:s=i.TOUCH_ROTATE,h.copy(P(e.touches[0].pageX,e.touches[0].pageY)),c.copy(h);break;default:s=i.TOUCH_ZOOM_PAN;var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;g=v=Math.sqrt(t*t+n*n);var o=(e.touches[0].pageX+e.touches[1].pageX)/2,a=(e.touches[0].pageY+e.touches[1].pageY)/2;y.copy(I(o,a)),b.copy(y)}r.dispatchEvent(x)}}function H(e){if(!1!==r.enabled)switch(e.preventDefault(),e.stopPropagation(),e.touches.length){case 1:c.copy(h),h.copy(P(e.touches[0].pageX,e.touches[0].pageY));break;default:var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY;g=Math.sqrt(t*t+n*n);var i=(e.touches[0].pageX+e.touches[1].pageX)/2,o=(e.touches[0].pageY+e.touches[1].pageY)/2;b.copy(I(i,o))}}function G(e){if(!1!==r.enabled){switch(e.touches.length){case 0:s=i.NONE;break;case 1:s=i.TOUCH_ROTATE,h.copy(P(e.touches[0].pageX,e.touches[0].pageY)),c.copy(h)}r.dispatchEvent(_)}}function X(e){!1!==r.enabled&&e.preventDefault()}this.rotateCamera=(S=new n.Vector3,E=new n.Quaternion,C=new n.Vector3,M=new n.Vector3,N=new n.Vector3,O=new n.Vector3,function(){O.set(h.x-c.x,h.y-c.y,0),(A=O.length())?(u.copy(r.object.position).sub(r.target),C.copy(u).normalize(),M.copy(r.object.up).normalize(),N.crossVectors(M,C).normalize(),M.setLength(h.y-c.y),N.setLength(h.x-c.x),O.copy(M.add(N)),S.crossVectors(O,u).normalize(),A*=r.rotateSpeed,E.setFromAxisAngle(S,A),u.applyQuaternion(E),r.object.up.applyQuaternion(E),d.copy(S),p=A):!r.staticMoving&&p&&(p*=Math.sqrt(1-r.dynamicDampingFactor),u.copy(r.object.position).sub(r.target),E.setFromAxisAngle(d,p),u.applyQuaternion(E),r.object.up.applyQuaternion(E)),c.copy(h)}),this.zoomCamera=function(){var e;s===i.TOUCH_ZOOM_PAN?(e=v/g,v=g,r.object.isPerspectiveCamera?u.multiplyScalar(e):r.object.isOrthographicCamera?(r.object.zoom*=e,r.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")):(1!==(e=1+(m.y-f.y)*r.zoomSpeed)&&e>0&&(r.object.isPerspectiveCamera?u.multiplyScalar(e):r.object.isOrthographicCamera?(r.object.zoom/=e,r.object.updateProjectionMatrix()):console.warn("THREE.TrackballControls: Unsupported camera type")),r.staticMoving?f.copy(m):f.y+=(m.y-f.y)*this.dynamicDampingFactor)},this.panCamera=(R=new n.Vector2,k=new n.Vector3,L=new n.Vector3,function(){if(R.copy(b).sub(y),R.lengthSq()){if(r.object.isOrthographicCamera){var e=(r.object.right-r.object.left)/r.object.zoom/r.domElement.clientWidth,t=(r.object.top-r.object.bottom)/r.object.zoom/r.domElement.clientWidth;R.x*=e,R.y*=t}R.multiplyScalar(u.length()*r.panSpeed),L.copy(u).cross(r.object.up).setLength(R.x),L.add(k.copy(r.object.up).setLength(R.y)),r.object.position.add(L),r.target.add(L),r.staticMoving?y.copy(b):y.add(R.subVectors(b,y).multiplyScalar(r.dynamicDampingFactor))}}),this.checkDistances=function(){r.noZoom&&r.noPan||(u.lengthSq()>r.maxDistance*r.maxDistance&&(r.object.position.addVectors(r.target,u.setLength(r.maxDistance)),f.copy(m)),u.lengthSq()<r.minDistance*r.minDistance&&(r.object.position.addVectors(r.target,u.setLength(r.minDistance)),f.copy(m)))},this.update=function(){u.subVectors(r.object.position,r.target),r.noRotate||r.rotateCamera(),r.noZoom||r.zoomCamera(),r.noPan||r.panCamera(),r.object.position.addVectors(r.target,u),r.object.isPerspectiveCamera?(r.checkDistances(),r.object.lookAt(r.target),o.distanceToSquared(r.object.position)>1e-6&&(r.dispatchEvent(w),o.copy(r.object.position))):r.object.isOrthographicCamera?(r.object.lookAt(r.target),(o.distanceToSquared(r.object.position)>1e-6||a!==r.object.zoom)&&(r.dispatchEvent(w),o.copy(r.object.position),a=r.object.zoom)):console.warn("THREE.TrackballControls: Unsupported camera type")},this.reset=function(){s=i.NONE,l=i.NONE,r.target.copy(r.target0),r.object.position.copy(r.position0),r.object.up.copy(r.up0),r.object.zoom=r.zoom0,r.object.updateProjectionMatrix(),u.subVectors(r.object.position,r.target),r.object.lookAt(r.target),r.dispatchEvent(w),o.copy(r.object.position),a=r.object.zoom},this.dispose=function(){r.domElement.removeEventListener("contextmenu",X,!1),r.domElement.removeEventListener("pointerdown",B,!1),r.domElement.removeEventListener("wheel",V,!1),r.domElement.removeEventListener("touchstart",j,!1),r.domElement.removeEventListener("touchend",G,!1),r.domElement.removeEventListener("touchmove",H,!1),r.domElement.ownerDocument.removeEventListener("pointermove",D,!1),r.domElement.ownerDocument.removeEventListener("pointerup",U,!1),window.removeEventListener("keydown",F,!1),window.removeEventListener("keyup",z,!1)},this.domElement.addEventListener("contextmenu",X,!1),this.domElement.addEventListener("pointerdown",B,!1),this.domElement.addEventListener("wheel",V,!1),this.domElement.addEventListener("touchstart",j,!1),this.domElement.addEventListener("touchend",G,!1),this.domElement.addEventListener("touchmove",H,!1),this.domElement.ownerDocument.addEventListener("pointermove",D,!1),this.domElement.ownerDocument.addEventListener("pointerup",U,!1),window.addEventListener("keydown",F,!1),window.addEventListener("keyup",z,!1),this.handleResize(),this.update()};i.prototype=Object.create(n.EventDispatcher.prototype),i.prototype.constructor=i},JYhl:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("6+nK"),i=r("Glcs"),o=function(e){n.Loader.call(this,e),this.hdrLoader=new i.a,this.type=n.UnsignedByteType};o.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:o,load:function(e,t,r,i){Array.isArray(e)||(console.warn("THREE.HDRCubeTextureLoader signature has changed. Use .setDataType() instead."),this.setDataType(e),e=t,t=r,r=i,i=arguments[4]);var o=new n.CubeTexture;switch(o.type=this.type,o.type){case n.UnsignedByteType:o.encoding=n.RGBEEncoding,o.format=n.RGBAFormat,o.minFilter=n.NearestFilter,o.magFilter=n.NearestFilter,o.generateMipmaps=!1;break;case n.FloatType:case n.HalfFloatType:o.encoding=n.LinearEncoding,o.format=n.RGBFormat,o.minFilter=n.LinearFilter,o.magFilter=n.LinearFilter,o.generateMipmaps=!1}var a=this,s=0;function l(t,r,i,l){new n.FileLoader(a.manager).setPath(a.path).setResponseType("arraybuffer").setWithCredentials(a.withCredentials).load(e[t],function(e){s++;var i=a.hdrLoader.parse(e);if(i){if(void 0!==i.data){var l=new n.DataTexture(i.data,i.width,i.height);l.type=o.type,l.encoding=o.encoding,l.format=o.format,l.minFilter=o.minFilter,l.magFilter=o.magFilter,l.generateMipmaps=o.generateMipmaps,o.images[t]=l}6===s&&(o.needsUpdate=!0,r&&r(o))}},i,l)}for(var u=0;u<e.length;u++)l(u,t,r,i);return o},setDataType:function(e){return this.type=e,this.hdrLoader.setDataType(e),this}})},KXdl:function(e,t,r){"use strict";var n=r("6+nK"),i=r("Ah8h"),o=r("fcDU"),a={defines:{KERNEL_SIZE_FLOAT:"25.0",KERNEL_SIZE_INT:"25"},uniforms:{tDiffuse:{value:null},uImageIncrement:{value:new n.Vector2(.001953125,0)},cKernel:{value:[]}},vertexShader:["uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","\tvUv = uv - ( ( KERNEL_SIZE_FLOAT - 1.0 ) / 2.0 ) * uImageIncrement;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float cKernel[ KERNEL_SIZE_INT ];","uniform sampler2D tDiffuse;","uniform vec2 uImageIncrement;","varying vec2 vUv;","void main() {","\tvec2 imageCoord = vUv;","\tvec4 sum = vec4( 0.0, 0.0, 0.0, 0.0 );","\tfor( int i = 0; i < KERNEL_SIZE_INT; i ++ ) {","\t\tsum += texture2D( tDiffuse, imageCoord ) * cKernel[ i ];","\t\timageCoord += uImageIncrement;","\t}","\tgl_FragColor = sum;","}"].join("\n"),buildKernel:function(e){function t(e,t){return Math.exp(-e*e/(2*t*t))}var r,n,i,o,a=2*Math.ceil(3*e)+1;for(a>25&&(a=25),o=.5*(a-1),n=new Array(a),i=0,r=0;r<a;++r)n[r]=t(r-o,e),i+=n[r];for(r=0;r<a;++r)n[r]/=i;return n}};r.d(t,"a",function(){return s});var s=function e(t,r,s,l){i.a.call(this),t=void 0!==t?t:1,r=void 0!==r?r:25,s=void 0!==s?s:4,l=void 0!==l?l:256;var u={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat};this.renderTargetX=new n.WebGLRenderTarget(l,l,u),this.renderTargetX.texture.name="BloomPass.x",this.renderTargetY=new n.WebGLRenderTarget(l,l,u),this.renderTargetY.texture.name="BloomPass.y",void 0===o.a&&console.error("BloomPass relies on CopyShader");var c=o.a;this.copyUniforms=n.UniformsUtils.clone(c.uniforms),this.copyUniforms.opacity.value=t,this.materialCopy=new n.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:c.vertexShader,fragmentShader:c.fragmentShader,blending:n.AdditiveBlending,transparent:!0}),void 0===a&&console.error("BloomPass relies on ConvolutionShader");var h=a;this.convolutionUniforms=n.UniformsUtils.clone(h.uniforms),this.convolutionUniforms.uImageIncrement.value=e.blurX,this.convolutionUniforms.cKernel.value=a.buildKernel(s),this.materialConvolution=new n.ShaderMaterial({uniforms:this.convolutionUniforms,vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,defines:{KERNEL_SIZE_FLOAT:r.toFixed(1),KERNEL_SIZE_INT:r.toFixed(0)}}),this.needsSwap=!1,this.fsQuad=new i.a.FullScreenQuad(null)};s.prototype=Object.assign(Object.create(i.a.prototype),{constructor:s,render:function(e,t,r,n,i){i&&e.state.buffers.stencil.setTest(!1),this.fsQuad.material=this.materialConvolution,this.convolutionUniforms.tDiffuse.value=r.texture,this.convolutionUniforms.uImageIncrement.value=s.blurX,e.setRenderTarget(this.renderTargetX),e.clear(),this.fsQuad.render(e),this.convolutionUniforms.tDiffuse.value=this.renderTargetX.texture,this.convolutionUniforms.uImageIncrement.value=s.blurY,e.setRenderTarget(this.renderTargetY),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetY.texture,i&&e.state.buffers.stencil.setTest(!0),e.setRenderTarget(r),this.clear&&e.clear(),this.fsQuad.render(e)}}),s.blurX=new n.Vector2(.001953125,0),s.blurY=new n.Vector2(0,.001953125)},KkAi:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("hwmT");function i(e){n.a.call(this,"f"),this.value=e||0}i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,i.prototype.nodeType="Float",i.prototype.generateReadonly=function(e,t,r,n){return e.format(this.value+(this.value%1?"":".0"),n,t)},i.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.value=e.value,this},i.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t}},LtYT:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("/nNp"),i=r("6FbT");function o(e){n.a.call(this,"v3"),this.scope=e||o.VIEW}o.LOCAL="local",o.WORLD="world",o.VIEW="view",o.prototype=Object.create(n.a.prototype),o.prototype.constructor=o,o.prototype.nodeType="Normal",o.prototype.getShared=function(){return this.scope===o.WORLD},o.prototype.build=function(e,t,r,i){var o=e.context[this.scope+"Normal"];return o?o.build(e,t,r,i):n.a.prototype.build.call(this,e,t,r)},o.prototype.generate=function(e,t){var r;switch(this.scope){case o.VIEW:r=e.isShader("vertex")?"transformedNormal":"geometryNormal";break;case o.LOCAL:e.isShader("vertex")?r="objectNormal":(e.requires.normal=!0,r="vObjectNormal");break;case o.WORLD:e.isShader("vertex")?r="inverseTransformDirection( transformedNormal, viewMatrix ).xyz":(e.requires.worldNormal=!0,r="vWNormal")}return e.format(r,this.getType(e),t)},o.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.scope=e.scope,this},o.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},i.a.addKeyword("viewNormal",function(){return new o(o.VIEW)}),i.a.addKeyword("localNormal",function(){return new o(o.NORMAL)}),i.a.addKeyword("worldNormal",function(){return new o(o.WORLD)})},NAKL:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("6+nK"),i=r("9icu"),o=function(e){n.DataTextureLoader.call(this,e),this.type=n.FloatType};o.prototype=Object.assign(Object.create(n.DataTextureLoader.prototype),{constructor:o,parse:function(e){var t=65536,r=t>>3,o=14,a=65537,s=1<<o,l=s-1,u=32768,c=65535,h=59,d=63,p=2+d-h,f=8,m=4,v=4,g=2,y=1,b=0,w=1,x=0,_=1,T=2,A=Math.pow(2.7182818,2.2),S=new DataView(new ArrayBuffer(8));function E(e){if(0===e)return[e,0];S.setFloat64(0,e);var t=S.getUint32(0)>>>20&2047;0===t&&(S.setFloat64(0,e*Math.pow(2,64)),t=(S.getUint32(0)>>>20&2047)-64);var r=t-1022;return[function(e,t){for(var r=Math.min(3,Math.ceil(Math.abs(t)/1023)),n=e,i=0;i<r;i++)n*=Math.pow(2,Math.floor((t+i)/r));return n}(e,-r),r]}var C={l:0,c:0,lc:0};function M(e,t,r,n,i){for(;r<e;)t=t<<8|oe(n,i),r+=8;r-=e,C.l=t>>r&(1<<e)-1,C.c=t,C.lc=r}var N=new Array(59);function O(e,t,r,n,i,o,s){for(var l=r,u=0,c=0;i<=o;i++){if(l.value-r.value>n)return!1;M(6,u,c,e,l);var f=C.l;if(u=C.c,c=C.lc,s[i]=f,f==d){if(l.value-r.value>n)throw"Something wrong with hufUnpackEncTable";M(8,u,c,e,l);var m=C.l+p;if(u=C.c,c=C.lc,i+m>o+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)s[i++]=0;i--}else if(f>=h){if(i+(m=f-h+2)>o+1)throw"Something wrong with hufUnpackEncTable";for(;m--;)s[i++]=0;i--}}!function(e){for(var t=0;t<=58;++t)N[t]=0;for(t=0;t<a;++t)N[e[t]]+=1;var r=0;for(t=58;t>0;--t){var n=r+N[t]>>1;N[t]=r,r=n}for(t=0;t<a;++t){var i=e[t];i>0&&(e[t]=i|N[i]++<<6)}}(s)}function R(e){return 63&e}function k(e){return e>>6}var L={c:0,lc:0};function I(e,t,r,n){e=e<<8|oe(r,n),t+=8,L.c=e,L.lc=t}var P={c:0,lc:0};function B(e,t,r,n,i,o,a,s,l,u){if(e==t){n<8&&(I(r,n,i,a),r=L.c,n=L.lc);var c=r>>(n-=8);c=new Uint8Array([c])[0];if(l.value+c>u)return!1;for(var h=s[l.value-1];c-- >0;)s[l.value++]=h}else{if(!(l.value<u))return!1;s[l.value++]=e}P.c=r,P.lc=n}function D(e){return 65535&e}function U(e){var t=D(e);return t>32767?t-65536:t}var F={a:0,b:0};function z(e,t){var r=U(e),n=U(t),i=r+(1&n)+(n>>1),o=i,a=i-n;F.a=o,F.b=a}function V(e,t){var r=D(e),n=D(t),i=r-(n>>1)&c,o=n+i-u&c;F.a=o,F.b=i}function j(e,t,r,n,i,o,a){for(var s,l=a<16384,u=r>i?i:r,c=1;c<=u;)c<<=1;for(s=c>>=1,c>>=1;c>=1;){for(var h,d,p,f,m=0,v=m+o*(i-s),g=o*c,y=o*s,b=n*c,w=n*s;m<=v;m+=y){for(var x=m,_=m+n*(r-s);x<=_;x+=w){var T=x+b,A=(S=x+g)+b;l?(z(e[x+t],e[S+t]),h=F.a,p=F.b,z(e[T+t],e[A+t]),d=F.a,f=F.b,z(h,d),e[x+t]=F.a,e[T+t]=F.b,z(p,f),e[S+t]=F.a,e[A+t]=F.b):(V(e[x+t],e[S+t]),h=F.a,p=F.b,V(e[T+t],e[A+t]),d=F.a,f=F.b,V(h,d),e[x+t]=F.a,e[T+t]=F.b,V(p,f),e[S+t]=F.a,e[A+t]=F.b)}if(r&c){var S=x+g;l?z(e[x+t],e[S+t]):V(e[x+t],e[S+t]),h=F.a,e[S+t]=F.b,e[x+t]=h}}if(i&c)for(x=m,_=m+n*(r-s);x<=_;x+=w){T=x+b;l?z(e[x+t],e[T+t]):V(e[x+t],e[T+t]),h=F.a,e[T+t]=F.b,e[x+t]=h}s=c,c>>=1}return m}function H(e,t,r,n,i,u){var c=r.value,h=ie(t,r),d=ie(t,r);r.value+=4;var p=ie(t,r);if(r.value+=4,h<0||h>=a||d<0||d>=a)throw"Something wrong with HUF_ENCSIZE";var f=new Array(a),m=new Array(s);if(function(e){for(var t=0;t<s;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(m),O(e,0,r,n-(r.value-c),h,d,f),p>8*(n-(r.value-c)))throw"Something wrong with hufUncompress";!function(e,t,r,n){for(;t<=r;t++){var i=k(e[t]),a=R(e[t]);if(i>>a)throw"Invalid table entry";if(a>o){if((c=n[i>>a-o]).len)throw"Invalid table entry";if(c.lit++,c.p){var s=c.p;c.p=new Array(c.lit);for(var l=0;l<c.lit-1;++l)c.p[l]=s[l]}else c.p=new Array(1);c.p[c.lit-1]=t}else if(a){var u=0;for(l=1<<o-a;l>0;l--){var c;if((c=n[(i<<o-a)+u]).len||c.p)throw"Invalid table entry";c.len=a,c.lit=t,u++}}}}(f,h,d,m),function(e,t,r,n,i,a,s,u,c,h){for(var d=0,p=0,f=u,m=Math.trunc(i.value+(a+7)/8);i.value<m;)for(I(d,p,r,i),d=L.c,p=L.lc;p>=o;)if((b=t[d>>p-o&l]).len)p-=b.len,B(b.lit,s,d,p,r,0,i,c,h,f),d=P.c,p=P.lc;else{if(!b.p)throw"hufDecode issues";var v;for(v=0;v<b.lit;v++){for(var g=R(e[b.p[v]]);p<g&&i.value<m;)I(d,p,r,i),d=L.c,p=L.lc;if(p>=g&&k(e[b.p[v]])==(d>>p-g&(1<<g)-1)){p-=g,B(b.p[v],s,d,p,r,0,i,c,h,f),d=P.c,p=P.lc;break}}if(v==b.lit)throw"hufDecode issues"}var y=8-a&7;for(d>>=y,p-=y;p>0;){var b;if(!(b=t[d<<o-p&l]).len)throw"hufDecode issues";p-=b.len,B(b.lit,s,d,p,r,0,i,c,h,f),d=P.c,p=P.lc}}(f,m,e,0,r,p,d,u,i,{value:0})}function G(e){for(var t=1;t<e.length;t++){var r=e[t-1]+e[t]-128;e[t]=r}}function X(e,t){for(var r=0,n=Math.floor((e.length+1)/2),i=0,o=e.length-1;!(i>o||(t[i++]=e[r++],i>o));)t[i++]=e[n++]}function Y(e){for(var t=e.byteLength,r=new Array,n=0,i=new DataView(e);t>0;){var o=i.getInt8(n++);if(o<0){t-=(s=-o)+1;for(var a=0;a<s;a++)r.push(i.getUint8(n++))}else{var s=o;t-=2;var l=i.getUint8(n++);for(a=0;a<s+1;a++)r.push(l)}}return r}function W(e,t,r){for(var n,i=1;i<64;)65280==(n=t[e.value])?i=64:n>>8==255?i+=255&n:(r[i]=n,i++),e.value++}function J(e,t){t[0]=ue(e[0]),t[1]=ue(e[1]),t[2]=ue(e[5]),t[3]=ue(e[6]),t[4]=ue(e[14]),t[5]=ue(e[15]),t[6]=ue(e[27]),t[7]=ue(e[28]),t[8]=ue(e[2]),t[9]=ue(e[4]),t[10]=ue(e[7]),t[11]=ue(e[13]),t[12]=ue(e[16]),t[13]=ue(e[26]),t[14]=ue(e[29]),t[15]=ue(e[42]),t[16]=ue(e[3]),t[17]=ue(e[8]),t[18]=ue(e[12]),t[19]=ue(e[17]),t[20]=ue(e[25]),t[21]=ue(e[30]),t[22]=ue(e[41]),t[23]=ue(e[43]),t[24]=ue(e[9]),t[25]=ue(e[11]),t[26]=ue(e[18]),t[27]=ue(e[24]),t[28]=ue(e[31]),t[29]=ue(e[40]),t[30]=ue(e[44]),t[31]=ue(e[53]),t[32]=ue(e[10]),t[33]=ue(e[19]),t[34]=ue(e[23]),t[35]=ue(e[32]),t[36]=ue(e[39]),t[37]=ue(e[45]),t[38]=ue(e[52]),t[39]=ue(e[54]),t[40]=ue(e[20]),t[41]=ue(e[22]),t[42]=ue(e[33]),t[43]=ue(e[38]),t[44]=ue(e[46]),t[45]=ue(e[51]),t[46]=ue(e[55]),t[47]=ue(e[60]),t[48]=ue(e[21]),t[49]=ue(e[34]),t[50]=ue(e[37]),t[51]=ue(e[47]),t[52]=ue(e[50]),t[53]=ue(e[56]),t[54]=ue(e[59]),t[55]=ue(e[61]),t[56]=ue(e[35]),t[57]=ue(e[36]),t[58]=ue(e[48]),t[59]=ue(e[49]),t[60]=ue(e[57]),t[61]=ue(e[58]),t[62]=ue(e[62]),t[63]=ue(e[63])}function q(e){for(var t=.5*Math.cos(.7853975),r=.5*Math.cos(.196349375),n=.5*Math.cos(.39269875),i=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(.981746875),a=.5*Math.cos(3*3.14159/8),s=.5*Math.cos(1.374445625),l=new Array(4),u=new Array(4),c=new Array(4),h=new Array(4),d=0;d<8;++d){var p=8*d;l[0]=n*e[p+2],l[1]=a*e[p+2],l[2]=n*e[p+6],l[3]=a*e[p+6],u[0]=r*e[p+1]+i*e[p+3]+o*e[p+5]+s*e[p+7],u[1]=i*e[p+1]-s*e[p+3]-r*e[p+5]-o*e[p+7],u[2]=o*e[p+1]-r*e[p+3]+s*e[p+5]+i*e[p+7],u[3]=s*e[p+1]-o*e[p+3]+i*e[p+5]-r*e[p+7],c[0]=t*(e[p+0]+e[p+4]),c[3]=t*(e[p+0]-e[p+4]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],h[0]=c[0]+c[1],h[1]=c[3]+c[2],h[2]=c[3]-c[2],h[3]=c[0]-c[1],e[p+0]=h[0]+u[0],e[p+1]=h[1]+u[1],e[p+2]=h[2]+u[2],e[p+3]=h[3]+u[3],e[p+4]=h[3]-u[3],e[p+5]=h[2]-u[2],e[p+6]=h[1]-u[1],e[p+7]=h[0]-u[0]}for(var f=0;f<8;++f)l[0]=n*e[16+f],l[1]=a*e[16+f],l[2]=n*e[48+f],l[3]=a*e[48+f],u[0]=r*e[8+f]+i*e[24+f]+o*e[40+f]+s*e[56+f],u[1]=i*e[8+f]-s*e[24+f]-r*e[40+f]-o*e[56+f],u[2]=o*e[8+f]-r*e[24+f]+s*e[40+f]+i*e[56+f],u[3]=s*e[8+f]-o*e[24+f]+i*e[40+f]-r*e[56+f],c[0]=t*(e[f]+e[32+f]),c[3]=t*(e[f]-e[32+f]),c[1]=l[0]+l[3],c[2]=l[1]-l[2],h[0]=c[0]+c[1],h[1]=c[3]+c[2],h[2]=c[3]-c[2],h[3]=c[0]-c[1],e[0+f]=h[0]+u[0],e[8+f]=h[1]+u[1],e[16+f]=h[2]+u[2],e[24+f]=h[3]+u[3],e[32+f]=h[3]-u[3],e[40+f]=h[2]-u[2],e[48+f]=h[1]-u[1],e[56+f]=h[0]-u[0]}function K(e){for(var t=0;t<64;++t){var r=e[0][t],n=e[1][t],i=e[2][t];e[0][t]=r+1.5747*i,e[1][t]=r-.1873*n-.4682*i,e[2][t]=r+1.8556*n}}function Q(e,t,r){for(var i=0;i<64;++i)t[r+i]=n.DataUtils.toHalfFloat(Z(e[i]))}function Z(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(A,Math.abs(e)-1)}function $(e){var t=e.array.slice(e.offset.value,e.offset.value+e.size);void 0===i.a&&console.error("THREE.EXRLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var r=new i.a(t,{resize:!0,verify:!0}),n=new Uint8Array(r.decompress().buffer),o=new Uint8Array(n.length);return G(n),X(n,o),new DataView(o.buffer)}function ee(e){var t=e.viewer,r={value:e.offset.value},n=new Uint8Array(e.width*e.lines*(fe.channels.length*e.type*g)),o={version:se(t,r),unknownUncompressedSize:se(t,r),unknownCompressedSize:se(t,r),acCompressedSize:se(t,r),dcCompressedSize:se(t,r),rleCompressedSize:se(t,r),rleUncompressedSize:se(t,r),rleRawSize:se(t,r),totalAcUncompressedCount:se(t,r),totalDcUncompressedCount:se(t,r),acCompression:se(t,r)};if(o.version<2)throw"EXRLoader.parse: "+fe.compression+" version "+o.version+" is unsupported";for(var a=new Array,s=ce(t,r)-g;s>0;){var l=te(t.buffer,r),u=ae(t,r),c=u>>2&3,h=new Int8Array([(u>>4)-1])[0],d=ae(t,r);a.push({name:l,index:h,type:d,compression:c}),s-=l.length+3}for(var p=fe.channels,f=new Array(e.channels),m=0;m<e.channels;++m){var v=f[m]={},y=p[m];v.name=y.name,v.compression=x,v.decoded=!1,v.type=y.pixelType,v.pLinear=y.pLinear,v.width=e.width,v.height=e.lines}for(var A={idx:new Array(3)},S=0;S<e.channels;++S)for(v=f[S],m=0;m<a.length;++m){var E=a[m];v.name==E.name&&(v.compression=E.compression,E.index>=0&&(A.idx[E.index]=S),v.offset=S)}if(o.acCompressedSize>0)switch(o.acCompression){case b:var C=new Uint16Array(o.totalAcUncompressedCount);H(e.array,t,r,o.acCompressedSize,C,o.totalAcUncompressedCount);break;case w:var M=e.array.slice(r.value,r.value+o.totalAcUncompressedCount),N=new i.a(M,{resize:!0,verify:!0});C=new Uint16Array(N.decompress().buffer);r.value+=o.totalAcUncompressedCount}if(o.dcCompressedSize>0){var O={array:e.array,offset:r,size:o.dcCompressedSize},R=new Uint16Array($(O).buffer);r.value+=o.dcCompressedSize}if(o.rleRawSize>0){M=e.array.slice(r.value,r.value+o.rleCompressedSize);var k=Y((N=new i.a(M,{resize:!0,verify:!0})).decompress().buffer);r.value+=o.rleCompressedSize}var L=0,I=new Array(f.length);for(m=0;m<I.length;++m)I[m]=new Array;for(var P=0;P<e.lines;++P)for(var B=0;B<f.length;++B)I[B].push(L),L+=f[B].width*e.type*g;!function(e,t,r,n,i,o){for(var a=new DataView(o.buffer),s=r[e.idx[0]].width,l=r[e.idx[0]].height,u=Math.floor(s/8),c=Math.ceil(s/8),h=Math.ceil(l/8),d=s-8*(c-1),p=l-8*(h-1),f={value:0},m=new Array(3),v=new Array(3),y=new Array(3),b=new Array(3),w=new Array(3),x=0;x<3;++x)w[x]=t[e.idx[x]],m[x]=x<1?0:m[x-1]+c*h,v[x]=new Float32Array(64),y[x]=new Uint16Array(64),b[x]=new Uint16Array(64*c);for(var _=0;_<h;++_){var T=8;_==h-1&&(T=p);for(var A=8,S=0;S<c;++S){S==c-1&&(A=d);for(var E=0;E<3;++E)y[E].fill(0),y[E][0]=i[m[E]++],W(f,n,y[E]),J(y[E],v[E]),q(v[E]);K(v);for(var C=0;C<3;++C)Q(v[C],b[C],64*S)}for(var M=0,N=0;N<3;++N){for(var O=r[e.idx[N]].type,R=8*_;R<8*_+T;++R){M=w[N][R];for(var k=0;k<u;++k){var L=64*k+8*(7&R);a.setUint16(M+0*g*O,b[N][L+0],!0),a.setUint16(M+1*g*O,b[N][L+1],!0),a.setUint16(M+2*g*O,b[N][L+2],!0),a.setUint16(M+3*g*O,b[N][L+3],!0),a.setUint16(M+4*g*O,b[N][L+4],!0),a.setUint16(M+5*g*O,b[N][L+5],!0),a.setUint16(M+6*g*O,b[N][L+6],!0),a.setUint16(M+7*g*O,b[N][L+7],!0),M+=8*g*O}}if(u!=c)for(var I=8*_;I<8*_+T;++I)for(var P=w[N][I]+8*u*g*O,B=64*u+8*(7&I),D=0;D<A;++D)a.setUint16(P+D*g*O,b[N][B+D],!0)}}for(var U=new Uint16Array(s),F=(a=new DataView(o.buffer),0);F<3;++F){r[e.idx[F]].decoded=!0;var z=r[e.idx[F]].type;if(2==r[F].type)for(var V=0;V<l;++V){for(var j=w[F][V],H=0;H<s;++H)U[H]=a.getUint16(j+H*g*z,!0);for(H=0;H<s;++H)a.setFloat32(j+H*g*z,ue(U[H]),!0)}}}(A,I,f,C,R,n);for(m=0;m<f.length;++m){if(!(v=f[m]).decoded)switch(v.compression){case T:var D=0,U=0;for(P=0;P<e.lines;++P){for(var F=I[m][D],z=0;z<v.width;++z){for(var V=0;V<g*v.type;++V)n[F++]=k[U+V*v.width*v.height];U++}D++}break;case _:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(n.buffer)}function te(e,t){for(var r=new Uint8Array(e),n=0;0!=r[t.value+n];)n+=1;var i=(new TextDecoder).decode(r.slice(t.value,t.value+n));return t.value=t.value+n+1,i}function re(e,t){var r=e.getUint32(0,!0);return t.value=t.value+f,r}function ne(e,t){var r=e.getInt32(t.value,!0);return t.value=t.value+v,r}function ie(e,t){var r=e.getUint32(t.value,!0);return t.value=t.value+v,r}function oe(e,t){var r=e[t.value];return t.value=t.value+y,r}function ae(e,t){var r=e.getUint8(t.value);return t.value=t.value+y,r}function se(e,t){var r=Number(e.getBigInt64(t.value,!0));return t.value+=f,r}function le(e,t){var r=e.getFloat32(t.value,!0);return t.value+=m,r}function ue(e){var t=(31744&e)>>10,r=1023&e;return(e>>15?-1:1)*(t?31===t?r?NaN:1/0:Math.pow(2,t-15)*(1+r/1024):r/1024*6103515625e-14)}function ce(e,t){var r=e.getUint16(t.value,!0);return t.value+=g,r}function he(e,t,r,n,i){return"string"===n||"stringvector"===n||"iccProfile"===n?function(e,t,r){var n=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+r));return t.value=t.value+r,n}(t,r,i):"chlist"===n?function(e,t,r,n){for(var i=r.value,o=[];r.value<i+n-1;){var a=te(t,r),s=ne(e,r),l=ae(e,r);r.value+=3;var u=ne(e,r),c=ne(e,r);o.push({name:a,pixelType:s,pLinear:l,xSampling:u,ySampling:c})}return r.value+=1,o}(e,t,r,i):"chromaticities"===n?function(e,t){return{redX:le(e,t),redY:le(e,t),greenX:le(e,t),greenY:le(e,t),blueX:le(e,t),blueY:le(e,t),whiteX:le(e,t),whiteY:le(e,t)}}(e,r):"compression"===n?function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][ae(e,t)]}(e,r):"box2i"===n?function(e,t){return{xMin:ie(e,t),yMin:ie(e,t),xMax:ie(e,t),yMax:ie(e,t)}}(e,r):"lineOrder"===n?function(e,t){return["INCREASING_Y"][ae(e,t)]}(e,r):"float"===n?le(e,r):"v2f"===n?function(e,t){return[le(e,t),le(e,t)]}(e,r):"v3f"===n?function(e,t){return[le(e,t),le(e,t),le(e,t)]}(e,r):"int"===n?ne(e,r):"rational"===n?function(e,t){return[ne(e,t),ie(e,t)]}(e,r):"timecode"===n?function(e,t){return[ie(e,t),ie(e,t)]}(e,r):"preview"===n?(r.value+=i,"skipped"):void(r.value+=i)}var de=new DataView(e),pe=new Uint8Array(e),fe={};de.getUint32(0,!0),de.getUint8(4,!0),de.getUint8(5,!0);for(var me={value:8},ve=!0;ve;){var ge=te(e,me);if(0==ge)ve=!1;else{var ye=te(e,me),be=he(de,e,me,ye,ie(de,me));void 0===be?console.warn("EXRLoader.parse: skipped unknown header attribute type '"+ye+"'."):fe[ge]=be}}var we,xe,_e,Te,Ae=fe.dataWindow.yMax+1;switch(fe.compression){case"NO_COMPRESSION":xe=1,we=function(e){return new DataView(e.array.buffer,e.offset.value,e.size)};break;case"RLE_COMPRESSION":xe=1,we=function(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),r=new Uint8Array(Y(t)),n=new Uint8Array(r.length);return G(r),X(r,n),new DataView(n.buffer)};break;case"ZIPS_COMPRESSION":xe=1,we=$;break;case"ZIP_COMPRESSION":xe=16,we=$;break;case"PIZ_COMPRESSION":xe=32,we=function(e){for(var n=e.viewer,i={value:e.offset.value},o=e.width*xe*(fe.channels.length*e.type),a=new Uint16Array(o),s=new Uint8Array(r),l=0,u=new Array(e.channels),c=0;c<e.channels;c++)u[c]={},u[c].start=l,u[c].end=u[c].start,u[c].nx=e.width,u[c].ny=e.lines,u[c].size=e.type,l+=u[c].nx*u[c].ny*u[c].size;var h=ce(n,i),d=ce(n,i);if(d>=r)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(h<=d)for(c=0;c<d-h+1;c++)s[c+h]=ae(n,i);var p=new Uint16Array(t),f=function(e,r){for(var n=0,i=0;i<t;++i)(0==i||e[i>>3]&1<<(7&i))&&(r[n++]=i);for(var o=n-1;n<t;)r[n++]=0;return o}(s,p),m=ie(n,i);for(H(e.array,n,i,m,a,l),c=0;c<e.channels;++c)for(var v=u[c],y=0;y<u[c].size;++y)j(a,v.start+y,v.nx,v.size,v.ny,v.nx*v.size,f);!function(e,t,r){for(var n=0;n<r;++n)t[n]=e[t[n]]}(p,a,l);for(var b=0,w=new Uint8Array(a.buffer.byteLength),x=0;x<e.lines;x++)for(var _=0;_<e.channels;_++){var T=(v=u[_]).nx*v.size,A=new Uint8Array(a.buffer,v.end*g,T*g);w.set(A,b),b+=T*g,v.end+=T}return new DataView(w.buffer)};break;case"PXR24_COMPRESSION":xe=16,we=function(e){var t=e.array.slice(e.offset.value,e.offset.value+e.size);void 0===i.a&&console.error("THREE.EXRLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");for(var r=new i.a(t,{resize:!0,verify:!0}),n=new Uint8Array(r.decompress().buffer),o=e.lines*e.channels*e.width,a=1==e.type?new Uint16Array(o):new Uint32Array(o),s=0,l=0,u=new Array(4),c=0;c<e.lines;c++)for(var h=0;h<e.channels;h++){var d=0;switch(e.type){case 1:u[0]=s,u[1]=u[0]+e.width,s=u[1]+e.width;for(var p=0;p<e.width;++p)d+=n[u[0]++]<<8|n[u[1]++],a[l]=d,l++;break;case 2:u[0]=s,u[1]=u[0]+e.width,u[2]=u[1]+e.width,s=u[2]+e.width;for(var f=0;f<e.width;++f)d+=n[u[0]++]<<24|n[u[1]++]<<16|n[u[2]++]<<8,a[l]=d,l++}}return new DataView(a.buffer)};break;case"DWAA_COMPRESSION":xe=32,we=ee;break;case"DWAB_COMPRESSION":xe=256,we=ee;break;default:throw"EXRLoader.parse: "+fe.compression+" is unsupported"}var Se=fe.channels[0].pixelType;if(1===Se)switch(this.type){case n.UnsignedByteType:case n.FloatType:Te=function(e,t){return ue(ce(e,t))},_e=g;break;case n.HalfFloatType:Te=ce,_e=g}else{if(2!==Se)throw"EXRLoader.parse: unsupported pixelType "+Se+" for "+fe.compression+".";switch(this.type){case n.UnsignedByteType:case n.FloatType:Te=le,_e=m;break;case n.HalfFloatType:Te=function(e,t){return n.DataUtils.toHalfFloat(le(e,t))},_e=m}}for(var Ee=Ae/xe,Ce=0;Ce<Ee;Ce++)re(de,me);var Me=fe.dataWindow.xMax-fe.dataWindow.xMin+1,Ne=fe.dataWindow.yMax-fe.dataWindow.yMin+1,Oe=Me*Ne*4;switch(this.type){case n.UnsignedByteType:case n.FloatType:var Re=new Float32Array(Oe);fe.channels.length<4&&Re.fill(1,0,Oe);break;case n.HalfFloatType:Re=new Uint16Array(Oe);fe.channels.length<4&&Re.fill(15360,0,Oe);break;default:console.error("THREE.EXRLoader: unsupported type: ",this.type)}for(var ke,Le,Ie={R:0,G:1,B:2,A:3},Pe={size:0,width:Me,lines:xe,offset:me,array:pe,viewer:de,type:Se,channels:fe.channels.length},Be={value:0},De=0;De<Ne/xe;De++){ke=ie(de,me),Oe=ie(de,me),Pe.lines=ke+xe>Ne?Ne-ke:xe,Pe.offset=me,Pe.size=Oe,Le=we(Pe),me.value+=Oe;for(var Ue=0;Ue<xe;Ue++){var Fe=Ue+De*xe;if(Fe>=Ne)break;for(var ze=0;ze<fe.channels.length;ze++)for(var Ve=Ie[fe.channels[ze].name],je=0;je<Me;je++){var He=Ue*(fe.channels.length*Me)+ze*Me+je;Be.value=He*_e;var Ge=Te(Le,Be);Re[4*Me*(Ne-1-Fe)+4*je+Ve]=Ge}}}if(this.type===n.UnsignedByteType){for(var Xe=void 0,Ye=void 0,We=Re.length,Je=new Uint8Array(We),qe=0;qe<Ne;++qe)for(var Ke=0;Ke<Me;++Ke){var Qe=Re[Ye=qe*Me*4+4*Ke],Ze=Re[Ye+1],$e=Re[Ye+2];if((Xe=$e>(Xe=Qe>Ze?Qe:Ze)?$e:Xe)<1e-32)Je[Ye]=Je[Ye+1]=Je[Ye+2]=Je[Ye+3]=0;else{var et=E(Xe);Xe=256*et[0]/Xe,Je[Ye]=Qe*Xe,Je[Ye+1]=Ze*Xe,Je[Ye+2]=$e*Xe,Je[Ye+3]=et[1]+128}}Re=Je}var tt=this.type===n.UnsignedByteType?n.RGBEFormat:n.RGBAFormat;return{header:fe,width:Me,height:Ne,data:Re,format:tt,type:this.type}},setDataType:function(e){return this.type=e,this},load:function(e,t,r,i){return n.DataTextureLoader.prototype.load.call(this,e,function(e,r){switch(e.type){case n.UnsignedByteType:e.encoding=n.RGBEEncoding,e.minFilter=n.NearestFilter,e.magFilter=n.NearestFilter,e.generateMipmaps=!1,e.flipY=!1;break;case n.FloatType:case n.HalfFloatType:e.encoding=n.LinearEncoding,e.minFilter=n.LinearFilter,e.magFilter=n.LinearFilter,e.generateMipmaps=!1,e.flipY=!1}t&&t(e,r)},r,i)}})},Oi88:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("/nNp"),i=r("6FbT"),o=/^\s*([a-z_0-9]+)\s([a-z_0-9]+)\s*\((.*?)\)/i,a=/[a-z_0-9]+/gi;function s(e,t,r,i,o){this.isMethod=void 0===o,this.isInterface=!1,n.a.call(this,o),this.parse(e,t,r,i)}s.prototype=Object.create(n.a.prototype),s.prototype.constructor=s,s.prototype.nodeType="Function",s.prototype.useKeywords=!0,s.prototype.getShared=function(){return!this.isMethod},s.prototype.getType=function(e){return e.getTypeByFormat(this.type)},s.prototype.getInputByName=function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]},s.prototype.getIncludeByName=function(e){for(var t=this.includes.length;t--;)if(this.includes[t].name===e)return this.includes[t]},s.prototype.generate=function(e,t){for(var r=0,n=this.src,o=0;o<this.includes.length;o++)e.include(this.includes[o],this);for(var s in this.extensions)e.extensions[s]=!0;for(var l=[];u=a.exec(this.src);)l.push(u);for(o=0;o<l.length;o++){var u,c=(u=l[o])[0],h=!this.isMethod||!this.getInputByName(c),d=c;if(this.keywords[c]||this.useKeywords&&h&&i.a.containsKeyword(c)){var p=this.keywords[c];if(!p){var f=i.a.getKeywordData(c);f.cache&&(p=e.keywords[c]),p=p||i.a.getKeyword(c,e),f.cache&&(e.keywords[c]=p)}d=p.build(e)}c!==d&&(n=n.substring(0,u.index+r)+d+n.substring(u.index+c.length+r),r+=d.length-c.length),void 0===this.getIncludeByName(d)&&i.a.contains(d)&&e.include(i.a.get(d))}return"source"===t?n:this.isMethod?(this.isInterface||e.include(this,!1,n),this.name):e.format("( "+n+" )",this.getType(e),t)},s.prototype.parse=function(e,t,r,n){if(this.src=e||"",this.includes=t||[],this.extensions=r||{},this.keywords=n||{},this.isMethod){var i=this.src.match(o);if(this.inputs=[],i&&4==i.length){this.type=i[1],this.name=i[2];var s=i[3].match(a);if(s)for(var l=0;l<s.length;){var u,c,h=s[l++];"in"===h||"out"===h||"inout"===h?u=s[l++]:(u=h,h=""),c=s[l++],this.inputs.push({name:c,type:u,qualifier:h})}this.isInterface=-1===this.src.indexOf("{")}else this.type="",this.name=""}},s.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.isMethod=e.isMethod,this.useKeywords=e.useKeywords,this.parse(e.src,e.includes,e.extensions,e.keywords),void 0!==e.type&&(this.type=e.type),this},s.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){for(var r in(t=this.createJSONNode(e)).src=this.src,t.isMethod=this.isMethod,t.useKeywords=this.useKeywords,this.isMethod||(t.type=this.type),t.extensions=JSON.parse(JSON.stringify(this.extensions)),t.keywords={},this.keywords)t.keywords[r]=this.keywords[r].toJSON(e).uuid;if(this.includes.length){t.includes=[];for(var n=0;n<this.includes.length;n++)t.includes.push(this.includes[n].toJSON(e).uuid)}}return t}},OkqS:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(e){n.Loader.call(this,e)};i.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:i,load:function(e,t,r,i){var o=this,a=new n.Texture,s=new n.FileLoader(this.manager);return s.setResponseType("arraybuffer"),s.setPath(this.path),s.setWithCredentials(this.withCredentials),s.load(e,function(e){a.image=o.parse(e),a.needsUpdate=!0,void 0!==t&&t(a)},r,i),a},parse:function(e){var t=0,r=1,n=2,i=3,o=9,a=10,s=11,l=48,u=4,c=0,h=1,d=2,p=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var f=new Uint8Array(e),m=0,v={id_length:f[m++],colormap_type:f[m++],image_type:f[m++],colormap_index:f[m++]|f[m++]<<8,colormap_length:f[m++]|f[m++]<<8,colormap_size:f[m++],origin:[f[m++]|f[m++]<<8,f[m++]|f[m++]<<8],width:f[m++]|f[m++]<<8,height:f[m++]|f[m++]<<8,pixel_size:f[m++],flags:f[m++]};!function(e){switch(e.image_type){case r:case o:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case n:case i:case a:case s:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(v),v.id_length+m>e.length&&console.error("THREE.TGALoader: No data."),m+=v.id_length;var g=!1,y=!1,b=!1;switch(v.image_type){case o:g=!0,y=!0;break;case r:y=!0;break;case a:g=!0;break;case n:break;case s:g=!0,b=!0;break;case i:b=!0}var w="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(v.width,v.height):document.createElement("canvas");w.width=v.width,w.height=v.height;var x=w.getContext("2d"),_=x.createImageData(v.width,v.height),T=function(e,t,r,n,i){var o,a,s,l;if(a=r.pixel_size>>3,s=r.width*r.height*a,t&&(l=i.subarray(n,n+=r.colormap_length*(r.colormap_size>>3))),e){var u,c,h;o=new Uint8Array(s);for(var d=0,p=new Uint8Array(a);d<s;)if(c=1+(127&(u=i[n++])),128&u){for(h=0;h<a;++h)p[h]=i[n++];for(h=0;h<c;++h)o.set(p,d+h*a);d+=a*c}else{for(c*=a,h=0;h<c;++h)o[d+h]=i[n++];d+=c}}else o=i.subarray(n,n+=t?r.width*r.height:s);return{pixel_data:o,palettes:l}}(g,y,v,m,f);return function(e,t,r,n,i){var o,a,s,f,m,g;switch((v.flags&l)>>u){default:case d:o=0,s=1,m=t,a=0,f=1,g=r;break;case c:o=0,s=1,m=t,a=r-1,f=-1,g=-1;break;case p:o=t-1,s=-1,m=-1,a=0,f=1,g=r;break;case h:o=t-1,s=-1,m=-1,a=r-1,f=-1,g=-1}if(b)switch(v.pixel_size){case 8:!function(e,t,r,n,i,o,a,s){var l,u,c,h=0,d=v.width;for(c=t;c!==n;c+=r)for(u=i;u!==a;u+=o,h++)l=s[h],e[4*(u+d*c)+0]=l,e[4*(u+d*c)+1]=l,e[4*(u+d*c)+2]=l,e[4*(u+d*c)+3]=255}(e,a,f,g,o,s,m,n);break;case 16:!function(e,t,r,n,i,o,a,s){var l,u,c=0,h=v.width;for(u=t;u!==n;u+=r)for(l=i;l!==a;l+=o,c+=2)e[4*(l+h*u)+0]=s[c+0],e[4*(l+h*u)+1]=s[c+0],e[4*(l+h*u)+2]=s[c+0],e[4*(l+h*u)+3]=s[c+1]}(e,a,f,g,o,s,m,n);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(v.pixel_size){case 8:!function(e,t,r,n,i,o,a,s,l){var u,c,h,d=l,p=0,f=v.width;for(h=t;h!==n;h+=r)for(c=i;c!==a;c+=o,p++)u=s[p],e[4*(c+f*h)+3]=255,e[4*(c+f*h)+2]=d[3*u+0],e[4*(c+f*h)+1]=d[3*u+1],e[4*(c+f*h)+0]=d[3*u+2]}(e,a,f,g,o,s,m,n,i);break;case 16:!function(e,t,r,n,i,o,a,s){var l,u,c,h=0,d=v.width;for(c=t;c!==n;c+=r)for(u=i;u!==a;u+=o,h+=2)l=s[h+0]+(s[h+1]<<8),e[4*(u+d*c)+0]=(31744&l)>>7,e[4*(u+d*c)+1]=(992&l)>>2,e[4*(u+d*c)+2]=(31&l)>>3,e[4*(u+d*c)+3]=32768&l?0:255}(e,a,f,g,o,s,m,n);break;case 24:!function(e,t,r,n,i,o,a,s){var l,u,c=0,h=v.width;for(u=t;u!==n;u+=r)for(l=i;l!==a;l+=o,c+=3)e[4*(l+h*u)+3]=255,e[4*(l+h*u)+2]=s[c+0],e[4*(l+h*u)+1]=s[c+1],e[4*(l+h*u)+0]=s[c+2]}(e,a,f,g,o,s,m,n);break;case 32:!function(e,t,r,n,i,o,a,s){var l,u,c=0,h=v.width;for(u=t;u!==n;u+=r)for(l=i;l!==a;l+=o,c+=4)e[4*(l+h*u)+2]=s[c+0],e[4*(l+h*u)+1]=s[c+1],e[4*(l+h*u)+0]=s[c+2],e[4*(l+h*u)+3]=s[c+3]}(e,a,f,g,o,s,m,n);break;default:console.error("THREE.TGALoader: Format not supported.")}}(_.data,v.width,v.height,T.pixel_data,T.palettes),x.putImageData(_,0,0),w}})},OlMB:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(e){n.CompressedTextureLoader.call(this,e)};i.prototype=Object.assign(Object.create(n.CompressedTextureLoader.prototype),{constructor:i,parse:function(e,t){var r={mipmaps:[],width:0,height:0,format:null,mipmapCount:1};function i(e){return e.charCodeAt(0)+(e.charCodeAt(1)<<8)+(e.charCodeAt(2)<<16)+(e.charCodeAt(3)<<24)}function o(e,t,r,n){for(var i=r*n*4,o=new Uint8Array(e,t,i),a=new Uint8Array(i),s=0,l=0,u=0;u<n;u++)for(var c=0;c<r;c++){var h=o[l],d=o[++l],p=o[++l],f=o[++l];l++,a[s]=p,a[++s]=d,a[++s]=h,a[++s]=f,s++}return a}var a,s=i("DXT1"),l=i("DXT3"),u=i("DXT5"),c=i("ETC1"),h=new Int32Array(e,0,31);if(542327876!==h[0])return console.error("THREE.DDSLoader.parse: Invalid magic number in DDS header."),r;if(4&!h[20])return console.error("THREE.DDSLoader.parse: Unsupported format, must contain a FourCC code."),r;var d,p=h[21],f=!1;switch(p){case s:a=8,r.format=n.RGB_S3TC_DXT1_Format;break;case l:a=16,r.format=n.RGBA_S3TC_DXT3_Format;break;case u:a=16,r.format=n.RGBA_S3TC_DXT5_Format;break;case c:a=8,r.format=n.RGB_ETC1_Format;break;default:if(!(32===h[22]&&16711680&h[23]&&65280&h[24]&&255&h[25]&&4278190080&h[26]))return console.error("THREE.DDSLoader.parse: Unsupported FourCC code ",(d=p,String.fromCharCode(255&d,d>>8&255,d>>16&255,d>>24&255))),r;f=!0,a=64,r.format=n.RGBAFormat}r.mipmapCount=1,131072&h[2]&&!1!==t&&(r.mipmapCount=Math.max(1,h[7]));var m=h[28];if(r.isCubemap=!!(512&m),r.isCubemap&&(!(1024&m)||!(2048&m)||!(4096&m)||!(8192&m)||!(16384&m)||!(32768&m)))return console.error("THREE.DDSLoader.parse: Incomplete cubemap faces"),r;r.width=h[4],r.height=h[3];for(var v=h[1]+4,g=r.isCubemap?6:1,y=0;y<g;y++)for(var b=r.width,w=r.height,x=0;x<r.mipmapCount;x++){if(f)var _=(T=o(e,v,b,w)).length;else{_=Math.max(4,b)/4*Math.max(4,w)/4*a;var T=new Uint8Array(e,v,_)}var A={data:T,width:b,height:w};r.mipmaps.push(A),v+=_,b=Math.max(b>>1,1),w=Math.max(w>>1,1)}return r}})},PMB9:function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return o});var n=r("Ah8h"),i=function(e,t){n.a.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};i.prototype=Object.assign(Object.create(n.a.prototype),{constructor:i,render:function(e,t,r){var n,i,o=e.getContext(),a=e.state;a.buffers.color.setMask(!1),a.buffers.depth.setMask(!1),a.buffers.color.setLocked(!0),a.buffers.depth.setLocked(!0),this.inverse?(n=0,i=1):(n=1,i=0),a.buffers.stencil.setTest(!0),a.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),a.buffers.stencil.setFunc(o.ALWAYS,n,4294967295),a.buffers.stencil.setClear(i),a.buffers.stencil.setLocked(!0),e.setRenderTarget(r),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),a.buffers.color.setLocked(!1),a.buffers.depth.setLocked(!1),a.buffers.stencil.setLocked(!1),a.buffers.stencil.setFunc(o.EQUAL,1,4294967295),a.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),a.buffers.stencil.setLocked(!0)}});var o=function(){n.a.call(this),this.needsSwap=!1};o.prototype=Object.create(n.a.prototype),Object.assign(o.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}})},QEtz:function(e,t,r){"use strict";r.d(t,"a",function(){return ue});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};function i(e,t){var r=e.__state.conversionName.toString(),n=Math.round(e.r),i=Math.round(e.g),o=Math.round(e.b),a=e.a,s=Math.round(e.h),l=e.s.toFixed(1),u=e.v.toFixed(1);if(t||"THREE_CHAR_HEX"===r||"SIX_CHAR_HEX"===r){for(var c=e.hex.toString(16);c.length<6;)c="0"+c;return"#"+c}return"CSS_RGB"===r?"rgb("+n+","+i+","+o+")":"CSS_RGBA"===r?"rgba("+n+","+i+","+o+","+a+")":"HEX"===r?"0x"+e.hex.toString(16):"RGB_ARRAY"===r?"["+n+","+i+","+o+"]":"RGBA_ARRAY"===r?"["+n+","+i+","+o+","+a+"]":"RGB_OBJ"===r?"{r:"+n+",g:"+i+",b:"+o+"}":"RGBA_OBJ"===r?"{r:"+n+",g:"+i+",b:"+o+",a:"+a+"}":"HSV_OBJ"===r?"{h:"+s+",s:"+l+",v:"+u+"}":"HSVA_OBJ"===r?"{h:"+s+",s:"+l+",v:"+u+",a:"+a+"}":"unknown format"}var o=Array.prototype.forEach,a=Array.prototype.slice,s={BREAK:{},extend:function(e){return this.each(a.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(r){this.isUndefined(t[r])||(e[r]=t[r])}.bind(this))},this),e},defaults:function(e){return this.each(a.call(arguments,1),function(t){(this.isObject(t)?Object.keys(t):[]).forEach(function(r){this.isUndefined(e[r])&&(e[r]=t[r])}.bind(this))},this),e},compose:function(){var e=a.call(arguments);return function(){for(var t=a.call(arguments),r=e.length-1;r>=0;r--)t=[e[r].apply(this,t)];return t[0]}},each:function(e,t,r){if(e)if(o&&e.forEach&&e.forEach===o)e.forEach(t,r);else if(e.length===e.length+0){var n,i=void 0;for(i=0,n=e.length;i<n;i++)if(i in e&&t.call(r,e[i],i)===this.BREAK)return}else for(var a in e)if(t.call(r,e[a],a)===this.BREAK)return},defer:function(e){setTimeout(e,0)},debounce:function(e,t,r){var n=void 0;return function(){var i=this,o=arguments;var a=r||!n;clearTimeout(n),n=setTimeout(function(){n=null,r||e.apply(i,o)},t),a&&e.apply(i,o)}},toArray:function(e){return e.toArray?e.toArray():a.call(e)},isUndefined:function(e){return void 0===e},isNull:function(e){return null===e},isNaN:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){return isNaN(e)}),isArray:Array.isArray||function(e){return e.constructor===Array},isObject:function(e){return e===Object(e)},isNumber:function(e){return e===e+0},isString:function(e){return e===e+""},isBoolean:function(e){return!1===e||!0===e},isFunction:function(e){return e instanceof Function}},l=[{litmus:s.isString,conversions:{THREE_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9])([A-F0-9])([A-F0-9])$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString()+t[1].toString()+t[2].toString()+t[2].toString()+t[3].toString()+t[3].toString(),0)}},write:i},SIX_CHAR_HEX:{read:function(e){var t=e.match(/^#([A-F0-9]{6})$/i);return null!==t&&{space:"HEX",hex:parseInt("0x"+t[1].toString(),0)}},write:i},CSS_RGB:{read:function(e){var t=e.match(/^rgb\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3])}},write:i},CSS_RGBA:{read:function(e){var t=e.match(/^rgba\(\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*,\s*(.+)\s*\)/);return null!==t&&{space:"RGB",r:parseFloat(t[1]),g:parseFloat(t[2]),b:parseFloat(t[3]),a:parseFloat(t[4])}},write:i}}},{litmus:s.isNumber,conversions:{HEX:{read:function(e){return{space:"HEX",hex:e,conversionName:"HEX"}},write:function(e){return e.hex}}}},{litmus:s.isArray,conversions:{RGB_ARRAY:{read:function(e){return 3===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2]}},write:function(e){return[e.r,e.g,e.b]}},RGBA_ARRAY:{read:function(e){return 4===e.length&&{space:"RGB",r:e[0],g:e[1],b:e[2],a:e[3]}},write:function(e){return[e.r,e.g,e.b,e.a]}}}},{litmus:s.isObject,conversions:{RGBA_OBJ:{read:function(e){return!!(s.isNumber(e.r)&&s.isNumber(e.g)&&s.isNumber(e.b)&&s.isNumber(e.a))&&{space:"RGB",r:e.r,g:e.g,b:e.b,a:e.a}},write:function(e){return{r:e.r,g:e.g,b:e.b,a:e.a}}},RGB_OBJ:{read:function(e){return!!(s.isNumber(e.r)&&s.isNumber(e.g)&&s.isNumber(e.b))&&{space:"RGB",r:e.r,g:e.g,b:e.b}},write:function(e){return{r:e.r,g:e.g,b:e.b}}},HSVA_OBJ:{read:function(e){return!!(s.isNumber(e.h)&&s.isNumber(e.s)&&s.isNumber(e.v)&&s.isNumber(e.a))&&{space:"HSV",h:e.h,s:e.s,v:e.v,a:e.a}},write:function(e){return{h:e.h,s:e.s,v:e.v,a:e.a}}},HSV_OBJ:{read:function(e){return!!(s.isNumber(e.h)&&s.isNumber(e.s)&&s.isNumber(e.v))&&{space:"HSV",h:e.h,s:e.s,v:e.v}},write:function(e){return{h:e.h,s:e.s,v:e.v}}}}}],u=void 0,c=void 0,h=function(){c=!1;var e=arguments.length>1?s.toArray(arguments):arguments[0];return s.each(l,function(t){if(t.litmus(e))return s.each(t.conversions,function(t,r){if(u=t.read(e),!1===c&&!1!==u)return c=u,u.conversionName=r,u.conversion=t,s.BREAK}),s.BREAK}),c},d=void 0,p={hsv_to_rgb:function(e,t,r){var n=Math.floor(e/60)%6,i=e/60-Math.floor(e/60),o=r*(1-t),a=r*(1-i*t),s=r*(1-(1-i)*t),l=[[r,s,o],[a,r,o],[o,r,s],[o,a,r],[s,o,r],[r,o,a]][n];return{r:255*l[0],g:255*l[1],b:255*l[2]}},rgb_to_hsv:function(e,t,r){var n=Math.min(e,t,r),i=Math.max(e,t,r),o=i-n,a=void 0;return 0===i?{h:NaN,s:0,v:0}:(a=e===i?(t-r)/o:t===i?2+(r-e)/o:4+(e-t)/o,(a/=6)<0&&(a+=1),{h:360*a,s:o/i,v:i/255})},rgb_to_hex:function(e,t,r){var n=this.hex_with_component(0,2,e);return n=this.hex_with_component(n,1,t),n=this.hex_with_component(n,0,r)},component_from_hex:function(e,t){return e>>8*t&255},hex_with_component:function(e,t,r){return r<<(d=8*t)|e&~(255<<d)}},f="function"==typeof Symbol&&"symbol"===n(Symbol.iterator)?function(e){return void 0===e?"undefined":n(e)}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":void 0===e?"undefined":n(e)},m=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},v=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),g=function e(t,r,n){null===t&&(t=Function.prototype);var i=Object.getOwnPropertyDescriptor(t,r);if(void 0===i){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,r,n)}if("value"in i)return i.value;var a=i.get;return void 0!==a?a.call(n):void 0},y=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+(void 0===t?"undefined":n(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},b=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==(void 0===t?"undefined":n(t))&&"function"!=typeof t?e:t},w=function(){function e(){if(m(this,e),this.__state=h.apply(this,arguments),!1===this.__state)throw new Error("Failed to interpret color arguments");this.__state.a=this.__state.a||1}return v(e,[{key:"toString",value:function(){return i(this)}},{key:"toHexString",value:function(){return i(this,!0)}},{key:"toOriginal",value:function(){return this.__state.conversion.write(this)}}]),e}();function x(e,t,r){Object.defineProperty(e,t,{get:function(){return"RGB"===this.__state.space?this.__state[t]:(w.recalculateRGB(this,t,r),this.__state[t])},set:function(e){"RGB"!==this.__state.space&&(w.recalculateRGB(this,t,r),this.__state.space="RGB"),this.__state[t]=e}})}function _(e,t){Object.defineProperty(e,t,{get:function(){return"HSV"===this.__state.space?this.__state[t]:(w.recalculateHSV(this),this.__state[t])},set:function(e){"HSV"!==this.__state.space&&(w.recalculateHSV(this),this.__state.space="HSV"),this.__state[t]=e}})}w.recalculateRGB=function(e,t,r){if("HEX"===e.__state.space)e.__state[t]=p.component_from_hex(e.__state.hex,r);else{if("HSV"!==e.__state.space)throw new Error("Corrupted color state");s.extend(e.__state,p.hsv_to_rgb(e.__state.h,e.__state.s,e.__state.v))}},w.recalculateHSV=function(e){var t=p.rgb_to_hsv(e.r,e.g,e.b);s.extend(e.__state,{s:t.s,v:t.v}),s.isNaN(t.h)?s.isUndefined(e.__state.h)&&(e.__state.h=0):e.__state.h=t.h},w.COMPONENTS=["r","g","b","h","s","v","hex","a"],x(w.prototype,"r",2),x(w.prototype,"g",1),x(w.prototype,"b",0),_(w.prototype,"h"),_(w.prototype,"s"),_(w.prototype,"v"),Object.defineProperty(w.prototype,"a",{get:function(){return this.__state.a},set:function(e){this.__state.a=e}}),Object.defineProperty(w.prototype,"hex",{get:function(){return"HEX"!==this.__state.space&&(this.__state.hex=p.rgb_to_hex(this.r,this.g,this.b),this.__state.space="HEX"),this.__state.hex},set:function(e){this.__state.space="HEX",this.__state.hex=e}});var T=function(){function e(t,r){m(this,e),this.initialValue=t[r],this.domElement=document.createElement("div"),this.object=t,this.property=r,this.__onChange=void 0,this.__onFinishChange=void 0}return v(e,[{key:"onChange",value:function(e){return this.__onChange=e,this}},{key:"onFinishChange",value:function(e){return this.__onFinishChange=e,this}},{key:"setValue",value:function(e){return this.object[this.property]=e,this.__onChange&&this.__onChange.call(this,e),this.updateDisplay(),this}},{key:"getValue",value:function(){return this.object[this.property]}},{key:"updateDisplay",value:function(){return this}},{key:"isModified",value:function(){return this.initialValue!==this.getValue()}}]),e}(),A={};s.each({HTMLEvents:["change"],MouseEvents:["click","mousemove","mousedown","mouseup","mouseover"],KeyboardEvents:["keydown"]},function(e,t){s.each(e,function(e){A[e]=t})});var S=/(\d+(\.\d+)?)px/;function E(e){if("0"===e||s.isUndefined(e))return 0;var t=e.match(S);return s.isNull(t)?0:parseFloat(t[1])}var C={makeSelectable:function(e,t){void 0!==e&&void 0!==e.style&&(e.onselectstart=t?function(){return!1}:function(){},e.style.MozUserSelect=t?"auto":"none",e.style.KhtmlUserSelect=t?"auto":"none",e.unselectable=t?"on":"off")},makeFullscreen:function(e,t,r){var n=r,i=t;s.isUndefined(i)&&(i=!0),s.isUndefined(n)&&(n=!0),e.style.position="absolute",i&&(e.style.left=0,e.style.right=0),n&&(e.style.top=0,e.style.bottom=0)},fakeEvent:function(e,t,r,n){var i=r||{},o=A[t];if(!o)throw new Error("Event type "+t+" not supported.");var a=document.createEvent(o);switch(o){case"MouseEvents":var l=i.x||i.clientX||0,u=i.y||i.clientY||0;a.initMouseEvent(t,i.bubbles||!1,i.cancelable||!0,window,i.clickCount||1,0,0,l,u,!1,!1,!1,!1,0,null);break;case"KeyboardEvents":var c=a.initKeyboardEvent||a.initKeyEvent;s.defaults(i,{cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:void 0,charCode:void 0}),c(t,i.bubbles||!1,i.cancelable,window,i.ctrlKey,i.altKey,i.shiftKey,i.metaKey,i.keyCode,i.charCode);break;default:a.initEvent(t,i.bubbles||!1,i.cancelable||!0)}s.defaults(a,n),e.dispatchEvent(a)},bind:function(e,t,r,n){var i=n||!1;return e.addEventListener?e.addEventListener(t,r,i):e.attachEvent&&e.attachEvent("on"+t,r),C},unbind:function(e,t,r,n){var i=n||!1;return e.removeEventListener?e.removeEventListener(t,r,i):e.detachEvent&&e.detachEvent("on"+t,r),C},addClass:function(e,t){if(void 0===e.className)e.className=t;else if(e.className!==t){var r=e.className.split(/ +/);-1===r.indexOf(t)&&(r.push(t),e.className=r.join(" ").replace(/^\s+/,"").replace(/\s+$/,""))}return C},removeClass:function(e,t){if(t)if(e.className===t)e.removeAttribute("class");else{var r=e.className.split(/ +/),n=r.indexOf(t);-1!==n&&(r.splice(n,1),e.className=r.join(" "))}else e.className=void 0;return C},hasClass:function(e,t){return new RegExp("(?:^|\\s+)"+t+"(?:\\s+|$)").test(e.className)||!1},getWidth:function(e){var t=getComputedStyle(e);return E(t["border-left-width"])+E(t["border-right-width"])+E(t["padding-left"])+E(t["padding-right"])+E(t.width)},getHeight:function(e){var t=getComputedStyle(e);return E(t["border-top-width"])+E(t["border-bottom-width"])+E(t["padding-top"])+E(t["padding-bottom"])+E(t.height)},getOffset:function(e){var t=e,r={left:0,top:0};if(t.offsetParent)do{r.left+=t.offsetLeft,r.top+=t.offsetTop,t=t.offsetParent}while(t);return r},isActive:function(e){return e===document.activeElement&&(e.type||e.href)}},M=function(e){function t(e,r){m(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),i=n;return n.__prev=n.getValue(),n.__checkbox=document.createElement("input"),n.__checkbox.setAttribute("type","checkbox"),C.bind(n.__checkbox,"change",function(){i.setValue(!i.__prev)},!1),n.domElement.appendChild(n.__checkbox),n.updateDisplay(),n}return y(t,T),v(t,[{key:"setValue",value:function(e){var r=g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),this.__prev=this.getValue(),r}},{key:"updateDisplay",value:function(){return!0===this.getValue()?(this.__checkbox.setAttribute("checked","checked"),this.__checkbox.checked=!0,this.__prev=!0):(this.__checkbox.checked=!1,this.__prev=!1),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),N=function(e){function t(e,r,n){m(this,t);var i=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),o=n,a=i;if(i.__select=document.createElement("select"),s.isArray(o)){var l={};s.each(o,function(e){l[e]=e}),o=l}return s.each(o,function(e,t){var r=document.createElement("option");r.innerHTML=t,r.setAttribute("value",e),a.__select.appendChild(r)}),i.updateDisplay(),C.bind(i.__select,"change",function(){var e=this.options[this.selectedIndex].value;a.setValue(e)}),i.domElement.appendChild(i.__select),i}return y(t,T),v(t,[{key:"setValue",value:function(e){var r=g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,e);return this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue()),r}},{key:"updateDisplay",value:function(){return C.isActive(this.__select)?this:(this.__select.value=this.getValue(),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this))}}]),t}(),O=function(e){function t(e,r){m(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),i=n;function o(){i.setValue(i.__input.value)}return n.__input=document.createElement("input"),n.__input.setAttribute("type","text"),C.bind(n.__input,"keyup",o),C.bind(n.__input,"change",o),C.bind(n.__input,"blur",function(){i.__onFinishChange&&i.__onFinishChange.call(i,i.getValue())}),C.bind(n.__input,"keydown",function(e){13===e.keyCode&&this.blur()}),n.updateDisplay(),n.domElement.appendChild(n.__input),n}return y(t,T),v(t,[{key:"updateDisplay",value:function(){return C.isActive(this.__input)||(this.__input.value=this.getValue()),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function R(e){var t=e.toString();return t.indexOf(".")>-1?t.length-t.indexOf(".")-1:0}var k=function(e){function t(e,r,n){m(this,t);var i=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),o=n||{};return i.__min=o.min,i.__max=o.max,i.__step=o.step,s.isUndefined(i.__step)?0===i.initialValue?i.__impliedStep=1:i.__impliedStep=Math.pow(10,Math.floor(Math.log(Math.abs(i.initialValue))/Math.LN10))/10:i.__impliedStep=i.__step,i.__precision=R(i.__impliedStep),i}return y(t,T),v(t,[{key:"setValue",value:function(e){var r=e;return void 0!==this.__min&&r<this.__min?r=this.__min:void 0!==this.__max&&r>this.__max&&(r=this.__max),void 0!==this.__step&&r%this.__step!=0&&(r=Math.round(r/this.__step)*this.__step),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setValue",this).call(this,r)}},{key:"min",value:function(e){return this.__min=e,this}},{key:"max",value:function(e){return this.__max=e,this}},{key:"step",value:function(e){return this.__step=e,this.__impliedStep=e,this.__precision=R(e),this}}]),t}();var L=function(e){function t(e,r,n){m(this,t);var i=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,n));i.__truncationSuspended=!1;var o=i,a=void 0;function l(){o.__onFinishChange&&o.__onFinishChange.call(o,o.getValue())}function u(e){var t=a-e.clientY;o.setValue(o.getValue()+t*o.__impliedStep),a=e.clientY}function c(){C.unbind(window,"mousemove",u),C.unbind(window,"mouseup",c),l()}return i.__input=document.createElement("input"),i.__input.setAttribute("type","text"),C.bind(i.__input,"change",function(){var e=parseFloat(o.__input.value);s.isNaN(e)||o.setValue(e)}),C.bind(i.__input,"blur",function(){l()}),C.bind(i.__input,"mousedown",function(e){C.bind(window,"mousemove",u),C.bind(window,"mouseup",c),a=e.clientY}),C.bind(i.__input,"keydown",function(e){13===e.keyCode&&(o.__truncationSuspended=!0,this.blur(),o.__truncationSuspended=!1,l())}),i.updateDisplay(),i.domElement.appendChild(i.__input),i}return y(t,k),v(t,[{key:"updateDisplay",value:function(){var e,r,n;return this.__input.value=this.__truncationSuspended?this.getValue():(e=this.getValue(),r=this.__precision,n=Math.pow(10,r),Math.round(e*n)/n),g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}();function I(e,t,r,n,i){return n+(e-t)/(r-t)*(i-n)}var P=function(e){function t(e,r,n,i,o){m(this,t);var a=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r,{min:n,max:i,step:o})),s=a;function l(e){e.preventDefault();var t=s.__background.getBoundingClientRect();return s.setValue(I(e.clientX,t.left,t.right,s.__min,s.__max)),!1}function u(){C.unbind(window,"mousemove",l),C.unbind(window,"mouseup",u),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}function c(e){var t=e.touches[0].clientX,r=s.__background.getBoundingClientRect();s.setValue(I(t,r.left,r.right,s.__min,s.__max))}function h(){C.unbind(window,"touchmove",c),C.unbind(window,"touchend",h),s.__onFinishChange&&s.__onFinishChange.call(s,s.getValue())}return a.__background=document.createElement("div"),a.__foreground=document.createElement("div"),C.bind(a.__background,"mousedown",function(e){document.activeElement.blur(),C.bind(window,"mousemove",l),C.bind(window,"mouseup",u),l(e)}),C.bind(a.__background,"touchstart",function(e){if(1!==e.touches.length)return;C.bind(window,"touchmove",c),C.bind(window,"touchend",h),c(e)}),C.addClass(a.__background,"slider"),C.addClass(a.__foreground,"slider-fg"),a.updateDisplay(),a.__background.appendChild(a.__foreground),a.domElement.appendChild(a.__background),a}return y(t,k),v(t,[{key:"updateDisplay",value:function(){var e=(this.getValue()-this.__min)/(this.__max-this.__min);return this.__foreground.style.width=100*e+"%",g(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"updateDisplay",this).call(this)}}]),t}(),B=function(e){function t(e,r,n){m(this,t);var i=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r)),o=i;return i.__button=document.createElement("div"),i.__button.innerHTML=void 0===n?"Fire":n,C.bind(i.__button,"click",function(e){return e.preventDefault(),o.fire(),!1}),C.addClass(i.__button,"button"),i.domElement.appendChild(i.__button),i}return y(t,T),v(t,[{key:"fire",value:function(){this.__onChange&&this.__onChange.call(this),this.getValue().call(this.object),this.__onFinishChange&&this.__onFinishChange.call(this,this.getValue())}}]),t}(),D=function(e){function t(e,r){m(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,r));n.__color=new w(n.getValue()),n.__temp=new w(0);var i=n;n.domElement=document.createElement("div"),C.makeSelectable(n.domElement,!1),n.__selector=document.createElement("div"),n.__selector.className="selector",n.__saturation_field=document.createElement("div"),n.__saturation_field.className="saturation-field",n.__field_knob=document.createElement("div"),n.__field_knob.className="field-knob",n.__field_knob_border="2px solid ",n.__hue_knob=document.createElement("div"),n.__hue_knob.className="hue-knob",n.__hue_field=document.createElement("div"),n.__hue_field.className="hue-field",n.__input=document.createElement("input"),n.__input.type="text",n.__input_textShadow="0 1px 1px ",C.bind(n.__input,"keydown",function(e){13===e.keyCode&&p.call(this)}),C.bind(n.__input,"blur",p),C.bind(n.__selector,"mousedown",function(){C.addClass(this,"drag").bind(window,"mouseup",function(){C.removeClass(i.__selector,"drag")})}),C.bind(n.__selector,"touchstart",function(){C.addClass(this,"drag").bind(window,"touchend",function(){C.removeClass(i.__selector,"drag")})});var o,a=document.createElement("div");function l(e){v(e),C.bind(window,"mousemove",v),C.bind(window,"touchmove",v),C.bind(window,"mouseup",c),C.bind(window,"touchend",c)}function u(e){g(e),C.bind(window,"mousemove",g),C.bind(window,"touchmove",g),C.bind(window,"mouseup",d),C.bind(window,"touchend",d)}function c(){C.unbind(window,"mousemove",v),C.unbind(window,"touchmove",v),C.unbind(window,"mouseup",c),C.unbind(window,"touchend",c),f()}function d(){C.unbind(window,"mousemove",g),C.unbind(window,"touchmove",g),C.unbind(window,"mouseup",d),C.unbind(window,"touchend",d),f()}function p(){var e=h(this.value);!1!==e?(i.__color.__state=e,i.setValue(i.__color.toOriginal())):this.value=i.__color.toString()}function f(){i.__onFinishChange&&i.__onFinishChange.call(i,i.__color.toOriginal())}function v(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__saturation_field.getBoundingClientRect(),r=e.touches&&e.touches[0]||e,n=r.clientX,o=r.clientY,a=(n-t.left)/(t.right-t.left),s=1-(o-t.top)/(t.bottom-t.top);return s>1?s=1:s<0&&(s=0),a>1?a=1:a<0&&(a=0),i.__color.v=s,i.__color.s=a,i.setValue(i.__color.toOriginal()),!1}function g(e){-1===e.type.indexOf("touch")&&e.preventDefault();var t=i.__hue_field.getBoundingClientRect(),r=1-((e.touches&&e.touches[0]||e).clientY-t.top)/(t.bottom-t.top);return r>1?r=1:r<0&&(r=0),i.__color.h=360*r,i.setValue(i.__color.toOriginal()),!1}return s.extend(n.__selector.style,{width:"122px",height:"102px",padding:"3px",backgroundColor:"#222",boxShadow:"0px 1px 3px rgba(0,0,0,0.3)"}),s.extend(n.__field_knob.style,{position:"absolute",width:"12px",height:"12px",border:n.__field_knob_border+(n.__color.v<.5?"#fff":"#000"),boxShadow:"0px 1px 3px rgba(0,0,0,0.5)",borderRadius:"12px",zIndex:1}),s.extend(n.__hue_knob.style,{position:"absolute",width:"15px",height:"2px",borderRight:"4px solid #fff",zIndex:1}),s.extend(n.__saturation_field.style,{width:"100px",height:"100px",border:"1px solid #555",marginRight:"3px",display:"inline-block",cursor:"pointer"}),s.extend(a.style,{width:"100%",height:"100%",background:"none"}),F(a,"top","rgba(0,0,0,0)","#000"),s.extend(n.__hue_field.style,{width:"15px",height:"100px",border:"1px solid #555",cursor:"ns-resize",position:"absolute",top:"3px",right:"3px"}),(o=n.__hue_field).style.background="",o.style.cssText+="background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);",o.style.cssText+="background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",o.style.cssText+="background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);",s.extend(n.__input.style,{outline:"none",textAlign:"center",color:"#fff",border:0,fontWeight:"bold",textShadow:n.__input_textShadow+"rgba(0,0,0,0.7)"}),C.bind(n.__saturation_field,"mousedown",l),C.bind(n.__saturation_field,"touchstart",l),C.bind(n.__field_knob,"mousedown",l),C.bind(n.__field_knob,"touchstart",l),C.bind(n.__hue_field,"mousedown",u),C.bind(n.__hue_field,"touchstart",u),n.__saturation_field.appendChild(a),n.__selector.appendChild(n.__field_knob),n.__selector.appendChild(n.__saturation_field),n.__selector.appendChild(n.__hue_field),n.__hue_field.appendChild(n.__hue_knob),n.domElement.appendChild(n.__input),n.domElement.appendChild(n.__selector),n.updateDisplay(),n}return y(t,T),v(t,[{key:"updateDisplay",value:function(){var e=h(this.getValue());if(!1!==e){var t=!1;s.each(w.COMPONENTS,function(r){if(!s.isUndefined(e[r])&&!s.isUndefined(this.__color.__state[r])&&e[r]!==this.__color.__state[r])return t=!0,{}},this),t&&s.extend(this.__color.__state,e)}s.extend(this.__temp.__state,this.__color.__state),this.__temp.a=1;var r=this.__color.v<.5||this.__color.s>.5?255:0,n=255-r;s.extend(this.__field_knob.style,{marginLeft:100*this.__color.s-7+"px",marginTop:100*(1-this.__color.v)-7+"px",backgroundColor:this.__temp.toHexString(),border:this.__field_knob_border+"rgb("+r+","+r+","+r+")"}),this.__hue_knob.style.marginTop=100*(1-this.__color.h/360)+"px",this.__temp.s=1,this.__temp.v=1,F(this.__saturation_field,"left","#fff",this.__temp.toHexString()),this.__input.value=this.__color.toString(),s.extend(this.__input.style,{backgroundColor:this.__color.toHexString(),color:"rgb("+r+","+r+","+r+")",textShadow:this.__input_textShadow+"rgba("+n+","+n+","+n+",.7)"})}}]),t}(),U=["-moz-","-o-","-webkit-","-ms-",""];function F(e,t,r,n){e.style.background="",s.each(U,function(i){e.style.cssText+="background: "+i+"linear-gradient("+t+", "+r+" 0%, "+n+" 100%); "})}var z=function(e,t){var r=t||document,n=document.createElement("style");n.type="text/css",n.innerHTML=e;var i=r.getElementsByTagName("head")[0];try{i.appendChild(n)}catch(e){}},V=function(e,t){var r=e[t];return s.isArray(arguments[2])||s.isObject(arguments[2])?new N(e,t,arguments[2]):s.isNumber(r)?s.isNumber(arguments[2])&&s.isNumber(arguments[3])?s.isNumber(arguments[4])?new P(e,t,arguments[2],arguments[3],arguments[4]):new P(e,t,arguments[2],arguments[3]):s.isNumber(arguments[4])?new L(e,t,{min:arguments[2],max:arguments[3],step:arguments[4]}):new L(e,t,{min:arguments[2],max:arguments[3]}):s.isString(r)?new O(e,t):s.isFunction(r)?new B(e,t,""):s.isBoolean(r)?new M(e,t):null};var j=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){setTimeout(e,1e3/60)},H=function(){function e(){m(this,e),this.backgroundElement=document.createElement("div"),s.extend(this.backgroundElement.style,{backgroundColor:"rgba(0,0,0,0.8)",top:0,left:0,display:"none",zIndex:"1000",opacity:0,WebkitTransition:"opacity 0.2s linear",transition:"opacity 0.2s linear"}),C.makeFullscreen(this.backgroundElement),this.backgroundElement.style.position="fixed",this.domElement=document.createElement("div"),s.extend(this.domElement.style,{position:"fixed",display:"none",zIndex:"1001",opacity:0,WebkitTransition:"-webkit-transform 0.2s ease-out, opacity 0.2s linear",transition:"transform 0.2s ease-out, opacity 0.2s linear"}),document.body.appendChild(this.backgroundElement),document.body.appendChild(this.domElement);var t=this;C.bind(this.backgroundElement,"click",function(){t.hide()})}return v(e,[{key:"show",value:function(){var e=this;this.backgroundElement.style.display="block",this.domElement.style.display="block",this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)",this.layout(),s.defer(function(){e.backgroundElement.style.opacity=1,e.domElement.style.opacity=1,e.domElement.style.webkitTransform="scale(1)"})}},{key:"hide",value:function(){var e=this,t=function t(){e.domElement.style.display="none",e.backgroundElement.style.display="none",C.unbind(e.domElement,"webkitTransitionEnd",t),C.unbind(e.domElement,"transitionend",t),C.unbind(e.domElement,"oTransitionEnd",t)};C.bind(this.domElement,"webkitTransitionEnd",t),C.bind(this.domElement,"transitionend",t),C.bind(this.domElement,"oTransitionEnd",t),this.backgroundElement.style.opacity=0,this.domElement.style.opacity=0,this.domElement.style.webkitTransform="scale(1.1)"}},{key:"layout",value:function(){this.domElement.style.left=window.innerWidth/2-C.getWidth(this.domElement)/2+"px",this.domElement.style.top=window.innerHeight/2-C.getHeight(this.domElement)/2+"px"}}]),e}();z(function(e){if(e&&"undefined"!=typeof window){var t=document.createElement("style");return t.setAttribute("type","text/css"),t.innerHTML=e,document.head.appendChild(t),e}}(".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\n"));var G="Default",X=function(){try{return!!window.localStorage}catch(e){return!1}}(),Y=void 0,W=!0,J=void 0,q=!1,K=[],Q=function e(t){var r=this,n=t||{};this.domElement=document.createElement("div"),this.__ul=document.createElement("ul"),this.domElement.appendChild(this.__ul),C.addClass(this.domElement,"dg"),this.__folders={},this.__controllers=[],this.__rememberedObjects=[],this.__rememberedObjectIndecesToControllers=[],this.__listening=[],n=s.defaults(n,{closeOnTop:!1,autoPlace:!0,width:e.DEFAULT_WIDTH}),n=s.defaults(n,{resizable:n.autoPlace,hideable:n.autoPlace}),s.isUndefined(n.load)?n.load={preset:G}:n.preset&&(n.load.preset=n.preset),s.isUndefined(n.parent)&&n.hideable&&K.push(this),n.resizable=s.isUndefined(n.parent)&&n.resizable,n.autoPlace&&s.isUndefined(n.scrollable)&&(n.scrollable=!0);var i,o=X&&"true"===localStorage.getItem(ne(this,"isLocal")),a=void 0,l=void 0;if(Object.defineProperties(this,{parent:{get:function(){return n.parent}},scrollable:{get:function(){return n.scrollable}},autoPlace:{get:function(){return n.autoPlace}},closeOnTop:{get:function(){return n.closeOnTop}},preset:{get:function(){return r.parent?r.getRoot().preset:n.load.preset},set:function(e){r.parent?r.getRoot().preset=e:n.load.preset=e,function(e){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].value===e.preset&&(e.__preset_select.selectedIndex=t)}(this),r.revert()}},width:{get:function(){return n.width},set:function(e){n.width=e,se(r,e)}},name:{get:function(){return n.name},set:function(e){n.name=e,l&&(l.innerHTML=n.name)}},closed:{get:function(){return n.closed},set:function(t){n.closed=t,n.closed?C.addClass(r.__ul,e.CLASS_CLOSED):C.removeClass(r.__ul,e.CLASS_CLOSED),this.onResize(),r.__closeButton&&(r.__closeButton.innerHTML=t?e.TEXT_OPEN:e.TEXT_CLOSED)}},load:{get:function(){return n.load}},useLocalStorage:{get:function(){return o},set:function(e){X&&(o=e,e?C.bind(window,"unload",a):C.unbind(window,"unload",a),localStorage.setItem(ne(r,"isLocal"),e))}}}),s.isUndefined(n.parent)){if(this.closed=n.closed||!1,C.addClass(this.domElement,e.CLASS_MAIN),C.makeSelectable(this.domElement,!1),X&&o){r.useLocalStorage=!0;var u=localStorage.getItem(ne(this,"gui"));u&&(n.load=JSON.parse(u))}this.__closeButton=document.createElement("div"),this.__closeButton.innerHTML=e.TEXT_CLOSED,C.addClass(this.__closeButton,e.CLASS_CLOSE_BUTTON),n.closeOnTop?(C.addClass(this.__closeButton,e.CLASS_CLOSE_TOP),this.domElement.insertBefore(this.__closeButton,this.domElement.childNodes[0])):(C.addClass(this.__closeButton,e.CLASS_CLOSE_BOTTOM),this.domElement.appendChild(this.__closeButton)),C.bind(this.__closeButton,"click",function(){r.closed=!r.closed})}else{void 0===n.closed&&(n.closed=!0);var c=document.createTextNode(n.name);C.addClass(c,"controller-name"),l=Z(r,c);C.addClass(this.__ul,e.CLASS_CLOSED),C.addClass(l,"title"),C.bind(l,"click",function(e){return e.preventDefault(),r.closed=!r.closed,!1}),n.closed||(this.closed=!1)}n.autoPlace&&(s.isUndefined(n.parent)&&(W&&(J=document.createElement("div"),C.addClass(J,"dg"),C.addClass(J,e.CLASS_AUTO_PLACE_CONTAINER),document.body.appendChild(J),W=!1),J.appendChild(this.domElement),C.addClass(this.domElement,e.CLASS_AUTO_PLACE)),this.parent||se(r,n.width)),this.__resizeHandler=function(){r.onResizeDebounced()},C.bind(window,"resize",this.__resizeHandler),C.bind(this.__ul,"webkitTransitionEnd",this.__resizeHandler),C.bind(this.__ul,"transitionend",this.__resizeHandler),C.bind(this.__ul,"oTransitionEnd",this.__resizeHandler),this.onResize(),n.resizable&&ae(this),a=function(){X&&"true"===localStorage.getItem(ne(r,"isLocal"))&&localStorage.setItem(ne(r,"gui"),JSON.stringify(r.getSaveObject()))},this.saveToLocalStorageIfPossible=a,n.parent||((i=r.getRoot()).width+=1,s.defer(function(){i.width-=1}))};function Z(e,t,r){var n=document.createElement("li");return t&&n.appendChild(t),r?e.__ul.insertBefore(n,r):e.__ul.appendChild(n),e.onResize(),n}function $(e){C.unbind(window,"resize",e.__resizeHandler),e.saveToLocalStorageIfPossible&&C.unbind(window,"unload",e.saveToLocalStorageIfPossible)}function ee(e,t){var r=e.__preset_select[e.__preset_select.selectedIndex];r.innerHTML=t?r.value+"*":r.value}function te(e,t){var r=e.getRoot(),n=r.__rememberedObjects.indexOf(t.object);if(-1!==n){var i=r.__rememberedObjectIndecesToControllers[n];if(void 0===i&&(i={},r.__rememberedObjectIndecesToControllers[n]=i),i[t.property]=t,r.load&&r.load.remembered){var o=r.load.remembered,a=void 0;if(o[e.preset])a=o[e.preset];else{if(!o[G])return;a=o[G]}if(a[n]&&void 0!==a[n][t.property]){var s=a[n][t.property];t.initialValue=s,t.setValue(s)}}}}function re(e,t,r,n){if(void 0===t[r])throw new Error('Object "'+t+'" has no property "'+r+'"');var i=void 0;if(n.color)i=new D(t,r);else{var o=[t,r].concat(n.factoryArgs);i=V.apply(e,o)}n.before instanceof T&&(n.before=n.before.__li),te(e,i),C.addClass(i.domElement,"c");var a=document.createElement("span");C.addClass(a,"property-name"),a.innerHTML=i.property;var l=document.createElement("div");l.appendChild(a),l.appendChild(i.domElement);var u=Z(e,l,n.before);return C.addClass(u,Q.CLASS_CONTROLLER_ROW),i instanceof D?C.addClass(u,"color"):C.addClass(u,f(i.getValue())),function(e,t,r){if(r.__li=t,r.__gui=e,s.extend(r,{options:function(t){if(arguments.length>1){var n=r.__li.nextElementSibling;return r.remove(),re(e,r.object,r.property,{before:n,factoryArgs:[s.toArray(arguments)]})}if(s.isArray(t)||s.isObject(t)){var i=r.__li.nextElementSibling;return r.remove(),re(e,r.object,r.property,{before:i,factoryArgs:[t]})}},name:function(e){return r.__li.firstElementChild.firstElementChild.innerHTML=e,r},listen:function(){return r.__gui.listen(r),r},remove:function(){return r.__gui.remove(r),r}}),r instanceof P){var n=new L(r.object,r.property,{min:r.__min,max:r.__max,step:r.__step});s.each(["updateDisplay","onChange","onFinishChange","step","min","max"],function(e){var t=r[e],i=n[e];r[e]=n[e]=function(){var e=Array.prototype.slice.call(arguments);return i.apply(n,e),t.apply(r,e)}}),C.addClass(t,"has-slider"),r.domElement.insertBefore(n.domElement,r.domElement.firstElementChild)}else if(r instanceof L){var i=function(t){if(s.isNumber(r.__min)&&s.isNumber(r.__max)){var n=r.__li.firstElementChild.firstElementChild.innerHTML,i=r.__gui.__listening.indexOf(r)>-1;r.remove();var o=re(e,r.object,r.property,{before:r.__li.nextElementSibling,factoryArgs:[r.__min,r.__max,r.__step]});return o.name(n),i&&o.listen(),o}return t};r.min=s.compose(i,r.min),r.max=s.compose(i,r.max)}else r instanceof M?(C.bind(t,"click",function(){C.fakeEvent(r.__checkbox,"click")}),C.bind(r.__checkbox,"click",function(e){e.stopPropagation()})):r instanceof B?(C.bind(t,"click",function(){C.fakeEvent(r.__button,"click")}),C.bind(t,"mouseover",function(){C.addClass(r.__button,"hover")}),C.bind(t,"mouseout",function(){C.removeClass(r.__button,"hover")})):r instanceof D&&(C.addClass(t,"color"),r.updateDisplay=s.compose(function(e){return t.style.borderLeftColor=r.__color.toString(),e},r.updateDisplay),r.updateDisplay());r.setValue=s.compose(function(t){return e.getRoot().__preset_select&&r.isModified()&&ee(e.getRoot(),!0),t},r.setValue)}(e,u,i),e.__controllers.push(i),i}function ne(e,t){return document.location.href+"."+t}function ie(e,t,r){var n=document.createElement("option");n.innerHTML=t,n.value=t,e.__preset_select.appendChild(n),r&&(e.__preset_select.selectedIndex=e.__preset_select.length-1)}function oe(e,t){t.style.display=e.useLocalStorage?"block":"none"}function ae(e){var t=void 0;function r(r){return r.preventDefault(),e.width+=t-r.clientX,e.onResize(),t=r.clientX,!1}function n(){C.removeClass(e.__closeButton,Q.CLASS_DRAG),C.unbind(window,"mousemove",r),C.unbind(window,"mouseup",n)}function i(i){return i.preventDefault(),t=i.clientX,C.addClass(e.__closeButton,Q.CLASS_DRAG),C.bind(window,"mousemove",r),C.bind(window,"mouseup",n),!1}e.__resize_handle=document.createElement("div"),s.extend(e.__resize_handle.style,{width:"6px",marginLeft:"-3px",height:"200px",cursor:"ew-resize",position:"absolute"}),C.bind(e.__resize_handle,"mousedown",i),C.bind(e.__closeButton,"mousedown",i),e.domElement.insertBefore(e.__resize_handle,e.domElement.firstElementChild)}function se(e,t){e.domElement.style.width=t+"px",e.__save_row&&e.autoPlace&&(e.__save_row.style.width=t+"px"),e.__closeButton&&(e.__closeButton.style.width=t+"px")}function le(e,t){var r={};return s.each(e.__rememberedObjects,function(n,i){var o={},a=e.__rememberedObjectIndecesToControllers[i];s.each(a,function(e,r){o[r]=t?e.initialValue:e.getValue()}),r[i]=o}),r}Q.toggleHide=function(){q=!q,s.each(K,function(e){e.domElement.style.display=q?"none":""})},Q.CLASS_AUTO_PLACE="a",Q.CLASS_AUTO_PLACE_CONTAINER="ac",Q.CLASS_MAIN="main",Q.CLASS_CONTROLLER_ROW="cr",Q.CLASS_TOO_TALL="taller-than-window",Q.CLASS_CLOSED="closed",Q.CLASS_CLOSE_BUTTON="close-button",Q.CLASS_CLOSE_TOP="close-top",Q.CLASS_CLOSE_BOTTOM="close-bottom",Q.CLASS_DRAG="drag",Q.DEFAULT_WIDTH=245,Q.TEXT_CLOSED="Close Controls",Q.TEXT_OPEN="Open Controls",Q._keydownHandler=function(e){"text"===document.activeElement.type||72!==e.which&&72!==e.keyCode||Q.toggleHide()},C.bind(window,"keydown",Q._keydownHandler,!1),s.extend(Q.prototype,{add:function(e,t){return re(this,e,t,{factoryArgs:Array.prototype.slice.call(arguments,2)})},addColor:function(e,t){return re(this,e,t,{color:!0})},remove:function(e){this.__ul.removeChild(e.__li),this.__controllers.splice(this.__controllers.indexOf(e),1);var t=this;s.defer(function(){t.onResize()})},destroy:function(){if(this.parent)throw new Error("Only the root GUI should be removed with .destroy(). For subfolders, use gui.removeFolder(folder) instead.");this.autoPlace&&J.removeChild(this.domElement);var e=this;s.each(this.__folders,function(t){e.removeFolder(t)}),C.unbind(window,"keydown",Q._keydownHandler,!1),$(this)},addFolder:function(e){if(void 0!==this.__folders[e])throw new Error('You already have a folder in this GUI by the name "'+e+'"');var t={name:e,parent:this};t.autoPlace=this.autoPlace,this.load&&this.load.folders&&this.load.folders[e]&&(t.closed=this.load.folders[e].closed,t.load=this.load.folders[e]);var r=new Q(t);this.__folders[e]=r;var n=Z(this,r.domElement);return C.addClass(n,"folder"),r},removeFolder:function(e){this.__ul.removeChild(e.domElement.parentElement),delete this.__folders[e.name],this.load&&this.load.folders&&this.load.folders[e.name]&&delete this.load.folders[e.name],$(e);var t=this;s.each(e.__folders,function(t){e.removeFolder(t)}),s.defer(function(){t.onResize()})},open:function(){this.closed=!1},close:function(){this.closed=!0},hide:function(){this.domElement.style.display="none"},show:function(){this.domElement.style.display=""},onResize:function(){var e=this.getRoot();if(e.scrollable){var t=C.getOffset(e.__ul).top,r=0;s.each(e.__ul.childNodes,function(t){e.autoPlace&&t===e.__save_row||(r+=C.getHeight(t))}),window.innerHeight-t-20<r?(C.addClass(e.domElement,Q.CLASS_TOO_TALL),e.__ul.style.height=window.innerHeight-t-20+"px"):(C.removeClass(e.domElement,Q.CLASS_TOO_TALL),e.__ul.style.height="auto")}e.__resize_handle&&s.defer(function(){e.__resize_handle.style.height=e.__ul.offsetHeight+"px"}),e.__closeButton&&(e.__closeButton.style.width=e.width+"px")},onResizeDebounced:s.debounce(function(){this.onResize()},50),remember:function(){if(s.isUndefined(Y)&&((Y=new H).domElement.innerHTML='<div id="dg-save" class="dg dialogue">\n\n  Here\'s the new load parameter for your <code>GUI</code>\'s constructor:\n\n  <textarea id="dg-new-constructor"></textarea>\n\n  <div id="dg-save-locally">\n\n    <input id="dg-local-storage" type="checkbox"/> Automatically save\n    values to <code>localStorage</code> on exit.\n\n    <div id="dg-local-explain">The values saved to <code>localStorage</code> will\n      override those passed to <code>dat.GUI</code>\'s constructor. This makes it\n      easier to work incrementally, but <code>localStorage</code> is fragile,\n      and your friends may not see the same values you do.\n\n    </div>\n\n  </div>\n\n</div>'),this.parent)throw new Error("You can only call remember on a top level GUI.");var e=this;s.each(Array.prototype.slice.call(arguments),function(t){0===e.__rememberedObjects.length&&function(e){var t=e.__save_row=document.createElement("li");C.addClass(e.domElement,"has-save"),e.__ul.insertBefore(t,e.__ul.firstChild),C.addClass(t,"save-row");var r=document.createElement("span");r.innerHTML="&nbsp;",C.addClass(r,"button gears");var n=document.createElement("span");n.innerHTML="Save",C.addClass(n,"button"),C.addClass(n,"save");var i=document.createElement("span");i.innerHTML="New",C.addClass(i,"button"),C.addClass(i,"save-as");var o=document.createElement("span");o.innerHTML="Revert",C.addClass(o,"button"),C.addClass(o,"revert");var a=e.__preset_select=document.createElement("select");e.load&&e.load.remembered?s.each(e.load.remembered,function(t,r){ie(e,r,r===e.preset)}):ie(e,G,!1);if(C.bind(a,"change",function(){for(var t=0;t<e.__preset_select.length;t++)e.__preset_select[t].innerHTML=e.__preset_select[t].value;e.preset=this.value}),t.appendChild(a),t.appendChild(r),t.appendChild(n),t.appendChild(i),t.appendChild(o),X){var l=document.getElementById("dg-local-explain"),u=document.getElementById("dg-local-storage"),c=document.getElementById("dg-save-locally");c.style.display="block","true"===localStorage.getItem(ne(e,"isLocal"))&&u.setAttribute("checked","checked"),oe(e,l),C.bind(u,"change",function(){e.useLocalStorage=!e.useLocalStorage,oe(e,l)})}var h=document.getElementById("dg-new-constructor");C.bind(h,"keydown",function(e){!e.metaKey||67!==e.which&&67!==e.keyCode||Y.hide()}),C.bind(r,"click",function(){h.innerHTML=JSON.stringify(e.getSaveObject(),void 0,2),Y.show(),h.focus(),h.select()}),C.bind(n,"click",function(){e.save()}),C.bind(i,"click",function(){var t=prompt("Enter a new preset name.");t&&e.saveAs(t)}),C.bind(o,"click",function(){e.revert()})}(e),-1===e.__rememberedObjects.indexOf(t)&&e.__rememberedObjects.push(t)}),this.autoPlace&&se(this,this.width)},getRoot:function(){for(var e=this;e.parent;)e=e.parent;return e},getSaveObject:function(){var e=this.load;return e.closed=this.closed,this.__rememberedObjects.length>0&&(e.preset=this.preset,e.remembered||(e.remembered={}),e.remembered[this.preset]=le(this)),e.folders={},s.each(this.__folders,function(t,r){e.folders[r]=t.getSaveObject()}),e},save:function(){this.load.remembered||(this.load.remembered={}),this.load.remembered[this.preset]=le(this),ee(this,!1),this.saveToLocalStorageIfPossible()},saveAs:function(e){this.load.remembered||(this.load.remembered={},this.load.remembered[G]=le(this,!0)),this.load.remembered[e]=le(this),this.preset=e,ie(this,e,!0),this.saveToLocalStorageIfPossible()},revert:function(e){s.each(this.__controllers,function(t){this.getRoot().load.remembered?te(e||this.getRoot(),t):t.setValue(t.initialValue),t.__onFinishChange&&t.__onFinishChange.call(t,t.getValue())},this),s.each(this.__folders,function(e){e.revert(e)}),e||ee(this.getRoot(),!1)},listen:function(e){var t=0===this.__listening.length;this.__listening.push(e),t&&function e(t){0!==t.length&&j.call(window,function(){e(t)});s.each(t,function(e){e.updateDisplay()})}(this.__listening)},updateDisplay:function(){s.each(this.__controllers,function(e){e.updateDisplay()}),s.each(this.__folders,function(e){e.updateDisplay()})}});var ue=Q},SZ9I:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("hwmT"),i=r("Y9dU");function o(e){i.a.call(this,void 0,e)}o.prototype=Object.create(i.a.prototype),o.prototype.constructor=o,o.prototype.nodeType="Screen",o.prototype.getUnique=function(){return!0},o.prototype.getTexture=function(e,t){return n.a.prototype.generate.call(this,e,t,this.getUuid(),"t","renderTexture")}},TUKu:function(e,t,r){"use strict";function n(e){e=e||{},this.name=e.name,this.type=e.type,this.node=e.node,this.needsUpdate=e.needsUpdate}r.d(t,"a",function(){return n}),Object.defineProperties(n.prototype,{value:{get:function(){return this.node.value},set:function(e){this.node.value=e}}})},TWUs:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(e,t){void 0===t&&(console.warn('THREE.FirstPersonControls: The second parameter "domElement" is now mandatory.'),t=document),this.object=e,this.domElement=t,this.enabled=!0,this.movementSpeed=1,this.lookSpeed=.005,this.lookVertical=!0,this.autoForward=!1,this.activeLook=!0,this.heightSpeed=!1,this.heightCoef=1,this.heightMin=0,this.heightMax=1,this.constrainVertical=!1,this.verticalMin=0,this.verticalMax=Math.PI,this.mouseDragOn=!1,this.autoSpeedFactor=0,this.mouseX=0,this.mouseY=0,this.moveForward=!1,this.moveBackward=!1,this.moveLeft=!1,this.moveRight=!1,this.viewHalfX=0,this.viewHalfY=0;var r,i=0,o=0,a=new n.Vector3,s=new n.Spherical,l=new n.Vector3;function u(e){e.preventDefault()}this.domElement!==document&&this.domElement.setAttribute("tabindex",-1),this.handleResize=function(){this.domElement===document?(this.viewHalfX=window.innerWidth/2,this.viewHalfY=window.innerHeight/2):(this.viewHalfX=this.domElement.offsetWidth/2,this.viewHalfY=this.domElement.offsetHeight/2)},this.onMouseDown=function(e){if(this.domElement!==document&&this.domElement.focus(),e.preventDefault(),e.stopPropagation(),this.activeLook)switch(e.button){case 0:this.moveForward=!0;break;case 2:this.moveBackward=!0}this.mouseDragOn=!0},this.onMouseUp=function(e){if(e.preventDefault(),e.stopPropagation(),this.activeLook)switch(e.button){case 0:this.moveForward=!1;break;case 2:this.moveBackward=!1}this.mouseDragOn=!1},this.onMouseMove=function(e){this.domElement===document?(this.mouseX=e.pageX-this.viewHalfX,this.mouseY=e.pageY-this.viewHalfY):(this.mouseX=e.pageX-this.domElement.offsetLeft-this.viewHalfX,this.mouseY=e.pageY-this.domElement.offsetTop-this.viewHalfY)},this.onKeyDown=function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!0;break;case 37:case 65:this.moveLeft=!0;break;case 40:case 83:this.moveBackward=!0;break;case 39:case 68:this.moveRight=!0;break;case 82:this.moveUp=!0;break;case 70:this.moveDown=!0}},this.onKeyUp=function(e){switch(e.keyCode){case 38:case 87:this.moveForward=!1;break;case 37:case 65:this.moveLeft=!1;break;case 40:case 83:this.moveBackward=!1;break;case 39:case 68:this.moveRight=!1;break;case 82:this.moveUp=!1;break;case 70:this.moveDown=!1}},this.lookAt=function(e,t,r){return e.isVector3?l.copy(e):l.set(e,t,r),this.object.lookAt(l),v(this),this},this.update=(r=new n.Vector3,function(e){if(!1!==this.enabled){if(this.heightSpeed){var t=n.MathUtils.clamp(this.object.position.y,this.heightMin,this.heightMax)-this.heightMin;this.autoSpeedFactor=e*(t*this.heightCoef)}else this.autoSpeedFactor=0;var a=e*this.movementSpeed;(this.moveForward||this.autoForward&&!this.moveBackward)&&this.object.translateZ(-(a+this.autoSpeedFactor)),this.moveBackward&&this.object.translateZ(a),this.moveLeft&&this.object.translateX(-a),this.moveRight&&this.object.translateX(a),this.moveUp&&this.object.translateY(a),this.moveDown&&this.object.translateY(-a);var s=e*this.lookSpeed;this.activeLook||(s=0);var l=1;this.constrainVertical&&(l=Math.PI/(this.verticalMax-this.verticalMin)),o-=this.mouseX*s,this.lookVertical&&(i-=this.mouseY*s*l),i=Math.max(-85,Math.min(85,i));var u=n.MathUtils.degToRad(90-i),c=n.MathUtils.degToRad(o);this.constrainVertical&&(u=n.MathUtils.mapLinear(u,0,Math.PI,this.verticalMin,this.verticalMax));var h=this.object.position;r.setFromSphericalCoords(1,u,c).add(h),this.object.lookAt(r)}}),this.dispose=function(){this.domElement.removeEventListener("contextmenu",u,!1),this.domElement.removeEventListener("mousedown",h,!1),this.domElement.removeEventListener("mousemove",c,!1),this.domElement.removeEventListener("mouseup",d,!1),window.removeEventListener("keydown",p,!1),window.removeEventListener("keyup",f,!1)};var c=m(this,this.onMouseMove),h=m(this,this.onMouseDown),d=m(this,this.onMouseUp),p=m(this,this.onKeyDown),f=m(this,this.onKeyUp);function m(e,t){return function(){t.apply(e,arguments)}}function v(e){var t=e.object.quaternion;a.set(0,0,-1).applyQuaternion(t),s.setFromVector3(a),i=90-n.MathUtils.radToDeg(s.phi),o=n.MathUtils.radToDeg(s.theta)}this.domElement.addEventListener("contextmenu",u,!1),this.domElement.addEventListener("mousemove",c,!1),this.domElement.addEventListener("mousedown",h,!1),this.domElement.addEventListener("mouseup",d,!1),window.addEventListener("keydown",p,!1),window.addEventListener("keyup",f,!1),this.handleResize(),v(this)}},UhQ2:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("6+nK"),i=r("hwmT"),o=r("7zw7");function a(e,t,r){i.a.call(this,"c"),this.value=e instanceof n.Color?e:new n.Color(e||0,t,r)}a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.nodeType="Color",o.a.addShortcuts(a.prototype,"value",["r","g","b"]),a.prototype.generateReadonly=function(e,t,r,n){return e.format("vec3( "+this.r+", "+this.g+", "+this.b+" )",n,t)},a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.value.copy(e),this},a.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).r=this.r,t.g=this.g,t.b=this.b,!0===this.readonly&&(t.readonly=!0)),t}},VG6x:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("aC6u");function i(e){n.a.call(this,"v4"),this.value=e}i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,i.prototype.nodeType="Raw",i.prototype.generate=function(e){var t=this.value.analyzeAndFlow(e,this.type),r=t.code+"\n";return e.isShader("vertex")?r+="gl_Position = "+t.result+";":r+="gl_FragColor = "+t.result+";",r},i.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.value=e.value,this},i.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid),t}},W171:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(e,t){t=t||{},this.enabled=!0;var r=void 0!==t.defaultThickness?t.defaultThickness:.003,i=(new n.Color).fromArray(void 0!==t.defaultColor?t.defaultColor:[0,0,0]),o=void 0!==t.defaultAlpha?t.defaultAlpha:1,a=void 0!==t.defaultKeepAlive&&t.defaultKeepAlive,s={},l=60,u={},c={},h={outlineThickness:{value:r},outlineColor:{value:i},outlineAlpha:{value:o}},d=["#include <common>","#include <uv_pars_vertex>","#include <displacementmap_pars_vertex>","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>","uniform float outlineThickness;","vec4 calculateOutline( vec4 pos, vec3 normal, vec4 skinned ) {","\tfloat thickness = outlineThickness;","\tconst float ratio = 1.0;","\tvec4 pos2 = projectionMatrix * modelViewMatrix * vec4( skinned.xyz + normal, 1.0 );","\tvec4 norm = normalize( pos - pos2 );","\treturn pos + norm * thickness * pos.w * ratio;","}","void main() {","\t#include <uv_vertex>","\t#include <beginnormal_vertex>","\t#include <morphnormal_vertex>","\t#include <skinbase_vertex>","\t#include <skinnormal_vertex>","\t#include <begin_vertex>","\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <displacementmap_vertex>","\t#include <project_vertex>","\tvec3 outlineNormal = - objectNormal;","\tgl_Position = calculateOutline( gl_Position, outlineNormal, vec4( transformed, 1.0 ) );","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\t#include <fog_vertex>","}"].join("\n"),p=["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>","uniform vec3 outlineColor;","uniform float outlineAlpha;","void main() {","\t#include <clipping_planes_fragment>","\t#include <logdepthbuf_fragment>","\tgl_FragColor = vec4( outlineColor, outlineAlpha );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","\t#include <premultiplied_alpha_fragment>","}"].join("\n");function f(e){var t=s[e.uuid];return void 0===t&&(t={material:new n.ShaderMaterial({type:"OutlineEffect",uniforms:n.UniformsUtils.merge([n.UniformsLib.fog,n.UniformsLib.displacementmap,h]),vertexShader:d,fragmentShader:p,side:n.BackSide}),used:!0,keepAlive:a,count:0},s[e.uuid]=t),t.used=!0,t.material}function m(e){var t=f(e);return u[t.uuid]=e,function(e,t){if("invisible"===e.name)return;var r=t.userData.outlineParameters;e.skinning=t.skinning,e.morphTargets=t.morphTargets,e.morphNormals=t.morphNormals,e.fog=t.fog,e.toneMapped=t.toneMapped,e.premultipliedAlpha=t.premultipliedAlpha,e.displacementMap=t.displacementMap,void 0!==r?(!1===t.visible?e.visible=!1:e.visible=void 0===r.visible||r.visible,e.transparent=void 0!==r.alpha&&r.alpha<1||t.transparent,void 0!==r.keepAlive&&(s[t.uuid].keepAlive=r.keepAlive)):(e.transparent=t.transparent,e.visible=t.visible);!0!==t.wireframe&&!1!==t.depthTest||(e.visible=!1);t.clippingPlanes&&(e.clipping=!0,e.clippingPlanes=t.clippingPlanes,e.clipIntersection=t.clipIntersection,e.clipShadows=t.clipShadows);e.version=t.version}(t,e),t}function v(e){var t=e.geometry,r=!1;return void 0!==e.geometry&&(r=!t.isBufferGeometry||void 0!==t.attributes.normal),!0===e.isMesh&&void 0!==e.material&&!0===r}function g(e){if(!1!==v(e)){if(Array.isArray(e.material))for(var t=0,r=e.material.length;t<r;t++)e.material[t]=m(e.material[t]);else e.material=m(e.material);c[e.uuid]=e.onBeforeRender,e.onBeforeRender=b}}function y(e){if(!1!==v(e)){if(Array.isArray(e.material))for(var t=0,r=e.material.length;t<r;t++)e.material[t]=u[e.material[t].uuid];else e.material=u[e.material.uuid];e.onBeforeRender=c[e.uuid]}}function b(e,t,r,n,i){var o=u[i.uuid];void 0!==o&&function(e,t){var r=t.userData.outlineParameters;e.uniforms.outlineAlpha.value=t.opacity,void 0!==r&&(void 0!==r.thickness&&(e.uniforms.outlineThickness.value=r.thickness),void 0!==r.color&&e.uniforms.outlineColor.value.fromArray(r.color),void 0!==r.alpha&&(e.uniforms.outlineAlpha.value=r.alpha));t.displacementMap&&(e.uniforms.displacementMap.value=t.displacementMap,e.uniforms.displacementScale.value=t.displacementScale,e.uniforms.displacementBias.value=t.displacementBias)}(i,o)}this.render=function(t,r){var n,i=!1;if(void 0!==arguments[2]&&(console.warn("THREE.OutlineEffect.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead."),n=arguments[2]),void 0!==arguments[3]&&(console.warn("THREE.OutlineEffect.render(): the forceClear argument has been removed. Use .clear() instead."),i=arguments[3]),void 0!==n&&e.setRenderTarget(n),i&&e.clear(),!1!==this.enabled){var o=e.autoClear;e.autoClear=this.autoClear,e.render(t,r),e.autoClear=o,this.renderOutline(t,r)}else e.render(t,r)},this.renderOutline=function(t,r){var n=e.autoClear,i=t.autoUpdate,o=t.background,a=e.shadowMap.enabled;t.autoUpdate=!1,t.background=null,e.autoClear=!1,e.shadowMap.enabled=!1,t.traverse(g),e.render(t,r),t.traverse(y),function(){for(var e,t=0,r=(e=Object.keys(u)).length;t<r;t++)u[e[t]]=void 0;for(t=0,r=(e=Object.keys(c)).length;t<r;t++)c[e[t]]=void 0;for(t=0,r=(e=Object.keys(s)).length;t<r;t++){var n=e[t];!1===s[n].used?(s[n].count++,!1===s[n].keepAlive&&s[n].count>l&&delete s[n]):(s[n].used=!1,s[n].count=0)}}(),t.autoUpdate=i,t.background=o,e.autoClear=n,e.shadowMap.enabled=a},this.autoClear=e.autoClear,this.domElement=e.domElement,this.shadowMap=e.shadowMap,this.clear=function(t,r,n){e.clear(t,r,n)},this.getPixelRatio=function(){return e.getPixelRatio()},this.setPixelRatio=function(t){e.setPixelRatio(t)},this.getSize=function(t){return e.getSize(t)},this.setSize=function(t,r,n){e.setSize(t,r,n)},this.setViewport=function(t,r,n,i){e.setViewport(t,r,n,i)},this.setScissor=function(t,r,n,i){e.setScissor(t,r,n,i)},this.setScissorTest=function(t){e.setScissorTest(t)},this.setRenderTarget=function(t){e.setRenderTarget(t)}}},W2nU:function(e,t){var r,n,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(r===setTimeout)return setTimeout(e,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(e,0);try{return r(e,0)}catch(t){try{return r.call(null,e,0)}catch(t){return r.call(this,e,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(e){r=o}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(e){n=a}}();var l,u=[],c=!1,h=-1;function d(){c&&l&&(c=!1,l.length?u=l.concat(u):h=-1,u.length&&p())}function p(){if(!c){var e=s(d);c=!0;for(var t=u.length;t;){for(l=u,u=[];++h<t;)l&&l[h].run();h=-1,t=u.length}l=null,c=!1,function(e){if(n===clearTimeout)return clearTimeout(e);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(e);try{n(e)}catch(t){try{return n.call(null,e)}catch(t){return n.call(this,e)}}}(e)}}function f(e,t){this.fun=e,this.array=t}function m(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)t[r-1]=arguments[r];u.push(new f(e,t)),1!==u.length||c||s(p)},f.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},WGeS:function(e,t,r){"use strict";var n=r("6+nK"),i=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var o=function(){function e(t,r,i,o,a){if(function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controller=r,this.handModel=t,this.envMap=null,this.handMesh=new n.Group,this.handModel.add(this.handMesh),window.XRHand){var s=void 0;a&&a.primitive&&"sphere"!==a.primitive?"box"===a.primitive&&(s=new n.BoxBufferGeometry(1,1,1)):s=new n.SphereBufferGeometry(1,10,10);for(var l=new n.MeshStandardMaterial({color:16777215,roughness:1,metalness:0}),u=new n.MeshStandardMaterial({color:10066329,roughness:1,metalness:0}),c=[window.XRHand.THUMB_PHALANX_TIP,window.XRHand.INDEX_PHALANX_TIP,window.XRHand.MIDDLE_PHALANX_TIP,window.XRHand.RING_PHALANX_TIP,window.XRHand.LITTLE_PHALANX_TIP],h=0;h<=window.XRHand.LITTLE_PHALANX_TIP;h++){var d=new n.Mesh(s,-1!==c.indexOf(h)?u:l);d.castShadow=!0,d.receiveShadow=!0,this.handMesh.add(d)}}}return i(e,[{key:"updateMesh",value:function(){for(var e=this.handMesh.children,t=this.controller.joints,r=0;r<e.length;r++){var n=e[r],i=t[r];i.visible&&(n.position.copy(i.position),n.quaternion.copy(i.quaternion),n.scale.setScalar(i.jointRadius||.008)),n.visible=i.visible}}}]),e}(),a=r("+T91"),s=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var l=function(){function e(t,r,n,i,o){var s=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.controller=r,this.handModel=t,this.bones=[];var l=new a.a,u=o&&"lowpoly"===o.model?"_low":"";l.setPath(n),l.load("OculusHand_"+("right"===i?"R":"L")+u+".fbx",function(e){s.handModel.add(e),e.scale.setScalar(.01);var t=e.getObjectByProperty("type","SkinnedMesh");t.frustumCulled=!1,t.castShadow=!0,t.receiveShadow=!0;["b_%_wrist","b_%_thumb1","b_%_thumb2","b_%_thumb3","b_%_thumb_null",null,"b_%_index1","b_%_index2","b_%_index3","b_%_index_null",null,"b_%_middle1","b_%_middle2","b_%_middle3","b_%_middlenull",null,"b_%_ring1","b_%_ring2","b_%_ring3","b_%_ring_inull","b_%_pinky0","b_%_pinky1","b_%_pinky2","b_%_pinky3","b_%_pinkynull"].forEach(function(t){if(t){var r=e.getObjectByName(t.replace(/%/g,"right"===i?"r":"l"));s.bones.push(r)}else s.bones.push(null)})})}return s(e,[{key:"updateMesh",value:function(){for(var e=this.controller.joints,t=0;t<this.bones.length;t++){var r=this.bones[t],n=e[t];if(n&&n.visible){var i=n.position;r&&(r.position.copy(i.clone().multiplyScalar(100)),r.quaternion.copy(n.quaternion))}}}}]),e}();function u(e){n.Object3D.call(this),this.controller=e,this.motionController=null,this.envMap=null,this.mesh=null}r.d(t,"a",function(){return c}),u.prototype=Object.assign(Object.create(n.Object3D.prototype),{constructor:u,updateMatrixWorld:function(e){n.Object3D.prototype.updateMatrixWorld.call(this,e),this.motionController&&this.motionController.updateMesh()}});var c=function(){function e(){this.path=""}return e.prototype={constructor:e,setPath:function(e){return this.path=e,this},createHandModel:function(e,t,r){var n=this,i=new u(e);return e.addEventListener("connected",function(a){var s=a.data;s.hand&&!i.motionController&&(i.visible=!0,i.xrInputSource=s,void 0===t||"spheres"===t?i.motionController=new o(i,e,n.path,s.handedness,{primitive:"sphere"}):"boxes"===t?i.motionController=new o(i,e,n.path,s.handedness,{primitive:"box"}):"oculus"===t&&(i.motionController=new l(i,e,n.path,s.handedness,r)))}),e.addEventListener("disconnected",function(){}),i}},e}()},WcTe:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("hwmT"),i=r("yA4I"),o=r("Dfdy"),a=r("nXFl");function s(e,t,r){n.a.call(this,"v4",{shared:!0}),this.value=e,this.uv=t||new i.a,this.bias=r}s.prototype=Object.create(n.a.prototype),s.prototype.constructor=s,s.prototype.nodeType="CubeTexture",s.prototype.getTexture=function(e,t){return n.a.prototype.generate.call(this,e,t,this.value.uuid,"tc")},s.prototype.generate=function(e,t){if("samplerCube"===t)return this.getTexture(e,t);var r,n=this.getTexture(e,t),i=this.uv.build(e,"v3"),s=this.bias?this.bias.build(e,"f"):void 0;void 0===s&&e.context.bias&&(s=e.context.bias.setTexture(this).build(e,"f")),r=s?"texCubeBias( "+n+", "+i+", "+s+" )":"texCube( "+n+", "+i+" )";var l={include:e.isShader("vertex"),ignoreCache:!0},u=this.getType(e);return e.addContext(l),this.colorSpace=this.colorSpace||new o.a(new a.a("",u)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(r),r=this.colorSpace.build(e,u),e.removeContext(),e.format(r,u,t)},s.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),e.value&&(this.value=e.value),this.uv=e.uv,e.bias&&(this.bias=e.bias),this},s.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.uuid,t.uv=this.uv.toJSON(e).uuid,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t}},WpOZ:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("/nNp");function i(e,t){n.a.call(this),this.setFunction(e,t)}i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,i.prototype.nodeType="FunctionCall",i.prototype.setFunction=function(e,t){this.value=e,this.inputs=t||[]},i.prototype.getFunction=function(){return this.value},i.prototype.getType=function(e){return this.value.getType(e)},i.prototype.generate=function(e,t){for(var r=this.getType(e),n=this.value,i=n.build(e,t)+"( ",o=[],a=0;a<n.inputs.length;a++){var s=n.inputs[a],l=this.inputs[a]||this.inputs[s.name];o.push(l.build(e,e.getTypeByFormat(s.type)))}return i+=o.join(", ")+" )",e.format(i,r,t)},i.prototype.copy=function(e){for(var t in n.a.prototype.copy.call(this,e),e.inputs)this.inputs[t]=e.inputs[t];return this.value=e.value,this},i.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){var r=this.value;if((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,r.inputs.length){t.inputs={};for(var n=0;n<r.inputs.length;n++){var i=r.inputs[n],o=this.inputs[n]||this.inputs[i.name];t.inputs[i.name]=o.toJSON(e).uuid}}}return t}},WvuV:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(e,t,r,i,o,a,s){var l=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,3,16,17,18,7,19,20,21,11,22,23,24,15,25,26,27,18,28,29,30,21,31,32,33,24,34,35,36,27,37,38,39,30,40,41,0,33,42,43,4,36,44,45,8,39,46,47,12,12,13,14,15,48,49,50,51,52,53,54,55,56,57,58,59,15,25,26,27,51,60,61,62,55,63,64,65,59,66,67,68,27,37,38,39,62,69,70,71,65,72,73,74,68,75,76,77,39,46,47,12,71,78,79,48,74,80,81,52,77,82,83,56,56,57,58,59,84,85,86,87,88,89,90,91,92,93,94,95,59,66,67,68,87,96,97,98,91,99,100,101,95,102,103,104,68,75,76,77,98,105,106,107,101,108,109,110,104,111,112,113,77,82,83,56,107,114,115,84,110,116,117,88,113,118,119,92,120,121,122,123,124,125,126,127,128,129,130,131,132,133,134,135,123,136,137,120,127,138,139,124,131,140,141,128,135,142,143,132,132,133,134,135,144,145,146,147,148,149,150,151,68,152,153,154,135,142,143,132,147,155,156,144,151,157,158,148,154,159,160,68,161,162,163,164,165,166,167,168,169,170,171,172,173,174,175,176,164,177,178,161,168,179,180,165,172,181,182,169,176,183,184,173,173,174,175,176,185,186,187,188,189,190,191,192,193,194,195,196,176,183,184,173,188,197,198,185,192,199,200,189,196,201,202,193,203,203,203,203,204,205,206,207,208,208,208,208,209,210,211,212,203,203,203,203,207,213,214,215,208,208,208,208,212,216,217,218,203,203,203,203,215,219,220,221,208,208,208,208,218,222,223,224,203,203,203,203,221,225,226,204,208,208,208,208,224,227,228,209,209,210,211,212,229,230,231,232,233,234,235,236,237,238,239,240,212,216,217,218,232,241,242,243,236,244,245,246,240,247,248,249,218,222,223,224,243,250,251,252,246,253,254,255,249,256,257,258,224,227,228,209,252,259,260,229,255,261,262,233,258,263,264,237,265,265,265,265,266,267,268,269,270,271,272,273,92,119,118,113,265,265,265,265,269,274,275,276,273,277,278,279,113,112,111,104,265,265,265,265,276,280,281,282,279,283,284,285,104,103,102,95,265,265,265,265,282,286,287,266,285,288,289,270,95,94,93,92],u=[1.4,0,2.4,1.4,-.784,2.4,.784,-1.4,2.4,0,-1.4,2.4,1.3375,0,2.53125,1.3375,-.749,2.53125,.749,-1.3375,2.53125,0,-1.3375,2.53125,1.4375,0,2.53125,1.4375,-.805,2.53125,.805,-1.4375,2.53125,0,-1.4375,2.53125,1.5,0,2.4,1.5,-.84,2.4,.84,-1.5,2.4,0,-1.5,2.4,-.784,-1.4,2.4,-1.4,-.784,2.4,-1.4,0,2.4,-.749,-1.3375,2.53125,-1.3375,-.749,2.53125,-1.3375,0,2.53125,-.805,-1.4375,2.53125,-1.4375,-.805,2.53125,-1.4375,0,2.53125,-.84,-1.5,2.4,-1.5,-.84,2.4,-1.5,0,2.4,-1.4,.784,2.4,-.784,1.4,2.4,0,1.4,2.4,-1.3375,.749,2.53125,-.749,1.3375,2.53125,0,1.3375,2.53125,-1.4375,.805,2.53125,-.805,1.4375,2.53125,0,1.4375,2.53125,-1.5,.84,2.4,-.84,1.5,2.4,0,1.5,2.4,.784,1.4,2.4,1.4,.784,2.4,.749,1.3375,2.53125,1.3375,.749,2.53125,.805,1.4375,2.53125,1.4375,.805,2.53125,.84,1.5,2.4,1.5,.84,2.4,1.75,0,1.875,1.75,-.98,1.875,.98,-1.75,1.875,0,-1.75,1.875,2,0,1.35,2,-1.12,1.35,1.12,-2,1.35,0,-2,1.35,2,0,.9,2,-1.12,.9,1.12,-2,.9,0,-2,.9,-.98,-1.75,1.875,-1.75,-.98,1.875,-1.75,0,1.875,-1.12,-2,1.35,-2,-1.12,1.35,-2,0,1.35,-1.12,-2,.9,-2,-1.12,.9,-2,0,.9,-1.75,.98,1.875,-.98,1.75,1.875,0,1.75,1.875,-2,1.12,1.35,-1.12,2,1.35,0,2,1.35,-2,1.12,.9,-1.12,2,.9,0,2,.9,.98,1.75,1.875,1.75,.98,1.875,1.12,2,1.35,2,1.12,1.35,1.12,2,.9,2,1.12,.9,2,0,.45,2,-1.12,.45,1.12,-2,.45,0,-2,.45,1.5,0,.225,1.5,-.84,.225,.84,-1.5,.225,0,-1.5,.225,1.5,0,.15,1.5,-.84,.15,.84,-1.5,.15,0,-1.5,.15,-1.12,-2,.45,-2,-1.12,.45,-2,0,.45,-.84,-1.5,.225,-1.5,-.84,.225,-1.5,0,.225,-.84,-1.5,.15,-1.5,-.84,.15,-1.5,0,.15,-2,1.12,.45,-1.12,2,.45,0,2,.45,-1.5,.84,.225,-.84,1.5,.225,0,1.5,.225,-1.5,.84,.15,-.84,1.5,.15,0,1.5,.15,1.12,2,.45,2,1.12,.45,.84,1.5,.225,1.5,.84,.225,.84,1.5,.15,1.5,.84,.15,-1.6,0,2.025,-1.6,-.3,2.025,-1.5,-.3,2.25,-1.5,0,2.25,-2.3,0,2.025,-2.3,-.3,2.025,-2.5,-.3,2.25,-2.5,0,2.25,-2.7,0,2.025,-2.7,-.3,2.025,-3,-.3,2.25,-3,0,2.25,-2.7,0,1.8,-2.7,-.3,1.8,-3,-.3,1.8,-3,0,1.8,-1.5,.3,2.25,-1.6,.3,2.025,-2.5,.3,2.25,-2.3,.3,2.025,-3,.3,2.25,-2.7,.3,2.025,-3,.3,1.8,-2.7,.3,1.8,-2.7,0,1.575,-2.7,-.3,1.575,-3,-.3,1.35,-3,0,1.35,-2.5,0,1.125,-2.5,-.3,1.125,-2.65,-.3,.9375,-2.65,0,.9375,-2,-.3,.9,-1.9,-.3,.6,-1.9,0,.6,-3,.3,1.35,-2.7,.3,1.575,-2.65,.3,.9375,-2.5,.3,1.125,-1.9,.3,.6,-2,.3,.9,1.7,0,1.425,1.7,-.66,1.425,1.7,-.66,.6,1.7,0,.6,2.6,0,1.425,2.6,-.66,1.425,3.1,-.66,.825,3.1,0,.825,2.3,0,2.1,2.3,-.25,2.1,2.4,-.25,2.025,2.4,0,2.025,2.7,0,2.4,2.7,-.25,2.4,3.3,-.25,2.4,3.3,0,2.4,1.7,.66,.6,1.7,.66,1.425,3.1,.66,.825,2.6,.66,1.425,2.4,.25,2.025,2.3,.25,2.1,3.3,.25,2.4,2.7,.25,2.4,2.8,0,2.475,2.8,-.25,2.475,3.525,-.25,2.49375,3.525,0,2.49375,2.9,0,2.475,2.9,-.15,2.475,3.45,-.15,2.5125,3.45,0,2.5125,2.8,0,2.4,2.8,-.15,2.4,3.2,-.15,2.4,3.2,0,2.4,3.525,.25,2.49375,2.8,.25,2.475,3.45,.15,2.5125,2.9,.15,2.475,3.2,.15,2.4,2.8,.15,2.4,0,0,3.15,.8,0,3.15,.8,-.45,3.15,.45,-.8,3.15,0,-.8,3.15,0,0,2.85,.2,0,2.7,.2,-.112,2.7,.112,-.2,2.7,0,-.2,2.7,-.45,-.8,3.15,-.8,-.45,3.15,-.8,0,3.15,-.112,-.2,2.7,-.2,-.112,2.7,-.2,0,2.7,-.8,.45,3.15,-.45,.8,3.15,0,.8,3.15,-.2,.112,2.7,-.112,.2,2.7,0,.2,2.7,.45,.8,3.15,.8,.45,3.15,.112,.2,2.7,.2,.112,2.7,.4,0,2.55,.4,-.224,2.55,.224,-.4,2.55,0,-.4,2.55,1.3,0,2.55,1.3,-.728,2.55,.728,-1.3,2.55,0,-1.3,2.55,1.3,0,2.4,1.3,-.728,2.4,.728,-1.3,2.4,0,-1.3,2.4,-.224,-.4,2.55,-.4,-.224,2.55,-.4,0,2.55,-.728,-1.3,2.55,-1.3,-.728,2.55,-1.3,0,2.55,-.728,-1.3,2.4,-1.3,-.728,2.4,-1.3,0,2.4,-.4,.224,2.55,-.224,.4,2.55,0,.4,2.55,-1.3,.728,2.55,-.728,1.3,2.55,0,1.3,2.55,-1.3,.728,2.4,-.728,1.3,2.4,0,1.3,2.4,.224,.4,2.55,.4,.224,2.55,.728,1.3,2.55,1.3,.728,2.55,.728,1.3,2.4,1.3,.728,2.4,0,0,0,1.425,0,0,1.425,.798,0,.798,1.425,0,0,1.425,0,1.5,0,.075,1.5,.84,.075,.84,1.5,.075,0,1.5,.075,-.798,1.425,0,-1.425,.798,0,-1.425,0,0,-.84,1.5,.075,-1.5,.84,.075,-1.5,0,.075,-1.425,-.798,0,-.798,-1.425,0,0,-1.425,0,-1.5,-.84,.075,-.84,-1.5,.075,0,-1.5,.075,.798,-1.425,0,1.425,-.798,0,.84,-1.5,.075,1.5,-.84,.075];n.BufferGeometry.call(this),e=e||50,t=void 0!==t?Math.max(2,Math.floor(t)||10):10,r=void 0===r||r,i=void 0===i||i,o=void 0===o||o,a=void 0===a||a;var c=3.15*((s=void 0===s||s)?1:1.3)/2,h=e/c,d=r?(8*t-4)*t:0;d+=i?(16*t-4)*t:0,d+=o?40*t*t:0;var p=new Uint32Array(3*d),f=r?4:0;f+=i?8:0,f+=o?20:0,f*=(t+1)*(t+1);var m=new Float32Array(3*f),v=new Float32Array(3*f),g=new Float32Array(2*f),y=new n.Matrix4;y.set(-1,3,-3,1,3,-6,3,0,-3,3,0,0,1,0,0,0);var b,w,x,_,T,A,S,E,C,M,N,O,R,k,L,I,P=[],B=[],D=[],U=[],F=[],z=[],V=[],j=[],H=[],G=new n.Vector3,X=0,Y=0,W=new n.Vector3,J=new n.Matrix4,q=new n.Matrix4,K=new n.Vector4,Q=new n.Vector4,Z=new n.Vector4,$=new n.Vector4,ee=new n.Vector3,te=new n.Vector3,re=y.clone();re.transpose();var ne=function(e,t,r){return!(m[3*e]===m[3*t]&&m[3*e+1]===m[3*t+1]&&m[3*e+2]===m[3*t+2]||m[3*e]===m[3*r]&&m[3*e+1]===m[3*r+1]&&m[3*e+2]===m[3*r+2]||m[3*t]===m[3*r]&&m[3*t+1]===m[3*r+1]&&m[3*t+2]===m[3*r+2])};for(b=0;b<3;b++)z[b]=new n.Matrix4;var ie=r?32:28;S=t+1;for(var oe=0,ae=0,se=0,le=0,ue=0,ce=o?0:20;ce<ie;ce++)if(i||ce<20||ce>=28){for(b=0;b<3;b++){for(w=0;w<4;w++)for(x=0;x<4;x++)P[4*x+w]=u[3*l[16*ce+4*w+x]+b],a&&ce>=20&&ce<28&&2!==b&&(P[4*x+w]*=1.077),s||2!==b||(P[4*x+w]*=1.3);J.set(P[0],P[1],P[2],P[3],P[4],P[5],P[6],P[7],P[8],P[9],P[10],P[11],P[12],P[13],P[14],P[15]),q.multiplyMatrices(J,y),z[b].multiplyMatrices(re,q)}for(T=0;T<=t;T++)for(E=T/t,A=0;A<=t;A++){for(C=A/t,O=4,M=N=1;O--;)B[O]=M,D[O]=N,M*=E,N*=C,3===O?(U[O]=F[O]=0,X=Y=1):(U[O]=X*(3-O),F[O]=Y*(3-O),X*=E,Y*=C);for(K.fromArray(B),Q.fromArray(D),Z.fromArray(U),$.fromArray(F),b=0;b<3;b++)(_=K.clone()).applyMatrix4(z[b]),V[b]=_.dot(Q),(_=Z.clone()).applyMatrix4(z[b]),j[b]=_.dot(Q),(_=K.clone()).applyMatrix4(z[b]),H[b]=_.dot($);ee.fromArray(j),te.fromArray(H),G.crossVectors(te,ee),G.normalize(),0===V[0]&&0===V[1]?W.set(0,V[2]>c?1:-1,0):W.set(G.x,G.z,-G.y),m[ae++]=h*V[0],m[ae++]=h*(V[2]-c),m[ae++]=-h*V[1],v[se++]=W.x,v[se++]=W.y,v[se++]=W.z,g[le++]=1-C,g[le++]=1-E}for(T=0;T<t;T++)for(A=0;A<t;A++)I=(R=oe*S*S+T*S+A)+S,ne(R,k=R+1,L=k+S)&&(p[ue++]=R,p[ue++]=k,p[ue++]=L),ne(R,L,I)&&(p[ue++]=R,p[ue++]=L,p[ue++]=I);oe++}this.setIndex(new n.BufferAttribute(p,1)),this.setAttribute("position",new n.BufferAttribute(m,3)),this.setAttribute("normal",new n.BufferAttribute(v,3)),this.setAttribute("uv",new n.BufferAttribute(g,2)),this.computeBoundingSphere()};i.prototype=Object.create(n.BufferGeometry.prototype),i.prototype.constructor=i},XoyM:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("6+nK"),i=r("Ah8h"),o=r("fcDU"),a=function(e,t,r,a){i.a.call(this),this.scene=e,this.camera=t,this.sampleLevel=4,this.unbiased=!0,this.clearColor=void 0!==r?r:0,this.clearAlpha=void 0!==a?a:0,void 0===o.a&&console.error("SSAARenderPass relies on CopyShader");var s=o.a;this.copyUniforms=n.UniformsUtils.clone(s.uniforms),this.copyMaterial=new n.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader,premultipliedAlpha:!0,transparent:!0,blending:n.AdditiveBlending,depthTest:!1,depthWrite:!1}),this.fsQuad=new i.a.FullScreenQuad(this.copyMaterial)};a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,dispose:function(){this.sampleRenderTarget&&(this.sampleRenderTarget.dispose(),this.sampleRenderTarget=null)},setSize:function(e,t){this.sampleRenderTarget&&this.sampleRenderTarget.setSize(e,t)},render:function(e,t,r){this.sampleRenderTarget||(this.sampleRenderTarget=new n.WebGLRenderTarget(r.width,r.height,{minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat}),this.sampleRenderTarget.texture.name="SSAARenderPass.sample");var i=a.JitterVectors[Math.max(0,Math.min(this.sampleLevel,5))],o=e.autoClear;e.autoClear=!1;var s=e.getClearColor().getHex(),l=e.getClearAlpha(),u=1/i.length;this.copyUniforms.tDiffuse.value=this.sampleRenderTarget.texture;for(var c=r.width,h=r.height,d=0;d<i.length;d++){var p=i[d];this.camera.setViewOffset&&this.camera.setViewOffset(c,h,.0625*p[0],.0625*p[1],c,h);var f=u;if(this.unbiased)f+=1/32*((d+.5)/i.length-.5);this.copyUniforms.opacity.value=f,e.setClearColor(this.clearColor,this.clearAlpha),e.setRenderTarget(this.sampleRenderTarget),e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(this.renderToScreen?null:t),0===d&&(e.setClearColor(0,0),e.clear()),this.fsQuad.render(e)}this.camera.clearViewOffset&&this.camera.clearViewOffset(),e.autoClear=o,e.setClearColor(s,l)}}),a.JitterVectors=[[[0,0]],[[4,4],[-4,-4]],[[-2,-6],[6,-2],[-6,2],[2,6]],[[1,-3],[-1,3],[5,1],[-3,-5],[-5,5],[-7,-1],[3,7],[7,-7]],[[1,1],[-1,-3],[-3,2],[4,-1],[-5,-2],[2,5],[5,3],[3,-5],[-2,6],[0,-7],[-4,-6],[-6,4],[-8,0],[7,-4],[6,7],[-7,-8]],[[-4,-7],[-7,-5],[-3,-5],[-5,-4],[-1,-4],[-2,-2],[-6,-1],[-4,0],[-7,1],[-1,2],[-6,3],[-3,3],[-7,6],[-3,6],[-5,7],[-1,7],[5,-7],[1,-6],[6,-5],[4,-4],[2,-3],[7,-2],[1,-1],[4,-1],[2,1],[6,2],[0,4],[4,4],[2,5],[7,5],[5,6],[3,7]]]},Xu5e:function(e,t,r){"use strict";r.d(t,"a",function(){return p});var n=r("/nNp"),i=r("5l0I"),o=r("loLV"),a=r("Oi88"),s=r("WpOZ"),l=r("nXFl"),u=r("KkAi"),c=r("hNXs"),h=r("idq+"),d=r("Dfdy");function p(e,t,r){n.a.call(this,"v4"),this.value=e,this.uv=t,this.bias=r}p.Nodes=function(){var e=new o.a("struct TextureCubeUVData {\n\t\t\tvec4 tl;\n\t\t\tvec4 tr;\n\t\t\tvec4 br;\n\t\t\tvec4 bl;\n\t\t\tvec2 f;\n\t\t}"),t=new i.a("float cubeUV_maxMipLevel 8.0",!0),r=new i.a("float cubeUV_minMipLevel 4.0",!0),n=new i.a("float cubeUV_maxTileSize 256.0",!0),s=new i.a("float cubeUV_minTileSize 16.0",!0),l=new a.a("float getFace(vec3 direction) {\n\t\t\t\tvec3 absDirection = abs(direction);\n\t\t\t\tfloat face = -1.0;\n\t\t\t\tif (absDirection.x > absDirection.z) {\n\t\t\t\t\tif (absDirection.x > absDirection.y)\n\t\t\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t} else {\n\t\t\t\t\tif (absDirection.z > absDirection.y)\n\t\t\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\t\t\telse\n\t\t\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t\t\t}\n\t\t\t\treturn face;\n\t\t}");l.useKeywords=!1;var u=new a.a("vec2 getUV(vec3 direction, float face) {\n\t\t\t\tvec2 uv;\n\t\t\t\tif (face == 0.0) {\n\t\t\t\t\tuv = vec2(direction.z, direction.y) / abs(direction.x); // pos x\n\t\t\t\t} else if (face == 1.0) {\n\t\t\t\t\tuv = vec2(-direction.x, -direction.z) / abs(direction.y); // pos y\n\t\t\t\t} else if (face == 2.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.y) / abs(direction.z); // pos z\n\t\t\t\t} else if (face == 3.0) {\n\t\t\t\t\tuv = vec2(-direction.z, direction.y) / abs(direction.x); // neg x\n\t\t\t\t} else if (face == 4.0) {\n\t\t\t\t\tuv = vec2(-direction.x, direction.z) / abs(direction.y); // neg y\n\t\t\t\t} else {\n\t\t\t\t\tuv = vec2(direction.x, direction.y) / abs(direction.z); // neg z\n\t\t\t\t}\n\t\t\t\treturn 0.5 * (uv + 1.0);\n\t\t}");u.useKeywords=!1;var c=new a.a("TextureCubeUVData bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n\n\t\t\tfloat face = getFace(direction);\n\t\t\tfloat filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n\t\t\tmipInt = max(mipInt, cubeUV_minMipLevel);\n\t\t\tfloat faceSize = exp2(mipInt);\n\n\t\t\tfloat texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n\t\t\tvec2 uv = getUV(direction, face) * (faceSize - 1.0);\n\t\t\tvec2 f = fract(uv);\n\t\t\tuv += 0.5 - f;\n\t\t\tif (face > 2.0) {\n\t\t\t\tuv.y += faceSize;\n\t\t\t\tface -= 3.0;\n\t\t\t}\n\t\t\tuv.x += face * faceSize;\n\t\t\tif(mipInt < cubeUV_maxMipLevel){\n\t\t\t\tuv.y += 2.0 * cubeUV_maxTileSize;\n\t\t\t}\n\t\t\tuv.y += filterInt * 2.0 * cubeUV_minTileSize;\n\t\t\tuv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n\t\t\tuv *= texelSize;\n\n\t\t\tvec4 tl = texture2D(envMap, uv);\n\t\t\tuv.x += texelSize;\n\t\t\tvec4 tr = texture2D(envMap, uv);\n\t\t\tuv.y += texelSize;\n\t\t\tvec4 br = texture2D(envMap, uv);\n\t\t\tuv.x -= texelSize;\n\t\t\tvec4 bl = texture2D(envMap, uv);\n\n\t\t\treturn TextureCubeUVData( tl, tr, br, bl, f );\n\t\t}",[e,l,u,t,r,n,s]);c.useKeywords=!1;var h=new i.a("float r0 1.0",!0),d=new i.a("float v0 0.339",!0),p=new i.a("float m0 -2.0",!0),f=[h,d,p,new i.a("float r1 0.8",!0),new i.a("float v1 0.276",!0),new i.a("float m1 -1.0",!0),new i.a("float r4 0.4",!0),new i.a("float v4 0.046",!0),new i.a("float m4 2.0",!0),new i.a("float r5 0.305",!0),new i.a("float v5 0.016",!0),new i.a("float m5 3.0",!0),new i.a("float r6 0.21",!0),new i.a("float v6 0.0038",!0),new i.a("float m6 4.0",!0)];return{bilinearCubeUV:c,roughnessToMip:new a.a("float roughnessToMip(float roughness) {\n\t\t\tfloat mip = 0.0;\n\t\t\tif (roughness >= r1) {\n\t\t\t\tmip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n\t\t\t} else if (roughness >= r4) {\n\t\t\t\tmip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n\t\t\t} else if (roughness >= r5) {\n\t\t\t\tmip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n\t\t\t} else if (roughness >= r6) {\n\t\t\t\tmip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n\t\t\t} else {\n\t\t\t\tmip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n\t\t\t}\n\t\t\treturn mip;\n\t\t}",f),m0:p,cubeUV_maxMipLevel:t}}(),p.prototype=Object.create(n.a.prototype),p.prototype.constructor=p,p.prototype.nodeType="TextureCubeUV",p.prototype.bilinearCubeUV=function(e,t,r,n){var i=new s.a(p.Nodes.bilinearCubeUV,[t,r,n]);this.colorSpaceTL=this.colorSpaceTL||new d.a(new l.a("","v4")),this.colorSpaceTL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTL.input.parse(i.build(e)+".tl"),this.colorSpaceTR=this.colorSpaceTR||new d.a(new l.a("","v4")),this.colorSpaceTR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceTR.input.parse(i.build(e)+".tr"),this.colorSpaceBL=this.colorSpaceBL||new d.a(new l.a("","v4")),this.colorSpaceBL.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBL.input.parse(i.build(e)+".bl"),this.colorSpaceBR=this.colorSpaceBR||new d.a(new l.a("","v4")),this.colorSpaceBR.fromDecoding(e.getTextureEncodingFromMap(this.value.value)),this.colorSpaceBR.input.parse(i.build(e)+".br");var o={include:e.isShader("vertex"),ignoreCache:!0};e.addContext(o),this.colorSpaceTLExp=new l.a(this.colorSpaceTL.build(e,"v4"),"v4"),this.colorSpaceTRExp=new l.a(this.colorSpaceTR.build(e,"v4"),"v4"),this.colorSpaceBLExp=new l.a(this.colorSpaceBL.build(e,"v4"),"v4"),this.colorSpaceBRExp=new l.a(this.colorSpaceBR.build(e,"v4"),"v4"),e.removeContext();var a=new l.a("mix( mix( cubeUV_TL, cubeUV_TR, cubeUV.f.x ), mix( cubeUV_BL, cubeUV_BR, cubeUV.f.x ), cubeUV.f.y )","v4");return a.keywords.cubeUV_TL=this.colorSpaceTLExp,a.keywords.cubeUV_TR=this.colorSpaceTRExp,a.keywords.cubeUV_BL=this.colorSpaceBLExp,a.keywords.cubeUV_BR=this.colorSpaceBRExp,a.keywords.cubeUV=i,a},p.prototype.generate=function(e,t){if(e.isShader("fragment")){var r=this.uv,n=this.bias||e.context.roughness,i=new s.a(p.Nodes.roughnessToMip,[n]),o=new h.a(i,p.Nodes.m0,p.Nodes.cubeUV_maxMipLevel,h.a.CLAMP),a=new h.a(o,h.a.FLOOR),l=new h.a(o,h.a.FRACT),d=this.bilinearCubeUV(e,this.value,r,a),f=this.bilinearCubeUV(e,this.value,r,new c.a(a,new u.a(1).setReadonly(!0),c.a.ADD)),m=new h.a(d,f,l,h.a.MIX);return e.format(m.build(e),"v4",t)}return console.warn("THREE.TextureCubeUVNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},p.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.bias=this.bias.toJSON(e).uuid),t}},Y95o:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"createButton",value:function(e,t){t&&console.error('THREE.VRButton: The "options" parameter has been removed. Please set the reference space type via renderer.xr.setReferenceSpaceType() instead.');var r=document.createElement("button");function n(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null,r.textContent="VR NOT SUPPORTED"}function i(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return r.id="VRButton",r.style.display="none",i(r),navigator.xr.isSessionSupported("immersive-vr").then(function(t){t?function(){var t=null;function n(n){n.addEventListener("end",i),e.xr.setSession(n),r.textContent="EXIT VR",t=n}function i(){t.removeEventListener("end",i),r.textContent="ENTER VR",t=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="ENTER VR",r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){null===t?navigator.xr.requestSession("immersive-vr",{optionalFeatures:["local-floor","bounded-floor","hand-tracking"]}).then(n):t.end()}}():n()}),r;var o=document.createElement("a");return!1===window.isSecureContext?(o.href=document.location.href.replace(/^http:/,"https:"),o.innerHTML="WEBXR NEEDS HTTPS"):(o.href="https://immersiveweb.dev/",o.innerHTML="WEBXR NOT AVAILABLE"),o.style.left="calc(50% - 90px)",o.style.width="180px",o.style.textDecoration="none",i(o),o}}]),e}()},Y9dU:function(e,t,r){"use strict";r.d(t,"a",function(){return s});var n=r("hwmT"),i=r("zhz1"),o=r("Dfdy"),a=r("nXFl");function s(e,t,r,o){n.a.call(this,"v4",{shared:!0}),this.value=e,this.uv=t||new i.a,this.bias=r,this.project=void 0!==o&&o}s.prototype=Object.create(n.a.prototype),s.prototype.constructor=s,s.prototype.nodeType="Texture",s.prototype.getTexture=function(e,t){return n.a.prototype.generate.call(this,e,t,this.value.uuid,"t")},s.prototype.generate=function(e,t){if("sampler2D"===t)return this.getTexture(e,t);var r,n,i=this.getTexture(e,t),s=this.uv.build(e,this.project?"v4":"v2"),l=this.bias?this.bias.build(e,"f"):void 0;void 0===l&&e.context.bias&&(l=e.context.bias.setTexture(this).build(e,"f")),r=this.project?"texture2DProj":l?"tex2DBias":"tex2D",n=l?r+"( "+i+", "+s+", "+l+" )":r+"( "+i+", "+s+" )";var u={include:e.isShader("vertex"),ignoreCache:!0},c=this.getType(e);return e.addContext(u),this.colorSpace=this.colorSpace||new o.a(new a.a("",c)),this.colorSpace.fromDecoding(e.getTextureEncodingFromMap(this.value)),this.colorSpace.input.parse(n),n=this.colorSpace.build(e,c),e.removeContext(),e.format(n,c,t)},s.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),e.value&&(this.value=e.value),this.uv=e.uv,e.bias&&(this.bias=e.bias),void 0!==e.project&&(this.project=e.project),this},s.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.value&&(t.value=this.value.uuid),t.uv=this.uv.toJSON(e).uuid,t.project=this.project,this.bias&&(t.bias=this.bias.toJSON(e).uuid)),t}},YsLa:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("6+nK"),i=r("Ah8h"),o=r("fcDU"),a=function(e,t){i.a.call(this),void 0===o.a&&console.error("TexturePass relies on CopyShader");var r=o.a;this.map=e,this.opacity=void 0!==t?t:1,this.uniforms=n.UniformsUtils.clone(r.uniforms),this.material=new n.ShaderMaterial({uniforms:this.uniforms,vertexShader:r.vertexShader,fragmentShader:r.fragmentShader,depthTest:!1,depthWrite:!1}),this.needsSwap=!1,this.fsQuad=new i.a.FullScreenQuad(null)};a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,render:function(e,t,r){var n=e.autoClear;e.autoClear=!1,this.fsQuad.material=this.material,this.uniforms.opacity.value=this.opacity,this.uniforms.tDiffuse.value=this.map,this.material.transparent=this.opacity<1,e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(),this.fsQuad.render(e),e.autoClear=n}})},Z9IJ:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("Ah8h"),i=function(e,t,r,i,o){n.a.call(this),this.scene=e,this.camera=t,this.overrideMaterial=r,this.clearColor=i,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};i.prototype=Object.assign(Object.create(n.a.prototype),{constructor:i,render:function(e,t,r){var n,i,o,a=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(n=e.getClearColor().getHex(),i=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:r),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(n,i),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=a}})},aC6u:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK");function i(e){this.uuid=n.MathUtils.generateUUID(),this.name="",this.type=e,this.userData={}}i.prototype={constructor:i,isNode:!0,hashProperties:void 0,analyze:function(e,t){t=t||{},e.analyzing=!0,this.build(e.addFlow(t.slot,t.cache,t.context),"v4"),e.clearVertexNodeCode(),e.clearFragmentNodeCode(),e.removeFlow(),e.analyzing=!1},analyzeAndFlow:function(e,t,r){return r=r||{},this.analyze(e,r),this.flow(e,t,r)},flow:function(e,t,r){r=r||{},e.addFlow(r.slot,r.cache,r.context);var n={};return n.result=this.build(e,t),n.code=e.clearNodeCode(),n.extra=e.context.extra,e.removeFlow(),n},build:function(e,t,r){t=t||this.getType(e,t);var n=e.getNodeData(r||this);return e.analyzing&&this.appendDepsNode(e,n,t),-1===e.nodes.indexOf(this)&&e.nodes.push(this),void 0!==this.updateFrame&&-1===e.updaters.indexOf(this)&&e.updaters.push(this),this.generate(e,t,r)},generate:function(){},getHash:function(){var e,t,r="{";for(e in this)(t=this[e])instanceof i&&(r+='"'+e+'":'+t.getHash()+",");if(this.hashProperties)for(var n=0;n<this.hashProperties.length;n++)t=this[e=this.hashProperties[n]],r+='"'+e+'":"'+String(t)+'",';return r+='"id":"'+this.uuid+'"}'},appendDepsNode:function(e,t,r){t.deps=(t.deps||0)+1;var n=e.getTypeLength(r);(n>(t.outputMax||0)||this.getType(e,r))&&(t.outputMax=n,t.output=r)},setName:function(e){return this.name=e,this},getName:function(){return this.name},getType:function(e,t){return"sampler2D"===t||"samplerCube"===t?t:this.type},getJSONNode:function(e){if(!(void 0===e||"string"==typeof e)&&void 0!==e.nodes[this.uuid])return e.nodes[this.uuid]},copy:function(e){return void 0!==e.name&&(this.name=e.name),void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this},createJSONNode:function(e){var t=void 0===e||"string"==typeof e,r={};if("string"!=typeof this.nodeType)throw new Error("Node does not allow serialization.");return r.uuid=this.uuid,r.nodeType=this.nodeType,""!==this.name&&(r.name=this.name),"{}"!==JSON.stringify(this.userData)&&(r.userData=this.userData),t||(e.nodes[this.uuid]=r),r},toJSON:function(e){return this.getJSONNode(e)||this.createJSONNode(e)}}},aUSN:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}();var i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return n(e,null,[{key:"createButton",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("button");function n(){r.style.display="",r.style.cursor="auto",r.style.left="calc(50% - 75px)",r.style.width="150px",r.onmouseenter=null,r.onmouseleave=null,r.onclick=null,r.textContent="AR NOT SUPPORTED"}function i(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return r.id="ARButton",r.style.display="none",i(r),navigator.xr.isSessionSupported("immersive-ar").then(function(i){i?function(){var n=null;function i(t){t.addEventListener("end",o),e.xr.setReferenceSpaceType("local"),e.xr.setSession(t),r.textContent="STOP AR",n=t}function o(){n.removeEventListener("end",o),r.textContent="START AR",n=null}r.style.display="",r.style.cursor="pointer",r.style.left="calc(50% - 50px)",r.style.width="100px",r.textContent="START AR",r.onmouseenter=function(){r.style.opacity="1.0"},r.onmouseleave=function(){r.style.opacity="0.5"},r.onclick=function(){null===n?navigator.xr.requestSession("immersive-ar",t).then(i):n.end()}}():n()}).catch(n),r;var o=document.createElement("a");return!1===window.isSecureContext?(o.href=document.location.href.replace(/^http:/,"https:"),o.innerHTML="WEBXR NEEDS HTTPS"):(o.href="https://immersiveweb.dev/",o.innerHTML="WEBXR NOT AVAILABLE"),o.style.left="calc(50% - 90px)",o.style.width="180px",o.style.textDecoration="none",i(o),o}}]),e}()},cPA5:function(e,t,r){"use strict";function n(e){this.time=void 0!==e?e:0,this.id=0}r.d(t,"a",function(){return n}),n.prototype={constructor:n,update:function(e){return++this.id,this.time+=e,this.delta=e,this},setRenderer:function(e){return this.renderer=e,this},setRenderTexture:function(e){return this.renderTexture=e,this},updateNode:function(e){return e.frameId===this.id?this:(e.updateFrame(this),e.frameId=this.id,this)}}},f1Eh:function(e,t){e.exports=function(e){if(!e.webpackPolyfill){var t=Object.create(e);t.children||(t.children=[]),Object.defineProperty(t,"loaded",{enumerable:!0,get:function(){return t.l}}),Object.defineProperty(t,"id",{enumerable:!0,get:function(){return t.i}}),Object.defineProperty(t,"exports",{enumerable:!0}),t.webpackPolyfill=1}return t}},fD1D:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("6+nK"),i=r("Ah8h"),o=function(e,t){i.a.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof n.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=n.UniformsUtils.clone(e.uniforms),this.material=new n.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new i.a.FullScreenQuad(this.material)};o.prototype=Object.assign(Object.create(i.a.prototype),{constructor:o,render:function(e,t,r){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=r.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}})},fcDU:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")}},"gu+9":function(e,t,r){"use strict";var n=r("6+nK"),i=r("Ah8h"),o=r("fcDU"),a={shaderID:"luminosityHighPass",uniforms:{tDiffuse:{value:null},luminosityThreshold:{value:1},smoothWidth:{value:1},defaultColor:{value:new n.Color(0)},defaultOpacity:{value:0}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec3 defaultColor;","uniform float defaultOpacity;","uniform float luminosityThreshold;","uniform float smoothWidth;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tvec3 luma = vec3( 0.299, 0.587, 0.114 );","\tfloat v = dot( texel.xyz, luma );","\tvec4 outputColor = vec4( defaultColor.rgb, defaultOpacity );","\tfloat alpha = smoothstep( luminosityThreshold, luminosityThreshold + smoothWidth, v );","\tgl_FragColor = mix( outputColor, texel, alpha );","}"].join("\n")};r.d(t,"a",function(){return s});var s=function(e,t,r,s){i.a.call(this),this.strength=void 0!==t?t:1,this.radius=r,this.threshold=s,this.resolution=void 0!==e?new n.Vector2(e.x,e.y):new n.Vector2(256,256),this.clearColor=new n.Color(0,0,0);var l={minFilter:n.LinearFilter,magFilter:n.LinearFilter,format:n.RGBAFormat};this.renderTargetsHorizontal=[],this.renderTargetsVertical=[],this.nMips=5;var u=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2);this.renderTargetBright=new n.WebGLRenderTarget(u,c,l),this.renderTargetBright.texture.name="UnrealBloomPass.bright",this.renderTargetBright.texture.generateMipmaps=!1;for(var h=0;h<this.nMips;h++){var d=new n.WebGLRenderTarget(u,c,l);d.texture.name="UnrealBloomPass.h"+h,d.texture.generateMipmaps=!1,this.renderTargetsHorizontal.push(d);var p=new n.WebGLRenderTarget(u,c,l);p.texture.name="UnrealBloomPass.v"+h,p.texture.generateMipmaps=!1,this.renderTargetsVertical.push(p),u=Math.round(u/2),c=Math.round(c/2)}void 0===a&&console.error("UnrealBloomPass relies on LuminosityHighPassShader");var f=a;this.highPassUniforms=n.UniformsUtils.clone(f.uniforms),this.highPassUniforms.luminosityThreshold.value=s,this.highPassUniforms.smoothWidth.value=.01,this.materialHighPassFilter=new n.ShaderMaterial({uniforms:this.highPassUniforms,vertexShader:f.vertexShader,fragmentShader:f.fragmentShader,defines:{}}),this.separableBlurMaterials=[];var m=[3,5,7,9,11];for(u=Math.round(this.resolution.x/2),c=Math.round(this.resolution.y/2),h=0;h<this.nMips;h++)this.separableBlurMaterials.push(this.getSeperableBlurMaterial(m[h])),this.separableBlurMaterials[h].uniforms.texSize.value=new n.Vector2(u,c),u=Math.round(u/2),c=Math.round(c/2);this.compositeMaterial=this.getCompositeMaterial(this.nMips),this.compositeMaterial.uniforms.blurTexture1.value=this.renderTargetsVertical[0].texture,this.compositeMaterial.uniforms.blurTexture2.value=this.renderTargetsVertical[1].texture,this.compositeMaterial.uniforms.blurTexture3.value=this.renderTargetsVertical[2].texture,this.compositeMaterial.uniforms.blurTexture4.value=this.renderTargetsVertical[3].texture,this.compositeMaterial.uniforms.blurTexture5.value=this.renderTargetsVertical[4].texture,this.compositeMaterial.uniforms.bloomStrength.value=t,this.compositeMaterial.uniforms.bloomRadius.value=.1,this.compositeMaterial.needsUpdate=!0;this.compositeMaterial.uniforms.bloomFactors.value=[1,.8,.6,.4,.2],this.bloomTintColors=[new n.Vector3(1,1,1),new n.Vector3(1,1,1),new n.Vector3(1,1,1),new n.Vector3(1,1,1),new n.Vector3(1,1,1)],this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,void 0===o.a&&console.error("UnrealBloomPass relies on CopyShader");var v=o.a;this.copyUniforms=n.UniformsUtils.clone(v.uniforms),this.copyUniforms.opacity.value=1,this.materialCopy=new n.ShaderMaterial({uniforms:this.copyUniforms,vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,blending:n.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.enabled=!0,this.needsSwap=!1,this.oldClearColor=new n.Color,this.oldClearAlpha=1,this.basic=new n.MeshBasicMaterial,this.fsQuad=new i.a.FullScreenQuad(null)};s.prototype=Object.assign(Object.create(i.a.prototype),{constructor:s,dispose:function(){for(var e=0;e<this.renderTargetsHorizontal.length;e++)this.renderTargetsHorizontal[e].dispose();for(e=0;e<this.renderTargetsVertical.length;e++)this.renderTargetsVertical[e].dispose();this.renderTargetBright.dispose()},setSize:function(e,t){var r=Math.round(e/2),i=Math.round(t/2);this.renderTargetBright.setSize(r,i);for(var o=0;o<this.nMips;o++)this.renderTargetsHorizontal[o].setSize(r,i),this.renderTargetsVertical[o].setSize(r,i),this.separableBlurMaterials[o].uniforms.texSize.value=new n.Vector2(r,i),r=Math.round(r/2),i=Math.round(i/2)},render:function(e,t,r,n,i){this.oldClearColor.copy(e.getClearColor()),this.oldClearAlpha=e.getClearAlpha();var o=e.autoClear;e.autoClear=!1,e.setClearColor(this.clearColor,0),i&&e.state.buffers.stencil.setTest(!1),this.renderToScreen&&(this.fsQuad.material=this.basic,this.basic.map=r.texture,e.setRenderTarget(null),e.clear(),this.fsQuad.render(e)),this.highPassUniforms.tDiffuse.value=r.texture,this.highPassUniforms.luminosityThreshold.value=this.threshold,this.fsQuad.material=this.materialHighPassFilter,e.setRenderTarget(this.renderTargetBright),e.clear(),this.fsQuad.render(e);for(var a=this.renderTargetBright,l=0;l<this.nMips;l++)this.fsQuad.material=this.separableBlurMaterials[l],this.separableBlurMaterials[l].uniforms.colorTexture.value=a.texture,this.separableBlurMaterials[l].uniforms.direction.value=s.BlurDirectionX,e.setRenderTarget(this.renderTargetsHorizontal[l]),e.clear(),this.fsQuad.render(e),this.separableBlurMaterials[l].uniforms.colorTexture.value=this.renderTargetsHorizontal[l].texture,this.separableBlurMaterials[l].uniforms.direction.value=s.BlurDirectionY,e.setRenderTarget(this.renderTargetsVertical[l]),e.clear(),this.fsQuad.render(e),a=this.renderTargetsVertical[l];this.fsQuad.material=this.compositeMaterial,this.compositeMaterial.uniforms.bloomStrength.value=this.strength,this.compositeMaterial.uniforms.bloomRadius.value=this.radius,this.compositeMaterial.uniforms.bloomTintColors.value=this.bloomTintColors,e.setRenderTarget(this.renderTargetsHorizontal[0]),e.clear(),this.fsQuad.render(e),this.fsQuad.material=this.materialCopy,this.copyUniforms.tDiffuse.value=this.renderTargetsHorizontal[0].texture,i&&e.state.buffers.stencil.setTest(!0),this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(r),this.fsQuad.render(e)),e.setClearColor(this.oldClearColor,this.oldClearAlpha),e.autoClear=o},getSeperableBlurMaterial:function(e){return new n.ShaderMaterial({defines:{KERNEL_RADIUS:e,SIGMA:e},uniforms:{colorTexture:{value:null},texSize:{value:new n.Vector2(.5,.5)},direction:{value:new n.Vector2(.5,.5)}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"#include <common>\t\t\t\tvarying vec2 vUv;\n\t\t\t\tuniform sampler2D colorTexture;\n\t\t\t\tuniform vec2 texSize;\t\t\t\tuniform vec2 direction;\t\t\t\t\t\t\t\tfloat gaussianPdf(in float x, in float sigma) {\t\t\t\t\treturn 0.39894 * exp( -0.5 * x * x/( sigma * sigma))/sigma;\t\t\t\t}\t\t\t\tvoid main() {\n\t\t\t\t\tvec2 invSize = 1.0 / texSize;\t\t\t\t\tfloat fSigma = float(SIGMA);\t\t\t\t\tfloat weightSum = gaussianPdf(0.0, fSigma);\t\t\t\t\tvec3 diffuseSum = texture2D( colorTexture, vUv).rgb * weightSum;\t\t\t\t\tfor( int i = 1; i < KERNEL_RADIUS; i ++ ) {\t\t\t\t\t\tfloat x = float(i);\t\t\t\t\t\tfloat w = gaussianPdf(x, fSigma);\t\t\t\t\t\tvec2 uvOffset = direction * invSize * x;\t\t\t\t\t\tvec3 sample1 = texture2D( colorTexture, vUv + uvOffset).rgb;\t\t\t\t\t\tvec3 sample2 = texture2D( colorTexture, vUv - uvOffset).rgb;\t\t\t\t\t\tdiffuseSum += (sample1 + sample2) * w;\t\t\t\t\t\tweightSum += 2.0 * w;\t\t\t\t\t}\t\t\t\t\tgl_FragColor = vec4(diffuseSum/weightSum, 1.0);\n\t\t\t\t}"})},getCompositeMaterial:function(e){return new n.ShaderMaterial({defines:{NUM_MIPS:e},uniforms:{blurTexture1:{value:null},blurTexture2:{value:null},blurTexture3:{value:null},blurTexture4:{value:null},blurTexture5:{value:null},dirtTexture:{value:null},bloomStrength:{value:1},bloomFactors:{value:null},bloomTintColors:{value:null},bloomRadius:{value:0}},vertexShader:"varying vec2 vUv;\n\t\t\t\tvoid main() {\n\t\t\t\t\tvUv = uv;\n\t\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\t\t\t\t}",fragmentShader:"varying vec2 vUv;\t\t\t\tuniform sampler2D blurTexture1;\t\t\t\tuniform sampler2D blurTexture2;\t\t\t\tuniform sampler2D blurTexture3;\t\t\t\tuniform sampler2D blurTexture4;\t\t\t\tuniform sampler2D blurTexture5;\t\t\t\tuniform sampler2D dirtTexture;\t\t\t\tuniform float bloomStrength;\t\t\t\tuniform float bloomRadius;\t\t\t\tuniform float bloomFactors[NUM_MIPS];\t\t\t\tuniform vec3 bloomTintColors[NUM_MIPS];\t\t\t\t\t\t\t\tfloat lerpBloomFactor(const in float factor) { \t\t\t\t\tfloat mirrorFactor = 1.2 - factor;\t\t\t\t\treturn mix(factor, mirrorFactor, bloomRadius);\t\t\t\t}\t\t\t\t\t\t\t\tvoid main() {\t\t\t\t\tgl_FragColor = bloomStrength * ( lerpBloomFactor(bloomFactors[0]) * vec4(bloomTintColors[0], 1.0) * texture2D(blurTexture1, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[1]) * vec4(bloomTintColors[1], 1.0) * texture2D(blurTexture2, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[2]) * vec4(bloomTintColors[2], 1.0) * texture2D(blurTexture3, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[3]) * vec4(bloomTintColors[3], 1.0) * texture2D(blurTexture4, vUv) + \t\t\t\t\t\t\t\t\t\t\t\t\t lerpBloomFactor(bloomFactors[4]) * vec4(bloomTintColors[4], 1.0) * texture2D(blurTexture5, vUv) );\t\t\t\t}"})}}),s.BlurDirectionX=new n.Vector2(1,0),s.BlurDirectionY=new n.Vector2(0,1)},hNXs:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("/nNp");function i(e,t,r){n.a.call(this),this.a=e,this.b=t,this.op=r}i.ADD="+",i.SUB="-",i.MUL="*",i.DIV="/",i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,i.prototype.nodeType="Operator",i.prototype.getType=function(e){var t=this.a.getType(e),r=this.b.getType(e);return e.isTypeMatrix(t)?"v4":e.getTypeLength(r)>e.getTypeLength(t)?r:t},i.prototype.generate=function(e,t){var r=this.getType(e),n=this.a.build(e,r),i=this.b.build(e,r);return e.format("( "+n+" "+this.op+" "+i+" )",r,t)},i.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.op=e.op,this},i.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op),t}},huYH:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("/nNp"),i=r("6FbT");function o(e){n.a.call(this,"v3"),this.scope=e||o.LOCAL}o.LOCAL="local",o.WORLD="world",o.VIEW="view",o.PROJECTION="projection",o.prototype=Object.create(n.a.prototype),o.prototype.constructor=o,o.prototype.nodeType="Position",o.prototype.getType=function(){switch(this.scope){case o.PROJECTION:return"v4"}return this.type},o.prototype.getShared=function(){switch(this.scope){case o.LOCAL:case o.WORLD:return!1}return!0},o.prototype.generate=function(e,t){var r;switch(this.scope){case o.LOCAL:e.isShader("vertex")?r="transformed":(e.requires.position=!0,r="vPosition");break;case o.WORLD:if(e.isShader("vertex"))return"( modelMatrix * vec4( transformed, 1.0 ) ).xyz";e.requires.worldPosition=!0,r="vWPosition";break;case o.VIEW:r=e.isShader("vertex")?"-mvPosition.xyz":"vViewPosition";break;case o.PROJECTION:r=e.isShader("vertex")?"( projectionMatrix * modelViewMatrix * vec4( position, 1.0 ) )":"vec4( 0.0 )"}return e.format(r,this.getType(e),t)},o.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.scope=e.scope,this},o.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t},i.a.addKeyword("position",function(){return new o}),i.a.addKeyword("worldPosition",function(){return new o(o.WORLD)}),i.a.addKeyword("viewPosition",function(){return new o(o.VIEW)})},hwmT:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("/nNp");function i(e,t){(t=t||{}).shared=void 0!==t.shared&&t.shared,n.a.call(this,e,t),this.readonly=!1}i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,i.prototype.setReadonly=function(e){return this.readonly=e,this.hashProperties=this.readonly?["value"]:void 0,this},i.prototype.getReadonly=function(){return this.readonly},i.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),void 0!==e.readonly&&(this.readonly=e.readonly),this},i.prototype.createJSONNode=function(e){var t=n.a.prototype.createJSONNode.call(this,e);return!0===this.readonly&&(t.readonly=this.readonly),t},i.prototype.generate=function(e,t,r,n,i,o){r=e.getUuid(r||this.getUuid()),n=n||this.getType(e);var a=e.getNodeData(r);return this.getReadonly(e)&&void 0!==this.generateReadonly?this.generateReadonly(e,t,r,n,i,o):e.isShader("vertex")?(a.vertex||(a.vertex=e.createVertexUniform(n,this,i,o,this.getLabel())),e.format(a.vertex.name,n,t)):(a.fragment||(a.fragment=e.createFragmentUniform(n,this,i,o,this.getLabel())),e.format(a.fragment.name,n,t))}},"idq+":function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("/nNp");function i(e,t,r,i){n.a.call(this),this.a=e,"string"!=typeof t?this.b=t:i=t,"string"!=typeof r?this.c=r:i=r,this.method=i}i.RAD="radians",i.DEG="degrees",i.EXP="exp",i.EXP2="exp2",i.LOG="log",i.LOG2="log2",i.SQRT="sqrt",i.INV_SQRT="inversesqrt",i.FLOOR="floor",i.CEIL="ceil",i.NORMALIZE="normalize",i.FRACT="fract",i.SATURATE="saturate",i.SIN="sin",i.COS="cos",i.TAN="tan",i.ASIN="asin",i.ACOS="acos",i.ARCTAN="atan",i.ABS="abs",i.SIGN="sign",i.LENGTH="length",i.NEGATE="negate",i.INVERT="invert",i.MIN="min",i.MAX="max",i.MOD="mod",i.STEP="step",i.REFLECT="reflect",i.DISTANCE="distance",i.DOT="dot",i.CROSS="cross",i.POW="pow",i.MIX="mix",i.CLAMP="clamp",i.REFRACT="refract",i.SMOOTHSTEP="smoothstep",i.FACEFORWARD="faceforward",i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,i.prototype.nodeType="Math",i.prototype.hashProperties=["method"],i.prototype.getNumInputs=function(){switch(this.method){case i.MIX:case i.CLAMP:case i.REFRACT:case i.SMOOTHSTEP:case i.FACEFORWARD:return 3;case i.MIN:case i.MAX:case i.MOD:case i.STEP:case i.REFLECT:case i.DISTANCE:case i.DOT:case i.CROSS:case i.POW:return 2;default:return 1}},i.prototype.getInputType=function(e){var t=e.getTypeLength(this.a.getType(e)),r=this.b?e.getTypeLength(this.b.getType(e)):0,n=this.c?e.getTypeLength(this.c.getType(e)):0;return t>r&&t>n?this.a.getType(e):r>n?this.b.getType(e):this.c.getType(e)},i.prototype.getType=function(e){switch(this.method){case i.LENGTH:case i.DISTANCE:case i.DOT:return"f";case i.CROSS:return"v3"}return this.getInputType(e)},i.prototype.generate=function(e,t){var r,n,o,a=this.a?e.getTypeLength(this.a.getType(e)):0,s=this.b?e.getTypeLength(this.b.getType(e)):0,l=this.c?e.getTypeLength(this.c.getType(e)):0,u=this.getInputType(e),c=this.getType(e);switch(this.method){case i.NEGATE:return e.format("( -"+this.a.build(e,u)+" )",u,t);case i.INVERT:return e.format("( 1.0 - "+this.a.build(e,u)+" )",u,t);case i.CROSS:r=this.a.build(e,"v3"),n=this.b.build(e,"v3");break;case i.STEP:r=this.a.build(e,1===a?"f":u),n=this.b.build(e,u);break;case i.MIN:case i.MAX:case i.MOD:r=this.a.build(e,u),n=this.b.build(e,1===s?"f":u);break;case i.REFRACT:r=this.a.build(e,u),n=this.b.build(e,u),o=this.c.build(e,"f");break;case i.MIX:r=this.a.build(e,u),n=this.b.build(e,u),o=this.c.build(e,1===l?"f":u);break;default:r=this.a.build(e,u),this.b&&(n=this.b.build(e,u)),this.c&&(o=this.c.build(e,u))}var h=[];h.push(r),n&&h.push(n),o&&h.push(o);var d=this.getNumInputs(e);if(h.length!==d)throw Error('Arguments not match used in "'+this.method+'". Require '+d+", currently "+h.length+".");return e.format(this.method+"( "+h.join(", ")+" )",c,t)},i.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.c=e.c,this.method=e.method,this},i.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,this.b&&(t.b=this.b.toJSON(e).uuid),this.c&&(t.c=this.c.toJSON(e).uuid),t.method=this.method),t}},jwnc:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(e){n.Loader.call(this,e)};i.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:i,load:function(e,t,r,i){var o=this,a=""===this.path?n.LoaderUtils.extractUrlBase(e):this.path,s=new n.FileLoader(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials),s.load(e,function(r){try{t(o.parse(r,a))}catch(t){i?i(t):console.error(t),o.manager.itemError(e)}},r,i)},setMaterialOptions:function(e){return this.materialOptions=e,this},parse:function(e,t){for(var r=e.split("\n"),n={},o=/\s+/,a={},s=0;s<r.length;s++){var l=r[s];if(0!==(l=l.trim()).length&&"#"!==l.charAt(0)){var u=l.indexOf(" "),c=u>=0?l.substring(0,u):l;c=c.toLowerCase();var h=u>=0?l.substring(u+1):"";if(h=h.trim(),"newmtl"===c)n={name:h},a[h]=n;else if("ka"===c||"kd"===c||"ks"===c||"ke"===c){var d=h.split(o,3);n[c]=[parseFloat(d[0]),parseFloat(d[1]),parseFloat(d[2])]}else n[c]=h}}var p=new i.MaterialCreator(this.resourcePath||t,this.materialOptions);return p.setCrossOrigin(this.crossOrigin),p.setManager(this.manager),p.setMaterials(a),p}}),i.MaterialCreator=function(e,t){this.baseUrl=e||"",this.options=t,this.materialsInfo={},this.materials={},this.materialsArray=[],this.nameLookup={},this.side=this.options&&this.options.side?this.options.side:n.FrontSide,this.wrap=this.options&&this.options.wrap?this.options.wrap:n.RepeatWrapping},i.MaterialCreator.prototype={constructor:i.MaterialCreator,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},setManager:function(e){this.manager=e},setMaterials:function(e){this.materialsInfo=this.convert(e),this.materials={},this.materialsArray=[],this.nameLookup={}},convert:function(e){if(!this.options)return e;var t={};for(var r in e){var n=e[r],i={};for(var o in t[r]=i,n){var a=!0,s=n[o],l=o.toLowerCase();switch(l){case"kd":case"ka":case"ks":this.options&&this.options.normalizeRGB&&(s=[s[0]/255,s[1]/255,s[2]/255]),this.options&&this.options.ignoreZeroRGBs&&0===s[0]&&0===s[1]&&0===s[2]&&(a=!1)}a&&(i[l]=s)}}return t},preload:function(){for(var e in this.materialsInfo)this.create(e)},getIndex:function(e){return this.nameLookup[e]},getAsArray:function(){var e=0;for(var t in this.materialsInfo)this.materialsArray[e]=this.create(t),this.nameLookup[t]=e,e++;return this.materialsArray},create:function(e){return void 0===this.materials[e]&&this.createMaterial_(e),this.materials[e]},createMaterial_:function(e){var t=this,r=this.materialsInfo[e],i={name:e,side:this.side};function o(e,r){if(!i[e]){var n,o,a=t.getTextureParams(r,i),s=t.loadTexture((n=t.baseUrl,"string"!=typeof(o=a.url)||""===o?"":/^https?:\/\//i.test(o)?o:n+o));s.repeat.copy(a.scale),s.offset.copy(a.offset),s.wrapS=t.wrap,s.wrapT=t.wrap,i[e]=s}}for(var a in r){var s,l=r[a];if(""!==l)switch(a.toLowerCase()){case"kd":i.color=(new n.Color).fromArray(l);break;case"ks":i.specular=(new n.Color).fromArray(l);break;case"ke":i.emissive=(new n.Color).fromArray(l);break;case"map_kd":o("map",l);break;case"map_ks":o("specularMap",l);break;case"map_ke":o("emissiveMap",l);break;case"norm":o("normalMap",l);break;case"map_bump":case"bump":o("bumpMap",l);break;case"map_d":o("alphaMap",l),i.transparent=!0;break;case"ns":i.shininess=parseFloat(l);break;case"d":(s=parseFloat(l))<1&&(i.opacity=s,i.transparent=!0);break;case"tr":s=parseFloat(l),this.options&&this.options.invertTrProperty&&(s=1-s),s>0&&(i.opacity=1-s,i.transparent=!0)}}return this.materials[e]=new n.MeshPhongMaterial(i),this.materials[e]},getTextureParams:function(e,t){var r,i={scale:new n.Vector2(1,1),offset:new n.Vector2(0,0)},o=e.split(/\s+/);return(r=o.indexOf("-bm"))>=0&&(t.bumpScale=parseFloat(o[r+1]),o.splice(r,2)),(r=o.indexOf("-s"))>=0&&(i.scale.set(parseFloat(o[r+1]),parseFloat(o[r+2])),o.splice(r,4)),(r=o.indexOf("-o"))>=0&&(i.offset.set(parseFloat(o[r+1]),parseFloat(o[r+2])),o.splice(r,4)),i.url=o.join(" ").trim(),i},loadTexture:function(e,t,r,i,o){var a,s=void 0!==this.manager?this.manager:n.DefaultLoadingManager,l=s.getHandler(e);return null===l&&(l=new n.TextureLoader(s)),l.setCrossOrigin&&l.setCrossOrigin(this.crossOrigin),a=l.load(e,r,i,o),void 0!==t&&(a.mapping=t),a}}},"l/b+":function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r("6+nK"),i=r("6SgS"),o=r("UhQ2"),a=r("huYH"),s=r("VG6x");function l(e,t){n.ShaderMaterial.call(this),this.vertex=e||new s.a(new a.a(a.a.PROJECTION)),this.fragment=t||new s.a(new o.a(16711680)),this.updaters=[]}l.prototype=Object.create(n.ShaderMaterial.prototype),l.prototype.constructor=l,l.prototype.type="NodeMaterial",l.prototype.isNodeMaterial=!0,Object.defineProperties(l.prototype,{properties:{get:function(){return this.fragment.properties}},needsUpdate:{set:function(e){!0===e&&this.version++,this.needsCompile=e},get:function(){return this.needsCompile}}}),l.prototype.onBeforeCompile=function(e,t){this.build({renderer:t}),e.defines=this.defines,e.uniforms=this.uniforms,e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.extensionDerivatives=!0===this.extensions.derivatives,e.extensionFragDepth=!0===this.extensions.fragDepth,e.extensionDrawBuffers=!0===this.extensions.drawBuffers,e.extensionShaderTextureLOD=!0===this.extensions.shaderTextureLOD},l.prototype.customProgramCacheKey=function(){return this.getHash()},l.prototype.getHash=function(){var e="{";return e+='"vertex":'+this.vertex.getHash()+",",e+='"fragment":'+this.fragment.getHash(),e+="}"},l.prototype.updateFrame=function(e){for(var t=0;t<this.updaters.length;++t)e.updateNode(this.updaters[t])},l.prototype.build=function(e){var t=(e=e||{}).builder||new i.a;return t.setMaterial(this,e.renderer),t.build(this.vertex,this.fragment),this.vertexShader=t.getCode("vertex"),this.fragmentShader=t.getCode("fragment"),this.defines=t.defines,this.uniforms=t.uniforms,this.extensions=t.extensions,this.updaters=t.updaters,this.fog=t.requires.fog,this.lights=t.requires.lights,this.transparent=t.requires.transparent||this.blending>n.NormalBlending,this},l.prototype.copy=function(e){var t=this.uuid;for(var r in e)this[r]=e[r];return this.uuid=t,void 0!==e.userData&&(this.userData=JSON.parse(JSON.stringify(e.userData))),this},l.prototype.toJSON=function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.materials&&(e.materials={}),!e.materials[this.uuid]){var t={};t.uuid=this.uuid,t.type=this.type,e.materials[t.uuid]=t,""!==this.name&&(t.name=this.name),void 0!==this.size&&(t.size=this.size),void 0!==this.sizeAttenuation&&(t.sizeAttenuation=this.sizeAttenuation),this.blending!==n.NormalBlending&&(t.blending=this.blending),!0===this.flatShading&&(t.flatShading=this.flatShading),this.side!==n.FrontSide&&(t.side=this.side),this.vertexColors!==n.NoColors&&(t.vertexColors=this.vertexColors),this.depthFunc!==n.LessEqualDepth&&(t.depthFunc=this.depthFunc),!1===this.depthTest&&(t.depthTest=this.depthTest),!1===this.depthWrite&&(t.depthWrite=this.depthWrite),1!==this.linewidth&&(t.linewidth=this.linewidth),void 0!==this.dashSize&&(t.dashSize=this.dashSize),void 0!==this.gapSize&&(t.gapSize=this.gapSize),void 0!==this.scale&&(t.scale=this.scale),!0===this.dithering&&(t.dithering=!0),!0===this.wireframe&&(t.wireframe=this.wireframe),this.wireframeLinewidth>1&&(t.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(t.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(t.wireframeLinejoin=this.wireframeLinejoin),this.alphaTest>0&&(t.alphaTest=this.alphaTest),!0===this.premultipliedAlpha&&(t.premultipliedAlpha=this.premultipliedAlpha),!0===this.morphTargets&&(t.morphTargets=!0),!0===this.skinning&&(t.skinning=!0),!1===this.visible&&(t.visible=!1),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.fog=this.fog,t.lights=this.lights,t.vertex=this.vertex.toJSON(e).uuid,t.fragment=this.fragment.toJSON(e).uuid}return e.material=this.uuid,e}},loLV:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("/nNp"),i=/^struct\s*([a-z_0-9]+)\s*{\s*((.|\n)*?)}/gim,o=/\s*(\w*?)\s*(\w*?)(\=|\;)/gim;function a(e){n.a.call(this),this.parse(e)}a.prototype=Object.create(n.a.prototype),a.prototype.constructor=a,a.prototype.nodeType="Struct",a.prototype.getType=function(e){return e.getTypeByFormat(this.name)},a.prototype.getInputByName=function(e){for(var t=this.inputs.length;t--;)if(this.inputs[t].name===e)return this.inputs[t]},a.prototype.generate=function(e,t){return"source"===t?this.src+";":e.format("( "+this.src+" )",this.getType(e),t)},a.prototype.parse=function(e){this.src=e||"",this.inputs=[];var t=i.exec(this.src);if(t){for(var r,n=t[2];r=o.exec(n);)this.inputs.push({type:r[1],name:r[2]});this.name=t[1]}else this.name="";this.type=this.name},a.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).src=this.src),t}},nErl:function(e,t){(function(t){e.exports=t}).call(t,{})},nXFl:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("Oi88");function i(e,t,r,i,o){n.a.call(this,e,o,i,r,t)}i.prototype=Object.create(n.a.prototype),i.prototype.constructor=i,i.prototype.nodeType="Expression"},p8Aj:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("aC6u"),i=r("/nNp"),o=r("hwmT"),a=r("5l0I");function s(e,t){n.a.call(this,e),this.value=t}s.prototype=Object.create(n.a.prototype),s.prototype.constructor=s,s.prototype.nodeType="Var",s.prototype.getType=function(e){return e.getTypeByFormat(this.type)},s.prototype.generate=function(e,t){var r=e.getVar(this.uuid,this.type);return this.value&&e.isShader("vertex")&&e.addNodeCode(r.name+" = "+this.value.build(e,this.getType(e))+";"),e.format(r.name,this.getType(e),t)},s.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.type=e.type,this.value=e.value,this},s.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).type=this.type,this.value&&(t.value=this.value.toJSON(e).uuid)),t};var l=r("loLV");function u(e,t){n.a.call(this,t),this.name=e}u.prototype=Object.create(n.a.prototype),u.prototype.constructor=u,u.prototype.nodeType="Attribute",u.prototype.getAttributeType=function(e){return"number"==typeof this.type?e.getConstructorFromLength(this.type):this.type},u.prototype.getType=function(e){var t=this.getAttributeType(e);return e.getTypeByFormat(t)},u.prototype.generate=function(e,t){var r=this.getAttributeType(e),n=e.getAttribute(this.name,r),i=e.isShader("vertex")?this.name:n.varying.name;return e.format(i,this.getType(e),t)},u.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.type=e.type,this},u.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).type=this.type),t};var c=r("Oi88"),h=r("nXFl"),d=r("WpOZ"),p=r("6FbT"),f=r("7zw7"),m=r("cPA5"),v=r("TUKu"),g=r("6SgS");function y(e){o.a.call(this,"b"),this.value=Boolean(e)}function b(e){o.a.call(this,"i"),this.value=Math.floor(e||0)}y.prototype=Object.create(o.a.prototype),y.prototype.constructor=y,y.prototype.nodeType="Bool",y.prototype.generateReadonly=function(e,t,r,n){return e.format(this.value,n,t)},y.prototype.copy=function(e){return o.a.prototype.copy.call(this,e),this.value=e.value,this},y.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t},b.prototype=Object.create(o.a.prototype),b.prototype.constructor=b,b.prototype.nodeType="Int",b.prototype.generateReadonly=function(e,t,r,n){return e.format(this.value,n,t)},b.prototype.copy=function(e){return o.a.prototype.copy.call(this,e),this.value=e.value,this},b.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,!0===this.readonly&&(t.readonly=!0)),t};var w=r("KkAi"),x=r("6cqF"),_=r("Ai5a"),T=r("pCsw"),A=r("UhQ2"),S=r("6+nK");function E(e){o.a.call(this,"m3"),this.value=e||new S.Matrix3}function C(e){o.a.call(this,"m4"),this.value=e||new S.Matrix4}E.prototype=Object.create(o.a.prototype),E.prototype.constructor=E,E.prototype.nodeType="Matrix3",Object.defineProperties(E.prototype,{elements:{set:function(e){this.value.elements=e},get:function(){return this.value.elements}}}),E.prototype.generateReadonly=function(e,t,r,n){return e.format("mat3( "+this.value.elements.join(", ")+" )",n,t)},E.prototype.copy=function(e){return o.a.prototype.copy.call(this,e),this.value.fromArray(e.elements),this},E.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).elements=this.value.elements.concat()),t},C.prototype=Object.create(o.a.prototype),C.prototype.constructor=C,C.prototype.nodeType="Matrix4",Object.defineProperties(C.prototype,{elements:{set:function(e){this.value.elements=e},get:function(){return this.value.elements}}}),C.prototype.generateReadonly=function(e,t,r,n){return e.format("mat4( "+this.value.elements.join(", ")+" )",n,t)},C.prototype.copy=function(e){return o.a.prototype.copy.call(this,e),this.scope.value.fromArray(e.elements),this},C.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).elements=this.value.elements.concat()),t};var M=r("Y9dU"),N=r("WcTe"),O=r("SZ9I"),R=r("huYH"),k=r("hNXs");function L(e){i.a.call(this,"v4"),e&&this.setMirror(e)}function I(e,t,r){o.a.call(this,r),this.object=e,this.property=t}L.prototype=Object.create(i.a.prototype),L.prototype.constructor=L,L.prototype.nodeType="Reflector",L.prototype.setMirror=function(e){this.mirror=e,this.textureMatrix=new C(this.mirror.material.uniforms.textureMatrix.value),this.localPosition=new R.a(R.a.LOCAL),this.uv=new k.a(this.textureMatrix,this.localPosition,k.a.MUL),this.uvResult=new k.a(null,this.uv,k.a.ADD),this.texture=new M.a(this.mirror.material.uniforms.tDiffuse.value,this.uv,null,!0)},L.prototype.generate=function(e,t){return e.isShader("fragment")?(this.uvResult.a=this.offset,this.texture.uv=this.offset?this.uvResult:this.uv,"sampler2D"===t?this.texture.build(e,t):e.format(this.texture.build(e,this.type),this.type,t)):(console.warn("THREE.ReflectorNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.type,t))},L.prototype.copy=function(e){return o.a.prototype.copy.call(this,e),this.scope.mirror=e.mirror,this},L.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).mirror=this.mirror.uuid,this.offset&&(t.offset=this.offset.toJSON(e).uuid)),t},I.prototype=Object.create(o.a.prototype),I.prototype.constructor=I,I.prototype.nodeType="Property",Object.defineProperties(I.prototype,{value:{get:function(){return this.object[this.property]},set:function(e){this.object[this.property]=e}}}),I.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value,t.property=this.property),t};var P=r("l/b+");function B(e,t,r,n){n=n||{},this.input=r,this.clear=void 0===n.clear||n.clear,this.renderTarget=new S.WebGLRenderTarget(e,t,n),this.material=new P.a,this.camera=new S.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new S.Scene,this.quad=new S.Mesh(new S.PlaneBufferGeometry(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.render=!0,M.a.call(this,this.renderTarget.texture)}B.prototype=Object.create(M.a.prototype),B.prototype.constructor=B,B.prototype.nodeType="RTT",B.prototype.build=function(e,t,r){var n=new g.a;return n.nodes=e.nodes,n.updaters=e.updaters,this.material.fragment.value=this.input,this.material.build({builder:n}),M.a.prototype.build.call(this,e,t,r)},B.prototype.updateFramesaveTo=function(e){if(this.saveTo.render=!1,this.saveTo!==this.saveToCurrent){this.saveToMaterial&&this.saveToMaterial.dispose();var t=new P.a;t.fragment.value=this,t.build();var r=new S.Scene,n=new S.Mesh(new S.PlaneBufferGeometry(2,2),t);n.frustumCulled=!1,r.add(n),this.saveToScene=r,this.saveToMaterial=t}this.saveToCurrent=this.saveTo,e.renderer.setRenderTarget(this.saveTo.renderTarget),this.saveTo.clear&&e.renderer.clear(),e.renderer.render(this.saveToScene,this.camera)},B.prototype.updateFrame=function(e){e.renderer?(this.saveTo&&!1===this.saveTo.render&&this.updateFramesaveTo(e),this.render&&(this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=e.renderTexture),e.renderer.setRenderTarget(this.renderTarget),this.clear&&e.renderer.clear(),e.renderer.render(this.scene,this.camera)),this.saveTo&&!0===this.saveTo.render&&this.updateFramesaveTo(e)):console.warn("RTTNode need a renderer in NodeFrame")},B.prototype.copy=function(e){return M.a.prototype.copy.call(this,e),this.saveTo=e.saveTo,this},B.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=M.a.prototype.toJSON.call(this,e),this.saveTo&&(t.saveTo=this.saveTo.toJSON(e).uuid)),t};var D=r("zhz1"),U=["color","color2"],F=["vColor","vColor2"];function z(e){i.a.call(this,"v4",{shared:!1}),this.index=e||0}z.prototype=Object.create(i.a.prototype),z.prototype.constructor=z,z.prototype.nodeType="Colors",z.prototype.generate=function(e,t){e.requires.color[this.index]=!0;var r=e.isShader("vertex")?U[this.index]:F[this.index];return e.format(r,this.getType(e),t)},z.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.index=e.index,this},z.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).index=this.index),t};var V=r("LtYT");function j(e,t){i.a.call(this,"v3"),this.setScope(e||j.POSITION),this.setCamera(t)}function H(e){i.a.call(this,"v3",{shared:!1}),this.scope=e||H.TOTAL}j.Nodes={depthColor:new c.a(["float depthColor( float mNear, float mFar ) {","\t#ifdef USE_LOGDEPTHBUF_EXT","\t\tfloat depth = gl_FragDepthEXT / gl_FragCoord.w;","\t#else","\t\tfloat depth = gl_FragCoord.z / gl_FragCoord.w;","\t#endif","\treturn 1.0 - smoothstep( mNear, mFar, depth );","}"].join("\n"))},j.POSITION="position",j.DEPTH="depth",j.TO_VERTEX="toVertex",j.prototype=Object.create(i.a.prototype),j.prototype.constructor=j,j.prototype.nodeType="Camera",j.prototype.setCamera=function(e){this.camera=e,this.updateFrame=void 0!==e?this.onUpdateFrame:void 0},j.prototype.setScope=function(e){switch(this.scope){case j.DEPTH:delete this.near,delete this.far}switch(this.scope=e,e){case j.DEPTH:var t=this.camera;this.near=new w.a(t?t.near:1),this.far=new w.a(t?t.far:1200)}},j.prototype.getType=function(){switch(this.scope){case j.DEPTH:return"f"}return this.type},j.prototype.getUnique=function(){switch(this.scope){case j.DEPTH:case j.TO_VERTEX:return!0}return!1},j.prototype.getShared=function(){switch(this.scope){case j.POSITION:return!1}return!0},j.prototype.generate=function(e,t){var r;switch(this.scope){case j.POSITION:r="cameraPosition";break;case j.DEPTH:r=e.include(j.Nodes.depthColor)+"( "+this.near.build(e,"f")+", "+this.far.build(e,"f")+" )";break;case j.TO_VERTEX:r="normalize( "+new R.a(R.a.WORLD).build(e,"v3")+" - cameraPosition )"}return e.format(r,this.getType(e),t)},j.prototype.onUpdateFrame=function(){switch(this.scope){case j.DEPTH:var e=this.camera;this.near.value=e.near,this.far.value=e.far}},j.prototype.copy=function(e){switch(i.a.prototype.copy.call(this,e),this.setScope(e.scope),e.camera&&this.setCamera(e.camera),e.scope){case j.DEPTH:this.near.number=e.near,this.far.number=e.far}return this},j.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t)switch((t=this.createJSONNode(e)).scope=this.scope,this.camera&&(t.camera=this.camera.uuid),this.scope){case j.DEPTH:t.near=this.near.value,t.far=this.far.value}return t},H.TOTAL="total",H.prototype=Object.create(i.a.prototype),H.prototype.constructor=H,H.prototype.nodeType="Light",H.prototype.generate=function(e,t){return e.isCache("light")?e.format("reflectedLight.directDiffuse",this.type,t):(console.warn('THREE.LightNode is only compatible in "light" channel.'),e.format("vec3( 0.0 )",this.type,t))},H.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.scope=e.scope,this},H.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t};var G=r("yA4I");function X(){x.a.call(this),this.size=new S.Vector2}function Y(e){i.a.call(this,"v2"),this.resolution=e||new X}X.prototype=Object.create(x.a.prototype),X.prototype.constructor=X,X.prototype.nodeType="Resolution",X.prototype.updateFrame=function(e){if(e.renderer){e.renderer.getSize(this.size);var t=e.renderer.getPixelRatio();this.x=this.size.width*t,this.y=this.size.height*t}else console.warn("ResolutionNode need a renderer in NodeFrame")},X.prototype.copy=function(e){return x.a.prototype.copy.call(this,e),this.renderer=e.renderer,this},X.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).renderer=this.renderer.uuid),t},Y.prototype=Object.create(i.a.prototype),Y.prototype.constructor=Y,Y.prototype.nodeType="ScreenUV",Y.prototype.generate=function(e,t){var r;return e.isShader("fragment")?r="( gl_FragCoord.xy / "+this.resolution.build(e,"v2")+")":(console.warn("THREE.ScreenUVNode is not compatible with "+e.shader+" shader."),r="vec2( 0.0 )"),e.format(r,this.getType(e),t)},Y.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.resolution=e.resolution,this},Y.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).resolution=this.resolution.toJSON(e).uuid),t};var W=r("idq+");function J(e,t,r,n,o){i.a.call(this),this.a=e,this.b=t,this.op=r,this.ifNode=n,this.elseNode=o}function q(e){i.a.call(this,"f"),this.uv=e||new D.a}function K(e){i.a.call(this,"f"),this.uv=e||new D.a}J.EQUAL="==",J.NOT_EQUAL="!=",J.GREATER=">",J.GREATER_EQUAL=">=",J.LESS="<",J.LESS_EQUAL="<=",J.AND="&&",J.OR="||",J.prototype=Object.create(i.a.prototype),J.prototype.constructor=J,J.prototype.nodeType="Cond",J.prototype.getType=function(e){if(this.ifNode){var t=this.ifNode.getType(e),r=this.elseNode.getType(e);return e.getTypeLength(r)>e.getTypeLength(t)?r:t}return"b"},J.prototype.getCondType=function(e){return e.getTypeLength(this.b.getType(e))>e.getTypeLength(this.a.getType(e))?this.b.getType(e):this.a.getType(e)},J.prototype.generate=function(e,t){var r,n=this.getType(e),i=this.getCondType(e),o=this.a.build(e,i),a=this.b.build(e,i);if(this.ifNode){var s=this.ifNode.build(e,n),l=this.elseNode.build(e,n);r="( "+[o,this.op,a,"?",s,":",l].join(" ")+" )"}else r="( "+o+" "+this.op+" "+a+" )";return e.format(r,this.getType(e),t)},J.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.a=e.a,this.b=e.b,this.op=e.op,this.ifNode=e.ifNode,this.elseNode=e.elseNode,this},J.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).a=this.a.toJSON(e).uuid,t.b=this.b.toJSON(e).uuid,t.op=this.op,t.ifNode&&(t.ifNode=this.ifNode.toJSON(e).uuid),t.elseNode&&(t.elseNode=this.elseNode.toJSON(e).uuid)),t},q.prototype=Object.create(i.a.prototype),q.prototype.constructor=q,q.prototype.nodeType="Noise",q.Nodes={snoise:new c.a(["float snoise(vec2 co) {","\treturn fract( sin( dot( co.xy, vec2( 12.9898, 78.233 ) ) ) * 43758.5453 );","}"].join("\n"))},q.prototype.generate=function(e,t){var r=e.include(q.Nodes.snoise);return e.format(r+"( "+this.uv.build(e,"v2")+" )",this.getType(e),t)},q.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.uv=e.uv,this},q.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid),t},K.prototype=Object.create(i.a.prototype),K.prototype.constructor=K,K.prototype.nodeType="Noise",K.Nodes={checker:new c.a(["float checker( vec2 uv ) {","\tfloat cx = floor( uv.x );","\tfloat cy = floor( uv.y ); ","\tfloat result = mod( cx + cy, 2.0 );","\treturn sign( result );","}"].join("\n"))},K.prototype.generate=function(e,t){var r=e.include(K.Nodes.checker);return e.format(r+"( "+this.uv.build(e,"v2")+" )",this.getType(e),t)},K.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.uv=e.uv,this},K.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid),t};var Q,Z=r("Xu5e"),$=r("voZv");function ee(e,t){i.a.call(this,"v3"),this.value=e,this.scale=t||new x.a(1,1)}function te(e,t){i.a.call(this,"v3"),this.value=e,this.scale=t||new w.a(1),this.toNormalMap=!1}function re(e,t){n.a.call(this),this.code=e,this.value=t}ee.Nodes={perturbNormal2Arb:new c.a("vec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 map, vec2 vUv, vec2 normalScale ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tvec3 mapN = map * 2.0 - 1.0;\n\n\t\tmapN.xy *= normalScale;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\t// Workaround for Adreno GPUs gl_FrontFacing bug. See #15850 and #10331\n\n\t\t\tif ( dot( cross( S, T ), N ) < 0.0 ) mapN.xy *= - 1.0;\n\n\t\t#else\n\n\t\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\tmat3 tsn = mat3( S, T, N );\n\t\treturn normalize( tsn * mapN );\n\n\t}",null,{derivatives:!0})},ee.prototype=Object.create(i.a.prototype),ee.prototype.constructor=ee,ee.prototype.nodeType="NormalMap",ee.prototype.generate=function(e,t){if(e.isShader("fragment")){var r=e.include(ee.Nodes.perturbNormal2Arb);this.normal=this.normal||new V.a,this.position=this.position||new R.a(R.a.VIEW),this.uv=this.uv||new D.a;var n=this.scale.build(e,"v2");return e.material.side===S.BackSide&&(n="-"+n),e.format(r+"( -"+this.position.build(e,"v3")+", "+this.normal.build(e,"v3")+", "+this.value.build(e,"v3")+", "+this.uv.build(e,"v2")+", "+n+" )",this.getType(e),t)}return console.warn("THREE.NormalMapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)},ee.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.value=e.value,this.scale=e.scale,this},ee.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t},te.Nodes={dHdxy_fwd:Q=new c.a(["vec2 dHdxy_fwd( sampler2D bumpMap, vec2 vUv, float bumpScale ) {","\tvec2 dSTdx = dFdx( vUv );","\tvec2 dSTdy = dFdy( vUv );","\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;","\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;","\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;","\treturn vec2( dBx, dBy );","}"].join("\n"),null,{derivatives:!0}),perturbNormalArb:new c.a(["vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {","\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );","\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );","\tvec3 vN = surf_norm;","\tvec3 R1 = cross( vSigmaY, vN );","\tvec3 R2 = cross( vN, vSigmaX );","\tfloat fDet = dot( vSigmaX, R1 );","\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );","\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );","\treturn normalize( abs( fDet ) * surf_norm - vGrad );","}"].join("\n"),[Q],{derivatives:!0}),bumpToNormal:new c.a(["vec3 bumpToNormal( sampler2D bumpMap, vec2 uv, float scale ) {","\tvec2 dSTdx = dFdx( uv );","\tvec2 dSTdy = dFdy( uv );","\tfloat Hll = texture2D( bumpMap, uv ).x;","\tfloat dBx = texture2D( bumpMap, uv + dSTdx ).x - Hll;","\tfloat dBy = texture2D( bumpMap, uv + dSTdy ).x - Hll;","\treturn vec3( .5 - ( dBx * scale ), .5 - ( dBy * scale ), 1.0 );","}"].join("\n"),null,{derivatives:!0})},te.prototype=Object.create(i.a.prototype),te.prototype.constructor=te,te.prototype.nodeType="BumpMap",te.prototype.hashProperties=["toNormalMap"],te.prototype.generate=function(e,t){if(e.isShader("fragment")){if(this.toNormalMap){var r=e.include(te.Nodes.bumpToNormal);return e.format(r+"( "+this.value.build(e,"sampler2D")+", "+this.value.uv.build(e,"v2")+", "+this.scale.build(e,"f")+" )",this.getType(e),t)}var n=e.include(te.Nodes.dHdxy_fwd),i=e.include(te.Nodes.perturbNormalArb);this.normal=this.normal||new V.a,this.position=this.position||new R.a(R.a.VIEW);var o=n+"( "+this.value.build(e,"sampler2D")+", "+this.value.uv.build(e,"v2")+", "+this.scale.build(e,"f")+" )";return e.format(i+"( -"+this.position.build(e,"v3")+", "+this.normal.build(e,"v3")+", "+o+" )",this.getType(e),t)}return console.warn("THREE.BumpMapNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.getType(e),t)},te.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.value=e.value,this.scale=e.scale,this},te.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.scale=this.scale.toJSON(e).uuid),t},re.prototype=Object.create(n.a.prototype),re.prototype.constructor=re,re.prototype.nodeType="Bypass",re.prototype.getType=function(e){return this.value?this.value.getType(e):e.isShader("fragment")?"f":"void"},re.prototype.generate=function(e,t){var r=this.code.build(e,t)+";";return e.addNodeCode(r),e.isShader("vertex")?this.value?this.value.build(e,t):void 0:this.value?this.value.build(e,t):e.format("0.0","f",t)},re.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.code=e.code,this.value=e.value,this},re.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).code=this.code.toJSON(e).uuid,this.value&&(t.value=this.value.toJSON(e).uuid)),t};var ne=f.a.elements;function ie(e,t,r,n){i.a.call(this,"f"),this.x=e,this.y=t,this.z=r,this.w=n}function oe(e,t){n.a.call(this),this.node=e,this.components=t||"x"}function ae(e,t,r){w.a.call(this),this.scale=void 0!==e?e:1,this.scope=t||ae.GLOBAL,this.timeScale=void 0!==r?r:void 0!==e}function se(e,t){_.a.call(this),this.params={},this.velocity=new S.Vector3,this.setTarget(e),this.setParams(t)}function le(e,t){h.a.call(this,"( uvTransform * vec3( uvNode, 1 ) ).xy","vec2"),this.uv=e||new D.a,this.position=t||new E}function ue(e){w.a.call(this),this.texture=e,this.maxMIPLevel=0}function ce(e,t){i.a.call(this,"f"),this.roughness=e,this.texture=t,this.maxMIPLevel=void 0}ie.prototype=Object.create(i.a.prototype),ie.prototype.constructor=ie,ie.prototype.nodeType="Join",ie.prototype.getNumElements=function(){for(var e=ne.length;e--;)if(void 0!==this[ne[e]]){++e;break}return Math.max(e,2)},ie.prototype.getType=function(e){return e.getTypeFromLength(this.getNumElements())},ie.prototype.generate=function(e,t){for(var r=this.getType(e),n=this.getNumElements(),i=[],o=0;o<n;o++){var a=this[ne[o]];i.push(a?a.build(e,"f"):"0.0")}var s=(n>1?e.getConstructorFromLength(n):"")+"( "+i.join(", ")+" )";return e.format(s,r,t)},ie.prototype.copy=function(e){for(var t in i.a.prototype.copy.call(this,e),e.inputs)this[t]=e.inputs[t];return this},ie.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t){(t=this.createJSONNode(e)).inputs={};for(var r=this.getNumElements(),n=0;n<r;n++){var i=this[ne[n]];i&&(t.inputs[ne[n]]=i.toJSON(e).uuid)}}return t},oe.prototype=Object.create(n.a.prototype),oe.prototype.constructor=oe,oe.prototype.nodeType="Switch",oe.prototype.getType=function(e){return e.getTypeFromLength(this.components.length)},oe.prototype.generate=function(e,t){var r=this.node.getType(e),n=this.node.build(e,r),i=e.getTypeLength(r)-1;if(i>0){var o,a=0,s=e.colorToVectorProperties(this.components),l=s.length;for(o=0;o<l;o++)a=Math.max(a,e.getIndexByElement(s.charAt(o)));for(a>i&&(a=i),n+=".",o=0;o<l;o++){var u=e.getIndexByElement(s.charAt(o));u>a&&(u=a),n+=e.getElementByIndex(u)}return e.format(n,this.getType(e),t)}return e.format(n,r,t)},oe.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.node=e.node,this.components=e.components,this},oe.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).node=this.node.toJSON(e).uuid,t.components=this.components),t},ae.GLOBAL="global",ae.LOCAL="local",ae.DELTA="delta",ae.prototype=Object.create(w.a.prototype),ae.prototype.constructor=ae,ae.prototype.nodeType="Timer",ae.prototype.getReadonly=function(){return!1},ae.prototype.getUnique=function(){return this.timeScale&&(this.scope===ae.GLOBAL||this.scope===ae.DELTA)},ae.prototype.updateFrame=function(e){var t=this.timeScale?this.scale:1;switch(this.scope){case ae.LOCAL:this.value+=e.delta*t;break;case ae.DELTA:this.value=e.delta*t;break;default:this.value=e.time*t}},ae.prototype.copy=function(e){return w.a.prototype.copy.call(this,e),this.scope=e.scope,this.scale=e.scale,this.timeScale=e.timeScale,this},ae.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope,t.scale=this.scale,t.timeScale=this.timeScale),t},p.a.addKeyword("time",function(){return new ae}),se.prototype=Object.create(_.a.prototype),se.prototype.constructor=se,se.prototype.nodeType="Velocity",se.prototype.getReadonly=function(){return!1},se.prototype.setParams=function(e){switch(this.params.type){case"elastic":delete this.moment,delete this.speed,delete this.springVelocity,delete this.lastVelocity}switch(this.params=e||{},this.params.type){case"elastic":this.moment=new S.Vector3,this.speed=new S.Vector3,this.springVelocity=new S.Vector3,this.lastVelocity=new S.Vector3}},se.prototype.setTarget=function(e){this.target&&(delete this.position,delete this.oldPosition),this.target=e,e&&(this.position=e.getWorldPosition(this.position||new S.Vector3),this.oldPosition=this.position.clone())},se.prototype.updateFrameVelocity=function(){this.target&&(this.position=this.target.getWorldPosition(this.position||new S.Vector3),this.velocity.subVectors(this.position,this.oldPosition),this.oldPosition.copy(this.position))},se.prototype.updateFrame=function(e){switch(this.updateFrameVelocity(e),this.params.type){case"elastic":var t=e.delta*(this.params.fps||60),r=Math.pow(this.params.spring,t),n=Math.pow(this.params.damping,t);this.velocity.multiplyScalar(Math.exp(-this.params.damping*t)),this.velocity.add(this.springVelocity),this.velocity.add(this.speed.multiplyScalar(n).multiplyScalar(1-r)),this.speed.subVectors(this.velocity,this.lastVelocity),this.springVelocity.add(this.speed),this.springVelocity.multiplyScalar(r),this.moment.add(this.springVelocity),this.moment.multiplyScalar(n),this.lastVelocity.copy(this.velocity),this.value.copy(this.moment);break;default:this.value.copy(this.velocity)}},se.prototype.copy=function(e){return _.a.prototype.copy.call(this,e),e.target&&this.setTarget(e.target),this.setParams(e.params),this},se.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.target&&(t.target=this.target.uuid),t.params=JSON.parse(JSON.stringify(this.params))),t},le.prototype=Object.create(h.a.prototype),le.prototype.constructor=le,le.prototype.nodeType="UVTransform",le.prototype.generate=function(e,t){return this.keywords.uvNode=this.uv,this.keywords.uvTransform=this.position,h.a.prototype.generate.call(this,e,t)},le.prototype.setUvTransform=function(e,t,r,n,i,o,a){o=void 0!==o?o:.5,a=void 0!==a?a:.5,this.position.value.setUvTransform(e,t,r,n,i,o,a)},le.prototype.copy=function(e){return h.a.prototype.copy.call(this,e),this.uv=e.uv,this.position=e.position,this},le.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).uv=this.uv.toJSON(e).uuid,t.position=this.position.toJSON(e).uuid),t},ue.prototype=Object.create(w.a.prototype),ue.prototype.constructor=ue,ue.prototype.nodeType="MaxMIPLevel",Object.defineProperties(ue.prototype,{value:{get:function(){if(0===this.maxMIPLevel){var e=this.texture.value.image;Array.isArray(e)&&(e=e[0]),this.maxMIPLevel=void 0!==e?Math.log(Math.max(e.width,e.height))*Math.LOG2E:0}return this.maxMIPLevel},set:function(){}}}),ue.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture.uuid),t},ce.Nodes={getSpecularMIPLevel:new c.a(["float getSpecularMIPLevel( const in float roughness, const in float maxMIPLevelScalar ) {","\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );","\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );","\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );","}"].join("\n"))},ce.prototype=Object.create(i.a.prototype),ce.prototype.constructor=ce,ce.prototype.nodeType="SpecularMIPLevel",ce.prototype.setTexture=function(e){return this.texture=e,this},ce.prototype.generate=function(e,t){if(e.isShader("fragment")){this.maxMIPLevel=this.maxMIPLevel||new ue,this.maxMIPLevel.texture=this.texture;var r=e.include(ce.Nodes.getSpecularMIPLevel);return e.format(r+"( "+this.roughness.build(e,"f")+", "+this.maxMIPLevel.build(e,"f")+" )",this.type,t)}return console.warn("THREE.SpecularMIPLevelNode is not compatible with "+e.shader+" shader."),e.format("0.0",this.type,t)},ce.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.texture=e.texture,this.roughness=e.roughness,this},ce.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).texture=this.texture,t.roughness=this.roughness),t};var he,de=r("Dfdy");function pe(e){i.a.call(this),this.slots=e||{}}function fe(e,t,r,n){i.a.call(this,"v4"),this.value=e,this.uv=t||new D.a,this.radius=r||new x.a(1,1),this.size=n,this.blurX=!0,this.blurY=!0,this.horizontal=new w.a(1/64),this.vertical=new w.a(1/64)}function me(e){i.a.call(this,"f"),this.rgb=e}function ve(e,t,r){i.a.call(this,"v3"),this.rgb=e,this.adjustment=t,this.method=r||ve.SATURATION}pe.prototype=Object.create(i.a.prototype),pe.prototype.constructor=pe,pe.prototype.nodeType="SubSlot",pe.prototype.getType=function(e,t){return t},pe.prototype.generate=function(e,t){return this.slots[e.slot]?this.slots[e.slot].build(e,t):e.format("0.0","f",t)},pe.prototype.copy=function(e){for(var t in i.a.prototype.copy.call(this,e),e.slots)this.slots[t]=e.slots[t];return this},pe.prototype.toJSON=function(e){var t=this.getJSONNode(e);if(!t)for(var r in(t=this.createJSONNode(e)).slots={},this.slots){var n=this.slots[r];n&&(t.slots[r]=n.toJSON(e).uuid)}return t},fe.Nodes={blurX:new c.a(["vec4 blurX( sampler2D tex, vec2 uv, float s ) {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( tex, vec2( uv.x - 4.0 * s, uv.y ) ) * 0.051;","\tsum += texture2D( tex, vec2( uv.x - 3.0 * s, uv.y ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x - 2.0 * s, uv.y ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x - 1.0 * s, uv.y ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x, uv.y ) ) * 0.1633;","\tsum += texture2D( tex, vec2( uv.x + 1.0 * s, uv.y ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x + 2.0 * s, uv.y ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x + 3.0 * s, uv.y ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x + 4.0 * s, uv.y ) ) * 0.051;","\treturn sum * .667;","}"].join("\n")),blurY:new c.a(["vec4 blurY( sampler2D tex, vec2 uv, float s ) {","\tvec4 sum = vec4( 0.0 );","\tsum += texture2D( tex, vec2( uv.x, uv.y - 4.0 * s ) ) * 0.051;","\tsum += texture2D( tex, vec2( uv.x, uv.y - 3.0 * s ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x, uv.y - 2.0 * s ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x, uv.y - 1.0 * s ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x, uv.y ) ) * 0.1633;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 1.0 * s ) ) * 0.1531;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 2.0 * s ) ) * 0.12245;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 3.0 * s ) ) * 0.0918;","\tsum += texture2D( tex, vec2( uv.x, uv.y + 4.0 * s ) ) * 0.051;","\treturn sum * .667;","}"].join("\n"))},fe.prototype=Object.create(i.a.prototype),fe.prototype.constructor=fe,fe.prototype.nodeType="Blur",fe.prototype.hashProperties=["blurX","blurY"],fe.prototype.updateFrame=function(){if(this.size)this.horizontal.value=this.radius.x/this.size.x,this.vertical.value=this.radius.y/this.size.y;else if(this.value.value&&this.value.value.image){var e=this.value.value.image;this.horizontal.value=this.radius.x/e.width,this.vertical.value=this.radius.y/e.height}},fe.prototype.generate=function(e,t){if(e.isShader("fragment")){var r,n=[],i=e.include(fe.Nodes.blurX),o=e.include(fe.Nodes.blurY);return this.blurX&&n.push(i+"( "+this.value.build(e,"sampler2D")+", "+this.uv.build(e,"v2")+", "+this.horizontal.build(e,"f")+" )"),this.blurY&&n.push(o+"( "+this.value.build(e,"sampler2D")+", "+this.uv.build(e,"v2")+", "+this.vertical.build(e,"f")+" )"),r=2==n.length?"( "+n.join(" + ")+" / 2.0 )":n.length?"( "+n[0]+" )":"vec4( 0.0 )",e.format(r,this.getType(e),t)}return console.warn("THREE.BlurNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t)},fe.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.value=e.value,this.uv=e.uv,this.radius=e.radius,void 0!==e.size&&(this.size=new S.Vector2(e.size.x,e.size.y)),this.blurX=e.blurX,this.blurY=e.blurY,this},fe.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid,t.uv=this.uv.toJSON(e).uuid,t.radius=this.radius.toJSON(e).uuid,this.size&&(t.size={x:this.size.x,y:this.size.y}),t.blurX=this.blurX,t.blurY=this.blurY),t},me.Nodes={LUMA:he=new a.a("vec3 LUMA vec3( 0.2125, 0.7154, 0.0721 )"),luminance:new c.a(["float luminance( vec3 rgb ) {","\treturn dot( rgb, LUMA );","}"].join("\n"),[he])},me.prototype=Object.create(i.a.prototype),me.prototype.constructor=me,me.prototype.nodeType="Luminance",me.prototype.generate=function(e,t){var r=e.include(me.Nodes.luminance);return e.format(r+"( "+this.rgb.build(e,"v3")+" )",this.getType(e),t)},me.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.rgb=e.rgb,this},me.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).rgb=this.rgb.toJSON(e).uuid),t},ve.Nodes={hue:new c.a(["vec3 hue(vec3 rgb, float adjustment) {","\tconst mat3 RGBtoYIQ = mat3(0.299, 0.587, 0.114, 0.595716, -0.274453, -0.321263, 0.211456, -0.522591, 0.311135);","\tconst mat3 YIQtoRGB = mat3(1.0, 0.9563, 0.6210, 1.0, -0.2721, -0.6474, 1.0, -1.107, 1.7046);","\tvec3 yiq = RGBtoYIQ * rgb;","\tfloat hue = atan(yiq.z, yiq.y) + adjustment;","\tfloat chroma = sqrt(yiq.z * yiq.z + yiq.y * yiq.y);","\treturn YIQtoRGB * vec3(yiq.x, chroma * cos(hue), chroma * sin(hue));","}"].join("\n")),saturation:new c.a(["vec3 saturation(vec3 rgb, float adjustment) {","\tvec3 intensity = vec3( luminance( rgb ) );","\treturn mix( intensity, rgb, adjustment );","}"].join("\n"),[me.Nodes.luminance]),vibrance:new c.a(["vec3 vibrance(vec3 rgb, float adjustment) {","\tfloat average = (rgb.r + rgb.g + rgb.b) / 3.0;","\tfloat mx = max(rgb.r, max(rgb.g, rgb.b));","\tfloat amt = (mx - average) * (-3.0 * adjustment);","\treturn mix(rgb.rgb, vec3(mx), amt);","}"].join("\n"))},ve.SATURATION="saturation",ve.HUE="hue",ve.VIBRANCE="vibrance",ve.BRIGHTNESS="brightness",ve.CONTRAST="contrast",ve.prototype=Object.create(i.a.prototype),ve.prototype.constructor=ve,ve.prototype.nodeType="ColorAdjustment",ve.prototype.hashProperties=["method"],ve.prototype.generate=function(e,t){var r=this.rgb.build(e,"v3"),n=this.adjustment.build(e,"f");switch(this.method){case ve.BRIGHTNESS:return e.format("( "+r+" + "+n+" )",this.getType(e),t);case ve.CONTRAST:return e.format("( "+r+" * "+n+" )",this.getType(e),t)}var i=e.include(ve.Nodes[this.method]);return e.format(i+"( "+r+", "+n+" )",this.getType(e),t)},ve.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.rgb=e.rgb,this.adjustment=e.adjustment,this.method=e.method,this},ve.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).rgb=this.rgb.toJSON(e).uuid,t.adjustment=this.adjustment.toJSON(e).uuid,t.method=this.method),t};var ge=r("VG6x");function ye(){n.a.call(this),this.color=new A.a(16777215)}function be(){n.a.call(this),this.color=new A.a(15658734),this.spherical=!0}function we(){n.a.call(this),this.color=new A.a(15658734),this.specular=new A.a(1118481),this.shininess=new w.a(30)}function xe(){n.a.call(this),this.color=new A.a(16777215),this.roughness=new w.a(1),this.metalness=new w.a(0)}function _e(){xe.call(this),this.properties={color:new S.Color(16777215),roughness:.5,metalness:.5,normalScale:new S.Vector2(1,1)},this.inputs={color:new I(this.properties,"color","c"),roughness:new I(this.properties,"roughness","f"),metalness:new I(this.properties,"metalness","f"),normalScale:new I(this.properties,"normalScale","v2")}}function Te(){var e=new ye;P.a.call(this,e,e),this.type="BasicNodeMaterial"}function Ae(){var e=new be;P.a.call(this,e,e),this.type="SpriteNodeMaterial"}function Se(){var e=new we;P.a.call(this,e,e),this.type="PhongNodeMaterial"}function Ee(){var e=new xe;P.a.call(this,e,e),this.type="StandardNodeMaterial"}function Ce(){var e=new _e;P.a.call(this,e,e),this.type="MeshStandardNodeMaterial"}function Me(e,t){if(void 0===t){var r={minFilter:S.LinearFilter,magFilter:S.LinearFilter,format:S.RGBAFormat},n=e.getDrawingBufferSize(new S.Vector2);t=new S.WebGLRenderTarget(n.width,n.height,r)}this.renderer=e,this.renderTarget=t,this.output=new O.a,this.material=new P.a,this.camera=new S.OrthographicCamera(-1,1,1,-1,0,1),this.scene=new S.Scene,this.quad=new S.Mesh(new S.PlaneBufferGeometry(2,2),this.material),this.quad.frustumCulled=!1,this.scene.add(this.quad),this.needsUpdate=!0}ye.prototype=Object.create(n.a.prototype),ye.prototype.constructor=ye,ye.prototype.nodeType="Basic",ye.prototype.generate=function(e){var t;if(e.isShader("vertex")){var r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED"," varying vec3 vNormal;","#endif"].join("\n"));var n=["#include <beginnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED"," vNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];r&&n.push(r.code,r.result?"transformed = "+r.result+";":""),n.push("#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <fog_vertex>","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),t=n.join("\n")}else{this.color.analyze(e,{slot:"color"}),this.alpha&&this.alpha.analyze(e),this.mask&&this.mask.analyze(e);var i=this.color.flow(e,"c",{slot:"color"}),o=this.alpha?this.alpha.flow(e,"f"):void 0,a=this.mask?this.mask.flow(e,"b"):void 0;e.requires.transparent=void 0!==o,e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED"," varying vec3 vNormal;","#endif"].join("\n"));n=["#include <normal_fragment_begin>",i.code];a&&n.push(a.code,"if ( ! "+a.result+" ) discard;"),o&&n.push(o.code,"#ifdef ALPHATEST"," if ( "+o.result+" <= ALPHATEST ) discard;","#endif"),o?n.push("gl_FragColor = vec4("+i.result+", "+o.result+" );"):n.push("gl_FragColor = vec4("+i.result+", 1.0 );"),t=n.join("\n")}return t},ye.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.color=e.color,e.position&&(this.position=e.position),e.alpha&&(this.alpha=e.alpha),e.mask&&(this.mask=e.mask),this},ye.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).color=this.color.toJSON(e).uuid,this.position&&(t.position=this.position.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.mask&&(t.mask=this.mask.toJSON(e).uuid)),t},be.prototype=Object.create(n.a.prototype),be.prototype.constructor=be,be.prototype.nodeType="Sprite",be.prototype.build=function(e){if(e.define("SPRITE"),e.requires.lights=!1,e.requires.transparent=void 0!==this.alpha,e.isShader("vertex")){var t=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(S.UniformsUtils.merge([S.UniformsLib.fog])),e.addParsCode(["#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n")),o=["#include <clipping_planes_fragment>","#include <begin_vertex>"],t&&o.push(t.code,t.result?"transformed = "+t.result+";":""),o.push("#include <project_vertex>","#include <fog_vertex>","mat4 modelViewMtx = modelViewMatrix;","mat4 modelMtx = modelMatrix;","modelMtx[3][0] = 0.0;","modelMtx[3][1] = 0.0;","modelMtx[3][2] = 0.0;"),this.spherical||o.push("modelMtx[1][1] = 1.0;"),o.push("modelViewMtx[0][0] = 1.0;","modelViewMtx[0][1] = 0.0;","modelViewMtx[0][2] = 0.0;"),this.spherical&&o.push("modelViewMtx[1][0] = 0.0;","modelViewMtx[1][1] = 1.0;","modelViewMtx[1][2] = 0.0;"),o.push("modelViewMtx[2][0] = 0.0;","modelViewMtx[2][1] = 0.0;","modelViewMtx[2][2] = 1.0;","gl_Position = projectionMatrix * modelViewMtx * modelMtx * vec4( transformed, 1.0 );","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","#include <fog_vertex>")}else{e.addParsCode(["#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","#include <clipping_planes_pars_fragment>"].join("\n")),e.addCode(["#include <clipping_planes_fragment>","#include <logdepthbuf_fragment>"].join("\n")),this.mask&&this.mask.analyze(e),this.alpha&&this.alpha.analyze(e),this.color.analyze(e,{slot:"color"});var r=this.mask?this.mask.flow(e,"b"):void 0,n=this.alpha?this.alpha.flow(e,"f"):void 0,i=this.color.flow(e,"c",{slot:"color"}),o=[];r&&o.push(r.code,"if ( ! "+r.result+" ) discard;"),n?o.push(n.code,"#ifdef ALPHATEST","if ( "+n.result+" <= ALPHATEST ) discard;","#endif",i.code,"gl_FragColor = vec4( "+i.result+", "+n.result+" );"):o.push(i.code,"gl_FragColor = vec4( "+i.result+", 1.0 );"),o.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>")}return o.join("\n")},be.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,void 0!==e.spherical&&(this.spherical=e.spherical),e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),this},be.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,!1===this.spherical&&(t.spherical=!1),this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid)),t},we.prototype=Object.create(n.a.prototype),we.prototype.constructor=we,we.prototype.nodeType="Phong",we.prototype.build=function(e){var t;if(e.define("PHONG"),e.requires.lights=!0,e.isShader("vertex")){var r=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(S.UniformsUtils.merge([S.UniformsLib.fog,S.UniformsLib.lights])),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var n=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];r&&n.push(r.code,r.result?"transformed = "+r.result+";":""),n.push("\t#include <morphtarget_vertex>","\t#include <skinning_vertex>","\t#include <project_vertex>","\t#include <fog_vertex>","\t#include <logdepthbuf_vertex>","\t#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","\t#include <worldpos_vertex>","\t#include <shadowmap_vertex>","\t#include <fog_vertex>"),t=n.join("\n")}else{this.mask&&this.mask.analyze(e),this.color.analyze(e,{slot:"color"}),this.specular.analyze(e),this.shininess.analyze(e),this.alpha&&this.alpha.analyze(e),this.normal&&this.normal.analyze(e),this.light&&this.light.analyze(e,{cache:"light"}),this.ao&&this.ao.analyze(e),this.ambient&&this.ambient.analyze(e),this.shadow&&this.shadow.analyze(e),this.emissive&&this.emissive.analyze(e,{slot:"emissive"}),this.environment&&this.environment.analyze(e,{slot:"environment"}),this.environmentAlpha&&this.environment&&this.environmentAlpha.analyze(e);var i=this.mask?this.mask.flow(e,"b"):void 0,o=this.color.flow(e,"c",{slot:"color"}),a=this.specular.flow(e,"c"),s=this.shininess.flow(e,"f"),l=this.alpha?this.alpha.flow(e,"f"):void 0,u=this.normal?this.normal.flow(e,"v3"):void 0,c=this.light?this.light.flow(e,"v3",{cache:"light"}):void 0,h=this.ao?this.ao.flow(e,"f"):void 0,d=this.ambient?this.ambient.flow(e,"c"):void 0,p=this.shadow?this.shadow.flow(e,"c"):void 0,f=this.emissive?this.emissive.flow(e,"c",{slot:"emissive"}):void 0,m=this.environment?this.environment.flow(e,"c",{slot:"environment"}):void 0,v=this.environmentAlpha&&this.environment?this.environmentAlpha.flow(e,"f"):void 0;e.requires.transparent=void 0!==l,e.addParsCode(["#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_phong_pars_fragment>","#include <shadowmap_pars_fragment>","#include <logdepthbuf_pars_fragment>"].join("\n"));n=["#include <normal_fragment_begin>","\tBlinnPhongMaterial material;"];i&&n.push(i.code,"if ( ! "+i.result+" ) discard;"),n.push(o.code,"\tvec3 diffuseColor = "+o.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",a.code,"\tvec3 specular = "+a.result+";",s.code,"\tfloat shininess = max( 0.0001, "+s.result+" );","\tfloat specularStrength = 1.0;"),l&&n.push(l.code,"#ifdef ALPHATEST","if ( "+l.result+" <= ALPHATEST ) discard;","#endif"),u&&n.push(u.code,"normal = "+u.result+";"),n.push("material.diffuseColor = "+(c?"vec3( 1.0 )":"diffuseColor")+";"),n.push("material.specularColor = specular;","material.specularShininess = shininess;","material.specularStrength = specularStrength;","#include <lights_fragment_begin>","#include <lights_fragment_end>"),c&&(n.push(c.code,"reflectedLight.directDiffuse = "+c.result+";"),n.push("reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),h&&n.push(h.code,"reflectedLight.indirectDiffuse *= "+h.result+";"),d&&n.push(d.code,"reflectedLight.indirectDiffuse += "+d.result+";"),p&&n.push(p.code,"reflectedLight.directDiffuse *= "+p.result+";","reflectedLight.directSpecular *= "+p.result+";"),f&&n.push(f.code,"reflectedLight.directDiffuse += "+f.result+";"),n.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular;"),m&&(n.push(m.code),v?n.push(v.code,"outgoingLight = mix( outgoingLight, "+m.result+", "+v.result+" );"):n.push("outgoingLight = "+m.result+";")),l?n.push("gl_FragColor = vec4( outgoingLight, "+l.result+" );"):n.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),n.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>"),t=n.join("\n")}return t},we.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,this.specular=e.specular,this.shininess=e.shininess,e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),e.normal&&(this.normal=e.normal),e.light&&(this.light=e.light),e.shadow&&(this.shadow=e.shadow),e.ao&&(this.ao=e.ao),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.environment&&(this.environment=e.environment),e.environmentAlpha&&(this.environmentAlpha=e.environmentAlpha),this},we.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,t.specular=this.specular.toJSON(e).uuid,t.shininess=this.shininess.toJSON(e).uuid,this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.normal&&(t.normal=this.normal.toJSON(e).uuid),this.light&&(t.light=this.light.toJSON(e).uuid),this.ao&&(t.ao=this.ao.toJSON(e).uuid),this.ambient&&(t.ambient=this.ambient.toJSON(e).uuid),this.shadow&&(t.shadow=this.shadow.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid),this.environment&&(t.environment=this.environment.toJSON(e).uuid),this.environmentAlpha&&(t.environmentAlpha=this.environmentAlpha.toJSON(e).uuid)),t},xe.prototype=Object.create(n.a.prototype),xe.prototype.constructor=xe,xe.prototype.nodeType="Standard",xe.prototype.build=function(e){var t;e.define("STANDARD");var r=this.clearcoat||this.clearcoatRoughness||this.clearCoatNormal;if(r&&e.define("CLEARCOAT"),e.requires.lights=!0,e.extensions.derivatives=!0,e.extensions.shaderTextureLOD=!0,e.isShader("vertex")){var n=this.position?this.position.analyzeAndFlow(e,"v3",{cache:"position"}):void 0;e.mergeUniform(S.UniformsUtils.merge([S.UniformsLib.fog,S.UniformsLib.lights])),S.UniformsLib.LTC_1&&(e.uniforms.ltc_1={value:void 0},e.uniforms.ltc_2={value:void 0}),e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <fog_pars_vertex>","#include <morphtarget_pars_vertex>","#include <skinning_pars_vertex>","#include <shadowmap_pars_vertex>","#include <logdepthbuf_pars_vertex>","#include <clipping_planes_pars_vertex>"].join("\n"));var i=["#include <beginnormal_vertex>","#include <morphnormal_vertex>","#include <skinbase_vertex>","#include <skinnormal_vertex>","#include <defaultnormal_vertex>","#ifndef FLAT_SHADED","\tvNormal = normalize( transformedNormal );","#endif","#include <begin_vertex>"];n&&i.push(n.code,n.result?"transformed = "+n.result+";":""),i.push("#include <morphtarget_vertex>","#include <skinning_vertex>","#include <project_vertex>","#include <fog_vertex>","#include <logdepthbuf_vertex>","#include <clipping_planes_vertex>","\tvViewPosition = - mvPosition.xyz;","#include <worldpos_vertex>","#include <shadowmap_vertex>"),t=i.join("\n")}else{var o=new h.a("material.specularRoughness","f"),a=new h.a("material.clearcoatRoughness","f"),s={roughness:o,bias:new ce(o),viewNormal:new h.a("normal","v3"),worldNormal:new h.a("inverseTransformDirection( geometry.normal, viewMatrix )","v3"),gamma:!0},l={gamma:!0},u={roughness:a,bias:new ce(a),viewNormal:new h.a("clearcoatNormal","v3"),worldNormal:new h.a("inverseTransformDirection( geometry.clearcoatNormal, viewMatrix )","v3"),gamma:!0};this.mask&&this.mask.analyze(e),this.color.analyze(e,{slot:"color",context:l}),this.roughness.analyze(e),this.metalness.analyze(e),this.alpha&&this.alpha.analyze(e),this.normal&&this.normal.analyze(e),this.clearcoat&&this.clearcoat.analyze(e),this.clearcoatRoughness&&this.clearcoatRoughness.analyze(e),this.clearcoatNormal&&this.clearcoatNormal.analyze(e),this.reflectivity&&this.reflectivity.analyze(e),this.light&&this.light.analyze(e,{cache:"light"}),this.ao&&this.ao.analyze(e),this.ambient&&this.ambient.analyze(e),this.shadow&&this.shadow.analyze(e),this.emissive&&this.emissive.analyze(e,{slot:"emissive"}),this.environment&&(this.environment.analyze(e,{cache:"radiance",context:s,slot:"radiance"}),e.requires.irradiance&&this.environment.analyze(e,{cache:"irradiance",context:s,slot:"irradiance"})),this.sheen&&this.sheen.analyze(e);var c,d=this.mask?this.mask.flow(e,"b"):void 0,p=this.color.flow(e,"c",{slot:"color",context:l}),f=this.roughness.flow(e,"f"),m=this.metalness.flow(e,"f"),v=this.alpha?this.alpha.flow(e,"f"):void 0,g=this.normal?this.normal.flow(e,"v3"):void 0,y=this.clearcoat?this.clearcoat.flow(e,"f"):void 0,b=(a=this.clearcoatRoughness?this.clearcoatRoughness.flow(e,"f"):void 0,this.clearcoatNormal?this.clearcoatNormal.flow(e,"v3"):void 0),w=this.reflectivity?this.reflectivity.flow(e,"f"):void 0,x=this.light?this.light.flow(e,"v3",{cache:"light"}):void 0,_=this.ao?this.ao.flow(e,"f"):void 0,T=this.ambient?this.ambient.flow(e,"c"):void 0,A=this.shadow?this.shadow.flow(e,"c"):void 0,E=this.emissive?this.emissive.flow(e,"c",{slot:"emissive"}):void 0;this.environment&&(c={radiance:this.environment.flow(e,"c",{cache:"radiance",context:s,slot:"radiance"})},e.requires.irradiance&&(c.irradiance=this.environment.flow(e,"c",{cache:"irradiance",context:s,slot:"irradiance"})));var C=r&&c?this.environment.flow(e,"c",{cache:"clearcoat",context:u,slot:"environment"}):void 0,M=this.sheen?this.sheen.flow(e,"c"):void 0;e.requires.transparent=void 0!==v,e.addParsCode(["varying vec3 vViewPosition;","#ifndef FLAT_SHADED","\tvarying vec3 vNormal;","#endif","#include <dithering_pars_fragment>","#include <fog_pars_fragment>","#include <bsdfs>","#include <lights_pars_begin>","#include <lights_physical_pars_fragment>","#include <shadowmap_pars_fragment>","#include <logdepthbuf_pars_fragment>"].join("\n"));i=["#include <clipping_planes_fragment>","\t#include <normal_fragment_begin>","\t#include <clearcoat_normal_fragment_begin>","\tPhysicalMaterial material;","\tmaterial.diffuseColor = vec3( 1.0 );"];d&&i.push(d.code,"if ( ! "+d.result+" ) discard;"),i.push(p.code,"\tvec3 diffuseColor = "+p.result+";","\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );","#include <logdepthbuf_fragment>",f.code,"\tfloat roughnessFactor = "+f.result+";",m.code,"\tfloat metalnessFactor = "+m.result+";"),v&&i.push(v.code,"#ifdef ALPHATEST","\tif ( "+v.result+" <= ALPHATEST ) discard;","#endif"),g&&i.push(g.code,"normal = "+g.result+";"),b&&i.push(b.code,"clearcoatNormal = "+b.result+";"),i.push("vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );"),i.push("material.diffuseColor = "+(x?"vec3( 1.0 )":"diffuseColor * ( 1.0 - metalnessFactor )")+";","material.specularRoughness = max( roughnessFactor, 0.0525 );","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularRoughness = clamp( roughnessFactor, 0.04, 1.0 );"),y?i.push(y.code,"material.clearcoat = saturate( "+y.result+" );"):r&&i.push("material.clearcoat = 0.0;"),a?i.push(a.code,"material.clearcoatRoughness = max( "+a.result+", 0.0525 );","material.clearcoatRoughness += geometryRoughness;","material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );"):r&&i.push("material.clearcoatRoughness = 0.0;"),M&&i.push("material.sheenColor = "+M.result+";"),w?i.push(w.code,"material.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( "+w.result+" ) ), diffuseColor, metalnessFactor );"):i.push("material.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor, metalnessFactor );"),i.push("#include <lights_fragment_begin>"),x&&(i.push(x.code,"reflectedLight.directDiffuse = "+x.result+";"),i.push("diffuseColor *= 1.0 - metalnessFactor;","reflectedLight.directDiffuse *= diffuseColor;","reflectedLight.indirectDiffuse *= diffuseColor;")),_&&i.push(_.code,"reflectedLight.indirectDiffuse *= "+_.result+";","float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );","reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, "+_.result+", material.specularRoughness );"),T&&i.push(T.code,"reflectedLight.indirectDiffuse += "+T.result+";"),A&&i.push(A.code,"reflectedLight.directDiffuse *= "+A.result+";","reflectedLight.directSpecular *= "+A.result+";"),E&&i.push(E.code,"reflectedLight.directDiffuse += "+E.result+";"),c&&(i.push(c.radiance.code),e.requires.irradiance&&i.push(c.irradiance.code),C&&i.push(C.code,"clearcoatRadiance += "+C.result+";"),i.push("radiance += "+c.radiance.result+";"),e.requires.irradiance&&i.push("iblIrradiance += PI * "+c.irradiance.result+";")),i.push("#include <lights_fragment_end>"),i.push("vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular;"),v?i.push("gl_FragColor = vec4( outgoingLight, "+v.result+" );"):i.push("gl_FragColor = vec4( outgoingLight, 1.0 );"),i.push("#include <tonemapping_fragment>","#include <encodings_fragment>","#include <fog_fragment>","#include <premultiplied_alpha_fragment>","#include <dithering_fragment>"),t=i.join("\n")}return t},xe.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),e.position&&(this.position=e.position),this.color=e.color,this.roughness=e.roughness,this.metalness=e.metalness,e.mask&&(this.mask=e.mask),e.alpha&&(this.alpha=e.alpha),e.normal&&(this.normal=e.normal),e.clearcoat&&(this.clearcoat=e.clearcoat),e.clearcoatRoughness&&(this.clearcoatRoughness=e.clearcoatRoughness),e.clearcoatNormal&&(this.clearcoatNormal=e.clearcoatNormal),e.reflectivity&&(this.reflectivity=e.reflectivity),e.light&&(this.light=e.light),e.shadow&&(this.shadow=e.shadow),e.ao&&(this.ao=e.ao),e.emissive&&(this.emissive=e.emissive),e.ambient&&(this.ambient=e.ambient),e.environment&&(this.environment=e.environment),e.sheen&&(this.sheen=e.sheen),this},xe.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),this.position&&(t.position=this.position.toJSON(e).uuid),t.color=this.color.toJSON(e).uuid,t.roughness=this.roughness.toJSON(e).uuid,t.metalness=this.metalness.toJSON(e).uuid,this.mask&&(t.mask=this.mask.toJSON(e).uuid),this.alpha&&(t.alpha=this.alpha.toJSON(e).uuid),this.normal&&(t.normal=this.normal.toJSON(e).uuid),this.clearcoat&&(t.clearcoat=this.clearcoat.toJSON(e).uuid),this.clearcoatRoughness&&(t.clearcoatRoughness=this.clearcoatRoughness.toJSON(e).uuid),this.clearcoatNormal&&(t.clearcoatNormal=this.clearcoatNormal.toJSON(e).uuid),this.reflectivity&&(t.reflectivity=this.reflectivity.toJSON(e).uuid),this.light&&(t.light=this.light.toJSON(e).uuid),this.shadow&&(t.shadow=this.shadow.toJSON(e).uuid),this.ao&&(t.ao=this.ao.toJSON(e).uuid),this.emissive&&(t.emissive=this.emissive.toJSON(e).uuid),this.ambient&&(t.ambient=this.ambient.toJSON(e).uuid),this.environment&&(t.environment=this.environment.toJSON(e).uuid),this.sheen&&(t.sheen=this.sheen.toJSON(e).uuid)),t},_e.prototype=Object.create(xe.prototype),_e.prototype.constructor=_e,_e.prototype.nodeType="MeshStandard",_e.prototype.build=function(e){var t=this.properties,r=this.inputs;if(e.isShader("fragment")){var n=e.findNode(t.color,r.color),i=e.resolve(t.map);this.color=i?new k.a(n,i,k.a.MUL):n;var o=e.findNode(t.roughness,r.roughness),a=e.resolve(t.roughnessMap);this.roughness=a?new k.a(o,new oe(a,"g"),k.a.MUL):o;var s=e.findNode(t.metalness,r.metalness),l=e.resolve(t.metalnessMap);this.metalness=l?new k.a(s,new oe(l,"b"),k.a.MUL):s,t.normalMap?(this.normal=new ee(e.resolve(t.normalMap)),this.normal.scale=e.findNode(t.normalScale,r.normalScale)):this.normal=void 0,this.environment=e.resolve(t.envMap)}return xe.prototype.build.call(this,e)},_e.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||(t=this.createJSONNode(e),console.warn(".toJSON not implemented in",this)),t},Te.prototype=Object.create(P.a.prototype),Te.prototype.constructor=Te,f.a.addShortcuts(Te.prototype,"fragment",["color","alpha","mask","position"]),Ae.prototype=Object.create(P.a.prototype),Ae.prototype.constructor=Ae,f.a.addShortcuts(Ae.prototype,"fragment",["color","alpha","mask","position","spherical"]),Se.prototype=Object.create(P.a.prototype),Se.prototype.constructor=Se,f.a.addShortcuts(Se.prototype,"fragment",["color","alpha","specular","shininess","normal","emissive","ambient","light","shadow","ao","environment","environmentAlpha","mask","position"]),Ee.prototype=Object.create(P.a.prototype),Ee.prototype.constructor=Ee,f.a.addShortcuts(Ee.prototype,"fragment",["color","alpha","roughness","metalness","reflectivity","clearcoat","clearcoatRoughness","clearcoatNormal","normal","emissive","ambient","light","shadow","ao","environment","mask","position","sheen"]),Ce.prototype=Object.create(P.a.prototype),Ce.prototype.constructor=Ce,f.a.addShortcuts(Ce.prototype,"properties",["color","roughness","metalness","map","normalMap","normalScale","metalnessMap","roughnessMap","envMap"]),Me.prototype={constructor:Me,render:function(e,t,r){this.needsUpdate&&(this.material.dispose(),this.material.fragment.value=this.output,this.material.build(),this.material.uniforms.renderTexture&&(this.material.uniforms.renderTexture.value=this.renderTarget.texture),this.needsUpdate=!1),r.setRenderer(this.renderer).setRenderTexture(this.renderTarget.texture),this.renderer.setRenderTarget(this.renderTarget),this.renderer.render(e,t),r.updateNode(this.material),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera)},setPixelRatio:function(e){this.renderer.setPixelRatio(e);var t=this.renderer.getSize(new S.Vector2);this.setSize(t.width,t.height)},setSize:function(e,t){var r=this.renderer.getPixelRatio();this.renderTarget.setSize(e*r,t*r),this.renderer.setSize(e,t)},copy:function(e){return this.output=e.output,this},toJSON:function(e){if((void 0===e||"string"==typeof e)&&(e={nodes:{}}),e&&!e.post&&(e.post={}),!e.post[this.uuid]){var t={};t.uuid=this.uuid,t.type="NodePostProcessing",e.post[this.uuid]=t,""!==this.name&&(t.name=this.name),"{}"!==JSON.stringify(this.userData)&&(t.userData=this.userData),t.output=this.output.toJSON(e).uuid}return e.post=this.uuid,e}},r.d(t,"Node",function(){return n.a}),r.d(t,"TempNode",function(){return i.a}),r.d(t,"InputNode",function(){return o.a}),r.d(t,"ConstNode",function(){return a.a}),r.d(t,"VarNode",function(){return s}),r.d(t,"StructNode",function(){return l.a}),r.d(t,"AttributeNode",function(){return u}),r.d(t,"FunctionNode",function(){return c.a}),r.d(t,"ExpressionNode",function(){return h.a}),r.d(t,"FunctionCallNode",function(){return d.a}),r.d(t,"NodeLib",function(){return p.a}),r.d(t,"NodeUtils",function(){return f.a}),r.d(t,"NodeFrame",function(){return m.a}),r.d(t,"NodeUniform",function(){return v.a}),r.d(t,"NodeBuilder",function(){return g.a}),r.d(t,"BoolNode",function(){return y}),r.d(t,"IntNode",function(){return b}),r.d(t,"FloatNode",function(){return w.a}),r.d(t,"Vector2Node",function(){return x.a}),r.d(t,"Vector3Node",function(){return _.a}),r.d(t,"Vector4Node",function(){return T.a}),r.d(t,"ColorNode",function(){return A.a}),r.d(t,"Matrix3Node",function(){return E}),r.d(t,"Matrix4Node",function(){return C}),r.d(t,"TextureNode",function(){return M.a}),r.d(t,"CubeTextureNode",function(){return N.a}),r.d(t,"ScreenNode",function(){return O.a}),r.d(t,"ReflectorNode",function(){return L}),r.d(t,"PropertyNode",function(){return I}),r.d(t,"RTTNode",function(){return B}),r.d(t,"UVNode",function(){return D.a}),r.d(t,"ColorsNode",function(){return z}),r.d(t,"PositionNode",function(){return R.a}),r.d(t,"NormalNode",function(){return V.a}),r.d(t,"CameraNode",function(){return j}),r.d(t,"LightNode",function(){return H}),r.d(t,"ReflectNode",function(){return G.a}),r.d(t,"ScreenUVNode",function(){return Y}),r.d(t,"ResolutionNode",function(){return X}),r.d(t,"MathNode",function(){return W.a}),r.d(t,"OperatorNode",function(){return k.a}),r.d(t,"CondNode",function(){return J}),r.d(t,"NoiseNode",function(){return q}),r.d(t,"CheckerNode",function(){return K}),r.d(t,"TextureCubeUVNode",function(){return Z.a}),r.d(t,"TextureCubeNode",function(){return $.a}),r.d(t,"NormalMapNode",function(){return ee}),r.d(t,"BumpMapNode",function(){return te}),r.d(t,"BypassNode",function(){return re}),r.d(t,"JoinNode",function(){return ie}),r.d(t,"SwitchNode",function(){return oe}),r.d(t,"TimerNode",function(){return ae}),r.d(t,"VelocityNode",function(){return se}),r.d(t,"UVTransformNode",function(){return le}),r.d(t,"MaxMIPLevelNode",function(){return ue}),r.d(t,"SpecularMIPLevelNode",function(){return ce}),r.d(t,"ColorSpaceNode",function(){return de.a}),r.d(t,"SubSlotNode",function(){return pe}),r.d(t,"BlurNode",function(){return fe}),r.d(t,"ColorAdjustmentNode",function(){return ve}),r.d(t,"LuminanceNode",function(){return me}),r.d(t,"RawNode",function(){return ge.a}),r.d(t,"BasicNode",function(){return ye}),r.d(t,"SpriteNode",function(){return be}),r.d(t,"PhongNode",function(){return we}),r.d(t,"StandardNode",function(){return xe}),r.d(t,"MeshStandardNode",function(){return _e}),r.d(t,"NodeMaterial",function(){return P.a}),r.d(t,"BasicNodeMaterial",function(){return Te}),r.d(t,"SpriteNodeMaterial",function(){return Ae}),r.d(t,"PhongNodeMaterial",function(){return Se}),r.d(t,"StandardNodeMaterial",function(){return Ee}),r.d(t,"MeshStandardNodeMaterial",function(){return Ce}),r.d(t,"NodePostProcessing",function(){return Me})},pCsw:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("6+nK"),i=r("hwmT"),o=r("7zw7");function a(e,t,r,o){i.a.call(this,"v4"),this.value=e instanceof n.Vector4?e:new n.Vector4(e,t,r,o)}a.prototype=Object.create(i.a.prototype),a.prototype.constructor=a,a.prototype.nodeType="Vector4",o.a.addShortcuts(a.prototype,"value",["x","y","z","w"]),a.prototype.generateReadonly=function(e,t,r,n){return e.format("vec4( "+this.x+", "+this.y+", "+this.z+", "+this.w+" )",n,t)},a.prototype.copy=function(e){return i.a.prototype.copy.call(this,e),this.value.copy(e),this},a.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).x=this.x,t.y=this.y,t.z=this.z,t.w=this.w,!0===this.readonly&&(t.readonly=!0)),t}},qxm1:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("6+nK"),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e){n.Loader.call(this,e),this.dracoLoader=null,this.ddsLoader=null,this.ktx2Loader=null,this.meshoptDecoder=null,this.pluginCallbacks=[],this.register(function(e){return new s(e)}),this.register(function(e){return new u(e)}),this.register(function(e){return new c(e)}),this.register(function(e){return new l(e)}),this.register(function(e){return new o(e)}),this.register(function(e){return new h(e)})}e.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:e,load:function(e,t,r,i){var o,a=this;o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:n.LoaderUtils.extractUrlBase(e),this.manager.itemStart(e);var s=function(t){i?i(t):console.error(t),a.manager.itemError(e),a.manager.itemEnd(e)},l=new n.FileLoader(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(this.withCredentials),l.load(e,function(r){try{a.parse(r,o,function(r){t(r),a.manager.itemEnd(e)},s)}catch(e){s(e)}},r,s)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},setKTX2Loader:function(e){return this.ktx2Loader=e,this},setMeshoptDecoder:function(e){return this.meshoptDecoder=e,this},register:function(e){return-1===this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.push(e),this},unregister:function(e){return-1!==this.pluginCallbacks.indexOf(e)&&this.pluginCallbacks.splice(this.pluginCallbacks.indexOf(e),1),this},parse:function(e,i,o,s){var l,u={},c={};if("string"==typeof e)l=e;else if(n.LoaderUtils.decodeText(new Uint8Array(e,0,4))===d){try{u[t.KHR_BINARY_GLTF]=new function(e){this.name=t.KHR_BINARY_GLTF,this.content=null,this.body=null;var r=new DataView(e,0,p);if(this.header={magic:n.LoaderUtils.decodeText(new Uint8Array(e.slice(0,4))),version:r.getUint32(4,!0),length:r.getUint32(8,!0)},this.header.magic!==d)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");var i=new DataView(e,p),o=0;for(;o<i.byteLength;){var a=i.getUint32(o,!0);o+=4;var s=i.getUint32(o,!0);if(o+=4,s===f.JSON){var l=new Uint8Array(e,p+o,a);this.content=n.LoaderUtils.decodeText(l)}else if(s===f.BIN){var u=p+o;this.body=e.slice(u,u+a)}o+=a}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}(e)}catch(e){return void(s&&s(e))}l=u[t.KHR_BINARY_GLTF].content}else l=n.LoaderUtils.decodeText(new Uint8Array(e));var h=JSON.parse(l);if(void 0===h.asset||h.asset.version[0]<2)s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{var g=new H(h,{path:i||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager,ktx2Loader:this.ktx2Loader,meshoptDecoder:this.meshoptDecoder});g.fileLoader.setRequestHeader(this.requestHeader);for(var w=0;w<this.pluginCallbacks.length;w++){var x=this.pluginCallbacks[w](g);c[x.name]=x,u[x.name]=!0}if(h.extensionsUsed)for(w=0;w<h.extensionsUsed.length;++w){var _=h.extensionsUsed[w],T=h.extensionsRequired||[];switch(_){case t.KHR_MATERIALS_UNLIT:u[_]=new a;break;case t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:u[_]=new y;break;case t.KHR_DRACO_MESH_COMPRESSION:u[_]=new m(h,this.dracoLoader);break;case t.MSFT_TEXTURE_DDS:u[_]=new r(this.ddsLoader);break;case t.KHR_TEXTURE_TRANSFORM:u[_]=new v;break;case t.KHR_MESH_QUANTIZATION:u[_]=new b;break;default:T.indexOf(_)>=0&&void 0===c[_]&&console.warn('THREE.GLTFLoader: Unknown extension "'+_+'".')}}g.setExtensions(u),g.setPlugins(c),g.parse(o,s)}}});var t={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_TRANSMISSION:"KHR_materials_transmission",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_BASISU:"KHR_texture_basisu",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",EXT_TEXTURE_WEBP:"EXT_texture_webp",EXT_MESHOPT_COMPRESSION:"EXT_meshopt_compression",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function r(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=t.MSFT_TEXTURE_DDS,this.ddsLoader=e}function o(e){this.parser=e,this.name=t.KHR_LIGHTS_PUNCTUAL,this.cache={refs:{},uses:{}}}function a(){this.name=t.KHR_MATERIALS_UNLIT}function s(e){this.parser=e,this.name=t.KHR_MATERIALS_CLEARCOAT}function l(e){this.parser=e,this.name=t.KHR_MATERIALS_TRANSMISSION}function u(e){this.parser=e,this.name=t.KHR_TEXTURE_BASISU}function c(e){this.parser=e,this.name=t.EXT_TEXTURE_WEBP,this.isSupported=null}function h(e){this.name=t.EXT_MESHOPT_COMPRESSION,this.parser=e}o.prototype._markDefs=function(){for(var e=this.parser,t=this.parser.json.nodes||[],r=0,n=t.length;r<n;r++){var i=t[r];i.extensions&&i.extensions[this.name]&&void 0!==i.extensions[this.name].light&&e._addNodeRef(this.cache,i.extensions[this.name].light)}},o.prototype._loadLight=function(e){var t=this.parser,r="light:"+e,i=t.cache.get(r);if(i)return i;var o,a=t.json,s=((a.extensions&&a.extensions[this.name]||{}).lights||[])[e],l=new n.Color(16777215);void 0!==s.color&&l.fromArray(s.color);var u=void 0!==s.range?s.range:0;switch(s.type){case"directional":(o=new n.DirectionalLight(l)).target.position.set(0,0,-1),o.add(o.target);break;case"point":(o=new n.PointLight(l)).distance=u;break;case"spot":(o=new n.SpotLight(l)).distance=u,s.spot=s.spot||{},s.spot.innerConeAngle=void 0!==s.spot.innerConeAngle?s.spot.innerConeAngle:0,s.spot.outerConeAngle=void 0!==s.spot.outerConeAngle?s.spot.outerConeAngle:Math.PI/4,o.angle=s.spot.outerConeAngle,o.penumbra=1-s.spot.innerConeAngle/s.spot.outerConeAngle,o.target.position.set(0,0,-1),o.add(o.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+s.type+'".')}return o.position.set(0,0,0),o.decay=2,void 0!==s.intensity&&(o.intensity=s.intensity),o.name=t.createUniqueName(s.name||"light_"+e),i=Promise.resolve(o),t.cache.add(r,i),i},o.prototype.createNodeAttachment=function(e){var t=this,r=this.parser,n=r.json.nodes[e],i=(n.extensions&&n.extensions[this.name]||{}).light;return void 0===i?null:this._loadLight(i).then(function(e){return r._getNodeRef(t.cache,i,e)})},a.prototype.getMaterialType=function(){return n.MeshBasicMaterial},a.prototype.extendParams=function(e,t,r){var i=[];e.color=new n.Color(1,1,1),e.opacity=1;var o=t.pbrMetallicRoughness;if(o){if(Array.isArray(o.baseColorFactor)){var a=o.baseColorFactor;e.color.fromArray(a),e.opacity=a[3]}void 0!==o.baseColorTexture&&i.push(r.assignTexture(e,"map",o.baseColorTexture))}return Promise.all(i)},s.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null},s.prototype.extendMaterialParams=function(e,t){var r=this.parser,i=r.json.materials[e];if(!i.extensions||!i.extensions[this.name])return Promise.resolve();var o=[],a=i.extensions[this.name];if(void 0!==a.clearcoatFactor&&(t.clearcoat=a.clearcoatFactor),void 0!==a.clearcoatTexture&&o.push(r.assignTexture(t,"clearcoatMap",a.clearcoatTexture)),void 0!==a.clearcoatRoughnessFactor&&(t.clearcoatRoughness=a.clearcoatRoughnessFactor),void 0!==a.clearcoatRoughnessTexture&&o.push(r.assignTexture(t,"clearcoatRoughnessMap",a.clearcoatRoughnessTexture)),void 0!==a.clearcoatNormalTexture&&(o.push(r.assignTexture(t,"clearcoatNormalMap",a.clearcoatNormalTexture)),void 0!==a.clearcoatNormalTexture.scale)){var s=a.clearcoatNormalTexture.scale;t.clearcoatNormalScale=new n.Vector2(s,s)}return Promise.all(o)},l.prototype.getMaterialType=function(e){var t=this.parser.json.materials[e];return t.extensions&&t.extensions[this.name]?n.MeshPhysicalMaterial:null},l.prototype.extendMaterialParams=function(e,t){var r=this.parser,n=r.json.materials[e];if(!n.extensions||!n.extensions[this.name])return Promise.resolve();var i=[],o=n.extensions[this.name];return void 0!==o.transmissionFactor&&(t.transmission=o.transmissionFactor),void 0!==o.transmissionTexture&&i.push(r.assignTexture(t,"transmissionMap",o.transmissionTexture)),Promise.all(i)},u.prototype.loadTexture=function(e){var t=this.parser,r=t.json,n=r.textures[e];if(!n.extensions||!n.extensions[this.name])return null;var i=n.extensions[this.name],o=r.images[i.source],a=t.options.ktx2Loader;if(!a){if(r.extensionsRequired&&r.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setKTX2Loader must be called before loading KTX2 textures");return null}return t.loadTextureImage(e,o,a)},c.prototype.loadTexture=function(e){var t=this.name,r=this.parser,n=r.json,i=n.textures[e];if(!i.extensions||!i.extensions[t])return null;var o=i.extensions[t],a=n.images[o.source],s=a.uri?r.options.manager.getHandler(a.uri):r.textureLoader;return this.detectSupport().then(function(i){if(i)return r.loadTextureImage(e,a,s);if(n.extensionsRequired&&n.extensionsRequired.indexOf(t)>=0)throw new Error("THREE.GLTFLoader: WebP required by asset but unsupported.");return r.loadTexture(e)})},c.prototype.detectSupport=function(){return this.isSupported||(this.isSupported=new Promise(function(e){var t=new Image;t.src="data:image/webp;base64,UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",t.onload=t.onerror=function(){e(1===t.height)}})),this.isSupported},h.prototype.loadBufferView=function(e){var t=this.parser.json,r=t.bufferViews[e];if(r.extensions&&r.extensions[this.name]){var n=r.extensions[this.name],i=this.parser.getDependency("buffer",n.buffer),o=this.parser.options.meshoptDecoder;if(!o||!o.supported){if(t.extensionsRequired&&t.extensionsRequired.indexOf(this.name)>=0)throw new Error("THREE.GLTFLoader: setMeshoptDecoder must be called before loading compressed files");return null}return Promise.all([i,o.ready]).then(function(e){var t=n.byteOffset||0,r=n.byteLength||0,i=n.count,a=n.byteStride,s=new ArrayBuffer(i*a),l=new Uint8Array(e[0],t,r);return o.decodeGltfBuffer(new Uint8Array(s),i,a,l,n.mode,n.filter),s})}return null};var d="glTF",p=12,f={JSON:1313821514,BIN:5130562};function m(e,r){if(!r)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=t.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=r,this.dracoLoader.preload()}function v(){this.name=t.KHR_TEXTURE_TRANSFORM}function g(e){n.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),r=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),i=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),o=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),a=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb * ( 1. - max( specularFactor.r, max( specularFactor.g, specularFactor.b ) ) );","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 ); // 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor;"].join("\n"),s={specular:{value:(new n.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=s,this.onBeforeCompile=function(e){for(var n in s)e.uniforms[n]=s[n];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;").replace("uniform float metalness;","uniform float glossiness;").replace("#include <roughnessmap_pars_fragment>",t).replace("#include <metalnessmap_pars_fragment>",r).replace("#include <roughnessmap_fragment>",i).replace("#include <metalnessmap_fragment>",o).replace("#include <lights_physical_fragment>",a)},Object.defineProperties(this,{specular:{get:function(){return s.specular.value},set:function(e){s.specular.value=e}},specularMap:{get:function(){return s.specularMap.value},set:function(e){s.specularMap.value=e,e?this.defines.USE_SPECULARMAP="":delete this.defines.USE_SPECULARMAP}},glossiness:{get:function(){return s.glossiness.value},set:function(e){s.glossiness.value=e}},glossinessMap:{get:function(){return s.glossinessMap.value},set:function(e){s.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_UV=""):(delete this.defines.USE_GLOSSINESSMAP,delete this.defines.USE_UV)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function y(){return{name:t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return g},extendParams:function(e,t,r){var i=t.extensions[this.name];e.color=new n.Color(1,1,1),e.opacity=1;var o=[];if(Array.isArray(i.diffuseFactor)){var a=i.diffuseFactor;e.color.fromArray(a),e.opacity=a[3]}if(void 0!==i.diffuseTexture&&o.push(r.assignTexture(e,"map",i.diffuseTexture)),e.emissive=new n.Color(0,0,0),e.glossiness=void 0!==i.glossinessFactor?i.glossinessFactor:1,e.specular=new n.Color(1,1,1),Array.isArray(i.specularFactor)&&e.specular.fromArray(i.specularFactor),void 0!==i.specularGlossinessTexture){var s=i.specularGlossinessTexture;o.push(r.assignTexture(e,"glossinessMap",s)),o.push(r.assignTexture(e,"specularMap",s))}return Promise.all(o)},createMaterial:function(e){var t=new g(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=n.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function b(){this.name=t.KHR_MESH_QUANTIZATION}function w(e,t,r,i){n.Interpolant.call(this,e,t,r,i)}m.prototype.decodePrimitive=function(e,t){var r=this.json,n=this.dracoLoader,i=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,a={},s={},l={};for(var u in o){var c=k[u]||u.toLowerCase();a[c]=o[u]}for(u in e.attributes){c=k[u]||u.toLowerCase();if(void 0!==o[u]){var h=r.accessors[e.attributes[u]],d=M[h.componentType];l[c]=d,s[c]=!0===h.normalized}}return t.getDependency("bufferView",i).then(function(e){return new Promise(function(t){n.decodeDracoFile(e,function(e){for(var r in e.attributes){var n=e.attributes[r],i=s[r];void 0!==i&&(n.normalized=i)}t(e)},a,l)})})},v.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},g.prototype=Object.create(n.MeshStandardMaterial.prototype),g.prototype.constructor=g,g.prototype.copy=function(e){return n.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},w.prototype=Object.create(n.Interpolant.prototype),w.prototype.constructor=w,w.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,r=this.sampleValues,n=this.valueSize,i=e*n*3+n,o=0;o!==n;o++)t[o]=r[i+o];return t},w.prototype.beforeStart_=w.prototype.copySampleValue_,w.prototype.afterEnd_=w.prototype.copySampleValue_,w.prototype.interpolate_=function(e,t,r,n){for(var i=this.resultBuffer,o=this.sampleValues,a=this.valueSize,s=2*a,l=3*a,u=n-t,c=(r-t)/u,h=c*c,d=h*c,p=e*l,f=p-l,m=-2*d+3*h,v=d-h,g=1-m,y=v-h+c,b=0;b!==a;b++){var w=o[f+b+a],x=o[f+b+s]*u,_=o[p+b+a],T=o[p+b]*u;i[b]=g*w+y*x+m*_+v*T}return i};var x=0,_=1,T=2,A=3,S=4,E=5,C=6,M={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},N={9728:n.NearestFilter,9729:n.LinearFilter,9984:n.NearestMipmapNearestFilter,9985:n.LinearMipmapNearestFilter,9986:n.NearestMipmapLinearFilter,9987:n.LinearMipmapLinearFilter},O={33071:n.ClampToEdgeWrapping,33648:n.MirroredRepeatWrapping,10497:n.RepeatWrapping},R={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},k={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},L={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},I={CUBICSPLINE:void 0,LINEAR:n.InterpolateLinear,STEP:n.InterpolateDiscrete},P="OPAQUE",B="MASK",D="BLEND";function U(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)?e:/^data:.*,.*$/i.test(e)?e:/^blob:.*$/i.test(e)?e:t+e)}function F(e,t,r){for(var n in r.extensions)void 0===e[n]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[n]=r.extensions[n])}function z(e,t){void 0!==t.extras&&("object"===i(t.extras)?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function V(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var r=0,n=t.weights.length;r<n;r++)e.morphTargetInfluences[r]=t.weights[r];if(t.extras&&Array.isArray(t.extras.targetNames)){var i=t.extras.targetNames;if(e.morphTargetInfluences.length===i.length){e.morphTargetDictionary={};for(r=0,n=i.length;r<n;r++)e.morphTargetDictionary[i[r]]=r}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function j(e){for(var t="",r=Object.keys(e).sort(),n=0,i=r.length;n<i;n++)t+=r[n]+":"+e[r[n]]+";";return t}function H(e,t){this.json=e||{},this.extensions={},this.plugins={},this.options=t||{},this.cache=new function(){var e={};return{get:function(t){return e[t]},add:function(t,r){e[t]=r},remove:function(t){delete e[t]},removeAll:function(){e={}}}},this.associations=new Map,this.primitiveCache={},this.meshCache={refs:{},uses:{}},this.cameraCache={refs:{},uses:{}},this.lightCache={refs:{},uses:{}},this.nodeNamesUsed={},"undefined"!=typeof createImageBitmap&&!1===/Firefox/.test(navigator.userAgent)?this.textureLoader=new n.ImageBitmapLoader(this.options.manager):this.textureLoader=new n.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new n.FileLoader(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function G(e,t,r){var i=t.attributes,o=[];function a(t,n){return r.getDependency("accessor",t).then(function(t){e.setAttribute(n,t)})}for(var s in i){var l=k[s]||s.toLowerCase();l in e.attributes||o.push(a(i[s],l))}if(void 0!==t.indices&&!e.index){var u=r.getDependency("accessor",t.indices).then(function(t){e.setIndex(t)});o.push(u)}return z(e,t),function(e,t,r){var i=t.attributes,o=new n.Box3;if(void 0!==i.POSITION){var a=(p=r.json.accessors[i.POSITION]).min,s=p.max;if(void 0!==a&&void 0!==s){o.set(new n.Vector3(a[0],a[1],a[2]),new n.Vector3(s[0],s[1],s[2]));var l=t.targets;if(void 0!==l){for(var u=new n.Vector3,c=new n.Vector3,h=0,d=l.length;h<d;h++){var p,f=l[h];if(void 0!==f.POSITION)a=(p=r.json.accessors[f.POSITION]).min,s=p.max,void 0!==a&&void 0!==s?(c.setX(Math.max(Math.abs(a[0]),Math.abs(s[0]))),c.setY(Math.max(Math.abs(a[1]),Math.abs(s[1]))),c.setZ(Math.max(Math.abs(a[2]),Math.abs(s[2]))),u.max(c)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}o.expandByVector(u)}e.boundingBox=o;var m=new n.Sphere;o.getCenter(m.center),m.radius=o.min.distanceTo(o.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,r),Promise.all(o).then(function(){return void 0!==t.targets?function(e,t,r){for(var n=!1,i=!1,o=0,a=t.length;o<a&&(void 0!==(u=t[o]).POSITION&&(n=!0),void 0!==u.NORMAL&&(i=!0),!n||!i);o++);if(!n&&!i)return Promise.resolve(e);var s=[],l=[];for(o=0,a=t.length;o<a;o++){var u=t[o];if(n){var c=void 0!==u.POSITION?r.getDependency("accessor",u.POSITION):e.attributes.position;s.push(c)}i&&(c=void 0!==u.NORMAL?r.getDependency("accessor",u.NORMAL):e.attributes.normal,l.push(c))}return Promise.all([Promise.all(s),Promise.all(l)]).then(function(t){var r=t[0],o=t[1];return n&&(e.morphAttributes.position=r),i&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e})}(e,t.targets,r):e})}function X(e,t){var r=e.getIndex();if(null===r){var i=[],o=e.getAttribute("position");if(void 0===o)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var a=0;a<o.count;a++)i.push(a);e.setIndex(i),r=e.getIndex()}var s=r.count-2,l=[];if(t===n.TriangleFanDrawMode)for(a=1;a<=s;a++)l.push(r.getX(0)),l.push(r.getX(a)),l.push(r.getX(a+1));else for(a=0;a<s;a++)a%2==0?(l.push(r.getX(a)),l.push(r.getX(a+1)),l.push(r.getX(a+2))):(l.push(r.getX(a+2)),l.push(r.getX(a+1)),l.push(r.getX(a)));l.length/3!==s&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var u=e.clone();return u.setIndex(l),u}return H.prototype.setExtensions=function(e){this.extensions=e},H.prototype.setPlugins=function(e){this.plugins=e},H.prototype.parse=function(e,t){var r=this,n=this.json,i=this.extensions;this.cache.removeAll(),this._invokeAll(function(e){return e._markDefs&&e._markDefs()}),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then(function(t){var o={scene:t[0][n.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:n.asset,parser:r,userData:{}};F(i,o,n),z(o,n),e(o)}).catch(t)},H.prototype._markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],r=this.json.meshes||[],n=0,i=t.length;n<i;n++)for(var o=t[n].joints,a=0,s=o.length;a<s;a++)e[o[a]].isBone=!0;for(var l=0,u=e.length;l<u;l++){var c=e[l];void 0!==c.mesh&&(this._addNodeRef(this.meshCache,c.mesh),void 0!==c.skin&&(r[c.mesh].isSkinnedMesh=!0)),void 0!==c.camera&&this._addNodeRef(this.cameraCache,c.camera)}},H.prototype._addNodeRef=function(e,t){void 0!==t&&(void 0===e.refs[t]&&(e.refs[t]=e.uses[t]=0),e.refs[t]++)},H.prototype._getNodeRef=function(e,t,r){if(e.refs[t]<=1)return r;var n=r.clone();return n.name+="_instance_"+e.uses[t]++,n},H.prototype._invokeOne=function(e){var t=Object.values(this.plugins);t.push(this);for(var r=0;r<t.length;r++){var n=e(t[r]);if(n)return n}},H.prototype._invokeAll=function(e){var t=Object.values(this.plugins);t.unshift(this);for(var r=[],n=0;n<t.length;n++){var i=e(t[n]);i&&r.push(i)}return r},H.prototype.getDependency=function(e,t){var r=e+":"+t,n=this.cache.get(r);if(!n){switch(e){case"scene":n=this.loadScene(t);break;case"node":n=this.loadNode(t);break;case"mesh":n=this._invokeOne(function(e){return e.loadMesh&&e.loadMesh(t)});break;case"accessor":n=this.loadAccessor(t);break;case"bufferView":n=this._invokeOne(function(e){return e.loadBufferView&&e.loadBufferView(t)});break;case"buffer":n=this.loadBuffer(t);break;case"material":n=this._invokeOne(function(e){return e.loadMaterial&&e.loadMaterial(t)});break;case"texture":n=this._invokeOne(function(e){return e.loadTexture&&e.loadTexture(t)});break;case"skin":n=this.loadSkin(t);break;case"animation":n=this.loadAnimation(t);break;case"camera":n=this.loadCamera(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,n)}return n},H.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var r=this,n=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(n.map(function(t,n){return r.getDependency(e,n)})),this.cache.add(e,t)}return t},H.prototype.loadBuffer=function(e){var r=this.json.buffers[e],n=this.fileLoader;if(r.type&&"arraybuffer"!==r.type)throw new Error("THREE.GLTFLoader: "+r.type+" buffer type is not supported.");if(void 0===r.uri&&0===e)return Promise.resolve(this.extensions[t.KHR_BINARY_GLTF].body);var i=this.options;return new Promise(function(e,t){n.load(U(r.uri,i.path),e,void 0,function(){t(new Error('THREE.GLTFLoader: Failed to load buffer "'+r.uri+'".'))})})},H.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then(function(e){var r=t.byteLength||0,n=t.byteOffset||0;return e.slice(n,n+r)})},H.prototype.loadAccessor=function(e){var t=this,r=this.json,i=this.json.accessors[e];if(void 0===i.bufferView&&void 0===i.sparse)return Promise.resolve(null);var o=[];return void 0!==i.bufferView?o.push(this.getDependency("bufferView",i.bufferView)):o.push(null),void 0!==i.sparse&&(o.push(this.getDependency("bufferView",i.sparse.indices.bufferView)),o.push(this.getDependency("bufferView",i.sparse.values.bufferView))),Promise.all(o).then(function(e){var o,a,s=e[0],l=R[i.type],u=M[i.componentType],c=u.BYTES_PER_ELEMENT,h=c*l,d=i.byteOffset||0,p=void 0!==i.bufferView?r.bufferViews[i.bufferView].byteStride:void 0,f=!0===i.normalized;if(p&&p!==h){var m=Math.floor(d/p),v="InterleavedBuffer:"+i.bufferView+":"+i.componentType+":"+m+":"+i.count,g=t.cache.get(v);g||(o=new u(s,m*p,i.count*p/c),g=new n.InterleavedBuffer(o,p/c),t.cache.add(v,g)),a=new n.InterleavedBufferAttribute(g,l,d%p/c,f)}else o=null===s?new u(i.count*l):new u(s,d,i.count*l),a=new n.BufferAttribute(o,l,f);if(void 0!==i.sparse){var y=R.SCALAR,b=M[i.sparse.indices.componentType],w=i.sparse.indices.byteOffset||0,x=i.sparse.values.byteOffset||0,_=new b(e[1],w,i.sparse.count*y),T=new u(e[2],x,i.sparse.count*l);null!==s&&(a=new n.BufferAttribute(a.array.slice(),a.itemSize,a.normalized));for(var A=0,S=_.length;A<S;A++){var E=_[A];if(a.setX(E,T[A*l]),l>=2&&a.setY(E,T[A*l+1]),l>=3&&a.setZ(E,T[A*l+2]),l>=4&&a.setW(E,T[A*l+3]),l>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return a})},H.prototype.loadTexture=function(e){var r,n,i=this.json,o=this.options,a=i.textures[e],s=a.extensions||{};return(r=s[t.MSFT_TEXTURE_DDS]?i.images[s[t.MSFT_TEXTURE_DDS].source]:i.images[a.source]).uri&&(n=o.manager.getHandler(r.uri)),n||(n=s[t.MSFT_TEXTURE_DDS]?this.extensions[t.MSFT_TEXTURE_DDS].ddsLoader:this.textureLoader),this.loadTextureImage(e,r,n)},H.prototype.loadTextureImage=function(e,t,r){var i=this,o=this.json,a=this.options,s=o.textures[e],l=self.URL||self.webkitURL,u=t.uri,c=!1,h=!0;return"image/jpeg"===t.mimeType&&(h=!1),void 0!==t.bufferView&&(u=i.getDependency("bufferView",t.bufferView).then(function(e){if("image/png"===t.mimeType){var r=new DataView(e,25,1).getUint8(0,!1);h=6===r||4===r||3===r}c=!0;var n=new Blob([e],{type:t.mimeType});return u=l.createObjectURL(n)})),Promise.resolve(u).then(function(e){return new Promise(function(t,i){var o=t;!0===r.isImageBitmapLoader&&(o=function(e){t(new n.CanvasTexture(e))}),r.load(U(e,a.path),o,void 0,i)})}).then(function(t){!0===c&&l.revokeObjectURL(u),t.flipY=!1,s.name&&(t.name=s.name),h||(t.format=n.RGBFormat);var r=(o.samplers||{})[s.sampler]||{};return t.magFilter=N[r.magFilter]||n.LinearFilter,t.minFilter=N[r.minFilter]||n.LinearMipmapLinearFilter,t.wrapS=O[r.wrapS]||n.RepeatWrapping,t.wrapT=O[r.wrapT]||n.RepeatWrapping,i.associations.set(t,{type:"textures",index:e}),t})},H.prototype.assignTexture=function(e,r,n){var i=this;return this.getDependency("texture",n.index).then(function(o){if(void 0===n.texCoord||0==n.texCoord||"aoMap"===r&&1==n.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+n.texCoord+" for texture "+r+" not yet supported."),i.extensions[t.KHR_TEXTURE_TRANSFORM]){var a=void 0!==n.extensions?n.extensions[t.KHR_TEXTURE_TRANSFORM]:void 0;if(a){var s=i.associations.get(o);o=i.extensions[t.KHR_TEXTURE_TRANSFORM].extendTexture(o,a),i.associations.set(o,s)}}e[r]=o})},H.prototype.assignFinalMaterial=function(e){var t=e.geometry,r=e.material,i=void 0!==t.attributes.tangent,o=void 0!==t.attributes.color,a=void 0===t.attributes.normal,s=!0===e.isSkinnedMesh,l=Object.keys(t.morphAttributes).length>0,u=l&&void 0!==t.morphAttributes.normal;if(e.isPoints){var c="PointsMaterial:"+r.uuid,h=this.cache.get(c);h||(h=new n.PointsMaterial,n.Material.prototype.copy.call(h,r),h.color.copy(r.color),h.map=r.map,h.sizeAttenuation=!1,this.cache.add(c,h)),r=h}else if(e.isLine){c="LineBasicMaterial:"+r.uuid;var d=this.cache.get(c);d||(d=new n.LineBasicMaterial,n.Material.prototype.copy.call(d,r),d.color.copy(r.color),this.cache.add(c,d)),r=d}if(i||o||a||s||l){c="ClonedMaterial:"+r.uuid+":";r.isGLTFSpecularGlossinessMaterial&&(c+="specular-glossiness:"),s&&(c+="skinning:"),i&&(c+="vertex-tangents:"),o&&(c+="vertex-colors:"),a&&(c+="flat-shading:"),l&&(c+="morph-targets:"),u&&(c+="morph-normals:");var p=this.cache.get(c);p||(p=r.clone(),s&&(p.skinning=!0),i&&(p.vertexTangents=!0),o&&(p.vertexColors=!0),a&&(p.flatShading=!0),l&&(p.morphTargets=!0),u&&(p.morphNormals=!0),this.cache.add(c,p),this.associations.set(p,this.associations.get(r))),r=p}r.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",t.attributes.uv),r.normalScale&&!i&&(r.normalScale.y=-r.normalScale.y),r.clearcoatNormalScale&&!i&&(r.clearcoatNormalScale.y=-r.clearcoatNormalScale.y),e.material=r},H.prototype.getMaterialType=function(){return n.MeshStandardMaterial},H.prototype.loadMaterial=function(e){var r,i=this,o=this.json,a=this.extensions,s=o.materials[e],l={},u=s.extensions||{},c=[];if(u[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var h=a[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];r=h.getMaterialType(),c.push(h.extendParams(l,s,i))}else if(u[t.KHR_MATERIALS_UNLIT]){var d=a[t.KHR_MATERIALS_UNLIT];r=d.getMaterialType(),c.push(d.extendParams(l,s,i))}else{var p=s.pbrMetallicRoughness||{};if(l.color=new n.Color(1,1,1),l.opacity=1,Array.isArray(p.baseColorFactor)){var f=p.baseColorFactor;l.color.fromArray(f),l.opacity=f[3]}void 0!==p.baseColorTexture&&c.push(i.assignTexture(l,"map",p.baseColorTexture)),l.metalness=void 0!==p.metallicFactor?p.metallicFactor:1,l.roughness=void 0!==p.roughnessFactor?p.roughnessFactor:1,void 0!==p.metallicRoughnessTexture&&(c.push(i.assignTexture(l,"metalnessMap",p.metallicRoughnessTexture)),c.push(i.assignTexture(l,"roughnessMap",p.metallicRoughnessTexture))),r=this._invokeOne(function(t){return t.getMaterialType&&t.getMaterialType(e)}),c.push(Promise.all(this._invokeAll(function(t){return t.extendMaterialParams&&t.extendMaterialParams(e,l)})))}!0===s.doubleSided&&(l.side=n.DoubleSide);var m=s.alphaMode||P;return m===D?(l.transparent=!0,l.depthWrite=!1):(l.transparent=!1,m===B&&(l.alphaTest=void 0!==s.alphaCutoff?s.alphaCutoff:.5)),void 0!==s.normalTexture&&r!==n.MeshBasicMaterial&&(c.push(i.assignTexture(l,"normalMap",s.normalTexture)),l.normalScale=new n.Vector2(1,1),void 0!==s.normalTexture.scale&&l.normalScale.set(s.normalTexture.scale,s.normalTexture.scale)),void 0!==s.occlusionTexture&&r!==n.MeshBasicMaterial&&(c.push(i.assignTexture(l,"aoMap",s.occlusionTexture)),void 0!==s.occlusionTexture.strength&&(l.aoMapIntensity=s.occlusionTexture.strength)),void 0!==s.emissiveFactor&&r!==n.MeshBasicMaterial&&(l.emissive=(new n.Color).fromArray(s.emissiveFactor)),void 0!==s.emissiveTexture&&r!==n.MeshBasicMaterial&&c.push(i.assignTexture(l,"emissiveMap",s.emissiveTexture)),Promise.all(c).then(function(){var o;return o=r===g?a[t.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(l):new r(l),s.name&&(o.name=s.name),o.map&&(o.map.encoding=n.sRGBEncoding),o.emissiveMap&&(o.emissiveMap.encoding=n.sRGBEncoding),z(o,s),i.associations.set(o,{type:"materials",index:e}),s.extensions&&F(a,o,s),o})},H.prototype.createUniqueName=function(e){for(var t=n.PropertyBinding.sanitizeNodeName(e||""),r=1;this.nodeNamesUsed[t];++r)t=e+"_"+r;return this.nodeNamesUsed[t]=!0,t},H.prototype.loadGeometries=function(e){var r=this,i=this.extensions,o=this.primitiveCache;function a(e){return i[t.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,r).then(function(t){return G(t,e,r)})}for(var s,l,u=[],c=0,h=e.length;c<h;c++){var d,p=e[c],f=(void 0,(l=(s=p).extensions&&s.extensions[t.KHR_DRACO_MESH_COMPRESSION])?"draco:"+l.bufferView+":"+l.indices+":"+j(l.attributes):s.indices+":"+j(s.attributes)+":"+s.mode),m=o[f];if(m)u.push(m.promise);else d=p.extensions&&p.extensions[t.KHR_DRACO_MESH_COMPRESSION]?a(p):G(new n.BufferGeometry,p,r),o[f]={primitive:p,promise:d},u.push(d)}return Promise.all(u)},H.prototype.loadMesh=function(e){for(var t,r=this,i=this.json,o=this.extensions,a=i.meshes[e],s=a.primitives,l=[],u=0,c=s.length;u<c;u++){var h=void 0===s[u].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new n.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:n.FrontSide})),t.DefaultMaterial):this.getDependency("material",s[u].material);l.push(h)}return l.push(r.loadGeometries(s)),Promise.all(l).then(function(t){for(var i=t.slice(0,t.length-1),l=t[t.length-1],u=[],c=0,h=l.length;c<h;c++){var d,p=l[c],f=s[c],m=i[c];if(f.mode===S||f.mode===E||f.mode===C||void 0===f.mode)!0!==(d=!0===a.isSkinnedMesh?new n.SkinnedMesh(p,m):new n.Mesh(p,m)).isSkinnedMesh||d.geometry.attributes.skinWeight.normalized||d.normalizeSkinWeights(),f.mode===E?d.geometry=X(d.geometry,n.TriangleStripDrawMode):f.mode===C&&(d.geometry=X(d.geometry,n.TriangleFanDrawMode));else if(f.mode===_)d=new n.LineSegments(p,m);else if(f.mode===A)d=new n.Line(p,m);else if(f.mode===T)d=new n.LineLoop(p,m);else{if(f.mode!==x)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+f.mode);d=new n.Points(p,m)}Object.keys(d.geometry.morphAttributes).length>0&&V(d,a),d.name=r.createUniqueName(a.name||"mesh_"+e),z(d,a),f.extensions&&F(o,d,f),r.assignFinalMaterial(d),u.push(d)}if(1===u.length)return u[0];var v=new n.Group;for(c=0,h=u.length;c<h;c++)v.add(u[c]);return v})},H.prototype.loadCamera=function(e){var t,r=this.json.cameras[e],i=r[r.type];if(i)return"perspective"===r.type?t=new n.PerspectiveCamera(n.MathUtils.radToDeg(i.yfov),i.aspectRatio||1,i.znear||1,i.zfar||2e6):"orthographic"===r.type&&(t=new n.OrthographicCamera(-i.xmag,i.xmag,i.ymag,-i.ymag,i.znear,i.zfar)),r.name&&(t.name=this.createUniqueName(r.name)),z(t,r),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},H.prototype.loadSkin=function(e){var t=this.json.skins[e],r={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(r):this.getDependency("accessor",t.inverseBindMatrices).then(function(e){return r.inverseBindMatrices=e,r})},H.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],r=[],i=[],o=[],a=[],s=[],l=0,u=t.channels.length;l<u;l++){var c=t.channels[l],h=t.samplers[c.sampler],d=c.target,p=void 0!==d.node?d.node:d.id,f=void 0!==t.parameters?t.parameters[h.input]:h.input,m=void 0!==t.parameters?t.parameters[h.output]:h.output;r.push(this.getDependency("node",p)),i.push(this.getDependency("accessor",f)),o.push(this.getDependency("accessor",m)),a.push(h),s.push(d)}return Promise.all([Promise.all(r),Promise.all(i),Promise.all(o),Promise.all(a),Promise.all(s)]).then(function(r){for(var i=r[0],o=r[1],a=r[2],s=r[3],l=r[4],u=[],c=0,h=i.length;c<h;c++){var d=i[c],p=o[c],f=a[c],m=s[c],v=l[c];if(void 0!==d){var g;switch(d.updateMatrix(),d.matrixAutoUpdate=!0,L[v.path]){case L.weights:g=n.NumberKeyframeTrack;break;case L.rotation:g=n.QuaternionKeyframeTrack;break;case L.position:case L.scale:default:g=n.VectorKeyframeTrack}var y=d.name?d.name:d.uuid,b=void 0!==m.interpolation?I[m.interpolation]:n.InterpolateLinear,x=[];L[v.path]===L.weights?d.traverse(function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)}):x.push(y);var _=f.array;if(f.normalized){var T;if(_.constructor===Int8Array)T=1/127;else if(_.constructor===Uint8Array)T=1/255;else if(_.constructor==Int16Array)T=1/32767;else{if(_.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");T=1/65535}for(var A=new Float32Array(_.length),S=0,E=_.length;S<E;S++)A[S]=_[S]*T;_=A}for(S=0,E=x.length;S<E;S++){var C=new g(x[S]+"."+L[v.path],p.array,_,b);"CUBICSPLINE"===m.interpolation&&(C.createInterpolant=function(e){return new w(this.times,this.values,this.getValueSize()/3,e)},C.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),u.push(C)}}}var M=t.name?t.name:"animation_"+e;return new n.AnimationClip(M,void 0,u)})},H.prototype.loadNode=function(e){var t,r=this.json,i=this.extensions,o=this,a=r.nodes[e],s=a.name?o.createUniqueName(a.name):"";return(t=[],void 0!==a.mesh&&t.push(o.getDependency("mesh",a.mesh).then(function(e){var t=o._getNodeRef(o.meshCache,a.mesh,e);return void 0!==a.weights&&t.traverse(function(e){if(e.isMesh)for(var t=0,r=a.weights.length;t<r;t++)e.morphTargetInfluences[t]=a.weights[t]}),t})),void 0!==a.camera&&t.push(o.getDependency("camera",a.camera).then(function(e){return o._getNodeRef(o.cameraCache,a.camera,e)})),o._invokeAll(function(t){return t.createNodeAttachment&&t.createNodeAttachment(e)}).forEach(function(e){t.push(e)}),Promise.all(t)).then(function(t){var r;if((r=!0===a.isBone?new n.Bone:t.length>1?new n.Group:1===t.length?t[0]:new n.Object3D)!==t[0])for(var l=0,u=t.length;l<u;l++)r.add(t[l]);if(a.name&&(r.userData.name=a.name,r.name=s),z(r,a),a.extensions&&F(i,r,a),void 0!==a.matrix){var c=new n.Matrix4;c.fromArray(a.matrix),r.applyMatrix4(c)}else void 0!==a.translation&&r.position.fromArray(a.translation),void 0!==a.rotation&&r.quaternion.fromArray(a.rotation),void 0!==a.scale&&r.scale.fromArray(a.scale);return o.associations.set(r,{type:"nodes",index:e}),r})},H.prototype.loadScene=function(){function e(t,r,i,o){var a=i.nodes[t];return o.getDependency("node",t).then(function(e){return void 0===a.skin?e:o.getDependency("skin",a.skin).then(function(e){for(var r=[],n=0,i=(t=e).joints.length;n<i;n++)r.push(o.getDependency("node",t.joints[n]));return Promise.all(r)}).then(function(r){return e.traverse(function(e){if(e.isMesh){for(var i=[],o=[],a=0,s=r.length;a<s;a++){var l=r[a];if(l){i.push(l);var u=new n.Matrix4;void 0!==t.inverseBindMatrices&&u.fromArray(t.inverseBindMatrices.array,16*a),o.push(u)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[a])}e.bind(new n.Skeleton(i,o),e.matrixWorld)}}),e});var t}).then(function(t){r.add(t);var n=[];if(a.children)for(var s=a.children,l=0,u=s.length;l<u;l++){var c=s[l];n.push(e(c,t,i,o))}return Promise.all(n)})}return function(t){var r=this.json,i=this.extensions,o=this.json.scenes[t],a=new n.Group;o.name&&(a.name=this.createUniqueName(o.name)),z(a,o),o.extensions&&F(i,a,o);for(var s=o.nodes||[],l=[],u=0,c=s.length;u<c;u++)l.push(e(s[u],a,r,this));return Promise.all(l).then(function(){return a})}}(),e}()},rwxs:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","#include <packing>","void main() {","\tfloat depth = 1.0 - unpackRGBAToDepth( texture2D( tDiffuse, vUv ) );","\tgl_FragColor = vec4( vec3( depth ), opacity );","}"].join("\n")}},sD7D:function(e,t,r){"use strict";var n=r("6+nK"),i=r("Ah8h"),o={uniforms:{tDiffuse:{value:null},time:{value:0},nIntensity:{value:.5},sIntensity:{value:.05},sCount:{value:4096},grayscale:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["#include <common>","uniform float time;","uniform bool grayscale;","uniform float nIntensity;","uniform float sIntensity;","uniform float sCount;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 cTextureScreen = texture2D( tDiffuse, vUv );","\tfloat dx = rand( vUv + time );","\tvec3 cResult = cTextureScreen.rgb + cTextureScreen.rgb * clamp( 0.1 + dx, 0.0, 1.0 );","\tvec2 sc = vec2( sin( vUv.y * sCount ), cos( vUv.y * sCount ) );","\tcResult += cTextureScreen.rgb * vec3( sc.x, sc.y, sc.x ) * sIntensity;","\tcResult = cTextureScreen.rgb + clamp( nIntensity, 0.0,1.0 ) * ( cResult - cTextureScreen.rgb );","\tif( grayscale ) {","\t\tcResult = vec3( cResult.r * 0.3 + cResult.g * 0.59 + cResult.b * 0.11 );","\t}","\tgl_FragColor =  vec4( cResult, cTextureScreen.a );","}"].join("\n")};r.d(t,"a",function(){return a});var a=function(e,t,r,a){i.a.call(this),void 0===o&&console.error("FilmPass relies on FilmShader");var s=o;this.uniforms=n.UniformsUtils.clone(s.uniforms),this.material=new n.ShaderMaterial({uniforms:this.uniforms,vertexShader:s.vertexShader,fragmentShader:s.fragmentShader}),void 0!==a&&(this.uniforms.grayscale.value=a),void 0!==e&&(this.uniforms.nIntensity.value=e),void 0!==t&&(this.uniforms.sIntensity.value=t),void 0!==r&&(this.uniforms.sCount.value=r),this.fsQuad=new i.a.FullScreenQuad(this.material)};a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,render:function(e,t,r,n){this.uniforms.tDiffuse.value=r.texture,this.uniforms.time.value+=n,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.fsQuad.render(e))}})},sOR5:function(e,t){var r={}.toString;e.exports=Array.isArray||function(e){return"[object Array]"==r.call(e)}},uSAz:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(e){void 0==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};n.prototype.dot=function(e,t,r){return e[0]*t+e[1]*r},n.prototype.dot3=function(e,t,r,n){return e[0]*t+e[1]*r+e[2]*n},n.prototype.dot4=function(e,t,r,n,i){return e[0]*t+e[1]*r+e[2]*n+e[3]*i},n.prototype.noise=function(e,t){var r,n,i=(e+t)*(.5*(Math.sqrt(3)-1)),o=Math.floor(e+i),a=Math.floor(t+i),s=(3-Math.sqrt(3))/6,l=(o+a)*s,u=e-(o-l),c=t-(a-l);u>c?(r=1,n=0):(r=0,n=1);var h=u-r+s,d=c-n+s,p=u-1+2*s,f=c-1+2*s,m=255&o,v=255&a,g=this.perm[m+this.perm[v]]%12,y=this.perm[m+r+this.perm[v+n]]%12,b=this.perm[m+1+this.perm[v+1]]%12,w=.5-u*u-c*c,x=.5-h*h-d*d,_=.5-p*p-f*f;return 70*((w<0?0:(w*=w)*w*this.dot(this.grad3[g],u,c))+(x<0?0:(x*=x)*x*this.dot(this.grad3[y],h,d))+(_<0?0:(_*=_)*_*this.dot(this.grad3[b],p,f)))},n.prototype.noise3d=function(e,t,r){var n,i,o,a,s,l,u=(e+t+r)*(1/3),c=Math.floor(e+u),h=Math.floor(t+u),d=Math.floor(r+u),p=1/6,f=(c+h+d)*p,m=e-(c-f),v=t-(h-f),g=r-(d-f);m>=v?v>=g?(n=1,i=0,o=0,a=1,s=1,l=0):m>=g?(n=1,i=0,o=0,a=1,s=0,l=1):(n=0,i=0,o=1,a=1,s=0,l=1):v<g?(n=0,i=0,o=1,a=0,s=1,l=1):m<g?(n=0,i=1,o=0,a=0,s=1,l=1):(n=0,i=1,o=0,a=1,s=1,l=0);var y=m-n+p,b=v-i+p,w=g-o+p,x=m-a+2*p,_=v-s+2*p,T=g-l+2*p,A=m-1+.5,S=v-1+.5,E=g-1+.5,C=255&c,M=255&h,N=255&d,O=this.perm[C+this.perm[M+this.perm[N]]]%12,R=this.perm[C+n+this.perm[M+i+this.perm[N+o]]]%12,k=this.perm[C+a+this.perm[M+s+this.perm[N+l]]]%12,L=this.perm[C+1+this.perm[M+1+this.perm[N+1]]]%12,I=.6-m*m-v*v-g*g,P=.6-y*y-b*b-w*w,B=.6-x*x-_*_-T*T,D=.6-A*A-S*S-E*E;return 32*((I<0?0:(I*=I)*I*this.dot3(this.grad3[O],m,v,g))+(P<0?0:(P*=P)*P*this.dot3(this.grad3[R],y,b,w))+(B<0?0:(B*=B)*B*this.dot3(this.grad3[k],x,_,T))+(D<0?0:(D*=D)*D*this.dot3(this.grad3[L],A,S,E)))},n.prototype.noise4d=function(e,t,r,n){var i,o,a,s,l,u,c,h,d,p,f,m,v=this.grad4,g=this.simplex,y=this.perm,b=(Math.sqrt(5)-1)/4,w=(5-Math.sqrt(5))/20,x=(e+t+r+n)*b,_=Math.floor(e+x),T=Math.floor(t+x),A=Math.floor(r+x),S=Math.floor(n+x),E=(_+T+A+S)*w,C=e-(_-E),M=t-(T-E),N=r-(A-E),O=n-(S-E),R=(C>M?32:0)+(C>N?16:0)+(M>N?8:0)+(C>O?4:0)+(M>O?2:0)+(N>O?1:0),k=C-(i=g[R][0]>=3?1:0)+w,L=M-(o=g[R][1]>=3?1:0)+w,I=N-(a=g[R][2]>=3?1:0)+w,P=O-(s=g[R][3]>=3?1:0)+w,B=C-(l=g[R][0]>=2?1:0)+2*w,D=M-(u=g[R][1]>=2?1:0)+2*w,U=N-(c=g[R][2]>=2?1:0)+2*w,F=O-(h=g[R][3]>=2?1:0)+2*w,z=C-(d=g[R][0]>=1?1:0)+3*w,V=M-(p=g[R][1]>=1?1:0)+3*w,j=N-(f=g[R][2]>=1?1:0)+3*w,H=O-(m=g[R][3]>=1?1:0)+3*w,G=C-1+4*w,X=M-1+4*w,Y=N-1+4*w,W=O-1+4*w,J=255&_,q=255&T,K=255&A,Q=255&S,Z=y[J+y[q+y[K+y[Q]]]]%32,$=y[J+i+y[q+o+y[K+a+y[Q+s]]]]%32,ee=y[J+l+y[q+u+y[K+c+y[Q+h]]]]%32,te=y[J+d+y[q+p+y[K+f+y[Q+m]]]]%32,re=y[J+1+y[q+1+y[K+1+y[Q+1]]]]%32,ne=.6-C*C-M*M-N*N-O*O,ie=.6-k*k-L*L-I*I-P*P,oe=.6-B*B-D*D-U*U-F*F,ae=.6-z*z-V*V-j*j-H*H,se=.6-G*G-X*X-Y*Y-W*W;return 27*((ne<0?0:(ne*=ne)*ne*this.dot4(v[Z],C,M,N,O))+(ie<0?0:(ie*=ie)*ie*this.dot4(v[$],k,L,I,P))+(oe<0?0:(oe*=oe)*oe*this.dot4(v[ee],B,D,U,F))+(ae<0?0:(ae*=ae)*ae*this.dot4(v[te],z,V,j,H))+(se<0?0:(se*=se)*se*this.dot4(v[re],G,X,Y,W)))}},ujcs:function(e,t){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
t.read=function(e,t,r,n,i){var o,a,s=8*i-n-1,l=(1<<s)-1,u=l>>1,c=-7,h=r?i-1:0,d=r?-1:1,p=e[t+h];for(h+=d,o=p&(1<<-c)-1,p>>=-c,c+=s;c>0;o=256*o+e[t+h],h+=d,c-=8);for(a=o&(1<<-c)-1,o>>=-c,c+=n;c>0;a=256*a+e[t+h],h+=d,c-=8);if(0===o)o=1-u;else{if(o===l)return a?NaN:1/0*(p?-1:1);a+=Math.pow(2,n),o-=u}return(p?-1:1)*a*Math.pow(2,o-n)},t.write=function(e,t,r,n,i,o){var a,s,l,u=8*o-i-1,c=(1<<u)-1,h=c>>1,d=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,p=n?0:o-1,f=n?1:-1,m=t<0||0===t&&1/t<0?1:0;for(t=Math.abs(t),isNaN(t)||t===1/0?(s=isNaN(t)?1:0,a=c):(a=Math.floor(Math.log(t)/Math.LN2),t*(l=Math.pow(2,-a))<1&&(a--,l*=2),(t+=a+h>=1?d/l:d*Math.pow(2,1-h))*l>=2&&(a++,l/=2),a+h>=c?(s=0,a=c):a+h>=1?(s=(t*l-1)*Math.pow(2,i),a+=h):(s=t*Math.pow(2,h-1)*Math.pow(2,i),a=0));i>=8;e[r+p]=255&s,p+=f,s/=256,i-=8);for(a=a<<i|s,u+=i;u>0;e[r+p]=255&a,p+=f,a/=256,u-=8);e[r+p-f]|=128*m}},voZv:function(e,t,r){"use strict";r.d(t,"a",function(){return l});var n=r("/nNp"),i=r("KkAi"),o=r("Xu5e"),a=r("yA4I"),s=r("LtYT");function l(e,t,r){n.a.call(this,"v4"),this.value=e,this.radianceNode=new o.a(this.value,t||new a.a(a.a.VECTOR),r),this.irradianceNode=new o.a(this.value,new s.a(s.a.WORLD),new i.a(1).setReadonly(!0))}l.prototype=Object.create(n.a.prototype),l.prototype.constructor=l,l.prototype.nodeType="TextureCube",l.prototype.generate=function(e,t){return e.isShader("fragment")?(e.require("irradiance"),e.context.bias&&e.context.bias.setTexture(this.value),("irradiance"===e.slot?this.irradianceNode:this.radianceNode).build(e,t)):(console.warn("THREE.TextureCubeNode is not compatible with "+e.shader+" shader."),e.format("vec4( 0.0 )",this.getType(e),t))},l.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.value=e.value,this},l.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).value=this.value.toJSON(e).uuid),t}},w45l:function(e,t,r){"use strict";(function(e,n,i){var o;r.d(t,"a",function(){return s});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};
/*!

JSZip - A Javascript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2014 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/master/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/master/LICENSE
*/!function(e){if("object"==("undefined"==typeof exports?"undefined":a(exports))&&void 0!==n)n.exports=e();else if("function"==typeof define&&r("nErl"))define([],e);else{("undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this).JSZip=e()}}(function(){return function e(t,r,n){function i(s,l){if(!r[s]){if(!t[s]){if(!l&&("function"==typeof o&&o))return o(s,!0);if(a)return a(s,!0);var u=new Error("Cannot find module '"+s+"'");throw u.code="MODULE_NOT_FOUND",u}var c=r[s]={exports:{}};t[s][0].call(c.exports,function(e){var r=t[s][1][e];return i(r||e)},c,c.exports,e,t,r,n)}return r[s].exports}for(var a="function"==typeof o&&o,s=0;s<n.length;s++)i(n[s]);return i}({1:[function(e,t,r){function n(e){if(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0;for(var t=0;t<this.data.length;t++)e[t]=255&e[t]}}var i=e("./dataReader");n.prototype=new i,n.prototype.byteAt=function(e){return this.data[this.zero+e]},n.prototype.lastIndexOfSignature=function(e){for(var t=e.charCodeAt(0),r=e.charCodeAt(1),n=e.charCodeAt(2),i=e.charCodeAt(3),o=this.length-4;o>=0;--o)if(this.data[o]===t&&this.data[o+1]===r&&this.data[o+2]===n&&this.data[o+3]===i)return o-this.zero;return-1},n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return[];var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"./dataReader":6}],2:[function(e,t,r){var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(e,t){for(var r,i,o,a,s,l,u,c="",h=0;h<e.length;)a=(r=e.charCodeAt(h++))>>2,s=(3&r)<<4|(i=e.charCodeAt(h++))>>4,l=(15&i)<<2|(o=e.charCodeAt(h++))>>6,u=63&o,isNaN(i)?l=u=64:isNaN(o)&&(u=64),c=c+n.charAt(a)+n.charAt(s)+n.charAt(l)+n.charAt(u);return c},r.decode=function(e,t){var r,i,o,a,s,l,u="",c=0;for(e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");c<e.length;)r=n.indexOf(e.charAt(c++))<<2|(a=n.indexOf(e.charAt(c++)))>>4,i=(15&a)<<4|(s=n.indexOf(e.charAt(c++)))>>2,o=(3&s)<<6|(l=n.indexOf(e.charAt(c++))),u+=String.fromCharCode(r),64!=s&&(u+=String.fromCharCode(i)),64!=l&&(u+=String.fromCharCode(o));return u}},{}],3:[function(e,t,r){function n(){this.compressedSize=0,this.uncompressedSize=0,this.crc32=0,this.compressionMethod=null,this.compressedContent=null}n.prototype={getContent:function(){return null},getCompressedContent:function(){return null}},t.exports=n},{}],4:[function(e,t,r){r.STORE={magic:"\0\0",compress:function(e,t){return e},uncompress:function(e){return e},compressInputType:null,uncompressInputType:null},r.DEFLATE=e("./flate")},{"./flate":9}],5:[function(e,t,r){var n=e("./utils"),i=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117];t.exports=function(e,t){if(void 0===e||!e.length)return 0;var r="string"!==n.getTypeOf(e);void 0===t&&(t=0);var o=0;t^=-1;for(var a=0,s=e.length;s>a;a++)o=r?e[a]:e.charCodeAt(a),t=t>>>8^i[255&(t^o)];return-1^t}},{"./utils":22}],6:[function(e,t,r){function n(e){this.data=null,this.length=0,this.index=0,this.zero=0}var i=e("./utils");n.prototype={checkOffset:function(e){this.checkIndex(this.index+e)},checkIndex:function(e){if(this.length<this.zero+e||0>e)throw new Error("End of data reached (data length = "+this.length+", asked index = "+e+"). Corrupted zip ?")},setIndex:function(e){this.checkIndex(e),this.index=e},skip:function(e){this.setIndex(this.index+e)},byteAt:function(e){},readInt:function(e){var t,r=0;for(this.checkOffset(e),t=this.index+e-1;t>=this.index;t--)r=(r<<8)+this.byteAt(t);return this.index+=e,r},readString:function(e){return i.transformTo("string",this.readData(e))},readData:function(e){},lastIndexOfSignature:function(e){},readDate:function(){var e=this.readInt(4);return new Date(1980+(e>>25&127),(e>>21&15)-1,e>>16&31,e>>11&31,e>>5&63,(31&e)<<1)}},t.exports=n},{"./utils":22}],7:[function(e,t,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!1,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],8:[function(e,t,r){var n=e("./utils");r.string2binary=function(e){return n.string2binary(e)},r.string2Uint8Array=function(e){return n.transformTo("uint8array",e)},r.uint8Array2String=function(e){return n.transformTo("string",e)},r.string2Blob=function(e){var t=n.transformTo("arraybuffer",e);return n.arrayBuffer2Blob(t)},r.arrayBuffer2Blob=function(e){return n.arrayBuffer2Blob(e)},r.transformTo=function(e,t){return n.transformTo(e,t)},r.getTypeOf=function(e){return n.getTypeOf(e)},r.checkSupport=function(e){return n.checkSupport(e)},r.MAX_VALUE_16BITS=n.MAX_VALUE_16BITS,r.MAX_VALUE_32BITS=n.MAX_VALUE_32BITS,r.pretty=function(e){return n.pretty(e)},r.findCompression=function(e){return n.findCompression(e)},r.isRegExp=function(e){return n.isRegExp(e)}},{"./utils":22}],9:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array,i=e("pako");r.uncompressInputType=n?"uint8array":"array",r.compressInputType=n?"uint8array":"array",r.magic="\b\0",r.compress=function(e,t){return i.deflateRaw(e,{level:t.level||-1})},r.uncompress=function(e){return i.inflateRaw(e)}},{pako:25}],10:[function(e,t,r){function n(e,t){return this instanceof n?(this.files={},this.comment=null,this.root="",e&&this.load(e,t),void(this.clone=function(){var e=new n;for(var t in this)"function"!=typeof this[t]&&(e[t]=this[t]);return e})):new n(e,t)}var i=e("./base64");n.prototype=e("./object"),n.prototype.load=e("./load"),n.support=e("./support"),n.defaults=e("./defaults"),n.utils=e("./deprecatedPublicUtils"),n.base64={encode:function(e){return i.encode(e)},decode:function(e){return i.decode(e)}},n.compressions=e("./compressions"),t.exports=n},{"./base64":2,"./compressions":4,"./defaults":7,"./deprecatedPublicUtils":8,"./load":11,"./object":14,"./support":18}],11:[function(e,t,r){var n=e("./base64"),i=e("./utf8"),o=e("./utils"),a=e("./zipEntries");t.exports=function(e,t){var r,s,l,u;for((t=o.extend(t||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:i.utf8decode})).base64&&(e=n.decode(e)),r=(s=new a(e,t)).files,l=0;l<r.length;l++)u=r[l],this.file(u.fileNameStr,u.decompressed,{binary:!0,optimizedBinaryString:!0,date:u.date,dir:u.dir,comment:u.fileCommentStr.length?u.fileCommentStr:null,unixPermissions:u.unixPermissions,dosPermissions:u.dosPermissions,createFolders:t.createFolders});return s.zipComment.length&&(this.comment=s.zipComment),this}},{"./base64":2,"./utf8":21,"./utils":22,"./zipEntries":23}],12:[function(t,r,n){(function(e){r.exports=function(t,r){return new e(t,r)},r.exports.test=function(t){return e.isBuffer(t)}}).call(this,void 0!==e?e:void 0)},{}],13:[function(e,t,r){function n(e){this.data=e,this.length=this.data.length,this.index=0,this.zero=0}var i=e("./uint8ArrayReader");n.prototype=new i,n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"./uint8ArrayReader":19}],14:[function(e,t,r){var n=e("./support"),i=e("./utils"),o=e("./crc32"),a=e("./signature"),s=e("./defaults"),l=e("./base64"),u=e("./compressions"),c=e("./compressedObject"),h=e("./nodeBuffer"),d=e("./utf8"),p=e("./stringWriter"),f=e("./uint8ArrayWriter"),m=function(e){if(e._data instanceof c&&(e._data=e._data.getContent(),e.options.binary=!0,e.options.base64=!1,"uint8array"===i.getTypeOf(e._data))){var t=e._data;e._data=new Uint8Array(t.length),0!==t.length&&e._data.set(t,0)}return e._data},v=function(e){var t=m(e);return"string"===i.getTypeOf(t)?!e.options.binary&&n.nodebuffer?h(t,"utf-8"):e.asBinary():t},g=function(e){var t=m(this);return null===t||void 0===t?"":(this.options.base64&&(t=l.decode(t)),t=e&&this.options.binary?E.utf8decode(t):i.transformTo("string",t),e||this.options.binary||(t=i.transformTo("string",E.utf8encode(t))),t)},y=function(e,t,r){this.name=e,this.dir=r.dir,this.date=r.date,this.comment=r.comment,this.unixPermissions=r.unixPermissions,this.dosPermissions=r.dosPermissions,this._data=t,this.options=r,this._initialMetadata={dir:r.dir,date:r.date}};y.prototype={asText:function(){return g.call(this,!0)},asBinary:function(){return g.call(this,!1)},asNodeBuffer:function(){var e=v(this);return i.transformTo("nodebuffer",e)},asUint8Array:function(){var e=v(this);return i.transformTo("uint8array",e)},asArrayBuffer:function(){return this.asUint8Array().buffer}};var b=function(e,t){var r,n="";for(r=0;t>r;r++)n+=String.fromCharCode(255&e),e>>>=8;return n},w=function(e,t,r){var n,o=i.getTypeOf(t);if("string"==typeof(r=function(e){return!0!==(e=e||{}).base64||null!==e.binary&&void 0!==e.binary||(e.binary=!0),(e=i.extend(e,s)).date=e.date||new Date,null!==e.compression&&(e.compression=e.compression.toUpperCase()),e}(r)).unixPermissions&&(r.unixPermissions=parseInt(r.unixPermissions,8)),r.unixPermissions&&16384&r.unixPermissions&&(r.dir=!0),r.dosPermissions&&16&r.dosPermissions&&(r.dir=!0),r.dir&&(e=_(e)),r.createFolders&&(n=x(e))&&T.call(this,n,!0),r.dir||null===t||void 0===t)r.base64=!1,r.binary=!1,t=null,o=null;else if("string"===o)r.binary&&!r.base64&&!0!==r.optimizedBinaryString&&(t=i.string2binary(t));else{if(r.base64=!1,r.binary=!0,!(o||t instanceof c))throw new Error("The data of '"+e+"' is in an unsupported format !");"arraybuffer"===o&&(t=i.transformTo("uint8array",t))}var a=new y(e,t,r);return this.files[e]=a,a},x=function(e){"/"==e.slice(-1)&&(e=e.substring(0,e.length-1));var t=e.lastIndexOf("/");return t>0?e.substring(0,t):""},_=function(e){return"/"!=e.slice(-1)&&(e+="/"),e},T=function(e,t){return t=void 0!==t&&t,e=_(e),this.files[e]||w.call(this,e,null,{dir:!0,createFolders:t}),this.files[e]},A=function(e,t,r){var n,a=new c;return e._data instanceof c?(a.uncompressedSize=e._data.uncompressedSize,a.crc32=e._data.crc32,0===a.uncompressedSize||e.dir?(t=u.STORE,a.compressedContent="",a.crc32=0):e._data.compressionMethod===t.magic?a.compressedContent=e._data.getCompressedContent():(n=e._data.getContent(),a.compressedContent=t.compress(i.transformTo(t.compressInputType,n),r))):((n=v(e))&&0!==n.length&&!e.dir||(t=u.STORE,n=""),a.uncompressedSize=n.length,a.crc32=o(n),a.compressedContent=t.compress(i.transformTo(t.compressInputType,n),r)),a.compressedSize=a.compressedContent.length,a.compressionMethod=t.magic,a},S=function(e,t,r,n,s,l){var u,c,h,p,f=(r.compressedContent,l!==d.utf8encode),m=i.transformTo("string",l(t.name)),v=i.transformTo("string",d.utf8encode(t.name)),g=t.comment||"",y=i.transformTo("string",l(g)),w=i.transformTo("string",d.utf8encode(g)),x=v.length!==t.name.length,_=w.length!==g.length,T=t.options,A="",S="",E="";h=t._initialMetadata.dir!==t.dir?t.dir:T.dir,p=t._initialMetadata.date!==t.date?t.date:T.date;var C=0,M=0;h&&(C|=16),"UNIX"===s?(M=798,C|=function(e,t){var r=e;return e||(r=t?16893:33204),(65535&r)<<16}(t.unixPermissions,h)):(M=20,C|=function(e,t){return 63&(e||0)}(t.dosPermissions)),u=p.getHours(),u<<=6,u|=p.getMinutes(),u<<=5,u|=p.getSeconds()/2,c=p.getFullYear()-1980,c<<=4,c|=p.getMonth()+1,c<<=5,c|=p.getDate(),x&&(S=b(1,1)+b(o(m),4)+v,A+="up"+b(S.length,2)+S),_&&(E=b(1,1)+b(this.crc32(y),4)+w,A+="uc"+b(E.length,2)+E);var N="";return N+="\n\0",N+=f||!x&&!_?"\0\0":"\0\b",N+=r.compressionMethod,N+=b(u,2),N+=b(c,2),N+=b(r.crc32,4),N+=b(r.compressedSize,4),N+=b(r.uncompressedSize,4),N+=b(m.length,2),N+=b(A.length,2),{fileRecord:a.LOCAL_FILE_HEADER+N+m+A,dirRecord:a.CENTRAL_FILE_HEADER+b(M,2)+N+b(y.length,2)+"\0\0\0\0"+b(C,4)+b(n,4)+m+A+y,compressedObject:r}},E={load:function(e,t){throw new Error("Load method is not defined. Is the file jszip-load.js included ?")},filter:function(e){var t,r,n,o,a=[];for(t in this.files)this.files.hasOwnProperty(t)&&(n=this.files[t],o=new y(n.name,n._data,i.extend(n.options)),r=t.slice(this.root.length,t.length),t.slice(0,this.root.length)===this.root&&e(r,o)&&a.push(o));return a},file:function(e,t,r){if(1===arguments.length){if(i.isRegExp(e)){var n=e;return this.filter(function(e,t){return!t.dir&&n.test(e)})}return this.filter(function(t,r){return!r.dir&&t===e})[0]||null}return e=this.root+e,w.call(this,e,t,r),this},folder:function(e){if(!e)return this;if(i.isRegExp(e))return this.filter(function(t,r){return r.dir&&e.test(t)});var t=this.root+e,r=T.call(this,t),n=this.clone();return n.root=r.name,n},remove:function(e){e=this.root+e;var t=this.files[e];if(t||("/"!=e.slice(-1)&&(e+="/"),t=this.files[e]),t&&!t.dir)delete this.files[e];else for(var r=this.filter(function(t,r){return r.name.slice(0,e.length)===e}),n=0;n<r.length;n++)delete this.files[r[n].name];return this},generate:function(e){e=i.extend(e||{},{base64:!0,compression:"STORE",compressionOptions:null,type:"base64",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:d.utf8encode}),i.checkSupport(e.type),"darwin"!==e.platform&&"freebsd"!==e.platform&&"linux"!==e.platform&&"sunos"!==e.platform||(e.platform="UNIX"),"win32"===e.platform&&(e.platform="DOS");var t,r,n=[],o=0,s=0,c=i.transformTo("string",e.encodeFileName(e.comment||this.comment||""));for(var h in this.files)if(this.files.hasOwnProperty(h)){var m=this.files[h],v=m.options.compression||e.compression.toUpperCase(),g=u[v];if(!g)throw new Error(v+" is not a valid compression method !");var y=m.options.compressionOptions||e.compressionOptions||{},w=A.call(this,m,g,y),x=S.call(this,h,m,w,o,e.platform,e.encodeFileName);o+=x.fileRecord.length+w.compressedSize,s+=x.dirRecord.length,n.push(x)}var _;_=a.CENTRAL_DIRECTORY_END+"\0\0\0\0"+b(n.length,2)+b(n.length,2)+b(s,4)+b(o,4)+b(c.length,2)+c;var T=e.type.toLowerCase();for(t="uint8array"===T||"arraybuffer"===T||"blob"===T||"nodebuffer"===T?new f(o+s+_.length):new p(o+s+_.length),r=0;r<n.length;r++)t.append(n[r].fileRecord),t.append(n[r].compressedObject.compressedContent);for(r=0;r<n.length;r++)t.append(n[r].dirRecord);t.append(_);var E=t.finalize();switch(e.type.toLowerCase()){case"uint8array":case"arraybuffer":case"nodebuffer":return i.transformTo(e.type.toLowerCase(),E);case"blob":return i.arrayBuffer2Blob(i.transformTo("arraybuffer",E),e.mimeType);case"base64":return e.base64?l.encode(E):E;default:return E}},crc32:function(e,t){return o(e,t)},utf8encode:function(e){return i.transformTo("string",d.utf8encode(e))},utf8decode:function(e){return d.utf8decode(e)}};t.exports=E},{"./base64":2,"./compressedObject":3,"./compressions":4,"./crc32":5,"./defaults":7,"./nodeBuffer":12,"./signature":15,"./stringWriter":17,"./support":18,"./uint8ArrayWriter":20,"./utf8":21,"./utils":22}],15:[function(e,t,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\b"},{}],16:[function(e,t,r){function n(e,t){this.data=e,t||(this.data=o.string2binary(this.data)),this.length=this.data.length,this.index=0,this.zero=0}var i=e("./dataReader"),o=e("./utils");n.prototype=new i,n.prototype.byteAt=function(e){return this.data.charCodeAt(this.zero+e)},n.prototype.lastIndexOfSignature=function(e){return this.data.lastIndexOf(e)-this.zero},n.prototype.readData=function(e){this.checkOffset(e);var t=this.data.slice(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"./dataReader":6,"./utils":22}],17:[function(e,t,r){var n=e("./utils"),i=function(){this.data=[]};i.prototype={append:function(e){e=n.transformTo("string",e),this.data.push(e)},finalize:function(){return this.data.join("")}},t.exports=i},{"./utils":22}],18:[function(t,r,n){(function(e){if(n.base64=!0,n.array=!0,n.string=!0,n.arraybuffer="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,n.nodebuffer=void 0!==e,n.uint8array="undefined"!=typeof Uint8Array,"undefined"==typeof ArrayBuffer)n.blob=!1;else{var t=new ArrayBuffer(0);try{n.blob=0===new Blob([t],{type:"application/zip"}).size}catch(e){try{var r=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);r.append(t),n.blob=0===r.getBlob("application/zip").size}catch(e){n.blob=!1}}}}).call(this,void 0!==e?e:void 0)},{}],19:[function(e,t,r){function n(e){e&&(this.data=e,this.length=this.data.length,this.index=0,this.zero=0)}var i=e("./arrayReader");n.prototype=new i,n.prototype.readData=function(e){if(this.checkOffset(e),0===e)return new Uint8Array(0);var t=this.data.subarray(this.zero+this.index,this.zero+this.index+e);return this.index+=e,t},t.exports=n},{"./arrayReader":1}],20:[function(e,t,r){var n=e("./utils"),i=function(e){this.data=new Uint8Array(e),this.index=0};i.prototype={append:function(e){0!==e.length&&(e=n.transformTo("uint8array",e),this.data.set(e,this.index),this.index+=e.length)},finalize:function(){return this.data}},t.exports=i},{"./utils":22}],21:[function(e,t,r){for(var n=e("./utils"),i=e("./support"),o=e("./nodeBuffer"),a=new Array(256),s=0;256>s;s++)a[s]=s>=252?6:s>=248?5:s>=240?4:s>=224?3:s>=192?2:1;a[254]=a[254]=1;var l=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return 0>r?t:0===r?t:r+a[e[r]]>t?r:t},u=function(e){var t,r,i,o,s=e.length,l=new Array(2*s);for(r=0,t=0;s>t;)if(128>(i=e[t++]))l[r++]=i;else if((o=a[i])>4)l[r++]=65533,t+=o-1;else{for(i&=2===o?31:3===o?15:7;o>1&&s>t;)i=i<<6|63&e[t++],o--;o>1?l[r++]=65533:65536>i?l[r++]=i:(i-=65536,l[r++]=55296|i>>10&1023,l[r++]=56320|1023&i)}return l.length!==r&&(l.subarray?l=l.subarray(0,r):l.length=r),n.applyFromCharCode(l)};r.utf8encode=function(e){return i.nodebuffer?o(e,"utf-8"):function(e){var t,r,n,o,a,s=e.length,l=0;for(o=0;s>o;o++)55296==(64512&(r=e.charCodeAt(o)))&&s>o+1&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),l+=128>r?1:2048>r?2:65536>r?3:4;for(t=i.uint8array?new Uint8Array(l):new Array(l),a=0,o=0;l>a;o++)55296==(64512&(r=e.charCodeAt(o)))&&s>o+1&&56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++),128>r?t[a++]=r:2048>r?(t[a++]=192|r>>>6,t[a++]=128|63&r):65536>r?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t}(e)},r.utf8decode=function(e){if(i.nodebuffer)return n.transformTo("nodebuffer",e).toString("utf-8");for(var t=[],r=0,o=(e=n.transformTo(i.uint8array?"uint8array":"array",e)).length;o>r;){var a=l(e,Math.min(r+65536,o));i.uint8array?t.push(u(e.subarray(r,a))):t.push(u(e.slice(r,a))),r=a}return t.join("")}},{"./nodeBuffer":12,"./support":18,"./utils":22}],22:[function(e,t,r){function n(e){return e}function i(e,t){for(var r=0;r<e.length;++r)t[r]=255&e.charCodeAt(r);return t}function o(e){var t=65536,n=[],i=e.length,o=r.getTypeOf(e),a=0,s=!0;try{switch(o){case"uint8array":String.fromCharCode.apply(null,new Uint8Array(0));break;case"nodebuffer":String.fromCharCode.apply(null,u(0))}}catch(e){s=!1}if(!s){for(var l="",c=0;c<e.length;c++)l+=String.fromCharCode(e[c]);return l}for(;i>a&&t>1;)try{"array"===o||"nodebuffer"===o?n.push(String.fromCharCode.apply(null,e.slice(a,Math.min(a+t,i)))):n.push(String.fromCharCode.apply(null,e.subarray(a,Math.min(a+t,i)))),a+=t}catch(e){t=Math.floor(t/2)}return n.join("")}function a(e,t){for(var r=0;r<e.length;r++)t[r]=e[r];return t}var s=e("./support"),l=e("./compressions"),u=e("./nodeBuffer");r.string2binary=function(e){for(var t="",r=0;r<e.length;r++)t+=String.fromCharCode(255&e.charCodeAt(r));return t},r.arrayBuffer2Blob=function(e,t){r.checkSupport("blob"),t=t||"application/zip";try{return new Blob([e],{type:t})}catch(r){try{var n=new(window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder);return n.append(e),n.getBlob(t)}catch(e){throw new Error("Bug : can't construct the Blob.")}}},r.applyFromCharCode=o;var c={};c.string={string:n,array:function(e){return i(e,new Array(e.length))},arraybuffer:function(e){return c.string.uint8array(e).buffer},uint8array:function(e){return i(e,new Uint8Array(e.length))},nodebuffer:function(e){return i(e,u(e.length))}},c.array={string:o,array:n,arraybuffer:function(e){return new Uint8Array(e).buffer},uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(e)}},c.arraybuffer={string:function(e){return o(new Uint8Array(e))},array:function(e){return a(new Uint8Array(e),new Array(e.byteLength))},arraybuffer:n,uint8array:function(e){return new Uint8Array(e)},nodebuffer:function(e){return u(new Uint8Array(e))}},c.uint8array={string:o,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return e.buffer},uint8array:n,nodebuffer:function(e){return u(e)}},c.nodebuffer={string:o,array:function(e){return a(e,new Array(e.length))},arraybuffer:function(e){return c.nodebuffer.uint8array(e).buffer},uint8array:function(e){return a(e,new Uint8Array(e.length))},nodebuffer:n},r.transformTo=function(e,t){if(t||(t=""),!e)return t;r.checkSupport(e);var n=r.getTypeOf(t);return c[n][e](t)},r.getTypeOf=function(e){return"string"==typeof e?"string":"[object Array]"===Object.prototype.toString.call(e)?"array":s.nodebuffer&&u.test(e)?"nodebuffer":s.uint8array&&e instanceof Uint8Array?"uint8array":s.arraybuffer&&e instanceof ArrayBuffer?"arraybuffer":void 0},r.checkSupport=function(e){if(!s[e.toLowerCase()])throw new Error(e+" is not supported by this browser")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(e){var t,r,n="";for(r=0;r<(e||"").length;r++)n+="\\x"+(16>(t=e.charCodeAt(r))?"0":"")+t.toString(16).toUpperCase();return n},r.findCompression=function(e){for(var t in l)if(l.hasOwnProperty(t)&&l[t].magic===e)return l[t];return null},r.isRegExp=function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},r.extend=function(){var e,t,r={};for(e=0;e<arguments.length;e++)for(t in arguments[e])arguments[e].hasOwnProperty(t)&&void 0===r[t]&&(r[t]=arguments[e][t]);return r}},{"./compressions":4,"./nodeBuffer":12,"./support":18}],23:[function(e,t,r){function n(e,t){this.files=[],this.loadOptions=t,e&&this.load(e)}var i=e("./stringReader"),o=e("./nodeBufferReader"),a=e("./uint8ArrayReader"),s=e("./arrayReader"),l=e("./utils"),u=e("./signature"),c=e("./zipEntry"),h=e("./support");e("./object"),n.prototype={checkSignature:function(e){var t=this.reader.readString(4);if(t!==e)throw new Error("Corrupted zip or bug : unexpected signature ("+l.pretty(t)+", expected "+l.pretty(e)+")")},isSignature:function(e,t){var r=this.reader.index;this.reader.setIndex(e);var n=this.reader.readString(4)===t;return this.reader.setIndex(r),n},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var e=this.reader.readData(this.zipCommentLength),t=h.uint8array?"uint8array":"array",r=l.transformTo(t,e);this.zipComment=this.loadOptions.decodeFileName(r)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.versionMadeBy=this.reader.readString(2),this.versionNeeded=this.reader.readInt(2),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var e,t,r,n=this.zip64EndOfCentralSize-44;n>0;)e=this.reader.readInt(2),t=this.reader.readInt(4),r=this.reader.readString(t),this.zip64ExtensibleData[e]={id:e,length:t,value:r}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var e,t;for(e=0;e<this.files.length;e++)t=this.files[e],this.reader.setIndex(t.localHeaderOffset),this.checkSignature(u.LOCAL_FILE_HEADER),t.readLocalPart(this.reader),t.handleUTF8(),t.processAttributes()},readCentralDir:function(){var e;for(this.reader.setIndex(this.centralDirOffset);this.reader.readString(4)===u.CENTRAL_FILE_HEADER;)(e=new c({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(e);if(this.centralDirRecords!==this.files.length&&0!==this.centralDirRecords&&0===this.files.length)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var e=this.reader.lastIndexOfSignature(u.CENTRAL_DIRECTORY_END);if(0>e)throw!this.isSignature(0,u.LOCAL_FILE_HEADER)?new Error("Can't find end of central directory : is this a zip file ? If it is, see http://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip : can't find end of central directory");this.reader.setIndex(e);var t=e;if(this.checkSignature(u.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===l.MAX_VALUE_16BITS||this.diskWithCentralDirStart===l.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===l.MAX_VALUE_16BITS||this.centralDirRecords===l.MAX_VALUE_16BITS||this.centralDirSize===l.MAX_VALUE_32BITS||this.centralDirOffset===l.MAX_VALUE_32BITS){if(this.zip64=!0,0>(e=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR)))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(e),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,u.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip : can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(u.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var r=this.centralDirOffset+this.centralDirSize;this.zip64&&(r+=20,r+=12+this.zip64EndOfCentralSize);var n=t-r;if(n>0)this.isSignature(t,u.CENTRAL_FILE_HEADER)||(this.reader.zero=n);else if(0>n)throw new Error("Corrupted zip: missing "+Math.abs(n)+" bytes.")},prepareReader:function(e){var t=l.getTypeOf(e);if(l.checkSupport(t),"string"!==t||h.uint8array)if("nodebuffer"===t)this.reader=new o(e);else if(h.uint8array)this.reader=new a(l.transformTo("uint8array",e));else{if(!h.array)throw new Error("Unexpected error: unsupported type '"+t+"'");this.reader=new s(l.transformTo("array",e))}else this.reader=new i(e,this.loadOptions.optimizedBinaryString)},load:function(e){this.prepareReader(e),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},t.exports=n},{"./arrayReader":1,"./nodeBufferReader":13,"./object":14,"./signature":15,"./stringReader":16,"./support":18,"./uint8ArrayReader":19,"./utils":22,"./zipEntry":24}],24:[function(e,t,r){function n(e,t){this.options=e,this.loadOptions=t}var i=e("./stringReader"),o=e("./utils"),a=e("./compressedObject"),s=e("./object"),l=e("./support");n.prototype={isEncrypted:function(){return 1==(1&this.bitFlag)},useUTF8:function(){return 2048==(2048&this.bitFlag)},prepareCompressedContent:function(e,t,r){return function(){var n=e.index;e.setIndex(t);var i=e.readData(r);return e.setIndex(n),i}},prepareContent:function(e,t,r,n,i){return function(){var e=o.transformTo(n.uncompressInputType,this.getCompressedContent()),t=n.uncompress(e);if(t.length!==i)throw new Error("Bug : uncompressed data size mismatch");return t}},readLocalPart:function(e){var t,r;if(e.skip(22),this.fileNameLength=e.readInt(2),r=e.readInt(2),this.fileName=e.readData(this.fileNameLength),e.skip(r),-1==this.compressedSize||-1==this.uncompressedSize)throw new Error("Bug or corrupted zip : didn't get enough informations from the central directory (compressedSize == -1 || uncompressedSize == -1)");if(null===(t=o.findCompression(this.compressionMethod)))throw new Error("Corrupted zip : compression "+o.pretty(this.compressionMethod)+" unknown (inner file : "+o.transformTo("string",this.fileName)+")");if(this.decompressed=new a,this.decompressed.compressedSize=this.compressedSize,this.decompressed.uncompressedSize=this.uncompressedSize,this.decompressed.crc32=this.crc32,this.decompressed.compressionMethod=this.compressionMethod,this.decompressed.getCompressedContent=this.prepareCompressedContent(e,e.index,this.compressedSize,t),this.decompressed.getContent=this.prepareContent(e,e.index,this.compressedSize,t,this.uncompressedSize),this.loadOptions.checkCRC32&&(this.decompressed=o.transformTo("string",this.decompressed.getContent()),s.crc32(this.decompressed)!==this.crc32))throw new Error("Corrupted zip : CRC32 mismatch")},readCentralPart:function(e){if(this.versionMadeBy=e.readInt(2),this.versionNeeded=e.readInt(2),this.bitFlag=e.readInt(2),this.compressionMethod=e.readString(2),this.date=e.readDate(),this.crc32=e.readInt(4),this.compressedSize=e.readInt(4),this.uncompressedSize=e.readInt(4),this.fileNameLength=e.readInt(2),this.extraFieldsLength=e.readInt(2),this.fileCommentLength=e.readInt(2),this.diskNumberStart=e.readInt(2),this.internalFileAttributes=e.readInt(2),this.externalFileAttributes=e.readInt(4),this.localHeaderOffset=e.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");this.fileName=e.readData(this.fileNameLength),this.readExtraFields(e),this.parseZIP64ExtraField(e),this.fileComment=e.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var e=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),0===e&&(this.dosPermissions=63&this.externalFileAttributes),3===e&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||"/"!==this.fileNameStr.slice(-1)||(this.dir=!0)},parseZIP64ExtraField:function(e){if(this.extraFields[1]){var t=new i(this.extraFields[1].value);this.uncompressedSize===o.MAX_VALUE_32BITS&&(this.uncompressedSize=t.readInt(8)),this.compressedSize===o.MAX_VALUE_32BITS&&(this.compressedSize=t.readInt(8)),this.localHeaderOffset===o.MAX_VALUE_32BITS&&(this.localHeaderOffset=t.readInt(8)),this.diskNumberStart===o.MAX_VALUE_32BITS&&(this.diskNumberStart=t.readInt(4))}},readExtraFields:function(e){var t,r,n,i=e.index;for(this.extraFields=this.extraFields||{};e.index<i+this.extraFieldsLength;)t=e.readInt(2),r=e.readInt(2),n=e.readString(r),this.extraFields[t]={id:t,length:r,value:n}},handleUTF8:function(){var e=l.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=s.utf8decode(this.fileName),this.fileCommentStr=s.utf8decode(this.fileComment);else{var t=this.findExtraFieldUnicodePath();if(null!==t)this.fileNameStr=t;else{var r=o.transformTo(e,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(r)}var n=this.findExtraFieldUnicodeComment();if(null!==n)this.fileCommentStr=n;else{var i=o.transformTo(e,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(i)}}},findExtraFieldUnicodePath:function(){var e=this.extraFields[28789];if(e){var t=new i(e.value);return 1!==t.readInt(1)?null:s.crc32(this.fileName)!==t.readInt(4)?null:s.utf8decode(t.readString(e.length-5))}return null},findExtraFieldUnicodeComment:function(){var e=this.extraFields[25461];if(e){var t=new i(e.value);return 1!==t.readInt(1)?null:s.crc32(this.fileComment)!==t.readInt(4)?null:s.utf8decode(t.readString(e.length-5))}return null}},t.exports=n},{"./compressedObject":3,"./object":14,"./stringReader":16,"./support":18,"./utils":22}],25:[function(e,t,r){var n={};(0,e("./lib/utils/common").assign)(n,e("./lib/deflate"),e("./lib/inflate"),e("./lib/zlib/constants")),t.exports=n},{"./lib/deflate":26,"./lib/inflate":27,"./lib/utils/common":28,"./lib/zlib/constants":31}],26:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);this.options=a.assign({level:d,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:p,to:""},e||{});var t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var r=o.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==h)throw new Error(l[r]);t.header&&o.deflateSetHeader(this.strm,t.header)}function i(e,t){var r=new n(t);if(r.push(e,!0),r.err)throw r.msg;return r.result}var o=e("./zlib/deflate"),a=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/messages"),u=e("./zlib/zstream"),c=Object.prototype.toString,h=0,d=-1,p=0,f=8;n.prototype.push=function(e,t){var r,n,i=this.strm,l=this.options.chunkSize;if(this.ended)return!1;n=t===~~t?t:!0===t?4:0,"string"==typeof e?i.input=s.string2buf(e):"[object ArrayBuffer]"===c.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;do{if(0===i.avail_out&&(i.output=new a.Buf8(l),i.next_out=0,i.avail_out=l),1!==(r=o.deflate(i,n))&&r!==h)return this.onEnd(r),this.ended=!0,!1;0!==i.avail_out&&(0!==i.avail_in||4!==n&&2!==n)||("string"===this.options.to?this.onData(s.buf2binstring(a.shrinkBuf(i.output,i.next_out))):this.onData(a.shrinkBuf(i.output,i.next_out)))}while((i.avail_in>0||0===i.avail_out)&&1!==r);return 4===n?(r=o.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===h):2!==n||(this.onEnd(h),i.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Deflate=n,r.deflate=i,r.deflateRaw=function(e,t){return(t=t||{}).raw=!0,i(e,t)},r.gzip=function(e,t){return(t=t||{}).gzip=!0,i(e,t)}},{"./utils/common":28,"./utils/strings":29,"./zlib/deflate":33,"./zlib/messages":38,"./zlib/zstream":40}],27:[function(e,t,r){function n(e){if(!(this instanceof n))return new n(e);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},e||{});var t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),!(t.windowBits>=0&&t.windowBits<16)||e&&e.windowBits||(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&0==(15&t.windowBits)&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var r=o.inflateInit2(this.strm,t.windowBits);if(r!==l.Z_OK)throw new Error(u[r]);this.header=new h,o.inflateGetHeader(this.strm,this.header)}function i(e,t){var r=new n(t);if(r.push(e,!0),r.err)throw r.msg;return r.result}var o=e("./zlib/inflate"),a=e("./utils/common"),s=e("./utils/strings"),l=e("./zlib/constants"),u=e("./zlib/messages"),c=e("./zlib/zstream"),h=e("./zlib/gzheader"),d=Object.prototype.toString;n.prototype.push=function(e,t){var r,n,i,u,c,h=this.strm,p=this.options.chunkSize,f=!1;if(this.ended)return!1;n=t===~~t?t:!0===t?l.Z_FINISH:l.Z_NO_FLUSH,"string"==typeof e?h.input=s.binstring2buf(e):"[object ArrayBuffer]"===d.call(e)?h.input=new Uint8Array(e):h.input=e,h.next_in=0,h.avail_in=h.input.length;do{if(0===h.avail_out&&(h.output=new a.Buf8(p),h.next_out=0,h.avail_out=p),(r=o.inflate(h,l.Z_NO_FLUSH))===l.Z_BUF_ERROR&&!0===f&&(r=l.Z_OK,f=!1),r!==l.Z_STREAM_END&&r!==l.Z_OK)return this.onEnd(r),this.ended=!0,!1;h.next_out&&(0!==h.avail_out&&r!==l.Z_STREAM_END&&(0!==h.avail_in||n!==l.Z_FINISH&&n!==l.Z_SYNC_FLUSH)||("string"===this.options.to?(i=s.utf8border(h.output,h.next_out),u=h.next_out-i,c=s.buf2string(h.output,i),h.next_out=u,h.avail_out=p-u,u&&a.arraySet(h.output,h.output,i,u,0),this.onData(c)):this.onData(a.shrinkBuf(h.output,h.next_out)))),0===h.avail_in&&0===h.avail_out&&(f=!0)}while((h.avail_in>0||0===h.avail_out)&&r!==l.Z_STREAM_END);return r===l.Z_STREAM_END&&(n=l.Z_FINISH),n===l.Z_FINISH?(r=o.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===l.Z_OK):n!==l.Z_SYNC_FLUSH||(this.onEnd(l.Z_OK),h.avail_out=0,!0)},n.prototype.onData=function(e){this.chunks.push(e)},n.prototype.onEnd=function(e){e===l.Z_OK&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},r.Inflate=n,r.inflate=i,r.inflateRaw=function(e,t){return(t=t||{}).raw=!0,i(e,t)},r.ungzip=i},{"./utils/common":28,"./utils/strings":29,"./zlib/constants":31,"./zlib/gzheader":34,"./zlib/inflate":36,"./zlib/messages":38,"./zlib/zstream":40}],28:[function(e,t,r){var n="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Int32Array;r.assign=function(e){for(var t=Array.prototype.slice.call(arguments,1);t.length;){var r=t.shift();if(r){if("object"!=(void 0===r?"undefined":a(r)))throw new TypeError(r+"must be non-object");for(var n in r)r.hasOwnProperty(n)&&(e[n]=r[n])}}return e},r.shrinkBuf=function(e,t){return e.length===t?e:e.subarray?e.subarray(0,t):(e.length=t,e)};var i={arraySet:function(e,t,r,n,i){if(t.subarray&&e.subarray)e.set(t.subarray(r,r+n),i);else for(var o=0;n>o;o++)e[i+o]=t[r+o]},flattenChunks:function(e){var t,r,n,i,o,a;for(n=0,t=0,r=e.length;r>t;t++)n+=e[t].length;for(a=new Uint8Array(n),i=0,t=0,r=e.length;r>t;t++)o=e[t],a.set(o,i),i+=o.length;return a}},o={arraySet:function(e,t,r,n,i){for(var o=0;n>o;o++)e[i+o]=t[r+o]},flattenChunks:function(e){return[].concat.apply([],e)}};r.setTyped=function(e){e?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,i)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(n)},{}],29:[function(e,t,r){function n(e,t){if(65537>t&&(e.subarray&&a||!e.subarray&&o))return String.fromCharCode.apply(null,i.shrinkBuf(e,t));for(var r="",n=0;t>n;n++)r+=String.fromCharCode(e[n]);return r}var i=e("./common"),o=!0,a=!0;try{String.fromCharCode.apply(null,[0])}catch(e){o=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){a=!1}for(var s=new i.Buf8(256),l=0;256>l;l++)s[l]=l>=252?6:l>=248?5:l>=240?4:l>=224?3:l>=192?2:1;s[254]=s[254]=1,r.string2buf=function(e){var t,r,n,o,a,s=e.length,l=0;for(o=0;s>o;o++)55296==(64512&(r=e.charCodeAt(o)))&&s>o+1&&(56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++)),l+=128>r?1:2048>r?2:65536>r?3:4;for(t=new i.Buf8(l),a=0,o=0;l>a;o++)55296==(64512&(r=e.charCodeAt(o)))&&s>o+1&&(56320==(64512&(n=e.charCodeAt(o+1)))&&(r=65536+(r-55296<<10)+(n-56320),o++)),128>r?t[a++]=r:2048>r?(t[a++]=192|r>>>6,t[a++]=128|63&r):65536>r?(t[a++]=224|r>>>12,t[a++]=128|r>>>6&63,t[a++]=128|63&r):(t[a++]=240|r>>>18,t[a++]=128|r>>>12&63,t[a++]=128|r>>>6&63,t[a++]=128|63&r);return t},r.buf2binstring=function(e){return n(e,e.length)},r.binstring2buf=function(e){for(var t=new i.Buf8(e.length),r=0,n=t.length;n>r;r++)t[r]=e.charCodeAt(r);return t},r.buf2string=function(e,t){var r,i,o,a,l=t||e.length,u=new Array(2*l);for(i=0,r=0;l>r;)if(128>(o=e[r++]))u[i++]=o;else if((a=s[o])>4)u[i++]=65533,r+=a-1;else{for(o&=2===a?31:3===a?15:7;a>1&&l>r;)o=o<<6|63&e[r++],a--;a>1?u[i++]=65533:65536>o?u[i++]=o:(o-=65536,u[i++]=55296|o>>10&1023,u[i++]=56320|1023&o)}return n(u,i)},r.utf8border=function(e,t){var r;for((t=t||e.length)>e.length&&(t=e.length),r=t-1;r>=0&&128==(192&e[r]);)r--;return 0>r?t:0===r?t:r+s[e[r]]>t?r:t}},{"./common":28}],30:[function(e,t,r){t.exports=function(e,t,r,n){for(var i=65535&e|0,o=e>>>16&65535|0,a=0;0!==r;){r-=a=r>2e3?2e3:r;do{o=o+(i=i+t[n++]|0)|0}while(--a);i%=65521,o%=65521}return i|o<<16|0}},{}],31:[function(e,t,r){t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],32:[function(e,t,r){var n=function(){for(var e,t=[],r=0;256>r;r++){e=r;for(var n=0;8>n;n++)e=1&e?3988292384^e>>>1:e>>>1;t[r]=e}return t}();t.exports=function(e,t,r,i){var o=n,a=i+r;e^=-1;for(var s=i;a>s;s++)e=e>>>8^o[255&(e^t[s])];return-1^e}},{}],33:[function(e,t,r){function n(e,t){return e.msg=C[t],t}function i(e){return(e<<1)-(e>4?9:0)}function o(e){for(var t=e.length;--t>=0;)e[t]=0}function a(e){var t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(T.arraySet(e.output,t.pending_buf,t.pending_out,r,e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))}function s(e,t){A._tr_flush_block(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,a(e.strm)}function l(e,t){e.pending_buf[e.pending++]=t}function u(e,t){e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t}function c(e,t,r,n){var i=e.avail_in;return i>n&&(i=n),0===i?0:(e.avail_in-=i,T.arraySet(t,e.input,e.next_in,i,r),1===e.state.wrap?e.adler=S(e.adler,t,i,r):2===e.state.wrap&&(e.adler=E(e.adler,t,i,r)),e.next_in+=i,e.total_in+=i,i)}function h(e,t){var r,n,i=e.max_chain_length,o=e.strstart,a=e.prev_length,s=e.nice_match,l=e.strstart>e.w_size-re?e.strstart-(e.w_size-re):0,u=e.window,c=e.w_mask,h=e.prev,d=e.strstart+te,p=u[o+a-1],f=u[o+a];e.prev_length>=e.good_match&&(i>>=2),s>e.lookahead&&(s=e.lookahead);do{if(u[(r=t)+a]===f&&u[r+a-1]===p&&u[r]===u[o]&&u[++r]===u[o+1]){o+=2,r++;do{}while(u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&u[++o]===u[++r]&&d>o);if(n=te-(d-o),o=d-te,n>a){if(e.match_start=t,a=n,n>=s)break;p=u[o+a-1],f=u[o+a]}}}while((t=h[t&c])>l&&0!=--i);return a<=e.lookahead?a:e.lookahead}function d(e){var t,r,n,i,o,a=e.w_size;do{if(i=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-re)){T.arraySet(e.window,e.window,a,a,0),e.match_start-=a,e.strstart-=a,e.block_start-=a,t=r=e.hash_size;do{n=e.head[--t],e.head[t]=n>=a?n-a:0}while(--r);t=r=a;do{n=e.prev[--t],e.prev[t]=n>=a?n-a:0}while(--r);i+=a}if(0===e.strm.avail_in)break;if(r=c(e.strm,e.window,e.strstart+e.lookahead,i),e.lookahead+=r,e.lookahead+e.insert>=ee)for(o=e.strstart-e.insert,e.ins_h=e.window[o],e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+1])&e.hash_mask;e.insert&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[o+ee-1])&e.hash_mask,e.prev[o&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=o,o++,e.insert--,!(e.lookahead+e.insert<ee)););}while(e.lookahead<re&&0!==e.strm.avail_in)}function p(e,t){for(var r,n;;){if(e.lookahead<re){if(d(e),e.lookahead<re&&t===M)return he;if(0===e.lookahead)break}if(r=0,e.lookahead>=ee&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ee-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-re&&(e.match_length=h(e,r)),e.match_length>=ee)if(n=A._tr_tally(e,e.strstart-e.match_start,e.match_length-ee),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=ee){e.match_length--;do{e.strstart++,e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ee-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart}while(0!=--e.match_length);e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+1])&e.hash_mask;else n=A._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(s(e,!1),0===e.strm.avail_out))return he}return e.insert=e.strstart<ee-1?e.strstart:ee-1,t===R?(s(e,!0),0===e.strm.avail_out?pe:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?he:de}function f(e,t){for(var r,n,i;;){if(e.lookahead<re){if(d(e),e.lookahead<re&&t===M)return he;if(0===e.lookahead)break}if(r=0,e.lookahead>=ee&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ee-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=ee-1,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-re&&(e.match_length=h(e,r),e.match_length<=5&&(e.strategy===F||e.match_length===ee&&e.strstart-e.match_start>4096)&&(e.match_length=ee-1)),e.prev_length>=ee&&e.match_length<=e.prev_length){i=e.strstart+e.lookahead-ee,n=A._tr_tally(e,e.strstart-1-e.prev_match,e.prev_length-ee),e.lookahead-=e.prev_length-1,e.prev_length-=2;do{++e.strstart<=i&&(e.ins_h=(e.ins_h<<e.hash_shift^e.window[e.strstart+ee-1])&e.hash_mask,r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart)}while(0!=--e.prev_length);if(e.match_available=0,e.match_length=ee-1,e.strstart++,n&&(s(e,!1),0===e.strm.avail_out))return he}else if(e.match_available){if((n=A._tr_tally(e,0,e.window[e.strstart-1]))&&s(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return he}else e.match_available=1,e.strstart++,e.lookahead--}return e.match_available&&(n=A._tr_tally(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<ee-1?e.strstart:ee-1,t===R?(s(e,!0),0===e.strm.avail_out?pe:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?he:de}function m(e,t){for(var r,n,i,o,a=e.window;;){if(e.lookahead<=te){if(d(e),e.lookahead<=te&&t===M)return he;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=ee&&e.strstart>0&&((n=a[i=e.strstart-1])===a[++i]&&n===a[++i]&&n===a[++i])){o=e.strstart+te;do{}while(n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&n===a[++i]&&o>i);e.match_length=te-(o-i),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=ee?(r=A._tr_tally(e,1,e.match_length-ee),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=A._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(s(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===R?(s(e,!0),0===e.strm.avail_out?pe:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?he:de}function v(e,t){for(var r;;){if(0===e.lookahead&&(d(e),0===e.lookahead)){if(t===M)return he;break}if(e.match_length=0,r=A._tr_tally(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(s(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===R?(s(e,!0),0===e.strm.avail_out?pe:fe):e.last_lit&&(s(e,!1),0===e.strm.avail_out)?he:de}function g(e,t,r,n,i){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=i}function y(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=X,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new T.Buf16(2*Z),this.dyn_dtree=new T.Buf16(2*(2*K+1)),this.bl_tree=new T.Buf16(2*(2*Q+1)),o(this.dyn_ltree),o(this.dyn_dtree),o(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new T.Buf16($+1),this.heap=new T.Buf16(2*q+1),o(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new T.Buf16(2*q+1),o(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function b(e){var t;return e&&e.state?(e.total_in=e.total_out=0,e.data_type=G,(t=e.state).pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=t.wrap?ie:ue,e.adler=2===t.wrap?0:1,t.last_flush=M,A._tr_init(t),L):n(e,P)}function w(e){var t=b(e);return t===L&&function(e){e.window_size=2*e.w_size,o(e.head),e.max_lazy_match=_[e.level].max_lazy,e.good_match=_[e.level].good_length,e.nice_match=_[e.level].nice_length,e.max_chain_length=_[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=ee-1,e.match_available=0,e.ins_h=0}(e.state),t}function x(e,t,r,i,o,a){if(!e)return P;var s=1;if(t===U&&(t=6),0>i?(s=0,i=-i):i>15&&(s=2,i-=16),1>o||o>Y||r!==X||8>i||i>15||0>t||t>9||0>a||a>j)return n(e,P);8===i&&(i=9);var l=new y;return e.state=l,l.strm=e,l.wrap=s,l.gzhead=null,l.w_bits=i,l.w_size=1<<l.w_bits,l.w_mask=l.w_size-1,l.hash_bits=o+7,l.hash_size=1<<l.hash_bits,l.hash_mask=l.hash_size-1,l.hash_shift=~~((l.hash_bits+ee-1)/ee),l.window=new T.Buf8(2*l.w_size),l.head=new T.Buf16(l.hash_size),l.prev=new T.Buf16(l.w_size),l.lit_bufsize=1<<o+6,l.pending_buf_size=4*l.lit_bufsize,l.pending_buf=new T.Buf8(l.pending_buf_size),l.d_buf=l.lit_bufsize>>1,l.l_buf=3*l.lit_bufsize,l.level=t,l.strategy=a,l.method=r,w(e)}var _,T=e("../utils/common"),A=e("./trees"),S=e("./adler32"),E=e("./crc32"),C=e("./messages"),M=0,N=1,O=3,R=4,k=5,L=0,I=1,P=-2,B=-3,D=-5,U=-1,F=1,z=2,V=3,j=4,H=0,G=2,X=8,Y=9,W=15,J=8,q=286,K=30,Q=19,Z=2*q+1,$=15,ee=3,te=258,re=te+ee+1,ne=32,ie=42,oe=69,ae=73,se=91,le=103,ue=113,ce=666,he=1,de=2,pe=3,fe=4,me=3;_=[new g(0,0,0,0,function(e,t){var r=65535;for(r>e.pending_buf_size-5&&(r=e.pending_buf_size-5);;){if(e.lookahead<=1){if(d(e),0===e.lookahead&&t===M)return he;if(0===e.lookahead)break}e.strstart+=e.lookahead,e.lookahead=0;var n=e.block_start+r;if((0===e.strstart||e.strstart>=n)&&(e.lookahead=e.strstart-n,e.strstart=n,s(e,!1),0===e.strm.avail_out))return he;if(e.strstart-e.block_start>=e.w_size-re&&(s(e,!1),0===e.strm.avail_out))return he}return e.insert=0,t===R?(s(e,!0),0===e.strm.avail_out?pe:fe):(e.strstart>e.block_start&&(s(e,!1),e.strm.avail_out),he)}),new g(4,4,8,4,p),new g(4,5,16,8,p),new g(4,6,32,32,p),new g(4,4,16,16,f),new g(8,16,32,32,f),new g(8,16,128,128,f),new g(8,32,128,256,f),new g(32,128,258,1024,f),new g(32,258,258,4096,f)],r.deflateInit=function(e,t){return x(e,t,X,W,J,H)},r.deflateInit2=x,r.deflateReset=w,r.deflateResetKeep=b,r.deflateSetHeader=function(e,t){return e&&e.state?2!==e.state.wrap?P:(e.state.gzhead=t,L):P},r.deflate=function(e,t){var r,s,c,h;if(!e||!e.state||t>k||0>t)return e?n(e,P):P;if(s=e.state,!e.output||!e.input&&0!==e.avail_in||s.status===ce&&t!==R)return n(e,0===e.avail_out?D:P);if(s.strm=e,r=s.last_flush,s.last_flush=t,s.status===ie)if(2===s.wrap)e.adler=0,l(s,31),l(s,139),l(s,8),s.gzhead?(l(s,(s.gzhead.text?1:0)+(s.gzhead.hcrc?2:0)+(s.gzhead.extra?4:0)+(s.gzhead.name?8:0)+(s.gzhead.comment?16:0)),l(s,255&s.gzhead.time),l(s,s.gzhead.time>>8&255),l(s,s.gzhead.time>>16&255),l(s,s.gzhead.time>>24&255),l(s,9===s.level?2:s.strategy>=z||s.level<2?4:0),l(s,255&s.gzhead.os),s.gzhead.extra&&s.gzhead.extra.length&&(l(s,255&s.gzhead.extra.length),l(s,s.gzhead.extra.length>>8&255)),s.gzhead.hcrc&&(e.adler=E(e.adler,s.pending_buf,s.pending,0)),s.gzindex=0,s.status=oe):(l(s,0),l(s,0),l(s,0),l(s,0),l(s,0),l(s,9===s.level?2:s.strategy>=z||s.level<2?4:0),l(s,me),s.status=ue);else{var d=X+(s.w_bits-8<<4)<<8;d|=(s.strategy>=z||s.level<2?0:s.level<6?1:6===s.level?2:3)<<6,0!==s.strstart&&(d|=ne),d+=31-d%31,s.status=ue,u(s,d),0!==s.strstart&&(u(s,e.adler>>>16),u(s,65535&e.adler)),e.adler=1}if(s.status===oe)if(s.gzhead.extra){for(c=s.pending;s.gzindex<(65535&s.gzhead.extra.length)&&(s.pending!==s.pending_buf_size||(s.gzhead.hcrc&&s.pending>c&&(e.adler=E(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending!==s.pending_buf_size));)l(s,255&s.gzhead.extra[s.gzindex]),s.gzindex++;s.gzhead.hcrc&&s.pending>c&&(e.adler=E(e.adler,s.pending_buf,s.pending-c,c)),s.gzindex===s.gzhead.extra.length&&(s.gzindex=0,s.status=ae)}else s.status=ae;if(s.status===ae)if(s.gzhead.name){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=E(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.name.length?255&s.gzhead.name.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=E(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.gzindex=0,s.status=se)}else s.status=se;if(s.status===se)if(s.gzhead.comment){c=s.pending;do{if(s.pending===s.pending_buf_size&&(s.gzhead.hcrc&&s.pending>c&&(e.adler=E(e.adler,s.pending_buf,s.pending-c,c)),a(e),c=s.pending,s.pending===s.pending_buf_size)){h=1;break}h=s.gzindex<s.gzhead.comment.length?255&s.gzhead.comment.charCodeAt(s.gzindex++):0,l(s,h)}while(0!==h);s.gzhead.hcrc&&s.pending>c&&(e.adler=E(e.adler,s.pending_buf,s.pending-c,c)),0===h&&(s.status=le)}else s.status=le;if(s.status===le&&(s.gzhead.hcrc?(s.pending+2>s.pending_buf_size&&a(e),s.pending+2<=s.pending_buf_size&&(l(s,255&e.adler),l(s,e.adler>>8&255),e.adler=0,s.status=ue)):s.status=ue),0!==s.pending){if(a(e),0===e.avail_out)return s.last_flush=-1,L}else if(0===e.avail_in&&i(t)<=i(r)&&t!==R)return n(e,D);if(s.status===ce&&0!==e.avail_in)return n(e,D);if(0!==e.avail_in||0!==s.lookahead||t!==M&&s.status!==ce){var p=s.strategy===z?v(s,t):s.strategy===V?m(s,t):_[s.level].func(s,t);if(p!==pe&&p!==fe||(s.status=ce),p===he||p===pe)return 0===e.avail_out&&(s.last_flush=-1),L;if(p===de&&(t===N?A._tr_align(s):t!==k&&(A._tr_stored_block(s,0,0,!1),t===O&&(o(s.head),0===s.lookahead&&(s.strstart=0,s.block_start=0,s.insert=0))),a(e),0===e.avail_out))return s.last_flush=-1,L}return t!==R?L:s.wrap<=0?I:(2===s.wrap?(l(s,255&e.adler),l(s,e.adler>>8&255),l(s,e.adler>>16&255),l(s,e.adler>>24&255),l(s,255&e.total_in),l(s,e.total_in>>8&255),l(s,e.total_in>>16&255),l(s,e.total_in>>24&255)):(u(s,e.adler>>>16),u(s,65535&e.adler)),a(e),s.wrap>0&&(s.wrap=-s.wrap),0!==s.pending?L:I)},r.deflateEnd=function(e){var t;return e&&e.state?(t=e.state.status)!==ie&&t!==oe&&t!==ae&&t!==se&&t!==le&&t!==ue&&t!==ce?n(e,P):(e.state=null,t===ue?n(e,B):L):P},r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":28,"./adler32":30,"./crc32":32,"./messages":38,"./trees":39}],34:[function(e,t,r){t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],35:[function(e,t,r){t.exports=function(e,t){var r,n,i,o,a,s,l,u,c,h,d,p,f,m,v,g,y,b,w,x,_,T,A,S,E;r=e.state,n=e.next_in,S=e.input,i=n+(e.avail_in-5),o=e.next_out,E=e.output,a=o-(t-e.avail_out),s=o+(e.avail_out-257),l=r.dmax,u=r.wsize,c=r.whave,h=r.wnext,d=r.window,p=r.hold,f=r.bits,m=r.lencode,v=r.distcode,g=(1<<r.lenbits)-1,y=(1<<r.distbits)-1;e:do{15>f&&(p+=S[n++]<<f,f+=8,p+=S[n++]<<f,f+=8),b=m[p&g];t:for(;;){if(p>>>=w=b>>>24,f-=w,0===(w=b>>>16&255))E[o++]=65535&b;else{if(!(16&w)){if(0==(64&w)){b=m[(65535&b)+(p&(1<<w)-1)];continue t}if(32&w){r.mode=12;break e}e.msg="invalid literal/length code",r.mode=30;break e}x=65535&b,(w&=15)&&(w>f&&(p+=S[n++]<<f,f+=8),x+=p&(1<<w)-1,p>>>=w,f-=w),15>f&&(p+=S[n++]<<f,f+=8,p+=S[n++]<<f,f+=8),b=v[p&y];r:for(;;){if(p>>>=w=b>>>24,f-=w,!(16&(w=b>>>16&255))){if(0==(64&w)){b=v[(65535&b)+(p&(1<<w)-1)];continue r}e.msg="invalid distance code",r.mode=30;break e}if(_=65535&b,(w&=15)>f&&(p+=S[n++]<<f,w>(f+=8)&&(p+=S[n++]<<f,f+=8)),(_+=p&(1<<w)-1)>l){e.msg="invalid distance too far back",r.mode=30;break e}if(p>>>=w,f-=w,_>(w=o-a)){if((w=_-w)>c&&r.sane){e.msg="invalid distance too far back",r.mode=30;break e}if(T=0,A=d,0===h){if(T+=u-w,x>w){x-=w;do{E[o++]=d[T++]}while(--w);T=o-_,A=E}}else if(w>h){if(T+=u+h-w,x>(w-=h)){x-=w;do{E[o++]=d[T++]}while(--w);if(T=0,x>h){x-=w=h;do{E[o++]=d[T++]}while(--w);T=o-_,A=E}}}else if(T+=h-w,x>w){x-=w;do{E[o++]=d[T++]}while(--w);T=o-_,A=E}for(;x>2;)E[o++]=A[T++],E[o++]=A[T++],E[o++]=A[T++],x-=3;x&&(E[o++]=A[T++],x>1&&(E[o++]=A[T++]))}else{T=o-_;do{E[o++]=E[T++],E[o++]=E[T++],E[o++]=E[T++],x-=3}while(x>2);x&&(E[o++]=E[T++],x>1&&(E[o++]=E[T++]))}break}}break}}while(i>n&&s>o);n-=x=f>>3,p&=(1<<(f-=x<<3))-1,e.next_in=n,e.next_out=o,e.avail_in=i>n?i-n+5:5-(n-i),e.avail_out=s>o?s-o+257:257-(o-s),r.hold=p,r.bits=f}},{}],36:[function(e,t,r){function n(e){return(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24)}function i(e){var t;return e&&e.state?(t=e.state,e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=O,t.last=0,t.havedict=0,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new h.Buf32(le),t.distcode=t.distdyn=new h.Buf32(ue),t.sane=1,t.back=-1,_):S}function o(e){var t;return e&&e.state?((t=e.state).wsize=0,t.whave=0,t.wnext=0,i(e)):S}function a(e,t){var r,n;return e&&e.state?(n=e.state,0>t?(r=0,t=-t):(r=1+(t>>4),48>t&&(t&=15)),t&&(8>t||t>15)?S:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,o(e))):S}function s(e,t){var r,n;return e?(n=new function(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new h.Buf16(320),this.work=new h.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0},e.state=n,n.window=null,(r=a(e,t))!==_&&(e.state=null),r):S}function l(e){if(he){var t;for(u=new h.Buf32(512),c=new h.Buf32(32),t=0;144>t;)e.lens[t++]=8;for(;256>t;)e.lens[t++]=9;for(;280>t;)e.lens[t++]=7;for(;288>t;)e.lens[t++]=8;for(m(g,e.lens,0,288,u,0,e.work,{bits:9}),t=0;32>t;)e.lens[t++]=5;m(y,e.lens,0,32,c,0,e.work,{bits:5}),he=!1}e.lencode=u,e.lenbits=9,e.distcode=c,e.distbits=5}var u,c,h=e("../utils/common"),d=e("./adler32"),p=e("./crc32"),f=e("./inffast"),m=e("./inftrees"),v=0,g=1,y=2,b=4,w=5,x=6,_=0,T=1,A=2,S=-2,E=-3,C=-4,M=-5,N=8,O=1,R=2,k=3,L=4,I=5,P=6,B=7,D=8,U=9,F=10,z=11,V=12,j=13,H=14,G=15,X=16,Y=17,W=18,J=19,q=20,K=21,Q=22,Z=23,$=24,ee=25,te=26,re=27,ne=28,ie=29,oe=30,ae=31,se=32,le=852,ue=592,ce=15,he=!0;r.inflateReset=o,r.inflateReset2=a,r.inflateResetKeep=i,r.inflateInit=function(e){return s(e,ce)},r.inflateInit2=s,r.inflate=function(e,t){var r,i,o,a,s,u,c,le,ue,ce,he,de,pe,fe,me,ve,ge,ye,be,we,xe,_e,Te,Ae,Se=0,Ee=new h.Buf8(4),Ce=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!e||!e.state||!e.output||!e.input&&0!==e.avail_in)return S;(r=e.state).mode===V&&(r.mode=j),s=e.next_out,o=e.output,c=e.avail_out,a=e.next_in,i=e.input,u=e.avail_in,le=r.hold,ue=r.bits,ce=u,he=c,_e=_;e:for(;;)switch(r.mode){case O:if(0===r.wrap){r.mode=j;break}for(;16>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}if(2&r.wrap&&35615===le){r.check=0,Ee[0]=255&le,Ee[1]=le>>>8&255,r.check=p(r.check,Ee,2,0),le=0,ue=0,r.mode=R;break}if(r.flags=0,r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&le)<<8)+(le>>8))%31){e.msg="incorrect header check",r.mode=oe;break}if((15&le)!==N){e.msg="unknown compression method",r.mode=oe;break}if(ue-=4,xe=8+(15&(le>>>=4)),0===r.wbits)r.wbits=xe;else if(xe>r.wbits){e.msg="invalid window size",r.mode=oe;break}r.dmax=1<<xe,e.adler=r.check=1,r.mode=512&le?F:V,le=0,ue=0;break;case R:for(;16>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}if(r.flags=le,(255&r.flags)!==N){e.msg="unknown compression method",r.mode=oe;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=oe;break}r.head&&(r.head.text=le>>8&1),512&r.flags&&(Ee[0]=255&le,Ee[1]=le>>>8&255,r.check=p(r.check,Ee,2,0)),le=0,ue=0,r.mode=k;case k:for(;32>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}r.head&&(r.head.time=le),512&r.flags&&(Ee[0]=255&le,Ee[1]=le>>>8&255,Ee[2]=le>>>16&255,Ee[3]=le>>>24&255,r.check=p(r.check,Ee,4,0)),le=0,ue=0,r.mode=L;case L:for(;16>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}r.head&&(r.head.xflags=255&le,r.head.os=le>>8),512&r.flags&&(Ee[0]=255&le,Ee[1]=le>>>8&255,r.check=p(r.check,Ee,2,0)),le=0,ue=0,r.mode=I;case I:if(1024&r.flags){for(;16>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}r.length=le,r.head&&(r.head.extra_len=le),512&r.flags&&(Ee[0]=255&le,Ee[1]=le>>>8&255,r.check=p(r.check,Ee,2,0)),le=0,ue=0}else r.head&&(r.head.extra=null);r.mode=P;case P:if(1024&r.flags&&((de=r.length)>u&&(de=u),de&&(r.head&&(xe=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Array(r.head.extra_len)),h.arraySet(r.head.extra,i,a,de,xe)),512&r.flags&&(r.check=p(r.check,i,de,a)),u-=de,a+=de,r.length-=de),r.length))break e;r.length=0,r.mode=B;case B:if(2048&r.flags){if(0===u)break e;de=0;do{xe=i[a+de++],r.head&&xe&&r.length<65536&&(r.head.name+=String.fromCharCode(xe))}while(xe&&u>de);if(512&r.flags&&(r.check=p(r.check,i,de,a)),u-=de,a+=de,xe)break e}else r.head&&(r.head.name=null);r.length=0,r.mode=D;case D:if(4096&r.flags){if(0===u)break e;de=0;do{xe=i[a+de++],r.head&&xe&&r.length<65536&&(r.head.comment+=String.fromCharCode(xe))}while(xe&&u>de);if(512&r.flags&&(r.check=p(r.check,i,de,a)),u-=de,a+=de,xe)break e}else r.head&&(r.head.comment=null);r.mode=U;case U:if(512&r.flags){for(;16>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}if(le!==(65535&r.check)){e.msg="header crc mismatch",r.mode=oe;break}le=0,ue=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=V;break;case F:for(;32>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}e.adler=r.check=n(le),le=0,ue=0,r.mode=z;case z:if(0===r.havedict)return e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=u,r.hold=le,r.bits=ue,A;e.adler=r.check=1,r.mode=V;case V:if(t===w||t===x)break e;case j:if(r.last){le>>>=7&ue,ue-=7&ue,r.mode=re;break}for(;3>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}switch(r.last=1&le,ue-=1,3&(le>>>=1)){case 0:r.mode=H;break;case 1:if(l(r),r.mode=q,t===x){le>>>=2,ue-=2;break e}break;case 2:r.mode=Y;break;case 3:e.msg="invalid block type",r.mode=oe}le>>>=2,ue-=2;break;case H:for(le>>>=7&ue,ue-=7&ue;32>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}if((65535&le)!=(le>>>16^65535)){e.msg="invalid stored block lengths",r.mode=oe;break}if(r.length=65535&le,le=0,ue=0,r.mode=G,t===x)break e;case G:r.mode=X;case X:if(de=r.length){if(de>u&&(de=u),de>c&&(de=c),0===de)break e;h.arraySet(o,i,a,de,s),u-=de,a+=de,c-=de,s+=de,r.length-=de;break}r.mode=V;break;case Y:for(;14>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}if(r.nlen=257+(31&le),le>>>=5,ue-=5,r.ndist=1+(31&le),le>>>=5,ue-=5,r.ncode=4+(15&le),le>>>=4,ue-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=oe;break}r.have=0,r.mode=W;case W:for(;r.have<r.ncode;){for(;3>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}r.lens[Ce[r.have++]]=7&le,le>>>=3,ue-=3}for(;r.have<19;)r.lens[Ce[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,Te={bits:r.lenbits},_e=m(v,r.lens,0,19,r.lencode,0,r.work,Te),r.lenbits=Te.bits,_e){e.msg="invalid code lengths set",r.mode=oe;break}r.have=0,r.mode=J;case J:for(;r.have<r.nlen+r.ndist;){for(;ve=(Se=r.lencode[le&(1<<r.lenbits)-1])>>>16&255,ge=65535&Se,!(ue>=(me=Se>>>24));){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}if(16>ge)le>>>=me,ue-=me,r.lens[r.have++]=ge;else{if(16===ge){for(Ae=me+2;Ae>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}if(le>>>=me,ue-=me,0===r.have){e.msg="invalid bit length repeat",r.mode=oe;break}xe=r.lens[r.have-1],de=3+(3&le),le>>>=2,ue-=2}else if(17===ge){for(Ae=me+3;Ae>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}ue-=me,xe=0,de=3+(7&(le>>>=me)),le>>>=3,ue-=3}else{for(Ae=me+7;Ae>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}ue-=me,xe=0,de=11+(127&(le>>>=me)),le>>>=7,ue-=7}if(r.have+de>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=oe;break}for(;de--;)r.lens[r.have++]=xe}}if(r.mode===oe)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=oe;break}if(r.lenbits=9,Te={bits:r.lenbits},_e=m(g,r.lens,0,r.nlen,r.lencode,0,r.work,Te),r.lenbits=Te.bits,_e){e.msg="invalid literal/lengths set",r.mode=oe;break}if(r.distbits=6,r.distcode=r.distdyn,Te={bits:r.distbits},_e=m(y,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,Te),r.distbits=Te.bits,_e){e.msg="invalid distances set",r.mode=oe;break}if(r.mode=q,t===x)break e;case q:r.mode=K;case K:if(u>=6&&c>=258){e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=u,r.hold=le,r.bits=ue,f(e,he),s=e.next_out,o=e.output,c=e.avail_out,a=e.next_in,i=e.input,u=e.avail_in,le=r.hold,ue=r.bits,r.mode===V&&(r.back=-1);break}for(r.back=0;ve=(Se=r.lencode[le&(1<<r.lenbits)-1])>>>16&255,ge=65535&Se,!(ue>=(me=Se>>>24));){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}if(ve&&0==(240&ve)){for(ye=me,be=ve,we=ge;ve=(Se=r.lencode[we+((le&(1<<ye+be)-1)>>ye)])>>>16&255,ge=65535&Se,!(ue>=ye+(me=Se>>>24));){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}le>>>=ye,ue-=ye,r.back+=ye}if(le>>>=me,ue-=me,r.back+=me,r.length=ge,0===ve){r.mode=te;break}if(32&ve){r.back=-1,r.mode=V;break}if(64&ve){e.msg="invalid literal/length code",r.mode=oe;break}r.extra=15&ve,r.mode=Q;case Q:if(r.extra){for(Ae=r.extra;Ae>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}r.length+=le&(1<<r.extra)-1,le>>>=r.extra,ue-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=Z;case Z:for(;ve=(Se=r.distcode[le&(1<<r.distbits)-1])>>>16&255,ge=65535&Se,!(ue>=(me=Se>>>24));){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}if(0==(240&ve)){for(ye=me,be=ve,we=ge;ve=(Se=r.distcode[we+((le&(1<<ye+be)-1)>>ye)])>>>16&255,ge=65535&Se,!(ue>=ye+(me=Se>>>24));){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}le>>>=ye,ue-=ye,r.back+=ye}if(le>>>=me,ue-=me,r.back+=me,64&ve){e.msg="invalid distance code",r.mode=oe;break}r.offset=ge,r.extra=15&ve,r.mode=$;case $:if(r.extra){for(Ae=r.extra;Ae>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}r.offset+=le&(1<<r.extra)-1,le>>>=r.extra,ue-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=oe;break}r.mode=ee;case ee:if(0===c)break e;if(de=he-c,r.offset>de){if((de=r.offset-de)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=oe;break}de>r.wnext?(de-=r.wnext,pe=r.wsize-de):pe=r.wnext-de,de>r.length&&(de=r.length),fe=r.window}else fe=o,pe=s-r.offset,de=r.length;de>c&&(de=c),c-=de,r.length-=de;do{o[s++]=fe[pe++]}while(--de);0===r.length&&(r.mode=K);break;case te:if(0===c)break e;o[s++]=r.length,c--,r.mode=K;break;case re:if(r.wrap){for(;32>ue;){if(0===u)break e;u--,le|=i[a++]<<ue,ue+=8}if(he-=c,e.total_out+=he,r.total+=he,he&&(e.adler=r.check=r.flags?p(r.check,o,he,s-he):d(r.check,o,he,s-he)),he=c,(r.flags?le:n(le))!==r.check){e.msg="incorrect data check",r.mode=oe;break}le=0,ue=0}r.mode=ne;case ne:if(r.wrap&&r.flags){for(;32>ue;){if(0===u)break e;u--,le+=i[a++]<<ue,ue+=8}if(le!==(4294967295&r.total)){e.msg="incorrect length check",r.mode=oe;break}le=0,ue=0}r.mode=ie;case ie:_e=T;break e;case oe:_e=E;break e;case ae:return C;case se:default:return S}return e.next_out=s,e.avail_out=c,e.next_in=a,e.avail_in=u,r.hold=le,r.bits=ue,(r.wsize||he!==e.avail_out&&r.mode<oe&&(r.mode<re||t!==b))&&function(e,t,r,n){var i,o=e.state;return null===o.window&&(o.wsize=1<<o.wbits,o.wnext=0,o.whave=0,o.window=new h.Buf8(o.wsize)),n>=o.wsize?(h.arraySet(o.window,t,r-o.wsize,o.wsize,0),o.wnext=0,o.whave=o.wsize):((i=o.wsize-o.wnext)>n&&(i=n),h.arraySet(o.window,t,r-n,i,o.wnext),(n-=i)?(h.arraySet(o.window,t,r-n,n,0),o.wnext=n,o.whave=o.wsize):(o.wnext+=i,o.wnext===o.wsize&&(o.wnext=0),o.whave<o.wsize&&(o.whave+=i))),0}(e,e.output,e.next_out,he-e.avail_out)?(r.mode=ae,C):(ce-=e.avail_in,he-=e.avail_out,e.total_in+=ce,e.total_out+=he,r.total+=he,r.wrap&&he&&(e.adler=r.check=r.flags?p(r.check,o,he,e.next_out-he):d(r.check,o,he,e.next_out-he)),e.data_type=r.bits+(r.last?64:0)+(r.mode===V?128:0)+(r.mode===q||r.mode===G?256:0),(0===ce&&0===he||t===b)&&_e===_&&(_e=M),_e)},r.inflateEnd=function(e){if(!e||!e.state)return S;var t=e.state;return t.window&&(t.window=null),e.state=null,_},r.inflateGetHeader=function(e,t){var r;return e&&e.state?0==(2&(r=e.state).wrap)?S:(r.head=t,t.done=!1,_):S},r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":28,"./adler32":30,"./crc32":32,"./inffast":35,"./inftrees":37}],37:[function(e,t,r){var n=e("../utils/common"),i=15,o=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],a=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],s=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],l=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];t.exports=function(e,t,r,u,c,h,d,p){var f,m,v,g,y,b,w,x,_,T=p.bits,A=0,S=0,E=0,C=0,M=0,N=0,O=0,R=0,k=0,L=0,I=null,P=0,B=new n.Buf16(16),D=new n.Buf16(16),U=null,F=0;for(A=0;i>=A;A++)B[A]=0;for(S=0;u>S;S++)B[t[r+S]]++;for(M=T,C=i;C>=1&&0===B[C];C--);if(M>C&&(M=C),0===C)return c[h++]=20971520,c[h++]=20971520,p.bits=1,0;for(E=1;C>E&&0===B[E];E++);for(E>M&&(M=E),R=1,A=1;i>=A;A++)if(R<<=1,0>(R-=B[A]))return-1;if(R>0&&(0===e||1!==C))return-1;for(D[1]=0,A=1;i>A;A++)D[A+1]=D[A]+B[A];for(S=0;u>S;S++)0!==t[r+S]&&(d[D[t[r+S]]++]=S);if(0===e?(I=U=d,b=19):1===e?(I=o,P-=257,U=a,F-=257,b=256):(I=s,U=l,b=-1),L=0,S=0,A=E,y=h,N=M,O=0,v=-1,g=(k=1<<M)-1,1===e&&k>852||2===e&&k>592)return 1;for(;;){0,w=A-O,d[S]<b?(x=0,_=d[S]):d[S]>b?(x=U[F+d[S]],_=I[P+d[S]]):(x=96,_=0),f=1<<A-O,E=m=1<<N;do{c[y+(L>>O)+(m-=f)]=w<<24|x<<16|_|0}while(0!==m);for(f=1<<A-1;L&f;)f>>=1;if(0!==f?(L&=f-1,L+=f):L=0,S++,0==--B[A]){if(A===C)break;A=t[r+d[S]]}if(A>M&&(L&g)!==v){for(0===O&&(O=M),y+=E,R=1<<(N=A-O);C>N+O&&!(0>=(R-=B[N+O]));)N++,R<<=1;if(k+=1<<N,1===e&&k>852||2===e&&k>592)return 1;c[v=L&g]=M<<24|N<<16|y-h|0}}return 0!==L&&(c[y+L]=A-O<<24|64<<16|0),p.bits=M,0}},{"../utils/common":28}],38:[function(e,t,r){t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],39:[function(e,t,r){function n(e){for(var t=e.length;--t>=0;)e[t]=0}function i(e,t,r,n,i){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=i,this.has_stree=e&&e.length}function o(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}function a(e){return 256>e?J[e]:J[256+(e>>>7)]}function s(e,t){e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255}function l(e,t,r){e.bi_valid>B-r?(e.bi_buf|=t<<e.bi_valid&65535,s(e,e.bi_buf),e.bi_buf=t>>B-e.bi_valid,e.bi_valid+=r-B):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)}function u(e,t,r){l(e,r[2*t],r[2*t+1])}function c(e,t){var r=0;do{r|=1&e,e>>>=1,r<<=1}while(--t>0);return r>>>1}function h(e,t,r){var n,i,o=new Array(P+1),a=0;for(n=1;P>=n;n++)o[n]=a=a+r[n-1]<<1;for(i=0;t>=i;i++){var s=e[2*i+1];0!==s&&(e[2*i]=c(o[s]++,s))}}function d(e){var t;for(t=0;R>t;t++)e.dyn_ltree[2*t]=0;for(t=0;k>t;t++)e.dyn_dtree[2*t]=0;for(t=0;L>t;t++)e.bl_tree[2*t]=0;e.dyn_ltree[2*U]=1,e.opt_len=e.static_len=0,e.last_lit=e.matches=0}function p(e){e.bi_valid>8?s(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0}function f(e,t,r,n){var i=2*t,o=2*r;return e[i]<e[o]||e[i]===e[o]&&n[t]<=n[r]}function m(e,t,r){for(var n=e.heap[r],i=r<<1;i<=e.heap_len&&(i<e.heap_len&&f(t,e.heap[i+1],e.heap[i],e.depth)&&i++,!f(t,n,e.heap[i],e.depth));)e.heap[r]=e.heap[i],r=i,i<<=1;e.heap[r]=n}function v(e,t,r){var n,i,o,s,c=0;if(0!==e.last_lit)do{n=e.pending_buf[e.d_buf+2*c]<<8|e.pending_buf[e.d_buf+2*c+1],i=e.pending_buf[e.l_buf+c],c++,0===n?u(e,i,t):(u(e,(o=q[i])+O+1,t),0!==(s=j[o])&&l(e,i-=K[o],s),u(e,o=a(--n),r),0!==(s=H[o])&&l(e,n-=Q[o],s))}while(c<e.last_lit);u(e,U,t)}function g(e,t){var r,n,i,o=t.dyn_tree,a=t.stat_desc.static_tree,s=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(e.heap_len=0,e.heap_max=I,r=0;l>r;r++)0!==o[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):o[2*r+1]=0;for(;e.heap_len<2;)o[2*(i=e.heap[++e.heap_len]=2>u?++u:0)]=1,e.depth[i]=0,e.opt_len--,s&&(e.static_len-=a[2*i+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)m(e,o,r);i=l;do{r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],m(e,o,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,o[2*i]=o[2*r]+o[2*n],e.depth[i]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,o[2*r+1]=o[2*n+1]=i,e.heap[1]=i++,m(e,o,1)}while(e.heap_len>=2);e.heap[--e.heap_max]=e.heap[1],function(e,t){var r,n,i,o,a,s,l=t.dyn_tree,u=t.max_code,c=t.stat_desc.static_tree,h=t.stat_desc.has_stree,d=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,f=t.stat_desc.max_length,m=0;for(o=0;P>=o;o++)e.bl_count[o]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;I>r;r++)(o=l[2*l[2*(n=e.heap[r])+1]+1]+1)>f&&(o=f,m++),l[2*n+1]=o,n>u||(e.bl_count[o]++,a=0,n>=p&&(a=d[n-p]),s=l[2*n],e.opt_len+=s*(o+a),h&&(e.static_len+=s*(c[2*n+1]+a)));if(0!==m){do{for(o=f-1;0===e.bl_count[o];)o--;e.bl_count[o]--,e.bl_count[o+1]+=2,e.bl_count[f]--,m-=2}while(m>0);for(o=f;0!==o;o--)for(n=e.bl_count[o];0!==n;)(i=e.heap[--r])>u||(l[2*i+1]!==o&&(e.opt_len+=(o-l[2*i+1])*l[2*i],l[2*i+1]=o),n--)}}(e,t),h(o,u,e.bl_count)}function y(e,t,r){var n,i,o=-1,a=t[1],s=0,l=7,u=4;for(0===a&&(l=138,u=3),t[2*(r+1)+1]=65535,n=0;r>=n;n++)i=a,a=t[2*(n+1)+1],++s<l&&i===a||(u>s?e.bl_tree[2*i]+=s:0!==i?(i!==o&&e.bl_tree[2*i]++,e.bl_tree[2*F]++):10>=s?e.bl_tree[2*z]++:e.bl_tree[2*V]++,s=0,o=i,0===a?(l=138,u=3):i===a?(l=6,u=3):(l=7,u=4))}function b(e,t,r){var n,i,o=-1,a=t[1],s=0,c=7,h=4;for(0===a&&(c=138,h=3),n=0;r>=n;n++)if(i=a,a=t[2*(n+1)+1],!(++s<c&&i===a)){if(h>s)do{u(e,i,e.bl_tree)}while(0!=--s);else 0!==i?(i!==o&&(u(e,i,e.bl_tree),s--),u(e,F,e.bl_tree),l(e,s-3,2)):10>=s?(u(e,z,e.bl_tree),l(e,s-3,3)):(u(e,V,e.bl_tree),l(e,s-11,7));s=0,o=i,0===a?(c=138,h=3):i===a?(c=6,h=3):(c=7,h=4)}}function w(e,t,r,n){l(e,(E<<1)+(n?1:0),3),function(e,t,r,n){p(e),n&&(s(e,r),s(e,~r)),x.arraySet(e.pending_buf,e.window,t,r,e.pending),e.pending+=r}(e,t,r,!0)}var x=e("../utils/common"),_=4,T=0,A=1,S=2,E=0,C=1,M=2,N=29,O=256,R=O+1+N,k=30,L=19,I=2*R+1,P=15,B=16,D=7,U=256,F=16,z=17,V=18,j=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],H=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],G=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],X=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],Y=new Array(2*(R+2));n(Y);var W=new Array(2*k);n(W);var J=new Array(512);n(J);var q=new Array(256);n(q);var K=new Array(N);n(K);var Q=new Array(k);n(Q);var Z,$,ee,te=!1;r._tr_init=function(e){te||(function(){var e,t,r,n,o,a=new Array(P+1);for(r=0,n=0;N-1>n;n++)for(K[n]=r,e=0;e<1<<j[n];e++)q[r++]=n;for(q[r-1]=n,o=0,n=0;16>n;n++)for(Q[n]=o,e=0;e<1<<H[n];e++)J[o++]=n;for(o>>=7;k>n;n++)for(Q[n]=o<<7,e=0;e<1<<H[n]-7;e++)J[256+o++]=n;for(t=0;P>=t;t++)a[t]=0;for(e=0;143>=e;)Y[2*e+1]=8,e++,a[8]++;for(;255>=e;)Y[2*e+1]=9,e++,a[9]++;for(;279>=e;)Y[2*e+1]=7,e++,a[7]++;for(;287>=e;)Y[2*e+1]=8,e++,a[8]++;for(h(Y,R+1,a),e=0;k>e;e++)W[2*e+1]=5,W[2*e]=c(e,5);Z=new i(Y,j,O+1,R,P),$=new i(W,H,0,k,P),ee=new i(new Array(0),G,0,L,D)}(),te=!0),e.l_desc=new o(e.dyn_ltree,Z),e.d_desc=new o(e.dyn_dtree,$),e.bl_desc=new o(e.bl_tree,ee),e.bi_buf=0,e.bi_valid=0,d(e)},r._tr_stored_block=w,r._tr_flush_block=function(e,t,r,n){var i,o,a=0;e.level>0?(e.strm.data_type===S&&(e.strm.data_type=function(e){var t,r=4093624447;for(t=0;31>=t;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return T;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return A;for(t=32;O>t;t++)if(0!==e.dyn_ltree[2*t])return A;return T}(e)),g(e,e.l_desc),g(e,e.d_desc),a=function(e){var t;for(y(e,e.dyn_ltree,e.l_desc.max_code),y(e,e.dyn_dtree,e.d_desc.max_code),g(e,e.bl_desc),t=L-1;t>=3&&0===e.bl_tree[2*X[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t}(e),(i=e.opt_len+3+7>>>3)>=(o=e.static_len+3+7>>>3)&&(i=o)):i=o=r+5,i>=r+4&&-1!==t?w(e,t,r,n):e.strategy===_||o===i?(l(e,(C<<1)+(n?1:0),3),v(e,Y,W)):(l(e,(M<<1)+(n?1:0),3),function(e,t,r,n){var i;for(l(e,t-257,5),l(e,r-1,5),l(e,n-4,4),i=0;n>i;i++)l(e,e.bl_tree[2*X[i]+1],3);b(e,e.dyn_ltree,t-1),b(e,e.dyn_dtree,r-1)}(e,e.l_desc.max_code+1,e.d_desc.max_code+1,a+1),v(e,e.dyn_ltree,e.dyn_dtree)),d(e),n&&p(e)},r._tr_tally=function(e,t,r){return e.pending_buf[e.d_buf+2*e.last_lit]=t>>>8&255,e.pending_buf[e.d_buf+2*e.last_lit+1]=255&t,e.pending_buf[e.l_buf+e.last_lit]=255&r,e.last_lit++,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[2*(q[r]+O+1)]++,e.dyn_dtree[2*a(t)]++),e.last_lit===e.lit_bufsize-1},r._tr_align=function(e){l(e,C<<1,3),u(e,U,Y),function(e){16===e.bi_valid?(s(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)}(e)}},{"../utils/common":28}],40:[function(e,t,r){t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}]},{},[10])(10)});var s=window.JSZip}).call(t,r("EuP9").Buffer,r("f1Eh")(e),r("DuR2"))},wCDB:function(e,t,r){"use strict";var n=r("6+nK"),i=r("OkqS");function o(){}function a(e,t){this.dv=new DataView(e),this.offset=0,this.littleEndian=void 0===t||t,this.encoder=new o}function s(){}function l(){}o.prototype.s2u=function(e){for(var t=this.s2uTable,r="",n=0;n<e.length;){var i=e[n++];if(!(i>=0&&i<=126||i>=161&&i<=223)&&n<e.length&&(i=i<<8|e[n++]),void 0===t[i])throw"unknown char code "+i+".";r+=String.fromCharCode(t[i])}return r},o.prototype.s2uTable={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,34:34,35:35,36:36,37:37,38:38,39:39,40:40,41:41,42:42,43:43,44:44,45:45,46:46,47:47,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,58:58,59:59,60:60,61:61,62:62,63:63,64:64,65:65,66:66,67:67,68:68,69:69,70:70,71:71,72:72,73:73,74:74,75:75,76:76,77:77,78:78,79:79,80:80,81:81,82:82,83:83,84:84,85:85,86:86,87:87,88:88,89:89,90:90,91:91,92:92,93:93,94:94,95:95,96:96,97:97,98:98,99:99,100:100,101:101,102:102,103:103,104:104,105:105,106:106,107:107,108:108,109:109,110:110,111:111,112:112,113:113,114:114,115:115,116:116,117:117,118:118,119:119,120:120,121:121,122:122,123:123,124:124,125:125,126:126,161:65377,162:65378,163:65379,164:65380,165:65381,166:65382,167:65383,168:65384,169:65385,170:65386,171:65387,172:65388,173:65389,174:65390,175:65391,176:65392,177:65393,178:65394,179:65395,180:65396,181:65397,182:65398,183:65399,184:65400,185:65401,186:65402,187:65403,188:65404,189:65405,190:65406,191:65407,192:65408,193:65409,194:65410,195:65411,196:65412,197:65413,198:65414,199:65415,200:65416,201:65417,202:65418,203:65419,204:65420,205:65421,206:65422,207:65423,208:65424,209:65425,210:65426,211:65427,212:65428,213:65429,214:65430,215:65431,216:65432,217:65433,218:65434,219:65435,220:65436,221:65437,222:65438,223:65439,33088:12288,33089:12289,33090:12290,33091:65292,33092:65294,33093:12539,33094:65306,33095:65307,33096:65311,33097:65281,33098:12443,33099:12444,33100:180,33101:65344,33102:168,33103:65342,33104:65507,33105:65343,33106:12541,33107:12542,33108:12445,33109:12446,33110:12291,33111:20189,33112:12293,33113:12294,33114:12295,33115:12540,33116:8213,33117:8208,33118:65295,33119:65340,33120:65374,33121:8741,33122:65372,33123:8230,33124:8229,33125:8216,33126:8217,33127:8220,33128:8221,33129:65288,33130:65289,33131:12308,33132:12309,33133:65339,33134:65341,33135:65371,33136:65373,33137:12296,33138:12297,33139:12298,33140:12299,33141:12300,33142:12301,33143:12302,33144:12303,33145:12304,33146:12305,33147:65291,33148:65293,33149:177,33150:215,33152:247,33153:65309,33154:8800,33155:65308,33156:65310,33157:8806,33158:8807,33159:8734,33160:8756,33161:9794,33162:9792,33163:176,33164:8242,33165:8243,33166:8451,33167:65509,33168:65284,33169:65504,33170:65505,33171:65285,33172:65283,33173:65286,33174:65290,33175:65312,33176:167,33177:9734,33178:9733,33179:9675,33180:9679,33181:9678,33182:9671,33183:9670,33184:9633,33185:9632,33186:9651,33187:9650,33188:9661,33189:9660,33190:8251,33191:12306,33192:8594,33193:8592,33194:8593,33195:8595,33196:12307,33208:8712,33209:8715,33210:8838,33211:8839,33212:8834,33213:8835,33214:8746,33215:8745,33224:8743,33225:8744,33226:65506,33227:8658,33228:8660,33229:8704,33230:8707,33242:8736,33243:8869,33244:8978,33245:8706,33246:8711,33247:8801,33248:8786,33249:8810,33250:8811,33251:8730,33252:8765,33253:8733,33254:8757,33255:8747,33256:8748,33264:8491,33265:8240,33266:9839,33267:9837,33268:9834,33269:8224,33270:8225,33271:182,33276:9711,33359:65296,33360:65297,33361:65298,33362:65299,33363:65300,33364:65301,33365:65302,33366:65303,33367:65304,33368:65305,33376:65313,33377:65314,33378:65315,33379:65316,33380:65317,33381:65318,33382:65319,33383:65320,33384:65321,33385:65322,33386:65323,33387:65324,33388:65325,33389:65326,33390:65327,33391:65328,33392:65329,33393:65330,33394:65331,33395:65332,33396:65333,33397:65334,33398:65335,33399:65336,33400:65337,33401:65338,33409:65345,33410:65346,33411:65347,33412:65348,33413:65349,33414:65350,33415:65351,33416:65352,33417:65353,33418:65354,33419:65355,33420:65356,33421:65357,33422:65358,33423:65359,33424:65360,33425:65361,33426:65362,33427:65363,33428:65364,33429:65365,33430:65366,33431:65367,33432:65368,33433:65369,33434:65370,33439:12353,33440:12354,33441:12355,33442:12356,33443:12357,33444:12358,33445:12359,33446:12360,33447:12361,33448:12362,33449:12363,33450:12364,33451:12365,33452:12366,33453:12367,33454:12368,33455:12369,33456:12370,33457:12371,33458:12372,33459:12373,33460:12374,33461:12375,33462:12376,33463:12377,33464:12378,33465:12379,33466:12380,33467:12381,33468:12382,33469:12383,33470:12384,33471:12385,33472:12386,33473:12387,33474:12388,33475:12389,33476:12390,33477:12391,33478:12392,33479:12393,33480:12394,33481:12395,33482:12396,33483:12397,33484:12398,33485:12399,33486:12400,33487:12401,33488:12402,33489:12403,33490:12404,33491:12405,33492:12406,33493:12407,33494:12408,33495:12409,33496:12410,33497:12411,33498:12412,33499:12413,33500:12414,33501:12415,33502:12416,33503:12417,33504:12418,33505:12419,33506:12420,33507:12421,33508:12422,33509:12423,33510:12424,33511:12425,33512:12426,33513:12427,33514:12428,33515:12429,33516:12430,33517:12431,33518:12432,33519:12433,33520:12434,33521:12435,33600:12449,33601:12450,33602:12451,33603:12452,33604:12453,33605:12454,33606:12455,33607:12456,33608:12457,33609:12458,33610:12459,33611:12460,33612:12461,33613:12462,33614:12463,33615:12464,33616:12465,33617:12466,33618:12467,33619:12468,33620:12469,33621:12470,33622:12471,33623:12472,33624:12473,33625:12474,33626:12475,33627:12476,33628:12477,33629:12478,33630:12479,33631:12480,33632:12481,33633:12482,33634:12483,33635:12484,33636:12485,33637:12486,33638:12487,33639:12488,33640:12489,33641:12490,33642:12491,33643:12492,33644:12493,33645:12494,33646:12495,33647:12496,33648:12497,33649:12498,33650:12499,33651:12500,33652:12501,33653:12502,33654:12503,33655:12504,33656:12505,33657:12506,33658:12507,33659:12508,33660:12509,33661:12510,33662:12511,33664:12512,33665:12513,33666:12514,33667:12515,33668:12516,33669:12517,33670:12518,33671:12519,33672:12520,33673:12521,33674:12522,33675:12523,33676:12524,33677:12525,33678:12526,33679:12527,33680:12528,33681:12529,33682:12530,33683:12531,33684:12532,33685:12533,33686:12534,33695:913,33696:914,33697:915,33698:916,33699:917,33700:918,33701:919,33702:920,33703:921,33704:922,33705:923,33706:924,33707:925,33708:926,33709:927,33710:928,33711:929,33712:931,33713:932,33714:933,33715:934,33716:935,33717:936,33718:937,33727:945,33728:946,33729:947,33730:948,33731:949,33732:950,33733:951,33734:952,33735:953,33736:954,33737:955,33738:956,33739:957,33740:958,33741:959,33742:960,33743:961,33744:963,33745:964,33746:965,33747:966,33748:967,33749:968,33750:969,33856:1040,33857:1041,33858:1042,33859:1043,33860:1044,33861:1045,33862:1025,33863:1046,33864:1047,33865:1048,33866:1049,33867:1050,33868:1051,33869:1052,33870:1053,33871:1054,33872:1055,33873:1056,33874:1057,33875:1058,33876:1059,33877:1060,33878:1061,33879:1062,33880:1063,33881:1064,33882:1065,33883:1066,33884:1067,33885:1068,33886:1069,33887:1070,33888:1071,33904:1072,33905:1073,33906:1074,33907:1075,33908:1076,33909:1077,33910:1105,33911:1078,33912:1079,33913:1080,33914:1081,33915:1082,33916:1083,33917:1084,33918:1085,33920:1086,33921:1087,33922:1088,33923:1089,33924:1090,33925:1091,33926:1092,33927:1093,33928:1094,33929:1095,33930:1096,33931:1097,33932:1098,33933:1099,33934:1100,33935:1101,33936:1102,33937:1103,33951:9472,33952:9474,33953:9484,33954:9488,33955:9496,33956:9492,33957:9500,33958:9516,33959:9508,33960:9524,33961:9532,33962:9473,33963:9475,33964:9487,33965:9491,33966:9499,33967:9495,33968:9507,33969:9523,33970:9515,33971:9531,33972:9547,33973:9504,33974:9519,33975:9512,33976:9527,33977:9535,33978:9501,33979:9520,33980:9509,33981:9528,33982:9538,34624:9312,34625:9313,34626:9314,34627:9315,34628:9316,34629:9317,34630:9318,34631:9319,34632:9320,34633:9321,34634:9322,34635:9323,34636:9324,34637:9325,34638:9326,34639:9327,34640:9328,34641:9329,34642:9330,34643:9331,34644:8544,34645:8545,34646:8546,34647:8547,34648:8548,34649:8549,34650:8550,34651:8551,34652:8552,34653:8553,34655:13129,34656:13076,34657:13090,34658:13133,34659:13080,34660:13095,34661:13059,34662:13110,34663:13137,34664:13143,34665:13069,34666:13094,34667:13091,34668:13099,34669:13130,34670:13115,34671:13212,34672:13213,34673:13214,34674:13198,34675:13199,34676:13252,34677:13217,34686:13179,34688:12317,34689:12319,34690:8470,34691:13261,34692:8481,34693:12964,34694:12965,34695:12966,34696:12967,34697:12968,34698:12849,34699:12850,34700:12857,34701:13182,34702:13181,34703:13180,34704:8786,34705:8801,34706:8747,34707:8750,34708:8721,34709:8730,34710:8869,34711:8736,34712:8735,34713:8895,34714:8757,34715:8745,34716:8746,34975:20124,34976:21782,34977:23043,34978:38463,34979:21696,34980:24859,34981:25384,34982:23030,34983:36898,34984:33909,34985:33564,34986:31312,34987:24746,34988:25569,34989:28197,34990:26093,34991:33894,34992:33446,34993:39925,34994:26771,34995:22311,34996:26017,34997:25201,34998:23451,34999:22992,35000:34427,35001:39156,35002:32098,35003:32190,35004:39822,35005:25110,35006:31903,35007:34999,35008:23433,35009:24245,35010:25353,35011:26263,35012:26696,35013:38343,35014:38797,35015:26447,35016:20197,35017:20234,35018:20301,35019:20381,35020:20553,35021:22258,35022:22839,35023:22996,35024:23041,35025:23561,35026:24799,35027:24847,35028:24944,35029:26131,35030:26885,35031:28858,35032:30031,35033:30064,35034:31227,35035:32173,35036:32239,35037:32963,35038:33806,35039:34915,35040:35586,35041:36949,35042:36986,35043:21307,35044:20117,35045:20133,35046:22495,35047:32946,35048:37057,35049:30959,35050:19968,35051:22769,35052:28322,35053:36920,35054:31282,35055:33576,35056:33419,35057:39983,35058:20801,35059:21360,35060:21693,35061:21729,35062:22240,35063:23035,35064:24341,35065:39154,35066:28139,35067:32996,35068:34093,35136:38498,35137:38512,35138:38560,35139:38907,35140:21515,35141:21491,35142:23431,35143:28879,35144:32701,35145:36802,35146:38632,35147:21359,35148:40284,35149:31418,35150:19985,35151:30867,35152:33276,35153:28198,35154:22040,35155:21764,35156:27421,35157:34074,35158:39995,35159:23013,35160:21417,35161:28006,35162:29916,35163:38287,35164:22082,35165:20113,35166:36939,35167:38642,35168:33615,35169:39180,35170:21473,35171:21942,35172:23344,35173:24433,35174:26144,35175:26355,35176:26628,35177:27704,35178:27891,35179:27945,35180:29787,35181:30408,35182:31310,35183:38964,35184:33521,35185:34907,35186:35424,35187:37613,35188:28082,35189:30123,35190:30410,35191:39365,35192:24742,35193:35585,35194:36234,35195:38322,35196:27022,35197:21421,35198:20870,35200:22290,35201:22576,35202:22852,35203:23476,35204:24310,35205:24616,35206:25513,35207:25588,35208:27839,35209:28436,35210:28814,35211:28948,35212:29017,35213:29141,35214:29503,35215:32257,35216:33398,35217:33489,35218:34199,35219:36960,35220:37467,35221:40219,35222:22633,35223:26044,35224:27738,35225:29989,35226:20985,35227:22830,35228:22885,35229:24448,35230:24540,35231:25276,35232:26106,35233:27178,35234:27431,35235:27572,35236:29579,35237:32705,35238:35158,35239:40236,35240:40206,35241:40644,35242:23713,35243:27798,35244:33659,35245:20740,35246:23627,35247:25014,35248:33222,35249:26742,35250:29281,35251:20057,35252:20474,35253:21368,35254:24681,35255:28201,35256:31311,35257:38899,35258:19979,35259:21270,35260:20206,35261:20309,35262:20285,35263:20385,35264:20339,35265:21152,35266:21487,35267:22025,35268:22799,35269:23233,35270:23478,35271:23521,35272:31185,35273:26247,35274:26524,35275:26550,35276:27468,35277:27827,35278:28779,35279:29634,35280:31117,35281:31166,35282:31292,35283:31623,35284:33457,35285:33499,35286:33540,35287:33655,35288:33775,35289:33747,35290:34662,35291:35506,35292:22057,35293:36008,35294:36838,35295:36942,35296:38686,35297:34442,35298:20420,35299:23784,35300:25105,35301:29273,35302:30011,35303:33253,35304:33469,35305:34558,35306:36032,35307:38597,35308:39187,35309:39381,35310:20171,35311:20250,35312:35299,35313:22238,35314:22602,35315:22730,35316:24315,35317:24555,35318:24618,35319:24724,35320:24674,35321:25040,35322:25106,35323:25296,35324:25913,35392:39745,35393:26214,35394:26800,35395:28023,35396:28784,35397:30028,35398:30342,35399:32117,35400:33445,35401:34809,35402:38283,35403:38542,35404:35997,35405:20977,35406:21182,35407:22806,35408:21683,35409:23475,35410:23830,35411:24936,35412:27010,35413:28079,35414:30861,35415:33995,35416:34903,35417:35442,35418:37799,35419:39608,35420:28012,35421:39336,35422:34521,35423:22435,35424:26623,35425:34510,35426:37390,35427:21123,35428:22151,35429:21508,35430:24275,35431:25313,35432:25785,35433:26684,35434:26680,35435:27579,35436:29554,35437:30906,35438:31339,35439:35226,35440:35282,35441:36203,35442:36611,35443:37101,35444:38307,35445:38548,35446:38761,35447:23398,35448:23731,35449:27005,35450:38989,35451:38990,35452:25499,35453:31520,35454:27179,35456:27263,35457:26806,35458:39949,35459:28511,35460:21106,35461:21917,35462:24688,35463:25324,35464:27963,35465:28167,35466:28369,35467:33883,35468:35088,35469:36676,35470:19988,35471:39993,35472:21494,35473:26907,35474:27194,35475:38788,35476:26666,35477:20828,35478:31427,35479:33970,35480:37340,35481:37772,35482:22107,35483:40232,35484:26658,35485:33541,35486:33841,35487:31909,35488:21e3,35489:33477,35490:29926,35491:20094,35492:20355,35493:20896,35494:23506,35495:21002,35496:21208,35497:21223,35498:24059,35499:21914,35500:22570,35501:23014,35502:23436,35503:23448,35504:23515,35505:24178,35506:24185,35507:24739,35508:24863,35509:24931,35510:25022,35511:25563,35512:25954,35513:26577,35514:26707,35515:26874,35516:27454,35517:27475,35518:27735,35519:28450,35520:28567,35521:28485,35522:29872,35523:29976,35524:30435,35525:30475,35526:31487,35527:31649,35528:31777,35529:32233,35530:32566,35531:32752,35532:32925,35533:33382,35534:33694,35535:35251,35536:35532,35537:36011,35538:36996,35539:37969,35540:38291,35541:38289,35542:38306,35543:38501,35544:38867,35545:39208,35546:33304,35547:20024,35548:21547,35549:23736,35550:24012,35551:29609,35552:30284,35553:30524,35554:23721,35555:32747,35556:36107,35557:38593,35558:38929,35559:38996,35560:39e3,35561:20225,35562:20238,35563:21361,35564:21916,35565:22120,35566:22522,35567:22855,35568:23305,35569:23492,35570:23696,35571:24076,35572:24190,35573:24524,35574:25582,35575:26426,35576:26071,35577:26082,35578:26399,35579:26827,35580:26820,35648:27231,35649:24112,35650:27589,35651:27671,35652:27773,35653:30079,35654:31048,35655:23395,35656:31232,35657:32e3,35658:24509,35659:35215,35660:35352,35661:36020,35662:36215,35663:36556,35664:36637,35665:39138,35666:39438,35667:39740,35668:20096,35669:20605,35670:20736,35671:22931,35672:23452,35673:25135,35674:25216,35675:25836,35676:27450,35677:29344,35678:30097,35679:31047,35680:32681,35681:34811,35682:35516,35683:35696,35684:25516,35685:33738,35686:38816,35687:21513,35688:21507,35689:21931,35690:26708,35691:27224,35692:35440,35693:30759,35694:26485,35695:40653,35696:21364,35697:23458,35698:33050,35699:34384,35700:36870,35701:19992,35702:20037,35703:20167,35704:20241,35705:21450,35706:21560,35707:23470,35708:24339,35709:24613,35710:25937,35712:26429,35713:27714,35714:27762,35715:27875,35716:28792,35717:29699,35718:31350,35719:31406,35720:31496,35721:32026,35722:31998,35723:32102,35724:26087,35725:29275,35726:21435,35727:23621,35728:24040,35729:25298,35730:25312,35731:25369,35732:28192,35733:34394,35734:35377,35735:36317,35736:37624,35737:28417,35738:31142,35739:39770,35740:20136,35741:20139,35742:20140,35743:20379,35744:20384,35745:20689,35746:20807,35747:31478,35748:20849,35749:20982,35750:21332,35751:21281,35752:21375,35753:21483,35754:21932,35755:22659,35756:23777,35757:24375,35758:24394,35759:24623,35760:24656,35761:24685,35762:25375,35763:25945,35764:27211,35765:27841,35766:29378,35767:29421,35768:30703,35769:33016,35770:33029,35771:33288,35772:34126,35773:37111,35774:37857,35775:38911,35776:39255,35777:39514,35778:20208,35779:20957,35780:23597,35781:26241,35782:26989,35783:23616,35784:26354,35785:26997,35786:29577,35787:26704,35788:31873,35789:20677,35790:21220,35791:22343,35792:24062,35793:37670,35794:26020,35795:27427,35796:27453,35797:29748,35798:31105,35799:31165,35800:31563,35801:32202,35802:33465,35803:33740,35804:34943,35805:35167,35806:35641,35807:36817,35808:37329,35809:21535,35810:37504,35811:20061,35812:20534,35813:21477,35814:21306,35815:29399,35816:29590,35817:30697,35818:33510,35819:36527,35820:39366,35821:39368,35822:39378,35823:20855,35824:24858,35825:34398,35826:21936,35827:31354,35828:20598,35829:23507,35830:36935,35831:38533,35832:20018,35833:27355,35834:37351,35835:23633,35836:23624,35904:25496,35905:31391,35906:27795,35907:38772,35908:36705,35909:31402,35910:29066,35911:38536,35912:31874,35913:26647,35914:32368,35915:26705,35916:37740,35917:21234,35918:21531,35919:34219,35920:35347,35921:32676,35922:36557,35923:37089,35924:21350,35925:34952,35926:31041,35927:20418,35928:20670,35929:21009,35930:20804,35931:21843,35932:22317,35933:29674,35934:22411,35935:22865,35936:24418,35937:24452,35938:24693,35939:24950,35940:24935,35941:25001,35942:25522,35943:25658,35944:25964,35945:26223,35946:26690,35947:28179,35948:30054,35949:31293,35950:31995,35951:32076,35952:32153,35953:32331,35954:32619,35955:33550,35956:33610,35957:34509,35958:35336,35959:35427,35960:35686,35961:36605,35962:38938,35963:40335,35964:33464,35965:36814,35966:39912,35968:21127,35969:25119,35970:25731,35971:28608,35972:38553,35973:26689,35974:20625,35975:27424,35976:27770,35977:28500,35978:31348,35979:32080,35980:34880,35981:35363,35982:26376,35983:20214,35984:20537,35985:20518,35986:20581,35987:20860,35988:21048,35989:21091,35990:21927,35991:22287,35992:22533,35993:23244,35994:24314,35995:25010,35996:25080,35997:25331,35998:25458,35999:26908,36000:27177,36001:29309,36002:29356,36003:29486,36004:30740,36005:30831,36006:32121,36007:30476,36008:32937,36009:35211,36010:35609,36011:36066,36012:36562,36013:36963,36014:37749,36015:38522,36016:38997,36017:39443,36018:40568,36019:20803,36020:21407,36021:21427,36022:24187,36023:24358,36024:28187,36025:28304,36026:29572,36027:29694,36028:32067,36029:33335,36030:35328,36031:35578,36032:38480,36033:20046,36034:20491,36035:21476,36036:21628,36037:22266,36038:22993,36039:23396,36040:24049,36041:24235,36042:24359,36043:25144,36044:25925,36045:26543,36046:28246,36047:29392,36048:31946,36049:34996,36050:32929,36051:32993,36052:33776,36053:34382,36054:35463,36055:36328,36056:37431,36057:38599,36058:39015,36059:40723,36060:20116,36061:20114,36062:20237,36063:21320,36064:21577,36065:21566,36066:23087,36067:24460,36068:24481,36069:24735,36070:26791,36071:27278,36072:29786,36073:30849,36074:35486,36075:35492,36076:35703,36077:37264,36078:20062,36079:39881,36080:20132,36081:20348,36082:20399,36083:20505,36084:20502,36085:20809,36086:20844,36087:21151,36088:21177,36089:21246,36090:21402,36091:21475,36092:21521,36160:21518,36161:21897,36162:22353,36163:22434,36164:22909,36165:23380,36166:23389,36167:23439,36168:24037,36169:24039,36170:24055,36171:24184,36172:24195,36173:24218,36174:24247,36175:24344,36176:24658,36177:24908,36178:25239,36179:25304,36180:25511,36181:25915,36182:26114,36183:26179,36184:26356,36185:26477,36186:26657,36187:26775,36188:27083,36189:27743,36190:27946,36191:28009,36192:28207,36193:28317,36194:30002,36195:30343,36196:30828,36197:31295,36198:31968,36199:32005,36200:32024,36201:32094,36202:32177,36203:32789,36204:32771,36205:32943,36206:32945,36207:33108,36208:33167,36209:33322,36210:33618,36211:34892,36212:34913,36213:35611,36214:36002,36215:36092,36216:37066,36217:37237,36218:37489,36219:30783,36220:37628,36221:38308,36222:38477,36224:38917,36225:39321,36226:39640,36227:40251,36228:21083,36229:21163,36230:21495,36231:21512,36232:22741,36233:25335,36234:28640,36235:35946,36236:36703,36237:40633,36238:20811,36239:21051,36240:21578,36241:22269,36242:31296,36243:37239,36244:40288,36245:40658,36246:29508,36247:28425,36248:33136,36249:29969,36250:24573,36251:24794,36252:39592,36253:29403,36254:36796,36255:27492,36256:38915,36257:20170,36258:22256,36259:22372,36260:22718,36261:23130,36262:24680,36263:25031,36264:26127,36265:26118,36266:26681,36267:26801,36268:28151,36269:30165,36270:32058,36271:33390,36272:39746,36273:20123,36274:20304,36275:21449,36276:21766,36277:23919,36278:24038,36279:24046,36280:26619,36281:27801,36282:29811,36283:30722,36284:35408,36285:37782,36286:35039,36287:22352,36288:24231,36289:25387,36290:20661,36291:20652,36292:20877,36293:26368,36294:21705,36295:22622,36296:22971,36297:23472,36298:24425,36299:25165,36300:25505,36301:26685,36302:27507,36303:28168,36304:28797,36305:37319,36306:29312,36307:30741,36308:30758,36309:31085,36310:25998,36311:32048,36312:33756,36313:35009,36314:36617,36315:38555,36316:21092,36317:22312,36318:26448,36319:32618,36320:36001,36321:20916,36322:22338,36323:38442,36324:22586,36325:27018,36326:32948,36327:21682,36328:23822,36329:22524,36330:30869,36331:40442,36332:20316,36333:21066,36334:21643,36335:25662,36336:26152,36337:26388,36338:26613,36339:31364,36340:31574,36341:32034,36342:37679,36343:26716,36344:39853,36345:31545,36346:21273,36347:20874,36348:21047,36416:23519,36417:25334,36418:25774,36419:25830,36420:26413,36421:27578,36422:34217,36423:38609,36424:30352,36425:39894,36426:25420,36427:37638,36428:39851,36429:30399,36430:26194,36431:19977,36432:20632,36433:21442,36434:23665,36435:24808,36436:25746,36437:25955,36438:26719,36439:29158,36440:29642,36441:29987,36442:31639,36443:32386,36444:34453,36445:35715,36446:36059,36447:37240,36448:39184,36449:26028,36450:26283,36451:27531,36452:20181,36453:20180,36454:20282,36455:20351,36456:21050,36457:21496,36458:21490,36459:21987,36460:22235,36461:22763,36462:22987,36463:22985,36464:23039,36465:23376,36466:23629,36467:24066,36468:24107,36469:24535,36470:24605,36471:25351,36472:25903,36473:23388,36474:26031,36475:26045,36476:26088,36477:26525,36478:27490,36480:27515,36481:27663,36482:29509,36483:31049,36484:31169,36485:31992,36486:32025,36487:32043,36488:32930,36489:33026,36490:33267,36491:35222,36492:35422,36493:35433,36494:35430,36495:35468,36496:35566,36497:36039,36498:36060,36499:38604,36500:39164,36501:27503,36502:20107,36503:20284,36504:20365,36505:20816,36506:23383,36507:23546,36508:24904,36509:25345,36510:26178,36511:27425,36512:28363,36513:27835,36514:29246,36515:29885,36516:30164,36517:30913,36518:31034,36519:32780,36520:32819,36521:33258,36522:33940,36523:36766,36524:27728,36525:40575,36526:24335,36527:35672,36528:40235,36529:31482,36530:36600,36531:23437,36532:38635,36533:19971,36534:21489,36535:22519,36536:22833,36537:23241,36538:23460,36539:24713,36540:28287,36541:28422,36542:30142,36543:36074,36544:23455,36545:34048,36546:31712,36547:20594,36548:26612,36549:33437,36550:23649,36551:34122,36552:32286,36553:33294,36554:20889,36555:23556,36556:25448,36557:36198,36558:26012,36559:29038,36560:31038,36561:32023,36562:32773,36563:35613,36564:36554,36565:36974,36566:34503,36567:37034,36568:20511,36569:21242,36570:23610,36571:26451,36572:28796,36573:29237,36574:37196,36575:37320,36576:37675,36577:33509,36578:23490,36579:24369,36580:24825,36581:20027,36582:21462,36583:23432,36584:25163,36585:26417,36586:27530,36587:29417,36588:29664,36589:31278,36590:33131,36591:36259,36592:37202,36593:39318,36594:20754,36595:21463,36596:21610,36597:23551,36598:25480,36599:27193,36600:32172,36601:38656,36602:22234,36603:21454,36604:21608,36672:23447,36673:23601,36674:24030,36675:20462,36676:24833,36677:25342,36678:27954,36679:31168,36680:31179,36681:32066,36682:32333,36683:32722,36684:33261,36685:33311,36686:33936,36687:34886,36688:35186,36689:35728,36690:36468,36691:36655,36692:36913,36693:37195,36694:37228,36695:38598,36696:37276,36697:20160,36698:20303,36699:20805,36700:21313,36701:24467,36702:25102,36703:26580,36704:27713,36705:28171,36706:29539,36707:32294,36708:37325,36709:37507,36710:21460,36711:22809,36712:23487,36713:28113,36714:31069,36715:32302,36716:31899,36717:22654,36718:29087,36719:20986,36720:34899,36721:36848,36722:20426,36723:23803,36724:26149,36725:30636,36726:31459,36727:33308,36728:39423,36729:20934,36730:24490,36731:26092,36732:26991,36733:27529,36734:28147,36736:28310,36737:28516,36738:30462,36739:32020,36740:24033,36741:36981,36742:37255,36743:38918,36744:20966,36745:21021,36746:25152,36747:26257,36748:26329,36749:28186,36750:24246,36751:32210,36752:32626,36753:26360,36754:34223,36755:34295,36756:35576,36757:21161,36758:21465,36759:22899,36760:24207,36761:24464,36762:24661,36763:37604,36764:38500,36765:20663,36766:20767,36767:21213,36768:21280,36769:21319,36770:21484,36771:21736,36772:21830,36773:21809,36774:22039,36775:22888,36776:22974,36777:23100,36778:23477,36779:23558,36780:23567,36781:23569,36782:23578,36783:24196,36784:24202,36785:24288,36786:24432,36787:25215,36788:25220,36789:25307,36790:25484,36791:25463,36792:26119,36793:26124,36794:26157,36795:26230,36796:26494,36797:26786,36798:27167,36799:27189,36800:27836,36801:28040,36802:28169,36803:28248,36804:28988,36805:28966,36806:29031,36807:30151,36808:30465,36809:30813,36810:30977,36811:31077,36812:31216,36813:31456,36814:31505,36815:31911,36816:32057,36817:32918,36818:33750,36819:33931,36820:34121,36821:34909,36822:35059,36823:35359,36824:35388,36825:35412,36826:35443,36827:35937,36828:36062,36829:37284,36830:37478,36831:37758,36832:37912,36833:38556,36834:38808,36835:19978,36836:19976,36837:19998,36838:20055,36839:20887,36840:21104,36841:22478,36842:22580,36843:22732,36844:23330,36845:24120,36846:24773,36847:25854,36848:26465,36849:26454,36850:27972,36851:29366,36852:30067,36853:31331,36854:33976,36855:35698,36856:37304,36857:37664,36858:22065,36859:22516,36860:39166,36928:25325,36929:26893,36930:27542,36931:29165,36932:32340,36933:32887,36934:33394,36935:35302,36936:39135,36937:34645,36938:36785,36939:23611,36940:20280,36941:20449,36942:20405,36943:21767,36944:23072,36945:23517,36946:23529,36947:24515,36948:24910,36949:25391,36950:26032,36951:26187,36952:26862,36953:27035,36954:28024,36955:28145,36956:30003,36957:30137,36958:30495,36959:31070,36960:31206,36961:32051,36962:33251,36963:33455,36964:34218,36965:35242,36966:35386,36967:36523,36968:36763,36969:36914,36970:37341,36971:38663,36972:20154,36973:20161,36974:20995,36975:22645,36976:22764,36977:23563,36978:29978,36979:23613,36980:33102,36981:35338,36982:36805,36983:38499,36984:38765,36985:31525,36986:35535,36987:38920,36988:37218,36989:22259,36990:21416,36992:36887,36993:21561,36994:22402,36995:24101,36996:25512,36997:27700,36998:28810,36999:30561,37000:31883,37001:32736,37002:34928,37003:36930,37004:37204,37005:37648,37006:37656,37007:38543,37008:29790,37009:39620,37010:23815,37011:23913,37012:25968,37013:26530,37014:36264,37015:38619,37016:25454,37017:26441,37018:26905,37019:33733,37020:38935,37021:38592,37022:35070,37023:28548,37024:25722,37025:23544,37026:19990,37027:28716,37028:30045,37029:26159,37030:20932,37031:21046,37032:21218,37033:22995,37034:24449,37035:24615,37036:25104,37037:25919,37038:25972,37039:26143,37040:26228,37041:26866,37042:26646,37043:27491,37044:28165,37045:29298,37046:29983,37047:30427,37048:31934,37049:32854,37050:22768,37051:35069,37052:35199,37053:35488,37054:35475,37055:35531,37056:36893,37057:37266,37058:38738,37059:38745,37060:25993,37061:31246,37062:33030,37063:38587,37064:24109,37065:24796,37066:25114,37067:26021,37068:26132,37069:26512,37070:30707,37071:31309,37072:31821,37073:32318,37074:33034,37075:36012,37076:36196,37077:36321,37078:36447,37079:30889,37080:20999,37081:25305,37082:25509,37083:25666,37084:25240,37085:35373,37086:31363,37087:31680,37088:35500,37089:38634,37090:32118,37091:33292,37092:34633,37093:20185,37094:20808,37095:21315,37096:21344,37097:23459,37098:23554,37099:23574,37100:24029,37101:25126,37102:25159,37103:25776,37104:26643,37105:26676,37106:27849,37107:27973,37108:27927,37109:26579,37110:28508,37111:29006,37112:29053,37113:26059,37114:31359,37115:31661,37116:32218,37184:32330,37185:32680,37186:33146,37187:33307,37188:33337,37189:34214,37190:35438,37191:36046,37192:36341,37193:36984,37194:36983,37195:37549,37196:37521,37197:38275,37198:39854,37199:21069,37200:21892,37201:28472,37202:28982,37203:20840,37204:31109,37205:32341,37206:33203,37207:31950,37208:22092,37209:22609,37210:23720,37211:25514,37212:26366,37213:26365,37214:26970,37215:29401,37216:30095,37217:30094,37218:30990,37219:31062,37220:31199,37221:31895,37222:32032,37223:32068,37224:34311,37225:35380,37226:38459,37227:36961,37228:40736,37229:20711,37230:21109,37231:21452,37232:21474,37233:20489,37234:21930,37235:22766,37236:22863,37237:29245,37238:23435,37239:23652,37240:21277,37241:24803,37242:24819,37243:25436,37244:25475,37245:25407,37246:25531,37248:25805,37249:26089,37250:26361,37251:24035,37252:27085,37253:27133,37254:28437,37255:29157,37256:20105,37257:30185,37258:30456,37259:31379,37260:31967,37261:32207,37262:32156,37263:32865,37264:33609,37265:33624,37266:33900,37267:33980,37268:34299,37269:35013,37270:36208,37271:36865,37272:36973,37273:37783,37274:38684,37275:39442,37276:20687,37277:22679,37278:24974,37279:33235,37280:34101,37281:36104,37282:36896,37283:20419,37284:20596,37285:21063,37286:21363,37287:24687,37288:25417,37289:26463,37290:28204,37291:36275,37292:36895,37293:20439,37294:23646,37295:36042,37296:26063,37297:32154,37298:21330,37299:34966,37300:20854,37301:25539,37302:23384,37303:23403,37304:23562,37305:25613,37306:26449,37307:36956,37308:20182,37309:22810,37310:22826,37311:27760,37312:35409,37313:21822,37314:22549,37315:22949,37316:24816,37317:25171,37318:26561,37319:33333,37320:26965,37321:38464,37322:39364,37323:39464,37324:20307,37325:22534,37326:23550,37327:32784,37328:23729,37329:24111,37330:24453,37331:24608,37332:24907,37333:25140,37334:26367,37335:27888,37336:28382,37337:32974,37338:33151,37339:33492,37340:34955,37341:36024,37342:36864,37343:36910,37344:38538,37345:40667,37346:39899,37347:20195,37348:21488,37349:22823,37350:31532,37351:37261,37352:38988,37353:40441,37354:28381,37355:28711,37356:21331,37357:21828,37358:23429,37359:25176,37360:25246,37361:25299,37362:27810,37363:28655,37364:29730,37365:35351,37366:37944,37367:28609,37368:35582,37369:33592,37370:20967,37371:34552,37372:21482,37440:21481,37441:20294,37442:36948,37443:36784,37444:22890,37445:33073,37446:24061,37447:31466,37448:36799,37449:26842,37450:35895,37451:29432,37452:40008,37453:27197,37454:35504,37455:20025,37456:21336,37457:22022,37458:22374,37459:25285,37460:25506,37461:26086,37462:27470,37463:28129,37464:28251,37465:28845,37466:30701,37467:31471,37468:31658,37469:32187,37470:32829,37471:32966,37472:34507,37473:35477,37474:37723,37475:22243,37476:22727,37477:24382,37478:26029,37479:26262,37480:27264,37481:27573,37482:30007,37483:35527,37484:20516,37485:30693,37486:22320,37487:24347,37488:24677,37489:26234,37490:27744,37491:30196,37492:31258,37493:32622,37494:33268,37495:34584,37496:36933,37497:39347,37498:31689,37499:30044,37500:31481,37501:31569,37502:33988,37504:36880,37505:31209,37506:31378,37507:33590,37508:23265,37509:30528,37510:20013,37511:20210,37512:23449,37513:24544,37514:25277,37515:26172,37516:26609,37517:27880,37518:34411,37519:34935,37520:35387,37521:37198,37522:37619,37523:39376,37524:27159,37525:28710,37526:29482,37527:33511,37528:33879,37529:36015,37530:19969,37531:20806,37532:20939,37533:21899,37534:23541,37535:24086,37536:24115,37537:24193,37538:24340,37539:24373,37540:24427,37541:24500,37542:25074,37543:25361,37544:26274,37545:26397,37546:28526,37547:29266,37548:30010,37549:30522,37550:32884,37551:33081,37552:33144,37553:34678,37554:35519,37555:35548,37556:36229,37557:36339,37558:37530,37559:38263,37560:38914,37561:40165,37562:21189,37563:25431,37564:30452,37565:26389,37566:27784,37567:29645,37568:36035,37569:37806,37570:38515,37571:27941,37572:22684,37573:26894,37574:27084,37575:36861,37576:37786,37577:30171,37578:36890,37579:22618,37580:26626,37581:25524,37582:27131,37583:20291,37584:28460,37585:26584,37586:36795,37587:34086,37588:32180,37589:37716,37590:26943,37591:28528,37592:22378,37593:22775,37594:23340,37595:32044,37596:29226,37597:21514,37598:37347,37599:40372,37600:20141,37601:20302,37602:20572,37603:20597,37604:21059,37605:35998,37606:21576,37607:22564,37608:23450,37609:24093,37610:24213,37611:24237,37612:24311,37613:24351,37614:24716,37615:25269,37616:25402,37617:25552,37618:26799,37619:27712,37620:30855,37621:31118,37622:31243,37623:32224,37624:33351,37625:35330,37626:35558,37627:36420,37628:36883,37696:37048,37697:37165,37698:37336,37699:40718,37700:27877,37701:25688,37702:25826,37703:25973,37704:28404,37705:30340,37706:31515,37707:36969,37708:37841,37709:28346,37710:21746,37711:24505,37712:25764,37713:36685,37714:36845,37715:37444,37716:20856,37717:22635,37718:22825,37719:23637,37720:24215,37721:28155,37722:32399,37723:29980,37724:36028,37725:36578,37726:39003,37727:28857,37728:20253,37729:27583,37730:28593,37731:3e4,37732:38651,37733:20814,37734:21520,37735:22581,37736:22615,37737:22956,37738:23648,37739:24466,37740:26007,37741:26460,37742:28193,37743:30331,37744:33759,37745:36077,37746:36884,37747:37117,37748:37709,37749:30757,37750:30778,37751:21162,37752:24230,37753:22303,37754:22900,37755:24594,37756:20498,37757:20826,37758:20908,37760:20941,37761:20992,37762:21776,37763:22612,37764:22616,37765:22871,37766:23445,37767:23798,37768:23947,37769:24764,37770:25237,37771:25645,37772:26481,37773:26691,37774:26812,37775:26847,37776:30423,37777:28120,37778:28271,37779:28059,37780:28783,37781:29128,37782:24403,37783:30168,37784:31095,37785:31561,37786:31572,37787:31570,37788:31958,37789:32113,37790:21040,37791:33891,37792:34153,37793:34276,37794:35342,37795:35588,37796:35910,37797:36367,37798:36867,37799:36879,37800:37913,37801:38518,37802:38957,37803:39472,37804:38360,37805:20685,37806:21205,37807:21516,37808:22530,37809:23566,37810:24999,37811:25758,37812:27934,37813:30643,37814:31461,37815:33012,37816:33796,37817:36947,37818:37509,37819:23776,37820:40199,37821:21311,37822:24471,37823:24499,37824:28060,37825:29305,37826:30563,37827:31167,37828:31716,37829:27602,37830:29420,37831:35501,37832:26627,37833:27233,37834:20984,37835:31361,37836:26932,37837:23626,37838:40182,37839:33515,37840:23493,37841:37193,37842:28702,37843:22136,37844:23663,37845:24775,37846:25958,37847:27788,37848:35930,37849:36929,37850:38931,37851:21585,37852:26311,37853:37389,37854:22856,37855:37027,37856:20869,37857:20045,37858:20970,37859:34201,37860:35598,37861:28760,37862:25466,37863:37707,37864:26978,37865:39348,37866:32260,37867:30071,37868:21335,37869:26976,37870:36575,37871:38627,37872:27741,37873:20108,37874:23612,37875:24336,37876:36841,37877:21250,37878:36049,37879:32905,37880:34425,37881:24319,37882:26085,37883:20083,37884:20837,37952:22914,37953:23615,37954:38894,37955:20219,37956:22922,37957:24525,37958:35469,37959:28641,37960:31152,37961:31074,37962:23527,37963:33905,37964:29483,37965:29105,37966:24180,37967:24565,37968:25467,37969:25754,37970:29123,37971:31896,37972:20035,37973:24316,37974:20043,37975:22492,37976:22178,37977:24745,37978:28611,37979:32013,37980:33021,37981:33075,37982:33215,37983:36786,37984:35223,37985:34468,37986:24052,37987:25226,37988:25773,37989:35207,37990:26487,37991:27874,37992:27966,37993:29750,37994:30772,37995:23110,37996:32629,37997:33453,37998:39340,37999:20467,38000:24259,38001:25309,38002:25490,38003:25943,38004:26479,38005:30403,38006:29260,38007:32972,38008:32954,38009:36649,38010:37197,38011:20493,38012:22521,38013:23186,38014:26757,38016:26995,38017:29028,38018:29437,38019:36023,38020:22770,38021:36064,38022:38506,38023:36889,38024:34687,38025:31204,38026:30695,38027:33833,38028:20271,38029:21093,38030:21338,38031:25293,38032:26575,38033:27850,38034:30333,38035:31636,38036:31893,38037:33334,38038:34180,38039:36843,38040:26333,38041:28448,38042:29190,38043:32283,38044:33707,38045:39361,38046:40614,38047:20989,38048:31665,38049:30834,38050:31672,38051:32903,38052:31560,38053:27368,38054:24161,38055:32908,38056:30033,38057:30048,38058:20843,38059:37474,38060:28300,38061:30330,38062:37271,38063:39658,38064:20240,38065:32624,38066:25244,38067:31567,38068:38309,38069:40169,38070:22138,38071:22617,38072:34532,38073:38588,38074:20276,38075:21028,38076:21322,38077:21453,38078:21467,38079:24070,38080:25644,38081:26001,38082:26495,38083:27710,38084:27726,38085:29256,38086:29359,38087:29677,38088:30036,38089:32321,38090:33324,38091:34281,38092:36009,38093:31684,38094:37318,38095:29033,38096:38930,38097:39151,38098:25405,38099:26217,38100:30058,38101:30436,38102:30928,38103:34115,38104:34542,38105:21290,38106:21329,38107:21542,38108:22915,38109:24199,38110:24444,38111:24754,38112:25161,38113:25209,38114:25259,38115:26e3,38116:27604,38117:27852,38118:30130,38119:30382,38120:30865,38121:31192,38122:32203,38123:32631,38124:32933,38125:34987,38126:35513,38127:36027,38128:36991,38129:38750,38130:39131,38131:27147,38132:31800,38133:20633,38134:23614,38135:24494,38136:26503,38137:27608,38138:29749,38139:30473,38140:32654,38208:40763,38209:26570,38210:31255,38211:21305,38212:30091,38213:39661,38214:24422,38215:33181,38216:33777,38217:32920,38218:24380,38219:24517,38220:30050,38221:31558,38222:36924,38223:26727,38224:23019,38225:23195,38226:32016,38227:30334,38228:35628,38229:20469,38230:24426,38231:27161,38232:27703,38233:28418,38234:29922,38235:31080,38236:34920,38237:35413,38238:35961,38239:24287,38240:25551,38241:30149,38242:31186,38243:33495,38244:37672,38245:37618,38246:33948,38247:34541,38248:39981,38249:21697,38250:24428,38251:25996,38252:27996,38253:28693,38254:36007,38255:36051,38256:38971,38257:25935,38258:29942,38259:19981,38260:20184,38261:22496,38262:22827,38263:23142,38264:23500,38265:20904,38266:24067,38267:24220,38268:24598,38269:25206,38270:25975,38272:26023,38273:26222,38274:28014,38275:29238,38276:31526,38277:33104,38278:33178,38279:33433,38280:35676,38281:36e3,38282:36070,38283:36212,38284:38428,38285:38468,38286:20398,38287:25771,38288:27494,38289:33310,38290:33889,38291:34154,38292:37096,38293:23553,38294:26963,38295:39080,38296:33914,38297:34135,38298:20239,38299:21103,38300:24489,38301:24133,38302:26381,38303:31119,38304:33145,38305:35079,38306:35206,38307:28149,38308:24343,38309:25173,38310:27832,38311:20175,38312:29289,38313:39826,38314:20998,38315:21563,38316:22132,38317:22707,38318:24996,38319:25198,38320:28954,38321:22894,38322:31881,38323:31966,38324:32027,38325:38640,38326:25991,38327:32862,38328:19993,38329:20341,38330:20853,38331:22592,38332:24163,38333:24179,38334:24330,38335:26564,38336:20006,38337:34109,38338:38281,38339:38491,38340:31859,38341:38913,38342:20731,38343:22721,38344:30294,38345:30887,38346:21029,38347:30629,38348:34065,38349:31622,38350:20559,38351:22793,38352:29255,38353:31687,38354:32232,38355:36794,38356:36820,38357:36941,38358:20415,38359:21193,38360:23081,38361:24321,38362:38829,38363:20445,38364:33303,38365:37610,38366:22275,38367:25429,38368:27497,38369:29995,38370:35036,38371:36628,38372:31298,38373:21215,38374:22675,38375:24917,38376:25098,38377:26286,38378:27597,38379:31807,38380:33769,38381:20515,38382:20472,38383:21253,38384:21574,38385:22577,38386:22857,38387:23453,38388:23792,38389:23791,38390:23849,38391:24214,38392:25265,38393:25447,38394:25918,38395:26041,38396:26379,38464:27861,38465:27873,38466:28921,38467:30770,38468:32299,38469:32990,38470:33459,38471:33804,38472:34028,38473:34562,38474:35090,38475:35370,38476:35914,38477:37030,38478:37586,38479:39165,38480:40179,38481:40300,38482:20047,38483:20129,38484:20621,38485:21078,38486:22346,38487:22952,38488:24125,38489:24536,38490:24537,38491:25151,38492:26292,38493:26395,38494:26576,38495:26834,38496:20882,38497:32033,38498:32938,38499:33192,38500:35584,38501:35980,38502:36031,38503:37502,38504:38450,38505:21536,38506:38956,38507:21271,38508:20693,38509:21340,38510:22696,38511:25778,38512:26420,38513:29287,38514:30566,38515:31302,38516:37350,38517:21187,38518:27809,38519:27526,38520:22528,38521:24140,38522:22868,38523:26412,38524:32763,38525:20961,38526:30406,38528:25705,38529:30952,38530:39764,38531:40635,38532:22475,38533:22969,38534:26151,38535:26522,38536:27598,38537:21737,38538:27097,38539:24149,38540:33180,38541:26517,38542:39850,38543:26622,38544:40018,38545:26717,38546:20134,38547:20451,38548:21448,38549:25273,38550:26411,38551:27819,38552:36804,38553:20397,38554:32365,38555:40639,38556:19975,38557:24930,38558:28288,38559:28459,38560:34067,38561:21619,38562:26410,38563:39749,38564:24051,38565:31637,38566:23724,38567:23494,38568:34588,38569:28234,38570:34001,38571:31252,38572:33032,38573:22937,38574:31885,38575:27665,38576:30496,38577:21209,38578:22818,38579:28961,38580:29279,38581:30683,38582:38695,38583:40289,38584:26891,38585:23167,38586:23064,38587:20901,38588:21517,38589:21629,38590:26126,38591:30431,38592:36855,38593:37528,38594:40180,38595:23018,38596:29277,38597:28357,38598:20813,38599:26825,38600:32191,38601:32236,38602:38754,38603:40634,38604:25720,38605:27169,38606:33538,38607:22916,38608:23391,38609:27611,38610:29467,38611:30450,38612:32178,38613:32791,38614:33945,38615:20786,38616:26408,38617:40665,38618:30446,38619:26466,38620:21247,38621:39173,38622:23588,38623:25147,38624:31870,38625:36016,38626:21839,38627:24758,38628:32011,38629:38272,38630:21249,38631:20063,38632:20918,38633:22812,38634:29242,38635:32822,38636:37326,38637:24357,38638:30690,38639:21380,38640:24441,38641:32004,38642:34220,38643:35379,38644:36493,38645:38742,38646:26611,38647:34222,38648:37971,38649:24841,38650:24840,38651:27833,38652:30290,38720:35565,38721:36664,38722:21807,38723:20305,38724:20778,38725:21191,38726:21451,38727:23461,38728:24189,38729:24736,38730:24962,38731:25558,38732:26377,38733:26586,38734:28263,38735:28044,38736:29494,38737:29495,38738:30001,38739:31056,38740:35029,38741:35480,38742:36938,38743:37009,38744:37109,38745:38596,38746:34701,38747:22805,38748:20104,38749:20313,38750:19982,38751:35465,38752:36671,38753:38928,38754:20653,38755:24188,38756:22934,38757:23481,38758:24248,38759:25562,38760:25594,38761:25793,38762:26332,38763:26954,38764:27096,38765:27915,38766:28342,38767:29076,38768:29992,38769:31407,38770:32650,38771:32768,38772:33865,38773:33993,38774:35201,38775:35617,38776:36362,38777:36965,38778:38525,38779:39178,38780:24958,38781:25233,38782:27442,38784:27779,38785:28020,38786:32716,38787:32764,38788:28096,38789:32645,38790:34746,38791:35064,38792:26469,38793:33713,38794:38972,38795:38647,38796:27931,38797:32097,38798:33853,38799:37226,38800:20081,38801:21365,38802:23888,38803:27396,38804:28651,38805:34253,38806:34349,38807:35239,38808:21033,38809:21519,38810:23653,38811:26446,38812:26792,38813:29702,38814:29827,38815:30178,38816:35023,38817:35041,38818:37324,38819:38626,38820:38520,38821:24459,38822:29575,38823:31435,38824:33870,38825:25504,38826:30053,38827:21129,38828:27969,38829:28316,38830:29705,38831:30041,38832:30827,38833:31890,38834:38534,38835:31452,38836:40845,38837:20406,38838:24942,38839:26053,38840:34396,38841:20102,38842:20142,38843:20698,38844:20001,38845:20940,38846:23534,38847:26009,38848:26753,38849:28092,38850:29471,38851:30274,38852:30637,38853:31260,38854:31975,38855:33391,38856:35538,38857:36988,38858:37327,38859:38517,38860:38936,38861:21147,38862:32209,38863:20523,38864:21400,38865:26519,38866:28107,38867:29136,38868:29747,38869:33256,38870:36650,38871:38563,38872:40023,38873:40607,38874:29792,38875:22593,38876:28057,38877:32047,38878:39006,38879:20196,38880:20278,38881:20363,38882:20919,38883:21169,38884:23994,38885:24604,38886:29618,38887:31036,38888:33491,38889:37428,38890:38583,38891:38646,38892:38666,38893:40599,38894:40802,38895:26278,38896:27508,38897:21015,38898:21155,38899:28872,38900:35010,38901:24265,38902:24651,38903:24976,38904:28451,38905:29001,38906:31806,38907:32244,38908:32879,38976:34030,38977:36899,38978:37676,38979:21570,38980:39791,38981:27347,38982:28809,38983:36034,38984:36335,38985:38706,38986:21172,38987:23105,38988:24266,38989:24324,38990:26391,38991:27004,38992:27028,38993:28010,38994:28431,38995:29282,38996:29436,38997:31725,38998:32769,38999:32894,39000:34635,39001:37070,39002:20845,39003:40595,39004:31108,39005:32907,39006:37682,39007:35542,39008:20525,39009:21644,39010:35441,39011:27498,39012:36036,39013:33031,39014:24785,39015:26528,39016:40434,39017:20121,39018:20120,39019:39952,39020:35435,39021:34241,39022:34152,39023:26880,39024:28286,39025:30871,39026:33109,39071:24332,39072:19984,39073:19989,39074:20010,39075:20017,39076:20022,39077:20028,39078:20031,39079:20034,39080:20054,39081:20056,39082:20098,39083:20101,39084:35947,39085:20106,39086:33298,39087:24333,39088:20110,39089:20126,39090:20127,39091:20128,39092:20130,39093:20144,39094:20147,39095:20150,39096:20174,39097:20173,39098:20164,39099:20166,39100:20162,39101:20183,39102:20190,39103:20205,39104:20191,39105:20215,39106:20233,39107:20314,39108:20272,39109:20315,39110:20317,39111:20311,39112:20295,39113:20342,39114:20360,39115:20367,39116:20376,39117:20347,39118:20329,39119:20336,39120:20369,39121:20335,39122:20358,39123:20374,39124:20760,39125:20436,39126:20447,39127:20430,39128:20440,39129:20443,39130:20433,39131:20442,39132:20432,39133:20452,39134:20453,39135:20506,39136:20520,39137:20500,39138:20522,39139:20517,39140:20485,39141:20252,39142:20470,39143:20513,39144:20521,39145:20524,39146:20478,39147:20463,39148:20497,39149:20486,39150:20547,39151:20551,39152:26371,39153:20565,39154:20560,39155:20552,39156:20570,39157:20566,39158:20588,39159:20600,39160:20608,39161:20634,39162:20613,39163:20660,39164:20658,39232:20681,39233:20682,39234:20659,39235:20674,39236:20694,39237:20702,39238:20709,39239:20717,39240:20707,39241:20718,39242:20729,39243:20725,39244:20745,39245:20737,39246:20738,39247:20758,39248:20757,39249:20756,39250:20762,39251:20769,39252:20794,39253:20791,39254:20796,39255:20795,39256:20799,39257:20800,39258:20818,39259:20812,39260:20820,39261:20834,39262:31480,39263:20841,39264:20842,39265:20846,39266:20864,39267:20866,39268:22232,39269:20876,39270:20873,39271:20879,39272:20881,39273:20883,39274:20885,39275:20886,39276:20900,39277:20902,39278:20898,39279:20905,39280:20906,39281:20907,39282:20915,39283:20913,39284:20914,39285:20912,39286:20917,39287:20925,39288:20933,39289:20937,39290:20955,39291:20960,39292:34389,39293:20969,39294:20973,39296:20976,39297:20981,39298:20990,39299:20996,39300:21003,39301:21012,39302:21006,39303:21031,39304:21034,39305:21038,39306:21043,39307:21049,39308:21071,39309:21060,39310:21067,39311:21068,39312:21086,39313:21076,39314:21098,39315:21108,39316:21097,39317:21107,39318:21119,39319:21117,39320:21133,39321:21140,39322:21138,39323:21105,39324:21128,39325:21137,39326:36776,39327:36775,39328:21164,39329:21165,39330:21180,39331:21173,39332:21185,39333:21197,39334:21207,39335:21214,39336:21219,39337:21222,39338:39149,39339:21216,39340:21235,39341:21237,39342:21240,39343:21241,39344:21254,39345:21256,39346:30008,39347:21261,39348:21264,39349:21263,39350:21269,39351:21274,39352:21283,39353:21295,39354:21297,39355:21299,39356:21304,39357:21312,39358:21318,39359:21317,39360:19991,39361:21321,39362:21325,39363:20950,39364:21342,39365:21353,39366:21358,39367:22808,39368:21371,39369:21367,39370:21378,39371:21398,39372:21408,39373:21414,39374:21413,39375:21422,39376:21424,39377:21430,39378:21443,39379:31762,39380:38617,39381:21471,39382:26364,39383:29166,39384:21486,39385:21480,39386:21485,39387:21498,39388:21505,39389:21565,39390:21568,39391:21548,39392:21549,39393:21564,39394:21550,39395:21558,39396:21545,39397:21533,39398:21582,39399:21647,39400:21621,39401:21646,39402:21599,39403:21617,39404:21623,39405:21616,39406:21650,39407:21627,39408:21632,39409:21622,39410:21636,39411:21648,39412:21638,39413:21703,39414:21666,39415:21688,39416:21669,39417:21676,39418:21700,39419:21704,39420:21672,39488:21675,39489:21698,39490:21668,39491:21694,39492:21692,39493:21720,39494:21733,39495:21734,39496:21775,39497:21780,39498:21757,39499:21742,39500:21741,39501:21754,39502:21730,39503:21817,39504:21824,39505:21859,39506:21836,39507:21806,39508:21852,39509:21829,39510:21846,39511:21847,39512:21816,39513:21811,39514:21853,39515:21913,39516:21888,39517:21679,39518:21898,39519:21919,39520:21883,39521:21886,39522:21912,39523:21918,39524:21934,39525:21884,39526:21891,39527:21929,39528:21895,39529:21928,39530:21978,39531:21957,39532:21983,39533:21956,39534:21980,39535:21988,39536:21972,39537:22036,39538:22007,39539:22038,39540:22014,39541:22013,39542:22043,39543:22009,39544:22094,39545:22096,39546:29151,39547:22068,39548:22070,39549:22066,39550:22072,39552:22123,39553:22116,39554:22063,39555:22124,39556:22122,39557:22150,39558:22144,39559:22154,39560:22176,39561:22164,39562:22159,39563:22181,39564:22190,39565:22198,39566:22196,39567:22210,39568:22204,39569:22209,39570:22211,39571:22208,39572:22216,39573:22222,39574:22225,39575:22227,39576:22231,39577:22254,39578:22265,39579:22272,39580:22271,39581:22276,39582:22281,39583:22280,39584:22283,39585:22285,39586:22291,39587:22296,39588:22294,39589:21959,39590:22300,39591:22310,39592:22327,39593:22328,39594:22350,39595:22331,39596:22336,39597:22351,39598:22377,39599:22464,39600:22408,39601:22369,39602:22399,39603:22409,39604:22419,39605:22432,39606:22451,39607:22436,39608:22442,39609:22448,39610:22467,39611:22470,39612:22484,39613:22482,39614:22483,39615:22538,39616:22486,39617:22499,39618:22539,39619:22553,39620:22557,39621:22642,39622:22561,39623:22626,39624:22603,39625:22640,39626:27584,39627:22610,39628:22589,39629:22649,39630:22661,39631:22713,39632:22687,39633:22699,39634:22714,39635:22750,39636:22715,39637:22712,39638:22702,39639:22725,39640:22739,39641:22737,39642:22743,39643:22745,39644:22744,39645:22757,39646:22748,39647:22756,39648:22751,39649:22767,39650:22778,39651:22777,39652:22779,39653:22780,39654:22781,39655:22786,39656:22794,39657:22800,39658:22811,39659:26790,39660:22821,39661:22828,39662:22829,39663:22834,39664:22840,39665:22846,39666:31442,39667:22869,39668:22864,39669:22862,39670:22874,39671:22872,39672:22882,39673:22880,39674:22887,39675:22892,39676:22889,39744:22904,39745:22913,39746:22941,39747:20318,39748:20395,39749:22947,39750:22962,39751:22982,39752:23016,39753:23004,39754:22925,39755:23001,39756:23002,39757:23077,39758:23071,39759:23057,39760:23068,39761:23049,39762:23066,39763:23104,39764:23148,39765:23113,39766:23093,39767:23094,39768:23138,39769:23146,39770:23194,39771:23228,39772:23230,39773:23243,39774:23234,39775:23229,39776:23267,39777:23255,39778:23270,39779:23273,39780:23254,39781:23290,39782:23291,39783:23308,39784:23307,39785:23318,39786:23346,39787:23248,39788:23338,39789:23350,39790:23358,39791:23363,39792:23365,39793:23360,39794:23377,39795:23381,39796:23386,39797:23387,39798:23397,39799:23401,39800:23408,39801:23411,39802:23413,39803:23416,39804:25992,39805:23418,39806:23424,39808:23427,39809:23462,39810:23480,39811:23491,39812:23495,39813:23497,39814:23508,39815:23504,39816:23524,39817:23526,39818:23522,39819:23518,39820:23525,39821:23531,39822:23536,39823:23542,39824:23539,39825:23557,39826:23559,39827:23560,39828:23565,39829:23571,39830:23584,39831:23586,39832:23592,39833:23608,39834:23609,39835:23617,39836:23622,39837:23630,39838:23635,39839:23632,39840:23631,39841:23409,39842:23660,39843:23662,39844:20066,39845:23670,39846:23673,39847:23692,39848:23697,39849:23700,39850:22939,39851:23723,39852:23739,39853:23734,39854:23740,39855:23735,39856:23749,39857:23742,39858:23751,39859:23769,39860:23785,39861:23805,39862:23802,39863:23789,39864:23948,39865:23786,39866:23819,39867:23829,39868:23831,39869:23900,39870:23839,39871:23835,39872:23825,39873:23828,39874:23842,39875:23834,39876:23833,39877:23832,39878:23884,39879:23890,39880:23886,39881:23883,39882:23916,39883:23923,39884:23926,39885:23943,39886:23940,39887:23938,39888:23970,39889:23965,39890:23980,39891:23982,39892:23997,39893:23952,39894:23991,39895:23996,39896:24009,39897:24013,39898:24019,39899:24018,39900:24022,39901:24027,39902:24043,39903:24050,39904:24053,39905:24075,39906:24090,39907:24089,39908:24081,39909:24091,39910:24118,39911:24119,39912:24132,39913:24131,39914:24128,39915:24142,39916:24151,39917:24148,39918:24159,39919:24162,39920:24164,39921:24135,39922:24181,39923:24182,39924:24186,39925:40636,39926:24191,39927:24224,39928:24257,39929:24258,39930:24264,39931:24272,39932:24271,40000:24278,40001:24291,40002:24285,40003:24282,40004:24283,40005:24290,40006:24289,40007:24296,40008:24297,40009:24300,40010:24305,40011:24307,40012:24304,40013:24308,40014:24312,40015:24318,40016:24323,40017:24329,40018:24413,40019:24412,40020:24331,40021:24337,40022:24342,40023:24361,40024:24365,40025:24376,40026:24385,40027:24392,40028:24396,40029:24398,40030:24367,40031:24401,40032:24406,40033:24407,40034:24409,40035:24417,40036:24429,40037:24435,40038:24439,40039:24451,40040:24450,40041:24447,40042:24458,40043:24456,40044:24465,40045:24455,40046:24478,40047:24473,40048:24472,40049:24480,40050:24488,40051:24493,40052:24508,40053:24534,40054:24571,40055:24548,40056:24568,40057:24561,40058:24541,40059:24755,40060:24575,40061:24609,40062:24672,40064:24601,40065:24592,40066:24617,40067:24590,40068:24625,40069:24603,40070:24597,40071:24619,40072:24614,40073:24591,40074:24634,40075:24666,40076:24641,40077:24682,40078:24695,40079:24671,40080:24650,40081:24646,40082:24653,40083:24675,40084:24643,40085:24676,40086:24642,40087:24684,40088:24683,40089:24665,40090:24705,40091:24717,40092:24807,40093:24707,40094:24730,40095:24708,40096:24731,40097:24726,40098:24727,40099:24722,40100:24743,40101:24715,40102:24801,40103:24760,40104:24800,40105:24787,40106:24756,40107:24560,40108:24765,40109:24774,40110:24757,40111:24792,40112:24909,40113:24853,40114:24838,40115:24822,40116:24823,40117:24832,40118:24820,40119:24826,40120:24835,40121:24865,40122:24827,40123:24817,40124:24845,40125:24846,40126:24903,40127:24894,40128:24872,40129:24871,40130:24906,40131:24895,40132:24892,40133:24876,40134:24884,40135:24893,40136:24898,40137:24900,40138:24947,40139:24951,40140:24920,40141:24921,40142:24922,40143:24939,40144:24948,40145:24943,40146:24933,40147:24945,40148:24927,40149:24925,40150:24915,40151:24949,40152:24985,40153:24982,40154:24967,40155:25004,40156:24980,40157:24986,40158:24970,40159:24977,40160:25003,40161:25006,40162:25036,40163:25034,40164:25033,40165:25079,40166:25032,40167:25027,40168:25030,40169:25018,40170:25035,40171:32633,40172:25037,40173:25062,40174:25059,40175:25078,40176:25082,40177:25076,40178:25087,40179:25085,40180:25084,40181:25086,40182:25088,40183:25096,40184:25097,40185:25101,40186:25100,40187:25108,40188:25115,40256:25118,40257:25121,40258:25130,40259:25134,40260:25136,40261:25138,40262:25139,40263:25153,40264:25166,40265:25182,40266:25187,40267:25179,40268:25184,40269:25192,40270:25212,40271:25218,40272:25225,40273:25214,40274:25234,40275:25235,40276:25238,40277:25300,40278:25219,40279:25236,40280:25303,40281:25297,40282:25275,40283:25295,40284:25343,40285:25286,40286:25812,40287:25288,40288:25308,40289:25292,40290:25290,40291:25282,40292:25287,40293:25243,40294:25289,40295:25356,40296:25326,40297:25329,40298:25383,40299:25346,40300:25352,40301:25327,40302:25333,40303:25424,40304:25406,40305:25421,40306:25628,40307:25423,40308:25494,40309:25486,40310:25472,40311:25515,40312:25462,40313:25507,40314:25487,40315:25481,40316:25503,40317:25525,40318:25451,40320:25449,40321:25534,40322:25577,40323:25536,40324:25542,40325:25571,40326:25545,40327:25554,40328:25590,40329:25540,40330:25622,40331:25652,40332:25606,40333:25619,40334:25638,40335:25654,40336:25885,40337:25623,40338:25640,40339:25615,40340:25703,40341:25711,40342:25718,40343:25678,40344:25898,40345:25749,40346:25747,40347:25765,40348:25769,40349:25736,40350:25788,40351:25818,40352:25810,40353:25797,40354:25799,40355:25787,40356:25816,40357:25794,40358:25841,40359:25831,40360:33289,40361:25824,40362:25825,40363:25260,40364:25827,40365:25839,40366:25900,40367:25846,40368:25844,40369:25842,40370:25850,40371:25856,40372:25853,40373:25880,40374:25884,40375:25861,40376:25892,40377:25891,40378:25899,40379:25908,40380:25909,40381:25911,40382:25910,40383:25912,40384:30027,40385:25928,40386:25942,40387:25941,40388:25933,40389:25944,40390:25950,40391:25949,40392:25970,40393:25976,40394:25986,40395:25987,40396:35722,40397:26011,40398:26015,40399:26027,40400:26039,40401:26051,40402:26054,40403:26049,40404:26052,40405:26060,40406:26066,40407:26075,40408:26073,40409:26080,40410:26081,40411:26097,40412:26482,40413:26122,40414:26115,40415:26107,40416:26483,40417:26165,40418:26166,40419:26164,40420:26140,40421:26191,40422:26180,40423:26185,40424:26177,40425:26206,40426:26205,40427:26212,40428:26215,40429:26216,40430:26207,40431:26210,40432:26224,40433:26243,40434:26248,40435:26254,40436:26249,40437:26244,40438:26264,40439:26269,40440:26305,40441:26297,40442:26313,40443:26302,40444:26300,40512:26308,40513:26296,40514:26326,40515:26330,40516:26336,40517:26175,40518:26342,40519:26345,40520:26352,40521:26357,40522:26359,40523:26383,40524:26390,40525:26398,40526:26406,40527:26407,40528:38712,40529:26414,40530:26431,40531:26422,40532:26433,40533:26424,40534:26423,40535:26438,40536:26462,40537:26464,40538:26457,40539:26467,40540:26468,40541:26505,40542:26480,40543:26537,40544:26492,40545:26474,40546:26508,40547:26507,40548:26534,40549:26529,40550:26501,40551:26551,40552:26607,40553:26548,40554:26604,40555:26547,40556:26601,40557:26552,40558:26596,40559:26590,40560:26589,40561:26594,40562:26606,40563:26553,40564:26574,40565:26566,40566:26599,40567:27292,40568:26654,40569:26694,40570:26665,40571:26688,40572:26701,40573:26674,40574:26702,40576:26803,40577:26667,40578:26713,40579:26723,40580:26743,40581:26751,40582:26783,40583:26767,40584:26797,40585:26772,40586:26781,40587:26779,40588:26755,40589:27310,40590:26809,40591:26740,40592:26805,40593:26784,40594:26810,40595:26895,40596:26765,40597:26750,40598:26881,40599:26826,40600:26888,40601:26840,40602:26914,40603:26918,40604:26849,40605:26892,40606:26829,40607:26836,40608:26855,40609:26837,40610:26934,40611:26898,40612:26884,40613:26839,40614:26851,40615:26917,40616:26873,40617:26848,40618:26863,40619:26920,40620:26922,40621:26906,40622:26915,40623:26913,40624:26822,40625:27001,40626:26999,40627:26972,40628:27e3,40629:26987,40630:26964,40631:27006,40632:26990,40633:26937,40634:26996,40635:26941,40636:26969,40637:26928,40638:26977,40639:26974,40640:26973,40641:27009,40642:26986,40643:27058,40644:27054,40645:27088,40646:27071,40647:27073,40648:27091,40649:27070,40650:27086,40651:23528,40652:27082,40653:27101,40654:27067,40655:27075,40656:27047,40657:27182,40658:27025,40659:27040,40660:27036,40661:27029,40662:27060,40663:27102,40664:27112,40665:27138,40666:27163,40667:27135,40668:27402,40669:27129,40670:27122,40671:27111,40672:27141,40673:27057,40674:27166,40675:27117,40676:27156,40677:27115,40678:27146,40679:27154,40680:27329,40681:27171,40682:27155,40683:27204,40684:27148,40685:27250,40686:27190,40687:27256,40688:27207,40689:27234,40690:27225,40691:27238,40692:27208,40693:27192,40694:27170,40695:27280,40696:27277,40697:27296,40698:27268,40699:27298,40700:27299,40768:27287,40769:34327,40770:27323,40771:27331,40772:27330,40773:27320,40774:27315,40775:27308,40776:27358,40777:27345,40778:27359,40779:27306,40780:27354,40781:27370,40782:27387,40783:27397,40784:34326,40785:27386,40786:27410,40787:27414,40788:39729,40789:27423,40790:27448,40791:27447,40792:30428,40793:27449,40794:39150,40795:27463,40796:27459,40797:27465,40798:27472,40799:27481,40800:27476,40801:27483,40802:27487,40803:27489,40804:27512,40805:27513,40806:27519,40807:27520,40808:27524,40809:27523,40810:27533,40811:27544,40812:27541,40813:27550,40814:27556,40815:27562,40816:27563,40817:27567,40818:27570,40819:27569,40820:27571,40821:27575,40822:27580,40823:27590,40824:27595,40825:27603,40826:27615,40827:27628,40828:27627,40829:27635,40830:27631,40832:40638,40833:27656,40834:27667,40835:27668,40836:27675,40837:27684,40838:27683,40839:27742,40840:27733,40841:27746,40842:27754,40843:27778,40844:27789,40845:27802,40846:27777,40847:27803,40848:27774,40849:27752,40850:27763,40851:27794,40852:27792,40853:27844,40854:27889,40855:27859,40856:27837,40857:27863,40858:27845,40859:27869,40860:27822,40861:27825,40862:27838,40863:27834,40864:27867,40865:27887,40866:27865,40867:27882,40868:27935,40869:34893,40870:27958,40871:27947,40872:27965,40873:27960,40874:27929,40875:27957,40876:27955,40877:27922,40878:27916,40879:28003,40880:28051,40881:28004,40882:27994,40883:28025,40884:27993,40885:28046,40886:28053,40887:28644,40888:28037,40889:28153,40890:28181,40891:28170,40892:28085,40893:28103,40894:28134,40895:28088,40896:28102,40897:28140,40898:28126,40899:28108,40900:28136,40901:28114,40902:28101,40903:28154,40904:28121,40905:28132,40906:28117,40907:28138,40908:28142,40909:28205,40910:28270,40911:28206,40912:28185,40913:28274,40914:28255,40915:28222,40916:28195,40917:28267,40918:28203,40919:28278,40920:28237,40921:28191,40922:28227,40923:28218,40924:28238,40925:28196,40926:28415,40927:28189,40928:28216,40929:28290,40930:28330,40931:28312,40932:28361,40933:28343,40934:28371,40935:28349,40936:28335,40937:28356,40938:28338,40939:28372,40940:28373,40941:28303,40942:28325,40943:28354,40944:28319,40945:28481,40946:28433,40947:28748,40948:28396,40949:28408,40950:28414,40951:28479,40952:28402,40953:28465,40954:28399,40955:28466,40956:28364,57408:28478,57409:28435,57410:28407,57411:28550,57412:28538,57413:28536,57414:28545,57415:28544,57416:28527,57417:28507,57418:28659,57419:28525,57420:28546,57421:28540,57422:28504,57423:28558,57424:28561,57425:28610,57426:28518,57427:28595,57428:28579,57429:28577,57430:28580,57431:28601,57432:28614,57433:28586,57434:28639,57435:28629,57436:28652,57437:28628,57438:28632,57439:28657,57440:28654,57441:28635,57442:28681,57443:28683,57444:28666,57445:28689,57446:28673,57447:28687,57448:28670,57449:28699,57450:28698,57451:28532,57452:28701,57453:28696,57454:28703,57455:28720,57456:28734,57457:28722,57458:28753,57459:28771,57460:28825,57461:28818,57462:28847,57463:28913,57464:28844,57465:28856,57466:28851,57467:28846,57468:28895,57469:28875,57470:28893,57472:28889,57473:28937,57474:28925,57475:28956,57476:28953,57477:29029,57478:29013,57479:29064,57480:29030,57481:29026,57482:29004,57483:29014,57484:29036,57485:29071,57486:29179,57487:29060,57488:29077,57489:29096,57490:29100,57491:29143,57492:29113,57493:29118,57494:29138,57495:29129,57496:29140,57497:29134,57498:29152,57499:29164,57500:29159,57501:29173,57502:29180,57503:29177,57504:29183,57505:29197,57506:29200,57507:29211,57508:29224,57509:29229,57510:29228,57511:29232,57512:29234,57513:29243,57514:29244,57515:29247,57516:29248,57517:29254,57518:29259,57519:29272,57520:29300,57521:29310,57522:29314,57523:29313,57524:29319,57525:29330,57526:29334,57527:29346,57528:29351,57529:29369,57530:29362,57531:29379,57532:29382,57533:29380,57534:29390,57535:29394,57536:29410,57537:29408,57538:29409,57539:29433,57540:29431,57541:20495,57542:29463,57543:29450,57544:29468,57545:29462,57546:29469,57547:29492,57548:29487,57549:29481,57550:29477,57551:29502,57552:29518,57553:29519,57554:40664,57555:29527,57556:29546,57557:29544,57558:29552,57559:29560,57560:29557,57561:29563,57562:29562,57563:29640,57564:29619,57565:29646,57566:29627,57567:29632,57568:29669,57569:29678,57570:29662,57571:29858,57572:29701,57573:29807,57574:29733,57575:29688,57576:29746,57577:29754,57578:29781,57579:29759,57580:29791,57581:29785,57582:29761,57583:29788,57584:29801,57585:29808,57586:29795,57587:29802,57588:29814,57589:29822,57590:29835,57591:29854,57592:29863,57593:29898,57594:29903,57595:29908,57596:29681,57664:29920,57665:29923,57666:29927,57667:29929,57668:29934,57669:29938,57670:29936,57671:29937,57672:29944,57673:29943,57674:29956,57675:29955,57676:29957,57677:29964,57678:29966,57679:29965,57680:29973,57681:29971,57682:29982,57683:29990,57684:29996,57685:30012,57686:30020,57687:30029,57688:30026,57689:30025,57690:30043,57691:30022,57692:30042,57693:30057,57694:30052,57695:30055,57696:30059,57697:30061,57698:30072,57699:30070,57700:30086,57701:30087,57702:30068,57703:30090,57704:30089,57705:30082,57706:30100,57707:30106,57708:30109,57709:30117,57710:30115,57711:30146,57712:30131,57713:30147,57714:30133,57715:30141,57716:30136,57717:30140,57718:30129,57719:30157,57720:30154,57721:30162,57722:30169,57723:30179,57724:30174,57725:30206,57726:30207,57728:30204,57729:30209,57730:30192,57731:30202,57732:30194,57733:30195,57734:30219,57735:30221,57736:30217,57737:30239,57738:30247,57739:30240,57740:30241,57741:30242,57742:30244,57743:30260,57744:30256,57745:30267,57746:30279,57747:30280,57748:30278,57749:30300,57750:30296,57751:30305,57752:30306,57753:30312,57754:30313,57755:30314,57756:30311,57757:30316,57758:30320,57759:30322,57760:30326,57761:30328,57762:30332,57763:30336,57764:30339,57765:30344,57766:30347,57767:30350,57768:30358,57769:30355,57770:30361,57771:30362,57772:30384,57773:30388,57774:30392,57775:30393,57776:30394,57777:30402,57778:30413,57779:30422,57780:30418,57781:30430,57782:30433,57783:30437,57784:30439,57785:30442,57786:34351,57787:30459,57788:30472,57789:30471,57790:30468,57791:30505,57792:30500,57793:30494,57794:30501,57795:30502,57796:30491,57797:30519,57798:30520,57799:30535,57800:30554,57801:30568,57802:30571,57803:30555,57804:30565,57805:30591,57806:30590,57807:30585,57808:30606,57809:30603,57810:30609,57811:30624,57812:30622,57813:30640,57814:30646,57815:30649,57816:30655,57817:30652,57818:30653,57819:30651,57820:30663,57821:30669,57822:30679,57823:30682,57824:30684,57825:30691,57826:30702,57827:30716,57828:30732,57829:30738,57830:31014,57831:30752,57832:31018,57833:30789,57834:30862,57835:30836,57836:30854,57837:30844,57838:30874,57839:30860,57840:30883,57841:30901,57842:30890,57843:30895,57844:30929,57845:30918,57846:30923,57847:30932,57848:30910,57849:30908,57850:30917,57851:30922,57852:30956,57920:30951,57921:30938,57922:30973,57923:30964,57924:30983,57925:30994,57926:30993,57927:31001,57928:31020,57929:31019,57930:31040,57931:31072,57932:31063,57933:31071,57934:31066,57935:31061,57936:31059,57937:31098,57938:31103,57939:31114,57940:31133,57941:31143,57942:40779,57943:31146,57944:31150,57945:31155,57946:31161,57947:31162,57948:31177,57949:31189,57950:31207,57951:31212,57952:31201,57953:31203,57954:31240,57955:31245,57956:31256,57957:31257,57958:31264,57959:31263,57960:31104,57961:31281,57962:31291,57963:31294,57964:31287,57965:31299,57966:31319,57967:31305,57968:31329,57969:31330,57970:31337,57971:40861,57972:31344,57973:31353,57974:31357,57975:31368,57976:31383,57977:31381,57978:31384,57979:31382,57980:31401,57981:31432,57982:31408,57984:31414,57985:31429,57986:31428,57987:31423,57988:36995,57989:31431,57990:31434,57991:31437,57992:31439,57993:31445,57994:31443,57995:31449,57996:31450,57997:31453,57998:31457,57999:31458,58000:31462,58001:31469,58002:31472,58003:31490,58004:31503,58005:31498,58006:31494,58007:31539,58008:31512,58009:31513,58010:31518,58011:31541,58012:31528,58013:31542,58014:31568,58015:31610,58016:31492,58017:31565,58018:31499,58019:31564,58020:31557,58021:31605,58022:31589,58023:31604,58024:31591,58025:31600,58026:31601,58027:31596,58028:31598,58029:31645,58030:31640,58031:31647,58032:31629,58033:31644,58034:31642,58035:31627,58036:31634,58037:31631,58038:31581,58039:31641,58040:31691,58041:31681,58042:31692,58043:31695,58044:31668,58045:31686,58046:31709,58047:31721,58048:31761,58049:31764,58050:31718,58051:31717,58052:31840,58053:31744,58054:31751,58055:31763,58056:31731,58057:31735,58058:31767,58059:31757,58060:31734,58061:31779,58062:31783,58063:31786,58064:31775,58065:31799,58066:31787,58067:31805,58068:31820,58069:31811,58070:31828,58071:31823,58072:31808,58073:31824,58074:31832,58075:31839,58076:31844,58077:31830,58078:31845,58079:31852,58080:31861,58081:31875,58082:31888,58083:31908,58084:31917,58085:31906,58086:31915,58087:31905,58088:31912,58089:31923,58090:31922,58091:31921,58092:31918,58093:31929,58094:31933,58095:31936,58096:31941,58097:31938,58098:31960,58099:31954,58100:31964,58101:31970,58102:39739,58103:31983,58104:31986,58105:31988,58106:31990,58107:31994,58108:32006,58176:32002,58177:32028,58178:32021,58179:32010,58180:32069,58181:32075,58182:32046,58183:32050,58184:32063,58185:32053,58186:32070,58187:32115,58188:32086,58189:32078,58190:32114,58191:32104,58192:32110,58193:32079,58194:32099,58195:32147,58196:32137,58197:32091,58198:32143,58199:32125,58200:32155,58201:32186,58202:32174,58203:32163,58204:32181,58205:32199,58206:32189,58207:32171,58208:32317,58209:32162,58210:32175,58211:32220,58212:32184,58213:32159,58214:32176,58215:32216,58216:32221,58217:32228,58218:32222,58219:32251,58220:32242,58221:32225,58222:32261,58223:32266,58224:32291,58225:32289,58226:32274,58227:32305,58228:32287,58229:32265,58230:32267,58231:32290,58232:32326,58233:32358,58234:32315,58235:32309,58236:32313,58237:32323,58238:32311,58240:32306,58241:32314,58242:32359,58243:32349,58244:32342,58245:32350,58246:32345,58247:32346,58248:32377,58249:32362,58250:32361,58251:32380,58252:32379,58253:32387,58254:32213,58255:32381,58256:36782,58257:32383,58258:32392,58259:32393,58260:32396,58261:32402,58262:32400,58263:32403,58264:32404,58265:32406,58266:32398,58267:32411,58268:32412,58269:32568,58270:32570,58271:32581,58272:32588,58273:32589,58274:32590,58275:32592,58276:32593,58277:32597,58278:32596,58279:32600,58280:32607,58281:32608,58282:32616,58283:32617,58284:32615,58285:32632,58286:32642,58287:32646,58288:32643,58289:32648,58290:32647,58291:32652,58292:32660,58293:32670,58294:32669,58295:32666,58296:32675,58297:32687,58298:32690,58299:32697,58300:32686,58301:32694,58302:32696,58303:35697,58304:32709,58305:32710,58306:32714,58307:32725,58308:32724,58309:32737,58310:32742,58311:32745,58312:32755,58313:32761,58314:39132,58315:32774,58316:32772,58317:32779,58318:32786,58319:32792,58320:32793,58321:32796,58322:32801,58323:32808,58324:32831,58325:32827,58326:32842,58327:32838,58328:32850,58329:32856,58330:32858,58331:32863,58332:32866,58333:32872,58334:32883,58335:32882,58336:32880,58337:32886,58338:32889,58339:32893,58340:32895,58341:32900,58342:32902,58343:32901,58344:32923,58345:32915,58346:32922,58347:32941,58348:20880,58349:32940,58350:32987,58351:32997,58352:32985,58353:32989,58354:32964,58355:32986,58356:32982,58357:33033,58358:33007,58359:33009,58360:33051,58361:33065,58362:33059,58363:33071,58364:33099,58432:38539,58433:33094,58434:33086,58435:33107,58436:33105,58437:33020,58438:33137,58439:33134,58440:33125,58441:33126,58442:33140,58443:33155,58444:33160,58445:33162,58446:33152,58447:33154,58448:33184,58449:33173,58450:33188,58451:33187,58452:33119,58453:33171,58454:33193,58455:33200,58456:33205,58457:33214,58458:33208,58459:33213,58460:33216,58461:33218,58462:33210,58463:33225,58464:33229,58465:33233,58466:33241,58467:33240,58468:33224,58469:33242,58470:33247,58471:33248,58472:33255,58473:33274,58474:33275,58475:33278,58476:33281,58477:33282,58478:33285,58479:33287,58480:33290,58481:33293,58482:33296,58483:33302,58484:33321,58485:33323,58486:33336,58487:33331,58488:33344,58489:33369,58490:33368,58491:33373,58492:33370,58493:33375,58494:33380,58496:33378,58497:33384,58498:33386,58499:33387,58500:33326,58501:33393,58502:33399,58503:33400,58504:33406,58505:33421,58506:33426,58507:33451,58508:33439,58509:33467,58510:33452,58511:33505,58512:33507,58513:33503,58514:33490,58515:33524,58516:33523,58517:33530,58518:33683,58519:33539,58520:33531,58521:33529,58522:33502,58523:33542,58524:33500,58525:33545,58526:33497,58527:33589,58528:33588,58529:33558,58530:33586,58531:33585,58532:33600,58533:33593,58534:33616,58535:33605,58536:33583,58537:33579,58538:33559,58539:33560,58540:33669,58541:33690,58542:33706,58543:33695,58544:33698,58545:33686,58546:33571,58547:33678,58548:33671,58549:33674,58550:33660,58551:33717,58552:33651,58553:33653,58554:33696,58555:33673,58556:33704,58557:33780,58558:33811,58559:33771,58560:33742,58561:33789,58562:33795,58563:33752,58564:33803,58565:33729,58566:33783,58567:33799,58568:33760,58569:33778,58570:33805,58571:33826,58572:33824,58573:33725,58574:33848,58575:34054,58576:33787,58577:33901,58578:33834,58579:33852,58580:34138,58581:33924,58582:33911,58583:33899,58584:33965,58585:33902,58586:33922,58587:33897,58588:33862,58589:33836,58590:33903,58591:33913,58592:33845,58593:33994,58594:33890,58595:33977,58596:33983,58597:33951,58598:34009,58599:33997,58600:33979,58601:34010,58602:34e3,58603:33985,58604:33990,58605:34006,58606:33953,58607:34081,58608:34047,58609:34036,58610:34071,58611:34072,58612:34092,58613:34079,58614:34069,58615:34068,58616:34044,58617:34112,58618:34147,58619:34136,58620:34120,58688:34113,58689:34306,58690:34123,58691:34133,58692:34176,58693:34212,58694:34184,58695:34193,58696:34186,58697:34216,58698:34157,58699:34196,58700:34203,58701:34282,58702:34183,58703:34204,58704:34167,58705:34174,58706:34192,58707:34249,58708:34234,58709:34255,58710:34233,58711:34256,58712:34261,58713:34269,58714:34277,58715:34268,58716:34297,58717:34314,58718:34323,58719:34315,58720:34302,58721:34298,58722:34310,58723:34338,58724:34330,58725:34352,58726:34367,58727:34381,58728:20053,58729:34388,58730:34399,58731:34407,58732:34417,58733:34451,58734:34467,58735:34473,58736:34474,58737:34443,58738:34444,58739:34486,58740:34479,58741:34500,58742:34502,58743:34480,58744:34505,58745:34851,58746:34475,58747:34516,58748:34526,58749:34537,58750:34540,58752:34527,58753:34523,58754:34543,58755:34578,58756:34566,58757:34568,58758:34560,58759:34563,58760:34555,58761:34577,58762:34569,58763:34573,58764:34553,58765:34570,58766:34612,58767:34623,58768:34615,58769:34619,58770:34597,58771:34601,58772:34586,58773:34656,58774:34655,58775:34680,58776:34636,58777:34638,58778:34676,58779:34647,58780:34664,58781:34670,58782:34649,58783:34643,58784:34659,58785:34666,58786:34821,58787:34722,58788:34719,58789:34690,58790:34735,58791:34763,58792:34749,58793:34752,58794:34768,58795:38614,58796:34731,58797:34756,58798:34739,58799:34759,58800:34758,58801:34747,58802:34799,58803:34802,58804:34784,58805:34831,58806:34829,58807:34814,58808:34806,58809:34807,58810:34830,58811:34770,58812:34833,58813:34838,58814:34837,58815:34850,58816:34849,58817:34865,58818:34870,58819:34873,58820:34855,58821:34875,58822:34884,58823:34882,58824:34898,58825:34905,58826:34910,58827:34914,58828:34923,58829:34945,58830:34942,58831:34974,58832:34933,58833:34941,58834:34997,58835:34930,58836:34946,58837:34967,58838:34962,58839:34990,58840:34969,58841:34978,58842:34957,58843:34980,58844:34992,58845:35007,58846:34993,58847:35011,58848:35012,58849:35028,58850:35032,58851:35033,58852:35037,58853:35065,58854:35074,58855:35068,58856:35060,58857:35048,58858:35058,58859:35076,58860:35084,58861:35082,58862:35091,58863:35139,58864:35102,58865:35109,58866:35114,58867:35115,58868:35137,58869:35140,58870:35131,58871:35126,58872:35128,58873:35148,58874:35101,58875:35168,58876:35166,58944:35174,58945:35172,58946:35181,58947:35178,58948:35183,58949:35188,58950:35191,58951:35198,58952:35203,58953:35208,58954:35210,58955:35219,58956:35224,58957:35233,58958:35241,58959:35238,58960:35244,58961:35247,58962:35250,58963:35258,58964:35261,58965:35263,58966:35264,58967:35290,58968:35292,58969:35293,58970:35303,58971:35316,58972:35320,58973:35331,58974:35350,58975:35344,58976:35340,58977:35355,58978:35357,58979:35365,58980:35382,58981:35393,58982:35419,58983:35410,58984:35398,58985:35400,58986:35452,58987:35437,58988:35436,58989:35426,58990:35461,58991:35458,58992:35460,58993:35496,58994:35489,58995:35473,58996:35493,58997:35494,58998:35482,58999:35491,59000:35524,59001:35533,59002:35522,59003:35546,59004:35563,59005:35571,59006:35559,59008:35556,59009:35569,59010:35604,59011:35552,59012:35554,59013:35575,59014:35550,59015:35547,59016:35596,59017:35591,59018:35610,59019:35553,59020:35606,59021:35600,59022:35607,59023:35616,59024:35635,59025:38827,59026:35622,59027:35627,59028:35646,59029:35624,59030:35649,59031:35660,59032:35663,59033:35662,59034:35657,59035:35670,59036:35675,59037:35674,59038:35691,59039:35679,59040:35692,59041:35695,59042:35700,59043:35709,59044:35712,59045:35724,59046:35726,59047:35730,59048:35731,59049:35734,59050:35737,59051:35738,59052:35898,59053:35905,59054:35903,59055:35912,59056:35916,59057:35918,59058:35920,59059:35925,59060:35938,59061:35948,59062:35960,59063:35962,59064:35970,59065:35977,59066:35973,59067:35978,59068:35981,59069:35982,59070:35988,59071:35964,59072:35992,59073:25117,59074:36013,59075:36010,59076:36029,59077:36018,59078:36019,59079:36014,59080:36022,59081:36040,59082:36033,59083:36068,59084:36067,59085:36058,59086:36093,59087:36090,59088:36091,59089:36100,59090:36101,59091:36106,59092:36103,59093:36111,59094:36109,59095:36112,59096:40782,59097:36115,59098:36045,59099:36116,59100:36118,59101:36199,59102:36205,59103:36209,59104:36211,59105:36225,59106:36249,59107:36290,59108:36286,59109:36282,59110:36303,59111:36314,59112:36310,59113:36300,59114:36315,59115:36299,59116:36330,59117:36331,59118:36319,59119:36323,59120:36348,59121:36360,59122:36361,59123:36351,59124:36381,59125:36382,59126:36368,59127:36383,59128:36418,59129:36405,59130:36400,59131:36404,59132:36426,59200:36423,59201:36425,59202:36428,59203:36432,59204:36424,59205:36441,59206:36452,59207:36448,59208:36394,59209:36451,59210:36437,59211:36470,59212:36466,59213:36476,59214:36481,59215:36487,59216:36485,59217:36484,59218:36491,59219:36490,59220:36499,59221:36497,59222:36500,59223:36505,59224:36522,59225:36513,59226:36524,59227:36528,59228:36550,59229:36529,59230:36542,59231:36549,59232:36552,59233:36555,59234:36571,59235:36579,59236:36604,59237:36603,59238:36587,59239:36606,59240:36618,59241:36613,59242:36629,59243:36626,59244:36633,59245:36627,59246:36636,59247:36639,59248:36635,59249:36620,59250:36646,59251:36659,59252:36667,59253:36665,59254:36677,59255:36674,59256:36670,59257:36684,59258:36681,59259:36678,59260:36686,59261:36695,59262:36700,59264:36706,59265:36707,59266:36708,59267:36764,59268:36767,59269:36771,59270:36781,59271:36783,59272:36791,59273:36826,59274:36837,59275:36834,59276:36842,59277:36847,59278:36999,59279:36852,59280:36869,59281:36857,59282:36858,59283:36881,59284:36885,59285:36897,59286:36877,59287:36894,59288:36886,59289:36875,59290:36903,59291:36918,59292:36917,59293:36921,59294:36856,59295:36943,59296:36944,59297:36945,59298:36946,59299:36878,59300:36937,59301:36926,59302:36950,59303:36952,59304:36958,59305:36968,59306:36975,59307:36982,59308:38568,59309:36978,59310:36994,59311:36989,59312:36993,59313:36992,59314:37002,59315:37001,59316:37007,59317:37032,59318:37039,59319:37041,59320:37045,59321:37090,59322:37092,59323:25160,59324:37083,59325:37122,59326:37138,59327:37145,59328:37170,59329:37168,59330:37194,59331:37206,59332:37208,59333:37219,59334:37221,59335:37225,59336:37235,59337:37234,59338:37259,59339:37257,59340:37250,59341:37282,59342:37291,59343:37295,59344:37290,59345:37301,59346:37300,59347:37306,59348:37312,59349:37313,59350:37321,59351:37323,59352:37328,59353:37334,59354:37343,59355:37345,59356:37339,59357:37372,59358:37365,59359:37366,59360:37406,59361:37375,59362:37396,59363:37420,59364:37397,59365:37393,59366:37470,59367:37463,59368:37445,59369:37449,59370:37476,59371:37448,59372:37525,59373:37439,59374:37451,59375:37456,59376:37532,59377:37526,59378:37523,59379:37531,59380:37466,59381:37583,59382:37561,59383:37559,59384:37609,59385:37647,59386:37626,59387:37700,59388:37678,59456:37657,59457:37666,59458:37658,59459:37667,59460:37690,59461:37685,59462:37691,59463:37724,59464:37728,59465:37756,59466:37742,59467:37718,59468:37808,59469:37804,59470:37805,59471:37780,59472:37817,59473:37846,59474:37847,59475:37864,59476:37861,59477:37848,59478:37827,59479:37853,59480:37840,59481:37832,59482:37860,59483:37914,59484:37908,59485:37907,59486:37891,59487:37895,59488:37904,59489:37942,59490:37931,59491:37941,59492:37921,59493:37946,59494:37953,59495:37970,59496:37956,59497:37979,59498:37984,59499:37986,59500:37982,59501:37994,59502:37417,59503:38e3,59504:38005,59505:38007,59506:38013,59507:37978,59508:38012,59509:38014,59510:38017,59511:38015,59512:38274,59513:38279,59514:38282,59515:38292,59516:38294,59517:38296,59518:38297,59520:38304,59521:38312,59522:38311,59523:38317,59524:38332,59525:38331,59526:38329,59527:38334,59528:38346,59529:28662,59530:38339,59531:38349,59532:38348,59533:38357,59534:38356,59535:38358,59536:38364,59537:38369,59538:38373,59539:38370,59540:38433,59541:38440,59542:38446,59543:38447,59544:38466,59545:38476,59546:38479,59547:38475,59548:38519,59549:38492,59550:38494,59551:38493,59552:38495,59553:38502,59554:38514,59555:38508,59556:38541,59557:38552,59558:38549,59559:38551,59560:38570,59561:38567,59562:38577,59563:38578,59564:38576,59565:38580,59566:38582,59567:38584,59568:38585,59569:38606,59570:38603,59571:38601,59572:38605,59573:35149,59574:38620,59575:38669,59576:38613,59577:38649,59578:38660,59579:38662,59580:38664,59581:38675,59582:38670,59583:38673,59584:38671,59585:38678,59586:38681,59587:38692,59588:38698,59589:38704,59590:38713,59591:38717,59592:38718,59593:38724,59594:38726,59595:38728,59596:38722,59597:38729,59598:38748,59599:38752,59600:38756,59601:38758,59602:38760,59603:21202,59604:38763,59605:38769,59606:38777,59607:38789,59608:38780,59609:38785,59610:38778,59611:38790,59612:38795,59613:38799,59614:38800,59615:38812,59616:38824,59617:38822,59618:38819,59619:38835,59620:38836,59621:38851,59622:38854,59623:38856,59624:38859,59625:38876,59626:38893,59627:40783,59628:38898,59629:31455,59630:38902,59631:38901,59632:38927,59633:38924,59634:38968,59635:38948,59636:38945,59637:38967,59638:38973,59639:38982,59640:38991,59641:38987,59642:39019,59643:39023,59644:39024,59712:39025,59713:39028,59714:39027,59715:39082,59716:39087,59717:39089,59718:39094,59719:39108,59720:39107,59721:39110,59722:39145,59723:39147,59724:39171,59725:39177,59726:39186,59727:39188,59728:39192,59729:39201,59730:39197,59731:39198,59732:39204,59733:39200,59734:39212,59735:39214,59736:39229,59737:39230,59738:39234,59739:39241,59740:39237,59741:39248,59742:39243,59743:39249,59744:39250,59745:39244,59746:39253,59747:39319,59748:39320,59749:39333,59750:39341,59751:39342,59752:39356,59753:39391,59754:39387,59755:39389,59756:39384,59757:39377,59758:39405,59759:39406,59760:39409,59761:39410,59762:39419,59763:39416,59764:39425,59765:39439,59766:39429,59767:39394,59768:39449,59769:39467,59770:39479,59771:39493,59772:39490,59773:39488,59774:39491,59776:39486,59777:39509,59778:39501,59779:39515,59780:39511,59781:39519,59782:39522,59783:39525,59784:39524,59785:39529,59786:39531,59787:39530,59788:39597,59789:39600,59790:39612,59791:39616,59792:39631,59793:39633,59794:39635,59795:39636,59796:39646,59797:39647,59798:39650,59799:39651,59800:39654,59801:39663,59802:39659,59803:39662,59804:39668,59805:39665,59806:39671,59807:39675,59808:39686,59809:39704,59810:39706,59811:39711,59812:39714,59813:39715,59814:39717,59815:39719,59816:39720,59817:39721,59818:39722,59819:39726,59820:39727,59821:39730,59822:39748,59823:39747,59824:39759,59825:39757,59826:39758,59827:39761,59828:39768,59829:39796,59830:39827,59831:39811,59832:39825,59833:39830,59834:39831,59835:39839,59836:39840,59837:39848,59838:39860,59839:39872,59840:39882,59841:39865,59842:39878,59843:39887,59844:39889,59845:39890,59846:39907,59847:39906,59848:39908,59849:39892,59850:39905,59851:39994,59852:39922,59853:39921,59854:39920,59855:39957,59856:39956,59857:39945,59858:39955,59859:39948,59860:39942,59861:39944,59862:39954,59863:39946,59864:39940,59865:39982,59866:39963,59867:39973,59868:39972,59869:39969,59870:39984,59871:40007,59872:39986,59873:40006,59874:39998,59875:40026,59876:40032,59877:40039,59878:40054,59879:40056,59880:40167,59881:40172,59882:40176,59883:40201,59884:40200,59885:40171,59886:40195,59887:40198,59888:40234,59889:40230,59890:40367,59891:40227,59892:40223,59893:40260,59894:40213,59895:40210,59896:40257,59897:40255,59898:40254,59899:40262,59900:40264,59968:40285,59969:40286,59970:40292,59971:40273,59972:40272,59973:40281,59974:40306,59975:40329,59976:40327,59977:40363,59978:40303,59979:40314,59980:40346,59981:40356,59982:40361,59983:40370,59984:40388,59985:40385,59986:40379,59987:40376,59988:40378,59989:40390,59990:40399,59991:40386,59992:40409,59993:40403,59994:40440,59995:40422,59996:40429,59997:40431,59998:40445,59999:40474,60000:40475,60001:40478,60002:40565,60003:40569,60004:40573,60005:40577,60006:40584,60007:40587,60008:40588,60009:40594,60010:40597,60011:40593,60012:40605,60013:40613,60014:40617,60015:40632,60016:40618,60017:40621,60018:38753,60019:40652,60020:40654,60021:40655,60022:40656,60023:40660,60024:40668,60025:40670,60026:40669,60027:40672,60028:40677,60029:40680,60030:40687,60032:40692,60033:40694,60034:40695,60035:40697,60036:40699,60037:40700,60038:40701,60039:40711,60040:40712,60041:30391,60042:40725,60043:40737,60044:40748,60045:40766,60046:40778,60047:40786,60048:40788,60049:40803,60050:40799,60051:40800,60052:40801,60053:40806,60054:40807,60055:40812,60056:40810,60057:40823,60058:40818,60059:40822,60060:40853,60061:40860,60062:40864,60063:22575,60064:27079,60065:36953,60066:29796,60067:20956,60068:29081,60736:32394,60737:35100,60738:37704,60739:37512,60740:34012,60741:20425,60742:28859,60743:26161,60744:26824,60745:37625,60746:26363,60747:24389,60748:20008,60749:20193,60750:20220,60751:20224,60752:20227,60753:20281,60754:20310,60755:20370,60756:20362,60757:20378,60758:20372,60759:20429,60760:20544,60761:20514,60762:20479,60763:20510,60764:20550,60765:20592,60766:20546,60767:20628,60768:20724,60769:20696,60770:20810,60771:20836,60772:20893,60773:20926,60774:20972,60775:21013,60776:21148,60777:21158,60778:21184,60779:21211,60780:21248,60781:21255,60782:21284,60783:21362,60784:21395,60785:21426,60786:21469,60787:64014,60788:21660,60789:21642,60790:21673,60791:21759,60792:21894,60793:22361,60794:22373,60795:22444,60796:22472,60797:22471,60798:64015,60800:64016,60801:22686,60802:22706,60803:22795,60804:22867,60805:22875,60806:22877,60807:22883,60808:22948,60809:22970,60810:23382,60811:23488,60812:29999,60813:23512,60814:23532,60815:23582,60816:23718,60817:23738,60818:23797,60819:23847,60820:23891,60821:64017,60822:23874,60823:23917,60824:23992,60825:23993,60826:24016,60827:24353,60828:24372,60829:24423,60830:24503,60831:24542,60832:24669,60833:24709,60834:24714,60835:24798,60836:24789,60837:24864,60838:24818,60839:24849,60840:24887,60841:24880,60842:24984,60843:25107,60844:25254,60845:25589,60846:25696,60847:25757,60848:25806,60849:25934,60850:26112,60851:26133,60852:26171,60853:26121,60854:26158,60855:26142,60856:26148,60857:26213,60858:26199,60859:26201,60860:64018,60861:26227,60862:26265,60863:26272,60864:26290,60865:26303,60866:26362,60867:26382,60868:63785,60869:26470,60870:26555,60871:26706,60872:26560,60873:26625,60874:26692,60875:26831,60876:64019,60877:26984,60878:64020,60879:27032,60880:27106,60881:27184,60882:27243,60883:27206,60884:27251,60885:27262,60886:27362,60887:27364,60888:27606,60889:27711,60890:27740,60891:27782,60892:27759,60893:27866,60894:27908,60895:28039,60896:28015,60897:28054,60898:28076,60899:28111,60900:28152,60901:28146,60902:28156,60903:28217,60904:28252,60905:28199,60906:28220,60907:28351,60908:28552,60909:28597,60910:28661,60911:28677,60912:28679,60913:28712,60914:28805,60915:28843,60916:28943,60917:28932,60918:29020,60919:28998,60920:28999,60921:64021,60922:29121,60923:29182,60924:29361,60992:29374,60993:29476,60994:64022,60995:29559,60996:29629,60997:29641,60998:29654,60999:29667,61000:29650,61001:29703,61002:29685,61003:29734,61004:29738,61005:29737,61006:29742,61007:29794,61008:29833,61009:29855,61010:29953,61011:30063,61012:30338,61013:30364,61014:30366,61015:30363,61016:30374,61017:64023,61018:30534,61019:21167,61020:30753,61021:30798,61022:30820,61023:30842,61024:31024,61025:64024,61026:64025,61027:64026,61028:31124,61029:64027,61030:31131,61031:31441,61032:31463,61033:64028,61034:31467,61035:31646,61036:64029,61037:32072,61038:32092,61039:32183,61040:32160,61041:32214,61042:32338,61043:32583,61044:32673,61045:64030,61046:33537,61047:33634,61048:33663,61049:33735,61050:33782,61051:33864,61052:33972,61053:34131,61054:34137,61056:34155,61057:64031,61058:34224,61059:64032,61060:64033,61061:34823,61062:35061,61063:35346,61064:35383,61065:35449,61066:35495,61067:35518,61068:35551,61069:64034,61070:35574,61071:35667,61072:35711,61073:36080,61074:36084,61075:36114,61076:36214,61077:64035,61078:36559,61079:64036,61080:64037,61081:36967,61082:37086,61083:64038,61084:37141,61085:37159,61086:37338,61087:37335,61088:37342,61089:37357,61090:37358,61091:37348,61092:37349,61093:37382,61094:37392,61095:37386,61096:37434,61097:37440,61098:37436,61099:37454,61100:37465,61101:37457,61102:37433,61103:37479,61104:37543,61105:37495,61106:37496,61107:37607,61108:37591,61109:37593,61110:37584,61111:64039,61112:37589,61113:37600,61114:37587,61115:37669,61116:37665,61117:37627,61118:64040,61119:37662,61120:37631,61121:37661,61122:37634,61123:37744,61124:37719,61125:37796,61126:37830,61127:37854,61128:37880,61129:37937,61130:37957,61131:37960,61132:38290,61133:63964,61134:64041,61135:38557,61136:38575,61137:38707,61138:38715,61139:38723,61140:38733,61141:38735,61142:38737,61143:38741,61144:38999,61145:39013,61146:64042,61147:64043,61148:39207,61149:64044,61150:39326,61151:39502,61152:39641,61153:39644,61154:39797,61155:39794,61156:39823,61157:39857,61158:39867,61159:39936,61160:40304,61161:40299,61162:64045,61163:40473,61164:40657,61167:8560,61168:8561,61169:8562,61170:8563,61171:8564,61172:8565,61173:8566,61174:8567,61175:8568,61176:8569,61177:65506,61178:65508,61179:65287,61180:65282,61504:57344,61505:57345,61506:57346,61507:57347,61508:57348,61509:57349,61510:57350,61511:57351,61512:57352,61513:57353,61514:57354,61515:57355,61516:57356,61517:57357,61518:57358,61519:57359,61520:57360,61521:57361,61522:57362,61523:57363,61524:57364,61525:57365,61526:57366,61527:57367,61528:57368,61529:57369,61530:57370,61531:57371,61532:57372,61533:57373,61534:57374,61535:57375,61536:57376,61537:57377,61538:57378,61539:57379,61540:57380,61541:57381,61542:57382,61543:57383,61544:57384,61545:57385,61546:57386,61547:57387,61548:57388,61549:57389,61550:57390,61551:57391,61552:57392,61553:57393,61554:57394,61555:57395,61556:57396,61557:57397,61558:57398,61559:57399,61560:57400,61561:57401,61562:57402,61563:57403,61564:57404,61565:57405,61566:57406,61568:57407,61569:57408,61570:57409,61571:57410,61572:57411,61573:57412,61574:57413,61575:57414,61576:57415,61577:57416,61578:57417,61579:57418,61580:57419,61581:57420,61582:57421,61583:57422,61584:57423,61585:57424,61586:57425,61587:57426,61588:57427,61589:57428,61590:57429,61591:57430,61592:57431,61593:57432,61594:57433,61595:57434,61596:57435,61597:57436,61598:57437,61599:57438,61600:57439,61601:57440,61602:57441,61603:57442,61604:57443,61605:57444,61606:57445,61607:57446,61608:57447,61609:57448,61610:57449,61611:57450,61612:57451,61613:57452,61614:57453,61615:57454,61616:57455,61617:57456,61618:57457,61619:57458,61620:57459,61621:57460,61622:57461,61623:57462,61624:57463,61625:57464,61626:57465,61627:57466,61628:57467,61629:57468,61630:57469,61631:57470,61632:57471,61633:57472,61634:57473,61635:57474,61636:57475,61637:57476,61638:57477,61639:57478,61640:57479,61641:57480,61642:57481,61643:57482,61644:57483,61645:57484,61646:57485,61647:57486,61648:57487,61649:57488,61650:57489,61651:57490,61652:57491,61653:57492,61654:57493,61655:57494,61656:57495,61657:57496,61658:57497,61659:57498,61660:57499,61661:57500,61662:57501,61663:57502,61664:57503,61665:57504,61666:57505,61667:57506,61668:57507,61669:57508,61670:57509,61671:57510,61672:57511,61673:57512,61674:57513,61675:57514,61676:57515,61677:57516,61678:57517,61679:57518,61680:57519,61681:57520,61682:57521,61683:57522,61684:57523,61685:57524,61686:57525,61687:57526,61688:57527,61689:57528,61690:57529,61691:57530,61692:57531,61760:57532,61761:57533,61762:57534,61763:57535,61764:57536,61765:57537,61766:57538,61767:57539,61768:57540,61769:57541,61770:57542,61771:57543,61772:57544,61773:57545,61774:57546,61775:57547,61776:57548,61777:57549,61778:57550,61779:57551,61780:57552,61781:57553,61782:57554,61783:57555,61784:57556,61785:57557,61786:57558,61787:57559,61788:57560,61789:57561,61790:57562,61791:57563,61792:57564,61793:57565,61794:57566,61795:57567,61796:57568,61797:57569,61798:57570,61799:57571,61800:57572,61801:57573,61802:57574,61803:57575,61804:57576,61805:57577,61806:57578,61807:57579,61808:57580,61809:57581,61810:57582,61811:57583,61812:57584,61813:57585,61814:57586,61815:57587,61816:57588,61817:57589,61818:57590,61819:57591,61820:57592,61821:57593,61822:57594,61824:57595,61825:57596,61826:57597,61827:57598,61828:57599,61829:57600,61830:57601,61831:57602,61832:57603,61833:57604,61834:57605,61835:57606,61836:57607,61837:57608,61838:57609,61839:57610,61840:57611,61841:57612,61842:57613,61843:57614,61844:57615,61845:57616,61846:57617,61847:57618,61848:57619,61849:57620,61850:57621,61851:57622,61852:57623,61853:57624,61854:57625,61855:57626,61856:57627,61857:57628,61858:57629,61859:57630,61860:57631,61861:57632,61862:57633,61863:57634,61864:57635,61865:57636,61866:57637,61867:57638,61868:57639,61869:57640,61870:57641,61871:57642,61872:57643,61873:57644,61874:57645,61875:57646,61876:57647,61877:57648,61878:57649,61879:57650,61880:57651,61881:57652,61882:57653,61883:57654,61884:57655,61885:57656,61886:57657,61887:57658,61888:57659,61889:57660,61890:57661,61891:57662,61892:57663,61893:57664,61894:57665,61895:57666,61896:57667,61897:57668,61898:57669,61899:57670,61900:57671,61901:57672,61902:57673,61903:57674,61904:57675,61905:57676,61906:57677,61907:57678,61908:57679,61909:57680,61910:57681,61911:57682,61912:57683,61913:57684,61914:57685,61915:57686,61916:57687,61917:57688,61918:57689,61919:57690,61920:57691,61921:57692,61922:57693,61923:57694,61924:57695,61925:57696,61926:57697,61927:57698,61928:57699,61929:57700,61930:57701,61931:57702,61932:57703,61933:57704,61934:57705,61935:57706,61936:57707,61937:57708,61938:57709,61939:57710,61940:57711,61941:57712,61942:57713,61943:57714,61944:57715,61945:57716,61946:57717,61947:57718,61948:57719,62016:57720,62017:57721,62018:57722,62019:57723,62020:57724,62021:57725,62022:57726,62023:57727,62024:57728,62025:57729,62026:57730,62027:57731,62028:57732,62029:57733,62030:57734,62031:57735,62032:57736,62033:57737,62034:57738,62035:57739,62036:57740,62037:57741,62038:57742,62039:57743,62040:57744,62041:57745,62042:57746,62043:57747,62044:57748,62045:57749,62046:57750,62047:57751,62048:57752,62049:57753,62050:57754,62051:57755,62052:57756,62053:57757,62054:57758,62055:57759,62056:57760,62057:57761,62058:57762,62059:57763,62060:57764,62061:57765,62062:57766,62063:57767,62064:57768,62065:57769,62066:57770,62067:57771,62068:57772,62069:57773,62070:57774,62071:57775,62072:57776,62073:57777,62074:57778,62075:57779,62076:57780,62077:57781,62078:57782,62080:57783,62081:57784,62082:57785,62083:57786,62084:57787,62085:57788,62086:57789,62087:57790,62088:57791,62089:57792,62090:57793,62091:57794,62092:57795,62093:57796,62094:57797,62095:57798,62096:57799,62097:57800,62098:57801,62099:57802,62100:57803,62101:57804,62102:57805,62103:57806,62104:57807,62105:57808,62106:57809,62107:57810,62108:57811,62109:57812,62110:57813,62111:57814,62112:57815,62113:57816,62114:57817,62115:57818,62116:57819,62117:57820,62118:57821,62119:57822,62120:57823,62121:57824,62122:57825,62123:57826,62124:57827,62125:57828,62126:57829,62127:57830,62128:57831,62129:57832,62130:57833,62131:57834,62132:57835,62133:57836,62134:57837,62135:57838,62136:57839,62137:57840,62138:57841,62139:57842,62140:57843,62141:57844,62142:57845,62143:57846,62144:57847,62145:57848,62146:57849,62147:57850,62148:57851,62149:57852,62150:57853,62151:57854,62152:57855,62153:57856,62154:57857,62155:57858,62156:57859,62157:57860,62158:57861,62159:57862,62160:57863,62161:57864,62162:57865,62163:57866,62164:57867,62165:57868,62166:57869,62167:57870,62168:57871,62169:57872,62170:57873,62171:57874,62172:57875,62173:57876,62174:57877,62175:57878,62176:57879,62177:57880,62178:57881,62179:57882,62180:57883,62181:57884,62182:57885,62183:57886,62184:57887,62185:57888,62186:57889,62187:57890,62188:57891,62189:57892,62190:57893,62191:57894,62192:57895,62193:57896,62194:57897,62195:57898,62196:57899,62197:57900,62198:57901,62199:57902,62200:57903,62201:57904,62202:57905,62203:57906,62204:57907,62272:57908,62273:57909,62274:57910,62275:57911,62276:57912,62277:57913,62278:57914,62279:57915,62280:57916,62281:57917,62282:57918,62283:57919,62284:57920,62285:57921,62286:57922,62287:57923,62288:57924,62289:57925,62290:57926,62291:57927,62292:57928,62293:57929,62294:57930,62295:57931,62296:57932,62297:57933,62298:57934,62299:57935,62300:57936,62301:57937,62302:57938,62303:57939,62304:57940,62305:57941,62306:57942,62307:57943,62308:57944,62309:57945,62310:57946,62311:57947,62312:57948,62313:57949,62314:57950,62315:57951,62316:57952,62317:57953,62318:57954,62319:57955,62320:57956,62321:57957,62322:57958,62323:57959,62324:57960,62325:57961,62326:57962,62327:57963,62328:57964,62329:57965,62330:57966,62331:57967,62332:57968,62333:57969,62334:57970,62336:57971,62337:57972,62338:57973,62339:57974,62340:57975,62341:57976,62342:57977,62343:57978,62344:57979,62345:57980,62346:57981,62347:57982,62348:57983,62349:57984,62350:57985,62351:57986,62352:57987,62353:57988,62354:57989,62355:57990,62356:57991,62357:57992,62358:57993,62359:57994,62360:57995,62361:57996,62362:57997,62363:57998,62364:57999,62365:58e3,62366:58001,62367:58002,62368:58003,62369:58004,62370:58005,62371:58006,62372:58007,62373:58008,62374:58009,62375:58010,62376:58011,62377:58012,62378:58013,62379:58014,62380:58015,62381:58016,62382:58017,62383:58018,62384:58019,62385:58020,62386:58021,62387:58022,62388:58023,62389:58024,62390:58025,62391:58026,62392:58027,62393:58028,62394:58029,62395:58030,62396:58031,62397:58032,62398:58033,62399:58034,62400:58035,62401:58036,62402:58037,62403:58038,62404:58039,62405:58040,62406:58041,62407:58042,62408:58043,62409:58044,62410:58045,62411:58046,62412:58047,62413:58048,62414:58049,62415:58050,62416:58051,62417:58052,62418:58053,62419:58054,62420:58055,62421:58056,62422:58057,62423:58058,62424:58059,62425:58060,62426:58061,62427:58062,62428:58063,62429:58064,62430:58065,62431:58066,62432:58067,62433:58068,62434:58069,62435:58070,62436:58071,62437:58072,62438:58073,62439:58074,62440:58075,62441:58076,62442:58077,62443:58078,62444:58079,62445:58080,62446:58081,62447:58082,62448:58083,62449:58084,62450:58085,62451:58086,62452:58087,62453:58088,62454:58089,62455:58090,62456:58091,62457:58092,62458:58093,62459:58094,62460:58095,62528:58096,62529:58097,62530:58098,62531:58099,62532:58100,62533:58101,62534:58102,62535:58103,62536:58104,62537:58105,62538:58106,62539:58107,62540:58108,62541:58109,62542:58110,62543:58111,62544:58112,62545:58113,62546:58114,62547:58115,62548:58116,62549:58117,62550:58118,62551:58119,62552:58120,62553:58121,62554:58122,62555:58123,62556:58124,62557:58125,62558:58126,62559:58127,62560:58128,62561:58129,62562:58130,62563:58131,62564:58132,62565:58133,62566:58134,62567:58135,62568:58136,62569:58137,62570:58138,62571:58139,62572:58140,62573:58141,62574:58142,62575:58143,62576:58144,62577:58145,62578:58146,62579:58147,62580:58148,62581:58149,62582:58150,62583:58151,62584:58152,62585:58153,62586:58154,62587:58155,62588:58156,62589:58157,62590:58158,62592:58159,62593:58160,62594:58161,62595:58162,62596:58163,62597:58164,62598:58165,62599:58166,62600:58167,62601:58168,62602:58169,62603:58170,62604:58171,62605:58172,62606:58173,62607:58174,62608:58175,62609:58176,62610:58177,62611:58178,62612:58179,62613:58180,62614:58181,62615:58182,62616:58183,62617:58184,62618:58185,62619:58186,62620:58187,62621:58188,62622:58189,62623:58190,62624:58191,62625:58192,62626:58193,62627:58194,62628:58195,62629:58196,62630:58197,62631:58198,62632:58199,62633:58200,62634:58201,62635:58202,62636:58203,62637:58204,62638:58205,62639:58206,62640:58207,62641:58208,62642:58209,62643:58210,62644:58211,62645:58212,62646:58213,62647:58214,62648:58215,62649:58216,62650:58217,62651:58218,62652:58219,62653:58220,62654:58221,62655:58222,62656:58223,62657:58224,62658:58225,62659:58226,62660:58227,62661:58228,62662:58229,62663:58230,62664:58231,62665:58232,62666:58233,62667:58234,62668:58235,62669:58236,62670:58237,62671:58238,62672:58239,62673:58240,62674:58241,62675:58242,62676:58243,62677:58244,62678:58245,62679:58246,62680:58247,62681:58248,62682:58249,62683:58250,62684:58251,62685:58252,62686:58253,62687:58254,62688:58255,62689:58256,62690:58257,62691:58258,62692:58259,62693:58260,62694:58261,62695:58262,62696:58263,62697:58264,62698:58265,62699:58266,62700:58267,62701:58268,62702:58269,62703:58270,62704:58271,62705:58272,62706:58273,62707:58274,62708:58275,62709:58276,62710:58277,62711:58278,62712:58279,62713:58280,62714:58281,62715:58282,62716:58283,62784:58284,62785:58285,62786:58286,62787:58287,62788:58288,62789:58289,62790:58290,62791:58291,62792:58292,62793:58293,62794:58294,62795:58295,62796:58296,62797:58297,62798:58298,62799:58299,62800:58300,62801:58301,62802:58302,62803:58303,62804:58304,62805:58305,62806:58306,62807:58307,62808:58308,62809:58309,62810:58310,62811:58311,62812:58312,62813:58313,62814:58314,62815:58315,62816:58316,62817:58317,62818:58318,62819:58319,62820:58320,62821:58321,62822:58322,62823:58323,62824:58324,62825:58325,62826:58326,62827:58327,62828:58328,62829:58329,62830:58330,62831:58331,62832:58332,62833:58333,62834:58334,62835:58335,62836:58336,62837:58337,62838:58338,62839:58339,62840:58340,62841:58341,62842:58342,62843:58343,62844:58344,62845:58345,62846:58346,62848:58347,62849:58348,62850:58349,62851:58350,62852:58351,62853:58352,62854:58353,62855:58354,62856:58355,62857:58356,62858:58357,62859:58358,62860:58359,62861:58360,62862:58361,62863:58362,62864:58363,62865:58364,62866:58365,62867:58366,62868:58367,62869:58368,62870:58369,62871:58370,62872:58371,62873:58372,62874:58373,62875:58374,62876:58375,62877:58376,62878:58377,62879:58378,62880:58379,62881:58380,62882:58381,62883:58382,62884:58383,62885:58384,62886:58385,62887:58386,62888:58387,62889:58388,62890:58389,62891:58390,62892:58391,62893:58392,62894:58393,62895:58394,62896:58395,62897:58396,62898:58397,62899:58398,62900:58399,62901:58400,62902:58401,62903:58402,62904:58403,62905:58404,62906:58405,62907:58406,62908:58407,62909:58408,62910:58409,62911:58410,62912:58411,62913:58412,62914:58413,62915:58414,62916:58415,62917:58416,62918:58417,62919:58418,62920:58419,62921:58420,62922:58421,62923:58422,62924:58423,62925:58424,62926:58425,62927:58426,62928:58427,62929:58428,62930:58429,62931:58430,62932:58431,62933:58432,62934:58433,62935:58434,62936:58435,62937:58436,62938:58437,62939:58438,62940:58439,62941:58440,62942:58441,62943:58442,62944:58443,62945:58444,62946:58445,62947:58446,62948:58447,62949:58448,62950:58449,62951:58450,62952:58451,62953:58452,62954:58453,62955:58454,62956:58455,62957:58456,62958:58457,62959:58458,62960:58459,62961:58460,62962:58461,62963:58462,62964:58463,62965:58464,62966:58465,62967:58466,62968:58467,62969:58468,62970:58469,62971:58470,62972:58471,63040:58472,63041:58473,63042:58474,63043:58475,63044:58476,63045:58477,63046:58478,63047:58479,63048:58480,63049:58481,63050:58482,63051:58483,63052:58484,63053:58485,63054:58486,63055:58487,63056:58488,63057:58489,63058:58490,63059:58491,63060:58492,63061:58493,63062:58494,63063:58495,63064:58496,63065:58497,63066:58498,63067:58499,63068:58500,63069:58501,63070:58502,63071:58503,63072:58504,63073:58505,63074:58506,63075:58507,63076:58508,63077:58509,63078:58510,63079:58511,63080:58512,63081:58513,63082:58514,63083:58515,63084:58516,63085:58517,63086:58518,63087:58519,63088:58520,63089:58521,63090:58522,63091:58523,63092:58524,63093:58525,63094:58526,63095:58527,63096:58528,63097:58529,63098:58530,63099:58531,63100:58532,63101:58533,63102:58534,63104:58535,63105:58536,63106:58537,63107:58538,63108:58539,63109:58540,63110:58541,63111:58542,63112:58543,63113:58544,63114:58545,63115:58546,63116:58547,63117:58548,63118:58549,63119:58550,63120:58551,63121:58552,63122:58553,63123:58554,63124:58555,63125:58556,63126:58557,63127:58558,63128:58559,63129:58560,63130:58561,63131:58562,63132:58563,63133:58564,63134:58565,63135:58566,63136:58567,63137:58568,63138:58569,63139:58570,63140:58571,63141:58572,63142:58573,63143:58574,63144:58575,63145:58576,63146:58577,63147:58578,63148:58579,63149:58580,63150:58581,63151:58582,63152:58583,63153:58584,63154:58585,63155:58586,63156:58587,63157:58588,63158:58589,63159:58590,63160:58591,63161:58592,63162:58593,63163:58594,63164:58595,63165:58596,63166:58597,63167:58598,63168:58599,63169:58600,63170:58601,63171:58602,63172:58603,63173:58604,63174:58605,63175:58606,63176:58607,63177:58608,63178:58609,63179:58610,63180:58611,63181:58612,63182:58613,63183:58614,63184:58615,63185:58616,63186:58617,63187:58618,63188:58619,63189:58620,63190:58621,63191:58622,63192:58623,63193:58624,63194:58625,63195:58626,63196:58627,63197:58628,63198:58629,63199:58630,63200:58631,63201:58632,63202:58633,63203:58634,63204:58635,63205:58636,63206:58637,63207:58638,63208:58639,63209:58640,63210:58641,63211:58642,63212:58643,63213:58644,63214:58645,63215:58646,63216:58647,63217:58648,63218:58649,63219:58650,63220:58651,63221:58652,63222:58653,63223:58654,63224:58655,63225:58656,63226:58657,63227:58658,63228:58659,63296:58660,63297:58661,63298:58662,63299:58663,63300:58664,63301:58665,63302:58666,63303:58667,63304:58668,63305:58669,63306:58670,63307:58671,63308:58672,63309:58673,63310:58674,63311:58675,63312:58676,63313:58677,63314:58678,63315:58679,63316:58680,63317:58681,63318:58682,63319:58683,63320:58684,63321:58685,63322:58686,63323:58687,63324:58688,63325:58689,63326:58690,63327:58691,63328:58692,63329:58693,63330:58694,63331:58695,63332:58696,63333:58697,63334:58698,63335:58699,63336:58700,63337:58701,63338:58702,63339:58703,63340:58704,63341:58705,63342:58706,63343:58707,63344:58708,63345:58709,63346:58710,63347:58711,63348:58712,63349:58713,63350:58714,63351:58715,63352:58716,63353:58717,63354:58718,63355:58719,63356:58720,63357:58721,63358:58722,63360:58723,63361:58724,63362:58725,63363:58726,63364:58727,63365:58728,63366:58729,63367:58730,63368:58731,63369:58732,63370:58733,63371:58734,63372:58735,63373:58736,63374:58737,63375:58738,63376:58739,63377:58740,63378:58741,63379:58742,63380:58743,63381:58744,63382:58745,63383:58746,63384:58747,63385:58748,63386:58749,63387:58750,63388:58751,63389:58752,63390:58753,63391:58754,63392:58755,63393:58756,63394:58757,63395:58758,63396:58759,63397:58760,63398:58761,63399:58762,63400:58763,63401:58764,63402:58765,63403:58766,63404:58767,63405:58768,63406:58769,63407:58770,63408:58771,63409:58772,63410:58773,63411:58774,63412:58775,63413:58776,63414:58777,63415:58778,63416:58779,63417:58780,63418:58781,63419:58782,63420:58783,63421:58784,63422:58785,63423:58786,63424:58787,63425:58788,63426:58789,63427:58790,63428:58791,63429:58792,63430:58793,63431:58794,63432:58795,63433:58796,63434:58797,63435:58798,63436:58799,63437:58800,63438:58801,63439:58802,63440:58803,63441:58804,63442:58805,63443:58806,63444:58807,63445:58808,63446:58809,63447:58810,63448:58811,63449:58812,63450:58813,63451:58814,63452:58815,63453:58816,63454:58817,63455:58818,63456:58819,63457:58820,63458:58821,63459:58822,63460:58823,63461:58824,63462:58825,63463:58826,63464:58827,63465:58828,63466:58829,63467:58830,63468:58831,63469:58832,63470:58833,63471:58834,63472:58835,63473:58836,63474:58837,63475:58838,63476:58839,63477:58840,63478:58841,63479:58842,63480:58843,63481:58844,63482:58845,63483:58846,63484:58847,63552:58848,63553:58849,63554:58850,63555:58851,63556:58852,63557:58853,63558:58854,63559:58855,63560:58856,63561:58857,63562:58858,63563:58859,63564:58860,63565:58861,63566:58862,63567:58863,63568:58864,63569:58865,63570:58866,63571:58867,63572:58868,63573:58869,63574:58870,63575:58871,63576:58872,63577:58873,63578:58874,63579:58875,63580:58876,63581:58877,63582:58878,63583:58879,63584:58880,63585:58881,63586:58882,63587:58883,63588:58884,63589:58885,63590:58886,63591:58887,63592:58888,63593:58889,63594:58890,63595:58891,63596:58892,63597:58893,63598:58894,63599:58895,63600:58896,63601:58897,63602:58898,63603:58899,63604:58900,63605:58901,63606:58902,63607:58903,63608:58904,63609:58905,63610:58906,63611:58907,63612:58908,63613:58909,63614:58910,63616:58911,63617:58912,63618:58913,63619:58914,63620:58915,63621:58916,63622:58917,63623:58918,63624:58919,63625:58920,63626:58921,63627:58922,63628:58923,63629:58924,63630:58925,63631:58926,63632:58927,63633:58928,63634:58929,63635:58930,63636:58931,63637:58932,63638:58933,63639:58934,63640:58935,63641:58936,63642:58937,63643:58938,63644:58939,63645:58940,63646:58941,63647:58942,63648:58943,63649:58944,63650:58945,63651:58946,63652:58947,63653:58948,63654:58949,63655:58950,63656:58951,63657:58952,63658:58953,63659:58954,63660:58955,63661:58956,63662:58957,63663:58958,63664:58959,63665:58960,63666:58961,63667:58962,63668:58963,63669:58964,63670:58965,63671:58966,63672:58967,63673:58968,63674:58969,63675:58970,63676:58971,63677:58972,63678:58973,63679:58974,63680:58975,63681:58976,63682:58977,63683:58978,63684:58979,63685:58980,63686:58981,63687:58982,63688:58983,63689:58984,63690:58985,63691:58986,63692:58987,63693:58988,63694:58989,63695:58990,63696:58991,63697:58992,63698:58993,63699:58994,63700:58995,63701:58996,63702:58997,63703:58998,63704:58999,63705:59e3,63706:59001,63707:59002,63708:59003,63709:59004,63710:59005,63711:59006,63712:59007,63713:59008,63714:59009,63715:59010,63716:59011,63717:59012,63718:59013,63719:59014,63720:59015,63721:59016,63722:59017,63723:59018,63724:59019,63725:59020,63726:59021,63727:59022,63728:59023,63729:59024,63730:59025,63731:59026,63732:59027,63733:59028,63734:59029,63735:59030,63736:59031,63737:59032,63738:59033,63739:59034,63740:59035,64064:8560,64065:8561,64066:8562,64067:8563,64068:8564,64069:8565,64070:8566,64071:8567,64072:8568,64073:8569,64074:8544,64075:8545,64076:8546,64077:8547,64078:8548,64079:8549,64080:8550,64081:8551,64082:8552,64083:8553,64084:65506,64085:65508,64086:65287,64087:65282,64088:12849,64089:8470,64090:8481,64091:8757,64092:32394,64093:35100,64094:37704,64095:37512,64096:34012,64097:20425,64098:28859,64099:26161,64100:26824,64101:37625,64102:26363,64103:24389,64104:20008,64105:20193,64106:20220,64107:20224,64108:20227,64109:20281,64110:20310,64111:20370,64112:20362,64113:20378,64114:20372,64115:20429,64116:20544,64117:20514,64118:20479,64119:20510,64120:20550,64121:20592,64122:20546,64123:20628,64124:20724,64125:20696,64126:20810,64128:20836,64129:20893,64130:20926,64131:20972,64132:21013,64133:21148,64134:21158,64135:21184,64136:21211,64137:21248,64138:21255,64139:21284,64140:21362,64141:21395,64142:21426,64143:21469,64144:64014,64145:21660,64146:21642,64147:21673,64148:21759,64149:21894,64150:22361,64151:22373,64152:22444,64153:22472,64154:22471,64155:64015,64156:64016,64157:22686,64158:22706,64159:22795,64160:22867,64161:22875,64162:22877,64163:22883,64164:22948,64165:22970,64166:23382,64167:23488,64168:29999,64169:23512,64170:23532,64171:23582,64172:23718,64173:23738,64174:23797,64175:23847,64176:23891,64177:64017,64178:23874,64179:23917,64180:23992,64181:23993,64182:24016,64183:24353,64184:24372,64185:24423,64186:24503,64187:24542,64188:24669,64189:24709,64190:24714,64191:24798,64192:24789,64193:24864,64194:24818,64195:24849,64196:24887,64197:24880,64198:24984,64199:25107,64200:25254,64201:25589,64202:25696,64203:25757,64204:25806,64205:25934,64206:26112,64207:26133,64208:26171,64209:26121,64210:26158,64211:26142,64212:26148,64213:26213,64214:26199,64215:26201,64216:64018,64217:26227,64218:26265,64219:26272,64220:26290,64221:26303,64222:26362,64223:26382,64224:63785,64225:26470,64226:26555,64227:26706,64228:26560,64229:26625,64230:26692,64231:26831,64232:64019,64233:26984,64234:64020,64235:27032,64236:27106,64237:27184,64238:27243,64239:27206,64240:27251,64241:27262,64242:27362,64243:27364,64244:27606,64245:27711,64246:27740,64247:27782,64248:27759,64249:27866,64250:27908,64251:28039,64252:28015,64320:28054,64321:28076,64322:28111,64323:28152,64324:28146,64325:28156,64326:28217,64327:28252,64328:28199,64329:28220,64330:28351,64331:28552,64332:28597,64333:28661,64334:28677,64335:28679,64336:28712,64337:28805,64338:28843,64339:28943,64340:28932,64341:29020,64342:28998,64343:28999,64344:64021,64345:29121,64346:29182,64347:29361,64348:29374,64349:29476,64350:64022,64351:29559,64352:29629,64353:29641,64354:29654,64355:29667,64356:29650,64357:29703,64358:29685,64359:29734,64360:29738,64361:29737,64362:29742,64363:29794,64364:29833,64365:29855,64366:29953,64367:30063,64368:30338,64369:30364,64370:30366,64371:30363,64372:30374,64373:64023,64374:30534,64375:21167,64376:30753,64377:30798,64378:30820,64379:30842,64380:31024,64381:64024,64382:64025,64384:64026,64385:31124,64386:64027,64387:31131,64388:31441,64389:31463,64390:64028,64391:31467,64392:31646,64393:64029,64394:32072,64395:32092,64396:32183,64397:32160,64398:32214,64399:32338,64400:32583,64401:32673,64402:64030,64403:33537,64404:33634,64405:33663,64406:33735,64407:33782,64408:33864,64409:33972,64410:34131,64411:34137,64412:34155,64413:64031,64414:34224,64415:64032,64416:64033,64417:34823,64418:35061,64419:35346,64420:35383,64421:35449,64422:35495,64423:35518,64424:35551,64425:64034,64426:35574,64427:35667,64428:35711,64429:36080,64430:36084,64431:36114,64432:36214,64433:64035,64434:36559,64435:64036,64436:64037,64437:36967,64438:37086,64439:64038,64440:37141,64441:37159,64442:37338,64443:37335,64444:37342,64445:37357,64446:37358,64447:37348,64448:37349,64449:37382,64450:37392,64451:37386,64452:37434,64453:37440,64454:37436,64455:37454,64456:37465,64457:37457,64458:37433,64459:37479,64460:37543,64461:37495,64462:37496,64463:37607,64464:37591,64465:37593,64466:37584,64467:64039,64468:37589,64469:37600,64470:37587,64471:37669,64472:37665,64473:37627,64474:64040,64475:37662,64476:37631,64477:37661,64478:37634,64479:37744,64480:37719,64481:37796,64482:37830,64483:37854,64484:37880,64485:37937,64486:37957,64487:37960,64488:38290,64489:63964,64490:64041,64491:38557,64492:38575,64493:38707,64494:38715,64495:38723,64496:38733,64497:38735,64498:38737,64499:38741,64500:38999,64501:39013,64502:64042,64503:64043,64504:39207,64505:64044,64506:39326,64507:39502,64508:39641,64576:39644,64577:39797,64578:39794,64579:39823,64580:39857,64581:39867,64582:39936,64583:40304,64584:40299,64585:64045,64586:40473,64587:40657},a.prototype={constructor:a,getInt8:function(){var e=this.dv.getInt8(this.offset);return this.offset+=1,e},getInt8Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt8());return t},getUint8:function(){var e=this.dv.getUint8(this.offset);return this.offset+=1,e},getUint8Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getUint8());return t},getInt16:function(){var e=this.dv.getInt16(this.offset,this.littleEndian);return this.offset+=2,e},getInt16Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt16());return t},getUint16:function(){var e=this.dv.getUint16(this.offset,this.littleEndian);return this.offset+=2,e},getUint16Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getUint16());return t},getInt32:function(){var e=this.dv.getInt32(this.offset,this.littleEndian);return this.offset+=4,e},getInt32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getInt32());return t},getUint32:function(){var e=this.dv.getUint32(this.offset,this.littleEndian);return this.offset+=4,e},getUint32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getUint32());return t},getFloat32:function(){var e=this.dv.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e},getFloat32Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat32());return t},getFloat64:function(){var e=this.dv.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e},getFloat64Array:function(e){for(var t=[],r=0;r<e;r++)t.push(this.getFloat64());return t},getIndex:function(e,t){switch(e){case 1:return!0===t?this.getUint8():this.getInt8();case 2:return!0===t?this.getUint16():this.getInt16();case 4:return this.getInt32();default:throw"unknown number type "+e+" exception."}},getIndexArray:function(e,t,r){for(var n=[],i=0;i<t;i++)n.push(this.getIndex(e,r));return n},getChars:function(e){for(var t="";e>0;){var r=this.getUint8();if(e--,0===r)break;t+=String.fromCharCode(r)}for(;e>0;)this.getUint8(),e--;return t},getSjisStringsAsUnicode:function(e){for(var t=[];e>0;){var r=this.getUint8();if(e--,0===r)break;t.push(r)}for(;e>0;)this.getUint8(),e--;return this.encoder.s2u(new Uint8Array(t))},getUnicodeStrings:function(e){for(var t="";e>0;){var r=this.getUint16();if(e-=2,0===r)break;t+=String.fromCharCode(r)}for(;e>0;)this.getUint8(),e--;return t},getTextBuffer:function(){var e=this.getUint32();return this.getUnicodeStrings(e)}},s.prototype={constructor:s,leftToRightVector3:function(e){e[2]=-e[2]},leftToRightQuaternion:function(e){e[0]=-e[0],e[1]=-e[1]},leftToRightEuler:function(e){e[0]=-e[0],e[1]=-e[1]},leftToRightIndexOrder:function(e){var t=e[2];e[2]=e[0],e[0]=t},leftToRightVector3Range:function(e,t){var r=-t[2];t[2]=-e[2],e[2]=r},leftToRightEulerRange:function(e,t){var r=-t[0],n=-t[1];t[0]=-e[0],t[1]=-e[1],e[0]=r,e[1]=n}},l.prototype.parsePmd=function(e,t){var r={},n=new a(e);r.metadata={},r.metadata.format="pmd",r.metadata.coordinateSystem="left";var i;return function(){var e=r.metadata;if(e.magic=n.getChars(3),"Pmd"!==e.magic)throw"PMD file magic is not Pmd, but "+e.magic;e.version=n.getFloat32(),e.modelName=n.getSjisStringsAsUnicode(20),e.comment=n.getSjisStringsAsUnicode(256)}(),function(){var e,t=r.metadata;t.vertexCount=n.getUint32(),r.vertices=[];for(var i=0;i<t.vertexCount;i++)r.vertices.push((e=void 0,(e={}).position=n.getFloat32Array(3),e.normal=n.getFloat32Array(3),e.uv=n.getFloat32Array(2),e.skinIndices=n.getUint16Array(2),e.skinWeights=[n.getUint8()/100],e.skinWeights.push(1-e.skinWeights[0]),e.edgeFlag=n.getUint8(),e))}(),function(){var e,t=r.metadata;t.faceCount=n.getUint32()/3,r.faces=[];for(var i=0;i<t.faceCount;i++)r.faces.push((e=void 0,(e={}).indices=n.getUint16Array(3),e))}(),function(){var e,t=r.metadata;t.materialCount=n.getUint32(),r.materials=[];for(var i=0;i<t.materialCount;i++)r.materials.push((e=void 0,(e={}).diffuse=n.getFloat32Array(4),e.shininess=n.getFloat32(),e.specular=n.getFloat32Array(3),e.ambient=n.getFloat32Array(3),e.toonIndex=n.getInt8(),e.edgeFlag=n.getUint8(),e.faceCount=n.getUint32()/3,e.fileName=n.getSjisStringsAsUnicode(20),e))}(),function(){var e,t=r.metadata;t.boneCount=n.getUint16(),r.bones=[];for(var i=0;i<t.boneCount;i++)r.bones.push((e=void 0,(e={}).name=n.getSjisStringsAsUnicode(20),e.parentIndex=n.getInt16(),e.tailIndex=n.getInt16(),e.type=n.getUint8(),e.ikIndex=n.getInt16(),e.position=n.getFloat32Array(3),e))}(),function(){var e=function(){var e={};e.target=n.getUint16(),e.effector=n.getUint16(),e.linkCount=n.getUint8(),e.iteration=n.getUint16(),e.maxAngle=n.getFloat32(),e.links=[];for(var t=0;t<e.linkCount;t++){var r={};r.index=n.getUint16(),e.links.push(r)}return e},t=r.metadata;t.ikCount=n.getUint16(),r.iks=[];for(var i=0;i<t.ikCount;i++)r.iks.push(e())}(),function(){var e=function(){var e={};e.name=n.getSjisStringsAsUnicode(20),e.elementCount=n.getUint32(),e.type=n.getUint8(),e.elements=[];for(var t=0;t<e.elementCount;t++)e.elements.push({index:n.getUint32(),position:n.getFloat32Array(3)});return e},t=r.metadata;t.morphCount=n.getUint16(),r.morphs=[];for(var i=0;i<t.morphCount;i++)r.morphs.push(e())}(),function(){var e,t=r.metadata;t.morphFrameCount=n.getUint8(),r.morphFrames=[];for(var i=0;i<t.morphFrameCount;i++)r.morphFrames.push((e=void 0,(e={}).index=n.getUint16(),e))}(),function(){var e,t=r.metadata;t.boneFrameNameCount=n.getUint8(),r.boneFrameNames=[];for(var i=0;i<t.boneFrameNameCount;i++)r.boneFrameNames.push((e=void 0,(e={}).name=n.getSjisStringsAsUnicode(50),e))}(),function(){var e,t=r.metadata;t.boneFrameCount=n.getUint32(),r.boneFrames=[];for(var i=0;i<t.boneFrameCount;i++)r.boneFrames.push((e=void 0,(e={}).boneIndex=n.getInt16(),e.frameIndex=n.getUint8(),e))}(),(i=r.metadata).englishCompatibility=n.getUint8(),i.englishCompatibility>0&&(i.englishModelName=n.getSjisStringsAsUnicode(20),i.englishComment=n.getSjisStringsAsUnicode(256)),function(){var e=r.metadata;if(0!==e.englishCompatibility){r.englishBoneNames=[];for(var t=0;t<e.boneCount;t++)r.englishBoneNames.push((i=void 0,(i={}).name=n.getSjisStringsAsUnicode(20),i));var i}}(),function(){var e=r.metadata;if(0!==e.englishCompatibility){r.englishMorphNames=[];for(var t=0;t<e.morphCount-1;t++)r.englishMorphNames.push((i=void 0,(i={}).name=n.getSjisStringsAsUnicode(20),i));var i}}(),function(){var e=r.metadata;if(0!==e.englishCompatibility){r.englishBoneFrameNames=[];for(var t=0;t<e.boneFrameNameCount;t++)r.englishBoneFrameNames.push((i=void 0,(i={}).name=n.getSjisStringsAsUnicode(50),i));var i}}(),function(){var e;r.toonTextures=[];for(var t=0;t<10;t++)r.toonTextures.push((e=void 0,(e={}).fileName=n.getSjisStringsAsUnicode(100),e))}(),function(){var e,t=r.metadata;t.rigidBodyCount=n.getUint32(),r.rigidBodies=[];for(var i=0;i<t.rigidBodyCount;i++)r.rigidBodies.push((e=void 0,(e={}).name=n.getSjisStringsAsUnicode(20),e.boneIndex=n.getInt16(),e.groupIndex=n.getUint8(),e.groupTarget=n.getUint16(),e.shapeType=n.getUint8(),e.width=n.getFloat32(),e.height=n.getFloat32(),e.depth=n.getFloat32(),e.position=n.getFloat32Array(3),e.rotation=n.getFloat32Array(3),e.weight=n.getFloat32(),e.positionDamping=n.getFloat32(),e.rotationDamping=n.getFloat32(),e.restitution=n.getFloat32(),e.friction=n.getFloat32(),e.type=n.getUint8(),e))}(),function(){var e,t=r.metadata;t.constraintCount=n.getUint32(),r.constraints=[];for(var i=0;i<t.constraintCount;i++)r.constraints.push((e=void 0,(e={}).name=n.getSjisStringsAsUnicode(20),e.rigidBodyIndex1=n.getUint32(),e.rigidBodyIndex2=n.getUint32(),e.position=n.getFloat32Array(3),e.rotation=n.getFloat32Array(3),e.translationLimitation1=n.getFloat32Array(3),e.translationLimitation2=n.getFloat32Array(3),e.rotationLimitation1=n.getFloat32Array(3),e.rotationLimitation2=n.getFloat32Array(3),e.springPosition=n.getFloat32Array(3),e.springRotation=n.getFloat32Array(3),e))}(),!0===t&&this.leftToRightModel(r),r},l.prototype.parsePmx=function(e,t){var r={},n=new a(e);r.metadata={},r.metadata.format="pmx",r.metadata.coordinateSystem="left";return function(){var e=r.metadata;if(e.magic=n.getChars(4),"PMX "!==e.magic)throw"PMX file magic is not PMX , but "+e.magic;if(e.version=n.getFloat32(),2!==e.version&&2.1!==e.version)throw"PMX version "+e.version+" is not supported.";e.headerSize=n.getUint8(),e.encoding=n.getUint8(),e.additionalUvNum=n.getUint8(),e.vertexIndexSize=n.getUint8(),e.textureIndexSize=n.getUint8(),e.materialIndexSize=n.getUint8(),e.boneIndexSize=n.getUint8(),e.morphIndexSize=n.getUint8(),e.rigidBodyIndexSize=n.getUint8(),e.modelName=n.getTextBuffer(),e.englishModelName=n.getTextBuffer(),e.comment=n.getTextBuffer(),e.englishComment=n.getTextBuffer()}(),function(){var e=function(){var e={};e.position=n.getFloat32Array(3),e.normal=n.getFloat32Array(3),e.uv=n.getFloat32Array(2),e.auvs=[];for(var i=0;i<r.metadata.additionalUvNum;i++)e.auvs.push(n.getFloat32Array(4));e.type=n.getUint8();var o=t.boneIndexSize;if(0===e.type)e.skinIndices=n.getIndexArray(o,1),e.skinWeights=[1];else if(1===e.type)e.skinIndices=n.getIndexArray(o,2),e.skinWeights=n.getFloat32Array(1),e.skinWeights.push(1-e.skinWeights[0]);else if(2===e.type)e.skinIndices=n.getIndexArray(o,4),e.skinWeights=n.getFloat32Array(4);else{if(3!==e.type)throw"unsupport bone type "+e.type+" exception.";e.skinIndices=n.getIndexArray(o,2),e.skinWeights=n.getFloat32Array(1),e.skinWeights.push(1-e.skinWeights[0]),e.skinC=n.getFloat32Array(3),e.skinR0=n.getFloat32Array(3),e.skinR1=n.getFloat32Array(3),e.type=1}return e.edgeRatio=n.getFloat32(),e},t=r.metadata;t.vertexCount=n.getUint32(),r.vertices=[];for(var i=0;i<t.vertexCount;i++)r.vertices.push(e())}(),function(){var e,t=r.metadata;t.faceCount=n.getUint32()/3,r.faces=[];for(var i=0;i<t.faceCount;i++)r.faces.push((e=void 0,(e={}).indices=n.getIndexArray(t.vertexIndexSize,3,!0),e))}(),function(){var e=r.metadata;e.textureCount=n.getUint32(),r.textures=[];for(var t=0;t<e.textureCount;t++)r.textures.push(n.getTextBuffer())}(),function(){var e=function(){var e={};if(e.name=n.getTextBuffer(),e.englishName=n.getTextBuffer(),e.diffuse=n.getFloat32Array(4),e.specular=n.getFloat32Array(3),e.shininess=n.getFloat32(),e.ambient=n.getFloat32Array(3),e.flag=n.getUint8(),e.edgeColor=n.getFloat32Array(4),e.edgeSize=n.getFloat32(),e.textureIndex=n.getIndex(r.metadata.textureIndexSize),e.envTextureIndex=n.getIndex(r.metadata.textureIndexSize),e.envFlag=n.getUint8(),e.toonFlag=n.getUint8(),0===e.toonFlag)e.toonIndex=n.getIndex(r.metadata.textureIndexSize);else{if(1!==e.toonFlag)throw"unknown toon flag "+e.toonFlag+" exception.";e.toonIndex=n.getInt8()}return e.comment=n.getTextBuffer(),e.faceCount=n.getUint32()/3,e},t=r.metadata;t.materialCount=n.getUint32(),r.materials=[];for(var i=0;i<t.materialCount;i++)r.materials.push(e())}(),function(){var e=function(){var e={};if(e.name=n.getTextBuffer(),e.englishName=n.getTextBuffer(),e.position=n.getFloat32Array(3),e.parentIndex=n.getIndex(r.metadata.boneIndexSize),e.transformationClass=n.getUint32(),e.flag=n.getUint16(),1&e.flag?e.connectIndex=n.getIndex(r.metadata.boneIndexSize):e.offsetPosition=n.getFloat32Array(3),256&e.flag||512&e.flag){var t={};t.isLocal=0!=(128&e.flag),t.affectRotation=0!=(256&e.flag),t.affectPosition=0!=(512&e.flag),t.parentIndex=n.getIndex(r.metadata.boneIndexSize),t.ratio=n.getFloat32(),e.grant=t}if(1024&e.flag&&(e.fixAxis=n.getFloat32Array(3)),2048&e.flag&&(e.localXVector=n.getFloat32Array(3),e.localZVector=n.getFloat32Array(3)),8192&e.flag&&(e.key=n.getUint32()),32&e.flag){var i={};i.effector=n.getIndex(r.metadata.boneIndexSize),i.target=null,i.iteration=n.getUint32(),i.maxAngle=n.getFloat32(),i.linkCount=n.getUint32(),i.links=[];for(var o=0;o<i.linkCount;o++){var a={};a.index=n.getIndex(r.metadata.boneIndexSize),a.angleLimitation=n.getUint8(),1===a.angleLimitation&&(a.lowerLimitationAngle=n.getFloat32Array(3),a.upperLimitationAngle=n.getFloat32Array(3)),i.links.push(a)}e.ik=i}return e},t=r.metadata;t.boneCount=n.getUint32(),r.bones=[];for(var i=0;i<t.boneCount;i++)r.bones.push(e())}(),function(){var e=function(){var e={};e.name=n.getTextBuffer(),e.englishName=n.getTextBuffer(),e.panel=n.getUint8(),e.type=n.getUint8(),e.elementCount=n.getUint32(),e.elements=[];for(var t=0;t<e.elementCount;t++)if(0===e.type)(i={}).index=n.getIndex(r.metadata.morphIndexSize),i.ratio=n.getFloat32(),e.elements.push(i);else if(1===e.type)(i={}).index=n.getIndex(r.metadata.vertexIndexSize,!0),i.position=n.getFloat32Array(3),e.elements.push(i);else if(2===e.type)(i={}).index=n.getIndex(r.metadata.boneIndexSize),i.position=n.getFloat32Array(3),i.rotation=n.getFloat32Array(4),e.elements.push(i);else if(3===e.type)(i={}).index=n.getIndex(r.metadata.vertexIndexSize,!0),i.uv=n.getFloat32Array(4),e.elements.push(i);else if(4===e.type);else if(5===e.type);else if(6===e.type);else if(7===e.type);else if(8===e.type){var i;(i={}).index=n.getIndex(r.metadata.materialIndexSize),i.type=n.getUint8(),i.diffuse=n.getFloat32Array(4),i.specular=n.getFloat32Array(3),i.shininess=n.getFloat32(),i.ambient=n.getFloat32Array(3),i.edgeColor=n.getFloat32Array(4),i.edgeSize=n.getFloat32(),i.textureColor=n.getFloat32Array(4),i.sphereTextureColor=n.getFloat32Array(4),i.toonColor=n.getFloat32Array(4),e.elements.push(i)}return e},t=r.metadata;t.morphCount=n.getUint32(),r.morphs=[];for(var i=0;i<t.morphCount;i++)r.morphs.push(e())}(),function(){var e=function(){var e={};e.name=n.getTextBuffer(),e.englishName=n.getTextBuffer(),e.type=n.getUint8(),e.elementCount=n.getUint32(),e.elements=[];for(var t=0;t<e.elementCount;t++){var i={};i.target=n.getUint8(),i.index=0===i.target?n.getIndex(r.metadata.boneIndexSize):n.getIndex(r.metadata.morphIndexSize),e.elements.push(i)}return e},t=r.metadata;t.frameCount=n.getUint32(),r.frames=[];for(var i=0;i<t.frameCount;i++)r.frames.push(e())}(),function(){var e,t=r.metadata;t.rigidBodyCount=n.getUint32(),r.rigidBodies=[];for(var i=0;i<t.rigidBodyCount;i++)r.rigidBodies.push((e=void 0,(e={}).name=n.getTextBuffer(),e.englishName=n.getTextBuffer(),e.boneIndex=n.getIndex(r.metadata.boneIndexSize),e.groupIndex=n.getUint8(),e.groupTarget=n.getUint16(),e.shapeType=n.getUint8(),e.width=n.getFloat32(),e.height=n.getFloat32(),e.depth=n.getFloat32(),e.position=n.getFloat32Array(3),e.rotation=n.getFloat32Array(3),e.weight=n.getFloat32(),e.positionDamping=n.getFloat32(),e.rotationDamping=n.getFloat32(),e.restitution=n.getFloat32(),e.friction=n.getFloat32(),e.type=n.getUint8(),e))}(),function(){var e,t=r.metadata;t.constraintCount=n.getUint32(),r.constraints=[];for(var i=0;i<t.constraintCount;i++)r.constraints.push((e=void 0,(e={}).name=n.getTextBuffer(),e.englishName=n.getTextBuffer(),e.type=n.getUint8(),e.rigidBodyIndex1=n.getIndex(r.metadata.rigidBodyIndexSize),e.rigidBodyIndex2=n.getIndex(r.metadata.rigidBodyIndexSize),e.position=n.getFloat32Array(3),e.rotation=n.getFloat32Array(3),e.translationLimitation1=n.getFloat32Array(3),e.translationLimitation2=n.getFloat32Array(3),e.rotationLimitation1=n.getFloat32Array(3),e.rotationLimitation2=n.getFloat32Array(3),e.springPosition=n.getFloat32Array(3),e.springRotation=n.getFloat32Array(3),e))}(),!0===t&&this.leftToRightModel(r),r},l.prototype.parseVmd=function(e,t){var r={},n=new a(e);r.metadata={},r.metadata.coordinateSystem="left";return function(){var e=r.metadata;if(e.magic=n.getChars(30),"Vocaloid Motion Data 0002"!==e.magic)throw"VMD file magic is not Vocaloid Motion Data 0002, but "+e.magic;e.name=n.getSjisStringsAsUnicode(20)}(),function(){var e,t=r.metadata;t.motionCount=n.getUint32(),r.motions=[];for(var i=0;i<t.motionCount;i++)r.motions.push((e=void 0,(e={}).boneName=n.getSjisStringsAsUnicode(15),e.frameNum=n.getUint32(),e.position=n.getFloat32Array(3),e.rotation=n.getFloat32Array(4),e.interpolation=n.getUint8Array(64),e))}(),function(){var e,t=r.metadata;t.morphCount=n.getUint32(),r.morphs=[];for(var i=0;i<t.morphCount;i++)r.morphs.push((e=void 0,(e={}).morphName=n.getSjisStringsAsUnicode(15),e.frameNum=n.getUint32(),e.weight=n.getFloat32(),e))}(),function(){var e,t=r.metadata;t.cameraCount=n.getUint32(),r.cameras=[];for(var i=0;i<t.cameraCount;i++)r.cameras.push((e=void 0,(e={}).frameNum=n.getUint32(),e.distance=n.getFloat32(),e.position=n.getFloat32Array(3),e.rotation=n.getFloat32Array(3),e.interpolation=n.getUint8Array(24),e.fov=n.getUint32(),e.perspective=n.getUint8(),e))}(),!0===t&&this.leftToRightVmd(r),r},l.prototype.parseVpd=function(e,t){var r={metadata:{}};r.metadata.coordinateSystem="left",r.bones=[];var n=e.replace(/\/\/\w*(\r|\n|\r\n)/g,"").split(/\r|\n|\r\n/);function i(){throw"the file seems not vpd file."}return"Vocaloid Pose Data file"!==n[0]&&i(),n.length<4&&i(),r.metadata.parentFile=n[2],r.metadata.boneCount=parseInt(n[3]),function(){for(var e=/^\s*(Bone[0-9]+)\s*\{\s*(.*)$/,t=/^\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*;/,o=/^\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*,\s*(-?[0-9]+\.[0-9]+)\s*;/,a=/^\s*}/,s=r.bones,l=null,u=null,c=null,h=4;h<n.length;h++){var d,p=n[h];null!==(d=p.match(e))&&(null!==l&&i(),l=d[2]),null!==(d=p.match(t))&&(null!==u&&i(),u=[parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3])]),null!==(d=p.match(o))&&(null!==c&&i(),c=[parseFloat(d[1]),parseFloat(d[2]),parseFloat(d[3]),parseFloat(d[4])]),null!==(d=p.match(a))&&(null!==l&&null!==u&&null!==c||i(),s.push({name:l,translation:u,quaternion:c}),l=null,u=null,c=null)}null===l&&null===u&&null===c||i()}(),!0===t&&this.leftToRightVpd(r),r},l.prototype.mergeVmds=function(e){var t={metadata:{}};t.metadata.name=e[0].metadata.name,t.metadata.coordinateSystem=e[0].metadata.coordinateSystem,t.metadata.motionCount=0,t.metadata.morphCount=0,t.metadata.cameraCount=0,t.motions=[],t.morphs=[],t.cameras=[];for(var r=0;r<e.length;r++){var n=e[r];t.metadata.motionCount+=n.metadata.motionCount,t.metadata.morphCount+=n.metadata.morphCount,t.metadata.cameraCount+=n.metadata.cameraCount;for(var i=0;i<n.metadata.motionCount;i++)t.motions.push(n.motions[i]);for(i=0;i<n.metadata.morphCount;i++)t.morphs.push(n.morphs[i]);for(i=0;i<n.metadata.cameraCount;i++)t.cameras.push(n.cameras[i])}return t},l.prototype.leftToRightModel=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new s,r=0;r<e.metadata.vertexCount;r++)t.leftToRightVector3(e.vertices[r].position),t.leftToRightVector3(e.vertices[r].normal);for(r=0;r<e.metadata.faceCount;r++)t.leftToRightIndexOrder(e.faces[r].indices);for(r=0;r<e.metadata.boneCount;r++)t.leftToRightVector3(e.bones[r].position);for(r=0;r<e.metadata.morphCount;r++){var n=e.morphs[r];if("pmx"!==e.metadata.format||1===n.type)for(var i=0;i<n.elements.length;i++)t.leftToRightVector3(n.elements[i].position)}for(r=0;r<e.metadata.rigidBodyCount;r++)t.leftToRightVector3(e.rigidBodies[r].position),t.leftToRightEuler(e.rigidBodies[r].rotation);for(r=0;r<e.metadata.constraintCount;r++)t.leftToRightVector3(e.constraints[r].position),t.leftToRightEuler(e.constraints[r].rotation),t.leftToRightVector3Range(e.constraints[r].translationLimitation1,e.constraints[r].translationLimitation2),t.leftToRightEulerRange(e.constraints[r].rotationLimitation1,e.constraints[r].rotationLimitation2)}},l.prototype.leftToRightVmd=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new s,r=0;r<e.metadata.motionCount;r++)t.leftToRightVector3(e.motions[r].position),t.leftToRightQuaternion(e.motions[r].rotation);for(r=0;r<e.metadata.cameraCount;r++)t.leftToRightVector3(e.cameras[r].position),t.leftToRightEuler(e.cameras[r].rotation)}},l.prototype.leftToRightVpd=function(e){if("right"!==e.metadata.coordinateSystem){e.metadata.coordinateSystem="right";for(var t=new s,r=0;r<e.bones.length;r++)t.leftToRightVector3(e.bones[r].translation),t.leftToRightQuaternion(e.bones[r].quaternion)}};var u={CharsetEncoder:o,Parser:l};r.d(t,"a",function(){return c});var c=function(){function e(e){n.Loader.call(this,e),this.loader=new n.FileLoader(this.manager),this.parser=null,this.meshBuilder=new r(this.manager),this.animationBuilder=new s}e.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:e,setAnimationPath:function(e){return this.animationPath=e,this},load:function(e,t,r,i){var o,a=this.meshBuilder.setCrossOrigin(this.crossOrigin);o=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:n.LoaderUtils.extractUrlBase(e);var s=this._extractExtension(e).toLowerCase();"pmd"===s||"pmx"===s?this["pmd"===s?"loadPMD":"loadPMX"](e,function(e){t(a.build(e,o,r,i))},r,i):i&&i(new Error("THREE.MMDLoader: Unknown model file extension ."+s+"."))},loadAnimation:function(e,t,r,n,i){var o=this.animationBuilder;this.loadVMD(e,function(e){r(t.isCamera?o.buildCameraAnimation(e):o.build(e,t))},n,i)},loadWithAnimation:function(e,t,r,n,i){var o=this;this.load(e,function(e){o.loadAnimation(t,e,function(t){r({mesh:e,animation:t})},n,i)},n,i)},loadPMD:function(e,t,r,n){var i=this._getParser();this.loader.setMimeType(void 0).setPath(this.path).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(e,function(e){t(i.parsePmd(e,!0))},r,n)},loadPMX:function(e,t,r,n){var i=this._getParser();this.loader.setMimeType(void 0).setPath(this.path).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(e,function(e){t(i.parsePmx(e,!0))},r,n)},loadVMD:function(e,t,r,n){var i=Array.isArray(e)?e:[e],o=[],a=i.length,s=this._getParser();this.loader.setMimeType(void 0).setPath(this.animationPath).setResponseType("arraybuffer").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials);for(var l=0,u=i.length;l<u;l++)this.loader.load(i[l],function(e){o.push(s.parseVmd(e,!0)),o.length===a&&t(s.mergeVmds(o))},r,n)},loadVPD:function(e,t,r,n,i){var o=this._getParser();this.loader.setMimeType(t?void 0:"text/plain; charset=shift_jis").setPath(this.animationPath).setResponseType("text").setRequestHeader(this.requestHeader).setWithCredentials(this.withCredentials).load(e,function(e){r(o.parseVpd(e,!0))},n,i)},_extractExtension:function(e){var t=e.lastIndexOf(".");return t<0?"":e.slice(t+1)},_getParser:function(){if(null===this.parser){if(void 0===u)throw new Error("THREE.MMDLoader: Import MMDParser https://github.com/takahirox/mmd-parser");this.parser=new u.Parser}return this.parser}});var t=["data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/bWiiMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh8aBHZBl14e8wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOUlEQVRYR+3WMREAMAwDsYY/yoDI7MLwIiP40+RJklfcCCBAgAABAgTqArfb/QMCCBAgQIAAgbbAB3z/e0F3js2cAAAAAElFTkSuQmCC","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAN0lEQVRYR+3WQREAMBACsZ5/B5ilMvgEBTt5cW37hjsBBAgQIECAwFwgyfYPCCBAgAABAgTWAh81dWyx0gFwKAAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAOklEQVRYR+3WoREAMAwDsWb/UQtCy9wxTOQJ/oQ8SXKKGwEECBAgQIBAXeDt7f4BAQQIECBAgEBb4AOz8Hzx7WLY4wAAAABJRU5ErkJggg==","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAABPUlEQVRYR+1XwW7CMAy1+f9fZOMysSEOEweEOPRNdm3HbdOyIhAcklPrOs/PLy9RygBALxzcCDQFmgJNgaZAU6Ap0BR4PwX8gsRMVLssMRH5HcpzJEaWL7EVg9F1IHRlyqQohgVr4FGUlUcMJSjcUlDw0zvjeun70cLWmneoyf7NgBTQSniBTQQSuJAZsOnnaczjIMb5hCiuHKxokCrJfVnrctyZL0PkJAJe1HMil4nxeyi3Ypfn1kX51jpPvo/JeCNC4PhVdHdJw2XjBR8brF8PEIhNVn12AgP7uHsTBguBn53MUZCqv7Lp07Pn5k1Ro+uWmUNn7D+M57rtk7aG0Vo73xyF/fbFf0bPJjDXngnGocDTdFhygZjwUQrMNrDcmZlQT50VJ/g/UwNyHpu778+yW+/ksOz/BFo54P4AsUXMfRq7XWsAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACMElEQVRYR+2Xv4pTQRTGf2dubhLdICiii2KnYKHVolhauKWPoGAnNr6BD6CvIVaihYuI2i1ia0BY0MZGRHQXjZj/mSPnnskfNWiWZUlzJ5k7M2cm833nO5Mziej2DWWJRUoCpQKlAntSQCqgw39/iUWAGmh37jrRnVsKlgpiqmkoGVABA7E57fvY+pJDdgKqF6HzFCSADkDq+F6AHABtQ+UMVE5D7zXod7fFNhTEckTbj5XQgHzNN+5tQvc5NG7C6BNkp6D3EmpXHDR+dQAjFLchW3VS9rlw3JBh+B7ys5Cf9z0GW1C/7P32AyBAOAz1q4jGliIH3YPuBnSfQX4OGreTIgEYQb/pBDtPnEQ4CivXYPAWBk13oHrB54yA9QuSn2H4AcKRpEILDt0BUzj+RLR1V5EqjD66NPRBVpLcQwjHoHYJOhsQv6U4mnzmrIXJCFr4LDwm/xBUoboG9XX4cc9VKdYoSA2yk5NQLJaKDUjTBoveG3Z2TElTxwjNK4M3LEZgUdDdruvcXzKBpStgp2NPiWi3ks9ZXxIoFVi+AvHLdc9TqtjL3/aYjpPlrzOcEnK62Szhimdd7xX232zFDTgtxezOu3WNMRLjiKgjtOhHVMd1loynVHvOgjuIIJMaELEqhJAV/RCSLbWTcfPFakFgFlALTRRvx+ok6Hlp/Q+v3fmx90bMyUzaEAhmM3KvHlXTL5DxnbGf/1M8RNNACLL5MNtPxP/mypJAqcDSFfgFhpYqWUzhTEAAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII=","data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAL0lEQVRYR+3QQREAAAzCsOFfNJPBJ1XQS9r2hsUAAQIECBAgQIAAAQIECBAgsBZ4MUx/ofm2I/kAAAAASUVORK5CYII="];function r(e){this.geometryBuilder=new o,this.materialBuilder=new a(e)}function o(){}function a(e){this.manager=e,this.textureLoader=new n.TextureLoader(this.manager),this.tgaLoader=null}function s(){}function l(e,t,r,i,o){n.Interpolant.call(this,e,t,r,i),this.interpolationParams=o}return r.prototype={constructor:r,crossOrigin:"anonymous",setCrossOrigin:function(e){return this.crossOrigin=e,this},build:function(e,t,r,i){var o=this.geometryBuilder.build(e),a=this.materialBuilder.setCrossOrigin(this.crossOrigin).setResourcePath(t).build(e,o,r,i),s=new n.SkinnedMesh(o,a),l=new n.Skeleton(function(e){var t,r,i,o,a=e.geometry,s=[];if(a&&void 0!==a.bones){for(i=0,o=a.bones.length;i<o;i++)r=a.bones[i],t=new n.Bone,s.push(t),t.name=r.name,t.position.fromArray(r.pos),t.quaternion.fromArray(r.rotq),void 0!==r.scl&&t.scale.fromArray(r.scl);for(i=0,o=a.bones.length;i<o;i++)-1!==(r=a.bones[i]).parent&&null!==r.parent&&void 0!==s[r.parent]?s[r.parent].add(s[i]):e.add(s[i])}return e.updateMatrixWorld(!0),s}(s));return s.bind(l),s}},o.prototype={constructor:o,build:function(e){for(var t=[],r=[],i=[],o=[],a=[],s=[],l=[],u=[],c=[],h=[],d=[],p=[],f=[],m=[],v=0,g={},y=0;y<e.metadata.vertexCount;y++){for(var b=e.vertices[y],w=0,x=b.position.length;w<x;w++)t.push(b.position[w]);for(w=0,x=b.normal.length;w<x;w++)i.push(b.normal[w]);for(w=0,x=b.uv.length;w<x;w++)r.push(b.uv[w]);for(w=0;w<4;w++)l.push(b.skinIndices.length-1>=w?b.skinIndices[w]:0);for(w=0;w<4;w++)u.push(b.skinWeights.length-1>=w?b.skinWeights[w]:0)}for(y=0;y<e.metadata.faceCount;y++){var _=e.faces[y];for(w=0,x=_.indices.length;w<x;w++)o.push(_.indices[w])}for(y=0;y<e.metadata.materialCount;y++){var T=e.materials[y];a.push({offset:3*v,count:3*T.faceCount}),v+=T.faceCount}for(y=0;y<e.metadata.rigidBodyCount;y++){var A=e.rigidBodies[y],S=g[A.boneIndex];S=void 0===S?A.type:Math.max(A.type,S),g[A.boneIndex]=S}for(y=0;y<e.metadata.boneCount;y++){-1!==(H={parent:(L=e.bones[y]).parentIndex,name:L.name,pos:L.position.slice(0,3),rotq:[0,0,0,1],scl:[1,1,1],rigidBodyType:void 0!==g[y]?g[y]:-1}).parent&&(H.pos[0]-=e.bones[H.parent].position[0],H.pos[1]-=e.bones[H.parent].position[1],H.pos[2]-=e.bones[H.parent].position[2]),s.push(H)}if("pmd"===e.metadata.format)for(y=0;y<e.metadata.ikCount;y++){var E={target:(C=e.iks[y]).target,effector:C.effector,iteration:C.iteration,maxAngle:4*C.maxAngle,links:[]};for(w=0,x=C.links.length;w<x;w++){(M={}).index=C.links[w].index,M.enabled=!0,e.bones[M.index].name.indexOf("ひざ")>=0&&(M.limitation=new n.Vector3(1,0,0)),E.links.push(M)}d.push(E)}else for(y=0;y<e.metadata.boneCount;y++){var C;if(void 0!==(C=e.bones[y].ik)){for(E={target:y,effector:C.effector,iteration:C.iteration,maxAngle:C.maxAngle,links:[]},w=0,x=C.links.length;w<x;w++){var M;if((M={}).index=C.links[w].index,M.enabled=!0,1===C.links[w].angleLimitation){var N=C.links[w].lowerLimitationAngle,O=C.links[w].upperLimitationAngle,R=-O[0],k=-O[1];O[0]=-N[0],O[1]=-N[1],N[0]=R,N[1]=k,M.rotationMin=(new n.Vector3).fromArray(N),M.rotationMax=(new n.Vector3).fromArray(O)}E.links.push(M)}d.push(E)}}if("pmx"===e.metadata.format){for(y=0;y<e.metadata.boneCount;y++){var L,I=(L=e.bones[y]).grant;if(void 0!==I){E={index:y,parentIndex:I.parentIndex,ratio:I.ratio,isLocal:I.isLocal,affectRotation:I.affectRotation,affectPosition:I.affectPosition,transformationClass:L.transformationClass};p.push(E)}}p.sort(function(e,t){return e.transformationClass-t.transformationClass})}function P(t,r,n){for(var i=0;i<r.elementCount;i++){var o,a=r.elements[i];o="pmd"===e.metadata.format?e.morphs[0].elements[a.index].index:a.index,t.array[3*o+0]+=a.position[0]*n,t.array[3*o+1]+=a.position[1]*n,t.array[3*o+2]+=a.position[2]*n}}for(y=0;y<e.metadata.morphCount;y++){var B=e.morphs[y],D={name:B.name},U=new n.Float32BufferAttribute(3*e.metadata.vertexCount,3);U.name=B.name;for(w=0;w<3*e.metadata.vertexCount;w++)U.array[w]=t[w];if("pmd"===e.metadata.format)0!==y&&P(U,B,1);else if(0===B.type)for(w=0;w<B.elementCount;w++){var F=e.morphs[B.elements[w].index],z=B.elements[w].ratio;1===F.type&&P(U,F,z)}else 1===B.type?P(U,B,1):2===B.type||3===B.type||4===B.type||5===B.type||6===B.type||7===B.type||B.type;c.push(D),h.push(U)}for(y=0;y<e.metadata.rigidBodyCount;y++){var V=e.rigidBodies[y];D={};for(var j in V)D[j]=V[j];if("pmx"===e.metadata.format&&-1!==D.boneIndex){var H=e.bones[D.boneIndex];D.position[0]-=H.position[0],D.position[1]-=H.position[1],D.position[2]-=H.position[2]}f.push(D)}for(y=0;y<e.metadata.constraintCount;y++){var G=e.constraints[y];D={};for(var j in G)D[j]=G[j];var X=f[D.rigidBodyIndex1],Y=f[D.rigidBodyIndex2];0!==X.type&&2===Y.type&&-1!==X.boneIndex&&-1!==Y.boneIndex&&e.bones[Y.boneIndex].parentIndex===X.boneIndex&&(Y.type=1),m.push(D)}var W=new n.BufferGeometry;W.setAttribute("position",new n.Float32BufferAttribute(t,3)),W.setAttribute("normal",new n.Float32BufferAttribute(i,3)),W.setAttribute("uv",new n.Float32BufferAttribute(r,2)),W.setAttribute("skinIndex",new n.Uint16BufferAttribute(l,4)),W.setAttribute("skinWeight",new n.Float32BufferAttribute(u,4)),W.setIndex(o);y=0;for(var J=a.length;y<J;y++)W.addGroup(a[y].offset,a[y].count,y);return W.bones=s,W.morphTargets=c,W.morphAttributes.position=h,W.morphTargetsRelative=!1,W.userData.MMD={bones:s,iks:d,grants:p,rigidBodies:f,constraints:m,format:e.metadata.format},W.computeBoundingSphere(),W}},a.prototype={constructor:a,crossOrigin:"anonymous",resourcePath:void 0,setCrossOrigin:function(e){return this.crossOrigin=e,this},setResourcePath:function(e){return this.resourcePath=e,this},build:function(e,t){var r=[],i={};this.textureLoader.setCrossOrigin(this.crossOrigin);for(var o=0;o<e.metadata.materialCount;o++){var a=e.materials[o],s={userData:{}};if(void 0!==a.name&&(s.name=a.name),s.color=(new n.Color).fromArray(a.diffuse),s.opacity=a.diffuse[3],s.emissive=(new n.Color).fromArray(a.ambient),s.transparent=1!==s.opacity,s.skinning=t.bones.length>0,s.morphTargets=t.morphTargets.length>0,s.fog=!0,s.blending=n.CustomBlending,s.blendSrc=n.SrcAlphaFactor,s.blendDst=n.OneMinusSrcAlphaFactor,s.blendSrcAlpha=n.SrcAlphaFactor,s.blendDstAlpha=n.DstAlphaFactor,"pmx"===e.metadata.format&&1==(1&a.flag)?s.side=n.DoubleSide:s.side=1===s.opacity?n.FrontSide:n.DoubleSide,"pmd"===e.metadata.format){if(a.fileName){var l=a.fileName.split("*");if(s.map=this._loadTexture(l[0],i),l.length>1){var u=l[1].slice(-4).toLowerCase();s.envMap=this._loadTexture(l[1],i),s.combine=".sph"===u?n.MultiplyOperation:n.AddOperation}}var c=-1===a.toonIndex?"toon00.bmp":e.toonTextures[a.toonIndex].fileName;s.gradientMap=this._loadTexture(c,i,{isToonTexture:!0,isDefaultToonTexture:this._isDefaultToonTexture(c)}),s.userData.outlineParameters={thickness:1===a.edgeFlag?.003:0,color:[0,0,0],alpha:1,visible:1===a.edgeFlag}}else{var h;-1!==a.textureIndex&&(s.map=this._loadTexture(e.textures[a.textureIndex],i)),-1===a.envTextureIndex||1!==a.envFlag&&2!=a.envFlag||(s.envMap=this._loadTexture(e.textures[a.envTextureIndex],i),s.combine=1===a.envFlag?n.MultiplyOperation:n.AddOperation),-1===a.toonIndex||0!==a.toonFlag?(c="toon"+("0"+(a.toonIndex+1)).slice(-2)+".bmp",h=!0):(c=e.textures[a.toonIndex],h=!1),s.gradientMap=this._loadTexture(c,i,{isToonTexture:!0,isDefaultToonTexture:h}),s.userData.outlineParameters={thickness:a.edgeSize/300,color:a.edgeColor.slice(0,3),alpha:a.edgeColor[3],visible:0!=(16&a.flag)&&a.edgeSize>0}}void 0!==s.map&&(s.transparent||this._checkImageTransparency(s.map,t,o),s.emissive.multiplyScalar(.2)),r.push(new n.MeshToonMaterial(s))}if("pmx"===e.metadata.format)for(var d=function(e,t){for(var r=0,n=e.length;r<n;r++){var i=e[r];if(-1!==i.index){var o=t[i.index];o.opacity!==i.diffuse[3]&&(o.transparent=!0)}}},p=(o=0,e.morphs.length);o<p;o++){var f=e.morphs[o],m=f.elements;if(0===f.type)for(var v=0,g=m.length;v<g;v++){var y=e.morphs[m[v].index];8===y.type&&d(y.elements,r)}else 8===f.type&&d(m,r)}return r},_getTGALoader:function(){if(null===this.tgaLoader){if(void 0===i.a)throw new Error("THREE.MMDLoader: Import TGALoader");this.tgaLoader=new i.a(this.manager)}return this.tgaLoader},_isDefaultToonTexture:function(e){return 10===e.length&&/toon(10|0[0-9])\.bmp/.test(e)},_loadTexture:function(e,r,i,o,a){var s,l=this;if(!0===(i=i||{}).isDefaultToonTexture){var u;try{u=parseInt(e.match(/toon([0-9]{2})\.bmp$/)[1])}catch(t){console.warn("THREE.MMDLoader: "+e+" seems like a not right default texture path. Using toon00.bmp instead."),u=0}s=t[u]}else s=this.resourcePath+e;if(void 0!==r[s])return r[s];var c=this.manager.getHandler(s);null===c&&(c=".tga"===e.slice(-4).toLowerCase()?this._getTGALoader():this.textureLoader);var h=c.load(s,function(e){!0===i.isToonTexture&&(e.image=l._getRotatedImage(e.image),e.magFilter=n.NearestFilter,e.minFilter=n.NearestFilter),e.flipY=!1,e.wrapS=n.RepeatWrapping,e.wrapT=n.RepeatWrapping;for(var t=0;t<h.readyCallbacks.length;t++)h.readyCallbacks[t](h);delete h.readyCallbacks},o,a);return h.readyCallbacks=[],r[s]=h,h},_getRotatedImage:function(e){var t=document.createElement("canvas"),r=t.getContext("2d"),n=e.width,i=e.height;return t.width=n,t.height=i,r.clearRect(0,0,n,i),r.translate(n/2,i/2),r.rotate(.5*Math.PI),r.translate(-n/2,-i/2),r.drawImage(e,0,0),r.getImageData(0,0,n,i)},_checkImageTransparency:function(e,t,r){e.readyCallbacks.push(function(n){function i(e,t){var r=e.width,n=e.height,i=Math.round(t.x*r)%r,o=Math.round(t.y*n)%n;i<0&&(i+=r),o<0&&(o+=n);var a=o*r+i;return e.data[4*a+3]}var o=void 0!==n.image.data?n.image:function(e){var t=document.createElement("canvas");t.width=e.width,t.height=e.height;var r=t.getContext("2d");return r.drawImage(e,0,0),r.getImageData(0,0,t.width,t.height)}(n.image),a=t.groups[r];(function(e,t,r){var n=e.width,o=e.height;if(e.data.length/(n*o)!=4)return!1;for(var a=0;a<r.length;a+=3){for(var s={x:0,y:0},l=0;l<3;l++){var u=r[3*a+l],c={x:t[2*u+0],y:t[2*u+1]};if(i(e,c)<253)return!0;s.x+=c.x,s.y+=c.y}if(s.x/=3,s.y/=3,i(e,s)<253)return!0}return!1})(o,t.attributes.uv.array,t.index.array.slice(a.start,a.start+a.count))&&(e.transparent=!0)})}},s.prototype={constructor:s,build:function(e,t){for(var r=this.buildSkeletalAnimation(e,t).tracks,i=this.buildMorphAnimation(e,t).tracks,o=0,a=i.length;o<a;o++)r.push(i[o]);return new n.AnimationClip("",-1,r)},buildSkeletalAnimation:function(e,t){function r(e,t,r){e.push(t[r+0]/127),e.push(t[r+8]/127),e.push(t[r+4]/127),e.push(t[r+12]/127)}for(var i=[],o={},a=t.skeleton.bones,s={},l=0,u=a.length;l<u;l++)s[a[l].name]=!0;for(l=0;l<e.metadata.motionCount;l++){var c=e.motions[l],h=c.boneName;void 0!==s[h]&&(o[h]=o[h]||[],o[h].push(c))}for(var d in o){var p=o[d];p.sort(function(e,t){return e.frameNum-t.frameNum});var f=[],m=[],v=[],g=[],y=[],b=t.skeleton.getBoneByName(d).position.toArray();for(l=0,u=p.length;l<u;l++){var w=p[l].frameNum/30,x=p[l].position,_=p[l].rotation,T=p[l].interpolation;f.push(w);for(var A=0;A<3;A++)m.push(b[A]+x[A]);for(A=0;A<4;A++)v.push(_[A]);for(A=0;A<3;A++)r(g,T,A);r(y,T,3)}var S=".bones["+d+"]";i.push(this._createTrack(S+".position",n.VectorKeyframeTrack,f,m,g)),i.push(this._createTrack(S+".quaternion",n.QuaternionKeyframeTrack,f,v,y))}return new n.AnimationClip("",-1,i)},buildMorphAnimation:function(e,t){for(var r=[],i={},o=t.morphTargetDictionary,a=0;a<e.metadata.morphCount;a++){var s=e.morphs[a],l=s.morphName;void 0!==o[l]&&(i[l]=i[l]||[],i[l].push(s))}for(var u in i){var c=i[u];c.sort(function(e,t){return e.frameNum-t.frameNum});for(var h=[],d=[],p=(a=0,c.length);a<p;a++)h.push(c[a].frameNum/30),d.push(c[a].weight);r.push(new n.NumberKeyframeTrack(".morphTargetInfluences["+o[u]+"]",h,d))}return new n.AnimationClip("",-1,r)},buildCameraAnimation:function(e){function t(e,t){e.push(t.x),e.push(t.y),e.push(t.z)}function r(e,t,r){e.push(t[4*r+0]/127),e.push(t[4*r+1]/127),e.push(t[4*r+2]/127),e.push(t[4*r+3]/127)}var i=[],o=void 0===e.cameras?[]:e.cameras.slice();o.sort(function(e,t){return e.frameNum-t.frameNum});for(var a,s,l=[],u=[],c=[],h=[],d=[],p=[],f=[],m=[],v=[],g=new n.Quaternion,y=new n.Euler,b=new n.Vector3,w=new n.Vector3,x=0,_=o.length;x<_;x++){var T=o[x],A=T.frameNum/30,S=T.position,E=T.rotation,C=T.distance,M=T.fov,N=T.interpolation;l.push(A),b.set(0,0,-C),w.set(S[0],S[1],S[2]),y.set(-E[0],-E[1],-E[2]),g.setFromEuler(y),b.add(w),b.applyQuaternion(g),t(u,w),(a=c).push((s=g).x),a.push(s.y),a.push(s.z),a.push(s.w),t(h,b),d.push(M);for(var O=0;O<3;O++)r(p,N,O);r(f,N,3);for(O=0;O<3;O++)r(m,N,4);r(v,N,5)}return(i=[]).push(this._createTrack("target.position",n.VectorKeyframeTrack,l,u,p)),i.push(this._createTrack(".quaternion",n.QuaternionKeyframeTrack,l,c,f)),i.push(this._createTrack(".position",n.VectorKeyframeTrack,l,h,m)),i.push(this._createTrack(".fov",n.NumberKeyframeTrack,l,d,v)),new n.AnimationClip("",-1,i)},_createTrack:function(e,t,r,n,i){if(r.length>2){r=r.slice(),n=n.slice(),i=i.slice();for(var o=n.length/r.length,a=i.length/r.length,s=1,u=2,c=r.length;u<c;u++){for(var h=0;h<o;h++)if(n[s*o+h]!==n[(s-1)*o+h]||n[s*o+h]!==n[u*o+h]){s++;break}if(u>s){r[s]=r[u];for(h=0;h<o;h++)n[s*o+h]=n[u*o+h];for(h=0;h<a;h++)i[s*a+h]=i[u*a+h]}}r.length=s+1,n.length=(s+1)*o,i.length=(s+1)*a}var d=new t(e,r,n);return d.createInterpolant=function(e){return new l(this.times,this.values,this.getValueSize(),e,new Float32Array(i))},d}},l.prototype=Object.assign(Object.create(n.Interpolant.prototype),{constructor:l,interpolate_:function(e,t,r,i){var o=this.resultBuffer,a=this.sampleValues,s=this.valueSize,l=this.interpolationParams,u=e*s,c=u-s,h=i-t<.05?0:(r-t)/(i-t);if(4===s){var d=l[4*e+0],p=l[4*e+1],f=l[4*e+2],m=l[4*e+3],v=this._calculate(d,p,f,m,h);n.Quaternion.slerpFlat(o,0,a,c,a,u,v)}else if(3===s)for(var g=0;g!==s;++g){d=l[12*e+4*g+0],p=l[12*e+4*g+1],f=l[12*e+4*g+2],m=l[12*e+4*g+3],v=this._calculate(d,p,f,m,h);o[g]=a[c+g]*(1-v)+a[u+g]*v}else{d=l[4*e+0],p=l[4*e+1],f=l[4*e+2],m=l[4*e+3],v=this._calculate(d,p,f,m,h);o[0]=a[c]*(1-v)+a[u]*v}return o},_calculate:function(e,t,r,n,i){for(var o,a,s,l=.5,u=l,c=1-u,h=Math,d=0;d<15;d++){var p=(o=3*c*c*u)*e+(a=3*c*u*u)*t+(s=u*u*u)-i;if(h.abs(p)<1e-5)break;l/=2,c=1-(u+=p<0?l:-l)}return o*r+a*n+s}}),e}()},wIBv:function(e,t,r){"use strict";r.d(t,"b",function(){return i}),r.d(t,"a",function(){return o});var n=r("6+nK"),i=function(e,t){var r,i,o,a,s,l;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new n.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!0,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:n.MOUSE.ROTATE,MIDDLE:n.MOUSE.DOLLY,RIGHT:n.MOUSE.PAN},this.touches={ONE:n.TOUCH.ROTATE,TWO:n.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return v.phi},this.getAzimuthalAngle=function(){return v.theta},this.saveState=function(){u.target0.copy(u.target),u.position0.copy(u.object.position),u.zoom0=u.object.zoom},this.reset=function(){u.target.copy(u.target0),u.object.position.copy(u.position0),u.object.zoom=u.zoom0,u.object.updateProjectionMatrix(),u.dispatchEvent(c),u.update(),f=p.NONE},this.update=(r=new n.Vector3,i=(new n.Quaternion).setFromUnitVectors(e.up,new n.Vector3(0,1,0)),o=i.clone().invert(),a=new n.Vector3,s=new n.Quaternion,l=2*Math.PI,function(){var e=u.object.position;r.copy(e).sub(u.target),r.applyQuaternion(i),v.setFromVector3(r),u.autoRotate&&f===p.NONE&&R(2*Math.PI/60/60*u.autoRotateSpeed),u.enableDamping?(v.theta+=g.theta*u.dampingFactor,v.phi+=g.phi*u.dampingFactor):(v.theta+=g.theta,v.phi+=g.phi);var t=u.minAzimuthAngle,n=u.maxAzimuthAngle;return isFinite(t)&&isFinite(n)&&(t<-Math.PI?t+=l:t>Math.PI&&(t-=l),n<-Math.PI?n+=l:n>Math.PI&&(n-=l),v.theta=t<=n?Math.max(t,Math.min(n,v.theta)):v.theta>(t+n)/2?Math.max(t,v.theta):Math.min(n,v.theta)),v.phi=Math.max(u.minPolarAngle,Math.min(u.maxPolarAngle,v.phi)),v.makeSafe(),v.radius*=y,v.radius=Math.max(u.minDistance,Math.min(u.maxDistance,v.radius)),!0===u.enableDamping?u.target.addScaledVector(b,u.dampingFactor):u.target.add(b),r.setFromSpherical(v),r.applyQuaternion(o),e.copy(u.target).add(r),u.object.lookAt(u.target),!0===u.enableDamping?(g.theta*=1-u.dampingFactor,g.phi*=1-u.dampingFactor,b.multiplyScalar(1-u.dampingFactor)):(g.set(0,0,0),b.set(0,0,0)),y=1,!!(w||a.distanceToSquared(u.object.position)>m||8*(1-s.dot(u.object.quaternion))>m)&&(u.dispatchEvent(c),a.copy(u.object.position),s.copy(u.object.quaternion),w=!1,!0)}),this.dispose=function(){u.domElement.removeEventListener("contextmenu",te,!1),u.domElement.removeEventListener("pointerdown",W,!1),u.domElement.removeEventListener("wheel",K,!1),u.domElement.removeEventListener("touchstart",Z,!1),u.domElement.removeEventListener("touchend",ee,!1),u.domElement.removeEventListener("touchmove",$,!1),u.domElement.ownerDocument.removeEventListener("pointermove",J,!1),u.domElement.ownerDocument.removeEventListener("pointerup",q,!1),u.domElement.removeEventListener("keydown",Q,!1)};var u=this,c={type:"change"},h={type:"start"},d={type:"end"},p={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},f=p.NONE,m=1e-6,v=new n.Spherical,g=new n.Spherical,y=1,b=new n.Vector3,w=!1,x=new n.Vector2,_=new n.Vector2,T=new n.Vector2,A=new n.Vector2,S=new n.Vector2,E=new n.Vector2,C=new n.Vector2,M=new n.Vector2,N=new n.Vector2;function O(){return Math.pow(.95,u.zoomSpeed)}function R(e){g.theta-=e}function k(e){g.phi-=e}var L,I=(L=new n.Vector3,function(e,t){L.setFromMatrixColumn(t,0),L.multiplyScalar(-e),b.add(L)}),P=function(){var e=new n.Vector3;return function(t,r){!0===u.screenSpacePanning?e.setFromMatrixColumn(r,1):(e.setFromMatrixColumn(r,0),e.crossVectors(u.object.up,e)),e.multiplyScalar(t),b.add(e)}}(),B=function(){var e=new n.Vector3;return function(t,r){var n=u.domElement;if(u.object.isPerspectiveCamera){var i=u.object.position;e.copy(i).sub(u.target);var o=e.length();o*=Math.tan(u.object.fov/2*Math.PI/180),I(2*t*o/n.clientHeight,u.object.matrix),P(2*r*o/n.clientHeight,u.object.matrix)}else u.object.isOrthographicCamera?(I(t*(u.object.right-u.object.left)/u.object.zoom/n.clientWidth,u.object.matrix),P(r*(u.object.top-u.object.bottom)/u.object.zoom/n.clientHeight,u.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),u.enablePan=!1)}}();function D(e){u.object.isPerspectiveCamera?y/=e:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom*e)),u.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function U(e){u.object.isPerspectiveCamera?y*=e:u.object.isOrthographicCamera?(u.object.zoom=Math.max(u.minZoom,Math.min(u.maxZoom,u.object.zoom/e)),u.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),u.enableZoom=!1)}function F(e){x.set(e.clientX,e.clientY)}function z(e){A.set(e.clientX,e.clientY)}function V(e){if(1==e.touches.length)x.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);x.set(t,r)}}function j(e){if(1==e.touches.length)A.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);A.set(t,r)}}function H(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);C.set(0,n)}function G(e){if(1==e.touches.length)_.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);_.set(t,r)}T.subVectors(_,x).multiplyScalar(u.rotateSpeed);var n=u.domElement;R(2*Math.PI*T.x/n.clientHeight),k(2*Math.PI*T.y/n.clientHeight),x.copy(_)}function X(e){if(1==e.touches.length)S.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),r=.5*(e.touches[0].pageY+e.touches[1].pageY);S.set(t,r)}E.subVectors(S,A).multiplyScalar(u.panSpeed),B(E.x,E.y),A.copy(S)}function Y(e){var t=e.touches[0].pageX-e.touches[1].pageX,r=e.touches[0].pageY-e.touches[1].pageY,n=Math.sqrt(t*t+r*r);M.set(0,n),N.set(0,Math.pow(M.y/C.y,u.zoomSpeed)),D(N.y),C.copy(M)}function W(e){if(!1!==u.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){var t;switch(e.preventDefault(),u.domElement.focus?u.domElement.focus():window.focus(),e.button){case 0:t=u.mouseButtons.LEFT;break;case 1:t=u.mouseButtons.MIDDLE;break;case 2:t=u.mouseButtons.RIGHT;break;default:t=-1}switch(t){case n.MOUSE.DOLLY:if(!1===u.enableZoom)return;!function(e){C.set(e.clientX,e.clientY)}(e),f=p.DOLLY;break;case n.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===u.enablePan)return;z(e),f=p.PAN}else{if(!1===u.enableRotate)return;F(e),f=p.ROTATE}break;case n.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===u.enableRotate)return;F(e),f=p.ROTATE}else{if(!1===u.enablePan)return;z(e),f=p.PAN}break;default:f=p.NONE}f!==p.NONE&&(u.domElement.ownerDocument.addEventListener("pointermove",J,!1),u.domElement.ownerDocument.addEventListener("pointerup",q,!1),u.dispatchEvent(h))}(e)}}function J(e){if(!1!==u.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===u.enabled)return;switch(e.preventDefault(),f){case p.ROTATE:if(!1===u.enableRotate)return;!function(e){_.set(e.clientX,e.clientY),T.subVectors(_,x).multiplyScalar(u.rotateSpeed);var t=u.domElement;R(2*Math.PI*T.x/t.clientHeight),k(2*Math.PI*T.y/t.clientHeight),x.copy(_),u.update()}(e);break;case p.DOLLY:if(!1===u.enableZoom)return;!function(e){M.set(e.clientX,e.clientY),N.subVectors(M,C),N.y>0?D(O()):N.y<0&&U(O()),C.copy(M),u.update()}(e);break;case p.PAN:if(!1===u.enablePan)return;!function(e){S.set(e.clientX,e.clientY),E.subVectors(S,A).multiplyScalar(u.panSpeed),B(E.x,E.y),A.copy(S),u.update()}(e)}}(e)}}function q(e){if(!1!==u.enabled)switch(e.pointerType){case"mouse":case"pen":!function(e){if(!1===u.enabled)return;u.domElement.ownerDocument.removeEventListener("pointermove",J,!1),u.domElement.ownerDocument.removeEventListener("pointerup",q,!1),u.dispatchEvent(d),f=p.NONE}()}}function K(e){!1===u.enabled||!1===u.enableZoom||f!==p.NONE&&f!==p.ROTATE||(e.preventDefault(),e.stopPropagation(),u.dispatchEvent(h),function(e){e.deltaY<0?U(O()):e.deltaY>0&&D(O()),u.update()}(e),u.dispatchEvent(d))}function Q(e){!1!==u.enabled&&!1!==u.enableKeys&&!1!==u.enablePan&&function(e){var t=!1;switch(e.keyCode){case u.keys.UP:B(0,u.keyPanSpeed),t=!0;break;case u.keys.BOTTOM:B(0,-u.keyPanSpeed),t=!0;break;case u.keys.LEFT:B(u.keyPanSpeed,0),t=!0;break;case u.keys.RIGHT:B(-u.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),u.update())}(e)}function Z(e){if(!1!==u.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(u.touches.ONE){case n.TOUCH.ROTATE:if(!1===u.enableRotate)return;V(e),f=p.TOUCH_ROTATE;break;case n.TOUCH.PAN:if(!1===u.enablePan)return;j(e),f=p.TOUCH_PAN;break;default:f=p.NONE}break;case 2:switch(u.touches.TWO){case n.TOUCH.DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;!function(e){u.enableZoom&&H(e),u.enablePan&&j(e)}(e),f=p.TOUCH_DOLLY_PAN;break;case n.TOUCH.DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;!function(e){u.enableZoom&&H(e),u.enableRotate&&V(e)}(e),f=p.TOUCH_DOLLY_ROTATE;break;default:f=p.NONE}break;default:f=p.NONE}f!==p.NONE&&u.dispatchEvent(h)}}function $(e){if(!1!==u.enabled)switch(e.preventDefault(),e.stopPropagation(),f){case p.TOUCH_ROTATE:if(!1===u.enableRotate)return;G(e),u.update();break;case p.TOUCH_PAN:if(!1===u.enablePan)return;X(e),u.update();break;case p.TOUCH_DOLLY_PAN:if(!1===u.enableZoom&&!1===u.enablePan)return;!function(e){u.enableZoom&&Y(e),u.enablePan&&X(e)}(e),u.update();break;case p.TOUCH_DOLLY_ROTATE:if(!1===u.enableZoom&&!1===u.enableRotate)return;!function(e){u.enableZoom&&Y(e),u.enableRotate&&G(e)}(e),u.update();break;default:f=p.NONE}}function ee(e){!1!==u.enabled&&(u.dispatchEvent(d),f=p.NONE)}function te(e){!1!==u.enabled&&e.preventDefault()}u.domElement.addEventListener("contextmenu",te,!1),u.domElement.addEventListener("pointerdown",W,!1),u.domElement.addEventListener("wheel",K,!1),u.domElement.addEventListener("touchstart",Z,!1),u.domElement.addEventListener("touchend",ee,!1),u.domElement.addEventListener("touchmove",$,!1),u.domElement.addEventListener("keydown",Q,!1),this.update()};i.prototype=Object.create(n.EventDispatcher.prototype),i.prototype.constructor=i;var o=function(e,t){i.call(this,e,t),this.screenSpacePanning=!1,this.mouseButtons.LEFT=n.MOUSE.PAN,this.mouseButtons.RIGHT=n.MOUSE.ROTATE,this.touches.ONE=n.TOUCH.PAN,this.touches.TWO=n.TOUCH.DOLLY_ROTATE};o.prototype=Object.create(n.EventDispatcher.prototype),o.prototype.constructor=o},xTnh:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var n=function(){for(var e=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],t=0;t<256;t++)e[256+t]=e[t];function r(e){return e*e*e*(e*(6*e-15)+10)}function n(e,t,r){return t+e*(r-t)}function i(e,t,r,n){var i=15&e,o=i<8?t:r,a=i<4?r:12==i||14==i?t:n;return(0==(1&i)?o:-o)+(0==(2&i)?a:-a)}return{noise:function(t,o,a){var s=Math.floor(t),l=Math.floor(o),u=Math.floor(a),c=255&s,h=255&l,d=255&u,p=(t-=s)-1,f=(o-=l)-1,m=(a-=u)-1,v=r(t),g=r(o),y=r(a),b=e[c]+h,w=e[b]+d,x=e[b+1]+d,_=e[c+1]+h,T=e[_]+d,A=e[_+1]+d;return n(y,n(g,n(v,i(e[w],t,o,a),i(e[T],p,o,a)),n(v,i(e[x],t,f,a),i(e[A],p,f,a))),n(g,n(v,i(e[w+1],t,o,m),i(e[T+1],p,o,m)),n(v,i(e[x+1],t,f,m),i(e[A+1],p,f,m))))}}}},yA4I:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("/nNp"),i=r("huYH"),o=r("LtYT");function a(e){n.a.call(this,"v3"),this.scope=e||a.CUBE}a.CUBE="cube",a.SPHERE="sphere",a.VECTOR="vector",a.prototype=Object.create(n.a.prototype),a.prototype.constructor=a,a.prototype.nodeType="Reflect",a.prototype.getUnique=function(e){return!e.context.viewNormal},a.prototype.getType=function(){switch(this.scope){case a.SPHERE:return"v2"}return this.type},a.prototype.generate=function(e,t){var r=this.getUnique(e);if(e.isShader("fragment")){var n;switch(this.scope){case a.VECTOR:var s=new o.a(o.a.VIEW),l=e.context.roughness,u=s.build(e,"v3"),c=new i.a(i.a.VIEW).build(e,"v3"),h=l?l.build(e,"f"):void 0,d="reflect( -normalize( "+c+" ), "+u+" )";h&&(d="normalize( mix( "+d+", "+u+", "+h+" * "+h+" ) )");var p="inverseTransformDirection( "+d+", viewMatrix )";r?(e.addNodeCode("vec3 reflectVec = "+p+";"),n="reflectVec"):n=p;break;case a.CUBE:p="vec3( -"+(f=new a(a.VECTOR).build(e,"v3"))+".x, "+f+".yz )";r?(e.addNodeCode("vec3 reflectCubeVec = "+p+";"),n="reflectCubeVec"):n=p;break;case a.SPHERE:var f;p="normalize( ( viewMatrix * vec4( "+(f=new a(a.VECTOR).build(e,"v3"))+", 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) ).xy * 0.5 + 0.5";r?(e.addNodeCode("vec2 reflectSphereVec = "+p+";"),n="reflectSphereVec"):n=p}return e.format(n,this.getType(e),t)}return console.warn("THREE.ReflectNode is not compatible with "+e.shader+" shader."),e.format("vec3( 0.0 )",this.type,t)},a.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).scope=this.scope),t}},z8c2:function(e,t,r){"use strict";var n,i,o,a=r("6+nK"),s=r("qxm1"),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},u=function(){function e(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,r,n){return r&&e(t.prototype,r),n&&e(t,n),t}}(),c=(n=f(regeneratorRuntime.mark(function e(t){var r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch(t);case 2:if((r=e.sent).ok){e.next=7;break}throw new Error(r.statusText);case 7:return e.abrupt("return",r.json());case 8:case"end":return e.stop()}},e,this)})),function(e){return n.apply(this,arguments)}),h=(i=f(regeneratorRuntime.mark(function e(t){var r,n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("No basePath supplied");case 2:return r="profilesList.json",e.next=5,c(t+"/"+r);case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e,this)})),function(e){return i.apply(this,arguments)}),d=(o=f(regeneratorRuntime.mark(function e(t,r){var n,i,o,a,s,l,u=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}throw new Error("No xrInputSource supplied");case 2:if(r){e.next=4;break}throw new Error("No basePath supplied");case 4:return e.next=6,h(r);case 6:if(n=e.sent,i=void 0,t.profiles.some(function(e){var t=n[e];return t&&(i={profileId:e,profilePath:r+"/"+t.path,deprecated:!!t.deprecated}),!!i}),i){e.next=16;break}if(u){e.next=12;break}throw new Error("No matching profile name found");case 12:if(o=n[u]){e.next=15;break}throw new Error('No matching profile name found and default profile "'+u+'" missing.');case 15:i={profileId:u,profilePath:r+"/"+o.path,deprecated:!!o.deprecated};case 16:return e.next=18,c(i.profilePath);case 18:if(a=e.sent,s=void 0,!d){e.next=26;break}if(l=void 0,l="any"===t.handedness?a.layouts[Object.keys(a.layouts)[0]]:a.layouts[t.handedness]){e.next=25;break}throw new Error("No matching handedness, "+t.handedness+", in profile "+i.profileId);case 25:l.assetPath&&(s=i.profilePath.replace("profile.json",l.assetPath));case 26:return e.abrupt("return",{profile:a,assetPath:s});case 27:case"end":return e.stop()}},e,this)})),function(e,t){return o.apply(this,arguments)});function p(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,r){return function n(i,o){try{var a=t[i](o),s=a.value}catch(e){return void r(e)}if(!a.done)return Promise.resolve(s).then(function(e){n("next",e)},function(e){n("throw",e)});e(s)}("next")})}}var m={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})},v={xAxis:0,yAxis:0,button:0,state:m.ComponentState.DEFAULT};var g=function(){function e(t){p(this,e),this.componentProperty=t.componentProperty,this.states=t.states,this.valueNodeName=t.valueNodeName,this.valueNodeProperty=t.valueNodeProperty,this.valueNodeProperty===m.VisualResponseProperty.TRANSFORM&&(this.minNodeName=t.minNodeName,this.maxNodeName=t.maxNodeName),this.value=0,this.updateFromComponent(v)}return u(e,[{key:"updateFromComponent",value:function(e){var t=e.xAxis,r=e.yAxis,n=e.button,i=e.state,o=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e,n=t;if(Math.sqrt(e*e+t*t)>1){var i=Math.atan2(t,e);r=Math.cos(i),n=Math.sin(i)}return{normalizedXAxis:.5*r+.5,normalizedYAxis:.5*n+.5}}(t,r),a=o.normalizedXAxis,s=o.normalizedYAxis;switch(this.componentProperty){case m.ComponentProperty.X_AXIS:this.value=this.states.includes(i)?a:.5;break;case m.ComponentProperty.Y_AXIS:this.value=this.states.includes(i)?s:.5;break;case m.ComponentProperty.BUTTON:this.value=this.states.includes(i)?n:0;break;case m.ComponentProperty.STATE:this.valueNodeProperty===m.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(i):this.value=this.states.includes(i)?1:0;break;default:throw new Error("Unexpected visualResponse componentProperty "+this.componentProperty)}}}]),e}(),y=function(){function e(t,r){var n=this;if(p(this,e),!(t&&r&&r.visualResponses&&r.gamepadIndices&&0!==Object.keys(r.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=t,this.type=r.type,this.rootNodeName=r.rootNodeName,this.touchPointNodeName=r.touchPointNodeName,this.visualResponses={},Object.keys(r.visualResponses).forEach(function(e){var t=new g(r.visualResponses[e]);n.visualResponses[e]=t}),this.gamepadIndices=Object.assign({},r.gamepadIndices),this.values={state:m.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}return u(e,[{key:"updateFromGamepad",value:function(e){var t=this;if(this.values.state=m.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&e.buttons.length>this.gamepadIndices.button){var r=e.buttons[this.gamepadIndices.button];this.values.button=r.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,r.pressed||1===this.values.button?this.values.state=m.ComponentState.PRESSED:(r.touched||this.values.button>m.ButtonTouchThreshold)&&(this.values.state=m.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===m.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>m.AxisTouchThreshold&&(this.values.state=m.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===m.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>m.AxisTouchThreshold&&(this.values.state=m.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach(function(e){e.updateFromComponent(t.values)})}},{key:"data",get:function(){return l({id:this.id},this.values)}}]),e}(),b=function(){function e(t,r,n){var i=this;if(p(this,e),!t)throw new Error("No xrInputSource supplied");if(!r)throw new Error("No profile supplied");this.xrInputSource=t,this.assetUrl=n,this.id=r.profileId,this.layoutDescription=r.layouts[t.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach(function(e){var t=i.layoutDescription.components[e];i.components[e]=new y(e,t)}),this.updateFromGamepad()}return u(e,[{key:"updateFromGamepad",value:function(){var e=this;Object.values(this.components).forEach(function(t){t.updateFromGamepad(e.xrInputSource.gamepad)})}},{key:"gripSpace",get:function(){return this.xrInputSource.gripSpace}},{key:"targetRaySpace",get:function(){return this.xrInputSource.targetRaySpace}},{key:"data",get:function(){var e=[];return Object.values(this.components).forEach(function(t){e.push(t.data)}),e}}]),e}();r.d(t,"a",function(){return T});var w="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles";function x(){a.Object3D.call(this),this.motionController=null,this.envMap=null}function _(e,t){!function(e,t){Object.values(e.components).forEach(function(e){var r=e.type,n=e.touchPointNodeName,i=e.visualResponses;if(r===m.ComponentType.TOUCHPAD)if(e.touchPointNode=t.getObjectByName(n),e.touchPointNode){var o=new a.SphereBufferGeometry(.001),s=new a.MeshBasicMaterial({color:255}),l=new a.Mesh(o,s);e.touchPointNode.add(l)}else console.warn("Could not find touch dot, "+e.touchPointNodeName+", in touchpad component "+e.id);Object.values(i).forEach(function(e){var r=e.valueNodeName,n=e.minNodeName,i=e.maxNodeName;if(e.valueNodeProperty===m.VisualResponseProperty.TRANSFORM){if(e.minNode=t.getObjectByName(n),e.maxNode=t.getObjectByName(i),!e.minNode)return void console.warn("Could not find "+n+" in the model");if(!e.maxNode)return void console.warn("Could not find "+i+" in the model")}e.valueNode=t.getObjectByName(r),e.valueNode||console.warn("Could not find "+r+" in the model")})})}(e.motionController,t),e.envMap&&t.traverse(function(t){t.isMesh&&(t.material.envMap=e.envMap,t.material.needsUpdate=!0)}),e.add(t)}x.prototype=Object.assign(Object.create(a.Object3D.prototype),{constructor:x,setEnvironmentMap:function(e){var t=this;return this.envMap==e?this:(this.envMap=e,this.traverse(function(e){e.isMesh&&(e.material.envMap=t.envMap,e.material.needsUpdate=!0)}),this)},updateMatrixWorld:function(e){a.Object3D.prototype.updateMatrixWorld.call(this,e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach(function(e){Object.values(e.visualResponses).forEach(function(e){var t=e.valueNode,r=e.minNode,n=e.maxNode,i=e.value,o=e.valueNodeProperty;t&&(o===m.VisualResponseProperty.VISIBILITY?t.visible=i:o===m.VisualResponseProperty.TRANSFORM&&(a.Quaternion.slerp(r.quaternion,n.quaternion,t.quaternion,i),t.position.lerpVectors(r.position,n.position,i)))})}))}});var T=function(){function e(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;this.gltfLoader=e,this.path=w,this._assetCache={},this.gltfLoader||(this.gltfLoader=new s.a)}return e.prototype={constructor:e,createControllerModel:function(e){var t=this,r=new x,n=null;return e.addEventListener("connected",function(e){var i=e.data;"tracked-pointer"===i.targetRayMode&&i.gamepad&&d(i,t.path,"generic-trigger").then(function(e){var o=e.profile,a=e.assetPath;r.motionController=new b(i,o,a);var s=t._assetCache[r.motionController.assetUrl];if(s)n=s.scene.clone(),_(r,n);else{if(!t.gltfLoader)throw new Error("GLTFLoader not set.");t.gltfLoader.setPath(""),t.gltfLoader.load(r.motionController.assetUrl,function(e){t._assetCache[r.motionController.assetUrl]=e,n=e.scene.clone(),_(r,n)},null,function(){throw new Error("Asset "+r.motionController.assetUrl+" missing or malformed.")})}}).catch(function(e){console.warn(e)})}),e.addEventListener("disconnected",function(){r.motionController=null,r.remove(n),n=null}),r}},e}()},zCdm:function(e,t,r){"use strict";r.d(t,"a",function(){return i});var n=r("6+nK"),i=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,r=/^usemtl /,i=/^usemap /,o=new n.Vector3,a=new n.Vector3,s=new n.Vector3,l=new n.Vector3,u=new n.Vector3;function c(e){n.Loader.call(this,e),this.materials=null}return c.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:c,load:function(e,t,r,i){var o=this,a=new n.FileLoader(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(r){try{t(o.parse(r))}catch(t){i?i(t):console.error(t),o.manager.itemError(e)}},r,i)},setMaterials:function(e){return this.materials=e,this},parse:function(c){var h=new function(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var r=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[],hasUVIndices:!1},materials:[],smooth:!0,startMaterial:function(e,t){var r=this._finalize(!1);r&&(r.inherited||r.groupCount<=0)&&this.materials.splice(r.index,1);var n={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==r?r.smooth:this.smooth,groupStart:void 0!==r?r.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(n),n},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var r=this.materials.length-1;r>=0;r--)this.materials[r].groupCount<=0&&this.materials.splice(r,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},r&&r.name&&"function"==typeof r.clone){var n=r.clone(0);n.inherited=!0,this.object.materials.push(n)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseNormalIndex:function(e,t){var r=parseInt(e,10);return 3*(r>=0?r-1:r+t/3)},parseUVIndex:function(e,t){var r=parseInt(e,10);return 2*(r>=0?r-1:r+t/2)},addVertex:function(e,t,r){var n=this.vertices,i=this.object.geometry.vertices;i.push(n[e+0],n[e+1],n[e+2]),i.push(n[t+0],n[t+1],n[t+2]),i.push(n[r+0],n[r+1],n[r+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,r){var n=this.normals,i=this.object.geometry.normals;i.push(n[e+0],n[e+1],n[e+2]),i.push(n[t+0],n[t+1],n[t+2]),i.push(n[r+0],n[r+1],n[r+2])},addFaceNormal:function(e,t,r){var n=this.vertices,i=this.object.geometry.normals;o.fromArray(n,e),a.fromArray(n,t),s.fromArray(n,r),u.subVectors(s,a),l.subVectors(o,a),u.cross(l),u.normalize(),i.push(u.x,u.y,u.z),i.push(u.x,u.y,u.z),i.push(u.x,u.y,u.z)},addColor:function(e,t,r){var n=this.colors,i=this.object.geometry.colors;void 0!==n[e]&&i.push(n[e+0],n[e+1],n[e+2]),void 0!==n[t]&&i.push(n[t+0],n[t+1],n[t+2]),void 0!==n[r]&&i.push(n[r+0],n[r+1],n[r+2])},addUV:function(e,t,r){var n=this.uvs,i=this.object.geometry.uvs;i.push(n[e+0],n[e+1]),i.push(n[t+0],n[t+1]),i.push(n[r+0],n[r+1])},addDefaultUV:function(){var e=this.object.geometry.uvs;e.push(0,0),e.push(0,0),e.push(0,0)},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,r,n,i,o,a,s,l){var u=this.vertices.length,c=this.parseVertexIndex(e,u),h=this.parseVertexIndex(t,u),d=this.parseVertexIndex(r,u);if(this.addVertex(c,h,d),this.addColor(c,h,d),void 0!==a&&""!==a){var p=this.normals.length;c=this.parseNormalIndex(a,p),h=this.parseNormalIndex(s,p),d=this.parseNormalIndex(l,p),this.addNormal(c,h,d)}else this.addFaceNormal(c,h,d);if(void 0!==n&&""!==n){var f=this.uvs.length;c=this.parseUVIndex(n,f),h=this.parseUVIndex(i,f),d=this.parseUVIndex(o,f),this.addUV(c,h,d),this.object.geometry.hasUVIndices=!0}else this.addDefaultUV()},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,r=0,n=e.length;r<n;r++)this.addVertexPoint(this.parseVertexIndex(e[r],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var r=this.vertices.length,n=this.uvs.length,i=0,o=e.length;i<o;i++)this.addVertexLine(this.parseVertexIndex(e[i],r));var a=0;for(o=t.length;a<o;a++)this.addUVLine(this.parseUVIndex(t[a],n))}};return e.startObject("",!1),e};-1!==c.indexOf("\r\n")&&(c=c.replace(/\r\n/g,"\n")),-1!==c.indexOf("\\\n")&&(c=c.replace(/\\\n/g,""));for(var d=c.split("\n"),p="",f="",m=[],v="function"==typeof"".trimLeft,g=0,y=d.length;g<y;g++)if(p=d[g],0!==(p=v?p.trimLeft():p.trim()).length&&"#"!==(f=p.charAt(0)))if("v"===f){var b=p.split(/\s+/);switch(b[0]){case"v":h.vertices.push(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3])),b.length>=7?h.colors.push(parseFloat(b[4]),parseFloat(b[5]),parseFloat(b[6])):h.colors.push(void 0,void 0,void 0);break;case"vn":h.normals.push(parseFloat(b[1]),parseFloat(b[2]),parseFloat(b[3]));break;case"vt":h.uvs.push(parseFloat(b[1]),parseFloat(b[2]))}}else if("f"===f){for(var w=p.substr(1).trim().split(/\s+/),x=[],_=0,T=w.length;_<T;_++){var A=w[_];if(A.length>0){var S=A.split("/");x.push(S)}}var E=x[0];for(_=1,T=x.length-1;_<T;_++){var C=x[_],M=x[_+1];h.addFace(E[0],C[0],M[0],E[1],C[1],M[1],E[2],C[2],M[2])}}else if("l"===f){var N=p.substring(1).trim().split(" "),O=[],R=[];if(-1===p.indexOf("/"))O=N;else for(var k=0,L=N.length;k<L;k++){var I=N[k].split("/");""!==I[0]&&O.push(I[0]),""!==I[1]&&R.push(I[1])}h.addLineGeometry(O,R)}else if("p"===f){var P=p.substr(1).trim().split(" ");h.addPointGeometry(P)}else if(null!==(m=e.exec(p))){var B=(" "+m[0].substr(1).trim()).substr(1);h.startObject(B)}else if(r.test(p))h.object.startMaterial(p.substring(7).trim(),h.materialLibraries);else if(t.test(p))h.materialLibraries.push(p.substring(7).trim());else if(i.test(p))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===f){if((m=p.split(" ")).length>1){var D=m[1].trim().toLowerCase();h.object.smooth="0"!==D&&"off"!==D}else h.object.smooth=!0;(Q=h.object.currentMaterial())&&(Q.smooth=h.object.smooth)}else{if("\0"===p)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+p+'"')}h.finalize();var U=new n.Group;U.materialLibraries=[].concat(h.materialLibraries);for(g=0,y=h.objects.length;g<y;g++){var F=h.objects[g],z=F.geometry,V=F.materials,j="Line"===z.type,H="Points"===z.type,G=!1;if(0!==z.vertices.length){var X=new n.BufferGeometry;X.setAttribute("position",new n.Float32BufferAttribute(z.vertices,3)),X.setAttribute("normal",new n.Float32BufferAttribute(z.normals,3)),z.colors.length>0&&(G=!0,X.setAttribute("color",new n.Float32BufferAttribute(z.colors,3))),!0===z.hasUVIndices&&X.setAttribute("uv",new n.Float32BufferAttribute(z.uvs,2));for(var Y,W=[],J=0,q=V.length;J<q;J++){var K=(ee=V[J]).name+"_"+ee.smooth+"_"+G,Q=h.materials[K];if(null!==this.materials)if(Q=this.materials.create(ee.name),!j||!Q||Q instanceof n.LineBasicMaterial){if(H&&Q&&!(Q instanceof n.PointsMaterial)){var Z=new n.PointsMaterial({size:10,sizeAttenuation:!1});n.Material.prototype.copy.call(Z,Q),Z.color.copy(Q.color),Z.map=Q.map,Q=Z}}else{var $=new n.LineBasicMaterial;n.Material.prototype.copy.call($,Q),$.color.copy(Q.color),Q=$}void 0===Q&&((Q=j?new n.LineBasicMaterial:H?new n.PointsMaterial({size:1,sizeAttenuation:!1}):new n.MeshPhongMaterial).name=ee.name,Q.flatShading=!ee.smooth,Q.vertexColors=G,h.materials[K]=Q),W.push(Q)}if(W.length>1){for(J=0,q=V.length;J<q;J++){var ee=V[J];X.addGroup(ee.groupStart,ee.groupCount,J)}Y=j?new n.LineSegments(X,W):H?new n.Points(X,W):new n.Mesh(X,W)}else Y=j?new n.LineSegments(X,W[0]):H?new n.Points(X,W[0]):new n.Mesh(X,W[0]);Y.name=F.name,U.add(Y)}}return U}}),c}()},zhz1:function(e,t,r){"use strict";r.d(t,"a",function(){return o});var n=r("/nNp"),i=r("6FbT");function o(e){n.a.call(this,"v2",{shared:!1}),this.index=e||0}o.prototype=Object.create(n.a.prototype),o.prototype.constructor=o,o.prototype.nodeType="UV",o.prototype.generate=function(e,t){e.requires.uv[this.index]=!0;var r=this.index>0?this.index+1:"",n=e.isShader("vertex")?"uv"+r:"vUv"+r;return e.format(n,this.getType(e),t)},o.prototype.copy=function(e){return n.a.prototype.copy.call(this,e),this.index=e.index,this},o.prototype.toJSON=function(e){var t=this.getJSONNode(e);return t||((t=this.createJSONNode(e)).index=this.index),t},i.a.addKeyword("uv",function(){return new o}),i.a.addKeyword("uv2",function(){return new o(1)})}});
//# sourceMappingURL=0.67b7535521d2457ecff1.js.map