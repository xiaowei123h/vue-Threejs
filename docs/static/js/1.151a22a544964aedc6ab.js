webpackJsonp([1],{"5AVf":function(e,t,n){"use strict";var r=n("6+nK"),a=function(e){r._7.call(this,e)};a.prototype=Object.assign(Object.create(r._7.prototype),{constructor:a,load:function(e,t,n,a){var i=this,s=new r._70,o=new r.G(this.manager);return o.setResponseType("arraybuffer"),o.setPath(this.path),o.setWithCredentials(this.withCredentials),o.load(e,function(e){s.image=i.parse(e),s.needsUpdate=!0,void 0!==t&&t(s)},n,a),s},parse:function(e){var t=0,n=1,r=2,a=3,i=9,s=10,o=11,c=48,l=4,u=0,d=1,h=2,f=3;e.length<19&&console.error("THREE.TGALoader: Not enough data to contain header.");var p=new Uint8Array(e),m=0,v={id_length:p[m++],colormap_type:p[m++],image_type:p[m++],colormap_index:p[m++]|p[m++]<<8,colormap_length:p[m++]|p[m++]<<8,colormap_size:p[m++],origin:[p[m++]|p[m++]<<8,p[m++]|p[m++]<<8],width:p[m++]|p[m++]<<8,height:p[m++]|p[m++]<<8,pixel_size:p[m++],flags:p[m++]};!function(e){switch(e.image_type){case n:case i:(e.colormap_length>256||24!==e.colormap_size||1!==e.colormap_type)&&console.error("THREE.TGALoader: Invalid type colormap data for indexed type.");break;case r:case a:case s:case o:e.colormap_type&&console.error("THREE.TGALoader: Invalid type colormap data for colormap type.");break;case t:console.error("THREE.TGALoader: No data.");default:console.error('THREE.TGALoader: Invalid type "%s".',e.image_type)}(e.width<=0||e.height<=0)&&console.error("THREE.TGALoader: Invalid image size."),8!==e.pixel_size&&16!==e.pixel_size&&24!==e.pixel_size&&32!==e.pixel_size&&console.error('THREE.TGALoader: Invalid pixel size "%s".',e.pixel_size)}(v),v.id_length+m>e.length&&console.error("THREE.TGALoader: No data."),m+=v.id_length;var g=!1,b=!1,y=!1;switch(v.image_type){case i:g=!0,b=!0;break;case n:b=!0;break;case s:g=!0;break;case r:break;case o:g=!0,y=!0;break;case a:y=!0}var _="undefined"!=typeof OffscreenCanvas?new OffscreenCanvas(v.width,v.height):document.createElement("canvas");_.width=v.width,_.height=v.height;var w=_.getContext("2d"),k=w.createImageData(v.width,v.height),N=function(e,t,n,r,a){var i,s,o,c;if(s=n.pixel_size>>3,o=n.width*n.height*s,t&&(c=a.subarray(r,r+=n.colormap_length*(n.colormap_size>>3))),e){var l,u,d;i=new Uint8Array(o);for(var h=0,f=new Uint8Array(s);h<o;)if(u=1+(127&(l=a[r++])),128&l){for(d=0;d<s;++d)f[d]=a[r++];for(d=0;d<u;++d)i.set(f,h+d*s);h+=s*u}else{for(u*=s,d=0;d<u;++d)i[h+d]=a[r++];h+=u}}else i=a.subarray(r,r+=t?n.width*n.height:o);return{pixel_data:i,palettes:c}}(g,b,v,m,p);return function(e,t,n,r,a){var i,s,o,p,m,g;switch((v.flags&c)>>l){default:case h:i=0,o=1,m=t,s=0,p=1,g=n;break;case u:i=0,o=1,m=t,s=n-1,p=-1,g=-1;break;case f:i=t-1,o=-1,m=-1,s=0,p=1,g=n;break;case d:i=t-1,o=-1,m=-1,s=n-1,p=-1,g=-1}if(y)switch(v.pixel_size){case 8:!function(e,t,n,r,a,i,s,o){var c,l,u,d=0,h=v.width;for(u=t;u!==r;u+=n)for(l=a;l!==s;l+=i,d++)c=o[d],e[4*(l+h*u)+0]=c,e[4*(l+h*u)+1]=c,e[4*(l+h*u)+2]=c,e[4*(l+h*u)+3]=255}(e,s,p,g,i,o,m,r);break;case 16:!function(e,t,n,r,a,i,s,o){var c,l,u=0,d=v.width;for(l=t;l!==r;l+=n)for(c=a;c!==s;c+=i,u+=2)e[4*(c+d*l)+0]=o[u+0],e[4*(c+d*l)+1]=o[u+0],e[4*(c+d*l)+2]=o[u+0],e[4*(c+d*l)+3]=o[u+1]}(e,s,p,g,i,o,m,r);break;default:console.error("THREE.TGALoader: Format not supported.")}else switch(v.pixel_size){case 8:!function(e,t,n,r,a,i,s,o,c){var l,u,d,h=c,f=0,p=v.width;for(d=t;d!==r;d+=n)for(u=a;u!==s;u+=i,f++)l=o[f],e[4*(u+p*d)+3]=255,e[4*(u+p*d)+2]=h[3*l+0],e[4*(u+p*d)+1]=h[3*l+1],e[4*(u+p*d)+0]=h[3*l+2]}(e,s,p,g,i,o,m,r,a);break;case 16:!function(e,t,n,r,a,i,s,o){var c,l,u,d=0,h=v.width;for(u=t;u!==r;u+=n)for(l=a;l!==s;l+=i,d+=2)c=o[d+0]+(o[d+1]<<8),e[4*(l+h*u)+0]=(31744&c)>>7,e[4*(l+h*u)+1]=(992&c)>>2,e[4*(l+h*u)+2]=(31&c)>>3,e[4*(l+h*u)+3]=32768&c?0:255}(e,s,p,g,i,o,m,r);break;case 24:!function(e,t,n,r,a,i,s,o){var c,l,u=0,d=v.width;for(l=t;l!==r;l+=n)for(c=a;c!==s;c+=i,u+=3)e[4*(c+d*l)+3]=255,e[4*(c+d*l)+2]=o[u+0],e[4*(c+d*l)+1]=o[u+1],e[4*(c+d*l)+0]=o[u+2]}(e,s,p,g,i,o,m,r);break;case 32:!function(e,t,n,r,a,i,s,o){var c,l,u=0,d=v.width;for(l=t;l!==r;l+=n)for(c=a;c!==s;c+=i,u+=4)e[4*(c+d*l)+2]=o[u+0],e[4*(c+d*l)+1]=o[u+1],e[4*(c+d*l)+0]=o[u+2],e[4*(c+d*l)+3]=o[u+3]}(e,s,p,g,i,o,m,r);break;default:console.error("THREE.TGALoader: Format not supported.")}}(k.data,v.width,v.height,N.pixel_data,N.palettes),w.putImageData(k,0,0),_}}),n.d(t,"a",function(){return i});var i=function(e){r._7.call(this,e)};i.prototype=Object.assign(Object.create(r._7.prototype),{constructor:i,load:function(e,t,n,a){var i=this,s=""===i.path?r._8.extractUrlBase(e):i.path,o=new r.G(i.manager);o.setPath(i.path),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(n){try{t(i.parse(n,s))}catch(t){a?a(t):console.error(t),i.manager.itemError(e)}},n,a)},options:{set convertUpAxis(e){console.warn("THREE.ColladaLoader: options.convertUpAxis() has been removed. Up axis is converted automatically.")}},parse:function(e,t){function n(e,t){for(var n=[],r=e.childNodes,a=0,i=r.length;a<i;a++){var s=r[a];s.nodeName===t&&n.push(s)}return n}function i(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,a=t.length;r<a;r++)n[r]=t[r];return n}function s(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,a=t.length;r<a;r++)n[r]=parseFloat(t[r]);return n}function o(e){if(0===e.length)return[];for(var t=e.trim().split(/\s+/),n=new Array(t.length),r=0,a=t.length;r<a;r++)n[r]=parseInt(t[r]);return n}function c(e){return e.substring(1)}function l(e){return 0===Object.keys(e).length}function u(e,t,r,a){var i=n(e,t)[0];if(void 0!==i)for(var s=n(i,r),o=0;o<s.length;o++)a(s[o])}function d(e,t){for(var n in e){e[n].build=t(e[n])}}function h(e,t){return void 0!==e.build?e.build:(e.build=t(e),e.build)}function f(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"input":var i=c(a.getAttribute("source")),s=a.getAttribute("semantic");t.inputs[s]=i}}return t}function p(e){var t={},n=e.getAttribute("target").split("/"),r=n.shift(),a=n.shift(),i=-1!==a.indexOf("("),s=-1!==a.indexOf(".");if(s)a=(n=a.split(".")).shift(),t.member=n.shift();else if(i){var o=a.split("(");a=o.shift();for(var l=0;l<o.length;l++)o[l]=parseInt(o[l].replace(/\)/,""));t.indices=o}return t.id=r,t.sid=a,t.arraySyntax=i,t.memberSyntax=s,t.sampler=c(e.getAttribute("source")),t}function m(e){var t=[],n=e.channels,r=e.samplers,a=e.sources;for(var i in n)if(n.hasOwnProperty(i)){var s=n[i],o=r[s.sampler],c=o.inputs.INPUT,l=o.inputs.OUTPUT;w(g(s,a[c],a[l]),t)}return t}function v(e){return h(Xe.animations[e],m)}function g(e,t,n){var r,a,i,s,o,c,l=Xe.nodes[e.id],u=Le(l.id),d=l.transforms[e.sid],h=l.matrix.clone().transpose(),f={};switch(d){case"matrix":for(i=0,s=t.array.length;i<s;i++)if(r=t.array[i],a=i*n.stride,void 0===f[r]&&(f[r]={}),!0===e.arraySyntax){var p=n.array[a],m=e.indices[0]+4*e.indices[1];f[r][m]=p}else for(o=0,c=n.stride;o<c;o++)f[r][o]=n.array[a+o];break;case"translate":case"rotate":case"scale":console.warn('THREE.ColladaLoader: Animation transform type "%s" not yet implemented.',d)}var v=function(e,t){var n=[];for(var r in e)n.push({time:parseFloat(r),value:e[r]});n.sort(function(e,t){return e.time-t.time});for(var a=0;a<16;a++)k(n,a,t.elements[a]);return n}(f,h);return{name:u.uuid,keyframes:v}}var b=new r._82,y=new r._82,_=new r._41;function w(e,t){for(var n=e.keyframes,a=e.name,i=[],s=[],o=[],c=[],l=0,u=n.length;l<u;l++){var d=n[l],h=d.time,f=d.value;Ne.fromArray(f).transpose(),Ne.decompose(b,_,y),i.push(h),s.push(b.x,b.y,b.z),o.push(_.x,_.y,_.z,_.w),c.push(y.x,y.y,y.z)}return s.length>0&&t.push(new r._84(a+".position",i,s)),o.length>0&&t.push(new r._42(a+".quaternion",i,o)),c.length>0&&t.push(new r._84(a+".scale",i,c)),t}function k(e,t,n){var r,a,i,s=!0;for(a=0,i=e.length;a<i;a++)void 0===(r=e[a]).value[t]?r.value[t]=null:s=!1;if(!0===s)for(a=0,i=e.length;a<i;a++)(r=e[a]).value[t]=n;else!function(e,t){for(var n,r,a=0,i=e.length;a<i;a++){var s=e[a];if(null===s.value[t]){if(n=N(e,a,t),r=T(e,a,t),null===n){s.value[t]=r.value[t];continue}if(null===r){s.value[t]=n.value[t];continue}x(s,n,r,t)}}}(e,t)}function N(e,t,n){for(;t>=0;){var r=e[t];if(null!==r.value[n])return r;t--}return null}function T(e,t,n){for(;t<e.length;){var r=e[t];if(null!==r.value[n])return r;t++}return null}function x(e,t,n,r){n.time-t.time!=0?e.value[r]=(e.time-t.time)*(n.value[r]-t.value[r])/(n.time-t.time)+t.value[r]:e.value[r]=t.value[r]}function A(e){for(var t=[],n=e.name,a=e.end-e.start||-1,i=e.animations,s=0,o=i.length;s<o;s++)for(var c=v(i[s]),l=0,u=c.length;l<u;l++)t.push(c[l]);return new r.d(n,a,t)}function E(e){return h(Xe.clips[e],A)}function C(e){for(var t={sources:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"bind_shape_matrix":t.bindShapeMatrix=s(a.textContent);break;case"source":var i=a.getAttribute("id");t.sources[i]=ae(a);break;case"joints":t.joints=I(a);break;case"vertex_weights":t.vertexWeights=R(a)}}return t}function I(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"input":var i=a.getAttribute("semantic"),s=c(a.getAttribute("source"));t.inputs[i]=s}}return t}function R(e){for(var t={inputs:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"input":var i=a.getAttribute("semantic"),s=c(a.getAttribute("source")),l=parseInt(a.getAttribute("offset"));t.inputs[i]={id:s,offset:l};break;case"vcount":t.vcount=o(a.textContent);break;case"v":t.v=o(a.textContent)}}return t}function O(e){var t={id:e.id},n=Xe.geometries[t.id];return void 0!==e.skin&&(t.skin=function(e){var t,n,a,i={joints:[],indices:{array:[],stride:4},weights:{array:[],stride:4}},s=e.sources,o=e.vertexWeights,c=o.vcount,l=o.v,u=o.inputs.JOINT.offset,d=o.inputs.WEIGHT.offset,h=e.sources[e.joints.inputs.JOINT],f=e.sources[e.joints.inputs.INV_BIND_MATRIX],p=s[o.inputs.WEIGHT.id].array,m=0;for(t=0,a=c.length;t<a;t++){var v=c[t],g=[];for(n=0;n<v;n++){var b=l[m+u],y=l[m+d],_=p[y];g.push({index:b,weight:_}),m+=2}for(g.sort(T),n=0;n<4;n++){var w=g[n];void 0!==w?(i.indices.array.push(w.index),i.weights.array.push(w.weight)):(i.indices.array.push(0),i.weights.array.push(0))}}e.bindShapeMatrix?i.bindMatrix=(new r._14).fromArray(e.bindShapeMatrix).transpose():i.bindMatrix=(new r._14).identity();for(t=0,a=h.array.length;t<a;t++){var k=h.array[t],N=(new r._14).fromArray(f.array,t*f.stride).transpose();i.joints.push({name:k,boneInverse:N})}return i;function T(e,t){return t.weight-e.weight}}(e.skin),n.sources.skinIndices=t.skin.indices,n.sources.skinWeights=t.skin.weights),t}function M(e){return void 0!==e.build?e.build:e.init_from}function j(e){var t=Xe.images[e];return void 0!==t?h(t,M):(console.warn("THREE.ColladaLoader: Couldn't find image with ID:",e),null)}function L(e){for(var t={surfaces:{},samplers:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"newparam":S(a,t);break;case"technique":t.technique=q(a);break;case"extra":t.extra=G(a)}}return t}function S(e,t){for(var n=e.getAttribute("sid"),r=0,a=e.childNodes.length;r<a;r++){var i=e.childNodes[r];if(1===i.nodeType)switch(i.nodeName){case"surface":t.surfaces[n]=H(i);break;case"sampler2D":t.samplers[n]=U(i)}}}function H(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"init_from":t.init_from=a.textContent}}return t}function U(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"source":t.source=a.textContent}}return t}function q(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"constant":case"lambert":case"blinn":case"phong":t.type=a.nodeName,t.parameters=P(a)}}return t}function P(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"emission":case"diffuse":case"specular":case"bump":case"ambient":case"shininess":case"transparency":t[a.nodeName]=F(a);break;case"transparent":t[a.nodeName]={opaque:a.getAttribute("opaque"),data:F(a)}}}return t}function F(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"color":t[a.nodeName]=s(a.textContent);break;case"float":t[a.nodeName]=parseFloat(a.textContent);break;case"texture":t[a.nodeName]={id:a.getAttribute("texture"),extra:z(a)}}}return t}function z(e){for(var t={technique:{}},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"extra":D(a,t)}}return t}function D(e,t){for(var n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"technique":B(a,t)}}}function B(e,t){for(var n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"repeatU":case"repeatV":case"offsetU":case"offsetV":t.technique[a.nodeName]=parseFloat(a.textContent);break;case"wrapU":case"wrapV":"TRUE"===a.textContent.toUpperCase()?t.technique[a.nodeName]=1:"FALSE"===a.textContent.toUpperCase()?t.technique[a.nodeName]=0:t.technique[a.nodeName]=parseInt(a.textContent)}}}function G(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"technique":t.technique=W(a)}}return t}function W(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"double_sided":t[a.nodeName]=parseInt(a.textContent)}}return t}function J(e){return e}function V(e){var t,n,a=(t=e.url,h(Xe.effects[t],J)),i=a.profile.technique,s=a.profile.extra;switch(i.type){case"phong":case"blinn":n=new r._18;break;case"lambert":n=new r._17;break;default:n=new r._16}function o(e){var t=a.profile.samplers[e.id],n=null;void 0!==t?n=j(a.profile.surfaces[t.source].init_from):(console.warn("THREE.ColladaLoader: Undefined sampler. Access image directly (see #12530)."),n=j(e.id));if(null!==n){var i=function(e){var t,n=e.slice(2+(e.lastIndexOf(".")-1>>>0));switch(n=n.toLowerCase()){case"tga":t=Be;break;default:t=We}return t}(n);if(void 0!==i){var s=i.load(n),o=e.extra;if(void 0!==o&&void 0!==o.technique&&!1===l(o.technique)){var c=o.technique;s.wrapS=c.wrapU?r._56:r.n,s.wrapT=c.wrapV?r._56:r.n,s.offset.set(c.offsetU||0,c.offsetV||0),s.repeat.set(c.repeatU||1,c.repeatV||1)}else s.wrapS=r._56,s.wrapT=r._56;return s}return console.warn("THREE.ColladaLoader: Loader for texture %s not found.",n),null}return console.warn("THREE.ColladaLoader: Couldn't create texture with ID:",e.id),null}n.name=e.name||"";var c=i.parameters;for(var u in c){var d=c[u];switch(u){case"diffuse":d.color&&n.color.fromArray(d.color),d.texture&&(n.map=o(d.texture));break;case"specular":d.color&&n.specular&&n.specular.fromArray(d.color),d.texture&&(n.specularMap=o(d.texture));break;case"bump":d.texture&&(n.normalMap=o(d.texture));break;case"ambient":d.texture&&(n.lightMap=o(d.texture));break;case"shininess":d.float&&n.shininess&&(n.shininess=d.float);break;case"emission":d.color&&n.emissive&&n.emissive.fromArray(d.color),d.texture&&(n.emissiveMap=o(d.texture))}}var f=c.transparent,p=c.transparency;if(void 0===p&&f&&(p={float:1}),void 0===f&&p&&(f={opaque:"A_ONE",data:{color:[1,1,1,1]}}),f&&p)if(f.data.texture)n.transparent=!0;else{var m=f.data.color;switch(f.opaque){case"A_ONE":n.opacity=m[3]*p.float;break;case"RGB_ZERO":n.opacity=1-m[0]*p.float;break;case"A_ZERO":n.opacity=1-m[3]*p.float;break;case"RGB_ONE":n.opacity=m[0]*p.float;break;default:console.warn('THREE.ColladaLoader: Invalid opaque type "%s" of transparent tag.',f.opaque)}n.opacity<1&&(n.transparent=!0)}return void 0!==s&&void 0!==s.technique&&1===s.technique.double_sided&&(n.side=r.B),n}function $(e){return h(Xe.materials[e],V)}function X(e){for(var t=0;t<e.childNodes.length;t++){var n=e.childNodes[t];switch(n.nodeName){case"technique_common":return K(n)}}return{}}function K(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"perspective":case"orthographic":t.technique=r.nodeName,t.parameters=Q(r)}}return t}function Q(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"xfov":case"yfov":case"xmag":case"ymag":case"znear":case"zfar":case"aspect_ratio":t[r.nodeName]=parseFloat(r.textContent)}}return t}function Z(e){var t;switch(e.optics.technique){case"perspective":t=new r._34(e.optics.parameters.yfov,e.optics.parameters.aspect_ratio,e.optics.parameters.znear,e.optics.parameters.zfar);break;case"orthographic":var n=e.optics.parameters.ymag,a=e.optics.parameters.xmag,i=e.optics.parameters.aspect_ratio;a=void 0===a?n*i:a,n=void 0===n?a/i:n,a*=.5,n*=.5,t=new r._31(-a,a,n,-n,e.optics.parameters.znear,e.optics.parameters.zfar);break;default:t=new r._34}return t.name=e.name||"",t}function Y(e){var t=Xe.cameras[e];return void 0!==t?h(t,Z):(console.warn("THREE.ColladaLoader: Couldn't find camera with ID:",e),null)}function ee(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"directional":case"point":case"spot":case"ambient":t.technique=a.nodeName,t.parameters=te(a)}}return t}function te(e){for(var t={},n=0,a=e.childNodes.length;n<a;n++){var i=e.childNodes[n];if(1===i.nodeType)switch(i.nodeName){case"color":var o=s(i.textContent);t.color=(new r.o).fromArray(o);break;case"falloff_angle":t.falloffAngle=parseFloat(i.textContent);break;case"quadratic_attenuation":var c=parseFloat(i.textContent);t.distance=c?Math.sqrt(1/c):0}}return t}function ne(e){var t;switch(e.technique){case"directional":t=new r.A;break;case"point":t=new r._37;break;case"spot":t=new r._67;break;case"ambient":t=new r.c}return e.parameters.color&&t.color.copy(e.parameters.color),e.parameters.distance&&(t.distance=e.parameters.distance),t}function re(e){var t=Xe.lights[e];return void 0!==t?h(t,ne):(console.warn("THREE.ColladaLoader: Couldn't find light with ID:",e),null)}function ae(e){for(var t={array:[],stride:3},r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(1===a.nodeType)switch(a.nodeName){case"float_array":t.array=s(a.textContent);break;case"Name_array":t.array=i(a.textContent);break;case"technique_common":var o=n(a,"accessor")[0];void 0!==o&&(t.stride=parseInt(o.getAttribute("stride")))}}return t}function ie(e){for(var t={},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];1===r.nodeType&&(t[r.getAttribute("semantic")]=c(r.getAttribute("source")))}return t}function se(e){for(var t={type:e.nodeName,material:e.getAttribute("material"),count:parseInt(e.getAttribute("count")),inputs:{},stride:0,hasUV:!1},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"input":var i=c(a.getAttribute("source")),s=a.getAttribute("semantic"),l=parseInt(a.getAttribute("offset")),u=parseInt(a.getAttribute("set")),d=u>0?s+u:s;t.inputs[d]={id:i,offset:l},t.stride=Math.max(t.stride,l+1),"TEXCOORD"===s&&(t.hasUV=!0);break;case"vcount":t.vcount=o(a.textContent);break;case"p":t.p=o(a.textContent)}}return t}function oe(e){for(var t=0,n=0,r=e.length;n<r;n++){!0===e[n].hasUV&&t++}t>0&&t<e.length&&(e.uvsNeedsFix=!0)}function ce(e){var t={},n=e.sources,r=e.vertices,a=e.primitives;if(0===a.length)return{};var i=function(e){for(var t={},n=0;n<e.length;n++){var r=e[n];void 0===t[r.type]&&(t[r.type]=[]),t[r.type].push(r)}return t}(a);for(var s in i){var o=i[s];oe(o),t[s]=le(o,n,r)}return t}function le(e,t,n){for(var a={},i={array:[],stride:0},s={array:[],stride:0},o={array:[],stride:0},c={array:[],stride:0},l={array:[],stride:0},u=[],d=4,h=[],f=4,p=new r.k,m=[],v=0,g=0;g<e.length;g++){var b=e[g],y=b.inputs,_=0;switch(b.type){case"lines":case"linestrips":_=2*b.count;break;case"triangles":_=3*b.count;break;case"polylist":for(var w=0;w<b.count;w++){var k=b.vcount[w];switch(k){case 3:_+=3;break;case 4:_+=6;break;default:_+=3*(k-2)}}break;default:console.warn("THREE.ColladaLoader: Unknow primitive type:",b.type)}for(var N in p.addGroup(v,_,g),v+=_,b.material&&m.push(b.material),y){var T=y[N];switch(N){case"VERTEX":for(var x in n){var A=n[x];switch(x){case"POSITION":var E=i.array.length;if(ue(b,t[A],T.offset,i.array),i.stride=t[A].stride,t.skinWeights&&t.skinIndices&&(ue(b,t.skinIndices,T.offset,u),ue(b,t.skinWeights,T.offset,h)),!1===b.hasUV&&!0===e.uvsNeedsFix){_=(i.array.length-E)/i.stride;for(var C=0;C<_;C++)o.array.push(0,0)}break;case"NORMAL":ue(b,t[A],T.offset,s.array),s.stride=t[A].stride;break;case"COLOR":ue(b,t[A],T.offset,l.array),l.stride=t[A].stride;break;case"TEXCOORD":ue(b,t[A],T.offset,o.array),o.stride=t[A].stride;break;case"TEXCOORD1":ue(b,t[A],T.offset,c.array),o.stride=t[A].stride;break;default:console.warn('THREE.ColladaLoader: Semantic "%s" not handled in geometry build process.',x)}}break;case"NORMAL":ue(b,t[T.id],T.offset,s.array),s.stride=t[T.id].stride;break;case"COLOR":ue(b,t[T.id],T.offset,l.array),l.stride=t[T.id].stride;break;case"TEXCOORD":ue(b,t[T.id],T.offset,o.array),o.stride=t[T.id].stride;break;case"TEXCOORD1":ue(b,t[T.id],T.offset,c.array),c.stride=t[T.id].stride}}}return i.array.length>0&&p.setAttribute("position",new r.H(i.array,i.stride)),s.array.length>0&&p.setAttribute("normal",new r.H(s.array,s.stride)),l.array.length>0&&p.setAttribute("color",new r.H(l.array,l.stride)),o.array.length>0&&p.setAttribute("uv",new r.H(o.array,o.stride)),c.array.length>0&&p.setAttribute("uv2",new r.H(c.array,c.stride)),u.length>0&&p.setAttribute("skinIndex",new r.H(u,d)),h.length>0&&p.setAttribute("skinWeight",new r.H(h,f)),a.data=p,a.type=e[0].type,a.materialKeys=m,a}function ue(e,t,n,r){var a=e.p,i=e.stride,s=e.vcount;function o(e){for(var t=a[e+n]*l,i=t+l;t<i;t++)r.push(c[t])}var c=t.array,l=t.stride;if(void 0!==e.vcount)for(var u=0,d=0,h=s.length;d<h;d++){var f=s[d];if(4===f){var p=u+1*i,m=u+2*i,v=u+3*i;o(u+0*i),o(p),o(v),o(p),o(m),o(v)}else if(3===f){p=u+1*i,m=u+2*i;o(u+0*i),o(p),o(m)}else if(f>4)for(var g=1,b=f-2;g<=b;g++){p=u+i*g,m=u+i*(g+1);o(u+0*i),o(p),o(m)}u+=i*f}else for(d=0,h=a.length;d<h;d+=i)o(d)}function de(e){return h(Xe.geometries[e],ce)}function he(e){return void 0!==e.build?e.build:e}function fe(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"joint":t.joints[r.getAttribute("sid")]=pe(r);break;case"link":t.links.push(ve(r))}}}function pe(e){for(var t,n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"prismatic":case"revolute":t=me(r)}}return t}function me(e,t){t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",axis:new r._82,limits:{min:0,max:0},type:e.nodeName,static:!1,zeroPosition:0,middlePosition:0};for(var n=0;n<e.childNodes.length;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"axis":var i=s(a.textContent);t.axis.fromArray(i);break;case"limits":var o=a.getElementsByTagName("max")[0],c=a.getElementsByTagName("min")[0];t.limits.max=parseFloat(o.textContent),t.limits.min=parseFloat(c.textContent)}}return t.limits.min>=t.limits.max&&(t.static=!0),t.middlePosition=(t.limits.min+t.limits.max)/2,t}function ve(e){for(var t={sid:e.getAttribute("sid"),name:e.getAttribute("name")||"",attachments:[],transforms:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"attachment_full":t.attachments.push(ge(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(be(r))}}return t}function ge(e){for(var t={joint:e.getAttribute("joint").split("/").pop(),transforms:[],links:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"link":t.links.push(ve(r));break;case"matrix":case"translate":case"rotate":t.transforms.push(be(r))}}return t}function be(e){var t={type:e.nodeName},n=s(e.textContent);switch(t.type){case"matrix":t.obj=new r._14,t.obj.fromArray(n).transpose();break;case"translate":t.obj=new r._82,t.obj.fromArray(n);break;case"rotate":t.obj=new r._82,t.obj.fromArray(n),t.angle=r._12.degToRad(n[3])}return t}function ye(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique_common":_e(r,t)}}}function _e(e,t){for(var n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"inertia":t.inertia=s(r.textContent);break;case"mass":t.mass=s(r.textContent)[0]}}}function we(e){for(var t={target:e.getAttribute("target").split("/").pop()},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"axis":var a=r.getElementsByTagName("param")[0];t.axis=a.textContent;var i=t.axis.split("inst_").pop().split("axis")[0];t.jointIndex=i.substr(0,i.length-1)}}return t}function ke(e){return void 0!==e.build?e.build:e}var Ne=new r._14,Te=new r._82;function xe(e){for(var t={name:e.getAttribute("name")||"",type:e.getAttribute("type"),id:e.getAttribute("id"),sid:e.getAttribute("sid"),matrix:new r._14,nodes:[],instanceCameras:[],instanceControllers:[],instanceLights:[],instanceGeometries:[],instanceNodes:[],transforms:{}},n=0;n<e.childNodes.length;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"node":t.nodes.push(a.getAttribute("id")),xe(a);break;case"instance_camera":t.instanceCameras.push(c(a.getAttribute("url")));break;case"instance_controller":t.instanceControllers.push(Ae(a));break;case"instance_light":t.instanceLights.push(c(a.getAttribute("url")));break;case"instance_geometry":t.instanceGeometries.push(Ae(a));break;case"instance_node":t.instanceNodes.push(c(a.getAttribute("url")));break;case"matrix":var i=s(a.textContent);t.matrix.multiply(Ne.fromArray(i).transpose()),t.transforms[a.getAttribute("sid")]=a.nodeName;break;case"translate":i=s(a.textContent);Te.fromArray(i),t.matrix.multiply(Ne.makeTranslation(Te.x,Te.y,Te.z)),t.transforms[a.getAttribute("sid")]=a.nodeName;break;case"rotate":i=s(a.textContent);var o=r._12.degToRad(i[3]);t.matrix.multiply(Ne.makeRotationAxis(Te.fromArray(i),o)),t.transforms[a.getAttribute("sid")]=a.nodeName;break;case"scale":i=s(a.textContent);t.matrix.scale(Te.fromArray(i)),t.transforms[a.getAttribute("sid")]=a.nodeName;break;case"extra":break;default:console.log(a)}}return je(t.id)?console.warn("THREE.ColladaLoader: There is already a node with ID %s. Exclude current node from further processing.",t.id):Xe.nodes[t.id]=t,t}function Ae(e){for(var t={id:c(e.getAttribute("url")),materials:{},skeletons:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];switch(r.nodeName){case"bind_material":for(var a=r.getElementsByTagName("instance_material"),i=0;i<a.length;i++){var s=a[i],o=s.getAttribute("symbol"),l=s.getAttribute("target");t.materials[o]=c(l)}break;case"skeleton":t.skeletons.push(c(r.textContent))}}return t}function Ee(e,t){var n,a,i,s=[],o=[];for(n=0;n<e.length;n++){var c=e[n];if(je(c))Ce(Le(c),t,s);else if(i=c,void 0!==Xe.visualScenes[i])for(var l=Xe.visualScenes[c].children,u=0;u<l.length;u++){var d=l[u];if("JOINT"===d.type)Ce(Le(d.id),t,s)}else console.error("THREE.ColladaLoader: Unable to find root bone of skeleton with ID:",c)}for(n=0;n<t.length;n++)for(u=0;u<s.length;u++)if((a=s[u]).bone.name===t[n].name){o[n]=a,a.processed=!0;break}for(n=0;n<s.length;n++)!1===(a=s[n]).processed&&(o.push(a),a.processed=!0);var h=[],f=[];for(n=0;n<o.length;n++)a=o[n],h.push(a.bone),f.push(a.boneInverse);return new r._61(h,f)}function Ce(e,t,n){e.traverse(function(e){if(!0===e.isBone){for(var a,i=0;i<t.length;i++){var s=t[i];if(s.name===e.name){a=s.boneInverse;break}}void 0===a&&(a=new r._14),n.push({bone:e,boneInverse:a,processed:!1})}})}function Ie(e){for(var t,n=[],a=e.matrix,i=e.nodes,s=e.type,o=e.instanceCameras,c=e.instanceControllers,l=e.instanceLights,u=e.instanceGeometries,d=e.instanceNodes,f=0,p=i.length;f<p;f++)n.push(Le(i[f]));for(f=0,p=o.length;f<p;f++){var m=Y(o[f]);null!==m&&n.push(m.clone())}for(f=0,p=c.length;f<p;f++)for(var v=c[f],g=(t=v.id,h(Xe.controllers[t],O)),b=Me(de(g.id),v.materials),y=Ee(v.skeletons,g.skin.joints),_=0,w=b.length;_<w;_++){var k;(k=b[_]).isSkinnedMesh&&(k.bind(y,g.skin.bindMatrix),k.normalizeSkinWeights()),n.push(k)}for(f=0,p=l.length;f<p;f++){var N=re(l[f]);null!==N&&n.push(N.clone())}for(f=0,p=u.length;f<p;f++)for(_=0,w=(b=Me(de((v=u[f]).id),v.materials)).length;_<w;_++)n.push(b[_]);for(f=0,p=d.length;f<p;f++)n.push(Le(d[f]).clone());if(0===i.length&&1===n.length)k=n[0];else{k="JOINT"===s?new r.g:new r.M;for(f=0;f<n.length;f++)k.add(n[f])}return k.name="JOINT"===s?e.sid:e.name,k.matrix.copy(a),k.matrix.decompose(k.position,k.quaternion,k.scale),k}var Re=new r._16({color:16711935});function Oe(e,t){for(var n=[],r=0,a=e.length;r<a;r++){var i=t[e[r]];void 0===i?(console.warn("THREE.ColladaLoader: Material with key %s not found. Apply fallback material.",e[r]),n.push(Re)):n.push($(i))}return n}function Me(e,t){var n=[];for(var a in e){var i=e[a],s=Oe(i.materialKeys,t);0===s.length&&("lines"===a||"linestrips"===a?s.push(new r._0):s.push(new r._18));var o=void 0!==i.data.attributes.skinIndex;if(o)for(var c=0,l=s.length;c<l;c++)s[c].skinning=!0;var u,d=1===s.length?s[0]:s;switch(a){case"lines":u=new r._2(i.data,d);break;case"linestrips":u=new r.Y(i.data,d);break;case"triangles":case"polylist":u=o?new r._62(i.data,d):new r._15(i.data,d)}n.push(u)}return n}function je(e){return void 0!==Xe.nodes[e]}function Le(e){return h(Xe.nodes[e],Ie)}function Se(e){var t=new r.M;t.name=e.name;for(var n=e.children,a=0;a<n.length;a++){var i=n[a];t.add(Le(i.id))}return t}function He(e){return h(Xe.visualScenes[e],Se)}if(0===e.length)return{scene:new r._57};var Ue=(new DOMParser).parseFromString(e,"application/xml"),qe=n(Ue,"COLLADA")[0],Pe=Ue.getElementsByTagName("parsererror")[0];if(void 0!==Pe){var Fe,ze=n(Pe,"div")[0];return Fe=ze?ze.textContent:function(e){for(var t="",n=[e];n.length;){var r=n.shift();r.nodeType===Node.TEXT_NODE?t+=r.textContent:(t+="\n",n.push.apply(n,r.childNodes))}return t.trim()}(Pe),console.error("THREE.ColladaLoader: Failed to parse collada file.\n",Fe),null}var De=qe.getAttribute("version");console.log("THREE.ColladaLoader: File version",De);var Be,Ge=function(e){return{unit:function(e){return void 0!==e&&!0===e.hasAttribute("meter")?parseFloat(e.getAttribute("meter")):1}(n(e,"unit")[0]),upAxis:function(e){return void 0!==e?e.textContent:"Y_UP"}(n(e,"up_axis")[0])}}(n(qe,"asset")[0]),We=new r._71(this.manager);We.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin),a&&(Be=new a(this.manager)).setPath(this.resourcePath||t);var Je=[],Ve={},$e=0,Xe={animations:{},clips:{},controllers:{},images:{},effects:{},materials:{},cameras:{},lights:{},geometries:{},nodes:{},visualScenes:{},kinematicsModels:{},physicsModels:{},kinematicsScenes:{}};u(qe,"library_animations","animation",function e(t){for(var n={sources:{},samplers:{},channels:{}},a=!1,i=0,s=t.childNodes.length;i<s;i++){var o,c=t.childNodes[i];if(1===c.nodeType)switch(c.nodeName){case"source":o=c.getAttribute("id"),n.sources[o]=ae(c);break;case"sampler":o=c.getAttribute("id"),n.samplers[o]=f(c);break;case"channel":o=c.getAttribute("target"),n.channels[o]=p(c);break;case"animation":e(c),a=!0;break;default:console.log(c)}}!1===a&&(Xe.animations[t.getAttribute("id")||r._12.generateUUID()]=n)}),u(qe,"library_animation_clips","animation_clip",function(e){for(var t={name:e.getAttribute("id")||"default",start:parseFloat(e.getAttribute("start")||0),end:parseFloat(e.getAttribute("end")||0),animations:[]},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"instance_animation":t.animations.push(c(a.getAttribute("url")))}}Xe.clips[e.getAttribute("id")]=t}),u(qe,"library_controllers","controller",function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"skin":t.id=c(a.getAttribute("source")),t.skin=C(a);break;case"morph":t.id=c(a.getAttribute("source")),console.warn("THREE.ColladaLoader: Morph target animation not supported yet.")}}Xe.controllers[e.getAttribute("id")]=t}),u(qe,"library_images","image",function(e){var t={init_from:n(e,"init_from")[0].textContent};Xe.images[e.getAttribute("id")]=t}),u(qe,"library_effects","effect",function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"profile_COMMON":t.profile=L(a)}}Xe.effects[e.getAttribute("id")]=t}),u(qe,"library_materials","material",function(e){for(var t={name:e.getAttribute("name")},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"instance_effect":t.url=c(a.getAttribute("url"))}}Xe.materials[e.getAttribute("id")]=t}),u(qe,"library_cameras","camera",function(e){for(var t={name:e.getAttribute("name")},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"optics":t.optics=X(a)}}Xe.cameras[e.getAttribute("id")]=t}),u(qe,"library_lights","light",function(e){for(var t={},n=0,r=e.childNodes.length;n<r;n++){var a=e.childNodes[n];if(1===a.nodeType)switch(a.nodeName){case"technique_common":t=ee(a)}}Xe.lights[e.getAttribute("id")]=t}),u(qe,"library_geometries","geometry",function(e){var t={name:e.getAttribute("name"),sources:{},vertices:{},primitives:[]},r=n(e,"mesh")[0];if(void 0!==r){for(var a=0;a<r.childNodes.length;a++){var i=r.childNodes[a];if(1===i.nodeType){var s=i.getAttribute("id");switch(i.nodeName){case"source":t.sources[s]=ae(i);break;case"vertices":t.vertices=ie(i);break;case"polygons":console.warn("THREE.ColladaLoader: Unsupported primitive type: ",i.nodeName);break;case"lines":case"linestrips":case"polylist":case"triangles":t.primitives.push(se(i));break;default:console.log(i)}}}Xe.geometries[e.getAttribute("id")]=t}}),u(qe,"library_nodes","node",xe),u(qe,"library_visual_scenes","visual_scene",function(e){var t={name:e.getAttribute("name"),children:[]};!function(e){for(var t=e.getElementsByTagName("node"),n=0;n<t.length;n++){var r=t[n];!1===r.hasAttribute("id")&&r.setAttribute("id","three_default_"+$e++)}}(e);for(var r=n(e,"node"),a=0;a<r.length;a++)t.children.push(xe(r[a]));Xe.visualScenes[e.getAttribute("id")]=t}),u(qe,"library_kinematics_models","kinematics_model",function(e){for(var t={name:e.getAttribute("name")||"",joints:{},links:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"technique_common":fe(r,t)}}Xe.kinematicsModels[e.getAttribute("id")]=t}),u(qe,"library_physics_models","physics_model",function(e){for(var t={name:e.getAttribute("name")||"",rigidBodies:{}},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"rigid_body":t.rigidBodies[r.getAttribute("name")]={},ye(r,t.rigidBodies[r.getAttribute("name")])}}Xe.physicsModels[e.getAttribute("id")]=t}),u(qe,"scene","instance_kinematics_scene",function(e){for(var t={bindJointAxis:[]},n=0;n<e.childNodes.length;n++){var r=e.childNodes[n];if(1===r.nodeType)switch(r.nodeName){case"bind_joint_axis":t.bindJointAxis.push(we(r))}}Xe.kinematicsScenes[c(e.getAttribute("url"))]=t}),d(Xe.animations,m),d(Xe.clips,A),d(Xe.controllers,O),d(Xe.images,M),d(Xe.effects,J),d(Xe.materials,V),d(Xe.cameras,Z),d(Xe.lights,ne),d(Xe.geometries,ce),d(Xe.visualScenes,Se),function(){var e=Xe.clips;if(!0===l(e)){if(!1===l(Xe.animations)){var t=[];for(var n in Xe.animations)for(var a=v(n),i=0,s=a.length;i<s;i++)t.push(a[i]);Je.push(new r.d("default",-1,t))}}else for(var n in e)Je.push(E(n))}(),function(){var e=Object.keys(Xe.kinematicsModels)[0],t=Object.keys(Xe.kinematicsScenes)[0],n=Object.keys(Xe.visualScenes)[0];if(void 0!==e&&void 0!==t){for(var a,i=(a=e,h(Xe.kinematicsModels[a],he)),o=function(e){return h(Xe.kinematicsScenes[e],ke)}(t),c=He(n),l=o.bindJointAxis,u={},d=0,f=l.length;d<f;d++){var p=l[d],m=qe.querySelector('[sid="'+p.target+'"]');if(m){var v=m.parentElement;b(p.jointIndex,v)}}var g=new r._14;Ve={joints:i&&i.joints,getJointValue:function(e){var t=u[e];if(t)return t.position;console.warn("THREE.ColladaLoader: Joint "+e+" doesn't exist.")},setJointValue:function(e,t){var n=u[e];if(n){var a=n.joint;if(t>a.limits.max||t<a.limits.min)console.warn("THREE.ColladaLoader: Joint "+e+" value "+t+" outside of limits (min: "+a.limits.min+", max: "+a.limits.max+").");else if(a.static)console.warn("THREE.ColladaLoader: Joint "+e+" is static.");else{var i=n.object,s=a.axis,o=n.transforms;Ne.identity();for(var c=0;c<o.length;c++){var l=o[c];if(l.sid&&-1!==l.sid.indexOf(e))switch(a.type){case"revolute":Ne.multiply(g.makeRotationAxis(s,r._12.degToRad(t)));break;case"prismatic":Ne.multiply(g.makeTranslation(s.x*t,s.y*t,s.z*t));break;default:console.warn("THREE.ColladaLoader: Unknown joint type: "+a.type)}else switch(l.type){case"matrix":Ne.multiply(l.obj);break;case"translate":Ne.multiply(g.makeTranslation(l.obj.x,l.obj.y,l.obj.z));break;case"scale":Ne.scale(l.obj);break;case"rotate":Ne.multiply(g.makeRotationAxis(l.obj,l.angle))}}i.matrix.copy(Ne),i.matrix.decompose(i.position,i.quaternion,i.scale),u[e].position=t}}else console.log("THREE.ColladaLoader: "+e+" does not exist.")}}}function b(e,t){var n=t.getAttribute("name"),a=i.joints[e];c.traverse(function(i){i.name===n&&(u[e]={object:i,transforms:function(e){for(var t=[],n=qe.querySelector('[id="'+e.id+'"]'),a=0;a<n.childNodes.length;a++){var i=n.childNodes[a];if(1===i.nodeType)switch(i.nodeName){case"matrix":var o=s(i.textContent),c=(new r._14).fromArray(o).transpose();t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:c});break;case"translate":case"scale":var o=s(i.textContent),l=(new r._82).fromArray(o);t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:l});break;case"rotate":var o=s(i.textContent),l=(new r._82).fromArray(o),u=r._12.degToRad(o[3]);t.push({sid:i.getAttribute("sid"),type:i.nodeName,obj:l,angle:u})}}return t}(t),joint:a,position:a.zeroPosition})})}}();var Ke=function(e){return He(c(n(e,"instance_visual_scene")[0].getAttribute("url")))}(n(qe,"scene")[0]);return"Z_UP"===Ge.upAxis&&Ke.quaternion.setFromEuler(new r.E(-Math.PI/2,0,0)),Ke.scale.multiplyScalar(Ge.unit),{animations:Je,kinematics:Ve,library:Xe,scene:Ke}}})},"8GJm":function(e,t,n){"use strict";(function(e,r){n.d(t,"a",function(){return c});var a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},i=function(){this._tweens={},this._tweensAddedDuringUpdate={}};i.prototype={getAll:function(){return Object.keys(this._tweens).map(function(e){return this._tweens[e]}.bind(this))},removeAll:function(){this._tweens={}},add:function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},remove:function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},update:function(e,t){var n=Object.keys(this._tweens);if(0===n.length)return!1;for(e=void 0!==e?e:c.now();0<n.length;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var a=this._tweens[n[r]];a&&!1===a.update(e)&&(a._isPlaying=!1,t||delete this._tweens[n[r]])}n=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var s,o,c=new i;c.Group=i,c._nextId=0,c.nextId=function(){return c._nextId++},"undefined"==typeof self&&void 0!==e&&e.hrtime?c.now=function(){var t=e.hrtime();return 1e3*t[0]+t[1]/1e6}:"undefined"!=typeof self&&void 0!==self.performance&&void 0!==self.performance.now?c.now=self.performance.now.bind(self.performance):void 0!==Date.now?c.now=Date.now:c.now=function(){return(new Date).getTime()},c.Tween=function(e,t){this._object=e,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._easingFunction=c.Easing.Linear.None,this._interpolationFunction=c.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=t||c,this._id=c.nextId()},c.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},to:function(e,t){return this._valuesEnd=Object.create(e),void 0!==t&&(this._duration=t),this},duration:function(e){return this._duration=e,this},start:function(e){for(var t in this._group.add(this),this._isPlaying=!0,this._onStartCallbackFired=!1,this._startTime=void 0!==e?"string"==typeof e?c.now()+parseFloat(e):e:c.now(),this._startTime+=this._delayTime,this._valuesEnd){if(this._valuesEnd[t]instanceof Array){if(0===this._valuesEnd[t].length)continue;this._valuesEnd[t]=[this._object[t]].concat(this._valuesEnd[t])}void 0!==this._object[t]&&(this._valuesStart[t]=this._object[t],this._valuesStart[t]instanceof Array==0&&(this._valuesStart[t]*=1),this._valuesStartRepeat[t]=this._valuesStart[t]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0),this},stopChainedTweens:function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop()},group:function(e){return this._group=e,this},delay:function(e){return this._delayTime=e,this},repeat:function(e){return this._repeat=e,this},repeatDelay:function(e){return this._repeatDelayTime=e,this},yoyo:function(e){return this._yoyo=e,this},easing:function(e){return this._easingFunction=e,this},interpolation:function(e){return this._interpolationFunction=e,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(e){return this._onStartCallback=e,this},onUpdate:function(e){return this._onUpdateCallback=e,this},onComplete:function(e){return this._onCompleteCallback=e,this},onStop:function(e){return this._onStopCallback=e,this},update:function(e){var t,n,r;if(e<this._startTime)return!0;for(t in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),n=(e-this._startTime)/this._duration,n=0===this._duration||1<n?1:n,r=this._easingFunction(n),this._valuesEnd)if(void 0!==this._valuesStart[t]){var a=this._valuesStart[t]||0,i=this._valuesEnd[t];i instanceof Array?this._object[t]=this._interpolationFunction(i,r):("string"==typeof i&&(i="+"===i.charAt(0)||"-"===i.charAt(0)?a+parseFloat(i):parseFloat(i)),"number"==typeof i&&(this._object[t]=a+(i-a)*r))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object),1!==n)return!0;if(0<this._repeat){for(t in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[t]&&(this._valuesStartRepeat[t]=this._valuesStartRepeat[t]+parseFloat(this._valuesEnd[t])),this._yoyo){var s=this._valuesStartRepeat[t];this._valuesStartRepeat[t]=this._valuesEnd[t],this._valuesEnd[t]=s}this._valuesStart[t]=this._valuesStartRepeat[t]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=e+this._repeatDelayTime:this._startTime=e+this._delayTime,!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,c=this._chainedTweens.length;o<c;o++)this._chainedTweens[o].start(this._startTime+this._duration);return!1}},c.Easing={Linear:{None:function(e){return e}},Quadratic:{In:function(e){return e*e},Out:function(e){return e*(2-e)},InOut:function(e){return(e*=2)<1?.5*e*e:-.5*(--e*(e-2)-1)}},Cubic:{In:function(e){return e*e*e},Out:function(e){return--e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e:.5*((e-=2)*e*e+2)}},Quartic:{In:function(e){return e*e*e*e},Out:function(e){return 1- --e*e*e*e},InOut:function(e){return(e*=2)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)}},Quintic:{In:function(e){return e*e*e*e*e},Out:function(e){return--e*e*e*e*e+1},InOut:function(e){return(e*=2)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)}},Sinusoidal:{In:function(e){return 1-Math.cos(e*Math.PI/2)},Out:function(e){return Math.sin(e*Math.PI/2)},InOut:function(e){return.5*(1-Math.cos(Math.PI*e))}},Exponential:{In:function(e){return 0===e?0:Math.pow(1024,e-1)},Out:function(e){return 1===e?1:1-Math.pow(2,-10*e)},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?.5*Math.pow(1024,e-1):.5*(2-Math.pow(2,-10*(e-1)))}},Circular:{In:function(e){return 1-Math.sqrt(1-e*e)},Out:function(e){return Math.sqrt(1- --e*e)},InOut:function(e){return(e*=2)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)}},Elastic:{In:function(e){return 0===e?0:1===e?1:-Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)},Out:function(e){return 0===e?0:1===e?1:Math.pow(2,-10*e)*Math.sin(5*(e-.1)*Math.PI)+1},InOut:function(e){return 0===e?0:1===e?1:(e*=2)<1?-.5*Math.pow(2,10*(e-1))*Math.sin(5*(e-1.1)*Math.PI):.5*Math.pow(2,-10*(e-1))*Math.sin(5*(e-1.1)*Math.PI)+1}},Back:{In:function(e){return e*e*(2.70158*e-1.70158)},Out:function(e){return--e*e*(2.70158*e+1.70158)+1},InOut:function(e){var t=2.5949095;return(e*=2)<1?e*e*((1+t)*e-t)*.5:.5*((e-=2)*e*((1+t)*e+t)+2)}},Bounce:{In:function(e){return 1-c.Easing.Bounce.Out(1-e)},Out:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},InOut:function(e){return e<.5?.5*c.Easing.Bounce.In(2*e):.5*c.Easing.Bounce.Out(2*e-1)+.5}}},c.Interpolation={Linear:function(e,t){var n=e.length-1,r=n*t,a=Math.floor(r),i=c.Interpolation.Utils.Linear;return t<0?i(e[0],e[1],r):1<t?i(e[n],e[n-1],n-r):i(e[a],e[n<a+1?n:a+1],r-a)},Bezier:function(e,t){for(var n=0,r=e.length-1,a=Math.pow,i=c.Interpolation.Utils.Bernstein,s=0;s<=r;s++)n+=a(1-t,r-s)*a(t,s)*e[s]*i(r,s);return n},CatmullRom:function(e,t){var n=e.length-1,r=n*t,a=Math.floor(r),i=c.Interpolation.Utils.CatmullRom;return e[0]===e[n]?(t<0&&(a=Math.floor(r=n*(1+t))),i(e[(a-1+n)%n],e[a],e[(a+1)%n],e[(a+2)%n],r-a)):t<0?e[0]-(i(e[0],e[0],e[1],e[1],-r)-e[0]):1<t?e[n]-(i(e[n],e[n],e[n-1],e[n-1],r-n)-e[n]):i(e[a?a-1:0],e[a],e[n<a+1?n:a+1],e[n<a+2?n:a+2],r-a)},Utils:{Linear:function(e,t,n){return(t-e)*n+e},Bernstein:function(e,t){var n=c.Interpolation.Utils.Factorial;return n(e)/n(t)/n(e-t)},Factorial:(o=[1],function(e){var t=1;if(o[e])return o[e];for(var n=e;1<n;n--)t*=n;return o[e]=t}),CatmullRom:function(e,t,n,r,a){var i=.5*(n-e),s=.5*(r-t),o=a*a;return(2*t-2*n+i+s)*(a*o)+(-3*t+3*n-2*i-s)*o+i*a+t}}},s=this,"function"==typeof define&&n("nErl")?define([],function(){return c}):void 0!==r&&"object"==("undefined"==typeof exports?"undefined":a(exports))?r.exports=c:void 0!==s&&(s.TWEEN=c)}).call(t,n("W2nU"),n("f1Eh")(e))},Eqf5:function(e,t){},JXl4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("8GJm"),a=n("5AVf"),i={data:function(){return{container:null,stats:null,camera:null,scene:null,renderer:null,particleLight:null,dae:null,kinematics:null,kinematicsTween:null,tweenParameters:{},loader:null}},mounted:function(){var e=this;this.loader=new a.a,this.loader.load("static/models/collada/abb_irb52_7_120.dae",function(t){e.dae=t.scene,e.dae.traverse(function(e){e.isMesh&&(e.material.flatShading=!0)}),e.dae.scale.x=e.dae.scale.y=e.dae.scale.z=10,e.dae.updateMatrix(),e.kinematics=t.kinematics,e.init(),e.animate()})},methods:{init:function(){this.container=document.createElement("div"),document.getElementsByClassName("webglLoaderColladaKnematics-container")[0].appendChild(this.container),this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,1,2e3),this.camera.position.set(2,2,3),this.scene=new this.$THREE.Scene;var e=new this.$THREE.GridHelper(20,20,8947848,4473924);this.scene.add(e),this.scene.add(this.dae),this.particleLight=new this.$THREE.Mesh(new this.$THREE.SphereBufferGeometry(4,8,8),new this.$THREE.MeshBasicMaterial({color:16777215})),this.scene.add(this.particleLight);var t=new this.$THREE.HemisphereLight(16772846,1118498);this.scene.add(t);var n=new this.$THREE.PointLight(16777215,.3);this.particleLight.add(n),this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),this.setupTween(),window.addEventListener("resize",this.onWindowResize,!1)},setupTween:function(){var e=this,t=this.$THREE.MathUtils.randInt(1e3,5e3),n={};for(var a in this.kinematics.joints)if(this.kinematics.joints.hasOwnProperty(a)&&!this.kinematics.joints[a].static){var i=this.kinematics.joints[a],s=this.tweenParameters[a],o=s||i.zeroPosition;this.tweenParameters[a]=o,n[a]=this.$THREE.MathUtils.randInt(i.limits.min,i.limits.max)}this.kinematicsTween=new r.a.Tween(this.tweenParameters).to(n,t).easing(r.a.Easing.Quadratic.Out),this.kinematicsTween.onUpdate(function(t){for(var n in e.kinematics.joints)e.kinematics.joints.hasOwnProperty(n)&&(e.kinematics.joints[n].static||e.kinematics.setJointValue(n,t[n]))}),this.kinematicsTween.start(),setTimeout(this.setupTween,t)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update(),r.a.update()},render:function(){var e=1e-4*Date.now();this.camera.position.x=20*Math.cos(e),this.camera.position.y=10,this.camera.position.z=20*Math.sin(e),this.camera.lookAt(0,5,0),this.particleLight.position.x=3009*Math.sin(4*e),this.particleLight.position.y=4e3*Math.cos(5*e),this.particleLight.position.z=3009*Math.cos(4*e),this.renderer.render(this.scene,this.camera)}}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoaderColladaKnematics-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" collada loader - kinematics"),t("br"),this._v("\n\t\t\trobot from "),t("a",{attrs:{href:"https://github.com/rdiankov/collada_robots",target:"_blank",rel:"noopener"}},[this._v("collada robots")])])])}]};var o=n("VU/8")(i,s,!1,function(e){n("Eqf5")},"data-v-112779d2",null);t.default=o.exports},W2nU:function(e,t){var n,r,a=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(n===setTimeout)return setTimeout(e,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,l=[],u=!1,d=-1;function h(){u&&c&&(u=!1,c.length?l=c.concat(l):d=-1,l.length&&f())}function f(){if(!u){var e=o(h);u=!0;for(var t=l.length;t;){for(c=l,l=[];++d<t;)c&&c[d].run();d=-1,t=l.length}c=null,u=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function m(){}a.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];l.push(new p(e,t)),1!==l.length||u||o(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},a.title="browser",a.browser=!0,a.env={},a.argv=[],a.version="",a.versions={},a.on=m,a.addListener=m,a.once=m,a.off=m,a.removeListener=m,a.removeAllListeners=m,a.emit=m,a.prependListener=m,a.prependOnceListener=m,a.listeners=function(e){return[]},a.binding=function(e){throw new Error("process.binding is not supported")},a.cwd=function(){return"/"},a.chdir=function(e){throw new Error("process.chdir is not supported")},a.umask=function(){return 0}}});
//# sourceMappingURL=1.151a22a544964aedc6ab.js.map