{"version":3,"sources":["webpack:///src/views/loader/webglLoaderPdb.vue","webpack:///./src/views/loader/webglLoaderPdb.vue?7ff4","webpack:///./src/views/loader/webglLoaderPdb.vue","webpack:///./src/components/jsm/loaders/PDBLoader.js","webpack:///./src/components/jsm/renderers/CSS2DRenderer.js"],"names":["webglLoaderPdb","data","camera","scene","renderer","labelRenderer","controls","root","MOLECULES","Ethanol","Aspirin","Caffeine","Nicotine","LSD","Cocaine","Cholesterol","Lycopene","Glucose","Aluminium oxide","Cubane","Copper","Fluorite","Salt","YBCO superconductor","Buckyball","Graphite","loader","offset","menu","mounted","this","PDBLoader","$THREE","Vector3","document","getElementById","init","animate","methods","Scene","background","Color","PerspectiveCamera","$webglInnerWidth","window","innerHeight","position","z","add","light1","DirectionalLight","set","light2","Group","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","appendChild","domElement","CSS2DRenderer","style","top","left","pointerEvents","TrackballControls","minDistance","maxDistance","loadMolecule","createMenu","addEventListener","onWindowResize","generateButtonCallback","url","_this","m","button","createElement","innerHTML","_this2","children","length","object","parent","remove","load","pdb","geometryAtoms","geometryBonds","json","boxGeometry","BoxBufferGeometry","sphereGeometry","IcosahedronBufferGeometry","computeBoundingBox","boundingBox","getCenter","negate","translate","x","y","positions","getAttribute","colors","color","i","count","getX","getY","getZ","r","g","b","material","MeshPhongMaterial","Mesh","copy","multiplyScalar","scale","atom","atoms","text","className","textContent","label","start","end","lerp","distanceTo","lookAt","render","$onWindowResize","innerWidth","requestAnimationFrame","update","time","Date","now","rotation","loader_webglLoaderPdb","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","id","_v","href","target","rel","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","d","__WEBPACK_IMPORTED_MODULE_0__components_build_three_module_js__","manager","Loader","call","prototype","Object","assign","create","constructor","onLoad","onProgress","onError","scope","FileLoader","setPath","path","setRequestHeader","requestHeader","setWithCredentials","withCredentials","parse","e","console","error","itemError","trim","replace","capitalize","charAt","toUpperCase","substr","toLowerCase","parseBond","s","eatom","parseInt","lines","h","satom","Math","min","max","undefined","_bhash","_bonds","push","index","CPK","he","li","be","c","n","o","f","ne","na","mg","al","si","p","cl","ar","k","ca","sc","ti","v","cr","mn","fe","co","ni","cu","zn","ga","ge","as","se","br","kr","rb","sr","zr","nb","mo","tc","ru","rh","pd","ag","cd","in","sn","sb","te","xe","cs","ba","la","ce","pr","nd","pm","sm","eu","gd","tb","dy","ho","er","tm","yb","lu","hf","ta","w","re","os","ir","pt","au","hg","tl","pb","bi","po","at","rn","fr","ra","ac","th","pa","u","np","pu","am","cm","bk","cf","es","fm","md","no","lr","rf","db","sg","bh","hs","mt","ds","rg","cn","uut","uuq","uup","uuh","uus","uuo","_atomMap","split","l","parseFloat","atomData","build","BufferGeometry","verticesAtoms","colorsAtoms","verticesBonds","bond","startAtom","endAtom","setAttribute","Float32BufferAttribute","buildGeometry","CSS2DObject","element","Object3D","traverse","Element","parentNode","removeChild","source","recursive","cloneNode","_width","_height","_widthHalf","_heightHalf","vector","viewMatrix","Matrix4","viewProjectionMatrix","cache","objects","WeakMap","overflow","getSize","width","height","a","getDistanceToSquared","object1","object2","setFromMatrixPosition","matrixWorld","distanceToSquared","zOrder","sorted","result","filterAndFlatten","sort","get","distanceToCameraSquared","zMax","zIndex","autoUpdate","updateMatrixWorld","matrixWorldInverse","multiplyMatrices","projectionMatrix","renderObject","onBeforeRender","applyMatrix4","WebkitTransform","MozTransform","oTransform","transform","display","visible","objectData","onAfterRender"],"mappings":"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","file":"static/js/10.e94ea53f88c6f418222a.js","sourcesContent":["<template>\r\n    <div class=\"webglLoaderPdb-container\">\r\n        <div id=\"container\"></div>\r\n\t\t<div id=\"info\"><a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js webgl</a> - molecules</div>\r\n\t\t<div id=\"menu\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { TrackballControls } from '@/components/jsm/controls/TrackballControls.js'\r\nimport { PDBLoader } from '@/components/jsm/loaders/PDBLoader.js'\r\nimport { CSS2DRenderer, CSS2DObject } from '@/components/jsm/renderers/CSS2DRenderer.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            camera: null,\r\n            scene: null,\r\n            renderer: null,\r\n            labelRenderer: null,\r\n\t\t\tcontrols: null,\r\n\t\t\troot: null,\r\n\t\t\tMOLECULES: {\r\n\t\t\t\t\"Ethanol\": \"ethanol.pdb\",\r\n\t\t\t\t\"Aspirin\": \"aspirin.pdb\",\r\n\t\t\t\t\"Caffeine\": \"caffeine.pdb\",\r\n\t\t\t\t\"Nicotine\": \"nicotine.pdb\",\r\n\t\t\t\t\"LSD\": \"lsd.pdb\",\r\n\t\t\t\t\"Cocaine\": \"cocaine.pdb\",\r\n\t\t\t\t\"Cholesterol\": \"cholesterol.pdb\",\r\n\t\t\t\t\"Lycopene\": \"lycopene.pdb\",\r\n\t\t\t\t\"Glucose\": \"glucose.pdb\",\r\n\t\t\t\t\"Aluminium oxide\": \"Al2O3.pdb\",\r\n\t\t\t\t\"Cubane\": \"cubane.pdb\",\r\n\t\t\t\t\"Copper\": \"cu.pdb\",\r\n\t\t\t\t\"Fluorite\": \"caf2.pdb\",\r\n\t\t\t\t\"Salt\": \"nacl.pdb\",\r\n\t\t\t\t\"YBCO superconductor\": \"ybco.pdb\",\r\n\t\t\t\t\"Buckyball\": \"buckyball.pdb\",\r\n\t\t\t\t\"Graphite\": \"graphite.pdb\"\r\n\t\t\t},\r\n\t\t\tloader: null,\r\n\t\t\toffset: null,\r\n\t\t\tmenu: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.loader = new PDBLoader()\r\n        this.offset = new this.$THREE.Vector3()\r\n        this.menu = document.getElementById('menu')\r\n        this.init()\r\n        this.animate()\r\n    },\r\n    methods: {\r\n        init() {\r\n            this.scene = new this.$THREE.Scene()\r\n            this.scene.background = new this.$THREE.Color(0x050505)\r\n            this.camera = new this.$THREE.PerspectiveCamera(70, this.$webglInnerWidth / window.innerHeight, 1, 5000)\r\n            this.camera.position.z = 1000\r\n            this.scene.add(this.camera)\r\n            var light1 = new this.$THREE.DirectionalLight(0xffffff, 0.8)\r\n            light1.position.set(1, 1, 1)\r\n            this.scene.add(light1)\r\n            var light2 = new this.$THREE.DirectionalLight(0xffffff, 0.5)\r\n            light2.position.set(- 1, - 1, 1)\r\n            this.scene.add(light2)\r\n            this.root = new this.$THREE.Group()\r\n            this.scene.add(this.root)\r\n            //\r\n            this.renderer = new this.$THREE.WebGLRenderer({ antialias: true })\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            document.getElementById('container').appendChild(this.renderer.domElement)\r\n            this.labelRenderer = new CSS2DRenderer()\r\n            this.labelRenderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            this.labelRenderer.domElement.style.position = 'absolute'\r\n            this.labelRenderer.domElement.style.top = '0px'\r\n            this.labelRenderer.domElement.style.left = '281px'\r\n            this.labelRenderer.domElement.style.pointerEvents = 'none'\r\n            document.getElementById('container').appendChild(this.labelRenderer.domElement)\r\n            //\r\n            this.controls = new TrackballControls(this.camera, this.renderer.domElement)\r\n            this.controls.minDistance = 500\r\n            this.controls.maxDistance = 2000\r\n            //\r\n            this.loadMolecule('static/models/pdb/caffeine.pdb')\r\n            this.createMenu()\r\n            //\r\n            window.addEventListener('resize', this.onWindowResize, false)\r\n        },\r\n        generateButtonCallback(url) {\r\n            return () => {\r\n                this.loadMolecule(url)\r\n            }\r\n        },\r\n        createMenu() {\r\n            for (var m in this.MOLECULES) {\r\n                var button = document.createElement('button')\r\n                button.innerHTML = m\r\n                this.menu.appendChild(button)\r\n                var url = 'static/models/pdb/' + this.MOLECULES[ m ]\r\n                button.addEventListener('click', this.generateButtonCallback(url), false)\r\n            }\r\n        },\r\n        loadMolecule(url) {\r\n            while (this.root.children.length > 0) {\r\n                var object = this.root.children[ 0 ]\r\n                object.parent.remove(object)\r\n            }\r\n            this.loader.load(url, (pdb) => {\r\n                var geometryAtoms = pdb.geometryAtoms\r\n                var geometryBonds = pdb.geometryBonds\r\n                var json = pdb.json\r\n                var boxGeometry = new this.$THREE.BoxBufferGeometry(1, 1, 1)\r\n                var sphereGeometry = new this.$THREE.IcosahedronBufferGeometry(1, 3)\r\n                geometryAtoms.computeBoundingBox()\r\n                geometryAtoms.boundingBox.getCenter(this.offset).negate()\r\n                geometryAtoms.translate(this.offset.x, this.offset.y, this.offset.z)\r\n                geometryBonds.translate(this.offset.x, this.offset.y, this.offset.z)\r\n                var positions = geometryAtoms.getAttribute('position')\r\n                var colors = geometryAtoms.getAttribute('color')\r\n                var position = new this.$THREE.Vector3()\r\n                var color = new this.$THREE.Color()\r\n                for (var i = 0; i < positions.count; i ++) {\r\n                    position.x = positions.getX(i)\r\n                    position.y = positions.getY(i)\r\n                    position.z = positions.getZ(i)\r\n                    color.r = colors.getX(i)\r\n                    color.g = colors.getY(i)\r\n                    color.b = colors.getZ(i)\r\n                    var material = new this.$THREE.MeshPhongMaterial({ color: color })\r\n                    var object = new this.$THREE.Mesh(sphereGeometry, material)\r\n                    object.position.copy(position)\r\n                    object.position.multiplyScalar(75)\r\n                    object.scale.multiplyScalar(25)\r\n                    this.root.add(object)\r\n                    var atom = json.atoms[ i ]\r\n                    var text = document.createElement('div')\r\n                    text.className = 'label'\r\n                    text.style.color = 'rgb(' + atom[ 3 ][ 0 ] + ',' + atom[ 3 ][ 1 ] + ',' + atom[ 3 ][ 2 ] + ')'\r\n                    text.textContent = atom[ 4 ]\r\n                    var label = new CSS2DObject(text)\r\n                    label.position.copy(object.position)\r\n                    this.root.add(label)\r\n                }\r\n                positions = geometryBonds.getAttribute('position')\r\n                var start = new this.$THREE.Vector3()\r\n                var end = new this.$THREE.Vector3()\r\n                for (var i = 0; i < positions.count; i += 2) {\r\n                    start.x = positions.getX(i)\r\n                    start.y = positions.getY(i)\r\n                    start.z = positions.getZ(i)\r\n                    end.x = positions.getX(i + 1)\r\n                    end.y = positions.getY(i + 1)\r\n                    end.z = positions.getZ(i + 1)\r\n                    start.multiplyScalar(75)\r\n                    end.multiplyScalar(75)\r\n                    var object = new this.$THREE.Mesh(boxGeometry, new this.$THREE.MeshPhongMaterial(0xffffff))\r\n                    object.position.copy(start)\r\n                    object.position.lerp(end, 0.5)\r\n                    object.scale.set(5, 5, start.distanceTo(end))\r\n                    object.lookAt(end)\r\n                    this.root.add(object)\r\n                }\r\n                this.render()\r\n            })\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n            this.labelRenderer.setSize(window.innerWidth - 281, window.innerHeight)\r\n            this.render()\r\n        },\r\n        animate() {\r\n            requestAnimationFrame(this.animate)\r\n            this.controls.update()\r\n            var time = Date.now() * 0.0004\r\n            this.root.rotation.x = time\r\n            this.root.rotation.y = time * 0.7\r\n            this.render()\r\n        },\r\n        render() {\r\n            this.renderer.render(this.scene, this.camera)\r\n            this.labelRenderer.render(this.scene, this.camera)\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.webglLoaderPdb-container {\r\n    position: relative;\r\n    width: 100%;\r\n}\r\n#menu {\r\n    position: absolute;\r\n    bottom: 20px;\r\n    width: 100%;\r\n    text-align: center;\r\n    padding: 0;\r\n    margin: 0;\r\n}\r\n\r\nbutton {\r\n    color: rgb(255,255,255);\r\n    background: transparent;\r\n    border: 0px;\r\n    padding: 5px 10px;\r\n    cursor: pointer;\r\n}\r\nbutton:hover {\r\n    background-color: rgba(0,255,255,0.5);\r\n}\r\nbutton:active {\r\n    color: #000000;\r\n    background-color: rgba(0,255,255,1);\r\n}\r\n\r\n.label {\r\n    text-shadow: -1px 1px 1px rgb(0,0,0);\r\n    margin-left: 25px;\r\n    font-size: 20px;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/loader/webglLoaderPdb.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"webglLoaderPdb-container\"},[_c('div',{attrs:{\"id\":\"container\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js webgl\")]),_vm._v(\" - molecules\")]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"menu\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-de9cdc1c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/loader/webglLoaderPdb.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-de9cdc1c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webglLoaderPdb.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglLoaderPdb.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglLoaderPdb.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-de9cdc1c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webglLoaderPdb.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-de9cdc1c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/loader/webglLoaderPdb.vue\n// module id = null\n// module chunks = ","import {\r\n\tBufferGeometry,\r\n\tFileLoader,\r\n\tFloat32BufferAttribute,\r\n\tLoader\r\n} from \"@/components/build/three.module.js\";\r\n\r\nvar PDBLoader = function ( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n};\r\n\r\nPDBLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: PDBLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.setWithCredentials( scope.withCredentials );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\t// Based on CanvasMol PDB parser\r\n\r\n\tparse: function ( text ) {\r\n\r\n\t\tfunction trim( text ) {\r\n\r\n\t\t\treturn text.replace( /^\\s\\s*/, '' ).replace( /\\s\\s*$/, '' );\r\n\r\n\t\t}\r\n\r\n\t\tfunction capitalize( text ) {\r\n\r\n\t\t\treturn text.charAt( 0 ).toUpperCase() + text.substr( 1 ).toLowerCase();\r\n\r\n\t\t}\r\n\r\n\t\tfunction hash( s, e ) {\r\n\r\n\t\t\treturn 's' + Math.min( s, e ) + 'e' + Math.max( s, e );\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseBond( start, length ) {\r\n\r\n\t\t\tvar eatom = parseInt( lines[ i ].substr( start, length ) );\r\n\r\n\t\t\tif ( eatom ) {\r\n\r\n\t\t\t\tvar h = hash( satom, eatom );\r\n\r\n\t\t\t\tif ( _bhash[ h ] === undefined ) {\r\n\r\n\t\t\t\t\t_bonds.push( [ satom - 1, eatom - 1, 1 ] );\r\n\t\t\t\t\t_bhash[ h ] = _bonds.length - 1;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// doesn't really work as almost all PDBs\r\n\t\t\t\t\t// have just normal bonds appearing multiple\r\n\t\t\t\t\t// times instead of being double/triple bonds\r\n\t\t\t\t\t// bonds[bhash[h]][2] += 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildGeometry() {\r\n\r\n\t\t\tvar build = {\r\n\t\t\t\tgeometryAtoms: new BufferGeometry(),\r\n\t\t\t\tgeometryBonds: new BufferGeometry(),\r\n\t\t\t\tjson: {\r\n\t\t\t\t\tatoms: atoms\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar geometryAtoms = build.geometryAtoms;\r\n\t\t\tvar geometryBonds = build.geometryBonds;\r\n\r\n\t\t\tvar i, l;\r\n\t\t\tvar x, y, z;\r\n\r\n\t\t\tvar verticesAtoms = [];\r\n\t\t\tvar colorsAtoms = [];\r\n\t\t\tvar verticesBonds = [];\r\n\r\n\t\t\t// atoms\r\n\r\n\t\t\tfor ( i = 0, l = atoms.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar atom = atoms[ i ];\r\n\r\n\t\t\t\tx = atom[ 0 ];\r\n\t\t\t\ty = atom[ 1 ];\r\n\t\t\t\tz = atom[ 2 ];\r\n\r\n\t\t\t\tverticesAtoms.push( x, y, z );\r\n\r\n\t\t\t\tvar r = atom[ 3 ][ 0 ] / 255;\r\n\t\t\t\tvar g = atom[ 3 ][ 1 ] / 255;\r\n\t\t\t\tvar b = atom[ 3 ][ 2 ] / 255;\r\n\r\n\t\t\t\tcolorsAtoms.push( r, g, b );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// bonds\r\n\r\n\t\t\tfor ( i = 0, l = _bonds.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar bond = _bonds[ i ];\r\n\r\n\t\t\t\tvar start = bond[ 0 ];\r\n\t\t\t\tvar end = bond[ 1 ];\r\n\r\n\t\t\t\tvar startAtom = _atomMap[ start ];\r\n\t\t\t\tvar endAtom = _atomMap[ end ];\r\n\r\n\t\t\t\tx = startAtom[ 0 ];\r\n\t\t\t\ty = startAtom[ 1 ];\r\n\t\t\t\tz = startAtom[ 2 ];\r\n\r\n\t\t\t\tverticesBonds.push( x, y, z );\r\n\r\n\t\t\t\tx = endAtom[ 0 ];\r\n\t\t\t\ty = endAtom[ 1 ];\r\n\t\t\t\tz = endAtom[ 2 ];\r\n\r\n\t\t\t\tverticesBonds.push( x, y, z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// build geometry\r\n\r\n\t\t\tgeometryAtoms.setAttribute( 'position', new Float32BufferAttribute( verticesAtoms, 3 ) );\r\n\t\t\tgeometryAtoms.setAttribute( 'color', new Float32BufferAttribute( colorsAtoms, 3 ) );\r\n\r\n\t\t\tgeometryBonds.setAttribute( 'position', new Float32BufferAttribute( verticesBonds, 3 ) );\r\n\r\n\t\t\treturn build;\r\n\r\n\t\t}\r\n\r\n\t\tvar CPK = { h: [ 255, 255, 255 ], he: [ 217, 255, 255 ], li: [ 204, 128, 255 ], be: [ 194, 255, 0 ], b: [ 255, 181, 181 ], c: [ 144, 144, 144 ], n: [ 48, 80, 248 ], o: [ 255, 13, 13 ], f: [ 144, 224, 80 ], ne: [ 179, 227, 245 ], na: [ 171, 92, 242 ], mg: [ 138, 255, 0 ], al: [ 191, 166, 166 ], si: [ 240, 200, 160 ], p: [ 255, 128, 0 ], s: [ 255, 255, 48 ], cl: [ 31, 240, 31 ], ar: [ 128, 209, 227 ], k: [ 143, 64, 212 ], ca: [ 61, 255, 0 ], sc: [ 230, 230, 230 ], ti: [ 191, 194, 199 ], v: [ 166, 166, 171 ], cr: [ 138, 153, 199 ], mn: [ 156, 122, 199 ], fe: [ 224, 102, 51 ], co: [ 240, 144, 160 ], ni: [ 80, 208, 80 ], cu: [ 200, 128, 51 ], zn: [ 125, 128, 176 ], ga: [ 194, 143, 143 ], ge: [ 102, 143, 143 ], as: [ 189, 128, 227 ], se: [ 255, 161, 0 ], br: [ 166, 41, 41 ], kr: [ 92, 184, 209 ], rb: [ 112, 46, 176 ], sr: [ 0, 255, 0 ], y: [ 148, 255, 255 ], zr: [ 148, 224, 224 ], nb: [ 115, 194, 201 ], mo: [ 84, 181, 181 ], tc: [ 59, 158, 158 ], ru: [ 36, 143, 143 ], rh: [ 10, 125, 140 ], pd: [ 0, 105, 133 ], ag: [ 192, 192, 192 ], cd: [ 255, 217, 143 ], in: [ 166, 117, 115 ], sn: [ 102, 128, 128 ], sb: [ 158, 99, 181 ], te: [ 212, 122, 0 ], i: [ 148, 0, 148 ], xe: [ 66, 158, 176 ], cs: [ 87, 23, 143 ], ba: [ 0, 201, 0 ], la: [ 112, 212, 255 ], ce: [ 255, 255, 199 ], pr: [ 217, 255, 199 ], nd: [ 199, 255, 199 ], pm: [ 163, 255, 199 ], sm: [ 143, 255, 199 ], eu: [ 97, 255, 199 ], gd: [ 69, 255, 199 ], tb: [ 48, 255, 199 ], dy: [ 31, 255, 199 ], ho: [ 0, 255, 156 ], er: [ 0, 230, 117 ], tm: [ 0, 212, 82 ], yb: [ 0, 191, 56 ], lu: [ 0, 171, 36 ], hf: [ 77, 194, 255 ], ta: [ 77, 166, 255 ], w: [ 33, 148, 214 ], re: [ 38, 125, 171 ], os: [ 38, 102, 150 ], ir: [ 23, 84, 135 ], pt: [ 208, 208, 224 ], au: [ 255, 209, 35 ], hg: [ 184, 184, 208 ], tl: [ 166, 84, 77 ], pb: [ 87, 89, 97 ], bi: [ 158, 79, 181 ], po: [ 171, 92, 0 ], at: [ 117, 79, 69 ], rn: [ 66, 130, 150 ], fr: [ 66, 0, 102 ], ra: [ 0, 125, 0 ], ac: [ 112, 171, 250 ], th: [ 0, 186, 255 ], pa: [ 0, 161, 255 ], u: [ 0, 143, 255 ], np: [ 0, 128, 255 ], pu: [ 0, 107, 255 ], am: [ 84, 92, 242 ], cm: [ 120, 92, 227 ], bk: [ 138, 79, 227 ], cf: [ 161, 54, 212 ], es: [ 179, 31, 212 ], fm: [ 179, 31, 186 ], md: [ 179, 13, 166 ], no: [ 189, 13, 135 ], lr: [ 199, 0, 102 ], rf: [ 204, 0, 89 ], db: [ 209, 0, 79 ], sg: [ 217, 0, 69 ], bh: [ 224, 0, 56 ], hs: [ 230, 0, 46 ], mt: [ 235, 0, 38 ], ds: [ 235, 0, 38 ], rg: [ 235, 0, 38 ], cn: [ 235, 0, 38 ], uut: [ 235, 0, 38 ], uuq: [ 235, 0, 38 ], uup: [ 235, 0, 38 ], uuh: [ 235, 0, 38 ], uus: [ 235, 0, 38 ], uuo: [ 235, 0, 38 ] };\r\n\r\n\t\tvar atoms = [];\r\n\r\n\t\tvar _bonds = [];\r\n\t\tvar _bhash = {};\r\n\t\tvar _atomMap = {};\r\n\r\n\t\tvar x, y, z, index, e;\r\n\r\n\t\t// parse\r\n\r\n\t\tvar lines = text.split( '\\n' );\r\n\r\n\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( lines[ i ].substr( 0, 4 ) === 'ATOM' || lines[ i ].substr( 0, 6 ) === 'HETATM' ) {\r\n\r\n\t\t\t\tx = parseFloat( lines[ i ].substr( 30, 7 ) );\r\n\t\t\t\ty = parseFloat( lines[ i ].substr( 38, 7 ) );\r\n\t\t\t\tz = parseFloat( lines[ i ].substr( 46, 7 ) );\r\n\t\t\t\tindex = parseInt( lines[ i ].substr( 6, 5 ) ) - 1;\r\n\r\n\t\t\t\te = trim( lines[ i ].substr( 76, 2 ) ).toLowerCase();\r\n\r\n\t\t\t\tif ( e === '' ) {\r\n\r\n\t\t\t\t\te = trim( lines[ i ].substr( 12, 2 ) ).toLowerCase();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar atomData = [ x, y, z, CPK[ e ], capitalize( e ) ];\r\n\r\n\t\t\t\tatoms.push( atomData );\r\n\t\t\t\t_atomMap[ index ] = atomData;\r\n\r\n\t\t\t} else if ( lines[ i ].substr( 0, 6 ) === 'CONECT' ) {\r\n\r\n\t\t\t\tvar satom = parseInt( lines[ i ].substr( 6, 5 ) );\r\n\r\n\t\t\t\tparseBond( 11, 5 );\r\n\t\t\t\tparseBond( 16, 5 );\r\n\t\t\t\tparseBond( 21, 5 );\r\n\t\t\t\tparseBond( 26, 5 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// build and return geometry\r\n\r\n\t\treturn buildGeometry();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nexport { PDBLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/loaders/PDBLoader.js","import {\r\n\tMatrix4,\r\n\tObject3D,\r\n\tVector3\r\n} from \"@/components/build/three.module.js\";\r\n\r\nvar CSS2DObject = function ( element ) {\r\n\r\n\tObject3D.call( this );\r\n\r\n\tthis.element = element || document.createElement( 'div' );\r\n\r\n\tthis.element.style.position = 'absolute';\r\n\r\n\tthis.addEventListener( 'removed', function () {\r\n\r\n\t\tthis.traverse( function ( object ) {\r\n\r\n\t\t\tif ( object.element instanceof Element && object.element.parentNode !== null ) {\r\n\r\n\t\t\t\tobject.element.parentNode.removeChild( object.element );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t} );\r\n\r\n};\r\n\r\nCSS2DObject.prototype = Object.assign( Object.create( Object3D.prototype ), {\r\n\r\n\tconstructor: CSS2DObject,\r\n\r\n\tcopy: function ( source, recursive ) {\r\n\r\n\t\tObject3D.prototype.copy.call( this, source, recursive );\r\n\r\n\t\tthis.element = source.element.cloneNode( true );\r\n\r\n\t\treturn this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\n//\r\n\r\nvar CSS2DRenderer = function () {\r\n\r\n\tvar _this = this;\r\n\r\n\tvar _width, _height;\r\n\tvar _widthHalf, _heightHalf;\r\n\r\n\tvar vector = new Vector3();\r\n\tvar viewMatrix = new Matrix4();\r\n\tvar viewProjectionMatrix = new Matrix4();\r\n\r\n\tvar cache = {\r\n\t\tobjects: new WeakMap()\r\n\t};\r\n\r\n\tvar domElement = document.createElement( 'div' );\r\n\tdomElement.style.overflow = 'hidden';\r\n\r\n\tthis.domElement = domElement;\r\n\r\n\tthis.getSize = function () {\r\n\r\n\t\treturn {\r\n\t\t\twidth: _width,\r\n\t\t\theight: _height\r\n\t\t};\r\n\r\n\t};\r\n\r\n\tthis.setSize = function ( width, height ) {\r\n\r\n\t\t_width = width;\r\n\t\t_height = height;\r\n\r\n\t\t_widthHalf = _width / 2;\r\n\t\t_heightHalf = _height / 2;\r\n\r\n\t\tdomElement.style.width = width + 'px';\r\n\t\tdomElement.style.height = height + 'px';\r\n\r\n\t};\r\n\r\n\tvar renderObject = function ( object, scene, camera ) {\r\n\r\n\t\tif ( object instanceof CSS2DObject ) {\r\n\r\n\t\t\tobject.onBeforeRender( _this, scene, camera );\r\n\r\n\t\t\tvector.setFromMatrixPosition( object.matrixWorld );\r\n\t\t\tvector.applyMatrix4( viewProjectionMatrix );\r\n\r\n\t\t\tvar element = object.element;\r\n\t\t\tvar style = 'translate(-50%,-50%) translate(' + ( vector.x * _widthHalf + _widthHalf ) + 'px,' + ( - vector.y * _heightHalf + _heightHalf ) + 'px)';\r\n\r\n\t\t\telement.style.WebkitTransform = style;\r\n\t\t\telement.style.MozTransform = style;\r\n\t\t\telement.style.oTransform = style;\r\n\t\t\telement.style.transform = style;\r\n\r\n\t\t\telement.style.display = ( object.visible && vector.z >= - 1 && vector.z <= 1 ) ? '' : 'none';\r\n\r\n\t\t\tvar objectData = {\r\n\t\t\t\tdistanceToCameraSquared: getDistanceToSquared( camera, object )\r\n\t\t\t};\r\n\r\n\t\t\tcache.objects.set( object, objectData );\r\n\r\n\t\t\tif ( element.parentNode !== domElement ) {\r\n\r\n\t\t\t\tdomElement.appendChild( element );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tobject.onAfterRender( _this, scene, camera );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( var i = 0, l = object.children.length; i < l; i ++ ) {\r\n\r\n\t\t\trenderObject( object.children[ i ], scene, camera );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tvar getDistanceToSquared = function () {\r\n\r\n\t\tvar a = new Vector3();\r\n\t\tvar b = new Vector3();\r\n\r\n\t\treturn function ( object1, object2 ) {\r\n\r\n\t\t\ta.setFromMatrixPosition( object1.matrixWorld );\r\n\t\t\tb.setFromMatrixPosition( object2.matrixWorld );\r\n\r\n\t\t\treturn a.distanceToSquared( b );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tvar filterAndFlatten = function ( scene ) {\r\n\r\n\t\tvar result = [];\r\n\r\n\t\tscene.traverse( function ( object ) {\r\n\r\n\t\t\tif ( object instanceof CSS2DObject ) result.push( object );\r\n\r\n\t\t} );\r\n\r\n\t\treturn result;\r\n\r\n\t};\r\n\r\n\tvar zOrder = function ( scene ) {\r\n\r\n\t\tvar sorted = filterAndFlatten( scene ).sort( function ( a, b ) {\r\n\r\n\t\t\tvar distanceA = cache.objects.get( a ).distanceToCameraSquared;\r\n\t\t\tvar distanceB = cache.objects.get( b ).distanceToCameraSquared;\r\n\r\n\t\t\treturn distanceA - distanceB;\r\n\r\n\t\t} );\r\n\r\n\t\tvar zMax = sorted.length;\r\n\r\n\t\tfor ( var i = 0, l = sorted.length; i < l; i ++ ) {\r\n\r\n\t\t\tsorted[ i ].element.style.zIndex = zMax - i;\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tthis.render = function ( scene, camera ) {\r\n\r\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\r\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\r\n\r\n\t\tviewMatrix.copy( camera.matrixWorldInverse );\r\n\t\tviewProjectionMatrix.multiplyMatrices( camera.projectionMatrix, viewMatrix );\r\n\r\n\t\trenderObject( scene, scene, camera );\r\n\t\tzOrder( scene );\r\n\r\n\t};\r\n\r\n};\r\n\r\nexport { CSS2DObject, CSS2DRenderer };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/renderers/CSS2DRenderer.js"],"sourceRoot":""}