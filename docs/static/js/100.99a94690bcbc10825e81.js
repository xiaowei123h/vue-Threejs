webpackJsonp([100],{"/ktZ":function(e,t){},nkWY:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("QEtz"),n=i("85s5"),s=i("Z9IJ"),a=i("6+nK"),o=i("Ah8h"),h={uniforms:{damp:{value:.96},tOld:{value:null},tNew:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float damp;","uniform sampler2D tOld;","uniform sampler2D tNew;","varying vec2 vUv;","vec4 when_gt( vec4 x, float y ) {","\treturn max( sign( x - y ), 0.0 );","}","void main() {","\tvec4 texelOld = texture2D( tOld, vUv );","\tvec4 texelNew = texture2D( tNew, vUv );","\ttexelOld *= damp * when_gt( texelOld, 0.1 );","\tgl_FragColor = max(texelNew, texelOld);","}"].join("\n")},d=function(e){o.a.call(this),void 0===h&&console.error("AfterimagePass relies on AfterimageShader"),this.shader=h,this.uniforms=a._98.clone(this.shader.uniforms),this.uniforms.damp.value=void 0!==e?e:.96,this.textureComp=new a._105(window.innerWidth,window.innerHeight,{minFilter:a._17,magFilter:a._37,format:a._59}),this.textureOld=new a._105(window.innerWidth,window.innerHeight,{minFilter:a._17,magFilter:a._37,format:a._59}),this.shaderMaterial=new a._76({uniforms:this.uniforms,vertexShader:this.shader.vertexShader,fragmentShader:this.shader.fragmentShader}),this.compFsQuad=new o.a.FullScreenQuad(this.shaderMaterial);var t=new a._29;this.copyFsQuad=new o.a.FullScreenQuad(t)};d.prototype=Object.assign(Object.create(o.a.prototype),{constructor:d,render:function(e,t,i){this.uniforms.tOld.value=this.textureOld.texture,this.uniforms.tNew.value=i.texture,e.setRenderTarget(this.textureComp),this.compFsQuad.render(e),this.copyFsQuad.material.map=this.textureComp.texture,this.renderToScreen?(e.setRenderTarget(null),this.copyFsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(),this.copyFsQuad.render(e));var r=this.textureOld;this.textureOld=this.textureComp,this.textureComp=r},setSize:function(e,t){this.textureComp.setSize(e,t),this.textureOld.setSize(e,t)}});var l={data:function(){return{camera:null,scene:null,renderer:null,composer:null,mesh:null,afterimagePass:null,params:{enable:!0},gui:null}},mounted:function(){this.init(),this.createGUI(),this.animate()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglPostprocessingAfterimage-container")[0].appendChild(this.renderer.domElement),this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.z=400,this.scene=new this.$THREE.Scene,this.scene.fog=new this.$THREE.Fog(0,1,1e3);var e=new this.$THREE.BoxBufferGeometry(150,150,150,2,2,2),t=new this.$THREE.MeshNormalMaterial;if(this.mesh=new this.$THREE.Mesh(e,t),this.scene.add(this.mesh),this.composer=new n.a(this.renderer),this.composer.addPass(new s.a(this.scene,this.camera)),this.afterimagePass=new d,this.composer.addPass(this.afterimagePass),window.addEventListener("resize",this.onWindowResize,!1),"undefined"!=typeof TESTING)for(var i=0;i<45;i++)this.render()},createGUI:function(){this.gui=new r.a({name:"Damp setting"}),this.gui.add(this.afterimagePass.uniforms.damp,"value",0,1).step(.001),this.gui.add(this.params,"enable")},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.composer.setSize(window.innerWidth-281,window.innerHeight)},render:function(){this.mesh.rotation.x+=.005,this.mesh.rotation.y+=.01,this.params.enable?this.composer.render():this.renderer.render(this.scene,this.camera)},animate:function(){requestAnimationFrame(this.animate),this.render()}}},u={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"webglPostprocessingAfterimage-container"})},staticRenderFns:[]};var m=i("VU/8")(l,u,!1,function(e){i("/ktZ")},"data-v-5d5e01f7",null);t.default=m.exports}});
//# sourceMappingURL=100.99a94690bcbc10825e81.js.map