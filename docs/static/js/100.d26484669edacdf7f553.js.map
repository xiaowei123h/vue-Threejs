{"version":3,"sources":["webpack:///./src/components/jsm/modifiers/EdgeSplitModifier.js","webpack:///src/views/modifier/webglModifierEdgesplit.vue","webpack:///./src/views/modifier/webglModifierEdgesplit.vue?2f09","webpack:///./src/views/modifier/webglModifierEdgesplit.vue"],"names":["EdgeSplitModifier","positions","normals","indexes","pointToIndexMap","splitIndexes","A","Vector3","B","C","edgeSplitToGroups","cutOff","firstIndex","set","normalize","result","splitGroup","currentGroup","_iteratorNormalCompletion","_didIteratorError","_iteratorError","undefined","_step","_iterator","Symbol","iterator","next","done","j","value","dot","push","err","return","edgeSplit","original","arguments","length","groupResults","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","index","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","groupResult","this","modify","geometry","cutOffAngle","isBufferGeometry","BufferGeometry","fromGeometry","BufferGeometryUtils","mergeVertices","array","getAttribute","Float32Array","i","sub","normal","cross","x","y","z","computeNormals","Array","mapPositionsToIndexes","_iteratorNormalCompletion4","_didIteratorError4","_iteratorError4","_step4","_iterator4","Math","cos","newPositions","offset","newIndexes","Uint32Array","split","_iteratorNormalCompletion5","_didIteratorError5","_iteratorError5","_step5","_iterator5","setAttribute","BufferAttribute","setIndex","webglModifierEdgesplit","data","renderer","scene","camera","modifier","mesh","baseGeometry","params","smoothShading","gui","mounted","init","beforeDestroy","destroy","methods","_this","info","document","createElement","style","position","top","left","width","textAlign","innerHTML","getElementsByClassName","appendChild","$THREE","WebGLRenderer","antialias","setPixelRatio","window","devicePixelRatio","setSize","$webglInnerWidth","innerHeight","domElement","Scene","PerspectiveCamera","controls","OrbitControls","addEventListener","render","enableDamping","dampingFactor","rotateSpeed","minZoom","add","HemisphereLight","OBJLoader","load","group","modelGeometry","children","deleteAttribute","EdgeSplitModifier_EdgeSplitModifier","Mesh","getGeometry","MeshStandardMaterial","material","flatShading","rotateY","PI","scale","translateZ","onWindowResize","dat_gui_module","name","onFinishChange","updateMesh","min","max","$onWindowResize","computeVertexNormals","needsUpdate","modifier_webglModifierEdgesplit","_h","$createElement","_self","_c","staticClass","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"2JAQIA,EAAoB,WAEvB,IAIIC,EAAWC,EACXC,EACAC,EAAiBC,EANjBC,EAAI,IAAIC,UACRC,EAAI,IAAID,UACRE,EAAI,IAAIF,UAuEZ,SAASG,EAAmBP,EAASQ,EAAQC,GAE5CN,EAAEO,IAAKX,EAAS,EAAIU,GAAcV,EAAS,EAAIU,EAAa,GAAKV,EAAS,EAAIU,EAAa,IAAME,YAEjG,IAAIC,GACHC,cACAC,cAAgBL,IANwCM,GAAA,EAAAC,GAAA,EAAAC,OAAAC,EAAA,IASzD,QAAAC,EAAAC,EAAepB,EAAfqB,OAAAC,cAAAP,GAAAI,EAAAC,EAAAG,QAAAC,MAAAT,GAAA,EAAyB,KAAfU,EAAeN,EAAAO,MAEnBD,IAAMhB,IAEVJ,EAAEK,IAAKX,EAAS,EAAI0B,GAAK1B,EAAS,EAAI0B,EAAI,GAAK1B,EAAS,EAAI0B,EAAI,IAAMd,YAEjEN,EAAEsB,IAAKxB,GAAMK,EAEjBI,EAAOC,WAAWe,KAAMH,GAIxBb,EAAOE,aAAac,KAAMH,KArB4B,MAAAI,GAAAb,GAAA,EAAAC,EAAAY,EAAA,aAAAd,GAAAK,EAAAU,QAAAV,EAAAU,SAAA,WAAAd,EAAA,MAAAC,GA6BzD,OAAOL,EAKR,SAASmB,EAAW/B,EAASQ,GAA0B,IAAlBwB,EAAkBC,UAAAC,OAAA,QAAAhB,IAAAe,UAAA,GAAAA,UAAA,GAAP,KAE/C,GAAwB,IAAnBjC,EAAQkC,OAAb,CAEA,IAAIC,KAJkDC,GAAA,EAAAC,GAAA,EAAAC,OAAApB,EAAA,IAMtD,QAAAqB,EAAAC,EAAmBxC,EAAnBqB,OAAAC,cAAAc,GAAAG,EAAAC,EAAAjB,QAAAC,MAAAY,GAAA,EAA6B,KAAnBK,EAAmBF,EAAAb,MAE5BS,EAAaP,KAAMrB,EAAmBP,EAASQ,EAAQiC,KARF,MAAAZ,GAAAQ,GAAA,EAAAC,EAAAT,EAAA,aAAAO,GAAAI,EAAAV,QAAAU,EAAAV,SAAA,WAAAO,EAAA,MAAAC,GAYtD,IAAI1B,EAASuB,EAAc,GAZ2BO,GAAA,EAAAC,GAAA,EAAAC,OAAA1B,EAAA,IActD,QAAA2B,EAAAC,EAAyBX,EAAzBd,OAAAC,cAAAoB,GAAAG,EAAAC,EAAAvB,QAAAC,MAAAkB,GAAA,EAAwC,KAA9BK,EAA8BF,EAAAnB,MAElCqB,EAAYjC,aAAaoB,OAAStB,EAAOE,aAAaoB,SAE1DtB,EAASmC,IAlB2C,MAAAlB,GAAAc,GAAA,EAAAC,EAAAf,EAAA,aAAAa,GAAAI,EAAAhB,QAAAgB,EAAAhB,SAAA,WAAAa,EAAA,MAAAC,GAyBrC,MAAZZ,GAEJ9B,EAAa0B,MACZI,SAAUA,EACVhC,QAASY,EAAOE,eAKbF,EAAOC,WAAWqB,QAEtBH,EAAWnB,EAAOC,WAAYL,EAAQwB,GAAYpB,EAAOE,aAAc,KAOzEkC,KAAKC,OAAS,SAAWC,EAAUC,GASlC,GAPOD,EAASE,mBAEfF,GAAW,IAAIG,kBAAiBC,aAAcJ,IAKxB,MAAlBA,EAAST,MAAgB,CAE7B,QAA6BvB,IAAxBqC,IAEH,KAAM,wDAIRL,EAAWK,IAAoBC,cAAeN,GAI/ClD,EAAUkD,EAAST,MAAMgB,MACzB3D,EAAYoD,EAASQ,aAAc,YAAaD,MAnKjD,WAEC1D,EAAU,IAAI4D,aAA+B,EAAjB3D,EAAQkC,QAEpC,IAAM,IAAI0B,EAAI,EAAGA,EAAI5D,EAAQkC,OAAQ0B,GAAK,EAAI,CAE7C,IAAInB,EAAQzC,EAAS4D,GAErBzD,EAAEO,IACDZ,EAAW,EAAI2C,GACf3C,EAAW,EAAI2C,EAAQ,GACvB3C,EAAW,EAAI2C,EAAQ,IAExBA,EAAQzC,EAAS4D,EAAI,GACrBvD,EAAEK,IACDZ,EAAW,EAAI2C,GACf3C,EAAW,EAAI2C,EAAQ,GACvB3C,EAAW,EAAI2C,EAAQ,IAExBA,EAAQzC,EAAS4D,EAAI,GACrBtD,EAAEI,IACDZ,EAAW,EAAI2C,GACf3C,EAAW,EAAI2C,EAAQ,GACvB3C,EAAW,EAAI2C,EAAQ,IAExBnC,EAAEuD,IAAKxD,GACPF,EAAE0D,IAAKxD,GAIP,IAFA,IAAIyD,EAASxD,EAAEyD,MAAO5D,GAAIQ,YAEhBc,EAAI,EAAGA,EAAI,EAAGA,IAEvB1B,EAAS,GAAM6D,EAAInC,IAAQqC,EAAOE,EAClCjE,EAAS,GAAM6D,EAAInC,GAAM,GAAMqC,EAAOG,EACtClE,EAAS,GAAM6D,EAAInC,GAAM,GAAMqC,EAAOI,GAmIxCC,GA1HD,WAEClE,EAAkBmE,MAAOtE,EAAUoC,OAAS,GAE5C,IAAM,IAAI0B,EAAI,EAAGA,EAAI5D,EAAQkC,OAAQ0B,IAAO,CAE3C,IAAInB,EAAQzC,EAAS4D,GAEY,MAA5B3D,EAAiBwC,KAErBxC,EAAiBwC,OAIlBxC,EAAiBwC,GAAQb,KAAMgC,IA6GhCS,GAGAnE,KA5BgD,IAAAoE,GAAA,EAAAC,GAAA,EAAAC,OAAAtD,EAAA,IA8BhD,QAAAuD,EAAAC,EAA2BzE,EAA3BoB,OAAAC,cAAAgD,GAAAG,EAAAC,EAAAnD,QAAAC,MAAA8C,GAAA,EAA6C,CAE5CvC,EAF4C0C,EAAA/C,MAElBiD,KAAKC,IAAKzB,GAAgB,OAhCL,MAAAtB,GAAA0C,GAAA,EAAAC,EAAA3C,EAAA,aAAAyC,GAAAI,EAAA5C,QAAA4C,EAAA5C,SAAA,WAAAyC,EAAA,MAAAC,GAoChD,IAAIK,EAAe,IAAIlB,aAAc7D,EAAUoC,OAAS,EAAIhC,EAAagC,QACzE2C,EAAanE,IAAKZ,GAClB,IAAIgF,EAAShF,EAAUoC,OAEnB6C,EAAa,IAAIC,YAAahF,EAAQkC,QAC1C6C,EAAWrE,IAAKV,GAEhB,IAAM,IAAI4D,EAAI,EAAGA,EAAI1D,EAAagC,OAAQ0B,IAAO,CAEhD,IAAIqB,EAAQ/E,EAAc0D,GACtBnB,EAAQzC,EAASiF,EAAMjD,UAE3B6C,EAAcC,EAAS,EAAIlB,GAAM9D,EAAW,EAAI2C,GAChDoC,EAAcC,EAAS,EAAIlB,EAAI,GAAM9D,EAAW,EAAI2C,EAAQ,GAC5DoC,EAAcC,EAAS,EAAIlB,EAAI,GAAM9D,EAAW,EAAI2C,EAAQ,GAPZ,IAAAyC,GAAA,EAAAC,GAAA,EAAAC,OAAAlE,EAAA,IAShD,QAAAmE,EAAAC,EAAeL,EAAMjF,QAArBqB,OAAAC,cAAA4D,GAAAG,EAAAC,EAAA/D,QAAAC,MAAA0D,GAAA,EAA+B,CAE9BH,EAF8BM,EAAA3D,OAEZoD,EAAS,EAAIlB,GAXgB,MAAA/B,GAAAsD,GAAA,EAAAC,EAAAvD,EAAA,aAAAqD,GAAAI,EAAAxD,QAAAwD,EAAAxD,SAAA,WAAAqD,EAAA,MAAAC,IAqBjD,OAJAlC,EAAW,IAAIG,kBACNkC,aAAc,WAAY,IAAIC,kBAAiBX,EAAc,GAAG,IACzE3B,EAASuC,SAAU,IAAID,kBAAiBT,EAAY,IAE7C7B,gBCpNTwC,GACAC,KADA,WAEA,OACAC,SAAA,KACAC,MAAA,KACAC,OAAA,KACAC,SAAA,KACAC,KAAA,KACAC,aAAA,KACAC,QACAC,eAAA,EACApE,WAAA,EACAoB,YAAA,IAEAiD,IAAA,OAGAC,QAjBA,WAkBArD,KAAAsD,QAEAC,cApBA,WAqBAvD,KAAAoD,IAAAI,WAEAC,SACAH,KADA,WACA,IAAAI,EAAA1D,KACA2D,EAAAC,SAAAC,cAAA,OACAF,EAAAG,MAAAC,SAAA,WACAJ,EAAAG,MAAAE,IAAA,OACAL,EAAAG,MAAAG,KAAA,QACAN,EAAAG,MAAAI,MAAA,OACAP,EAAAG,MAAAK,UAAA,SACAR,EAAAS,UAAA,kGACAR,SAAAS,uBAAA,uCAAAC,YAAAX,GACA3D,KAAA4C,SAAA,IAAA5C,KAAAuE,OAAAC,eAAAC,WAAA,IACAzE,KAAA4C,SAAA8B,cAAAC,OAAAC,kBACA5E,KAAA4C,SAAAiC,QAAA7E,KAAA8E,iBAAAH,OAAAI,aACAnB,SAAAS,uBAAA,uCAAAC,YAAAtE,KAAA4C,SAAAoC,YACAhF,KAAA6C,MAAA,IAAA7C,KAAAuE,OAAAU,MACAjF,KAAA8C,OAAA,IAAA9C,KAAAuE,OAAAW,kBAAA,GAAAlF,KAAA8E,iBAAAH,OAAAI,aACA,IAAAI,EAAA,IAAAC,EAAA,EAAApF,KAAA8C,OAAA9C,KAAA4C,SAAAoC,YACAG,EAAAE,iBAAA,SAAArF,KAAAsF,QACAH,EAAAI,eAAA,EACAJ,EAAAK,cAAA,IACAL,EAAAM,YAAA,IACAN,EAAAO,QAAA,EACA1F,KAAA8C,OAAAiB,SAAArG,IAAA,OACAsC,KAAA6C,MAAA8C,IAAA,IAAA3F,KAAAuE,OAAAqB,gBAAA,oBACA,IAAAC,EAAA,GAAAC,KACA,0CACA,SAAAC,GAEA,IAAAC,EAAAD,EAAAE,SAAA,GAAA/F,SACA8F,EAAAE,gBAAA,UACAF,EAAAE,gBAAA,MACAxC,EAAAX,SAAA,IAAAoD,EACAzC,EAAAT,aAAA+C,EACAtC,EAAAV,KAAA,IAAAU,EAAAa,OAAA6B,KAAA1C,EAAA2C,cAAA,IAAA3C,EAAAa,OAAA+B,sBACA5C,EAAAV,KAAAuD,SAAAC,aAAA9C,EAAAR,OAAAC,cACAO,EAAAV,KAAAyD,SAAA9E,KAAA+E,GAAA,GACAhD,EAAAV,KAAA2D,MAAAjJ,IAAA,aACAgG,EAAAV,KAAA4D,WAAA,KACAlD,EAAAb,MAAA8C,IAAAjC,EAAAV,MACAU,EAAA4B,WAGAX,OAAAU,iBAAA,SAAArF,KAAA6G,gBAAA,GACA7G,KAAAoD,IAAA,IAAA0D,EAAA,GAAAC,KAAA,mCACA/G,KAAAoD,IAAAuC,IAAA3F,KAAAkD,OAAA,iBAAA8D,eAAAhH,KAAAiH,YACAjH,KAAAoD,IAAAuC,IAAA3F,KAAAkD,OAAA,aAAA8D,eAAAhH,KAAAiH,YACAjH,KAAAoD,IAAAuC,IAAA3F,KAAAkD,OAAA,eAAAgE,IAAA,GAAAC,IAAA,KAAAH,eAAAhH,KAAAiH,aAEAJ,eAhDA,WAiDA7G,KAAAoH,gBAAApH,KAAA8C,OAAA9C,KAAA4C,UACA5C,KAAAsF,UAEAe,YApDA,WAqDA,IAAAnG,EAOA,OALAA,EADAF,KAAAkD,OAAAnE,UACAiB,KAAA+C,SAAA9C,OAAAD,KAAAiD,aAAAjD,KAAAkD,OAAA/C,YAAAwB,KAAA+E,GAAA,KAEAnG,EAAA,EAAAC,cAAAR,KAAAiD,eAEAoE,uBACAnH,GAEA+G,WA9DA,WA+DAjH,KAAAgD,KAAA9C,SAAAF,KAAAqG,cACArG,KAAAgD,KAAAuD,SAAAC,aAAA,IAAAxG,KAAAkD,OAAAC,cACAnD,KAAAgD,KAAAuD,SAAAe,aAAA,EACAtH,KAAAsF,UAEAA,OApEA,WAqEAtF,KAAA4C,SAAA0C,OAAAtF,KAAA6C,MAAA7C,KAAA8C,WCrGeyE,GADEjC,OAFjB,WAA0B,IAAakC,EAAbxH,KAAayH,eAAkD,OAA/DzH,KAAuC0H,MAAAC,IAAAH,GAAwB,OAAiBI,YAAA,sCAEzFC,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEtF,EACA6E,GATF,EAVA,SAAAU,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/100.d26484669edacdf7f553.js","sourcesContent":["import {\r\n\tBufferAttribute,\r\n\tBufferGeometry,\r\n\tVector3\r\n} from \"@/components/build/three.module.js\";\r\nimport { BufferGeometryUtils } from \"../utils/BufferGeometryUtils.js\";\r\n\r\n\r\nvar EdgeSplitModifier = function () {\r\n\r\n\tvar A = new Vector3();\r\n\tvar B = new Vector3();\r\n\tvar C = new Vector3();\r\n\r\n\tvar positions, normals;\r\n\tvar indexes;\r\n\tvar pointToIndexMap, splitIndexes;\r\n\r\n\r\n\tfunction computeNormals() {\r\n\r\n\t\tnormals = new Float32Array( indexes.length * 3 );\r\n\r\n\t\tfor ( var i = 0; i < indexes.length; i += 3 ) {\r\n\r\n\t\t\tvar index = indexes[ i ];\r\n\r\n\t\t\tA.set(\r\n\t\t\t\tpositions[ 3 * index ],\r\n\t\t\t\tpositions[ 3 * index + 1 ],\r\n\t\t\t\tpositions[ 3 * index + 2 ] );\r\n\r\n\t\t\tindex = indexes[ i + 1 ];\r\n\t\t\tB.set(\r\n\t\t\t\tpositions[ 3 * index ],\r\n\t\t\t\tpositions[ 3 * index + 1 ],\r\n\t\t\t\tpositions[ 3 * index + 2 ] );\r\n\r\n\t\t\tindex = indexes[ i + 2 ];\r\n\t\t\tC.set(\r\n\t\t\t\tpositions[ 3 * index ],\r\n\t\t\t\tpositions[ 3 * index + 1 ],\r\n\t\t\t\tpositions[ 3 * index + 2 ] );\r\n\r\n\t\t\tC.sub( B );\r\n\t\t\tA.sub( B );\r\n\r\n\t\t\tvar normal = C.cross( A ).normalize();\r\n\r\n\t\t\tfor ( var j = 0; j < 3; j ++ ) {\r\n\r\n\t\t\t\tnormals[ 3 * ( i + j ) ] = normal.x;\r\n\t\t\t\tnormals[ 3 * ( i + j ) + 1 ] = normal.y;\r\n\t\t\t\tnormals[ 3 * ( i + j ) + 2 ] = normal.z;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction mapPositionsToIndexes() {\r\n\r\n\t\tpointToIndexMap = Array( positions.length / 3 );\r\n\r\n\t\tfor ( var i = 0; i < indexes.length; i ++ ) {\r\n\r\n\t\t\tvar index = indexes[ i ];\r\n\r\n\t\t\tif ( pointToIndexMap[ index ] == null ) {\r\n\r\n\t\t\t\tpointToIndexMap[ index ] = [];\r\n\r\n\t\t\t}\r\n\r\n\t\t\tpointToIndexMap[ index ].push( i );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tfunction edgeSplitToGroups( indexes, cutOff, firstIndex ) {\r\n\r\n\t\tA.set( normals[ 3 * firstIndex ], normals[ 3 * firstIndex + 1 ], normals[ 3 * firstIndex + 2 ] ).normalize();\r\n\r\n\t\tvar result = {\r\n\t\t\tsplitGroup: [],\r\n\t\t\tcurrentGroup: [ firstIndex ]\r\n\t\t};\r\n\r\n\t\tfor ( var j of indexes ) {\r\n\r\n\t\t\tif ( j !== firstIndex ) {\r\n\r\n\t\t\t\tB.set( normals[ 3 * j ], normals[ 3 * j + 1 ], normals[ 3 * j + 2 ] ).normalize();\r\n\r\n\t\t\t\tif ( B.dot( A ) < cutOff ) {\r\n\r\n\t\t\t\t\tresult.splitGroup.push( j );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tresult.currentGroup.push( j );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn result;\r\n\r\n\t}\r\n\r\n\r\n\tfunction edgeSplit( indexes, cutOff, original = null ) {\r\n\r\n\t\tif ( indexes.length === 0 ) return;\r\n\r\n\t\tvar groupResults = [];\r\n\r\n\t\tfor ( var index of indexes ) {\r\n\r\n\t\t\tgroupResults.push( edgeSplitToGroups( indexes, cutOff, index ) );\r\n\r\n\t\t}\r\n\r\n\t\tvar result = groupResults[ 0 ];\r\n\r\n\t\tfor ( var groupResult of groupResults ) {\r\n\r\n\t\t\tif ( groupResult.currentGroup.length > result.currentGroup.length ) {\r\n\r\n\t\t\t\tresult = groupResult;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\r\n\t\tif ( original != null ) {\r\n\r\n\t\t\tsplitIndexes.push( {\r\n\t\t\t\toriginal: original,\r\n\t\t\t\tindexes: result.currentGroup\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\r\n\t\tif ( result.splitGroup.length ) {\r\n\r\n\t\t\tedgeSplit( result.splitGroup, cutOff, original || result.currentGroup[ 0 ] );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\r\n\tthis.modify = function ( geometry, cutOffAngle ) {\r\n\r\n\t\tif ( ! geometry.isBufferGeometry ) {\r\n\r\n\t\t\tgeometry = new BufferGeometry().fromGeometry( geometry );\r\n\r\n\t\t}\r\n\r\n\r\n\t\tif ( geometry.index == null ) {\r\n\r\n\t\t\tif ( BufferGeometryUtils === undefined ) {\r\n\r\n\t\t\t \tthrow 'THREE.EdgeSplitModifier relies on BufferGeometryUtils';\r\n\r\n\t\t\t}\r\n\r\n\t\t\tgeometry = BufferGeometryUtils.mergeVertices( geometry );\r\n\r\n\t\t}\r\n\r\n\t\tindexes = geometry.index.array;\r\n\t\tpositions = geometry.getAttribute( \"position\" ).array;\r\n\r\n\t\tcomputeNormals();\r\n\t\tmapPositionsToIndexes();\r\n\r\n\r\n\t\tsplitIndexes = [];\r\n\r\n\t\tfor ( var vertexIndexes of pointToIndexMap ) {\r\n\r\n\t\t\tedgeSplit( vertexIndexes, Math.cos( cutOffAngle ) - 0.001 );\r\n\r\n\t\t}\r\n\r\n\t\tvar newPositions = new Float32Array( positions.length + 3 * splitIndexes.length );\r\n\t\tnewPositions.set( positions );\r\n\t\tvar offset = positions.length;\r\n\r\n\t\tvar newIndexes = new Uint32Array( indexes.length );\r\n\t\tnewIndexes.set( indexes );\r\n\r\n\t\tfor ( var i = 0; i < splitIndexes.length; i ++ ) {\r\n\r\n\t\t\tvar split = splitIndexes[ i ];\r\n\t\t\tvar index = indexes[ split.original ];\r\n\r\n\t\t\tnewPositions[ offset + 3 * i ] = positions[ 3 * index ];\r\n\t\t\tnewPositions[ offset + 3 * i + 1 ] = positions[ 3 * index + 1 ];\r\n\t\t\tnewPositions[ offset + 3 * i + 2 ] = positions[ 3 * index + 2 ];\r\n\r\n\t\t\tfor ( var j of split.indexes ) {\r\n\r\n\t\t\t\tnewIndexes[ j ] = offset / 3 + i;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tgeometry = new BufferGeometry();\r\n\t\tgeometry.setAttribute( 'position', new BufferAttribute( newPositions, 3, true ) );\r\n\t\tgeometry.setIndex( new BufferAttribute( newIndexes, 1 ) );\r\n\r\n\t\treturn geometry;\r\n\r\n\t};\r\n\r\n};\r\n\r\nexport { EdgeSplitModifier };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/modifiers/EdgeSplitModifier.js","<template>\r\n    <div class=\"webglModifierEdgesplit-container\">\r\n        \r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { OrbitControls } from '@/components/jsm/controls/OrbitControls.js'\r\nimport { OBJLoader } from \"@/components/jsm/loaders/OBJLoader.js\"\r\nimport { BufferGeometryUtils } from \"@/components/jsm/utils/BufferGeometryUtils.js\"\r\nimport { EdgeSplitModifier } from \"@/components/jsm/modifiers/EdgeSplitModifier.js\"\r\nimport { GUI } from \"@/components/jsm/libs/dat.gui.module.js\"\r\nexport default {\r\n    data() {\r\n        return {\r\n            renderer: null,\r\n            scene: null,\r\n            camera: null,\r\n            modifier: null,\r\n            mesh: null,\r\n            baseGeometry: null,\r\n\t\t\tparams: {\r\n\t\t\t\tsmoothShading: true,\r\n\t\t\t\tedgeSplit: true,\r\n\t\t\t\tcutOffAngle: 20,\r\n            },\r\n            gui: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init()\r\n    },\r\n    beforeDestroy() {\r\n        this.gui.destroy()\r\n    },\r\n    methods: {\r\n        init() {\r\n            var info = document.createElement('div')\r\n            info.style.position = 'absolute'\r\n            info.style.top = '10px'\r\n            info.style.left = '281px'\r\n            info.style.width = '100%'\r\n            info.style.textAlign = 'center'\r\n            info.innerHTML = '<a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> - Edge Split modifier'\r\n            document.getElementsByClassName('webglModifierEdgesplit-container')[0].appendChild(info)\r\n            this.renderer = new this.$THREE.WebGLRenderer({ antialias: true })\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            document.getElementsByClassName('webglModifierEdgesplit-container')[0].appendChild(this.renderer.domElement)\r\n            this.scene = new this.$THREE.Scene()\r\n            this.camera = new this.$THREE.PerspectiveCamera(75, this.$webglInnerWidth / window.innerHeight)\r\n            var controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n            controls.addEventListener('change', this.render) // use if there is no animation loop\r\n            controls.enableDamping = true\r\n            controls.dampingFactor = 0.25\r\n            controls.rotateSpeed = 0.35\r\n            controls.minZoom = 1\r\n            this.camera.position.set(0, 0, 4)\r\n            this.scene.add(new this.$THREE.HemisphereLight(0xffffff, 0x444444))\r\n            new OBJLoader().load(\r\n                'static/models/obj/cerberus/Cerberus.obj',\r\n                (group) => {\r\n                    // Retrieve Cerberus vertex positions only\r\n                    var modelGeometry = group.children[ 0 ].geometry\r\n                    modelGeometry.deleteAttribute('normal')\r\n                    modelGeometry.deleteAttribute('uv')\r\n                    this.modifier = new EdgeSplitModifier()\r\n                    this.baseGeometry = modelGeometry\r\n                    this.mesh = new this.$THREE.Mesh(this.getGeometry(), new this.$THREE.MeshStandardMaterial())\r\n                    this.mesh.material.flatShading = ! this.params.smoothShading\r\n                    this.mesh.rotateY(- Math.PI / 2)\r\n                    this.mesh.scale.set(3.5, 3.5, 3.5)\r\n                    this.mesh.translateZ(1.5)\r\n                    this.scene.add(this.mesh)\r\n                    this.render()\r\n                }\r\n            )\r\n            window.addEventListener('resize', this.onWindowResize, false)\r\n            this.gui = new GUI({ name: \"Edge split modifier parameters\" })\r\n            this.gui.add(this.params, \"smoothShading\").onFinishChange(this.updateMesh)\r\n            this.gui.add(this.params, \"edgeSplit\").onFinishChange(this.updateMesh)\r\n            this.gui.add(this.params, \"cutOffAngle\").min(0).max(180).onFinishChange(this.updateMesh)\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n            this.render()\r\n        },\r\n        getGeometry() {\r\n            var geometry\r\n            if (this.params.edgeSplit) {\r\n                geometry = this.modifier.modify(this.baseGeometry, this.params.cutOffAngle * Math.PI / 180)\r\n            } else {\r\n                geometry = BufferGeometryUtils.mergeVertices(this.baseGeometry)\r\n            }\r\n            geometry.computeVertexNormals()\r\n            return geometry\r\n        },\r\n        updateMesh() {\r\n            this.mesh.geometry = this.getGeometry()\r\n            this.mesh.material.flatShading = this.params.smoothShading === false\r\n            this.mesh.material.needsUpdate = true\r\n            this.render()\r\n        },\r\n        render() {\r\n            this.renderer.render(this.scene, this.camera)\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.webglModifierEdgesplit-container {\r\n    position: relative;\r\n    width: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/modifier/webglModifierEdgesplit.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"webglModifierEdgesplit-container\"})}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-c26d3b84\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/modifier/webglModifierEdgesplit.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-c26d3b84\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webglModifierEdgesplit.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglModifierEdgesplit.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglModifierEdgesplit.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-c26d3b84\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webglModifierEdgesplit.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-c26d3b84\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/modifier/webglModifierEdgesplit.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}