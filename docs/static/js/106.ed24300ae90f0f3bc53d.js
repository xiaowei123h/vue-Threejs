webpackJsonp([106],{"D/ct":function(e,t){},sEXd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("wIBv"),i=n("6+nK"),o=function(e){i.Loader.call(this,e),this.animateBonePositions=!0,this.animateBoneRotations=!0};o.prototype=Object.assign(Object.create(i.Loader.prototype),{constructor:o,load:function(e,t,n,r){var o=this,a=new i.FileLoader(o.manager);a.setPath(o.path),a.setRequestHeader(o.requestHeader),a.setWithCredentials(o.withCredentials),a.load(e,function(n){try{t(o.parse(n))}catch(t){r?r(t):console.error(t),o.manager.itemError(e)}},n,r)},parse:function(e){function t(e,n,r){if("ENDSITE"!==r.type){var o={time:n,position:new i.Vector3,rotation:new i.Quaternion};r.frames.push(o);for(var a=new i.Quaternion,s=new i.Vector3(1,0,0),l=new i.Vector3(0,1,0),c=new i.Vector3(0,0,1),h=0;h<r.channels.length;h++)switch(r.channels[h]){case"Xposition":o.position.x=parseFloat(e.shift().trim());break;case"Yposition":o.position.y=parseFloat(e.shift().trim());break;case"Zposition":o.position.z=parseFloat(e.shift().trim());break;case"Xrotation":a.setFromAxisAngle(s,parseFloat(e.shift().trim())*Math.PI/180),o.rotation.multiply(a);break;case"Yrotation":a.setFromAxisAngle(l,parseFloat(e.shift().trim())*Math.PI/180),o.rotation.multiply(a);break;case"Zrotation":a.setFromAxisAngle(c,parseFloat(e.shift().trim())*Math.PI/180),o.rotation.multiply(a);break;default:console.warn("THREE.BVHLoader: Invalid channel type.")}for(h=0;h<r.children.length;h++)t(e,n,r.children[h])}}function n(e){for(var t;0===(t=e.shift().trim()).length;);return t}var r=this,o=function(e){"HIERARCHY"!==n(e)&&console.error("THREE.BVHLoader: HIERARCHY expected.");var r=[],o=function e(t,r,o){var a={name:"",type:"",frames:[]};o.push(a);var s=r.split(/[\s]+/);"END"===s[0].toUpperCase()&&"SITE"===s[1].toUpperCase()?(a.type="ENDSITE",a.name="ENDSITE"):(a.name=s[1],a.type=s[0].toUpperCase()),"{"!==n(t)&&console.error("THREE.BVHLoader: Expected opening { after type & name"),"OFFSET"!==(s=n(t).split(/[\s]+/))[0]&&console.error("THREE.BVHLoader: Expected OFFSET but got: "+s[0]),4!==s.length&&console.error("THREE.BVHLoader: Invalid number of values for OFFSET.");var l=new i.Vector3(parseFloat(s[1]),parseFloat(s[2]),parseFloat(s[3]));if((isNaN(l.x)||isNaN(l.y)||isNaN(l.z))&&console.error("THREE.BVHLoader: Invalid values of OFFSET."),a.offset=l,"ENDSITE"!==a.type){"CHANNELS"!==(s=n(t).split(/[\s]+/))[0]&&console.error("THREE.BVHLoader: Expected CHANNELS definition.");var c=parseInt(s[1]);a.channels=s.splice(2,c),a.children=[]}for(;;){var h=n(t);if("}"===h)return a;a.children.push(e(t,h,o))}}(e,n(e),r);"MOTION"!==n(e)&&console.error("THREE.BVHLoader: MOTION expected.");var a=n(e).split(/[\s]+/),s=parseInt(a[1]);isNaN(s)&&console.error("THREE.BVHLoader: Failed to read number of frames."),a=n(e).split(/[\s]+/);var l=parseFloat(a[2]);isNaN(l)&&console.error("THREE.BVHLoader: Failed to read frame time.");for(var c=0;c<s;c++)t(a=n(e).split(/[\s]+/),c*l,o);return r}(e.split(/[\r\n]+/g)),a=[];!function e(t,n){var r=new i.Bone;if(n.push(r),r.position.add(t.offset),r.name=t.name,"ENDSITE"!==t.type)for(var o=0;o<t.children.length;o++)r.add(e(t.children[o],n));return r}(o[0],a);var s=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];if("ENDSITE"!==o.type){for(var a=[],s=[],l=[],c=0;c<o.frames.length;c++){var h=o.frames[c];a.push(h.time),s.push(h.position.x+o.offset.x),s.push(h.position.y+o.offset.y),s.push(h.position.z+o.offset.z),l.push(h.rotation.x),l.push(h.rotation.y),l.push(h.rotation.z),l.push(h.rotation.w)}r.animateBonePositions&&t.push(new i.VectorKeyframeTrack(".bones["+o.name+"].position",a,s)),r.animateBoneRotations&&t.push(new i.QuaternionKeyframeTrack(".bones["+o.name+"].quaternion",a,l))}}return new i.AnimationClip("animation",-1,t)}(o);return{skeleton:new i.Skeleton(a),clip:s}}});var a={data:function(){return{clock:null,camera:null,controls:null,scene:null,renderer:null,mixer:null,skeletonHelper:null,loader:null}},mounted:function(){var e=this;this.clock=new this.$THREE.Clock,this.init(),this.animate(),this.loader=new o,this.loader.load("static/models/bvh/pirouette.bvh",function(t){e.skeletonHelper=new e.$THREE.SkeletonHelper(t.skeleton.bones[0]),e.skeletonHelper.skeleton=t.skeleton;var n=new e.$THREE.Group;n.add(t.skeleton.bones[0]),e.scene.add(e.skeletonHelper),e.scene.add(n),e.mixer=new e.$THREE.AnimationMixer(e.skeletonHelper),e.mixer.clipAction(t.clip).setEffectiveWeight(1).play()})},methods:{init:function(){this.camera=new this.$THREE.PerspectiveCamera(60,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,200,300),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(15658734),this.scene.add(new this.$THREE.GridHelper(400,10)),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglLoaderBvh-container")[0].appendChild(this.renderer.domElement),this.controls=new r.b(this.camera,this.renderer.domElement),this.controls.minDistance=300,this.controls.maxDistance=700,window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate);var e=this.clock.getDelta();this.mixer&&this.mixer.update(e),this.renderer.render(this.scene,this.camera)}}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoaderBvh-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - BVH Loader"),t("br"),this._v("\n\t\t\tanimation from "),t("a",{attrs:{href:"http://mocap.cs.cmu.edu/"}},[this._v("http://mocap.cs.cmu.edu/")])])])}]};var l=n("VU/8")(a,s,!1,function(e){n("D/ct")},"data-v-b5c68e26",null);t.default=l.exports}});
//# sourceMappingURL=106.ed24300ae90f0f3bc53d.js.map