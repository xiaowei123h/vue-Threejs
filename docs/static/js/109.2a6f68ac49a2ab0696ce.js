webpackJsonp([109],{ZRdS:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=s("QEtz"),n=s("wIBv"),i=s("85s5"),o=s("Z9IJ"),a=s("fD1D"),l=s("gu+9"),h={data:function(){return{vertexshader:null,fragmentshader:null,ENTIRE_SCENE:0,bloomLayer:null,params:null,darkMaterial:null,materials:null,renderer:null,scene:null,camera:null,controls:null,renderScene:null,bloomPass:null,bloomComposer:null,finalPass:null,finalComposer:null,raycaster:null,mouse:null,gui:null,folder:null,BLOOM_SCENE:1}},mounted:function(){var e=this;this.vertexshader="\n            varying vec2 vUv;\n\t\t\tvoid main() {\n\t\t\t\tvUv = uv;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n            }",this.fragmentshader="\n            uniform sampler2D baseTexture;\n\t\t\tuniform sampler2D bloomTexture;\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main() {\n\t\t\t\tgl_FragColor = (texture2D(baseTexture, vUv) + vec4(1.0) * texture2D(bloomTexture, vUv));\n            }",this.bloomLayer=new this.$THREE.Layers,this.bloomLayer.set(this.BLOOM_SCENE),this.params={exposure:1,bloomStrength:5,bloomThreshold:0,bloomRadius:0,scene:"Scene with Glow"},this.darkMaterial=new this.$THREE.MeshBasicMaterial({color:"black"}),this.materials={},this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.toneMapping=this.$THREE.ReinhardToneMapping,document.getElementsByClassName("webglPostprocessingUnrealBloomSelective-container")[0].appendChild(this.renderer.domElement),this.scene=new this.$THREE.Scene,this.camera=new this.$THREE.PerspectiveCamera(40,this.$webglInnerWidth/window.innerHeight,1,200),this.camera.position.set(0,0,20),this.camera.lookAt(0,0,0),this.controls=new n.b(this.camera,this.renderer.domElement),this.controls.maxPolarAngle=.5*Math.PI,this.controls.minDistance=1,this.controls.maxDistance=100,this.controls.addEventListener("change",this.render),this.scene.add(new this.$THREE.AmbientLight(4210752)),this.renderScene=new o.a(this.scene,this.camera),this.bloomPass=new l.a(new this.$THREE.Vector2(this.$webglInnerWidth,window.innerHeight),1.5,.4,.85),this.bloomPass.threshold=this.params.bloomThreshold,this.bloomPass.strength=this.params.bloomStrength,this.bloomPass.radius=this.params.bloomRadius,this.bloomComposer=new i.a(this.renderer),this.bloomComposer.renderToScreen=!1,this.bloomComposer.addPass(this.renderScene),this.bloomComposer.addPass(this.bloomPass),this.finalPass=new a.a(new this.$THREE.ShaderMaterial({uniforms:{baseTexture:{value:null},bloomTexture:{value:this.bloomComposer.renderTarget2.texture}},vertexShader:this.vertexshader,fragmentShader:this.fragmentshader,defines:{}}),"baseTexture"),this.finalPass.needsSwap=!0,this.finalComposer=new i.a(this.renderer),this.finalComposer.addPass(this.renderScene),this.finalComposer.addPass(this.finalPass),this.raycaster=new this.$THREE.Raycaster,this.mouse=new this.$THREE.Vector2,window.addEventListener("click",this.onDocumentMouseClick,!1),this.gui=new r.a,this.gui.add(this.params,"scene",["Scene with Glow","Glow only","Scene only"]).onChange(function(t){switch(t){case"Scene with Glow":e.bloomComposer.renderToScreen=!1;break;case"Glow only":e.bloomComposer.renderToScreen=!0}e.render()}),this.folder=this.gui.addFolder("Bloom Parameters"),this.folder.add(this.params,"exposure",.1,2).onChange(function(t){e.renderer.toneMappingExposure=Math.pow(t,4),e.render()}),this.folder.add(this.params,"bloomThreshold",0,1).onChange(function(t){e.bloomPass.threshold=Number(t),e.render()}),this.folder.add(this.params,"bloomStrength",0,10).onChange(function(t){e.bloomPass.strength=Number(t),e.render()}),this.folder.add(this.params,"bloomRadius",0,1).step(.01).onChange(function(t){e.bloomPass.radius=Number(t),e.render()}),this.setupScene(),window.onresize=function(){var t=window.innerWidth-281,s=window.innerHeight;e.$onWindowResize(e.camera,e.renderer),e.bloomComposer.setSize(t,s),e.finalComposer.setSize(t,s),e.render()}},beforeDestroy:function(){this.gui.destroy()},methods:{onDocumentMouseClick:function(e){e.preventDefault(),this.mouse.x=e.clientX/this.$webglInnerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObjects(this.scene.children);t.length>0&&(t[0].object.layers.toggle(this.BLOOM_SCENE),this.render())},setupScene:function(){this.scene.traverse(this.disposeMaterial),this.scene.children.length=0;for(var e=new this.$THREE.IcosahedronBufferGeometry(1,15),t=0;t<50;t++){var s=new this.$THREE.Color;s.setHSL(Math.random(),.7,.2*Math.random()+.05);var r=new this.$THREE.MeshBasicMaterial({color:s}),n=new this.$THREE.Mesh(e,r);n.position.x=10*Math.random()-5,n.position.y=10*Math.random()-5,n.position.z=10*Math.random()-5,n.position.normalize().multiplyScalar(4*Math.random()+2),n.scale.setScalar(Math.random()*Math.random()+.5),this.scene.add(n),Math.random()<.25&&n.layers.enable(this.BLOOM_SCENE)}this.render()},disposeMaterial:function(e){e.material&&e.material.dispose()},render:function(){switch(this.params.scene){case"Scene only":this.renderer.render(this.scene,this.camera);break;case"Glow only":this.renderBloom(!1);break;case"Scene with Glow":default:this.renderBloom(!0),this.finalComposer.render()}},renderBloom:function(e){!0===e?(this.scene.traverse(this.darkenNonBloomed),this.bloomComposer.render(),this.scene.traverse(this.restoreMaterial)):(this.camera.layers.set(this.BLOOM_SCENE),this.bloomComposer.render(),this.camera.layers.set(this.ENTIRE_SCENE))},darkenNonBloomed:function(e){e.isMesh&&!1===this.bloomLayer.test(e.layers)&&(this.materials[e.uuid]=e.material,e.material=this.darkMaterial)},restoreMaterial:function(e){this.materials[e.uuid]&&(e.material=this.materials[e.uuid],delete this.materials[e.uuid])}}},d={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglPostprocessingUnrealBloomSelective-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" Click on a sphere to toggle bloom"),t("br"),this._v("By "),t("a",{attrs:{href:"http://github.com/Temdog007",target:"_blank",rel:"noopener"}},[this._v("Temdog007")])])])}]};var m=s("VU/8")(h,d,!1,function(e){s("aqxR")},"data-v-b1a8b5da",null);t.default=m.exports},aqxR:function(e,t){}});
//# sourceMappingURL=109.2a6f68ac49a2ab0696ce.js.map