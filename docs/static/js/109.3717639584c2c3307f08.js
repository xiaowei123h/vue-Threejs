webpackJsonp([109],{LyU1:function(e,t){},yCNA:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("wIBv"),r=n("6+nK"),i=n("w45l"),o=function(e){r._8.call(this,e)};o.prototype=Object.assign(Object.create(r._8.prototype),{constructor:o,load:function(e,t,n,a){var i=this,o=new r.H(i.manager);o.setPath(i.path),o.setResponseType("arraybuffer"),o.setRequestHeader(i.requestHeader),o.setWithCredentials(i.withCredentials),o.load(e,function(n){try{t(i.parse(n))}catch(t){a?a(t):console.error(t),i.manager.itemError(e)}},n,a)},parse:function(e){function t(e){for(var t="AMF Material",a=e.attributes.id.textContent,i={r:1,g:1,b:1,a:1},o=null,s=0;s<e.childNodes.length;s++){var l=e.childNodes[s];"metadata"===l.nodeName&&void 0!==l.attributes.type?"name"===l.attributes.type.value&&(t=l.textContent):"color"===l.nodeName&&(i=n(l))}return o=new r._19({flatShading:!0,color:new r.o(i.r,i.g,i.b),name:t}),1!==i.a&&(o.transparent=!0,o.opacity=i.a),{id:a,material:o}}function n(e){for(var t={r:1,g:1,b:1,a:1},n=0;n<e.childNodes.length;n++){var a=e.childNodes[n];"r"===a.nodeName?t.r=a.textContent:"g"===a.nodeName?t.g=a.textContent:"b"===a.nodeName?t.b=a.textContent:"a"===a.nodeName&&(t.a=a.textContent)}return t}function a(e){var t={name:"",triangles:[],materialid:null},n=e.firstElementChild;for(void 0!==e.attributes.materialid&&(t.materialId=e.attributes.materialid.nodeValue);n;){if("metadata"===n.nodeName)void 0!==n.attributes.type&&"name"===n.attributes.type.value&&(t.name=n.textContent);else if("triangle"===n.nodeName){var a=n.getElementsByTagName("v1")[0].textContent,r=n.getElementsByTagName("v2")[0].textContent,i=n.getElementsByTagName("v3")[0].textContent;t.triangles.push(a,r,i)}n=n.nextElementSibling}return t}function o(e){for(var t=[],n=[],a=e.firstElementChild;a;){if("vertex"===a.nodeName)for(var r=a.firstElementChild;r;){if("coordinates"===r.nodeName){var i=r.getElementsByTagName("x")[0].textContent,o=r.getElementsByTagName("y")[0].textContent,s=r.getElementsByTagName("z")[0].textContent;t.push(i,o,s)}else if("normal"===r.nodeName){var l=r.getElementsByTagName("nx")[0].textContent,d=r.getElementsByTagName("ny")[0].textContent,m=r.getElementsByTagName("nz")[0].textContent;n.push(l,d,m)}r=r.nextElementSibling}a=a.nextElementSibling}return{vertices:t,normals:n}}function s(e){for(var t=e.attributes.id.textContent,r={name:"amfobject",meshes:[]},i=null,s=e.firstElementChild;s;){if("metadata"===s.nodeName)void 0!==s.attributes.type&&"name"===s.attributes.type.value&&(r.name=s.textContent);else if("color"===s.nodeName)i=n(s);else if("mesh"===s.nodeName){for(var l=s.firstElementChild,d={vertices:[],normals:[],volumes:[],color:i};l;){if("vertices"===l.nodeName){var m=o(l);d.normals=d.normals.concat(m.normals),d.vertices=d.vertices.concat(m.vertices)}else"volume"===l.nodeName&&d.volumes.push(a(l));l=l.nextElementSibling}r.meshes.push(d)}s=s.nextElementSibling}return{id:t,obj:r}}var l,d,m=function(e){var t=new DataView(e);if("PK"===String.fromCharCode(t.getUint8(0),t.getUint8(1))){var n=null,a=null;console.log("THREE.AMFLoader: Loading Zip");try{n=new i.a(e)}catch(e){if(e instanceof ReferenceError)return console.log("THREE.AMFLoader: jszip missing and file is compressed."),null}for(a in n.files)if(".amf"===a.toLowerCase().substr(-4))break;console.log("THREE.AMFLoader: Trying to load file asset: "+a),t=new DataView(n.file(a).asArrayBuffer())}var o=r._9.decodeText(t),s=(new DOMParser).parseFromString(o,"application/xml");return"amf"!==s.documentElement.nodeName.toLowerCase()?(console.log("THREE.AMFLoader: Error loading AMF - no AMF document found."),null):s}(e),c="",u="",h=function(e){var t=1,n="millimeter";void 0!==e.documentElement.attributes.unit&&(n=e.documentElement.attributes.unit.value.toLowerCase());var a={millimeter:1,inch:25.4,feet:304.8,meter:1e3,micron:.001};return void 0!==a[n]&&(t=a[n]),console.log("THREE.AMFLoader: Unit scale: "+t),t}(m),f={},v={},g=m.documentElement.childNodes;for(l=0;l<g.length;l++){var E=g[l];if("metadata"===E.nodeName)void 0!==E.attributes.type&&("name"===E.attributes.type.value?c=E.textContent:"author"===E.attributes.type.value&&(u=E.textContent));else if("material"===E.nodeName){var p=t(E);f[p.id]=p.material}else if("object"===E.nodeName){var b=s(E);v[b.id]=b.obj}}var w=new r.N,C=new r._19({color:11184895,flatShading:!0});for(var N in w.name=c,w.userData.author=u,w.userData.loader="AMF",v){var y=v[N],x=y.meshes,_=new r.N;for(_.name=y.name||"",l=0;l<x.length;l++){var T=C,R=x[l],A=new r.I(R.vertices,3),H=null;if(R.normals.length&&(H=new r.I(R.normals,3)),R.color){var L=R.color;(T=C.clone()).color=new r.o(L.r,L.g,L.b),1!==L.a&&(T.transparent=!0,T.opacity=L.a)}var M=R.volumes;for(d=0;d<M.length;d++){var F=M[d],$=new r.k,k=T;$.setIndex(F.triangles),$.setAttribute("position",A.clone()),H&&$.setAttribute("normal",H.clone()),void 0!==f[F.materialId]&&(k=f[F.materialId]),$.scale(h,h,h),_.add(new r._16($,k.clone()))}}w.add(_)}return w}});var s={data:function(){return{camera:null,scene:null,renderer:null}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(10066329),this.scene.add(new this.$THREE.AmbientLight(10066329)),this.camera=new this.$THREE.PerspectiveCamera(35,this.$webglInnerWidth/window.innerHeight,1,500),this.camera.up.set(0,0,1),this.camera.position.set(0,-9,6),this.camera.add(new this.$THREE.PointLight(16777215,.8)),this.scene.add(this.camera);var t=new this.$THREE.GridHelper(50,50,16777215,5592405);t.rotateOnAxis(new this.$THREE.Vector3(1,0,0),Math.PI/180*90),this.scene.add(t),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglLoaderAmf-container")[0].appendChild(this.renderer.domElement),(new o).load("static/models/amf/rook.amf",function(t){e.scene.add(t),e.render()});var n=new a.a(this.camera,this.renderer.domElement);n.addEventListener("change",this.render),n.target.set(0,1.2,2),n.update(),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"webglLoaderAmf-container"},[n("div",{attrs:{id:"info"}},[n("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[e._v("three.js")]),e._v(" "),n("a",{attrs:{href:"http://amf.wikispaces.com",target:"_blank",rel:"noopener"}},[e._v("AMF File format")]),e._v(" "),n("div",[e._v("AMF loader test by "),n("a",{attrs:{href:"https://github.com/tamarintech",target:"_blank",rel:"noopener"}},[e._v("tamarintech")])]),e._v(" "),n("div",[e._v("Rook manufacturing file from "),n("a",{attrs:{href:"http://amf.wikispaces.com/AMF+test+files",target:"_blank",rel:"noopener"}},[e._v("AMF test files")])])])])}]};var d=n("VU/8")(s,l,!1,function(e){n("LyU1")},"data-v-00d66690",null);t.default=d.exports}});
//# sourceMappingURL=109.3717639584c2c3307f08.js.map