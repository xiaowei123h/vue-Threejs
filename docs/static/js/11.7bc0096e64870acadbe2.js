webpackJsonp([11],{"1qKJ":function(t,e){},"455Q":function(t,e,r){"use strict";r.d(e,"a",function(){return a});var n=r("6+nK"),i=r("9icu"),a=function(t){n.Loader.call(this,t)};a.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:a,load:function(t,e,r,i){var a=this,s=new n.FileLoader(a.manager);s.setPath(a.path),s.setResponseType("arraybuffer"),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(t,function(r){try{e(a.parse(r))}catch(e){i?i(e):console.error(e),a.manager.itemError(t)}},r,i)},parse:function(t){function e(t,e){var r=t.length,n=new Int32Array(r+e.length);return n.set(t),n.set(e,r),n}var r=n.LoaderUtils.decodeText(new Uint8Array(t,0,250)).split("\n");return-1!==r[0].indexOf("xml")?function(t){function r(t){var e,r,n,i,a,s,o="undefined"!=typeof Uint8Array?Uint8Array:Array,h=[],c=[],l="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",u=l.length;for(e=0;e<u;e++)h[e]=l[e];for(e=0;e<u;++e)c[l.charCodeAt(e)]=e;if(c["-".charCodeAt(0)]=62,c["_".charCodeAt(0)]=63,(u=t.length)%4>0)throw new Error("Invalid string. Length must be a multiple of 4");s=new o(3*u/4-(a="="===t[u-2]?2:"="===t[u-1]?1:0)),n=a>0?u-4:u;var f=0;for(e=0,r=0;e<n;e+=4,r+=3)i=c[t.charCodeAt(e)]<<18|c[t.charCodeAt(e+1)]<<12|c[t.charCodeAt(e+2)]<<6|c[t.charCodeAt(e+3)],s[f++]=(16711680&i)>>16,s[f++]=(65280&i)>>8,s[f++]=255&i;return 2===a?(i=c[t.charCodeAt(e)]<<2|c[t.charCodeAt(e+1)]>>4,s[f++]=255&i):1===a&&(i=c[t.charCodeAt(e)]<<10|c[t.charCodeAt(e+1)]<<4|c[t.charCodeAt(e+2)]>>2,s[f++]=i>>8&255,s[f++]=255&i),s}function a(t,n){var a,s,h,c,l=0;if("UInt64"===o.attributes.header_type?l=8:"UInt32"===o.attributes.header_type&&(l=4),"binary"===t.attributes.format&&n){var u,f,d,p,g,y;if("Float32"===t.attributes.type)var m=new Float32Array;else"Int64"===t.attributes.type&&(m=new Int32Array);f=(u=r(t["#text"]))[0];for(var v=1;v<l-1;v++)f|=u[v]<<v*l;for(p=(f+3)*l,y=p+=p%3>0?3-p%3:0,(g=[]).push(y),d=3*l,v=0;v<f;v++){for(var w=u[v*l+d],b=1;b<l-1;b++)w|=u[v*l+d+b]<<8*b;y+=w,g.push(y)}for(v=0;v<g.length-1;v++)A=(A=new i.a(u.slice(g[v],g[v+1]),{resize:!0,verify:!0}).decompress()).buffer,"Float32"===t.attributes.type?(A=new Float32Array(A),s=A,c=void 0,h=(a=m).length,(c=new Float32Array(h+s.length)).set(a),c.set(s,h),m=c):"Int64"===t.attributes.type&&(m=e(m,A=new Int32Array(A)));delete t["#text"],"Int64"===t.attributes.type&&"binary"===t.attributes.format&&(m=m.filter(function(t,e){if(e%2!=1)return!0}))}else{if("binary"!==t.attributes.format||n)if(t["#text"])var A=t["#text"].split(/\s+/).filter(function(t){if(""!==t)return t});else A=new Int32Array(0).buffer;else A=(A=r(t["#text"])).slice(l).buffer;delete t["#text"],"Float32"===t.attributes.type?m=new Float32Array(A):"Int32"===t.attributes.type?m=new Int32Array(A):"Int64"===t.attributes.type&&(m=new Int32Array(A),"binary"===t.attributes.format&&(m=m.filter(function(t,e){if(e%2!=1)return!0})))}return m}var s=null;if(window.DOMParser)try{s=(new DOMParser).parseFromString(t,"text/xml")}catch(t){s=null}else{if(!window.ActiveXObject)throw new Error("Cannot parse xml string!");try{if((s=new ActiveXObject("Microsoft.XMLDOM")).async=!1,!s.loadXML())throw new Error(s.parseError.reason+s.parseError.srcText)}catch(t){s=null}}var o=function t(e){var r={};if(1===e.nodeType){if(e.attributes&&e.attributes.length>0){r.attributes={};for(var n=0;n<e.attributes.length;n++){var i=e.attributes.item(n);r.attributes[i.nodeName]=i.nodeValue.trim()}}}else 3===e.nodeType&&(r=e.nodeValue.trim());if(e.hasChildNodes())for(var a=0;a<e.childNodes.length;a++){var s=e.childNodes.item(a),o=s.nodeName;if(void 0===r[o])""!==(c=t(s))&&(r[o]=c);else{if(void 0===r[o].push){var h=r[o];r[o]=[h]}var c;""!==(c=t(s))&&r[o].push(c)}}return r}(s.documentElement),h=[],c=[],l=[];if(o.PolyData){for(var u=o.PolyData.Piece,f=o.attributes.hasOwnProperty("compressor"),d=["PointData","Points","Strips","Polys"],p=0,g=d.length;p<g;){var y=u[d[p]];if(y&&y.DataArray){if("[object Array]"===Object.prototype.toString.call(y.DataArray))var m=y.DataArray;else m=[y.DataArray];for(var v=0,w=m.length;v<w;)"#text"in m[v]&&m[v]["#text"].length>0&&(m[v].text=a(m[v],f)),v++;switch(d[p]){case"PointData":var b=parseInt(u.attributes.NumberOfPoints),A=y.attributes.Normals;if(b>0)for(var x=0,L=m.length;x<L;x++)if(A===m[x].attributes.Name){var I=m[x].attributes.NumberOfComponents;(c=new Float32Array(b*I)).set(m[x].text,0)}break;case"Points":(b=parseInt(u.attributes.NumberOfPoints))>0&&(I=y.DataArray.attributes.NumberOfComponents,(h=new Float32Array(b*I)).set(y.DataArray.text,0));break;case"Strips":var E=parseInt(u.attributes.NumberOfStrips);if(E>0){var M=new Int32Array(y.DataArray[0].text.length),T=new Int32Array(y.DataArray[1].text.length);M.set(y.DataArray[0].text,0),T.set(y.DataArray[1].text,0);var S=E+M.length;l=new Uint32Array(3*S-9*E);var U=0;for(x=0,L=E;x<L;x++){for(var k=[],C=0,D=T[x],_=0;C<D-_;C++)k.push(M[C]),x>0&&(_=T[x-1]);var N=0;for(D=T[x],_=0;N<D-_-2;N++)N%2?(l[U++]=k[N],l[U++]=k[N+2],l[U++]=k[N+1]):(l[U++]=k[N],l[U++]=k[N+1],l[U++]=k[N+2]),x>0&&(_=T[x-1])}}break;case"Polys":var R=parseInt(u.attributes.NumberOfPolys);if(R>0){M=new Int32Array(y.DataArray[0].text.length),T=new Int32Array(y.DataArray[1].text.length),M.set(y.DataArray[0].text,0),T.set(y.DataArray[1].text,0),S=R+M.length,l=new Uint32Array(3*S-9*R),U=0;var F=0;for(x=0,L=R,_=0;x<L;){var z=[];for(C=0,D=T[x];C<D-_;)z.push(M[F++]),C++;for(N=1;N<D-_-1;)l[U++]=z[0],l[U++]=z[N],l[U++]=z[N+1],N++;_=T[++x-1]}}}}p++}var P=new n.BufferGeometry;return P.setIndex(new n.BufferAttribute(l,1)),P.setAttribute("position",new n.BufferAttribute(h,3)),c.length===h.length&&P.setAttribute("normal",new n.BufferAttribute(c,3)),P}throw new Error("Unsupported DATASET type")}(n.LoaderUtils.decodeText(t)):r[2].includes("ASCII")?function(t){var e,r=[],i=[],a=[],s=[],o=/^[^\d.\s-]+/,h=/(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)\s+(\-?\d+\.?[\d\-\+e]*)/g,c=/^(\d+)\s+([\s\d]*)/,l=/^POINTS /,u=/^POLYGONS /,f=/^TRIANGLE_STRIPS /,d=/^POINT_DATA[ ]+(\d+)/,p=/^CELL_DATA[ ]+(\d+)/,g=/^COLOR_SCALARS[ ]+(\w+)[ ]+3/,y=/^NORMALS[ ]+(\w+)[ ]+(\w+)/,m=!1,v=!1,w=!1,b=!1,A=!1,x=!1,L=!1,I=t.split("\n");for(var E in I){var M=I[E].trim();if(0===M.indexOf("DATASET")){var T=M.split(" ")[1];if("POLYDATA"!==T)throw new Error("Unsupported DATASET type: "+T)}else if(m)for(;null!==(e=h.exec(M))&&null===o.exec(M);){var S=parseFloat(e[1]),U=parseFloat(e[2]),k=parseFloat(e[3]);i.push(S,U,k)}else if(v){if(null!==(e=c.exec(M))){var C=parseInt(e[1]),D=e[2].split(/\s+/);if(C>=3)for(var _=parseInt(D[0]),N=1,R=0;R<C-2;++R)F=parseInt(D[N]),z=parseInt(D[N+1]),r.push(_,F,z),N++}}else if(w){if(null!==(e=c.exec(M))){var F,z;if(C=parseInt(e[1]),D=e[2].split(/\s+/),C>=3)for(R=0;R<C-2;R++)R%2==1?(_=parseInt(D[R]),F=parseInt(D[R+2]),z=parseInt(D[R+1]),r.push(_,F,z)):(_=parseInt(D[R]),F=parseInt(D[R+1]),z=parseInt(D[R+2]),r.push(_,F,z))}}else if(b||A)if(x)for(;null!==(e=h.exec(M))&&null===o.exec(M);){var P=parseFloat(e[1]),O=parseFloat(e[2]),V=parseFloat(e[3]);a.push(P,O,V)}else if(L)for(;null!==(e=h.exec(M))&&null===o.exec(M);){var H=parseFloat(e[1]),B=parseFloat(e[2]),j=parseFloat(e[3]);s.push(H,B,j)}null!==u.exec(M)?(v=!0,m=!1,w=!1):null!==l.exec(M)?(v=!1,m=!0,w=!1):null!==f.exec(M)?(v=!1,m=!1,w=!0):null!==d.exec(M)?(b=!0,m=!1,v=!1,w=!1):null!==p.exec(M)?(A=!0,m=!1,v=!1,w=!1):null!==g.exec(M)?(x=!0,L=!1,m=!1,v=!1,w=!1):null!==y.exec(M)&&(L=!0,x=!1,m=!1,v=!1,w=!1)}var G=new n.BufferGeometry;if(G.setIndex(r),G.setAttribute("position",new n.Float32BufferAttribute(i,3)),s.length===i.length&&G.setAttribute("normal",new n.Float32BufferAttribute(s,3)),a.length!==r.length)a.length===i.length&&G.setAttribute("color",new n.Float32BufferAttribute(a,3));else{var $=(G=G.toNonIndexed()).attributes.position.count/3;if(a.length===3*$){var W=[];for(E=0;E<$;E++)P=a[3*E+0],O=a[3*E+1],V=a[3*E+2],W.push(P,O,V),W.push(P,O,V),W.push(P,O,V);G.setAttribute("color",new n.Float32BufferAttribute(W,3))}}return G}(n.LoaderUtils.decodeText(t)):function(t){var e,r,i,a,s,o,h,c=new Uint8Array(t),l=new DataView(t),u=[],f=[],d=[],p=[],g=0;function y(t,e){for(var r=e,n=t[r],i=[];10!==n;)i.push(String.fromCharCode(n)),n=t[++r];return{start:e,end:r,next:r+1,parsedString:i.join("")}}for(;;){if(0===(h=(o=y(c,g)).parsedString).indexOf("DATASET")){var m=h.split(" ")[1];if("POLYDATA"!==m)throw new Error("Unsupported DATASET type: "+m)}else if(0===h.indexOf("POINTS")){for(p.push(h),e=4*(a=parseInt(h.split(" ")[1],10))*3,u=new Float32Array(3*a),r=o.next,i=0;i<a;i++)u[3*i]=l.getFloat32(r,!1),u[3*i+1]=l.getFloat32(r+4,!1),u[3*i+2]=l.getFloat32(r+8,!1),r+=12;o.next=o.next+e+1}else if(0===h.indexOf("TRIANGLE_STRIPS")){var v=parseInt(h.split(" ")[1],10);e=4*(L=parseInt(h.split(" ")[2],10)),d=new Uint32Array(3*L-9*v);var w=0;for(r=o.next,i=0;i<v;i++){var b=l.getInt32(r,!1),A=[];for(r+=4,s=0;s<b;s++)A.push(l.getInt32(r,!1)),r+=4;for(var x=0;x<b-2;x++)x%2?(d[w++]=A[x],d[w++]=A[x+2],d[w++]=A[x+1]):(d[w++]=A[x],d[w++]=A[x+1],d[w++]=A[x+2])}o.next=o.next+e+1}else if(0===h.indexOf("POLYGONS")){var L;for(v=parseInt(h.split(" ")[1],10),e=4*(L=parseInt(h.split(" ")[2],10)),d=new Uint32Array(3*L-9*v),w=0,r=o.next,i=0;i<v;i++){for(b=l.getInt32(r,!1),A=[],r+=4,s=0;s<b;s++)A.push(l.getInt32(r,!1)),r+=4;for(x=1;x<b-1;x++)d[w++]=A[0],d[w++]=A[x],d[w++]=A[x+1]}o.next=o.next+e+1}else if(0===h.indexOf("POINT_DATA")){for(a=parseInt(h.split(" ")[1],10),o=y(c,o.next),e=4*a*3,f=new Float32Array(3*a),r=o.next,i=0;i<a;i++)f[3*i]=l.getFloat32(r,!1),f[3*i+1]=l.getFloat32(r+4,!1),f[3*i+2]=l.getFloat32(r+8,!1),r+=12;o.next=o.next+e}if((g=o.next)>=c.byteLength)break}var I=new n.BufferGeometry;return I.setIndex(new n.BufferAttribute(d,1)),I.setAttribute("position",new n.BufferAttribute(u,3)),f.length===u.length&&I.setAttribute("normal",new n.BufferAttribute(f,3)),I}(t)}})},jTIU:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r("QEtz"),i=r("JQAX"),a=r("rC+4"),s=r("455Q"),o={data:function(){return{container:null,stats:null,camera:null,controls:null,scene:null,renderer:null,container2:null,renderer2:null,camera2:null,axes2:null,scene2:null,gui:null}},mounted:function(){this.init(),this.animate()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var t=this;this.camera=new this.$THREE.PerspectiveCamera(60,this.$webglInnerWidth/window.innerHeight,.01,1e10),this.camera.position.z=300,this.scene=new this.$THREE.Scene,this.scene.add(this.camera);var e=new this.$THREE.HemisphereLight(16777215,0,1);this.scene.add(e);var r=new this.$THREE.DirectionalLight(16777215,.5);r.position.set(200,200,200),this.scene.add(r),(new a.a).load("static/models/nrrd/I.nrrd",function(e){var r=new t.$THREE.BoxBufferGeometry(e.xLength,e.yLength,e.zLength),n=new t.$THREE.MeshBasicMaterial({color:65280}),i=new t.$THREE.Mesh(r,n);i.visible=!1;var a=new t.$THREE.BoxHelper(i);t.scene.add(a),a.applyMatrix4(e.matrix),t.scene.add(i);var s=e.extractSlice("z",Math.floor(e.RASDimensions[2]/4));t.scene.add(s.mesh);var o=e.extractSlice("y",Math.floor(e.RASDimensions[1]/2));t.scene.add(o.mesh);var h=e.extractSlice("x",Math.floor(e.RASDimensions[0]/2));t.scene.add(h.mesh),t.gui.add(h,"index",0,e.RASDimensions[0],1).name("indexX").onChange(function(){h.repaint.call(h)}),t.gui.add(o,"index",0,e.RASDimensions[1],1).name("indexY").onChange(function(){o.repaint.call(o)}),t.gui.add(s,"index",0,e.RASDimensions[2],1).name("indexZ").onChange(function(){s.repaint.call(s)}),t.gui.add(e,"lowerThreshold",e.min,e.max,1).name("Lower Threshold").onChange(function(){e.repaintAllSlices()}),t.gui.add(e,"upperThreshold",e.min,e.max,1).name("Upper Threshold").onChange(function(){e.repaintAllSlices()}),t.gui.add(e,"windowLow",e.min,e.max,1).name("Window Low").onChange(function(){e.repaintAllSlices()}),t.gui.add(e,"windowHigh",e.min,e.max,1).name("Window High").onChange(function(){e.repaintAllSlices()})});var o=new this.$THREE.MeshLambertMaterial({wireframe:!1,morphTargets:!1,side:this.$THREE.DoubleSide,color:16711680});(new s.a).load("static/models/vtk/liver.vtk",function(e){e.computeVertexNormals();var r=new t.$THREE.Mesh(e,o);t.scene.add(r);var n={visible:!0};t.gui.add(n,"visible").name("Model Visible").onChange(function(){r.visible=n.visible,t.renderer.render(t.scene,t.camera)})}),this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.container=document.createElement("div"),document.getElementsByClassName("webglLoaderNrrd-container")[0].appendChild(this.container),this.container.appendChild(this.renderer.domElement),this.controls=new i.a(this.camera,this.renderer.domElement),this.controls.minDistance=100,this.controls.maxDistance=500,this.controls.rotateSpeed=5,this.controls.zoomSpeed=5,this.controls.panSpeed=2,this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),this.gui=new n.a,this.setupInset(),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.controls.handleResize()},animate:function(){requestAnimationFrame(this.animate),this.controls.update(),this.camera2.position.copy(this.camera.position),this.camera2.position.sub(this.controls.target),this.camera2.position.setLength(300),this.camera2.lookAt(this.scene2.position),this.renderer.render(this.scene,this.camera),this.renderer2.render(this.scene2,this.camera2),this.stats.update()},setupInset:function(){this.container2=document.getElementById("inset"),this.container2.width=150,this.container2.height=150,this.renderer2=new this.$THREE.WebGLRenderer({alpha:!0}),this.renderer2.setClearColor(0,0),this.renderer2.setSize(150,150),this.container2.appendChild(this.renderer2.domElement),this.scene2=new this.$THREE.Scene,this.camera2=new this.$THREE.PerspectiveCamera(50,1,1,1e3),this.camera2.up=this.camera.up,this.axes2=new this.$THREE.AxesHelper(100),this.scene2.add(this.axes2)}}},h={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"webglLoaderNrrd-container"},[e("div",{attrs:{id:"info"}},[e("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" -\n\t\t\tNRRD format loader test\n\t\t")]),this._v(" "),e("div",{attrs:{id:"inset"}})])}]};var c=r("VU/8")(o,h,!1,function(t){r("1qKJ")},"data-v-3d277862",null);e.default=c.exports},"rC+4":function(t,e,r){"use strict";var n=r("6+nK");
/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */function i(t){throw t}var a=void 0,s={};function o(t,e){var r,n=t.split("."),i=s;!(n[0]in i)&&i.execScript&&i.execScript("var "+n[0]);for(;n.length&&(r=n.shift());)n.length||e===a?i=i[r]?i[r]:i[r]={}:i[r]=e}var h,c="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;for(new(c?Uint8Array:Array)(256),h=0;256>h;++h)for(var l=(l=h)>>>1;l;l>>>=1)0;function u(t,e,r){var n,i="number"==typeof e?e:e=0,a="number"==typeof r?r:t.length;for(n=-1,i=7&a;i--;++e)n=n>>>8^d[255&(n^t[e])];for(i=a>>3;i--;e+=8)n=(n=(n=(n=(n=(n=(n=(n=n>>>8^d[255&(n^t[e])])>>>8^d[255&(n^t[e+1])])>>>8^d[255&(n^t[e+2])])>>>8^d[255&(n^t[e+3])])>>>8^d[255&(n^t[e+4])])>>>8^d[255&(n^t[e+5])])>>>8^d[255&(n^t[e+6])])>>>8^d[255&(n^t[e+7])];return(4294967295^n)>>>0}var f=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,936918e3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],d=c?new Uint32Array(f):f;function p(){}function g(t){var e,r,n,i,a,s,o,h,l,u,f=t.length,d=0,p=Number.POSITIVE_INFINITY;for(h=0;h<f;++h)t[h]>d&&(d=t[h]),t[h]<p&&(p=t[h]);for(e=1<<d,r=new(c?Uint32Array:Array)(e),n=1,i=0,a=2;n<=d;){for(h=0;h<f;++h)if(t[h]===n){for(s=0,o=i,l=0;l<n;++l)s=s<<1|1&o,o>>=1;for(u=n<<16|h,l=s;l<e;l+=a)r[l]=u;++i}++n,i<<=1,a<<=1}return[r,d,p]}p.prototype.getName=function(){return this.name},p.prototype.getData=function(){return this.data},p.prototype.H=function(){return this.I},o("Zlib.GunzipMember",p),o("Zlib.GunzipMember.prototype.getName",p.prototype.getName),o("Zlib.GunzipMember.prototype.getData",p.prototype.getData),o("Zlib.GunzipMember.prototype.getMtime",p.prototype.H);var y,m=[];for(y=0;288>y;y++)switch(!0){case 143>=y:m.push([y+48,8]);break;case 255>=y:m.push([y-144+400,9]);break;case 279>=y:m.push([y-256+0,7]);break;case 287>=y:m.push([y-280+192,8]);break;default:i("invalid literal: "+y)}var v=function(){function t(t){switch(!0){case 3===t:return[257,t-3,0];case 4===t:return[258,t-4,0];case 5===t:return[259,t-5,0];case 6===t:return[260,t-6,0];case 7===t:return[261,t-7,0];case 8===t:return[262,t-8,0];case 9===t:return[263,t-9,0];case 10===t:return[264,t-10,0];case 12>=t:return[265,t-11,1];case 14>=t:return[266,t-13,1];case 16>=t:return[267,t-15,1];case 18>=t:return[268,t-17,1];case 22>=t:return[269,t-19,2];case 26>=t:return[270,t-23,2];case 30>=t:return[271,t-27,2];case 34>=t:return[272,t-31,2];case 42>=t:return[273,t-35,3];case 50>=t:return[274,t-43,3];case 58>=t:return[275,t-51,3];case 66>=t:return[276,t-59,3];case 82>=t:return[277,t-67,4];case 98>=t:return[278,t-83,4];case 114>=t:return[279,t-99,4];case 130>=t:return[280,t-115,4];case 162>=t:return[281,t-131,5];case 194>=t:return[282,t-163,5];case 226>=t:return[283,t-195,5];case 257>=t:return[284,t-227,5];case 258===t:return[285,t-258,0];default:i("invalid length: "+t)}}var e,r,n=[];for(e=3;258>=e;e++)r=t(e),n[e]=r[2]<<24|r[1]<<16|r[0];return n}();function w(t,e){switch(this.i=[],this.j=32768,this.d=this.f=this.c=this.n=0,this.input=c?new Uint8Array(t):t,this.o=!1,this.k=A,this.z=!1,!e&&(e={})||(e.index&&(this.c=e.index),e.bufferSize&&(this.j=e.bufferSize),e.bufferType&&(this.k=e.bufferType),e.resize&&(this.z=e.resize)),this.k){case b:this.a=32768,this.b=new(c?Uint8Array:Array)(32768+this.j+258);break;case A:this.a=0,this.b=new(c?Uint8Array:Array)(this.j),this.e=this.F,this.q=this.B,this.l=this.D;break;default:i(Error("invalid inflate mode"))}}c&&new Uint32Array(v);var b=0,A=1;w.prototype.g=function(){for(;!this.o;){var t=V(this,3);switch(1&t&&(this.o=!0),t>>>=1){case 0:var e=this.input,r=this.c,n=this.b,s=this.a,o=e.length,h=a,l=n.length,u=a;switch(this.d=this.f=0,r+1>=o&&i(Error("invalid uncompressed block header: LEN")),h=e[r++]|e[r++]<<8,r+1>=o&&i(Error("invalid uncompressed block header: NLEN")),h===~(e[r++]|e[r++]<<8)&&i(Error("invalid uncompressed block header: length verify")),r+h>e.length&&i(Error("input buffer is broken")),this.k){case b:for(;s+h>n.length;){if(h-=u=l-s,c)n.set(e.subarray(r,r+u),s),s+=u,r+=u;else for(;u--;)n[s++]=e[r++];this.a=s,n=this.e(),s=this.a}break;case A:for(;s+h>n.length;)n=this.e({t:2});break;default:i(Error("invalid inflate mode"))}if(c)n.set(e.subarray(r,r+h),s),s+=h,r+=h;else for(;h--;)n[s++]=e[r++];this.c=r,this.a=s,this.b=n;break;case 1:this.l(z,O);break;case 2:B(this);break;default:i(Error("unknown BTYPE: "+t))}}return this.q()};var x,L,I=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],E=c?new Uint16Array(I):I,M=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],T=c?new Uint16Array(M):M,S=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],U=c?new Uint8Array(S):S,k=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],C=c?new Uint16Array(k):k,D=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],_=c?new Uint8Array(D):D,N=new(c?Uint8Array:Array)(288);for(x=0,L=N.length;x<L;++x)N[x]=143>=x?8:255>=x?9:279>=x?7:8;var R,F,z=g(N),P=new(c?Uint8Array:Array)(30);for(R=0,F=P.length;R<F;++R)P[R]=5;var O=g(P);function V(t,e){for(var r,n=t.f,a=t.d,s=t.input,o=t.c,h=s.length;a<e;)o>=h&&i(Error("input buffer is broken")),n|=s[o++]<<a,a+=8;return r=n&(1<<e)-1,t.f=n>>>e,t.d=a-e,t.c=o,r}function H(t,e){for(var r,n,i=t.f,a=t.d,s=t.input,o=t.c,h=s.length,c=e[0],l=e[1];a<l&&!(o>=h);)i|=s[o++]<<a,a+=8;return n=(r=c[i&(1<<l)-1])>>>16,t.f=i>>n,t.d=a-n,t.c=o,65535&r}function B(t){function e(t,e,r){var n,i,a,s=this.w;for(a=0;a<t;)switch(n=H(this,e)){case 16:for(i=3+V(this,2);i--;)r[a++]=s;break;case 17:for(i=3+V(this,3);i--;)r[a++]=0;s=0;break;case 18:for(i=11+V(this,7);i--;)r[a++]=0;s=0;break;default:s=r[a++]=n}return this.w=s,r}var r,n,i,a,s=V(t,5)+257,o=V(t,5)+1,h=V(t,4)+4,l=new(c?Uint8Array:Array)(E.length);for(a=0;a<h;++a)l[E[a]]=V(t,3);if(!c)for(a=h,h=l.length;a<h;++a)l[E[a]]=0;r=g(l),n=new(c?Uint8Array:Array)(s),i=new(c?Uint8Array:Array)(o),t.w=0,t.l(g(e.call(t,s,r,n)),g(e.call(t,o,r,i)))}function j(t){this.input=t,this.c=0,this.m=[],this.s=!1}w.prototype.l=function(t,e){var r=this.b,n=this.a;this.r=t;for(var i,a,s,o,h=r.length-258;256!==(i=H(this,t));)if(256>i)n>=h&&(this.a=n,r=this.e(),n=this.a),r[n++]=i;else for(o=T[a=i-257],0<U[a]&&(o+=V(this,U[a])),i=H(this,e),s=C[i],0<_[i]&&(s+=V(this,_[i])),n>=h&&(this.a=n,r=this.e(),n=this.a);o--;)r[n]=r[n++-s];for(;8<=this.d;)this.d-=8,this.c--;this.a=n},w.prototype.D=function(t,e){var r=this.b,n=this.a;this.r=t;for(var i,a,s,o,h=r.length;256!==(i=H(this,t));)if(256>i)n>=h&&(h=(r=this.e()).length),r[n++]=i;else for(o=T[a=i-257],0<U[a]&&(o+=V(this,U[a])),i=H(this,e),s=C[i],0<_[i]&&(s+=V(this,_[i])),n+o>h&&(h=(r=this.e()).length);o--;)r[n]=r[n++-s];for(;8<=this.d;)this.d-=8,this.c--;this.a=n},w.prototype.e=function(){var t,e,r=new(c?Uint8Array:Array)(this.a-32768),n=this.a-32768,i=this.b;if(c)r.set(i.subarray(32768,r.length));else for(t=0,e=r.length;t<e;++t)r[t]=i[t+32768];if(this.i.push(r),this.n+=r.length,c)i.set(i.subarray(n,n+32768));else for(t=0;32768>t;++t)i[t]=i[n+t];return this.a=32768,i},w.prototype.F=function(t){var e,r,n,i=this.input.length/this.c+1|0,a=this.input,s=this.b;return t&&("number"==typeof t.t&&(i=t.t),"number"==typeof t.A&&(i+=t.A)),2>i?r=(n=(a.length-this.c)/this.r[2]/2*258|0)<s.length?s.length+n:s.length<<1:r=s.length*i,c?(e=new Uint8Array(r)).set(s):e=s,this.b=e},w.prototype.q=function(){var t,e,r,n,i,a=0,s=this.b,o=this.i,h=new(c?Uint8Array:Array)(this.n+(this.a-32768));if(0===o.length)return c?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);for(e=0,r=o.length;e<r;++e)for(n=0,i=(t=o[e]).length;n<i;++n)h[a++]=t[n];for(e=32768,r=this.a;e<r;++e)h[a++]=s[e];return this.i=[],this.buffer=h},w.prototype.B=function(){var t,e=this.a;return c?this.z?(t=new Uint8Array(e)).set(this.b.subarray(0,e)):t=this.b.subarray(0,e):(this.b.length>e&&(this.b.length=e),t=this.b),this.buffer=t},j.prototype.G=function(){return this.s||this.g(),this.m.slice()},j.prototype.g=function(){for(var t=this.input.length;this.c<t;){var e,r,n=new p,s=a,o=a,h=a,l=a,f=a,d=a,g=a,y=this.input,m=this.c;switch(n.u=y[m++],n.v=y[m++],(31!==n.u||139!==n.v)&&i(Error("invalid file signature:"+n.u+","+n.v)),n.p=y[m++],n.p){case 8:break;default:i(Error("unknown compression method: "+n.p))}if(n.h=y[m++],r=y[m++]|y[m++]<<8|y[m++]<<16|y[m++]<<24,n.I=new Date(1e3*r),n.O=y[m++],n.N=y[m++],0<(4&n.h)&&(n.J=y[m++]|y[m++]<<8,m+=n.J),0<(8&n.h)){for(d=[],f=0;0<(l=y[m++]);)d[f++]=String.fromCharCode(l);n.name=d.join("")}if(0<(16&n.h)){for(d=[],f=0;0<(l=y[m++]);)d[f++]=String.fromCharCode(l);n.K=d.join("")}0<(2&n.h)&&(n.C=65535&u(y,0,m),n.C!==(y[m++]|y[m++]<<8)&&i(Error("invalid header crc16"))),s=y[y.length-4]|y[y.length-3]<<8|y[y.length-2]<<16|y[y.length-1]<<24,y.length-m-4-4<512*s&&(h=s),o=new w(y,{index:m,bufferSize:h}),n.data=e=o.g(),m=o.c,n.L=g=(y[m++]|y[m++]<<8|y[m++]<<16|y[m++]<<24)>>>0,u(e,a,a)!==g&&i(Error("invalid CRC-32 checksum: 0x"+u(e,a,a).toString(16)+" / 0x"+g.toString(16))),n.M=s=(y[m++]|y[m++]<<8|y[m++]<<16|y[m++]<<24)>>>0,(4294967295&e.length)!==s&&i(Error("invalid input size: "+(4294967295&e.length)+" / "+s)),this.m.push(n),this.c=m}this.s=!0;var v,b,A,x=this.m,L=0,I=0;for(v=0,b=x.length;v<b;++v)I+=x[v].data.length;if(c)for(A=new Uint8Array(I),v=0;v<b;++v)A.set(x[v].data,L),L+=x[v].data.length;else{for(A=[],v=0;v<b;++v)A[v]=x[v].data;A=Array.prototype.concat.apply([],A)}return A},o("Zlib.Gunzip",j),o("Zlib.Gunzip.prototype.decompress",j.prototype.g),o("Zlib.Gunzip.prototype.getMembers",j.prototype.G);var G=s.Zlib,$=function(t,e,r){var i=this;this.volume=t,e=e||0,Object.defineProperty(this,"index",{get:function(){return e},set:function(t){return e=t,i.geometryNeedsUpdate=!0,e}}),this.axis=r||"z",this.canvas=document.createElement("canvas"),this.canvasBuffer=document.createElement("canvas"),this.updateGeometry();var a=new n.Texture(this.canvas);a.minFilter=n.LinearFilter,a.wrapS=a.wrapT=n.ClampToEdgeWrapping;var s=new n.MeshBasicMaterial({map:a,side:n.DoubleSide,transparent:!0});this.mesh=new n.Mesh(this.geometry,s),this.mesh.matrixAutoUpdate=!1,this.geometryNeedsUpdate=!0,this.repaint()};$.prototype={constructor:$,repaint:function(){this.geometryNeedsUpdate&&this.updateGeometry();var t=this.iLength,e=this.jLength,r=this.sliceAccess,n=this.volume,i=this.canvasBuffer,a=this.ctxBuffer,s=a.getImageData(0,0,t,e),o=s.data,h=n.data,c=n.upperThreshold,l=n.lowerThreshold,u=n.windowLow,f=n.windowHigh,d=0;if("label"===n.dataType)for(var p=0;p<e;p++)for(var g=0;g<t;g++){var y=h[r(g,p)];y=y>=this.colorMap.length?y%this.colorMap.length+1:y;var m=this.colorMap[y];o[4*d]=m>>24&255,o[4*d+1]=m>>16&255,o[4*d+2]=m>>8&255,o[4*d+3]=255&m,d++}else for(p=0;p<e;p++)for(g=0;g<t;g++){var v=h[r(g,p)],w=255;w=c>=v&&l<=v?w:0,v=(v=Math.floor(255*(v-u)/(f-u)))>255?255:v<0?0:0|v,o[4*d]=v,o[4*d+1]=v,o[4*d+2]=v,o[4*d+3]=w,d++}a.putImageData(s,0,0),this.ctx.drawImage(i,0,0,t,e,0,0,this.canvas.width,this.canvas.height),this.mesh.material.map.needsUpdate=!0},updateGeometry:function(){var t=this.volume.extractPerpendicularPlane(this.axis,this.index);this.sliceAccess=t.sliceAccess,this.jLength=t.jLength,this.iLength=t.iLength,this.matrix=t.matrix,this.canvas.width=t.planeWidth,this.canvas.height=t.planeHeight,this.canvasBuffer.width=this.iLength,this.canvasBuffer.height=this.jLength,this.ctx=this.canvas.getContext("2d"),this.ctxBuffer=this.canvasBuffer.getContext("2d"),this.geometry&&this.geometry.dispose(),this.geometry=new n.PlaneBufferGeometry(t.planeWidth,t.planeHeight),this.mesh&&(this.mesh.geometry=this.geometry,this.mesh.matrix.identity(),this.mesh.applyMatrix4(this.matrix)),this.geometryNeedsUpdate=!1}};var W=function(t,e,r,i,a){if(arguments.length>0){switch(this.xLength=Number(t)||1,this.yLength=Number(e)||1,this.zLength=Number(r)||1,i){case"Uint8":case"uint8":case"uchar":case"unsigned char":case"uint8_t":this.data=new Uint8Array(a);break;case"Int8":case"int8":case"signed char":case"int8_t":this.data=new Int8Array(a);break;case"Int16":case"int16":case"short":case"short int":case"signed short":case"signed short int":case"int16_t":this.data=new Int16Array(a);break;case"Uint16":case"uint16":case"ushort":case"unsigned short":case"unsigned short int":case"uint16_t":this.data=new Uint16Array(a);break;case"Int32":case"int32":case"int":case"signed int":case"int32_t":this.data=new Int32Array(a);break;case"Uint32":case"uint32":case"uint":case"unsigned int":case"uint32_t":this.data=new Uint32Array(a);break;case"longlong":case"long long":case"long long int":case"signed long long":case"signed long long int":case"int64":case"int64_t":case"ulonglong":case"unsigned long long":case"unsigned long long int":case"uint64":case"uint64_t":throw"Error in Volume constructor : this type is not supported in JavaScript";case"Float32":case"float32":case"float":this.data=new Float32Array(a);break;case"Float64":case"float64":case"double":this.data=new Float64Array(a);break;default:this.data=new Uint8Array(a)}if(this.data.length!==this.xLength*this.yLength*this.zLength)throw"Error in Volume constructor, lengths are not matching arrayBuffer size"}this.spacing=[1,1,1],this.offset=[0,0,0],this.matrix=new n.Matrix3,this.matrix.identity();var s=-1/0;Object.defineProperty(this,"lowerThreshold",{get:function(){return s},set:function(t){s=t,this.sliceList.forEach(function(t){t.geometryNeedsUpdate=!0})}});var o=1/0;Object.defineProperty(this,"upperThreshold",{get:function(){return o},set:function(t){o=t,this.sliceList.forEach(function(t){t.geometryNeedsUpdate=!0})}}),this.sliceList=[]};W.prototype={constructor:W,getData:function(t,e,r){return this.data[r*this.xLength*this.yLength+e*this.xLength+t]},access:function(t,e,r){return r*this.xLength*this.yLength+e*this.xLength+t},reverseAccess:function(t){var e=Math.floor(t/(this.yLength*this.xLength)),r=Math.floor((t-e*this.yLength*this.xLength)/this.xLength);return[t-e*this.yLength*this.xLength-r*this.xLength,r,e]},map:function(t,e){var r=this.data.length;e=e||this;for(var n=0;n<r;n++)this.data[n]=t.call(e,this.data[n],n,this.data);return this},extractPerpendicularPlane:function(t,e){var r,i,a,s,o,h,c,l,u=(new n.Matrix4).identity(),f=this,d=new n.Vector3,p=new n.Vector3,g=new n.Vector3,y=new n.Vector3(this.xLength,this.yLength,this.zLength);switch(t){case"x":d.set(1,0,0),p.set(0,0,-1),g.set(0,-1,0),o=this.spacing[2],h=this.spacing[1],l=new n.Vector3(e,0,0),u.multiply((new n.Matrix4).makeRotationY(Math.PI/2)),c=(f.RASDimensions[0]-1)/2,u.setPosition(new n.Vector3(e-c,0,0));break;case"y":d.set(0,1,0),p.set(1,0,0),g.set(0,0,1),o=this.spacing[0],h=this.spacing[2],l=new n.Vector3(0,e,0),u.multiply((new n.Matrix4).makeRotationX(-Math.PI/2)),c=(f.RASDimensions[1]-1)/2,u.setPosition(new n.Vector3(0,e-c,0));break;case"z":default:d.set(0,0,1),p.set(1,0,0),g.set(0,-1,0),o=this.spacing[0],h=this.spacing[1],l=new n.Vector3(0,0,e),c=(f.RASDimensions[2]-1)/2,u.setPosition(new n.Vector3(0,0,e-c))}p.applyMatrix4(f.inverseMatrix).normalize(),p.argVar="i",g.applyMatrix4(f.inverseMatrix).normalize(),g.argVar="j",d.applyMatrix4(f.inverseMatrix).normalize(),r=Math.floor(Math.abs(p.dot(y))),i=Math.floor(Math.abs(g.dot(y))),a=Math.abs(r*o),s=Math.abs(i*h),l=Math.abs(Math.round(l.applyMatrix4(f.inverseMatrix).dot(d)));var m=[new n.Vector3(1,0,0),new n.Vector3(0,1,0),new n.Vector3(0,0,1)],v=[p,g,d].find(function(t){return Math.abs(t.dot(m[0]))>.9}),w=[p,g,d].find(function(t){return Math.abs(t.dot(m[1]))>.9}),b=[p,g,d].find(function(t){return Math.abs(t.dot(m[2]))>.9});return{iLength:r,jLength:i,sliceAccess:function(t,e){var r=v===d?l:"i"===v.argVar?t:e,n=w===d?l:"i"===w.argVar?t:e,i=b===d?l:"i"===b.argVar?t:e,a=v.dot(m[0])>0?r:f.xLength-1-r,s=w.dot(m[1])>0?n:f.yLength-1-n,o=b.dot(m[2])>0?i:f.zLength-1-i;return f.access(a,s,o)},matrix:u,planeWidth:a,planeHeight:s}},extractSlice:function(t,e){var r=new $(this,e,t);return this.sliceList.push(r),r},repaintAllSlices:function(){return this.sliceList.forEach(function(t){t.repaint()}),this},computeMinMax:function(){var t=1/0,e=-1/0,r=this.data.length,n=0;for(n=0;n<r;n++)if(!isNaN(this.data[n])){var i=this.data[n];t=Math.min(t,i),e=Math.max(e,i)}return this.min=t,this.max=e,[t,e]}},r.d(e,"a",function(){return q});var q=function(t){n.Loader.call(this,t)};q.prototype=Object.assign(Object.create(n.Loader.prototype),{constructor:q,load:function(t,e,r,i){var a=this,s=new n.FileLoader(a.manager);s.setPath(a.path),s.setResponseType("arraybuffer"),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(t,function(r){try{e(a.parse(r))}catch(e){i?i(e):console.error(e),a.manager.itemError(t)}},r,i)},parse:function(t){var e=t,r=0,i=new Int8Array(new Int16Array([1]).buffer)[0]>0,a=!0,s={};var o=function(t,n){void 0!==n&&null!==n||(n=1);var s=1,o=Uint8Array;switch(t){case"uchar":break;case"schar":o=Int8Array;break;case"ushort":o=Uint16Array,s=2;break;case"sshort":o=Int16Array,s=2;break;case"uint":o=Uint32Array,s=4;break;case"sint":o=Int32Array,s=4;break;case"float":o=Float32Array,s=4;break;case"complex":case"double":o=Float64Array,s=8}var h=new o(e.slice(r,r+=n*s));return i!=a&&(h=function(t,e){for(var r=new Uint8Array(t.buffer,t.byteOffset,t.byteLength),n=0;n<t.byteLength;n+=e)for(var i=n+e-1,a=n;i>a;i--,a++){var s=r[a];r[a]=r[i],r[i]=s}return t}(h,s)),1==n?h[0]:h}("uchar",t.byteLength),h=o.length,c=null,l=0;for(d=1;d<h;d++)if(10==o[d-1]&&10==o[d]){c=this.parseChars(o,0,d-2),l=d+1;break}!function(t){var e,r,i,a,o,h,c,l,u;for(l=0,u=(h=t.split(/\r?\n/)).length;l<u;l++)(o=h[l]).match(/NRRD\d+/)?s.isNrrd=!0:o.match(/^#/)||(c=o.match(/(.*):(.*)/))&&(r=c[1].trim(),e=c[2].trim(),(i=q.prototype.fieldFunctions[r])?i.call(s,e):s[r]=e);if(!s.isNrrd)throw new Error("Not an NRRD file");if("bz2"===s.encoding||"bzip2"===s.encoding)throw new Error("Bzip is not supported");if(!s.vectors&&(s.vectors=[new n.Vector3(1,0,0),new n.Vector3(0,1,0),new n.Vector3(0,0,1)],s.spacings))for(a=0;a<=2;a++)isNaN(s.spacings[a])||s.vectors[a].multiplyScalar(s.spacings[a])}(c);e=o.subarray(l);if("gzip"===s.encoding||"gz"===s.encoding){var u=new G.Gunzip(new Uint8Array(e));e=u.decompress()}else if("ascii"===s.encoding||"text"===s.encoding||"txt"===s.encoding||"hex"===s.encoding)e=function(t,e,r){var n,i="";e=e||0,r=r||t.length;var a=s.sizes.reduce(function(t,e){return t*e},1),o=10;"hex"===s.encoding&&(o=16);var h=new s.__array(a),c=0,l=parseInt;s.__array!==Float32Array&&s.__array!==Float64Array||(l=parseFloat);for(var u=e;u<r;u++)((n=t[u])<9||n>13)&&32!==n?i+=String.fromCharCode(n):(""!==i&&(h[c]=l(i,o),c++),i="");return""!==i&&(h[c]=l(i,o),c++),h}(e);else if("raw"===s.encoding){for(var f=new Uint8Array(e.length),d=0;d<e.length;d++)f[d]=e[d];e=f}e=e.buffer;var p=new W;p.header=s,p.data=new s.__array(e);var g=p.computeMinMax(),y=g[0],m=g[1];p.windowLow=y,p.windowHigh=m,p.dimensions=[s.sizes[0],s.sizes[1],s.sizes[2]],p.xLength=p.dimensions[0],p.yLength=p.dimensions[1],p.zLength=p.dimensions[2];var v=new n.Vector3(s.vectors[0][0],s.vectors[0][1],s.vectors[0][2]).length(),w=new n.Vector3(s.vectors[1][0],s.vectors[1][1],s.vectors[1][2]).length(),b=new n.Vector3(s.vectors[2][0],s.vectors[2][1],s.vectors[2][2]).length();p.spacing=[v,w,b],p.matrix=new n.Matrix4;var A=1,x=1;if("left-posterior-superior"==s.space?(A=-1,x=-1):"left-anterior-superior"===s.space&&(A=-1),s.vectors){var L=s.vectors;p.matrix.set(A*L[0][0],A*L[1][0],A*L[2][0],0,x*L[0][1],x*L[1][1],x*L[2][1],0,1*L[0][2],1*L[1][2],1*L[2][2],0,0,0,0,1)}else p.matrix.set(A,0,0,0,0,x,0,0,0,0,1,0,0,0,0,1);return p.inverseMatrix=new n.Matrix4,p.inverseMatrix.copy(p.matrix).invert(),p.RASDimensions=new n.Vector3(p.xLength,p.yLength,p.zLength).applyMatrix4(p.matrix).round().toArray().map(Math.abs),p.lowerThreshold===-1/0&&(p.lowerThreshold=y),p.upperThreshold===1/0&&(p.upperThreshold=m),p},parseChars:function(t,e,r){void 0===e&&(e=0),void 0===r&&(r=t.length);var n="",i=0;for(i=e;i<r;++i)n+=String.fromCharCode(t[i]);return n},fieldFunctions:{type:function(t){switch(t){case"uchar":case"unsigned char":case"uint8":case"uint8_t":this.__array=Uint8Array;break;case"signed char":case"int8":case"int8_t":this.__array=Int8Array;break;case"short":case"short int":case"signed short":case"signed short int":case"int16":case"int16_t":this.__array=Int16Array;break;case"ushort":case"unsigned short":case"unsigned short int":case"uint16":case"uint16_t":this.__array=Uint16Array;break;case"int":case"signed int":case"int32":case"int32_t":this.__array=Int32Array;break;case"uint":case"unsigned int":case"uint32":case"uint32_t":this.__array=Uint32Array;break;case"float":this.__array=Float32Array;break;case"double":this.__array=Float64Array;break;default:throw new Error("Unsupported NRRD data type: "+t)}return this.type=t},endian:function(t){return this.endian=t},encoding:function(t){return this.encoding=t},dimension:function(t){return this.dim=parseInt(t,10)},sizes:function(t){var e;return this.sizes=function(){var r,n,i,a;for(a=[],r=0,n=(i=t.split(/\s+/)).length;r<n;r++)e=i[r],a.push(parseInt(e,10));return a}()},space:function(t){return this.space=t},"space origin":function(t){return this.space_origin=t.split("(")[1].split(")")[0].split(",")},"space directions":function(t){var e,r,n;return r=t.match(/\(.*?\)/g),this.vectors=function(){var t,i,a;for(a=[],t=0,i=r.length;t<i;t++)n=r[t],a.push(function(){var t,r,i,a;for(a=[],t=0,r=(i=n.slice(1,-1).split(/,/)).length;t<r;t++)e=i[t],a.push(parseFloat(e));return a}());return a}()},spacings:function(t){var e,r;return r=t.split(/\s+/),this.spacings=function(){var t,n,i=[];for(t=0,n=r.length;t<n;t++)e=r[t],i.push(parseFloat(e));return i}()}}})}});
//# sourceMappingURL=11.7bc0096e64870acadbe2.js.map