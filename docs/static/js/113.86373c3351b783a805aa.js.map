{"version":3,"sources":["webpack:///./src/components/jsm/loaders/VOXLoader.js","webpack:///src/views/loader/webglLoaderVox.vue","webpack:///./src/views/loader/webglLoaderVox.vue?4e66","webpack:///./src/views/loader/webglLoaderVox.vue"],"names":["VOXLoader","manager","Loader","call","this","prototype","Object","assign","create","constructor","load","url","onLoad","onProgress","onError","scope","loader","FileLoader","setPath","path","setResponseType","setRequestHeader","requestHeader","buffer","parse","e","console","error","itemError","data","DataView","id","getInt32","version","getUint32","DEFAULT_PALETTE","i","chunk","chunks","byteLength","j","String","fromCharCode","getInt8","chunkSize","x","y","z","palette","size","push","numVoxels","Int8Array","webglLoaderVox","camera","controls","scene","renderer","mounted","init","animate","methods","_this","$THREE","PerspectiveCamera","$webglInnerWidth","window","innerHeight","position","set","Scene","add","hemiLight","HemisphereLight","dirLight","DirectionalLight","geometry","BoxBufferGeometry","material","MeshStandardMaterial","color","Color","matrix","Matrix4","length","mesh","InstancedMesh","scale","setScalar","k","hex","r","g","b","setColorAt","setRGB","setMatrixAt","setPosition","WebGLRenderer","setPixelRatio","devicePixelRatio","setSize","container","document","createElement","getElementsByClassName","appendChild","domElement","OrbitControls","minDistance","maxDistance","addEventListener","onWindowResize","$onWindowResize","requestAnimationFrame","update","render","loader_webglLoaderVox","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","href","target","rel","_v","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/113.86373c3351b783a805aa.js","sourcesContent":["import {\r\n\tFileLoader,\r\n\tLoader\r\n} from \"@/components/build/three.module.js\";\r\n\r\nfunction VOXLoader( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n}\r\n\r\nVOXLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: VOXLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.load( url, function ( buffer ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( buffer ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( buffer ) {\r\n\r\n\t\tconst data = new DataView( buffer );\r\n\r\n\t\tconst id = data.getInt32( 0, true );\r\n\t\tconst version = data.getUint32( 4, true );\r\n\r\n\t\tif ( id !== 542658390 || version !== 150 ) {\r\n\r\n\t\t\tconsole.error( 'Not a valid VOX file' );\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\r\n\t\tconst DEFAULT_PALETTE = [\r\n\t\t\t0x00000000, 0xffffffff, 0xffccffff, 0xff99ffff, 0xff66ffff, 0xff33ffff, 0xff00ffff, 0xffffccff,\r\n\t\t\t0xffccccff, 0xff99ccff, 0xff66ccff, 0xff33ccff, 0xff00ccff, 0xffff99ff, 0xffcc99ff, 0xff9999ff,\r\n\t\t\t0xff6699ff, 0xff3399ff, 0xff0099ff, 0xffff66ff, 0xffcc66ff, 0xff9966ff, 0xff6666ff, 0xff3366ff,\r\n\t\t\t0xff0066ff, 0xffff33ff, 0xffcc33ff, 0xff9933ff, 0xff6633ff, 0xff3333ff, 0xff0033ff, 0xffff00ff,\r\n\t\t\t0xffcc00ff, 0xff9900ff, 0xff6600ff, 0xff3300ff, 0xff0000ff, 0xffffffcc, 0xffccffcc, 0xff99ffcc,\r\n\t\t\t0xff66ffcc, 0xff33ffcc, 0xff00ffcc, 0xffffcccc, 0xffcccccc, 0xff99cccc, 0xff66cccc, 0xff33cccc,\r\n\t\t\t0xff00cccc, 0xffff99cc, 0xffcc99cc, 0xff9999cc, 0xff6699cc, 0xff3399cc, 0xff0099cc, 0xffff66cc,\r\n\t\t\t0xffcc66cc, 0xff9966cc, 0xff6666cc, 0xff3366cc, 0xff0066cc, 0xffff33cc, 0xffcc33cc, 0xff9933cc,\r\n\t\t\t0xff6633cc, 0xff3333cc, 0xff0033cc, 0xffff00cc, 0xffcc00cc, 0xff9900cc, 0xff6600cc, 0xff3300cc,\r\n\t\t\t0xff0000cc, 0xffffff99, 0xffccff99, 0xff99ff99, 0xff66ff99, 0xff33ff99, 0xff00ff99, 0xffffcc99,\r\n\t\t\t0xffcccc99, 0xff99cc99, 0xff66cc99, 0xff33cc99, 0xff00cc99, 0xffff9999, 0xffcc9999, 0xff999999,\r\n\t\t\t0xff669999, 0xff339999, 0xff009999, 0xffff6699, 0xffcc6699, 0xff996699, 0xff666699, 0xff336699,\r\n\t\t\t0xff006699, 0xffff3399, 0xffcc3399, 0xff993399, 0xff663399, 0xff333399, 0xff003399, 0xffff0099,\r\n\t\t\t0xffcc0099, 0xff990099, 0xff660099, 0xff330099, 0xff000099, 0xffffff66, 0xffccff66, 0xff99ff66,\r\n\t\t\t0xff66ff66, 0xff33ff66, 0xff00ff66, 0xffffcc66, 0xffcccc66, 0xff99cc66, 0xff66cc66, 0xff33cc66,\r\n\t\t\t0xff00cc66, 0xffff9966, 0xffcc9966, 0xff999966, 0xff669966, 0xff339966, 0xff009966, 0xffff6666,\r\n\t\t\t0xffcc6666, 0xff996666, 0xff666666, 0xff336666, 0xff006666, 0xffff3366, 0xffcc3366, 0xff993366,\r\n\t\t\t0xff663366, 0xff333366, 0xff003366, 0xffff0066, 0xffcc0066, 0xff990066, 0xff660066, 0xff330066,\r\n\t\t\t0xff000066, 0xffffff33, 0xffccff33, 0xff99ff33, 0xff66ff33, 0xff33ff33, 0xff00ff33, 0xffffcc33,\r\n\t\t\t0xffcccc33, 0xff99cc33, 0xff66cc33, 0xff33cc33, 0xff00cc33, 0xffff9933, 0xffcc9933, 0xff999933,\r\n\t\t\t0xff669933, 0xff339933, 0xff009933, 0xffff6633, 0xffcc6633, 0xff996633, 0xff666633, 0xff336633,\r\n\t\t\t0xff006633, 0xffff3333, 0xffcc3333, 0xff993333, 0xff663333, 0xff333333, 0xff003333, 0xffff0033,\r\n\t\t\t0xffcc0033, 0xff990033, 0xff660033, 0xff330033, 0xff000033, 0xffffff00, 0xffccff00, 0xff99ff00,\r\n\t\t\t0xff66ff00, 0xff33ff00, 0xff00ff00, 0xffffcc00, 0xffcccc00, 0xff99cc00, 0xff66cc00, 0xff33cc00,\r\n\t\t\t0xff00cc00, 0xffff9900, 0xffcc9900, 0xff999900, 0xff669900, 0xff339900, 0xff009900, 0xffff6600,\r\n\t\t\t0xffcc6600, 0xff996600, 0xff666600, 0xff336600, 0xff006600, 0xffff3300, 0xffcc3300, 0xff993300,\r\n\t\t\t0xff663300, 0xff333300, 0xff003300, 0xffff0000, 0xffcc0000, 0xff990000, 0xff660000, 0xff330000,\r\n\t\t\t0xff0000ee, 0xff0000dd, 0xff0000bb, 0xff0000aa, 0xff000088, 0xff000077, 0xff000055, 0xff000044,\r\n\t\t\t0xff000022, 0xff000011, 0xff00ee00, 0xff00dd00, 0xff00bb00, 0xff00aa00, 0xff008800, 0xff007700,\r\n\t\t\t0xff005500, 0xff004400, 0xff002200, 0xff001100, 0xffee0000, 0xffdd0000, 0xffbb0000, 0xffaa0000,\r\n\t\t\t0xff880000, 0xff770000, 0xff550000, 0xff440000, 0xff220000, 0xff110000, 0xffeeeeee, 0xffdddddd,\r\n\t\t\t0xffbbbbbb, 0xffaaaaaa, 0xff888888, 0xff777777, 0xff555555, 0xff444444, 0xff222222, 0xff111111\r\n\t\t];\r\n\r\n\t\tlet i = 8;\r\n\r\n\t\tlet chunk;\r\n\t\tconst chunks = [];\r\n\r\n\t\twhile ( i < data.byteLength ) {\r\n\r\n\t\t\tlet id = '';\r\n\r\n\t\t\tfor ( let j = 0; j < 4; j ++ ) {\r\n\r\n\t\t\t\tid += String.fromCharCode( data.getInt8( i ++, true ) );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tconst chunkSize = data.getInt32( i, true ); i += 4;\r\n\t\t\tdata.getInt32( i, true ); i += 4; // childChunks\r\n\r\n\t\t\tif ( id === 'SIZE' ) {\r\n\r\n\t\t\t\tconst x = data.getInt32( i, true ); i += 4;\r\n\t\t\t\tconst y = data.getInt32( i, true ); i += 4;\r\n\t\t\t\tconst z = data.getInt32( i, true ); i += 4;\r\n\r\n\t\t\t\tchunk = {\r\n\t\t\t\t\tpalette: DEFAULT_PALETTE,\r\n\t\t\t\t\tsize: { x: x, y: y, z: z },\r\n\t\t\t\t};\r\n\r\n\t\t\t\tchunks.push( chunk );\r\n\r\n\t\t\t\ti += chunkSize - ( 3 * 4 );\r\n\r\n\t\t\t} else if ( id === 'XYZI' ) {\r\n\r\n\t\t\t\tconst numVoxels = data.getInt32( i, true ); i += 4;\r\n\t\t\t\tchunk.data = new Int8Array( buffer, i, numVoxels * 4 );\r\n\r\n\t\t\t\ti += numVoxels * 4;\r\n\r\n\t\t\t} else if ( id === 'RGBA' ) {\r\n\r\n\t\t\t\tconst palette = [ 0 ];\r\n\r\n\t\t\t\tfor ( let j = 0; j < 256; j ++ ) {\r\n\r\n\t\t\t\t\tpalette[ j + 1 ] = data.getInt32( i, true ); i += 4;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tchunk.palette = palette;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t// console.log( id, chunkSize, childChunks );\r\n\r\n\t\t\t\ti += chunkSize;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn chunks;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nexport { VOXLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/loaders/VOXLoader.js","<template>\r\n    <div class=\"webglLoaderVox-container\">\r\n        <div id=\"info\">\r\n\t\t    <a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> - vox loader (<a href=\"https://ephtracy.github.io/\" target=\"_blank\" rel=\"noopener\">Magica Voxel</a>)\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { OrbitControls } from '@/components/jsm/controls/OrbitControls.js'\r\nimport { VOXLoader } from '@/components/jsm/loaders/VOXLoader.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            camera: null,\r\n            controls: null,\r\n            scene: null,\r\n            renderer: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init()\r\n\t\tthis.animate()\r\n    },\r\n    methods: {\r\n        init() {\r\n            this.camera = new this.$THREE.PerspectiveCamera(50, this.$webglInnerWidth / window.innerHeight, 0.01, 10)\r\n            this.camera.position.set(0.175, 0.075, 0.175)\r\n            this.scene = new this.$THREE.Scene()\r\n            this.scene.add(this.camera)\r\n            // light\r\n            var hemiLight = new this.$THREE.HemisphereLight(0x888888, 0x000000, 1)\r\n            this.scene.add(hemiLight)\r\n            var dirLight = new this.$THREE.DirectionalLight(0xffffff, 0.75)\r\n            dirLight.position.set(1.5, 3, 2.5)\r\n            this.scene.add(dirLight)\r\n            var loader = new VOXLoader()\r\n            loader.load('static/models/vox/monu10.vox', (chunks) => {\r\n                var geometry = new this.$THREE.BoxBufferGeometry(1, 1, 1)\r\n                var material = new this.$THREE.MeshStandardMaterial()\r\n                var color = new this.$THREE.Color()\r\n                var matrix = new this.$THREE.Matrix4()\r\n                for (var i = 0; i < chunks.length; i ++) {\r\n                    var chunk = chunks[ i ]\r\n                    var size = chunk.size\r\n                    var data = chunk.data\r\n                    var palette = chunk.palette\r\n                    // displayPalette(palette)\r\n                    var mesh = new this.$THREE.InstancedMesh(geometry, material, data.length / 4)\r\n                    mesh.scale.setScalar(0.0015)\r\n                    this.scene.add(mesh)\r\n                    for (var j = 0, k = 0; j < data.length; j += 4, k ++) {\r\n                        var x = data[ j + 0 ] - size.x / 2\r\n                        var y = data[ j + 1 ] - size.y / 2\r\n                        var z = data[ j + 2 ] - size.z / 2\r\n                        var c = data[ j + 3 ]\r\n                        var hex = palette[ c ]\r\n                        var r = (hex >> 0 & 0xff) / 0xff\r\n                        var g = (hex >> 8 & 0xff) / 0xff\r\n                        var b = (hex >> 16 & 0xff) / 0xff\r\n                        mesh.setColorAt(k, color.setRGB(r, g, b))\r\n                        mesh.setMatrixAt(k, matrix.setPosition(x, z, - y))\r\n                    }\r\n                }\r\n            })\r\n            // renderer\r\n            this.renderer = new this.$THREE.WebGLRenderer()\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            var container = document.createElement('div')\r\n            document.getElementsByClassName('webglLoaderVox-container')[0].appendChild(container)\r\n            container.appendChild(this.renderer.domElement)\r\n            // controls\r\n            this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n            this.controls.minDistance = .1\r\n            this.controls.maxDistance = 0.5\r\n            //\r\n            window.addEventListener('resize', this.onWindowResize, false)\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n        },\r\n        animate() {\r\n            requestAnimationFrame(this.animate)\r\n            this.controls.update()\r\n            this.renderer.render(this.scene, this.camera)\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.webglLoaderVox-container {\r\n    width: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/loader/webglLoaderVox.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"webglLoaderVox-container\"},[_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" - vox loader (\"),_c('a',{attrs:{\"href\":\"https://ephtracy.github.io/\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"Magica Voxel\")]),_vm._v(\")\\n\\t\\t\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-34c2d996\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/loader/webglLoaderVox.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-34c2d996\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webglLoaderVox.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglLoaderVox.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglLoaderVox.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-34c2d996\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webglLoaderVox.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-34c2d996\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/loader/webglLoaderVox.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}