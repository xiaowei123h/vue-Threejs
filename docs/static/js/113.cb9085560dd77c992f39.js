webpackJsonp([113],{NgcK:function(t,e){},wb8t:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("TWUs"),r=i("xTnh"),s={data:function(){return{container:null,stats:null,camera:null,controls:null,scene:null,renderer:null,mesh:null,texture:null,worldWidth:256,worldDepth:256,worldHalfWidth:null,worldHalfDepth:null,clock:null}},mounted:function(){this.worldHalfWidth=this.worldWidth/2,this.worldHalfDepth=this.worldDepth/2,this.clock=new this.$THREE.Clock,this.init(),this.animate()},methods:{init:function(){this.container=document.getElementById("container"),this.camera=new this.$THREE.PerspectiveCamera(60,this.$webglInnerWidth/window.innerHeight,1,2e4),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(12571109);var t=this.generateHeight(this.worldWidth,this.worldDepth);this.camera.position.y=10*t[this.worldHalfWidth+this.worldHalfDepth*this.worldWidth]+500;var e=new this.$THREE.PlaneBufferGeometry(7500,7500,this.worldWidth-1,this.worldDepth-1);e.rotateX(-Math.PI/2);for(var i=e.attributes.position.array,r=0,s=0,a=i.length;r<a;r++,s+=3)i[s+1]=10*t[r];this.texture=new this.$THREE.CanvasTexture(this.generateTexture(t,this.worldWidth,this.worldDepth)),this.texture.wrapS=this.$THREE.ClampToEdgeWrapping,this.texture.wrapT=this.$THREE.ClampToEdgeWrapping,this.mesh=new this.$THREE.Mesh(e,new this.$THREE.MeshBasicMaterial({map:this.texture})),this.scene.add(this.mesh),this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),this.controls=new n.a(this.camera,this.renderer.domElement),this.controls.movementSpeed=1e3,this.controls.lookSpeed=.1,this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.controls.handleResize()},generateHeight:function(t,e){for(var i=t*e,n=new Uint8Array(i),s=new r.a,a=100*Math.random(),h=1,o=0;o<4;o++){for(var l=0;l<i;l++){var d=l%t,c=~~(l/t);n[l]+=Math.abs(s.noise(d/h,c/h,a)*h*1.75)}h*=5}return n},generateTexture:function(t,e,i){var n,r,s,a,h=new this.$THREE.Vector3(0,0,0),o=new this.$THREE.Vector3(1,1,1);o.normalize();var l=document.createElement("canvas");l.width=e,l.height=i,(n=l.getContext("2d")).fillStyle="#000",n.fillRect(0,0,e,i);for(var d=0,c=0,w=(s=(r=n.getImageData(0,0,l.width,l.height)).data).length;d<w;d+=4,c++)h.x=t[c-2]-t[c+2],h.y=2,h.z=t[c-2*e]-t[c+2*e],h.normalize(),a=h.dot(o),s[d]=(96+128*a)*(.5+.007*t[c]),s[d+1]=(32+96*a)*(.5+.007*t[c]),s[d+2]=96*a*(.5+.007*t[c]);n.putImageData(r,0,0);var u=document.createElement("canvas");u.width=4*e,u.height=4*i,(n=u.getContext("2d")).scale(4,4),n.drawImage(l,0,0);for(d=0,w=(s=(r=n.getImageData(0,0,u.width,u.height)).data).length;d<w;d+=4){var m=~~(5*Math.random());s[d]+=m,s[d+1]+=m,s[d+2]+=m}return n.putImageData(r,0,0),u},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){this.controls.update(this.clock.getDelta()),this.renderer.render(this.scene,this.camera)}}},a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"webglGeometryTerrain-container"},[e("div",{attrs:{id:"container"}}),this._v(" "),e("div",{attrs:{id:"info"}},[e("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - webgl terrain demo"),e("br"),this._v("(left click: forward, right click: backward)")])])}]};var h=i("VU/8")(s,a,!1,function(t){i("NgcK")},"data-v-2a4107cd",null);e.default=h.exports}});
//# sourceMappingURL=113.cb9085560dd77c992f39.js.map