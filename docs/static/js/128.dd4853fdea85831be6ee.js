webpackJsonp([128],{"5wgQ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a=n("wIBv"),s=n("qxm1"),i=n("Glcs"),o=n("6+nK"),l=((r=new o._70({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new o._101(1,1)}},vertexShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t\t}\n\t\t",fragmentShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform sampler2D roughnessMap;\n\t\t\tuniform sampler2D normalMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\n\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tfloat roughnessToVariance( float roughness ) {\n\n\t\t\t\tfloat variance = 0.0;\n\n\t\t\t\tif ( roughness >= r1 ) {\n\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\n\n\t\t\t\t} else if ( roughness >= r4 ) {\n\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\n\n\t\t\t\t} else if ( roughness >= r5 ) {\n\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\n\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\n\n\t\t\t\t}\n\n\t\t\t\treturn variance;\n\n\t\t\t}\n\n\t\t\tfloat varianceToRoughness( float variance ) {\n\n\t\t\t\tfloat roughness = 0.0;\n\n\t\t\t\tif ( variance >= v1 ) {\n\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\n\n\t\t\t\t} else if ( variance >= v4 ) {\n\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\n\n\t\t\t\t} else if ( variance >= v5 ) {\n\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\n\n\t\t\t\t}\n\n\t\t\t\treturn roughness;\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\n\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\n\n\t\t\t\tfloat roughness = gl_FragColor.g;\n\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\n\n\t\t\t\tvec3 avgNormal;\n\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\n\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\n\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\n\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\n\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\n\n\t\t\t}\n\t\t",blending:o._40,depthTest:!1,depthWrite:!1})).type="RoughnessMipmapper",r),u=new o._28(new o._51(2,2),l),h=new o._46(0,1,0,1,0,1),v=null,d=null;function c(t){(d=t).compile(u,h)}c.prototype={constructor:c,generateMipmaps:function(t){if("roughnessMap"in t!=!1){var e=t.roughnessMap,n=t.normalMap;if(null!==e&&null!==n&&e.generateMipmaps&&!t.userData.roughnessUpdated){t.userData.roughnessUpdated=!0;var r=Math.max(e.image.width,n.image.width),a=Math.max(e.image.height,n.image.height);if(o._25.isPowerOfTwo(r)&&o._25.isPowerOfTwo(a)){var s=d.getRenderTarget(),i=d.autoClear;if(d.autoClear=!1,null!==v&&v.width===r&&v.height===a||(null!==v&&v.dispose(),(v=new o._105(r,a,{depthBuffer:!1})).scissorTest=!0),r!==e.image.width||a!==e.image.height){var c={wrapS:e.wrapS,wrapT:e.wrapT,magFilter:e.magFilter,minFilter:e.minFilter,depthBuffer:!1},g=new o._105(r,a,c);g.texture.generateMipmaps=!0,d.setRenderTarget(g),t.roughnessMap=g.texture,t.metalnessMap==e&&(t.metalnessMap=t.roughnessMap),t.aoMap==e&&(t.aoMap=t.roughnessMap)}l.uniforms.roughnessMap.value=e,l.uniforms.normalMap.value=n;for(var p=new o._101(0,0),m=l.uniforms.texelSize.value,f=0;r>=1&&a>=1;++f,r/=2,a/=2)m.set(1/r,1/a),0==f&&m.set(0,0),v.viewport.set(p.x,p.y,r,a),v.scissor.set(p.x,p.y,r,a),d.setRenderTarget(v),d.render(u,h),d.copyFramebufferToTexture(p,t.roughnessMap,f),l.uniforms.roughnessMap.value=t.roughnessMap;e!==t.roughnessMap&&e.dispose(),d.setRenderTarget(s),d.autoClear=i}}}},dispose:function(){l.dispose(),u.geometry.dispose(),null!=v&&v.dispose()}};var g={data:function(){return{camera:null,scene:null,renderer:null}},mounted:function(){this.init(),this.render()},methods:{init:function(){var t=this,e=document.createElement("div");document.getElementsByClassName("webglLoaderGltf-container")[0].appendChild(e),this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,.25,20),this.camera.position.set(-1.8,.6,2.7),this.scene=new this.$THREE.Scene,(new i.a).setDataType(this.$THREE.UnsignedByteType).setPath("static/textures/equirectangular/").load("royal_esplanade_1k.hdr",function(e){var r=n.fromEquirectangular(e).texture;t.scene.background=r,t.scene.environment=r,e.dispose(),n.dispose(),t.render();var a=new c(t.renderer);(new s.a).setPath("static/models/gltf/DamagedHelmet/glTF/").load("DamagedHelmet.gltf",function(e){e.scene.traverse(function(t){t.isMesh}),t.scene.add(e.scene),a.dispose(),t.render()})}),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.toneMapping=this.$THREE.ACESFilmicToneMapping,this.renderer.toneMappingExposure=1,this.renderer.outputEncoding=this.$THREE.sRGBEncoding,e.appendChild(this.renderer.domElement);var n=new this.$THREE.PMREMGenerator(this.renderer);n.compileEquirectangularShader();var r=new a.a(this.camera,this.renderer.domElement);r.addEventListener("change",this.render),r.minDistance=2,r.maxDistance=10,r.target.set(0,0,-.2),r.update(),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},p={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"webglLoaderGltf-container"},[n("div",{attrs:{id:"info"}},[n("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[t._v("three.js")]),t._v(" - GLTFLoader"),n("br"),t._v("\n\t\t\tBattle Damaged Sci-fi Helmet by\n\t\t\t"),n("a",{attrs:{href:"https://sketchfab.com/theblueturtle_",target:"_blank",rel:"noopener"}},[t._v("theblueturtle_")]),n("br"),t._v(" "),n("a",{attrs:{href:"https://hdrihaven.com/hdri/?h=royal_esplanade",target:"_blank",rel:"noopener"}},[t._v("Royal Esplanade")]),t._v(" by "),n("a",{attrs:{href:"https://hdrihaven.com/",target:"_blank",rel:"noopener"}},[t._v("HDRI Haven")])])])}]};var m=n("VU/8")(g,p,!1,function(t){n("aNOW")},"data-v-3bdeefa8",null);e.default=m.exports},aNOW:function(t,e){}});
//# sourceMappingURL=128.dd4853fdea85831be6ee.js.map