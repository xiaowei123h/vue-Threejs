webpackJsonp([13],{"6Rwp":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=n("VNKA"),a={data:function(){return{container:null,stats:null,camera:null,cameraTarget:null,scene:null,renderer:null}},mounted:function(){this.init(),this.animate()},methods:{init:function(){var e=this;this.container=document.createElement("div"),document.getElementsByClassName("webglLoaderPly-container")[0].appendChild(this.container),this.camera=new this.$THREE.PerspectiveCamera(35,this.$webglInnerWidth/window.innerHeight,1,15),this.camera.position.set(3,.15,3),this.cameraTarget=new this.$THREE.Vector3(0,-.1,0),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(7496795),this.scene.fog=new this.$THREE.Fog(7496795,2,15);var t=new this.$THREE.Mesh(new this.$THREE.PlaneBufferGeometry(40,40),new this.$THREE.MeshPhongMaterial({color:10066329,specular:1052688}));t.rotation.x=-Math.PI/2,t.position.y=-.5,this.scene.add(t),t.receiveShadow=!0;var n=new s.a;n.load("static/models/ply/ascii/dolphins.ply",function(t){t.computeVertexNormals();var n=new e.$THREE.MeshStandardMaterial({color:22015,flatShading:!0}),s=new e.$THREE.Mesh(t,n);s.position.y=-.2,s.position.z=.3,s.rotation.x=-Math.PI/2,s.scale.multiplyScalar(.001),s.castShadow=!0,s.receiveShadow=!0,e.scene.add(s)}),n.load("static/models/ply/binary/Lucy100k.ply",function(t){t.computeVertexNormals();var n=new e.$THREE.MeshStandardMaterial({color:22015,flatShading:!0}),s=new e.$THREE.Mesh(t,n);s.position.x=-.2,s.position.y=-.02,s.position.z=-.2,s.scale.multiplyScalar(6e-4),s.castShadow=!0,s.receiveShadow=!0,e.scene.add(s)}),this.scene.add(new this.$THREE.HemisphereLight(4469555,1118498)),this.addShadowedLight(1,1,1,16777215,1.35),this.addShadowedLight(.5,1,-1,16755200,1),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.renderer.shadowMap.enabled=!0,this.container.appendChild(this.renderer.domElement),this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1)},addShadowedLight:function(e,t,n,s,a){var r=new this.$THREE.DirectionalLight(s,a);r.position.set(e,t,n),this.scene.add(r),r.castShadow=!0;r.shadow.camera.left=-1,r.shadow.camera.right=1,r.shadow.camera.top=1,r.shadow.camera.bottom=-1,r.shadow.camera.near=1,r.shadow.camera.far=4,r.shadow.mapSize.width=1024,r.shadow.mapSize.height=1024,r.shadow.bias=-.001},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){var e=5e-4*Date.now();this.camera.position.x=2.5*Math.sin(e),this.camera.position.z=2.5*Math.cos(e),this.camera.lookAt(this.cameraTarget),this.renderer.render(this.scene,this.camera)}}},r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoaderPly-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" -\n\t\t\tPLY loader test by "),t("a",{attrs:{href:"https://github.com/menway",target:"_blank",rel:"noopener"}},[this._v("Wei Meng")]),this._v("."),t("br"),this._v("\n\t\t\tImage from "),t("a",{attrs:{href:"http://people.sc.fsu.edu/~jburkardt/data/ply/ply.html"}},[this._v("John Burkardt")])])])}]};var i=n("VU/8")(a,r,!1,function(e){n("EEHw")},"data-v-3f2cdaee",null);t.default=i.exports},EEHw:function(e,t){},VNKA:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var s=n("6+nK"),a=function(e){s._14.call(this,e),this.propertyNameMapping={}};a.prototype=Object.assign(Object.create(s._14.prototype),{constructor:a,load:function(e,t,n,a){var r=this,i=new s.L(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(n){try{t(r.parse(n))}catch(t){a?a(t):console.error(t),r.manager.itemError(e)}},n,a)},setPropertyNameMapping:function(e){this.propertyNameMapping=e},parse:function(e){function t(e){var t="",n=0,s=/ply([\s\S]*)end_header\r?\n/.exec(e);null!==s&&(t=s[1],n=new Blob([s[0]]).size);var a,r,i,o,c,h,l={comments:[],elements:[],headerLength:n,objInfo:""},u=t.split("\n");for(var p=0;p<u.length;p++){var m=u[p];if(""!==(m=m.trim()))switch(r=(i=m.split(/\s+/)).shift(),m=i.join(" "),r){case"format":l.format=i[0],l.version=i[1];break;case"comment":l.comments.push(m);break;case"element":void 0!==a&&l.elements.push(a),(a={}).name=i[0],a.count=parseInt(i[1]),a.properties=[];break;case"property":a.properties.push((o=i,c=d.propertyNameMapping,h=void 0,"list"===(h={type:o[0]}).type?(h.name=o[3],h.countType=o[1],h.itemType=o[2]):h.name=o[1],h.name in c&&(h.name=c[h.name]),h));break;case"obj_info":l.objInfo=m;break;default:console.log("unhandled",r,i)}}return void 0!==a&&l.elements.push(a),l}function n(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}}function a(e,t){for(var s=t.split(/\s+/),a={},r=0;r<e.length;r++)if("list"===e[r].type){for(var i=[],o=n(s.shift(),e[r].countType),c=0;c<o;c++)i.push(n(s.shift(),e[r].itemType));a[e[r].name]=i}else a[e[r].name]=n(s.shift(),e[r].type);return a}function r(e,t){var n,s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},r="";null!==(n=/end_header\s([\s\S]*)$/.exec(e))&&(r=n[1]);for(var c=r.split("\n"),h=0,l=0,d=0;d<c.length;d++){var u=c[d];if(""!==(u=u.trim())){l>=t.elements[h].count&&(h++,l=0);var p=a(t.elements[h].properties,u);o(s,t.elements[h].name,p),l++}}return i(s)}function i(e){var t=new s.k;return e.indices.length>0&&t.setIndex(e.indices),t.setAttribute("position",new s.M(e.vertices,3)),e.normals.length>0&&t.setAttribute("normal",new s.M(e.normals,3)),e.uvs.length>0&&t.setAttribute("uv",new s.M(e.uvs,2)),e.colors.length>0&&t.setAttribute("color",new s.M(e.colors,3)),e.faceVertexUvs.length>0&&(t=t.toNonIndexed()).setAttribute("uv",new s.M(e.faceVertexUvs,2)),t.computeBoundingSphere(),t}function o(e,t,n){if("vertex"===t)e.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&e.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n&&e.uvs.push(n.s,n.t),"red"in n&&"green"in n&&"blue"in n&&e.colors.push(n.red/255,n.green/255,n.blue/255);else if("face"===t){var s=n.vertex_indices||n.vertex_index,a=n.texcoord;3===s.length?(e.indices.push(s[0],s[1],s[2]),a&&6===a.length&&(e.faceVertexUvs.push(a[0],a[1]),e.faceVertexUvs.push(a[2],a[3]),e.faceVertexUvs.push(a[4],a[5]))):4===s.length&&(e.indices.push(s[0],s[1],s[3]),e.indices.push(s[1],s[2],s[3]))}}function c(e,t,n,s){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,s),2];case"uint16":case"ushort":return[e.getUint16(t,s),2];case"int32":case"int":return[e.getInt32(t,s),4];case"uint32":case"uint":return[e.getUint32(t,s),4];case"float32":case"float":return[e.getFloat32(t,s),4];case"float64":case"double":return[e.getFloat64(t,s),8]}}function h(e,t,n,s){for(var a,r={},i=0,o=0;o<n.length;o++)if("list"===n[o].type){var h=[],l=(a=c(e,t+i,n[o].countType,s))[0];i+=a[1];for(var d=0;d<l;d++)a=c(e,t+i,n[o].itemType,s),h.push(a[0]),i+=a[1];r[n[o].name]=h}else a=c(e,t+i,n[o].type,s),r[n[o].name]=a[0],i+=a[1];return[r,i]}var l,d=this;if(e instanceof ArrayBuffer){var u=s._15.decodeText(new Uint8Array(e)),p=t(u);l="ascii"===p.format?r(u,p):function(e,t){for(var n,s={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},a="binary_little_endian"===t.format,r=new DataView(e,t.headerLength),c=0,l=0;l<t.elements.length;l++)for(var d=0;d<t.elements[l].count;d++){c+=(n=h(r,c,t.elements[l].properties,a))[1];var u=n[0];o(s,t.elements[l].name,u)}return i(s)}(e,p)}else l=r(e,t(e));return l}})}});
//# sourceMappingURL=13.b94e164857ea0697fc6d.js.map