webpackJsonp([15],{"+27D":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o,a,s,r,l,d,h,c,m,w,u,f=n("qxm1"),E=n("6+nK"),v=(d=new E._19,h=new E._2,c=new E._19,m=new E.K,w=new E.K,u=new E.K,i=new E._19,o=new E._19,a=new E._19,s=new E._19,r=new E._18,l=new E._18,function(e){var t=new Map,n=new Map,i=e.clone();return function e(t,n,i){i(t,n);for(var o=0;o<t.children.length;o++)e(t.children[o],n.children[o],i)}(e,i,function(e,i){t.set(i,e),n.set(e,i)}),i.traverse(function(e){if(e.isSkinnedMesh){var i=e,o=t.get(e),a=o.skeleton.bones;i.skeleton=o.skeleton.clone(),i.bindMatrix.copy(o.bindMatrix),i.skeleton.bones=a.map(function(e){return n.get(e)}),i.bind(i.skeleton,i.bindMatrix)}}),i});var p={data:function(){return{worldScene:null,renderer:null,camera:null,clock:null,mixers:[],MODELS:[{name:"Soldier"},{name:"Parrot"}],UNITS:[{modelName:"Soldier",meshName:"vanguard_Mesh",position:{x:0,y:0,z:0},scale:1,animationName:"Idle"},{modelName:"Soldier",meshName:"vanguard_Mesh",position:{x:3,y:0,z:0},scale:2,animationName:"Walk"},{modelName:"Soldier",meshName:"vanguard_Mesh",position:{x:1,y:0,z:0},scale:1,animationName:"Run"},{modelName:"Parrot",meshName:"mesh_0",position:{x:-4,y:0,z:0},rotation:{x:0,y:Math.PI,z:0},scale:.01,animationName:"parrot_A_"},{modelName:"Parrot",meshName:"mesh_0",position:{x:-2,y:0,z:0},rotation:{x:0,y:Math.PI/2,z:0},scale:.02,animationName:null}],numLoadedModels:0}},mounted:function(){this.initScene(),this.initRenderer(),this.loadModels(),this.animate()},methods:{initScene:function(){this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,1,1e4),this.camera.position.set(3,6,-10),this.camera.lookAt(0,1,0),this.clock=new this.$THREE.Clock,this.worldScene=new this.$THREE.Scene,this.worldScene.background=new this.$THREE.Color(10526880),this.worldScene.fog=new this.$THREE.Fog(10526880,10,22);var e=new this.$THREE.HemisphereLight(16777215,4473924);e.position.set(0,20,0),this.worldScene.add(e);var t=new this.$THREE.DirectionalLight(16777215);t.position.set(-3,10,-10),t.castShadow=!0,t.shadow.camera.top=10,t.shadow.camera.bottom=-10,t.shadow.camera.left=-10,t.shadow.camera.right=10,t.shadow.camera.near=.1,t.shadow.camera.far=40,this.worldScene.add(t);var n=new this.$THREE.Mesh(new this.$THREE.PlaneBufferGeometry(40,40),new this.$THREE.MeshPhongMaterial({color:10066329,depthWrite:!1}));n.rotation.x=-Math.PI/2,n.receiveShadow=!0,this.worldScene.add(n),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},initRenderer:function(){var e=document.getElementById("container");this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=this.$THREE.PCFSoftShadowMap,e.appendChild(this.renderer.domElement)},loadModels:function(){for(var e=this,t=0;t<this.MODELS.length;++t){var n=this.MODELS[t];this.loadGltfModel(n,function(){++e.numLoadedModels,e.numLoadedModels===e.MODELS.length&&(console.log("All models loaded, time to instantiate units..."),e.instantiateUnits())})}},loadGltfModel:function(e,t){var n=new f.a,i="static/models/gltf/"+e.name+".glb";n.load(i,function(n){var i=n.scene;e.animations=n.animations,e.scene=i,n.scene.traverse(function(e){e.isMesh&&(e.castShadow=!0)}),console.log("Done loading model",e.name),t()})},animate:function(){requestAnimationFrame(this.animate);for(var e=this.clock.getDelta(),t=0;t<this.mixers.length;++t)this.mixers[t].update(e);this.renderer.render(this.worldScene,this.camera)},instantiateUnits:function(){for(var e=0,t=0;t<this.UNITS.length;++t){var n=this.UNITS[t],i=this.getModelByName(n.modelName);if(i){var o=v(i.scene);if(o){var a=o.getObjectByName(n.meshName);if(a){var s=this.startAnimation(a,i.animations,n.animationName);this.mixers.push(s),e++}this.worldScene.add(o),n.position&&o.position.set(n.position.x,n.position.y,n.position.z),n.scale&&o.scale.set(n.scale,n.scale,n.scale),n.rotation&&(o.rotation.x=n.rotation.x,o.rotation.y=n.rotation.y,o.rotation.z=n.rotation.z)}}else console.error("Can not find model",n.modelName)}console.log("Successfully instantiated "+e+" units")},getModelByName:function(e){for(var t=0;t<this.MODELS.length;++t)if(this.MODELS[t].name===e)return this.MODELS[t];return null},startAnimation:function(e,t,n){var i=new this.$THREE.AnimationMixer(e),o=this.$THREE.AnimationClip.findByName(t,n);o&&i.clipAction(o).play();return i}}},g={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglAnimationMultiple-container"},[t("div",{attrs:{id:"container"}}),this._v(" "),t("div",{attrs:{id:"info"}},[this._v("\n\t\t\tThis demo shows how clone a skinned 3d model using "),t("strong",[this._v("SkeletonUtils.clone()")]),t("br"),this._v("\n\t\t\tSoldier model from "),t("a",{attrs:{href:"https://www.mixamo.com",target:"_blank",rel:"noopener"}},[this._v("https://www.mixamo.com")]),this._v(".\n\t\t")])])}]};var M=n("VU/8")(p,g,!1,function(e){n("kkHN")},"data-v-4cb438f2",null);t.default=M.exports},kkHN:function(e,t){}});
//# sourceMappingURL=15.4e2e53d0b2d4cb0e6aad.js.map