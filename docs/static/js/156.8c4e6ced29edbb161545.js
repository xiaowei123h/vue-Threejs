webpackJsonp([156],{"2c/w":function(t,e){},lBk7:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("QEtz"),n=i("qxm1"),o={data:function(){return{scene:null,renderer:null,camera:null,stats:null,mixer:null,clock:null,model:null,skeleton:null,crossFadeControls:[],idleAction:null,walkAction:null,runAction:null,idleWeight:null,walkWeight:null,runWeight:null,actions:null,settings:null,singleStepMode:!1,sizeOfNextStep:0,gui:null}},mounted:function(){this.init()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var t=this,e=document.getElementById("container");this.camera=new this.$moduleTHREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.set(1,2,-3),this.camera.lookAt(0,1,0),this.clock=new this.$moduleTHREE.Clock,this.scene=new this.$moduleTHREE.Scene,this.scene.background=new this.$moduleTHREE.Color(10526880),this.scene.fog=new this.$moduleTHREE.Fog(10526880,10,50);var i=new this.$moduleTHREE.HemisphereLight(16777215,4473924);i.position.set(0,20,0),this.scene.add(i);var s=new this.$moduleTHREE.DirectionalLight(16777215);s.position.set(-3,10,-10),s.castShadow=!0,s.shadow.camera.top=2,s.shadow.camera.bottom=-2,s.shadow.camera.left=-2,s.shadow.camera.right=2,s.shadow.camera.near=.1,s.shadow.camera.far=40,this.scene.add(s),this.scene.add(new this.$moduleTHREE.CameraHelper(s.shadow.camera));var o=new this.$moduleTHREE.Mesh(new this.$moduleTHREE.PlaneBufferGeometry(100,100),new this.$moduleTHREE.MeshPhongMaterial({color:10066329,depthWrite:!1}));o.rotation.x=-Math.PI/2,o.receiveShadow=!0,(new n.a).load("static/models/gltf/Soldier.glb",function(e){console.log("gltf"),console.log(e.scene),t.model=e.scene,t.scene.add(e.scene),t.model.traverse(function(t){t.isMesh&&(t.castShadow=!0)}),t.skeleton=new t.$moduleTHREE.SkeletonHelper(t.model),t.skeleton.visible=!1,t.scene.add(t.skeleton),t.createPanel(),console.log(e.animations);var i=e.animations;console.log("this.model"),console.log(t.model),t.mixer=new t.$moduleTHREE.AnimationMixer(t.model),t.idleAction=t.mixer.clipAction(i[0]),t.walkAction=t.mixer.clipAction(i[3]),t.runAction=t.mixer.clipAction(i[1]),t.actions=[t.idleAction,t.walkAction,t.runAction],t.activateAllActions(),t.animate()}),this.renderer=new this.$moduleTHREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.outputEncoding=this.$moduleTHREE.sRGBEncoding,this.renderer.shadowMap.enabled=!0,e.appendChild(this.renderer.domElement),this.stats=new this.$Stats,this.stats.dom.style.left="280px",e.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},createPanel:function(){var t=this;this.gui=new s.a({width:310});var e=this.gui.addFolder("Visibility"),i=this.gui.addFolder("Activation/Deactivation"),n=this.gui.addFolder("Pausing/Stepping"),o=this.gui.addFolder("Crossfading"),a=this.gui.addFolder("Blend Weights"),l=this.gui.addFolder("General Speed");this.settings={"show model":!0,"show skeleton":!1,"deactivate all":this.deactivateAllActions,"activate all":this.activateAllActions,"pause/continue":this.pauseContinue,"make single step":this.toSingleStepMode,"modify step size":.05,"from walk to idle":function(){t.prepareCrossFade(t.walkAction,t.idleAction,1)},"from idle to walk":function(){t.prepareCrossFade(t.idleAction,t.walkAction,.5)},"from walk to run":function(){t.prepareCrossFade(t.walkAction,t.runAction,2.5)},"from run to walk":function(){t.prepareCrossFade(t.runAction,t.walkAction,5)},"use default duration":!0,"set custom duration":3.5,"modify idle weight":0,"modify walk weight":1,"modify run weight":0,"modify time scale":1},e.add(this.settings,"show model").onChange(this.showModel),e.add(this.settings,"show skeleton").onChange(this.showSkeleton),i.add(this.settings,"deactivate all"),i.add(this.settings,"activate all"),n.add(this.settings,"pause/continue"),n.add(this.settings,"make single step"),n.add(this.settings,"modify step size",.01,.1,.001),this.crossFadeControls.push(o.add(this.settings,"from walk to idle")),this.crossFadeControls.push(o.add(this.settings,"from idle to walk")),this.crossFadeControls.push(o.add(this.settings,"from walk to run")),this.crossFadeControls.push(o.add(this.settings,"from run to walk")),o.add(this.settings,"use default duration"),o.add(this.settings,"set custom duration",0,10,.01),a.add(this.settings,"modify idle weight",0,1,.01).listen().onChange(function(e){t.setWeight(t.idleAction,e)}),a.add(this.settings,"modify walk weight",0,1,.01).listen().onChange(function(e){t.setWeight(t.walkAction,e)}),a.add(this.settings,"modify run weight",0,1,.01).listen().onChange(function(e){t.setWeight(t.runAction,e)}),l.add(this.settings,"modify time scale",0,1.5,.01).onChange(this.modifyTimeScale),e.open(),i.open(),n.open(),o.open(),a.open(),l.open(),this.crossFadeControls.forEach(function(t){t.classList1=t.domElement.parentElement.parentElement.classList,t.classList2=t.domElement.previousElementSibling.classList,t.setDisabled=function(){t.classList1.add("no-pointer-events"),t.classList2.add("control-disabled")},t.setEnabled=function(){t.classList1.remove("no-pointer-events"),t.classList2.remove("control-disabled")}})},deactivateAllActions:function(){this.actions.forEach(function(t){t.stop()})},activateAllActions:function(){this.setWeight(this.idleAction,this.settings["modify idle weight"]),this.setWeight(this.walkAction,this.settings["modify walk weight"]),this.setWeight(this.runAction,this.settings["modify run weight"]),this.actions.forEach(function(t){t.play()})},setWeight:function(t,e){t.enabled=!0,t.setEffectiveTimeScale(1),t.setEffectiveWeight(e)},pauseContinue:function(){this.singleStepMode?(this.singleStepMode=!1,this.unPauseAllActions()):this.idleAction.paused?this.unPauseAllActions():this.pauseAllActions()},unPauseAllActions:function(){this.actions.forEach(function(t){t.paused=!1})},pauseAllActions:function(){this.actions.forEach(function(t){t.paused=!0})},toSingleStepMode:function(){this.unPauseAllActions(),this.singleStepMode=!0,this.sizeOfNextStep=this.settings["modify step size"]},prepareCrossFade:function(t,e,i){var s=this.setCrossFadeDuration(i);this.singleStepMode=!1,this.unPauseAllActions(),t===this.idleAction?this.executeCrossFade(t,e,s):this.synchronizeCrossFade(t,e,s)},setCrossFadeDuration:function(t){return this.settings["use default duration"]?t:this.settings["set custom duration"]},executeCrossFade:function(t,e,i){this.setWeight(e,1),e.time=0,t.crossFadeTo(e,i,!0)},synchronizeCrossFade:function(t,e,i){this.mixer.addEventListener("loop",function n(o){o.action===t&&(s.mixer.removeEventListener("loop",n),s.executeCrossFade(t,e,i))});var s=this},showModel:function(t){this.model.visible=t},showSkeleton:function(t){this.skeleton.visible=t},modifyTimeScale:function(t){this.mixer.timeScale=t},updateWeightSliders:function(){this.settings["modify idle weight"]=this.idleWeight,this.settings["modify walk weight"]=this.walkWeight,this.settings["modify run weight"]=this.runWeight},updateCrossFadeControls:function(){this.crossFadeControls.forEach(function(t){t.setDisabled()}),1===this.idleWeight&&0===this.walkWeight&&0===this.runWeight&&this.crossFadeControls[1].setEnabled(),0===this.idleWeight&&1===this.walkWeight&&0===this.runWeight&&(this.crossFadeControls[0].setEnabled(),this.crossFadeControls[2].setEnabled()),0===this.idleWeight&&0===this.walkWeight&&1===this.runWeight&&this.crossFadeControls[3].setEnabled()},animate:function(){requestAnimationFrame(this.animate),this.idleWeight=this.idleAction.getEffectiveWeight(),this.walkWeight=this.walkAction.getEffectiveWeight(),this.runWeight=this.runAction.getEffectiveWeight(),this.updateWeightSliders(),this.updateCrossFadeControls();var t=this.clock.getDelta();this.singleStepMode&&(this.mixerUpdateDelta=this.sizeOfNextStep,this.sizeOfNextStep=0),this.mixer.update(t),this.stats.update(),this.renderer.render(this.scene,this.camera)}}},a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"webglAnimationSkinningBlending-container"},[e("div",{attrs:{id:"container"}}),this._v(" "),e("div",{attrs:{id:"info"}},[e("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - Skeletal Animation Blending\n\t\t\t(model from "),e("a",{attrs:{href:"https://www.mixamo.com/",target:"_blank",rel:"noopener"}},[this._v("mixamo.com")]),this._v(")"),e("br"),this._v("\n\t\t\tNote: crossfades are possible with blend weights being set to (1,0,0), (0,1,0) or (0,0,1)\n\t\t")])])}]};var l=i("VU/8")(o,a,!1,function(t){i("2c/w")},"data-v-730823ba",null);e.default=l.exports}});
//# sourceMappingURL=156.8c4e6ced29edbb161545.js.map