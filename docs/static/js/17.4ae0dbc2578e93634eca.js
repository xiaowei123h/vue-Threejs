webpackJsonp([17],{"0Xwy":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("6+nK"),o=function(){var t=new i.Frustum,e=new i.Vector3,n=new i.Vector3,o=new i.Vector3,s=new i.Vector3,r=new i.Vector3,a=new i.Vector3,h=new i.Vector3,c=new i.Vector3,l=new i.Vector3,d=new i.Vector3,m=new i.Vector3,p=new i.Vector3,u=new i.Vector3,w=new i.Vector3;function y(t,e,n){this.camera=t,this.scene=e,this.startPoint=new i.Vector3,this.endPoint=new i.Vector3,this.collection=[],this.deep=n||Number.MAX_VALUE}return y.prototype.select=function(e,n){return this.startPoint=e||this.startPoint,this.endPoint=n||this.endPoint,this.collection=[],this.updateFrustum(this.startPoint,this.endPoint),this.searchChildInFrustum(t,this.scene),this.collection},y.prototype.updateFrustum=function(e,i){if(e=e||this.startPoint,i=i||this.endPoint,e.x===i.x&&(i.x+=Number.EPSILON),e.y===i.y&&(i.y+=Number.EPSILON),this.camera.updateProjectionMatrix(),this.camera.updateMatrixWorld(),this.camera.isPerspectiveCamera)n.copy(e),n.x=Math.min(e.x,i.x),n.y=Math.max(e.y,i.y),i.x=Math.max(e.x,i.x),i.y=Math.min(e.y,i.y),o.setFromMatrixPosition(this.camera.matrixWorld),s.copy(n),r.set(i.x,n.y,0),a.copy(i),h.set(n.x,i.y,0),s.unproject(this.camera),r.unproject(this.camera),a.unproject(this.camera),h.unproject(this.camera),p.copy(s).sub(o),u.copy(r).sub(o),w.copy(a).sub(o),p.normalize(),u.normalize(),w.normalize(),p.multiplyScalar(this.deep),u.multiplyScalar(this.deep),w.multiplyScalar(this.deep),p.add(o),u.add(o),w.add(o),(y=t.planes)[0].setFromCoplanarPoints(o,s,r),y[1].setFromCoplanarPoints(o,r,a),y[2].setFromCoplanarPoints(a,h,o),y[3].setFromCoplanarPoints(h,s,o),y[4].setFromCoplanarPoints(r,a,h),y[5].setFromCoplanarPoints(w,u,p),y[5].normal.multiplyScalar(-1);else if(this.camera.isOrthographicCamera){var y,x=Math.min(e.x,i.x),f=Math.max(e.y,i.y),v=Math.max(e.x,i.x),P=Math.min(e.y,i.y);s.set(x,f,-1),r.set(v,f,-1),a.set(v,P,-1),h.set(x,P,-1),c.set(x,f,1),l.set(v,f,1),d.set(v,P,1),m.set(x,P,1),s.unproject(this.camera),r.unproject(this.camera),a.unproject(this.camera),h.unproject(this.camera),c.unproject(this.camera),l.unproject(this.camera),d.unproject(this.camera),m.unproject(this.camera),(y=t.planes)[0].setFromCoplanarPoints(s,c,l),y[1].setFromCoplanarPoints(r,l,d),y[2].setFromCoplanarPoints(d,m,h),y[3].setFromCoplanarPoints(m,c,s),y[4].setFromCoplanarPoints(r,a,h),y[5].setFromCoplanarPoints(d,l,c),y[5].normal.multiplyScalar(-1)}else console.error("THREE.SelectionBox: Unsupported camera type.")},y.prototype.searchChildInFrustum=function(t,n){if((n.isMesh||n.isLine||n.isPoints)&&void 0!==n.material&&(null===n.geometry.boundingSphere&&n.geometry.computeBoundingSphere(),e.copy(n.geometry.boundingSphere.center),e.applyMatrix4(n.matrixWorld),t.containsPoint(e)&&this.collection.push(n)),n.children.length>0)for(var i=0;i<n.children.length;i++)this.searchChildInFrustum(t,n.children[i])},y}(),s=function(){function t(t,e,n){this.element=document.createElement("div"),this.element.classList.add(n),this.element.style.pointerEvents="none",this.renderer=e,this.startPoint=new i.Vector2,this.pointTopLeft=new i.Vector2,this.pointBottomRight=new i.Vector2,this.isDown=!1,this.renderer.domElement.addEventListener("pointerdown",function(t){this.isDown=!0,this.onSelectStart(t)}.bind(this),!1),this.renderer.domElement.addEventListener("pointermove",function(t){this.isDown&&this.onSelectMove(t)}.bind(this),!1),this.renderer.domElement.addEventListener("pointerup",function(t){this.isDown=!1,this.onSelectOver(t)}.bind(this),!1)}return t.prototype.onSelectStart=function(t){this.renderer.domElement.parentElement.appendChild(this.element),this.element.style.left=t.clientX+"px",this.element.style.top=t.clientY+"px",this.element.style.width="0px",this.element.style.height="0px",this.startPoint.x=t.clientX,this.startPoint.y=t.clientY},t.prototype.onSelectMove=function(t){this.pointBottomRight.x=Math.max(this.startPoint.x,t.clientX),this.pointBottomRight.y=Math.max(this.startPoint.y,t.clientY),this.pointTopLeft.x=Math.min(this.startPoint.x,t.clientX),this.pointTopLeft.y=Math.min(this.startPoint.y,t.clientY),this.element.style.left=this.pointTopLeft.x+"px",this.element.style.top=this.pointTopLeft.y+"px",this.element.style.width=this.pointBottomRight.x-this.pointTopLeft.x+"px",this.element.style.height=this.pointBottomRight.y-this.pointTopLeft.y+"px"},t.prototype.onSelectOver=function(){this.element.parentElement.removeChild(this.element)},t}(),r={data:function(){return{container:null,stats:null,camera:null,scene:null,renderer:null,selectionBox:null,helper:null}},mounted:function(){var t=this;this.init(),this.animate(),this.selectionBox=new o(this.camera,this.scene),this.helper=new s(this.selectionBox,this.renderer,"selectBox"),console.log(this.helper),document.addEventListener("pointerdown",function(e){var n=!0,i=!1,o=void 0;try{for(var s,r=t.selectionBox.collection[Symbol.iterator]();!(n=(s=r.next()).done);n=!0){s.value.material.emissive.set(0)}}catch(t){i=!0,o=t}finally{try{!n&&r.return&&r.return()}finally{if(i)throw o}}t.selectionBox.startPoint.set((e.clientX-281)/(window.innerWidth-281)*2-1,-e.clientY/window.innerHeight*2+1,.5)}),document.addEventListener("pointermove",function(e){if(t.helper.isDown){for(var n=0;n<t.selectionBox.collection.length;n++)t.selectionBox.collection[n].material.emissive.set(0);t.selectionBox.endPoint.set((e.clientX-281)/(window.innerWidth-281)*2-1,-e.clientY/window.innerHeight*2+1,.5);var i=t.selectionBox.select();for(n=0;n<i.length;n++)i[n].material.emissive.set(16777215)}}),document.addEventListener("pointerup",function(e){t.selectionBox.endPoint.set((e.clientX-281)/(window.innerWidth-281)*2-1,-e.clientY/window.innerHeight*2+1,.5);for(var n=t.selectionBox.select(),i=0;i<n.length;i++)n[i].material.emissive.set(16777215)})},methods:{init:function(){this.container=document.createElement("div"),document.getElementsByClassName("miscBoxselection-container")[0].appendChild(this.container),this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,1,5e3),this.camera.position.z=1e3,this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(15790320),this.scene.add(new this.$THREE.AmbientLight(5263440));var t=new this.$THREE.SpotLight(16777215,1.5);t.position.set(0,500,2e3),t.angle=Math.PI/9,t.castShadow=!0,t.shadow.camera.near=1e3,t.shadow.camera.far=4e3,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,this.scene.add(t);for(var e=new this.$THREE.BoxBufferGeometry(20,20,20),n=0;n<200;n++){var i=new this.$THREE.Mesh(e,new this.$THREE.MeshLambertMaterial({color:16777215*Math.random()}));i.position.x=1600*Math.random()-800,i.position.y=900*Math.random()-450,i.position.z=900*Math.random()-500,i.rotation.x=2*Math.random()*Math.PI,i.rotation.y=2*Math.random()*Math.PI,i.rotation.z=2*Math.random()*Math.PI,i.scale.x=2*Math.random()+1,i.scale.y=2*Math.random()+1,i.scale.z=2*Math.random()+1,i.castShadow=!0,i.receiveShadow=!0,this.scene.add(i)}this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=this.$THREE.PCFShadowMap,this.container.appendChild(this.renderer.domElement),this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){this.renderer.render(this.scene,this.camera)}}},a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"miscBoxselection-container"},[e("div",{attrs:{id:"info"}},[e("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" webgl - box selection\n\t\t")])])}]};var h=n("VU/8")(r,a,!1,function(t){n("OQMv"),n("jlaX")},"data-v-6283c72e",null);e.default=h.exports},OQMv:function(t,e){},jlaX:function(t,e){}});
//# sourceMappingURL=17.4ae0dbc2578e93634eca.js.map