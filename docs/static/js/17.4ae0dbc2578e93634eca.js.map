{"version":3,"sources":["webpack:///./src/components/jsm/interactive/SelectionBox.js","webpack:///./src/components/jsm/interactive/SelectionHelper.js","webpack:///src/views/misc/miscBoxselection.vue","webpack:///./src/views/misc/miscBoxselection.vue?53c8","webpack:///./src/views/misc/miscBoxselection.vue"],"names":["SelectionBox","frustum","Frustum","center","Vector3","tmpPoint","vecNear","vecTopLeft","vecTopRight","vecDownRight","vecDownLeft","vecFarTopLeft","vecFarTopRight","vecFarDownRight","vecFarDownLeft","vectemp1","vectemp2","vectemp3","camera","scene","deep","this","startPoint","endPoint","collection","Number","MAX_VALUE","prototype","select","updateFrustum","searchChildInFrustum","x","EPSILON","y","updateProjectionMatrix","updateMatrixWorld","isPerspectiveCamera","copy","Math","min","max","setFromMatrixPosition","matrixWorld","set","unproject","sub","normalize","multiplyScalar","add","planes","setFromCoplanarPoints","normal","isOrthographicCamera","left","top","right","down","console","error","object","isMesh","isLine","isPoints","undefined","material","geometry","boundingSphere","computeBoundingSphere","applyMatrix4","containsPoint","push","children","length","SelectionHelper","selectionBox","renderer","cssClassName","element","document","createElement","classList","style","pointerEvents","Vector2","pointTopLeft","pointBottomRight","isDown","domElement","addEventListener","event","onSelectStart","bind","onSelectMove","onSelectOver","parentElement","appendChild","clientX","clientY","width","height","removeChild","miscBoxselection","data","container","stats","helper","mounted","_this","init","animate","SelectionBox_SelectionBox","SelectionHelper_SelectionHelper","log","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","next","done","value","emissive","err","return","window","innerWidth","innerHeight","i","allSelected","methods","getElementsByClassName","$THREE","PerspectiveCamera","$webglInnerWidth","position","z","Scene","background","Color","AmbientLight","light","SpotLight","angle","PI","castShadow","shadow","near","far","mapSize","BoxBufferGeometry","Mesh","MeshLambertMaterial","color","random","rotation","scale","receiveShadow","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","shadowMap","enabled","type","PCFShadowMap","$Stats","dom","onWindowResize","$onWindowResize","requestAnimationFrame","render","update","misc_miscBoxselection","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","id","href","target","rel","_v","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/17.4ae0dbc2578e93634eca.js","sourcesContent":["import {\r\n\tFrustum,\r\n\tVector3\r\n} from \"@/components/build/three.module.js\";\r\n\r\n/**\r\n * This is a class to check whether objects are in a selection area in 3D space\r\n */\r\n\r\nvar SelectionBox = ( function () {\r\n\r\n\tvar frustum = new Frustum();\r\n\tvar center = new Vector3();\r\n\r\n\tvar tmpPoint = new Vector3();\r\n\r\n\tvar vecNear = new Vector3();\r\n\tvar vecTopLeft = new Vector3();\r\n\tvar vecTopRight = new Vector3();\r\n\tvar vecDownRight = new Vector3();\r\n\tvar vecDownLeft = new Vector3();\r\n\r\n\tvar vecFarTopLeft = new Vector3();\r\n\tvar vecFarTopRight = new Vector3();\r\n\tvar vecFarDownRight = new Vector3();\r\n\tvar vecFarDownLeft = new Vector3();\r\n\r\n\tvar vectemp1 = new Vector3();\r\n\tvar vectemp2 = new Vector3();\r\n\tvar vectemp3 = new Vector3();\r\n\r\n\tfunction SelectionBox( camera, scene, deep ) {\r\n\r\n\t\tthis.camera = camera;\r\n\t\tthis.scene = scene;\r\n\t\tthis.startPoint = new Vector3();\r\n\t\tthis.endPoint = new Vector3();\r\n\t\tthis.collection = [];\r\n\t\tthis.deep = deep || Number.MAX_VALUE;\r\n\r\n\t}\r\n\r\n\tSelectionBox.prototype.select = function ( startPoint, endPoint ) {\r\n\r\n\t\tthis.startPoint = startPoint || this.startPoint;\r\n\t\tthis.endPoint = endPoint || this.endPoint;\r\n\t\tthis.collection = [];\r\n\r\n\t\tthis.updateFrustum( this.startPoint, this.endPoint );\r\n\t\tthis.searchChildInFrustum( frustum, this.scene );\r\n\r\n\t\treturn this.collection;\r\n\r\n\t};\r\n\r\n\tSelectionBox.prototype.updateFrustum = function ( startPoint, endPoint ) {\r\n\r\n\t\tstartPoint = startPoint || this.startPoint;\r\n\t\tendPoint = endPoint || this.endPoint;\r\n\r\n\t\t// Avoid invalid frustum\r\n\r\n\t\tif ( startPoint.x === endPoint.x ) {\r\n\r\n\t\t\tendPoint.x += Number.EPSILON;\r\n\r\n\t\t}\r\n\r\n\t\tif ( startPoint.y === endPoint.y ) {\r\n\r\n\t\t\tendPoint.y += Number.EPSILON;\r\n\r\n\t\t}\r\n\r\n\t\tthis.camera.updateProjectionMatrix();\r\n\t\tthis.camera.updateMatrixWorld();\r\n\r\n\t\tif ( this.camera.isPerspectiveCamera ) {\r\n\r\n\t\t\ttmpPoint.copy( startPoint );\r\n\t\t\ttmpPoint.x = Math.min( startPoint.x, endPoint.x );\r\n\t\t\ttmpPoint.y = Math.max( startPoint.y, endPoint.y );\r\n\t\t\tendPoint.x = Math.max( startPoint.x, endPoint.x );\r\n\t\t\tendPoint.y = Math.min( startPoint.y, endPoint.y );\r\n\r\n\t\t\tvecNear.setFromMatrixPosition( this.camera.matrixWorld );\r\n\t\t\tvecTopLeft.copy( tmpPoint );\r\n\t\t\tvecTopRight.set( endPoint.x, tmpPoint.y, 0 );\r\n\t\t\tvecDownRight.copy( endPoint );\r\n\t\t\tvecDownLeft.set( tmpPoint.x, endPoint.y, 0 );\r\n\r\n\t\t\tvecTopLeft.unproject( this.camera );\r\n\t\t\tvecTopRight.unproject( this.camera );\r\n\t\t\tvecDownRight.unproject( this.camera );\r\n\t\t\tvecDownLeft.unproject( this.camera );\r\n\r\n\t\t\tvectemp1.copy( vecTopLeft ).sub( vecNear );\r\n\t\t\tvectemp2.copy( vecTopRight ).sub( vecNear );\r\n\t\t\tvectemp3.copy( vecDownRight ).sub( vecNear );\r\n\t\t\tvectemp1.normalize();\r\n\t\t\tvectemp2.normalize();\r\n\t\t\tvectemp3.normalize();\r\n\r\n\t\t\tvectemp1.multiplyScalar( this.deep );\r\n\t\t\tvectemp2.multiplyScalar( this.deep );\r\n\t\t\tvectemp3.multiplyScalar( this.deep );\r\n\t\t\tvectemp1.add( vecNear );\r\n\t\t\tvectemp2.add( vecNear );\r\n\t\t\tvectemp3.add( vecNear );\r\n\r\n\t\t\tvar planes = frustum.planes;\r\n\r\n\t\t\tplanes[ 0 ].setFromCoplanarPoints( vecNear, vecTopLeft, vecTopRight );\r\n\t\t\tplanes[ 1 ].setFromCoplanarPoints( vecNear, vecTopRight, vecDownRight );\r\n\t\t\tplanes[ 2 ].setFromCoplanarPoints( vecDownRight, vecDownLeft, vecNear );\r\n\t\t\tplanes[ 3 ].setFromCoplanarPoints( vecDownLeft, vecTopLeft, vecNear );\r\n\t\t\tplanes[ 4 ].setFromCoplanarPoints( vecTopRight, vecDownRight, vecDownLeft );\r\n\t\t\tplanes[ 5 ].setFromCoplanarPoints( vectemp3, vectemp2, vectemp1 );\r\n\t\t\tplanes[ 5 ].normal.multiplyScalar( - 1 );\r\n\r\n\t\t} else if ( this.camera.isOrthographicCamera ) {\r\n\r\n\t\t\tvar left = Math.min( startPoint.x, endPoint.x );\r\n\t\t\tvar top = Math.max( startPoint.y, endPoint.y );\r\n\t\t\tvar right = Math.max( startPoint.x, endPoint.x );\r\n\t\t\tvar down = Math.min( startPoint.y, endPoint.y );\r\n\r\n\t\t\tvecTopLeft.set( left, top, - 1 );\r\n\t\t\tvecTopRight.set( right, top, - 1 );\r\n\t\t\tvecDownRight.set( right, down, - 1 );\r\n\t\t\tvecDownLeft.set( left, down, - 1 );\r\n\r\n\t\t\tvecFarTopLeft.set( left, top, 1 );\r\n\t\t\tvecFarTopRight.set( right, top, 1 );\r\n\t\t\tvecFarDownRight.set( right, down, 1 );\r\n\t\t\tvecFarDownLeft.set( left, down, 1 );\r\n\r\n\t\t\tvecTopLeft.unproject( this.camera );\r\n\t\t\tvecTopRight.unproject( this.camera );\r\n\t\t\tvecDownRight.unproject( this.camera );\r\n\t\t\tvecDownLeft.unproject( this.camera );\r\n\r\n\t\t\tvecFarTopLeft.unproject( this.camera );\r\n\t\t\tvecFarTopRight.unproject( this.camera );\r\n\t\t\tvecFarDownRight.unproject( this.camera );\r\n\t\t\tvecFarDownLeft.unproject( this.camera );\r\n\r\n\t\t\tvar planes = frustum.planes;\r\n\r\n\t\t\tplanes[ 0 ].setFromCoplanarPoints( vecTopLeft, vecFarTopLeft, vecFarTopRight );\r\n\t\t\tplanes[ 1 ].setFromCoplanarPoints( vecTopRight, vecFarTopRight, vecFarDownRight );\r\n\t\t\tplanes[ 2 ].setFromCoplanarPoints( vecFarDownRight, vecFarDownLeft, vecDownLeft );\r\n\t\t\tplanes[ 3 ].setFromCoplanarPoints( vecFarDownLeft, vecFarTopLeft, vecTopLeft );\r\n\t\t\tplanes[ 4 ].setFromCoplanarPoints( vecTopRight, vecDownRight, vecDownLeft );\r\n\t\t\tplanes[ 5 ].setFromCoplanarPoints( vecFarDownRight, vecFarTopRight, vecFarTopLeft );\r\n\t\t\tplanes[ 5 ].normal.multiplyScalar( - 1 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tconsole.error( 'THREE.SelectionBox: Unsupported camera type.' );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\tSelectionBox.prototype.searchChildInFrustum = function ( frustum, object ) {\r\n\r\n\t\tif ( object.isMesh || object.isLine || object.isPoints ) {\r\n\r\n\t\t\tif ( object.material !== undefined ) {\r\n\r\n\t\t\t\tif ( object.geometry.boundingSphere === null ) object.geometry.computeBoundingSphere();\r\n\r\n\t\t\t\tcenter.copy( object.geometry.boundingSphere.center );\r\n\r\n\t\t\t\tcenter.applyMatrix4( object.matrixWorld );\r\n\r\n\t\t\t\tif ( frustum.containsPoint( center ) ) {\r\n\r\n\t\t\t\t\tthis.collection.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tif ( object.children.length > 0 ) {\r\n\r\n\t\t\tfor ( var x = 0; x < object.children.length; x ++ ) {\r\n\r\n\t\t\t\tthis.searchChildInFrustum( frustum, object.children[ x ] );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t};\r\n\r\n\treturn SelectionBox;\r\n\r\n} )();\r\n\r\nexport { SelectionBox };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/interactive/SelectionBox.js","import {\r\n\tVector2\r\n} from \"@/components/build/three.module.js\";\r\n\r\nvar SelectionHelper = ( function () {\r\n\r\n\tfunction SelectionHelper( selectionBox, renderer, cssClassName ) {\r\n\r\n\t\tthis.element = document.createElement( 'div' );\r\n\t\tthis.element.classList.add( cssClassName );\r\n\t\tthis.element.style.pointerEvents = 'none';\r\n\r\n\t\tthis.renderer = renderer;\r\n\r\n\t\tthis.startPoint = new Vector2();\r\n\t\tthis.pointTopLeft = new Vector2();\r\n\t\tthis.pointBottomRight = new Vector2();\r\n\r\n\t\tthis.isDown = false;\r\n\r\n\t\tthis.renderer.domElement.addEventListener( 'pointerdown', function ( event ) {\r\n\r\n\t\t\tthis.isDown = true;\r\n\t\t\tthis.onSelectStart( event );\r\n\r\n\t\t}.bind( this ), false );\r\n\r\n\t\tthis.renderer.domElement.addEventListener( 'pointermove', function ( event ) {\r\n\r\n\t\t\tif ( this.isDown ) {\r\n\r\n\t\t\t\tthis.onSelectMove( event );\r\n\r\n\t\t\t}\r\n\r\n\t\t}.bind( this ), false );\r\n\r\n\t\tthis.renderer.domElement.addEventListener( 'pointerup', function ( event ) {\r\n\r\n\t\t\tthis.isDown = false;\r\n\t\t\tthis.onSelectOver( event );\r\n\r\n\t\t}.bind( this ), false );\r\n\r\n\t}\r\n\r\n\tSelectionHelper.prototype.onSelectStart = function ( event ) {\r\n\r\n\t\tthis.renderer.domElement.parentElement.appendChild( this.element );\r\n\r\n\t\tthis.element.style.left = event.clientX + 'px';\r\n\t\tthis.element.style.top = event.clientY + 'px';\r\n\t\tthis.element.style.width = '0px';\r\n\t\tthis.element.style.height = '0px';\r\n\r\n\t\tthis.startPoint.x = event.clientX;\r\n\t\tthis.startPoint.y = event.clientY;\r\n\r\n\t};\r\n\r\n\tSelectionHelper.prototype.onSelectMove = function ( event ) {\r\n\r\n\t\tthis.pointBottomRight.x = Math.max( this.startPoint.x, event.clientX );\r\n\t\tthis.pointBottomRight.y = Math.max( this.startPoint.y, event.clientY );\r\n\t\tthis.pointTopLeft.x = Math.min( this.startPoint.x, event.clientX );\r\n\t\tthis.pointTopLeft.y = Math.min( this.startPoint.y, event.clientY );\r\n\r\n\t\tthis.element.style.left = this.pointTopLeft.x + 'px';\r\n\t\tthis.element.style.top = this.pointTopLeft.y + 'px';\r\n\t\tthis.element.style.width = ( this.pointBottomRight.x - this.pointTopLeft.x ) + 'px';\r\n\t\tthis.element.style.height = ( this.pointBottomRight.y - this.pointTopLeft.y ) + 'px';\r\n\r\n\t};\r\n\r\n\tSelectionHelper.prototype.onSelectOver = function () {\r\n\r\n\t\tthis.element.parentElement.removeChild( this.element );\r\n\r\n\t};\r\n\r\n\treturn SelectionHelper;\r\n\r\n} )();\r\n\r\nexport { SelectionHelper };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/interactive/SelectionHelper.js","<template>\r\n    <div class=\"miscBoxselection-container\">\r\n        <div id=\"info\">\r\n\t\t\t<a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> webgl - box selection\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { SelectionBox } from '@/components/jsm/interactive/SelectionBox.js'\r\nimport { SelectionHelper } from '@/components/jsm/interactive/SelectionHelper.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            container: null,\r\n            stats: null,\r\n            camera: null,\r\n            scene: null,\r\n            renderer: null,\r\n            selectionBox: null,\r\n            helper: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init()\r\n        this.animate()\r\n        this.selectionBox = new SelectionBox(this.camera, this.scene)\r\n        this.helper = new SelectionHelper(this.selectionBox, this.renderer, 'selectBox')\r\n        console.log(this.helper)\r\n        document.addEventListener('pointerdown', (event) => {\r\n            for (var item of this.selectionBox.collection) {\r\n                item.material.emissive.set(0x000000)\r\n            }\r\n            this.selectionBox.startPoint.set(\r\n                ((event.clientX - 281) / (window.innerWidth - 281)) * 2 - 1,\r\n                - (event.clientY / window.innerHeight) * 2 + 1,\r\n                0.5)\r\n        })\r\n        document.addEventListener('pointermove', (event) => {\r\n            if (this.helper.isDown) {\r\n                for (var i = 0; i < this.selectionBox.collection.length; i ++) {\r\n                    this.selectionBox.collection[ i ].material.emissive.set(0x000000)\r\n                }\r\n                this.selectionBox.endPoint.set(\r\n                    ((event.clientX - 281) / (window.innerWidth - 281)) * 2 - 1,\r\n                    - (event.clientY / window.innerHeight) * 2 + 1,\r\n                    0.5)\r\n                var allSelected = this.selectionBox.select()\r\n                for (var i = 0; i < allSelected.length; i ++) {\r\n                    allSelected[ i ].material.emissive.set(0xffffff)\r\n                }\r\n\r\n            }\r\n        })\r\n        document.addEventListener('pointerup', (event) => {\r\n            this.selectionBox.endPoint.set(\r\n                ((event.clientX - 281) / (window.innerWidth - 281)) * 2 - 1,\r\n                - (event.clientY / window.innerHeight) * 2 + 1,\r\n                0.5)\r\n            var allSelected = this.selectionBox.select()\r\n            for (var i = 0; i < allSelected.length; i ++) {\r\n                allSelected[ i ].material.emissive.set(0xffffff)\r\n            }\r\n        })\r\n    },\r\n    methods: {\r\n        init() {\r\n            this.container = document.createElement('div')\r\n            document.getElementsByClassName('miscBoxselection-container')[0].appendChild(this.container)\r\n            this.camera = new this.$THREE.PerspectiveCamera(70, this.$webglInnerWidth / window.innerHeight, 1, 5000)\r\n            this.camera.position.z = 1000\r\n            this.scene = new this.$THREE.Scene()\r\n            this.scene.background = new this.$THREE.Color(0xf0f0f0)\r\n            this.scene.add(new this.$THREE.AmbientLight(0x505050))\r\n            var light = new this.$THREE.SpotLight(0xffffff, 1.5)\r\n            light.position.set(0, 500, 2000)\r\n            light.angle = Math.PI / 9\r\n            light.castShadow = true\r\n            light.shadow.camera.near = 1000\r\n            light.shadow.camera.far = 4000\r\n            light.shadow.mapSize.width = 1024\r\n            light.shadow.mapSize.height = 1024\r\n            this.scene.add(light)\r\n            var geometry = new this.$THREE.BoxBufferGeometry(20, 20, 20)\r\n            for (var i = 0; i < 200; i ++) {\r\n                var object = new this.$THREE.Mesh(geometry, new this.$THREE.MeshLambertMaterial({ color: Math.random() * 0xffffff }))\r\n                object.position.x = Math.random() * 1600 - 800\r\n                object.position.y = Math.random() * 900 - 450\r\n                object.position.z = Math.random() * 900 - 500\r\n                object.rotation.x = Math.random() * 2 * Math.PI\r\n                object.rotation.y = Math.random() * 2 * Math.PI\r\n                object.rotation.z = Math.random() * 2 * Math.PI\r\n                object.scale.x = Math.random() * 2 + 1\r\n                object.scale.y = Math.random() * 2 + 1\r\n                object.scale.z = Math.random() * 2 + 1\r\n                object.castShadow = true\r\n                object.receiveShadow = true\r\n                this.scene.add(object)\r\n            }\r\n            this.renderer = new this.$THREE.WebGLRenderer({ antialias: true })\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            this.renderer.shadowMap.enabled = true\r\n            this.renderer.shadowMap.type = this.$THREE.PCFShadowMap\r\n            this.container.appendChild(this.renderer.domElement)\r\n            this.stats = new this.$Stats()\r\n            this.stats.dom.style.left = '280px'\r\n            this.container.appendChild(this.stats.dom)\r\n            window.addEventListener('resize', this.onWindowResize, false)\r\n\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n        },\r\n        animate() {\r\n            requestAnimationFrame(this.animate)\r\n            this.render()\r\n            this.stats.update()\r\n        },\r\n        render() {\r\n            this.renderer.render(this.scene, this.camera)\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.miscBoxselection-container {\r\n    width: 100%;\r\n}\r\n#info {\r\n    background-color: #f0f0f0;\r\n    color: #000;\r\n    touch-action: none;\r\n}\r\n#info a {\r\n    color: #08e;\r\n}\r\n</style>\r\n\r\n<style>\r\n.miscBoxselection-container .selectBox {\r\n    border: 1px solid #55aaff;\r\n    background-color: rgba(75, 160, 255, 0.3);\r\n    position: fixed;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/misc/miscBoxselection.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"miscBoxselection-container\"},[_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" webgl - box selection\\n\\t\\t\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-6283c72e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/misc/miscBoxselection.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6283c72e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./miscBoxselection.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-6283c72e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./miscBoxselection.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./miscBoxselection.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./miscBoxselection.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-6283c72e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./miscBoxselection.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-6283c72e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/misc/miscBoxselection.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}