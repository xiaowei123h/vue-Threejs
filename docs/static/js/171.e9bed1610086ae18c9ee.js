webpackJsonp([171],{IH1A:function(e,t){},T0pT:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("JQAX"),r=i("6+nK"),s=function(e){r.Loader.call(this,e),this.littleEndian=!0};s.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:s,load:function(e,t,i,n){var s=this,a=new r.FileLoader(s.manager);a.setPath(s.path),a.setResponseType("arraybuffer"),a.setRequestHeader(s.requestHeader),a.setWithCredentials(s.withCredentials),a.load(e,function(i){try{t(s.parse(i,e))}catch(t){n?n(t):console.error(t),s.manager.itemError(e)}},i,n)},parse:function(e,t){var i=r.LoaderUtils.decodeText(new Uint8Array(e)),n=function(e){var t={},i=e.search(/[\r\n]DATA\s(\S*)\s/i),n=/[\r\n]DATA\s(\S*)\s/i.exec(e.substr(i-1));if(t.data=n[1],t.headerLen=n[0].length+i,t.str=e.substr(0,t.headerLen),t.str=t.str.replace(/\#.*/gi,""),t.version=/VERSION (.*)/i.exec(t.str),t.fields=/FIELDS (.*)/i.exec(t.str),t.size=/SIZE (.*)/i.exec(t.str),t.type=/TYPE (.*)/i.exec(t.str),t.count=/COUNT (.*)/i.exec(t.str),t.width=/WIDTH (.*)/i.exec(t.str),t.height=/HEIGHT (.*)/i.exec(t.str),t.viewpoint=/VIEWPOINT (.*)/i.exec(t.str),t.points=/POINTS (.*)/i.exec(t.str),null!==t.version&&(t.version=parseFloat(t.version[1])),null!==t.fields&&(t.fields=t.fields[1].split(" ")),null!==t.type&&(t.type=t.type[1].split(" ")),null!==t.width&&(t.width=parseInt(t.width[1])),null!==t.height&&(t.height=parseInt(t.height[1])),null!==t.viewpoint&&(t.viewpoint=t.viewpoint[1]),null!==t.points&&(t.points=parseInt(t.points[1],10)),null===t.points&&(t.points=t.width*t.height),null!==t.size&&(t.size=t.size[1].split(" ").map(function(e){return parseInt(e,10)})),null!==t.count)t.count=t.count[1].split(" ").map(function(e){return parseInt(e,10)});else{t.count=[];for(var r=0,s=t.fields.length;r<s;r++)t.count.push(1)}t.offset={};var a=0;for(r=0,s=t.fields.length;r<s;r++)"ascii"===t.data?t.offset[t.fields[r]]=r:(t.offset[t.fields[r]]=a,a+=t.size[r]*t.count[r]);return t.rowSize=a,t}(i),s=[],a=[],o=[];if("ascii"===n.data)for(var l=n.offset,d=i.substr(n.headerLen).split("\n"),h=0,c=d.length;h<c;h++)if(""!==d[h]){var p=d[h].split(" ");if(void 0!==l.x&&(s.push(parseFloat(p[l.x])),s.push(parseFloat(p[l.y])),s.push(parseFloat(p[l.z]))),void 0!==l.rgb){var u=parseFloat(p[l.rgb]),f=u>>16&255,m=u>>8&255,g=u>>0&255;o.push(f/255,m/255,g/255)}void 0!==l.normal_x&&(a.push(parseFloat(p[l.normal_x])),a.push(parseFloat(p[l.normal_y])),a.push(parseFloat(p[l.normal_z])))}if("binary_compressed"===n.data){var w=new Uint32Array(e.slice(n.headerLen,n.headerLen+8)),v=w[0],b=w[1],E=function(e,t){var i,n,r,s=e.length,a=new Uint8Array(t),o=0,l=0;do{if((i=e[o++])<32){if(l+ ++i>t)throw new Error("Output buffer is not large enough");if(o+i>s)throw new Error("Invalid compressed data");do{a[l++]=e[o++]}while(--i)}else{if(n=i>>5,r=l-((31&i)<<8)-1,o>=s)throw new Error("Invalid compressed data");if(7===n&&(n+=e[o++],o>=s))throw new Error("Invalid compressed data");if(r-=e[o++],l+n+2>t)throw new Error("Output buffer is not large enough");if(r<0)throw new Error("Invalid compressed data");if(r>=l)throw new Error("Invalid compressed data");do{a[l++]=a[r++]}while(2+--n)}}while(o<s);return a}(new Uint8Array(e,n.headerLen+8,v),b),x=new DataView(E.buffer);for(l=n.offset,h=0;h<n.points;h++)void 0!==l.x&&(s.push(x.getFloat32(n.points*l.x+n.size[0]*h,this.littleEndian)),s.push(x.getFloat32(n.points*l.y+n.size[1]*h,this.littleEndian)),s.push(x.getFloat32(n.points*l.z+n.size[2]*h,this.littleEndian))),void 0!==l.rgb&&(o.push(x.getUint8(n.points*l.rgb+n.size[3]*h+0)/255),o.push(x.getUint8(n.points*l.rgb+n.size[3]*h+1)/255),o.push(x.getUint8(n.points*l.rgb+n.size[3]*h+2)/255)),void 0!==l.normal_x&&(a.push(x.getFloat32(n.points*l.normal_x+n.size[4]*h,this.littleEndian)),a.push(x.getFloat32(n.points*l.normal_y+n.size[5]*h,this.littleEndian)),a.push(x.getFloat32(n.points*l.normal_z+n.size[6]*h,this.littleEndian)))}if("binary"===n.data){x=new DataView(e,n.headerLen),l=n.offset,h=0;for(var y=0;h<n.points;h++,y+=n.rowSize)void 0!==l.x&&(s.push(x.getFloat32(y+l.x,this.littleEndian)),s.push(x.getFloat32(y+l.y,this.littleEndian)),s.push(x.getFloat32(y+l.z,this.littleEndian))),void 0!==l.rgb&&(o.push(x.getUint8(y+l.rgb+2)/255),o.push(x.getUint8(y+l.rgb+1)/255),o.push(x.getUint8(y+l.rgb+0)/255)),void 0!==l.normal_x&&(a.push(x.getFloat32(y+l.normal_x,this.littleEndian)),a.push(x.getFloat32(y+l.normal_y,this.littleEndian)),a.push(x.getFloat32(y+l.normal_z,this.littleEndian)))}var z=new r.BufferGeometry;s.length>0&&z.setAttribute("position",new r.Float32BufferAttribute(s,3)),a.length>0&&z.setAttribute("normal",new r.Float32BufferAttribute(a,3)),o.length>0&&z.setAttribute("color",new r.Float32BufferAttribute(o,3)),z.computeBoundingSphere();var _=new r.PointsMaterial({size:.005});o.length>0?_.vertexColors=!0:_.color.setHex(16777215*Math.random());var F=new r.Points(z,_),I=t.split("").reverse().join("");return I=(I=/([^\/]*)/.exec(I))[1].split("").reverse().join(""),F.name=I,F}});var a={data:function(){return{container:null,stats:null,camera:null,controls:null,scene:null,renderer:null}},mounted:function(){this.init(),this.animate()},methods:{init:function(){var e=this;this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(0),this.camera=new this.$THREE.PerspectiveCamera(15,this.$webglInnerWidth/window.innerHeight,.01,40),this.camera.position.x=.4,this.camera.position.z=-2,this.camera.up.set(0,0,1),this.scene.add(this.camera),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglLoaderPcd-container")[0].appendChild(this.renderer.domElement),(new s).load("static/models/pcd/binary/Zaghetto.pcd",function(t){e.scene.add(t);var i=t.geometry.boundingSphere.center;e.controls.target.set(i.x,i.y,i.z),e.controls.update()}),this.container=document.createElement("div"),document.getElementsByClassName("webglLoaderPcd-container")[0].appendChild(this.container),this.container.appendChild(this.renderer.domElement),this.controls=new n.a(this.camera,this.renderer.domElement),this.controls.rotateSpeed=2,this.controls.zoomSpeed=.3,this.controls.panSpeed=.2,this.controls.staticMoving=!0,this.controls.minDistance=.3,this.controls.maxDistance=30,this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1),window.addEventListener("keypress",this.keyboard)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.controls.handleResize()},keyboard:function(e){var t=this.scene.getObjectByName("Zaghetto.pcd");switch(e.key||String.fromCharCode(e.keyCode||e.charCode)){case"+":t.material.size*=1.2,t.material.needsUpdate=!0;break;case"-":t.material.size/=1.2,t.material.needsUpdate=!0;break;case"c":t.material.color.setHex(16777215*Math.random()),t.material.needsUpdate=!0}},animate:function(){requestAnimationFrame(this.animate),this.controls.update(),this.renderer.render(this.scene,this.camera),this.stats.update()}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"webglLoaderPcd-container"},[i("div",{attrs:{id:"info"}},[i("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[e._v("three.js")]),e._v(" "),i("a",{attrs:{href:"http://pointclouds.org/documentation/tutorials/pcd_file_format.php#pcd-file-format",target:"_blank",rel:"noopener"}},[e._v("PCD File format")]),e._v(" "),i("div",[e._v("PCD loader test by "),i("a",{attrs:{href:"http://filipecaixeta.com.br",target:"_blank",rel:"noopener"}},[e._v("Filipe Caixeta")])]),e._v(" "),i("div",[e._v("+/-: Increase/Decrease point size")]),e._v(" "),i("div",[e._v("c: Change color")])])])}]};var l=i("VU/8")(a,o,!1,function(e){i("IH1A")},"data-v-6962cb68",null);t.default=l.exports}});
//# sourceMappingURL=171.e9bed1610086ae18c9ee.js.map