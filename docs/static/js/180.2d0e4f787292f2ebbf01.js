webpackJsonp([180],{Tp2j:function(e,t){},vKop:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("W171"),a=n("wCDB"),r=n("IW8f"),o={data:function(){return{mesh:null,camera:null,scene:null,renderer:null,effect:null,helper:null,ready:!1,clock:null}},mounted:function(){this.clock=new this.$moduleTHREE.Clock},methods:{handleStartButton:function(){var e=this;Ammo().then(function(){e.init(),e.animate()})},init:function(){var e=this;document.getElementById("overlay").remove();var t=document.createElement("div");document.getElementsByClassName("webglLoaderMmdAudio-container")[0].appendChild(t),this.camera=new this.$moduleTHREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,1,2e3),this.scene=new this.$moduleTHREE.Scene,this.scene.background=new this.$moduleTHREE.Color(16777215),this.scene.add(new this.$moduleTHREE.PolarGridHelper(30,10));var n=new this.$moduleTHREE.AudioListener;this.camera.add(n),this.scene.add(this.camera);var o=new this.$moduleTHREE.AmbientLight(6710886);this.scene.add(o);var s=new this.$moduleTHREE.DirectionalLight(8943462);function d(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(Math.round(t,2)+"% downloaded")}}s.position.set(-1,1,1).normalize(),this.scene.add(s),this.renderer=new this.$moduleTHREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),t.appendChild(this.renderer.domElement),this.effect=new i.a(this.renderer);var l=["static/models/mmd/vmds/wavefile_camera.vmd"],h={delayTime:160/30};this.helper=new r.a;var m=new a.a;m.loadWithAnimation("static/models/mmd/miku/miku_v2.pmd",["static/models/mmd/vmds/wavefile_v2.vmd"],function(t){e.mesh=t.mesh,e.helper.add(e.mesh,{animation:t.animation,physics:!0}),m.loadAnimation(l,e.camera,function(t){e.helper.add(e.camera,{animation:t}),(new e.$moduleTHREE.AudioLoader).load("static/models/mmd/audios/wavefile_short.mp3",function(t){var i=new e.$moduleTHREE.Audio(n).setBuffer(t);e.helper.add(i,h),e.scene.add(e.mesh),e.ready=!0},d,null)},d,null)},d,null),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.camera.aspect=(window.innerWidth-281)/window.innerHeight,this.camera.updateProjectionMatrix(),this.effect.setSize(window.innerWidth-281,window.innerHeight)},animate:function(){requestAnimationFrame(this.animate),this.render()},render:function(){this.ready&&this.helper.update(this.clock.getDelta()),this.effect.render(this.scene,this.camera)}}},s={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoaderMmdAudio-container"},[t("div",{attrs:{id:"overlay"}},[t("el-button",{attrs:{size:"small",type:"primary"},on:{click:this.handleStartButton}},[this._v("Play")])],1),this._v(" "),this._m(0)])},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"info"}},[n("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[e._v("three.js")]),e._v(" - MMDLoader test"),n("br"),e._v(" "),n("a",{attrs:{href:"https://github.com/mrdoob/three.js/tree/master/examples/models/mmd#readme",target:"_blank",rel:"noopener"}},[e._v("MMD Assets license")]),n("br"),e._v("\n\t\tCopyright\n\t\t"),n("a",{attrs:{href:"https://sites.google.com/view/evpvp/",target:"_blank",rel:"noopener"}},[e._v("Model Data")]),e._v(" "),n("a",{attrs:{href:"http://www.nicovideo.jp/watch/sm13147122",target:"_blank",rel:"noopener"}},[e._v("Dance Data")]),e._v(" "),n("a",{attrs:{href:"http://www.nicovideo.jp/watch/sm11938255",target:"_blank",rel:"noopener"}},[e._v("Audio Data")]),n("br"),e._v("\n\t\tCamera is customized from "),n("a",{attrs:{href:"http://www.nicovideo.jp/watch/sm19168559",target:"_blank",rel:"noopener"}},[e._v("this Data")])])}]};var d=n("VU/8")(o,s,!1,function(e){n("Tp2j")},"data-v-65bc8956",null);t.default=d.exports}});
//# sourceMappingURL=180.2d0e4f787292f2ebbf01.js.map