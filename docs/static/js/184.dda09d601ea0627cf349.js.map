{"version":3,"sources":["webpack:///./src/components/jsm/exporters/OBJExporter.js","webpack:///src/views/misc/miscExporterObj.vue","webpack:///./src/views/misc/miscExporterObj.vue?329a","webpack:///./src/views/misc/miscExporterObj.vue"],"names":["OBJExporter","prototype","constructor","parse","object","i","j","k","l","m","output","indexVertex","indexVertexUvs","indexNormals","vertex","Vector3","normal","uv","Vector2","face","traverse","child","Mesh","mesh","nbVertex","nbNormals","nbVertexUvs","geometry","normalMatrixWorld","Matrix3","Geometry","BufferGeometry","setFromObject","vertices","getAttribute","normals","uvs","indices","getIndex","name","material","undefined","count","x","getX","y","getY","z","getZ","applyMatrix4","matrixWorld","getNormalMatrix","applyMatrix3","normalize","join","console","warn","parseMesh","Line","line","type","parseLine","miscExporterObj","data","camera","scene","light","renderer","exportButton","floatingDiv","mouseX","mouseY","mounted","this","init","animate","methods","exportToObj","result","style","display","innerHTML","split","addGeometry","children","length","isMesh","dispose","remove","$THREE","MeshLambertMaterial","color","generateTriangleGeometry","add","BoxBufferGeometry","CylinderBufferGeometry","position","geometry2","mesh2","geometry3","mesh3","rotation","Math","PI","WebGLRenderer","setPixelRatio","window","devicePixelRatio","setSize","$webglInnerWidth","innerHeight","document","getElementsByClassName","appendChild","domElement","PerspectiveCamera","set","Scene","DirectionalLight","addEventListener","onWindowClick","onWindowResize","onDocumentMouseMove","getElementById","createElement","className","event","needToClose","target","parentElement","$onWindowResize","windowHalfX","innerWidth","windowHalfY","clientX","clientY","requestAnimationFrame","lookAt","render","push","setAttribute","Float32BufferAttribute","computeVertexNormals","misc_miscExporterObj","_vm","_h","$createElement","_c","_self","staticClass","attrs","id","href","rel","_v","size","on","click","$event","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"4IAUIA,EAAc,aAElBA,EAAYC,WAEXC,YAAaF,EAEbG,MAAO,SAAWC,GAEjB,IAUIC,EAAGC,EAAGC,EAAGC,EAAGC,EAVZC,EAAS,GAETC,EAAc,EACdC,EAAiB,EACjBC,EAAe,EAEfC,EAAS,IAAIC,OACbC,EAAS,IAAID,OACbE,EAAK,IAAIC,OAEMC,KA2OnB,OAhBAf,EAAOgB,SAAU,SAAWC,GAEtBA,aAAiBC,OA3NP,SAAWC,GAE1B,IAAIC,EAAW,EACXC,EAAY,EACZC,EAAc,EAEdC,EAAWJ,EAAKI,SAEhBC,EAAoB,IAAIC,MAQ5B,GANKF,aAAoBG,MAExBH,GAAW,IAAII,KAAiBC,cAAeT,IAI3CI,aAAoBI,IAAiB,CAGzC,IAAIE,EAAWN,EAASO,aAAc,YAClCC,EAAUR,EAASO,aAAc,UACjCE,EAAMT,EAASO,aAAc,MAC7BG,EAAUV,EAASW,WAcvB,GAXA5B,GAAU,KAAOa,EAAKgB,KAAO,KAGxBhB,EAAKiB,UAAYjB,EAAKiB,SAASD,OAEnC7B,GAAU,UAAYa,EAAKiB,SAASD,KAAO,WAM1BE,IAAbR,EAEJ,IAAM5B,EAAI,EAAGG,EAAIyB,EAASS,MAAOrC,EAAIG,EAAGH,IAAMmB,IAE7CV,EAAO6B,EAAIV,EAASW,KAAMvC,GAC1BS,EAAO+B,EAAIZ,EAASa,KAAMzC,GAC1BS,EAAOiC,EAAId,EAASe,KAAM3C,GAG1BS,EAAOmC,aAAc1B,EAAK2B,aAG1BxC,GAAU,KAAOI,EAAO6B,EAAI,IAAM7B,EAAO+B,EAAI,IAAM/B,EAAOiC,EAAI,KAQhE,QAAaN,IAARL,EAEJ,IAAM/B,EAAI,EAAGG,EAAI4B,EAAIM,MAAOrC,EAAIG,EAAGH,IAAMqB,IAExCT,EAAG0B,EAAIP,EAAIQ,KAAMvC,GACjBY,EAAG4B,EAAIT,EAAIU,KAAMzC,GAGjBK,GAAU,MAAQO,EAAG0B,EAAI,IAAM1B,EAAG4B,EAAI,KAQxC,QAAiBJ,IAAZN,EAIJ,IAFAP,EAAkBuB,gBAAiB5B,EAAK2B,aAElC7C,EAAI,EAAGG,EAAI2B,EAAQO,MAAOrC,EAAIG,EAAGH,IAAMoB,IAE5CT,EAAO2B,EAAIR,EAAQS,KAAMvC,GACzBW,EAAO6B,EAAIV,EAAQW,KAAMzC,GACzBW,EAAO+B,EAAIZ,EAAQa,KAAM3C,GAGzBW,EAAOoC,aAAcxB,GAAoByB,YAGzC3C,GAAU,MAAQM,EAAO2B,EAAI,IAAM3B,EAAO6B,EAAI,IAAM7B,EAAO+B,EAAI,KAQjE,GAAiB,OAAZV,EAEJ,IAAMhC,EAAI,EAAGG,EAAI6B,EAAQK,MAAOrC,EAAIG,EAAGH,GAAK,EAAI,CAE/C,IAAMI,EAAI,EAAGA,EAAI,EAAGA,IAEnBH,EAAI+B,EAAQO,KAAMvC,EAAII,GAAM,EAE5BU,EAAMV,GAAQE,EAAcL,GAAQ6B,GAAWC,EAAM,KAAQA,EAAQxB,EAAiBN,EAAM,KAAS6B,EAAU,KAAQtB,EAAeP,GAAM,IAAO,IAKpJI,GAAU,KAAOS,EAAKmC,KAAM,KAAQ,UAMrC,IAAMjD,EAAI,EAAGG,EAAIyB,EAASS,MAAOrC,EAAIG,EAAGH,GAAK,EAAI,CAEhD,IAAMI,EAAI,EAAGA,EAAI,EAAGA,IAEnBH,EAAID,EAAII,EAAI,EAEZU,EAAMV,GAAQE,EAAcL,GAAQ6B,GAAWC,EAAM,KAAQA,EAAQxB,EAAiBN,EAAM,KAAS6B,EAAU,KAAQtB,EAAeP,GAAM,IAAO,IAKpJI,GAAU,KAAOS,EAAKmC,KAAM,KAAQ,WAQtCC,QAAQC,KAAM,2DAA4D7B,GAK3EhB,GAAea,EACfZ,GAAkBc,EAClBb,GAAgBY,EAkFfgC,CAAWpC,GAIPA,aAAiBqC,OAlFP,SAAWC,GAE1B,IAAInC,EAAW,EAEXG,EAAWgC,EAAKhC,SAChBiC,EAAOD,EAAKC,KAQhB,GANKjC,aAAoBG,MAExBH,GAAW,IAAII,KAAiBC,cAAe2B,IAI3ChC,aAAoBI,IAAiB,CAGzC,IAAIE,EAAWN,EAASO,aAAc,YAKtC,GAFAxB,GAAU,KAAOiD,EAAKpB,KAAO,UAEXE,IAAbR,EAEJ,IAAM5B,EAAI,EAAGG,EAAIyB,EAASS,MAAOrC,EAAIG,EAAGH,IAAMmB,IAE7CV,EAAO6B,EAAIV,EAASW,KAAMvC,GAC1BS,EAAO+B,EAAIZ,EAASa,KAAMzC,GAC1BS,EAAOiC,EAAId,EAASe,KAAM3C,GAG1BS,EAAOmC,aAAcU,EAAKT,aAG1BxC,GAAU,KAAOI,EAAO6B,EAAI,IAAM7B,EAAO+B,EAAI,IAAM/B,EAAOiC,EAAI,KAMhE,GAAc,SAATa,EAAkB,CAItB,IAFAlD,GAAU,KAEJJ,EAAI,EAAGE,EAAIyB,EAASS,MAAOpC,GAAKE,EAAGF,IAExCI,GAAYC,EAAcL,EAAM,IAIjCI,GAAU,KAIX,GAAc,iBAATkD,EAEJ,IAAarD,EAAQ,GAAfD,EAAI,GAAcE,EAAIyB,EAASS,MAAOpC,EAAIE,EAAWD,GAARD,GAAK,GAAW,EAElEI,GAAU,MAASC,EAAcL,GAAM,KAAQK,EAAcJ,GAAM,UAQrEgD,QAAQC,KAAM,2DAA4D7B,GAK3EhB,GAAea,EAcdqC,CAAWxC,KAMNX,ICtPT,IAAAoD,GACAC,KADA,WAEA,OACAC,OAAA,KACAC,MAAA,KACAC,MAAA,KACAC,SAAA,KACAC,aAAA,KACAC,YAAA,KACAC,OAAA,EACAC,OAAA,IAGAC,QAbA,WAcAC,KAAAC,OACAD,KAAAE,WAEAC,SACAC,YADA,WAEA,IACAC,GADA,IAAA9E,GACAG,MAAAsE,KAAAR,OACAQ,KAAAJ,YAAAU,MAAAC,QAAA,QACAP,KAAAJ,YAAAY,UAAAH,EAAAI,MAAA,MAAA5B,KAAA,WAEA6B,YAPA,SAOAvB,GACA,QAAAvD,EAAA,EAAAA,EAAAoE,KAAAR,MAAAmB,SAAAC,OAAAhF,IAAA,CACA,IAAAgB,EAAAoD,KAAAR,MAAAmB,SAAA/E,GACAgB,EAAAiE,SACAjE,EAAAM,SAAA4D,UACAd,KAAAR,MAAAuB,OAAAnE,GACAhB,KAGA,OAAAuD,EAAA,CACA,IAAApB,EAAA,IAAAiC,KAAAgB,OAAAC,qBAAAC,MAAA,QACAhE,EAAA8C,KAAAmB,2BACAnB,KAAAR,MAAA4B,IAAA,IAAApB,KAAAgB,OAAAnE,KAAAK,EAAAa,SACA,OAAAoB,EAAA,CACApB,EAAA,IAAAiC,KAAAgB,OAAAC,qBAAAC,MAAA,QACAhE,EAAA,IAAA8C,KAAAgB,OAAAK,kBAAA,aACArB,KAAAR,MAAA4B,IAAA,IAAApB,KAAAgB,OAAAnE,KAAAK,EAAAa,SACA,OAAAoB,EAAA,CACApB,EAAA,IAAAiC,KAAAgB,OAAAC,qBAAAC,MAAA,QACAhE,EAAA,IAAA8C,KAAAgB,OAAAM,uBAAA,gBACAtB,KAAAR,MAAA4B,IAAA,IAAApB,KAAAgB,OAAAnE,KAAAK,EAAAa,SACA,OAAAoB,GAAA,IAAAA,EAAA,CACApB,EAAA,IAAAiC,KAAAgB,OAAAC,qBAAAC,MAAA,QACAhE,EAAA8C,KAAAmB,2BADA,IAEArE,EAAA,IAAAkD,KAAAgB,OAAAnE,KAAAK,EAAAa,GACAjB,EAAAyE,SAAArD,GAAA,IACA8B,KAAAR,MAAA4B,IAAAtE,GACA,IAAA0E,EAAA,IAAAxB,KAAAgB,OAAAK,kBAAA,aACAI,EAAA,IAAAzB,KAAAgB,OAAAnE,KAAA2E,EAAAzD,GACAiC,KAAAR,MAAA4B,IAAAK,GACA,IAAAC,EAAA,IAAA1B,KAAAgB,OAAAM,uBAAA,gBACAK,EAAA,IAAA3B,KAAAgB,OAAAnE,KAAA6E,EAAA3D,GACA4D,EAAAJ,SAAArD,EAAA,IACA8B,KAAAR,MAAA4B,IAAAO,GACA,IAAAxC,IACArC,EAAA8E,SAAAxD,EAAAyD,KAAAC,GAAA,EACAL,EAAAG,SAAAxD,EAAAyD,KAAAC,GAAA,EACAH,EAAAC,SAAAxD,EAAAyD,KAAAC,GAAA,KAIA7B,KAhDA,WAiDAD,KAAAN,SAAA,IAAAM,KAAAgB,OAAAe,cACA/B,KAAAN,SAAAsC,cAAAC,OAAAC,kBACAlC,KAAAN,SAAAyC,QAAAnC,KAAAoC,iBAAAH,OAAAI,aACAC,SAAAC,uBAAA,gCAAAC,YAAAxC,KAAAN,SAAA+C,YACAzC,KAAAT,OAAA,IAAAS,KAAAgB,OAAA0B,kBAAA,GAAA1C,KAAAoC,iBAAAH,OAAAI,YAAA,OACArC,KAAAT,OAAAgC,SAAAoB,IAAA,SACA3C,KAAAR,MAAA,IAAAQ,KAAAgB,OAAA4B,MACA5C,KAAAP,MAAA,IAAAO,KAAAgB,OAAA6B,iBAAA,UACA7C,KAAAR,MAAA4B,IAAApB,KAAAP,OACAO,KAAAU,YAAA,GACAuB,OAAAa,iBAAA,QAAA9C,KAAA+C,eAAA,GACAd,OAAAa,iBAAA,SAAA9C,KAAAgD,gBAAA,GACAV,SAAAQ,iBAAA,YAAA9C,KAAAiD,qBAAA,GACAX,SAAAQ,iBAAA,YAAA9C,KAAAiD,qBAAA,GACAjD,KAAAL,aAAA2C,SAAAY,eAAA,UACAlD,KAAAJ,YAAA0C,SAAAa,cAAA,OACAnD,KAAAJ,YAAAwD,UAAA,WACAd,SAAAC,uBAAA,gCAAAC,YAAAxC,KAAAJ,cAEAmD,cApEA,SAoEAM,GAGA,IAFA,IAAAC,GAAA,EACAC,EAAAF,EAAAE,OACA,OAAAA,GAAA,CACA,GAAAA,IAAAvD,KAAAJ,aAAA2D,IAAAvD,KAAAL,aAAA,CACA2D,GAAA,EACA,MAEAC,IAAAC,cAEAF,IACAtD,KAAAJ,YAAAU,MAAAC,QAAA,SAGAyC,eAlFA,WAmFAhD,KAAAyD,gBAAAzD,KAAAT,OAAAS,KAAAN,WAEAuD,oBArFA,SAqFAI,GACA,IAAAK,GAAAzB,OAAA0B,WAAA,OACAC,EAAA3B,OAAAI,YAAA,EACArC,KAAAH,QAAAwD,EAAAQ,QAAAH,GAAA,EACA1D,KAAAF,QAAAuD,EAAAS,QAAAF,GAAA,GAEA1D,QA3FA,WA4FA6D,sBAAA/D,KAAAE,SACAF,KAAAT,OAAAgC,SAAArD,GAAA,KAAA8B,KAAAH,OAAAG,KAAAT,OAAAgC,SAAArD,GACA8B,KAAAT,OAAAgC,SAAAnD,GAAA,MAAA4B,KAAAF,OAAAE,KAAAT,OAAAgC,SAAAnD,GACA4B,KAAAT,OAAAyE,OAAAhE,KAAAR,MAAA+B,UACAvB,KAAAP,MAAA8B,SAAAoB,IAAA3C,KAAAT,OAAAgC,SAAArD,EAAA8B,KAAAT,OAAAgC,SAAAnD,EAAA4B,KAAAT,OAAAgC,SAAAjD,GAAAM,YACAoB,KAAAN,SAAAuE,OAAAjE,KAAAR,MAAAQ,KAAAT,SAEA4B,yBAnGA,WAoGA,IAAAjE,EAAA,IAAA8C,KAAAgB,OAAA1D,eACAE,KAMA,OALAA,EAAA0G,MAAA,UACA1G,EAAA0G,KAAA,UACA1G,EAAA0G,KAAA,SACAhH,EAAAiH,aAAA,eAAAnE,KAAAgB,OAAAoD,uBAAA5G,EAAA,IACAN,EAAAmH,uBACAnH,KC1IeoH,GADEL,OAFjB,WAA0B,IAAAM,EAAAvE,KAAawE,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,8BAAwCF,EAAA,OAAYG,OAAOC,GAAA,UAAaJ,EAAA,KAAUG,OAAOE,KAAA,sBAAAxB,OAAA,SAAAyB,IAAA,cAAiET,EAAAU,GAAA,cAAAV,EAAAU,GAAA,2BAAAP,EAAA,MAAAA,EAAA,MAAAH,EAAAU,GAAA,KAAAP,EAAA,aAAuGG,OAAO1F,KAAA,UAAA+F,KAAA,QAA+BC,IAAKC,MAAA,SAAAC,GAAyB,OAAAd,EAAA7D,YAAA,OAA4B6D,EAAAU,GAAA,cAAAV,EAAAU,GAAA,KAAAP,EAAA,aAAmDG,OAAO1F,KAAA,UAAA+F,KAAA,QAA+BC,IAAKC,MAAA,SAAAC,GAAyB,OAAAd,EAAA7D,YAAA,OAA4B6D,EAAAU,GAAA,UAAAV,EAAAU,GAAA,KAAAP,EAAA,aAA+CG,OAAO1F,KAAA,UAAA+F,KAAA,QAA+BC,IAAKC,MAAA,SAAAC,GAAyB,OAAAd,EAAA7D,YAAA,OAA4B6D,EAAAU,GAAA,cAAAV,EAAAU,GAAA,KAAAP,EAAA,aAAmDG,OAAO1F,KAAA,UAAA+F,KAAA,QAA+BC,IAAKC,MAAA,SAAAC,GAAyB,OAAAd,EAAA7D,YAAA,OAA4B6D,EAAAU,GAAA,cAAAV,EAAAU,GAAA,KAAAP,EAAA,aAAmDG,OAAO1F,KAAA,UAAA+F,KAAA,QAA+BC,IAAKC,MAAA,SAAAC,GAAyB,OAAAd,EAAA7D,YAAA,OAA4B6D,EAAAU,GAAA,iBAAAV,EAAAU,GAAA,KAAAP,EAAA,MAAAA,EAAA,MAAAH,EAAAU,GAAA,KAAAP,EAAA,aAAoFG,OAAO1F,KAAA,UAAA+F,KAAA,QAA+BC,IAAKC,MAAA,SAAAC,GAAyB,OAAAd,EAAAnE,kBAA2BmE,EAAAU,GAAA,0BAErrCK,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEpG,EACAiF,GATF,EAVA,SAAAoB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/184.dda09d601ea0627cf349.js","sourcesContent":["import {\r\n\tBufferGeometry,\r\n\tGeometry,\r\n\tLine,\r\n\tMatrix3,\r\n\tMesh,\r\n\tVector2,\r\n\tVector3\r\n} from \"@/components/build/three.module.js\";\r\n\r\nvar OBJExporter = function () {};\r\n\r\nOBJExporter.prototype = {\r\n\r\n\tconstructor: OBJExporter,\r\n\r\n\tparse: function ( object ) {\r\n\r\n\t\tvar output = '';\r\n\r\n\t\tvar indexVertex = 0;\r\n\t\tvar indexVertexUvs = 0;\r\n\t\tvar indexNormals = 0;\r\n\r\n\t\tvar vertex = new Vector3();\r\n\t\tvar normal = new Vector3();\r\n\t\tvar uv = new Vector2();\r\n\r\n\t\tvar i, j, k, l, m, face = [];\r\n\r\n\t\tvar parseMesh = function ( mesh ) {\r\n\r\n\t\t\tvar nbVertex = 0;\r\n\t\t\tvar nbNormals = 0;\r\n\t\t\tvar nbVertexUvs = 0;\r\n\r\n\t\t\tvar geometry = mesh.geometry;\r\n\r\n\t\t\tvar normalMatrixWorld = new Matrix3();\r\n\r\n\t\t\tif ( geometry instanceof Geometry ) {\r\n\r\n\t\t\t\tgeometry = new BufferGeometry().setFromObject( mesh );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry instanceof BufferGeometry ) {\r\n\r\n\t\t\t\t// shortcuts\r\n\t\t\t\tvar vertices = geometry.getAttribute( 'position' );\r\n\t\t\t\tvar normals = geometry.getAttribute( 'normal' );\r\n\t\t\t\tvar uvs = geometry.getAttribute( 'uv' );\r\n\t\t\t\tvar indices = geometry.getIndex();\r\n\r\n\t\t\t\t// name of the mesh object\r\n\t\t\t\toutput += 'o ' + mesh.name + '\\n';\r\n\r\n\t\t\t\t// name of the mesh material\r\n\t\t\t\tif ( mesh.material && mesh.material.name ) {\r\n\r\n\t\t\t\t\toutput += 'usemtl ' + mesh.material.name + '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// vertices\r\n\r\n\t\t\t\tif ( vertices !== undefined ) {\r\n\r\n\t\t\t\t\tfor ( i = 0, l = vertices.count; i < l; i ++, nbVertex ++ ) {\r\n\r\n\t\t\t\t\t\tvertex.x = vertices.getX( i );\r\n\t\t\t\t\t\tvertex.y = vertices.getY( i );\r\n\t\t\t\t\t\tvertex.z = vertices.getZ( i );\r\n\r\n\t\t\t\t\t\t// transform the vertex to world space\r\n\t\t\t\t\t\tvertex.applyMatrix4( mesh.matrixWorld );\r\n\r\n\t\t\t\t\t\t// transform the vertex to export format\r\n\t\t\t\t\t\toutput += 'v ' + vertex.x + ' ' + vertex.y + ' ' + vertex.z + '\\n';\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// uvs\r\n\r\n\t\t\t\tif ( uvs !== undefined ) {\r\n\r\n\t\t\t\t\tfor ( i = 0, l = uvs.count; i < l; i ++, nbVertexUvs ++ ) {\r\n\r\n\t\t\t\t\t\tuv.x = uvs.getX( i );\r\n\t\t\t\t\t\tuv.y = uvs.getY( i );\r\n\r\n\t\t\t\t\t\t// transform the uv to export format\r\n\t\t\t\t\t\toutput += 'vt ' + uv.x + ' ' + uv.y + '\\n';\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// normals\r\n\r\n\t\t\t\tif ( normals !== undefined ) {\r\n\r\n\t\t\t\t\tnormalMatrixWorld.getNormalMatrix( mesh.matrixWorld );\r\n\r\n\t\t\t\t\tfor ( i = 0, l = normals.count; i < l; i ++, nbNormals ++ ) {\r\n\r\n\t\t\t\t\t\tnormal.x = normals.getX( i );\r\n\t\t\t\t\t\tnormal.y = normals.getY( i );\r\n\t\t\t\t\t\tnormal.z = normals.getZ( i );\r\n\r\n\t\t\t\t\t\t// transform the normal to world space\r\n\t\t\t\t\t\tnormal.applyMatrix3( normalMatrixWorld ).normalize();\r\n\r\n\t\t\t\t\t\t// transform the normal to export format\r\n\t\t\t\t\t\toutput += 'vn ' + normal.x + ' ' + normal.y + ' ' + normal.z + '\\n';\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// faces\r\n\r\n\t\t\t\tif ( indices !== null ) {\r\n\r\n\t\t\t\t\tfor ( i = 0, l = indices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\tfor ( m = 0; m < 3; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tj = indices.getX( i + m ) + 1;\r\n\r\n\t\t\t\t\t\t\tface[ m ] = ( indexVertex + j ) + ( normals || uvs ? '/' + ( uvs ? ( indexVertexUvs + j ) : '' ) + ( normals ? '/' + ( indexNormals + j ) : '' ) : '' );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// transform the face to export format\r\n\t\t\t\t\t\toutput += 'f ' + face.join( ' ' ) + \"\\n\";\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( i = 0, l = vertices.count; i < l; i += 3 ) {\r\n\r\n\t\t\t\t\t\tfor ( m = 0; m < 3; m ++ ) {\r\n\r\n\t\t\t\t\t\t\tj = i + m + 1;\r\n\r\n\t\t\t\t\t\t\tface[ m ] = ( indexVertex + j ) + ( normals || uvs ? '/' + ( uvs ? ( indexVertexUvs + j ) : '' ) + ( normals ? '/' + ( indexNormals + j ) : '' ) : '' );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\t// transform the face to export format\r\n\t\t\t\t\t\toutput += 'f ' + face.join( ' ' ) + \"\\n\";\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.OBJExporter.parseMesh(): geometry type unsupported', geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// update index\r\n\t\t\tindexVertex += nbVertex;\r\n\t\t\tindexVertexUvs += nbVertexUvs;\r\n\t\t\tindexNormals += nbNormals;\r\n\r\n\t\t};\r\n\r\n\t\tvar parseLine = function ( line ) {\r\n\r\n\t\t\tvar nbVertex = 0;\r\n\r\n\t\t\tvar geometry = line.geometry;\r\n\t\t\tvar type = line.type;\r\n\r\n\t\t\tif ( geometry instanceof Geometry ) {\r\n\r\n\t\t\t\tgeometry = new BufferGeometry().setFromObject( line );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( geometry instanceof BufferGeometry ) {\r\n\r\n\t\t\t\t// shortcuts\r\n\t\t\t\tvar vertices = geometry.getAttribute( 'position' );\r\n\r\n\t\t\t\t// name of the line object\r\n\t\t\t\toutput += 'o ' + line.name + '\\n';\r\n\r\n\t\t\t\tif ( vertices !== undefined ) {\r\n\r\n\t\t\t\t\tfor ( i = 0, l = vertices.count; i < l; i ++, nbVertex ++ ) {\r\n\r\n\t\t\t\t\t\tvertex.x = vertices.getX( i );\r\n\t\t\t\t\t\tvertex.y = vertices.getY( i );\r\n\t\t\t\t\t\tvertex.z = vertices.getZ( i );\r\n\r\n\t\t\t\t\t\t// transform the vertex to world space\r\n\t\t\t\t\t\tvertex.applyMatrix4( line.matrixWorld );\r\n\r\n\t\t\t\t\t\t// transform the vertex to export format\r\n\t\t\t\t\t\toutput += 'v ' + vertex.x + ' ' + vertex.y + ' ' + vertex.z + '\\n';\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( type === 'Line' ) {\r\n\r\n\t\t\t\t\toutput += 'l ';\r\n\r\n\t\t\t\t\tfor ( j = 1, l = vertices.count; j <= l; j ++ ) {\r\n\r\n\t\t\t\t\t\toutput += ( indexVertex + j ) + ' ';\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\toutput += '\\n';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( type === 'LineSegments' ) {\r\n\r\n\t\t\t\t\tfor ( j = 1, k = j + 1, l = vertices.count; j < l; j += 2, k = j + 1 ) {\r\n\r\n\t\t\t\t\t\toutput += 'l ' + ( indexVertex + j ) + ' ' + ( indexVertex + k ) + '\\n';\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tconsole.warn( 'THREE.OBJExporter.parseLine(): geometry type unsupported', geometry );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// update index\r\n\t\t\tindexVertex += nbVertex;\r\n\r\n\t\t};\r\n\r\n\t\tobject.traverse( function ( child ) {\r\n\r\n\t\t\tif ( child instanceof Mesh ) {\r\n\r\n\t\t\t\tparseMesh( child );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( child instanceof Line ) {\r\n\r\n\t\t\t\tparseLine( child );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\r\n\t\treturn output;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { OBJExporter };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/exporters/OBJExporter.js","<template>\r\n    <div class=\"miscExporterObj-container\">\r\n        <div id=\"info\">\r\n\t\t\t<a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> webgl - exporter - obj<br /><br />\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"addGeometry(1)\">triangle</el-button>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"addGeometry(2)\">cube</el-button>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"addGeometry(3)\">cylinder</el-button>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"addGeometry(4)\">multiple</el-button>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"addGeometry(5)\">transformed</el-button>\r\n\t\t\t<br /><br />\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"exportToObj()\">export to obj</el-button>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { OBJExporter } from '@/components/jsm/exporters/OBJExporter.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            camera: null,\r\n            scene: null,\r\n            light: null,\r\n            renderer: null,\r\n            exportButton: null,\r\n            floatingDiv: null,\r\n            mouseX: 0,\r\n            mouseY: 0,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.init();\r\n\t\tthis.animate();\r\n    },\r\n    methods: {\r\n        exportToObj() {\r\n            var exporter = new OBJExporter();\r\n            var result = exporter.parse(this.scene);\r\n            this.floatingDiv.style.display = 'block';\r\n            this.floatingDiv.innerHTML = result.split('\\n').join('<br />');\r\n        },\r\n        addGeometry(type) {\r\n            for (var i = 0; i < this.scene.children.length; i ++) {\r\n                var child = this.scene.children[ i ];\r\n                if (child.isMesh) {\r\n                    child.geometry.dispose();\r\n                    this.scene.remove(child);\r\n                    i --;\r\n                }\r\n            }\r\n            if (type === 1) {\r\n                var material = new this.$THREE.MeshLambertMaterial({ color: 0x00cc00 });\r\n                var geometry = this.generateTriangleGeometry();\r\n                this.scene.add(new this.$THREE.Mesh(geometry, material));\r\n            } else if (type === 2) {\r\n                var material = new this.$THREE.MeshLambertMaterial({ color: 0x00cc00 });\r\n                var geometry = new this.$THREE.BoxBufferGeometry(100, 100, 100);\r\n                this.scene.add(new this.$THREE.Mesh(geometry, material));\r\n            } else if (type === 3) {\r\n                var material = new this.$THREE.MeshLambertMaterial({ color: 0x00cc00 });\r\n                var geometry = new this.$THREE.CylinderBufferGeometry(50, 50, 100, 30, 1);\r\n                this.scene.add(new this.$THREE.Mesh(geometry, material));\r\n            } else if (type === 4 || type === 5) {\r\n                var material = new this.$THREE.MeshLambertMaterial({ color: 0x00cc00 });\r\n                var geometry = this.generateTriangleGeometry();\r\n                var mesh = new this.$THREE.Mesh(geometry, material);\r\n                mesh.position.x = - 200;\r\n                this.scene.add(mesh);\r\n                var geometry2 = new this.$THREE.BoxBufferGeometry(100, 100, 100);\r\n                var mesh2 = new this.$THREE.Mesh(geometry2, material);\r\n                this.scene.add(mesh2);\r\n                var geometry3 = new this.$THREE.CylinderBufferGeometry(50, 50, 100, 30, 1);\r\n                var mesh3 = new this.$THREE.Mesh(geometry3, material);\r\n                mesh3.position.x = 200;\r\n                this.scene.add(mesh3);\r\n                if (type === 5) {\r\n                    mesh.rotation.y = Math.PI / 4.0;\r\n                    mesh2.rotation.y = Math.PI / 4.0;\r\n                    mesh3.rotation.y = Math.PI / 4.0;\r\n                }\r\n            }\r\n        },\r\n        init() {\r\n            this.renderer = new this.$THREE.WebGLRenderer();\r\n            this.renderer.setPixelRatio(window.devicePixelRatio);\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight);\r\n            document.getElementsByClassName('miscExporterObj-container')[0].appendChild(this.renderer.domElement);\r\n            this.camera = new this.$THREE.PerspectiveCamera(70, this.$webglInnerWidth / window.innerHeight, 1, 1000);\r\n            this.camera.position.set(0, 0, 400);\r\n            this.scene = new this.$THREE.Scene();\r\n            this.light = new this.$THREE.DirectionalLight(0xffffff);\r\n            this.scene.add(this.light);\r\n            this.addGeometry(1);\r\n            window.addEventListener('click', this.onWindowClick, false);\r\n            window.addEventListener('resize', this.onWindowResize, false);\r\n            document.addEventListener('mousemove', this.onDocumentMouseMove, false);\r\n            document.addEventListener('mouseover', this.onDocumentMouseMove, false);\r\n            this.exportButton = document.getElementById('export');\r\n            this.floatingDiv = document.createElement('div');\r\n            this.floatingDiv.className = 'floating';\r\n            document.getElementsByClassName('miscExporterObj-container')[0].appendChild(this.floatingDiv);\r\n        },\r\n        onWindowClick(event) {\r\n            var needToClose = true;\r\n            var target = event.target;\r\n            while (target !== null) {\r\n                if (target === this.floatingDiv || target === this.exportButton) {\r\n                    needToClose = false;\r\n                    break;\r\n                }\r\n                target = target.parentElement;\r\n            }\r\n            if (needToClose) {\r\n                this.floatingDiv.style.display = 'none';\r\n            }\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n        },\r\n        onDocumentMouseMove(event) {\r\n            var windowHalfX = (window.innerWidth - 281) / 2;\r\n            var windowHalfY = window.innerHeight / 2;\r\n            this.mouseX = (event.clientX - windowHalfX) / 2;\r\n            this.mouseY = (event.clientY - windowHalfY) / 2;\r\n        },\r\n        animate() {\r\n            requestAnimationFrame(this.animate);\r\n            this.camera.position.x += (this.mouseX - this.camera.position.x) * 0.05;\r\n            this.camera.position.y += (- this.mouseY - this.camera.position.y) * 0.05;\r\n            this.camera.lookAt(this.scene.position);\r\n            this.light.position.set(this.camera.position.x, this.camera.position.y, this.camera.position.z).normalize();\r\n            this.renderer.render(this.scene, this.camera);\r\n        },\r\n        generateTriangleGeometry() {\r\n            var geometry = new this.$THREE.BufferGeometry();\r\n            var vertices = [];\r\n            vertices.push(- 50, - 50, 0);\r\n            vertices.push(50, - 50, 0);\r\n            vertices.push(50, 50, 0);\r\n            geometry.setAttribute('position', new this.$THREE.Float32BufferAttribute(vertices, 3));\r\n            geometry.computeVertexNormals();\r\n            return geometry;\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.miscExporterObj-contaeiner {\r\n    width: 100%;\r\n}\r\n.floating {\r\n    background : #000000;\r\n    opacity : 0.8;\r\n    width : 80%;\r\n    height : 80%;\r\n    position : absolute;\r\n    left : 10%;\r\n    top : 10%;\r\n    border : 1px solid #555555;\r\n    padding : 10px;\r\n    display : none;\r\n    overflow : auto;\r\n    z-index: 100;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/misc/miscExporterObj.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"miscExporterObj-container\"},[_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" webgl - exporter - obj\"),_c('br'),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.addGeometry(1)}}},[_vm._v(\"triangle\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.addGeometry(2)}}},[_vm._v(\"cube\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.addGeometry(3)}}},[_vm._v(\"cylinder\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.addGeometry(4)}}},[_vm._v(\"multiple\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.addGeometry(5)}}},[_vm._v(\"transformed\")]),_vm._v(\" \"),_c('br'),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":function($event){return _vm.exportToObj()}}},[_vm._v(\"export to obj\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2db65f1c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/misc/miscExporterObj.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2db65f1c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./miscExporterObj.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./miscExporterObj.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./miscExporterObj.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2db65f1c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./miscExporterObj.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2db65f1c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/misc/miscExporterObj.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}