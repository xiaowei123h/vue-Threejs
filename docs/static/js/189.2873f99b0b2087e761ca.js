webpackJsonp([189],{"8mxh":function(t,e){},Xasx:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("QEtz"),r={data:function(){return{vs:null,fs:null,scene:null,camera:null,renderer:null,geometry:null,mesh:null,material:null,mouse:null,center:null,gui:null}},mounted:function(){this.vs="\n            uniform sampler2D map;\n\t\t\tuniform float width;\n\t\t\tuniform float height;\n\t\t\tuniform float nearClipping, farClipping;\n\t\t\tuniform float pointSize;\n\t\t\tuniform float zOffset;\n\t\t\tvarying vec2 vUv;\n\t\t\tconst float XtoZ = 1.11146; // tan( 1.0144686 / 2.0 ) * 2.0;\n\t\t\tconst float YtoZ = 0.83359; // tan( 0.7898090 / 2.0 ) * 2.0;\n\t\t\tvoid main() {\n\t\t\t\tvUv = vec2( position.x / width, position.y / height );\n\t\t\t\tvec4 color = texture2D( map, vUv );\n\t\t\t\tfloat depth = ( color.r + color.g + color.b ) / 3.0;\n\t\t\t\t// Projection code by @kcmic\n\t\t\t\tfloat z = ( 1.0 - depth ) * (farClipping - nearClipping) + nearClipping;\n\t\t\t\tvec4 pos = vec4(\n\t\t\t\t\t( position.x / width - 0.5 ) * z * XtoZ,\n\t\t\t\t\t( position.y / height - 0.5 ) * z * YtoZ,\n\t\t\t\t\t- z + zOffset,\n\t\t\t\t\t1.0);\n\t\t\t\tgl_PointSize = pointSize;\n\t\t\t\tgl_Position = projectionMatrix * modelViewMatrix * pos;\n\t\t\t}",this.fs="\n            uniform sampler2D map;\n\t\t\tvarying vec2 vUv;\n\t\t\tvoid main() {\n\t\t\t\tvec4 color = texture2D( map, vUv );\n\t\t\t\tgl_FragColor = vec4( color.r, color.g, color.b, 0.2 );\n\t\t\t}",this.init(),this.animate()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var t=document.createElement("div");document.getElementsByClassName("webglVideoKinect-container")[0].appendChild(t);var e=document.createElement("div");e.id="info",e.innerHTML='<a href="https://threejs.org" target="_blank" rel="noopener">three.js</a> - kinect',document.getElementsByClassName("webglVideoKinect-container")[0].appendChild(e),this.camera=new this.$THREE.PerspectiveCamera(50,this.$webglInnerWidth/window.innerHeight,1,1e4),this.camera.position.set(0,0,500),this.scene=new this.$THREE.Scene,this.center=new this.$THREE.Vector3,this.center.z=-1e3;var i=document.getElementById("video"),r=new this.$THREE.VideoTexture(i);r.minFilter=this.$THREE.NearestFilter;this.geometry=new this.$THREE.BufferGeometry;for(var o=new Float32Array(921600),s=0,a=0,l=o.length;s<l;s+=3,a++)o[s]=a%640,o[s+1]=Math.floor(a/640);this.geometry.setAttribute("position",new this.$THREE.BufferAttribute(o,3)),this.material=new this.$THREE.ShaderMaterial({uniforms:{map:{value:r},width:{value:640},height:{value:480},nearClipping:{value:850},farClipping:{value:4e3},pointSize:{value:2},zOffset:{value:1e3}},vertexShader:this.vs,fragmentShader:this.fs,blending:this.$THREE.AdditiveBlending,depthTest:!1,depthWrite:!1,transparent:!0}),this.mesh=new this.$THREE.Points(this.geometry,this.material),this.scene.add(this.mesh),this.gui=new n.a,this.gui.add(this.material.uniforms.nearClipping,"value",1,1e4,1).name("nearClipping"),this.gui.add(this.material.uniforms.farClipping,"value",1,1e4,1).name("farClipping"),this.gui.add(this.material.uniforms.pointSize,"value",1,10,1).name("pointSize"),this.gui.add(this.material.uniforms.zOffset,"value",0,4e3,1).name("zOffset"),i.play(),this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),t.appendChild(this.renderer.domElement),this.mouse=new this.$THREE.Vector3(0,0,1),document.addEventListener("mousemove",this.onDocumentMouseMove,!1),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},onDocumentMouseMove:function(t){this.mouse.x=8*(t.clientX-(window.innerWidth-281)/2),this.mouse.y=8*(t.clientY-window.innerHeight/2)},animate:function(){requestAnimationFrame(this.animate),this.render()},render:function(){this.camera.position.x+=.05*(this.mouse.x-this.camera.position.x),this.camera.position.y+=.05*(-this.mouse.y-this.camera.position.y),this.camera.lookAt(this.center),this.renderer.render(this.scene,this.camera)}}},o={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"webglVideoKinect-container"},[e("video",{staticStyle:{display:"none"},attrs:{id:"video",loop:"",muted:"",crossOrigin:"anonymous",playsinline:""},domProps:{muted:!0}},[e("source",{attrs:{src:"static/textures/kinect.webm"}}),this._v(" "),e("source",{attrs:{src:"static/textures/kinect.mp4"}})])])},staticRenderFns:[]};var s=i("VU/8")(r,o,!1,function(t){i("8mxh")},"data-v-193da84d",null);e.default=s.exports}});
//# sourceMappingURL=189.2873f99b0b2087e761ca.js.map