webpackJsonp([195],{"7SeE":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("QEtz"),s=i("wIBv"),a=i("W171"),r=i("wCDB"),o=i("IW8f"),l={data:function(){return{gui:null,stats:null,mesh:null,camera:null,scene:null,renderer:null,effect:null,helper:null,ikHelper:null,physicsHelper:null,clock:null}},mounted:function(){var e=this;this.clock=new this.$moduleTHREE.Clock,Ammo().then(function(t){Ammo=t,e.init(),e.animate()})},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var e=document.createElement("div");document.getElementsByClassName("webglLoaderMmd-container")[0].appendChild(e),this.camera=new this.$moduleTHREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,1,2e3),this.camera.position.z=30,this.scene=new this.$moduleTHREE.Scene,this.scene.background=new this.$moduleTHREE.Color(16777215);var t=new this.$moduleTHREE.PolarGridHelper(30,10);t.position.y=-10,this.scene.add(t);var i=new this.$moduleTHREE.AmbientLight(6710886);this.scene.add(i);var l=new this.$moduleTHREE.DirectionalLight(8943462);l.position.set(-1,1,1).normalize(),this.scene.add(l),this.renderer=new this.$moduleTHREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),e.appendChild(this.renderer.domElement),this.effect=new a.a(this.renderer),this.stats=new this.$Stats,this.stats.dom.style.left="280px",e.appendChild(this.stats.dom);this.helper=new o.a({afterglow:2});var d=this;(new r.a).loadWithAnimation("static/models/mmd/miku/miku_v2.pmd",["static/models/mmd/vmds/wavefile_v2.vmd"],function(e){var t;d.mesh=e.mesh,d.mesh.position.y=-10,d.scene.add(d.mesh),d.helper.add(d.mesh,{animation:e.animation,physics:!0}),d.ikHelper=d.helper.objects.get(d.mesh).ikSolver.createHelper(),d.ikHelper.visible=!1,d.scene.add(d.ikHelper),d.physicsHelper=d.helper.objects.get(d.mesh).physics.createHelper(),d.physicsHelper.visible=!1,d.scene.add(d.physicsHelper),t={animation:!0,ik:!0,outline:!0,physics:!0,"show IK bones":!1,"show rigid bodies":!1},d.gui=new n.a,d.gui.add(t,"animation").onChange(function(){d.helper.enable("animation",t.animation)}),d.gui.add(t,"ik").onChange(function(){d.helper.enable("ik",t.ik)}),d.gui.add(t,"outline").onChange(function(){d.effect.enabled=t.outline}),d.gui.add(t,"physics").onChange(function(){d.helper.enable("physics",t.physics)}),d.gui.add(t,"show IK bones").onChange(function(){d.ikHelper.visible=t["show IK bones"]}),d.gui.add(t,"show rigid bodies").onChange(function(){void 0!==d.physicsHelper&&(d.physicsHelper.visible=t["show rigid bodies"])})},function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(Math.round(t,2)+"% downloaded")}},null);var h=new s.b(this.camera,this.renderer.domElement);h.minDistance=10,h.maxDistance=100,window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.camera.aspect=(window.innerWidth-281)/window.innerHeight,this.camera.updateProjectionMatrix(),this.effect.setSize(window.innerWidth-281,window.innerHeight)},animate:function(){requestAnimationFrame(this.animate),this.stats.begin(),this.render(),this.stats.end()},render:function(){this.helper.update(this.clock.getDelta()),this.effect.render(this.scene,this.camera)}}},d={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"webglLoaderMmd-container"},[i("div",{attrs:{id:"info"}},[i("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[e._v("three.js")]),e._v(" - MMDLoader test"),i("br"),e._v(" "),i("a",{attrs:{href:"https://github.com/mrdoob/three.js/tree/master/examples/models/mmd#readme",target:"_blank",rel:"noopener"}},[e._v("MMD Assets license")]),i("br"),e._v("\n            Copyright\n            "),i("a",{attrs:{href:"https://sites.google.com/view/evpvp/",target:"_blank",rel:"noopener"}},[e._v("Model Data")]),e._v(" "),i("a",{attrs:{href:"http://www.nicovideo.jp/watch/sm13147122",target:"_blank",rel:"noopener"}},[e._v("Dance Data")])])])}]};var h=i("VU/8")(l,d,!1,function(e){i("yuyt")},"data-v-5c5b19ae",null);t.default=h.exports},yuyt:function(e,t){}});
//# sourceMappingURL=195.41d7a621bb5460c94109.js.map