webpackJsonp([198],{B6uN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{container:null,stats:null,camera:null,scene:null,renderer:null,mesh:null,instances:5e3,moveQ:null,tmpQ:null,tmpM:null,currentM:null,lastTime:0}},mounted:function(){this.moveQ=new this.$THREE.Quaternion(.5,.5,.5,0).normalize(),this.tmpQ=new this.$THREE.Quaternion,this.tmpM=new this.$THREE.Matrix4,this.currentM=new this.$THREE.Matrix4,this.init(),this.animate()},methods:{init:function(){this.container=document.getElementById("container"),this.camera=new this.$THREE.PerspectiveCamera(50,this.$webglInnerWidth/window.innerHeight,1,1e3),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(1052688);var e=new this.$THREE.InstancedBufferGeometry,t=new this.$THREE.InterleavedBuffer(new Float32Array([-1,1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,-1,-1,1,0,0,1,0,0,1,-1,1,0,1,1,0,0,1,1,-1,0,1,0,0,0,-1,1,-1,0,0,0,0,0,1,-1,-1,0,1,1,0,0,-1,-1,-1,0,0,1,0,0,-1,1,-1,0,1,1,0,0,-1,1,1,0,1,0,0,0,-1,-1,-1,0,0,1,0,0,-1,-1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,1,1,-1,0,1,1,0,0,1,-1,1,0,0,0,0,0,1,-1,-1,0,0,1,0,0,-1,1,1,0,0,0,0,0,1,1,1,0,1,0,0,0,-1,1,-1,0,0,1,0,0,1,1,-1,0,1,1,0,0,1,-1,1,0,1,0,0,0,-1,-1,1,0,0,0,0,0,1,-1,-1,0,1,1,0,0,-1,-1,-1,0,0,1,0,0]),8),n=new this.$THREE.InterleavedBufferAttribute(t,3,0);e.setAttribute("position",n);var i=new this.$THREE.InterleavedBufferAttribute(t,2,4);e.setAttribute("uv",i);var s=new Uint16Array([0,2,1,2,3,1,4,6,5,6,7,5,8,10,9,10,11,9,12,14,13,14,15,13,16,17,18,18,17,19,20,21,22,22,21,23]);e.setIndex(new this.$THREE.BufferAttribute(s,1));var r=new this.$THREE.MeshBasicMaterial;r.map=(new this.$THREE.TextureLoader).load("textures/crate.gif"),r.map.flipY=!1;var a,h,o,d,l=new this.$THREE.Matrix4,c=new this.$THREE.Vector3,m=new this.$THREE.Quaternion,u=new this.$THREE.Vector3(1,1,1);this.mesh=new this.$THREE.InstancedMesh(e,r,this.instances);for(var E=0;E<this.instances;E++)a=100*Math.random()-50,h=100*Math.random()-50,o=100*Math.random()-50,c.set(a,h,o).normalize(),c.multiplyScalar(5),c.set(a+c.x,h+c.y,o+c.z),a=2*Math.random()-1,h=2*Math.random()-1,o=2*Math.random()-1,d=2*Math.random()-1,m.set(a,h,o,d).normalize(),l.compose(c,m,u),this.mesh.setMatrixAt(E,l);this.scene.add(this.mesh),this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),!1!==this.renderer.capabilities.isWebGL2||!1!==this.renderer.extensions.has("ANGLE_instanced_arrays")?(this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1)):document.getElementById("notSupported").style.display=""},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){var e=performance.now();this.mesh.rotation.y=5e-5*e;var t=(e-this.lastTime)/5e3;this.tmpQ.set(this.moveQ.x*t,this.moveQ.y*t,this.moveQ.z*t,1).normalize(),this.tmpM.makeRotationFromQuaternion(this.tmpQ);for(var n=0,i=this.instances;n<i;n++)this.mesh.getMatrixAt(n,this.currentM),this.currentM.multiply(this.tmpM),this.mesh.setMatrixAt(n,this.currentM);this.mesh.instanceMatrix.needsUpdate=!0,this.lastTime=e,this.renderer.render(this.scene,this.camera)}}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglBuffergeometryInstancingInterleaved-container"},[t("div",{attrs:{id:"container"}}),this._v(" "),t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - indexed instancing (single box): null,\n        interleaved buffers\n        "),t("div",{staticStyle:{display:"none"},attrs:{id:"notSupported"}},[this._v("Sorry your graphics card + browser does not support hardware instancing")])])])}]};var r=n("VU/8")(i,s,!1,function(e){n("FtVl")},"data-v-22bcb971",null);t.default=r.exports},FtVl:function(e,t){}});
//# sourceMappingURL=198.9a077e0d95bbbc8f9201.js.map