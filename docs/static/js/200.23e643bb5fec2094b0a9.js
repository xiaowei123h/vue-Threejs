webpackJsonp([200],{FCBf:function(e,t){},M599:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("6+nK"),i=function(e,t,n){var i=new r.Plane,o=new r.Raycaster,s=new r.Vector2,a=new r.Vector3,c=new r.Vector3,h=new r.Vector3,d=new r.Matrix4,l=[],u=null,m=null,p=this;function v(){n.addEventListener("mousemove",w,!1),n.addEventListener("mousedown",E,!1),n.addEventListener("mouseup",g,!1),n.addEventListener("mouseleave",g,!1),n.addEventListener("touchmove",y,!1),n.addEventListener("touchstart",b,!1),n.addEventListener("touchend",j,!1)}function f(){n.removeEventListener("mousemove",w,!1),n.removeEventListener("mousedown",E,!1),n.removeEventListener("mouseup",g,!1),n.removeEventListener("mouseleave",g,!1),n.removeEventListener("touchmove",y,!1),n.removeEventListener("touchstart",b,!1),n.removeEventListener("touchend",j,!1),n.style.cursor=""}function w(r){r.preventDefault();var v=n.getBoundingClientRect();if(s.x=(r.clientX-v.left)/v.width*2-1,s.y=-(r.clientY-v.top)/v.height*2+1,o.setFromCamera(s,t),u&&p.enabled)return o.ray.intersectPlane(i,c)&&u.position.copy(c.sub(a).applyMatrix4(d)),void p.dispatchEvent({type:"drag",object:u});if(l.length=0,o.setFromCamera(s,t),o.intersectObjects(e,!0,l),l.length>0){var f=l[0].object;i.setFromNormalAndCoplanarPoint(t.getWorldDirection(i.normal),h.setFromMatrixPosition(f.matrixWorld)),m!==f&&(p.dispatchEvent({type:"hoveron",object:f}),n.style.cursor="pointer",m=f)}else null!==m&&(p.dispatchEvent({type:"hoveroff",object:m}),n.style.cursor="auto",m=null)}function E(r){r.preventDefault(),l.length=0,o.setFromCamera(s,t),o.intersectObjects(e,!0,l),l.length>0&&(u=!0===p.transformGroup?e[0]:l[0].object,o.ray.intersectPlane(i,c)&&(d.copy(u.parent.matrixWorld).invert(),a.copy(c).sub(h.setFromMatrixPosition(u.matrixWorld))),n.style.cursor="move",p.dispatchEvent({type:"dragstart",object:u}))}function g(e){e.preventDefault(),u&&(p.dispatchEvent({type:"dragend",object:u}),u=null),n.style.cursor=m?"pointer":"auto"}function y(e){e.preventDefault(),e=e.changedTouches[0];var r=n.getBoundingClientRect();if(s.x=(e.clientX-r.left)/r.width*2-1,s.y=-(e.clientY-r.top)/r.height*2+1,o.setFromCamera(s,t),u&&p.enabled)return o.ray.intersectPlane(i,c)&&u.position.copy(c.sub(a).applyMatrix4(d)),void p.dispatchEvent({type:"drag",object:u})}function b(r){r.preventDefault(),r=r.changedTouches[0];var m=n.getBoundingClientRect();s.x=(r.clientX-m.left)/m.width*2-1,s.y=-(r.clientY-m.top)/m.height*2+1,l.length=0,o.setFromCamera(s,t),o.intersectObjects(e,!0,l),l.length>0&&(u=!0===p.transformGroup?e[0]:l[0].object,i.setFromNormalAndCoplanarPoint(t.getWorldDirection(i.normal),h.setFromMatrixPosition(u.matrixWorld)),o.ray.intersectPlane(i,c)&&(d.copy(u.parent.matrixWorld).invert(),a.copy(c).sub(h.setFromMatrixPosition(u.matrixWorld))),n.style.cursor="move",p.dispatchEvent({type:"dragstart",object:u}))}function j(e){e.preventDefault(),u&&(p.dispatchEvent({type:"dragend",object:u}),u=null),n.style.cursor="auto"}v(),this.enabled=!0,this.transformGroup=!1,this.activate=v,this.deactivate=f,this.dispose=function(){f()},this.getObjects=function(){return e}};function o(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(i.prototype=Object.create(r.EventDispatcher.prototype)).constructor=i;var s={data:function(){return{container:null,camera:null,scene:null,renderer:null,controls:null,group:null,enableSelection:!1,objects:[],mouse:null,raycaster:null}},mounted:function(){this.mouse=new this.$THREE.Vector2,this.raycaster=new this.$THREE.Raycaster,this.init()},methods:{init:function(){this.container=document.createElement("div"),document.getElementsByClassName("miscControlsDrag-container")[0].appendChild(this.container),this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,1,5e3),this.camera.position.z=1e3,this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(15790320),this.scene.add(new this.$THREE.AmbientLight(5263440));var e=new this.$THREE.SpotLight(16777215,1.5);e.position.set(0,500,2e3),e.angle=Math.PI/9,e.castShadow=!0,e.shadow.camera.near=1e3,e.shadow.camera.far=4e3,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,this.scene.add(e),this.group=new this.$THREE.Group,this.scene.add(this.group);for(var t=new this.$THREE.BoxBufferGeometry(40,40,40),n=0;n<200;n++){var r=new this.$THREE.Mesh(t,new this.$THREE.MeshLambertMaterial({color:16777215*Math.random()}));r.position.x=1e3*Math.random()-500,r.position.y=600*Math.random()-300,r.position.z=800*Math.random()-400,r.rotation.x=2*Math.random()*Math.PI,r.rotation.y=2*Math.random()*Math.PI,r.rotation.z=2*Math.random()*Math.PI,r.scale.x=2*Math.random()+1,r.scale.y=2*Math.random()+1,r.scale.z=2*Math.random()+1,r.castShadow=!0,r.receiveShadow=!0,this.scene.add(r),this.objects.push(r)}this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=this.$THREE.PCFShadowMap,this.container.appendChild(this.renderer.domElement),this.controls=new i([].concat(o(this.objects)),this.camera,this.renderer.domElement),this.controls.addEventListener("drag",this.render),window.addEventListener("resize",this.onWindowResize,!1),document.addEventListener("click",this.onClick,!1),window.addEventListener("keydown",this.onKeyDown,!1),window.addEventListener("keyup",this.onKeyUp,!1),this.render()},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},onKeyDown:function(e){this.enableSelection=16===e.keyCode},onKeyUp:function(){this.enableSelection=!1},onClick:function(e){if(e.preventDefault(),!0===this.enableSelection){var t=this.controls.getObjects();t.length=0,this.mouse.x=e.clientX/this.$webglInnerWidth*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,camera);var n=this.raycaster.intersectObjects(this.objects,!0);if(n.length>0){var r=n[0].object;!0===this.group.children.includes(r)?(r.material.emissive.set(0),this.scene.attach(r)):(r.material.emissive.set(11184810),this.group.attach(r)),this.controls.transformGroup=!0,t.push(this.group)}0===this.group.children.length&&(this.controls.transformGroup=!1,t.push.apply(t,o(this.objects)))}this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"miscControlsDrag-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" webgl - drag controls"),t("br"),this._v('\n\t\t\tUse "Shift+Click" to add/remove objects to/from a group.'),t("br"),this._v("\n\t\t\tGrouped objects can be transformed as a union.\n\t\t")])])}]};var c=n("VU/8")(s,a,!1,function(e){n("FCBf")},"data-v-5b558af8",null);t.default=c.exports}});
//# sourceMappingURL=200.23e643bb5fec2094b0a9.js.map