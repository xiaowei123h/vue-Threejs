webpackJsonp([206],{B6bD:function(e,t){},JS46:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("wIBv"),n=r("6+nK"),i=r("w45l"),s=function(e){n._21.call(this,e),this.availableExtensions=[]};s.prototype=Object.assign(Object.create(n._21.prototype),{constructor:s,load:function(e,t,r,a){var i=this,s=new n.S(i.manager);s.setPath(i.path),s.setResponseType("arraybuffer"),s.setRequestHeader(i.requestHeader),s.setWithCredentials(i.withCredentials),s.load(e,function(r){try{t(i.parse(r))}catch(t){a?a(t):console.error(t),i.manager.itemError(e)}},r,a)},parse:function(e){var t=this,r=new n._92(this.manager);function a(e){for(var t=[],r=(new DOMParser).parseFromString(e,"application/xml").querySelectorAll("Relationship"),a=0;a<r.length;a++){var n=r[a],i={target:n.getAttribute("Target"),id:n.getAttribute("Id"),type:n.getAttribute("Type")};t.push(i)}return t}function s(e){for(var t={id:e.getAttribute("id"),basematerials:[]},r=e.querySelectorAll("base"),a=0;a<r.length;a++){var n=c(r[a]);n.index=a,t.basematerials.push(n)}return t}function o(e){for(var t={id:e.getAttribute("id"),texid:e.getAttribute("texid"),displaypropertiesid:e.getAttribute("displaypropertiesid")},r=e.querySelectorAll("tex2coord"),a=[],n=0;n<r.length;n++){var i=r[n],s=i.getAttribute("u"),o=i.getAttribute("v");a.push(parseFloat(s),parseFloat(o))}return t.uvs=new Float32Array(a),t}function l(e){for(var t={id:e.getAttribute("id"),displaypropertiesid:e.getAttribute("displaypropertiesid")},r=e.querySelectorAll("color"),a=[],i=new n.r,s=0;s<r.length;s++){var o=r[s].getAttribute("color");i.setStyle(o.substring(0,7)),i.convertSRGBToLinear(),a.push(i.r,i.g,i.b)}return t.colors=new Float32Array(a),t}function u(e){for(var t={id:e.getAttribute("id")},r=e.querySelectorAll("pbmetallic"),a=[],n=0;n<r.length;n++){var i=r[n];a.push({name:i.getAttribute("name"),metallicness:parseFloat(i.getAttribute("metallicness")),roughness:parseFloat(i.getAttribute("roughness"))})}return t.data=a,t}function c(e){var t={};return t.name=e.getAttribute("name"),t.displaycolor=e.getAttribute("displaycolor"),t.displaypropertiesid=e.getAttribute("displaypropertiesid"),t}function p(e){var t={};t.objectId=e.getAttribute("objectid");var r=e.getAttribute("transform");return r&&(t.transform=d(r)),t}function d(e){var t=[];e.split(" ").forEach(function(e){t.push(parseFloat(e))});var r=new n._28;return r.set(t[0],t[3],t[6],t[9],t[1],t[4],t[7],t[10],t[2],t[5],t[8],t[11],0,0,0,1),r}function h(e){var t={type:e.getAttribute("type")},r=e.getAttribute("id");r&&(t.id=r);var a=e.getAttribute("pid");a&&(t.pid=a);var n=e.getAttribute("pindex");n&&(t.pindex=n);var i=e.getAttribute("thumbnail");i&&(t.thumbnail=i);var s=e.getAttribute("partnumber");s&&(t.partnumber=s);var o=e.getAttribute("name");o&&(t.name=o);var l=e.querySelector("mesh");l&&(t.mesh=function(e){for(var t={},r=[],a=e.querySelectorAll("vertices vertex"),n=0;n<a.length;n++){var i=a[n],s=i.getAttribute("x"),o=i.getAttribute("y"),l=i.getAttribute("z");r.push(parseFloat(s),parseFloat(o),parseFloat(l))}t.vertices=new Float32Array(r);var u=[],c=[],p=e.querySelectorAll("triangles triangle");for(n=0;n<p.length;n++){var d=p[n],h=d.getAttribute("v1"),v=d.getAttribute("v2"),g=d.getAttribute("v3"),f=d.getAttribute("p1"),b=d.getAttribute("p2"),m=d.getAttribute("p3"),w=d.getAttribute("pid"),y={};y.v1=parseInt(h,10),y.v2=parseInt(v,10),y.v3=parseInt(g,10),c.push(y.v1,y.v2,y.v3),f&&(y.p1=parseInt(f,10)),b&&(y.p2=parseInt(b,10)),m&&(y.p3=parseInt(m,10)),w&&(y.pid=w),0<Object.keys(y).length&&u.push(y)}return t.triangleProperties=u,t.triangles=new Uint32Array(c),t}(l));var u=e.querySelector("components");return u&&(t.components=function(e){for(var t=[],r=e.querySelectorAll("component"),a=0;a<r.length;a++){var n=p(r[a]);t.push(n)}return t}(u)),t}function v(e){var t={unit:e.getAttribute("unit")||"millimeter"},r=e.querySelectorAll("metadata");r&&(t.metadata=function(e){for(var t={},r=0;r<e.length;r++){var a=e[r],n=a.getAttribute("name");0<=["Title","Designer","Description","Copyright","LicenseTerms","Rating","CreationDate","ModificationDate"].indexOf(n)&&(t[n]=a.textContent)}return t}(r));var a=e.querySelector("resources");a&&(t.resources=function(e){for(var t={basematerials:{}},r=e.querySelectorAll("basematerials"),a=0;a<r.length;a++){var n=s(r[a]);t.basematerials[n.id]=n}t.texture2d={};var i,c=e.querySelectorAll("texture2d");for(a=0;a<c.length;a++){var p=c[a],d={id:(i=p).getAttribute("id"),path:i.getAttribute("path"),contenttype:i.getAttribute("contenttype"),tilestyleu:i.getAttribute("tilestyleu"),tilestylev:i.getAttribute("tilestylev"),filter:i.getAttribute("filter")};t.texture2d[d.id]=d}t.colorgroup={};var v=e.querySelectorAll("colorgroup");for(a=0;a<v.length;a++){var g=l(v[a]);t.colorgroup[g.id]=g}t.pbmetallicdisplayproperties={};var f=e.querySelectorAll("pbmetallicdisplayproperties");for(a=0;a<f.length;a++){var b=u(f[a]);t.pbmetallicdisplayproperties[b.id]=b}t.texture2dgroup={};var m=e.querySelectorAll("texture2dgroup");for(a=0;a<m.length;a++){var w=o(m[a]);t.texture2dgroup[w.id]=w}t.object={};var y=e.querySelectorAll("object");for(a=0;a<y.length;a++){var A=h(y[a]);t.object[A.id]=A}return t}(a));var n=e.querySelector("build");return n&&(t.build=function(e){for(var t=[],r=e.querySelectorAll("item"),a=0;a<r.length;a++){var n=r[a],i={objectId:n.getAttribute("objectid")},s=n.getAttribute("transform");s&&(i.transform=d(s)),t.push(i)}return t}(n)),t}function g(e,t,a,i){var s=e.texid,o=a.resources.texture2d[s];if(o){var l=i[o.path],u=o.contenttype,c=new Blob([l],{type:u}),p=URL.createObjectURL(c),d=r.load(p,function(){URL.revokeObjectURL(p)});switch(d.encoding=n._111,o.tilestyleu){case"wrap":d.wrapS=n._75;break;case"mirror":d.wrapS=n._37;break;case"none":case"clamp":d.wrapS=n.p;break;default:d.wrapS=n._75}switch(o.tilestylev){case"wrap":d.wrapT=n._75;break;case"mirror":d.wrapT=n._37;break;case"none":case"clamp":d.wrapT=n.p;break;default:d.wrapT=n._75}switch(o.filter){case"auto":d.magFilter=n._18,d.minFilter=n._19;break;case"linear":d.magFilter=n._18,d.minFilter=n._18;break;case"nearest":d.magFilter=n._38,d.minFilter=n._38;break;default:d.magFilter=n._18,d.minFilter=n._19}return d}return null}function f(e,t,r,a,i,s){for(var o=s.pindex,l={},u=0,c=t.length;u<c;u++){var p=void 0!==(S=t[u]).p1?S.p1:o;void 0===l[p]&&(l[p]=[]),l[p].push(S)}var d=Object.keys(l),h=[];for(u=0,c=d.length;u<c;u++){for(var v=d[u],g=l[v],f=x(e.basematerials[v],T,r,i,s,E),b=new n.m,m=[],w=a.vertices,y=0,A=g.length;y<A;y++){var S=g[y];m.push(w[3*S.v1+0]),m.push(w[3*S.v1+1]),m.push(w[3*S.v1+2]),m.push(w[3*S.v2+0]),m.push(w[3*S.v2+1]),m.push(w[3*S.v2+2]),m.push(w[3*S.v3+0]),m.push(w[3*S.v3+1]),m.push(w[3*S.v3+2])}b.setAttribute("position",new n.T(m,3));var _=new n._29(b,f);h.push(_)}return h}function b(e,t,r,a,i,s){for(var o=new n.m,l=[],u=[],c=a.vertices,p=e.uvs,d=0,h=t.length;d<h;d++){var v=t[d];l.push(c[3*v.v1+0]),l.push(c[3*v.v1+1]),l.push(c[3*v.v1+2]),l.push(c[3*v.v2+0]),l.push(c[3*v.v2+1]),l.push(c[3*v.v2+2]),l.push(c[3*v.v3+0]),l.push(c[3*v.v3+1]),l.push(c[3*v.v3+2]),u.push(p[2*v.p1+0]),u.push(p[2*v.p1+1]),u.push(p[2*v.p2+0]),u.push(p[2*v.p2+1]),u.push(p[2*v.p3+0]),u.push(p[2*v.p3+1])}o.setAttribute("position",new n.T(l,3)),o.setAttribute("uv",new n.T(u,2));var f=x(e,T,r,i,s,g),b=new n._34({map:f,flatShading:!0});return new n._29(o,b)}function m(e,t,r,a,i){for(var s=new n.m,o=[],l=[],u=a.vertices,c=e.colors,p=0,d=t.length;p<d;p++){var h=t[p],v=h.v1,g=h.v2,f=h.v3;o.push(u[3*v+0]),o.push(u[3*v+1]),o.push(u[3*v+2]),o.push(u[3*g+0]),o.push(u[3*g+1]),o.push(u[3*g+2]),o.push(u[3*f+0]),o.push(u[3*f+1]),o.push(u[3*f+2]);var b=void 0!==h.p1?h.p1:i.pindex,m=void 0!==h.p2?h.p2:b,w=void 0!==h.p3?h.p3:b;l.push(c[3*b+0]),l.push(c[3*b+1]),l.push(c[3*b+2]),l.push(c[3*m+0]),l.push(c[3*m+1]),l.push(c[3*m+2]),l.push(c[3*w+0]),l.push(c[3*w+1]),l.push(c[3*w+2])}s.setAttribute("position",new n.T(o,3)),s.setAttribute("color",new n.T(l,3));var y=new n._34({vertexColors:!0,flatShading:!0});return new n._29(s,y)}function w(e){var t=new n.m;t.setIndex(new n.l(e.triangles,1)),t.setAttribute("position",new n.l(e.vertices,3));var r=new n._34({color:11184895,flatShading:!0});return new n._29(t,r)}function y(e,t){return void 0!==t.resources.texture2dgroup[e]?"texture":void 0!==t.resources.basematerials[e]?"material":void 0!==t.resources.colorgroup[e]?"vertexColors":"default"===e?"default":void 0}function A(e,t,r,a,i){for(var s=new n.Y,o=function(e,t,r,a,n){for(var i=Object.keys(e),s=[],o=0,l=i.length;o<l;o++){var u=i[o],c=e[u];switch(y(u,t)){case"material":for(var p=f(t.resources.basematerials[u],c,t,r,a,n),d=0,h=p.length;d<h;d++)s.push(p[d]);break;case"texture":var v=t.resources.texture2dgroup[u];s.push(b(v,c,t,r,a,n));break;case"vertexColors":var g=t.resources.colorgroup[u];s.push(m(g,c,0,r,n));break;case"default":s.push(w(r));break;default:console.error("THREE.3MFLoader: Unsupported resource type.")}}return s}(function(e,t,r){for(var a={},n=t.triangleProperties,i=r.pid,s=0,o=n.length;s<o;s++){var l=n[s],u=void 0!==l.pid?l.pid:i;void 0===u&&(u="default"),void 0===a[u]&&(a[u]=[]),a[u].push(l)}return a}(0,e,i),r,e,a,i),l=0,u=o.length;l<u;l++)s.add(o[l]);return s}function x(e,t,r,a,n,i){return void 0!==e.build?e.build:(e.build=i(e,t,r,a,n),e.build)}function E(e,t,r){var a,i=e.displaypropertiesid,s=r.resources.pbmetallicdisplayproperties;if(null!==i&&void 0!==s[i]){var o=s[i].data[e.index];a=new n._36({flatShading:!0,roughness:o.roughness,metalness:o.metallicness})}else a=new n._34({flatShading:!0});a.name=e.name;var l=e.displaycolor,u=l.substring(0,7);return a.color.setStyle(u),a.color.convertSRGBToLinear(),9===l.length&&(a.opacity=parseInt(l.charAt(7)+l.charAt(8),16)/255),a}function S(e,t,r,a){for(var i=new n.Y,s=0;s<e.length;s++){var o=e[s],l=t[o.objectId];void 0===l&&(_(o.objectId,t,r,a),l=t[o.objectId]);var u=l.clone(),c=o.transform;c&&u.applyMatrix4(c),i.add(u)}return i}function _(e,r,a,n){var i=a.resources.object[e];if(i.mesh){var s=i.mesh;!function(e,r,a){if(e){for(var n=[],i=Object.keys(e),s=0;s<i.length;s++)for(var o=i[s],l=0;l<t.availableExtensions.length;l++)(u=t.availableExtensions[l]).ns===o&&n.push(u);for(s=0;s<n.length;s++){var u;(u=n[s]).apply(a,e[u.ns],r)}}}(a.extensions,s,a.xml),r[i.id]=x(s,r,a,n,i,A)}else{var o=i.components;r[i.id]=x(o,r,a,n,i,S)}}var R=function(e){var t,r,s,o,l=null,u=null,c=[],p=[],d=[],h=[],g={},f={};try{l=new i.a(e)}catch(e){if(e instanceof ReferenceError)return console.error("THREE.3MFLoader: jszip missing and file is compressed."),null}for(u in l.files)u.match(/\_rels\/.rels$/)?t=u:u.match(/3D\/_rels\/.*\.model\.rels$/)?r=u:u.match(/^3D\/.*\.model$/)?c.push(u):u.match(/^3D\/Metadata\/.*\.xml$/)?p.push(u):u.match(/^3D\/Textures?\/.*/)?d.push(u):u.match(/^3D\/Other\/.*/)&&h.push(u);var b=new Uint8Array(l.file(t).asArrayBuffer());s=a(n._22.decodeText(b)),r&&(b=new Uint8Array(l.file(r).asArrayBuffer()),o=a(n._22.decodeText(b)));for(var m=0;m<c.length;m++){var w=c[m],y=new Uint8Array(l.file(w).asArrayBuffer()),A=n._22.decodeText(y),x=(new DOMParser).parseFromString(A,"application/xml");"model"!==x.documentElement.nodeName.toLowerCase()&&console.error("THREE.3MFLoader: Error loading 3MF - no 3MF document found: ",w);var E=x.querySelector("model"),S={};for(m=0;m<E.attributes.length;m++){var _=E.attributes[m];_.name.match(/^xmlns:(.+)$/)&&(S[_.value]=RegExp.$1)}var R=v(E);R.xml=E,0<Object.keys(S).length&&(R.extensions=S),g[w]=R}for(m=0;m<d.length;m++){var T=d[m];f[T]=l.file(T).asArrayBuffer()}return{rels:s,modelRels:o,model:g,printTicket:{},texture:f,other:{}}}(e),T=function(e){var t=e.model,r=e.modelRels,a={},n=Object.keys(t),i={};if(r)for(var s=0,o=r.length;s<o;s++){var l=r[s],u=l.target.substring(1);e.texture[u]&&(i[l.target]=e.texture[u])}for(s=0;s<n.length;s++)for(var c=t[n[s]],p=Object.keys(c.resources.object),d=0;d<p.length;d++)_(p[d],a,c,i);return a}(R);return function(e,t){for(var r=new n.Y,a=t.rels[0],i=t.model[a.target.substring(1)].build,s=0;s<i.length;s++){var o=i[s],l=e[o.objectId],u=o.transform;u&&l.applyMatrix4(u),r.add(l)}return r}(T,R)},addExtension:function(e){this.availableExtensions.push(e)}});var o={data:function(){return{camera:null,scene:null,renderer:null}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(10526880),this.scene.fog=new this.$THREE.Fog(10526880,10,500),this.camera=new this.$THREE.PerspectiveCamera(35,this.$webglInnerWidth/window.innerHeight,1,500),this.camera.position.set(-50,40,50),this.scene.add(this.camera);var t=new this.$THREE.HemisphereLight(16777215,4473924);t.position.set(0,100,0),this.scene.add(t);var r=new this.$THREE.DirectionalLight(16777215);r.position.set(-0,40,50),r.castShadow=!0,r.shadow.camera.top=50,r.shadow.camera.bottom=-25,r.shadow.camera.left=-25,r.shadow.camera.right=25,r.shadow.camera.near=.1,r.shadow.camera.far=200,r.shadow.mapSize.set(1024,1024),this.scene.add(r);var n=new this.$THREE.LoadingManager;new s(n).load("static/models/3mf/truck.3mf",function(t){t.quaternion.setFromEuler(new e.$THREE.Euler(-Math.PI/2,0,0)),t.traverse(function(e){e.castShadow=!0}),e.scene.add(t)}),n.onLoad=function(){e.render()};var i=new this.$THREE.Mesh(new this.$THREE.PlaneBufferGeometry(1e3,1e3),new this.$THREE.MeshPhongMaterial({color:10066329,depthWrite:!1}));i.rotation.x=-Math.PI/2,i.position.y=11,i.receiveShadow=!0,this.scene.add(i),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=this.$THREE.PCFSoftShadowMap,document.getElementsByClassName("webglLoader3mfMaterials-container")[0].appendChild(this.renderer.domElement);var o=new a.a(this.camera,this.renderer.domElement);o.addEventListener("change",this.render),o.minDistance=50,o.maxDistance=200,o.enablePan=!1,o.target.set(0,20,0),o.update(),window.addEventListener("resize",this.onWindowResize,!1),this.render()},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoader3mfMaterials-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" -\n\t\t\t"),t("a",{attrs:{href:"http://3mf.io",target:"_blank",rel:"noopener"}},[this._v("3MF")]),this._v(" file with materials\n\t\t")])])}]};var u=r("VU/8")(o,l,!1,function(e){r("B6bD")},"data-v-0b5787d7",null);t.default=u.exports}});
//# sourceMappingURL=206.e33114119252e137bf67.js.map