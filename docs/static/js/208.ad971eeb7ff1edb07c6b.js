webpackJsonp([208],{"Lu/J":function(t,e){},mVPf:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n("wIBv"),i=n("qxm1"),a=n("Glcs"),s=n("85s5"),o=n("Z9IJ"),l=n("fD1D"),u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var c={defines:{USE_3DTEXTURE:1},uniforms:{lut3d:{value:null},lut:{value:null},lutSize:{value:0},tDiffuse:{value:null},intensity:{value:1}},vertexShader:"\n\n\t\tvarying vec2 vUv;\n\n\t\tvoid main() {\n\n\t\t\tvUv = uv;\n\t\t\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n\t\t}\n\n\t",fragmentShader:"\n\t\tprecision highp sampler3D;\n\n\t\t#if USE_3DTEXTURE\n\t\tuniform sampler3D lut3d;\n\t\t#else\n\t\tuniform sampler2D lut;\n\t\tuniform float lutSize;\n\n\t\tvec3 lutLookup( sampler2D tex, float size, vec3 rgb ) {\n\n\t\t\t// clamp the sample in by half a pixel to avoid interpolation\n\t\t\t// artifacts between slices laid out next to each other.\n\t\t\tfloat halfPixelWidth = 0.5 / size;\n\t\t\trgb.rg = clamp( rgb.rg, halfPixelWidth, 1.0 - halfPixelWidth );\n\n\t\t\t// green offset into a LUT layer\n\t\t\tfloat gOffset = rgb.g / size;\n\t\t\tvec2 uv1 = vec2( rgb.r, gOffset );\n\t\t\tvec2 uv2 = vec2( rgb.r, gOffset );\n\n\t\t\t// adjust b slice offset\n\t\t\tfloat bNormalized = size * rgb.b;\n\t\t\tfloat bSlice = min( floor( size * rgb.b ), size - 1.0 );\n\t\t\tfloat bMix = ( bNormalized - bSlice ) / size;\n\n\t\t\t// get the first lut slice and then the one to interpolate to\n\t\t\tfloat b1 = bSlice / size;\n\t\t\tfloat b2 = ( bSlice + 1.0 ) / size;\n\n\t\t\tuv1.y += b1;\n\t\t\tuv2.y += b2;\n\n\t\t\tvec3 sample1 = texture2D( tex, uv1 ).rgb;\n\t\t\tvec3 sample2 = texture2D( tex, uv2 ).rgb;\n\n\t\t\treturn mix( sample1, sample2, bMix );\n\n\t\t}\n\t\t#endif\n\n\t\tvarying vec2 vUv;\n\t\tuniform float intensity;\n\t\tuniform sampler2D tDiffuse;\n\t\tvoid main() {\n\n\t\t\tvec4 val = texture2D( tDiffuse, vUv );\n\t\t\tvec4 lutVal;\n\t\t\t#if USE_3DTEXTURE\n\t\t\tlutVal = vec4( texture( lut3d, val.rgb ).rgb, val.a );\n\t\t\t#else\n\t\t\tlutVal = vec4( lutLookup( lut, lutSize, val.rgb ), val.a );\n\t\t\t#endif\n\t\t\tgl_FragColor = mix( val, lutVal, intensity );\n\n\t\t}\n\n\t"},p=function(t){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,c));return n.lut=t.lut||null,n.intensity="intensity"in t?t.intensity:1,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,l["a"]),u(e,[{key:"lut",set:function(t){var e=this.material;if(t!==this.lut&&(e.uniforms.lut3d.value=null,e.uniforms.lut.value=null,t)){var n=t.isDataTexture3D?1:0;n!==e.defines.USE_3DTEXTURE&&(e.defines.USE_3DTEXTURE=n,e.needsUpdate=!0),t.isDataTexture3D?e.uniforms.lut3d.value=t:(e.uniforms.lut.value=t,e.uniforms.lutSize.value=t.image.width)}},get:function(){return this.material.uniforms.lut.value||this.material.uniforms.lut3d.value}},{key:"intensity",set:function(t){this.material.uniforms.intensity.value=t},get:function(){return this.material.uniforms.intensity.value}}]),e}(),h=n("6+nK"),f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var d=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,h["Loader"]),f(e,[{key:"load",value:function(t,e,n,r){var i=this,a=new h.FileLoader(this.manager);a.setPath(this.path),a.setResponseType("text"),a.load(t,function(n){try{e(i.parse(n))}catch(e){r?r(e):console.error(e),i.manager.itemError(t)}},n,r)}},{key:"parse",value:function(t){t=t.replace(/^#.*?(\n|\r)/gm,"").replace(/^\s*?(\n|\r)/gm,"").trim();for(var e=null,n=null,r=new h.Vector3(0,0,0),i=new h.Vector3(1,1,1),a=t.split(/[\n\r]+/g),s=null,o=0,l=0,u=a.length;l<u;l++){var c=a[l].trim(),p=c.split(/\s/g);switch(p[0]){case"TITLE":e=c.substring(7,c.length-1);break;case"LUT_3D_SIZE":var f=p[1];n=parseFloat(f),s=new Uint8Array(n*n*n*3);break;case"DOMAIN_MIN":r.x=parseFloat(p[1]),r.y=parseFloat(p[2]),r.z=parseFloat(p[3]);break;case"DOMAIN_MAX":i.x=parseFloat(p[1]),i.y=parseFloat(p[2]),i.z=parseFloat(p[3]);break;default:var d=parseFloat(p[0]),m=parseFloat(p[1]),g=parseFloat(p[2]);if(d>1||d<0||m>1||m<0||g>1||g<0)throw new Error("LUTCubeLoader : Non normalized values not supported.");s[o+0]=255*d,s[o+1]=255*m,s[o+2]=255*g,o+=3}}var v=new h.DataTexture;v.image.data=s,v.image.width=n,v.image.height=n*n,v.format=h.RGBFormat,v.type=h.UnsignedByteType,v.magFilter=h.LinearFilter,v.wrapS=h.ClampToEdgeWrapping,v.wrapT=h.ClampToEdgeWrapping,v.generateMipmaps=!1;var b=new h.DataTexture3D;return b.image.data=s,b.image.width=n,b.image.height=n,b.image.depth=n,b.format=h.RGBFormat,b.type=h.UnsignedByteType,b.magFilter=h.LinearFilter,b.wrapS=h.ClampToEdgeWrapping,b.wrapT=h.ClampToEdgeWrapping,b.wrapR=h.ClampToEdgeWrapping,b.generateMipmaps=!1,{title:e,size:n,domainMin:r,domainMax:i,texture:v,texture3D:b}}}]),e}(),m=n("IPH8"),g=n("QEtz"),v={data:function(){return{params:{enabled:!0,lut:"Bourbon 64.CUBE",intensity:1,use2dLut:!1},lutMap:{"Bourbon 64.CUBE":null,"Chemical 168.CUBE":null,"Clayton 33.CUBE":null,"Cubicle 99.CUBE":null,"Remy 24.CUBE":null},gui:null,camera:null,scene:null,renderer:null,composer:null,lutPass:null}},mounted:function(){this.init(),this.render()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var t=this,e=document.createElement("div");document.getElementsByClassName("webglPostprocessing3dlut-container")[0].appendChild(e),this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,.25,20),this.camera.position.set(-1.8,.6,2.7),this.scene=new this.$THREE.Scene,(new a.a).setDataType(this.$THREE.UnsignedByteType).setPath("static/textures/equirectangular/").load("royal_esplanade_1k.hdr",function(e){var n=u.fromEquirectangular(e).texture;t.scene.background=n,t.scene.environment=n,e.dispose(),u.dispose(),(new i.a).setPath("static/models/gltf/DamagedHelmet/glTF/").load("DamagedHelmet.gltf",function(e){t.scene.add(e.scene)})}),Object.keys(this.lutMap).forEach(function(e){(new d).load("static/luts/"+e,function(n){t.lutMap[e]=n})}),this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.toneMapping=this.$THREE.ACESFilmicToneMapping,this.renderer.toneMappingExposure=1,e.appendChild(this.renderer.domElement);var n=new this.$THREE.WebGLRenderTarget({minFilter:this.$THREE.LinearFilter,magFilter:this.$THREE.LinearFilter,format:this.$THREE.RGBAFormat,encoding:this.$THREE.sRGBEncoding});this.composer=new s.a(this.renderer,n),this.composer.setPixelRatio(window.devicePixelRatio),this.composer.setSize(this.$webglInnerWidth,window.innerHeight),this.composer.addPass(new o.a(this.scene,this.camera)),this.composer.addPass(new l.a(m.a)),this.lutPass=new p,this.composer.addPass(this.lutPass);var u=new this.$THREE.PMREMGenerator(this.renderer);u.compileEquirectangularShader();var c=new r.b(this.camera,this.renderer.domElement);c.minDistance=2,c.maxDistance=10,c.target.set(0,0,-.2),c.update(),this.gui=new g.a,this.gui.width=350,this.gui.add(this.params,"enabled"),this.gui.add(this.params,"lut",Object.keys(this.lutMap)),this.gui.add(this.params,"intensity").min(0).max(1),this.renderer.capabilities.isWebGL2?this.gui.add(this.params,"use2dLut"):this.params.use2DLut=!0,window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.composer.setSize(window.innerWidth-281,window.innerHeight),this.render()},render:function(){if(requestAnimationFrame(this.render),this.lutPass.enabled=this.params.enabled&&Boolean(this.lutMap[this.params.lut]),this.lutPass.intensity=this.params.intensity,this.lutMap[this.params.lut]){var t=this.lutMap[this.params.lut];this.lutPass.lut=this.params.use2DLut?t.texture:t.texture3D}this.composer.render()}}},b={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"webglPostprocessing3dlut-container"},[n("div",{attrs:{id:"info"}},[n("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[t._v("three.js")]),t._v(" - 3D LUTs"),n("br"),t._v("\n\t\t\tBattle Damaged Sci-fi Helmet by\n\t\t\t"),n("a",{attrs:{href:"https://sketchfab.com/theblueturtle_",target:"_blank",rel:"noopener"}},[t._v("theblueturtle_")]),n("br"),t._v(" "),n("a",{attrs:{href:"https://hdrihaven.com/hdri/?h=royal_esplanade",target:"_blank",rel:"noopener"}},[t._v("Royal Esplanade")]),t._v(" by "),n("a",{attrs:{href:"https://hdrihaven.com/",target:"_blank",rel:"noopener"}},[t._v("HDRI Haven")]),n("br"),t._v("\n\t\t\tLUTs from "),n("a",{attrs:{href:"https://www.rocketstock.com/free-after-effects-templates/35-free-luts-for-color-grading-videos/"}},[t._v("RocketStock")])])])}]};var w=n("VU/8")(v,b,!1,function(t){n("Lu/J")},"data-v-55e27c03",null);e.default=w.exports}});
//# sourceMappingURL=208.ad971eeb7ff1edb07c6b.js.map