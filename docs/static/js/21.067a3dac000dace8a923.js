webpackJsonp([21],{b0mO:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("QEtz"),a=i("85s5"),s=i("6+nK"),n=i("Ah8h"),o=i("uSAz"),l={defines:{PERSPECTIVE_CAMERA:1,KERNEL_SIZE:32},uniforms:{tDiffuse:{value:null},tNormal:{value:null},tDepth:{value:null},tNoise:{value:null},kernel:{value:null},cameraNear:{value:null},cameraFar:{value:null},resolution:{value:new s._101},cameraProjectionMatrix:{value:new s._27},cameraInverseProjectionMatrix:{value:new s._27},kernelRadius:{value:8},minDistance:{value:.005},maxDistance:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform sampler2D tNormal;","uniform sampler2D tDepth;","uniform sampler2D tNoise;","uniform vec3 kernel[ KERNEL_SIZE ];","uniform vec2 resolution;","uniform float cameraNear;","uniform float cameraFar;","uniform mat4 cameraProjectionMatrix;","uniform mat4 cameraInverseProjectionMatrix;","uniform float kernelRadius;","uniform float minDistance;","uniform float maxDistance;","varying vec2 vUv;","#include <packing>","float getDepth( const in vec2 screenPosition ) {","\treturn texture2D( tDepth, screenPosition ).x;","}","float getLinearDepth( const in vec2 screenPosition ) {","\t#if PERSPECTIVE_CAMERA == 1","\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;","\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","\t#else","\t\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","float getViewZ( const in float depth ) {","\t#if PERSPECTIVE_CAMERA == 1","\t\treturn perspectiveDepthToViewZ( depth, cameraNear, cameraFar );","\t#else","\t\treturn orthographicDepthToViewZ( depth, cameraNear, cameraFar );","\t#endif","}","vec3 getViewPosition( const in vec2 screenPosition, const in float depth, const in float viewZ ) {","\tfloat clipW = cameraProjectionMatrix[2][3] * viewZ + cameraProjectionMatrix[3][3];","\tvec4 clipPosition = vec4( ( vec3( screenPosition, depth ) - 0.5 ) * 2.0, 1.0 );","\tclipPosition *= clipW; // unprojection.","\treturn ( cameraInverseProjectionMatrix * clipPosition ).xyz;","}","vec3 getViewNormal( const in vec2 screenPosition ) {","\treturn unpackRGBToNormal( texture2D( tNormal, screenPosition ).xyz );","}","void main() {","\tfloat depth = getDepth( vUv );","\tfloat viewZ = getViewZ( depth );","\tvec3 viewPosition = getViewPosition( vUv, depth, viewZ );","\tvec3 viewNormal = getViewNormal( vUv );"," vec2 noiseScale = vec2( resolution.x / 4.0, resolution.y / 4.0 );","\tvec3 random = texture2D( tNoise, vUv * noiseScale ).xyz;","\tvec3 tangent = normalize( random - viewNormal * dot( random, viewNormal ) );","\tvec3 bitangent = cross( viewNormal, tangent );","\tmat3 kernelMatrix = mat3( tangent, bitangent, viewNormal );"," float occlusion = 0.0;"," for ( int i = 0; i < KERNEL_SIZE; i ++ ) {","\t\tvec3 sampleVector = kernelMatrix * kernel[ i ];","\t\tvec3 samplePoint = viewPosition + ( sampleVector * kernelRadius );","\t\tvec4 samplePointNDC = cameraProjectionMatrix * vec4( samplePoint, 1.0 );","\t\tsamplePointNDC /= samplePointNDC.w;","\t\tvec2 samplePointUv = samplePointNDC.xy * 0.5 + 0.5;","\t\tfloat realDepth = getLinearDepth( samplePointUv );","\t\tfloat sampleDepth = viewZToOrthographicDepth( samplePoint.z, cameraNear, cameraFar );","\t\tfloat delta = sampleDepth - realDepth;","\t\tif ( delta > minDistance && delta < maxDistance ) {","\t\t\tocclusion += 1.0;","\t\t}","\t}","\tocclusion = clamp( occlusion / float( KERNEL_SIZE ), 0.0, 1.0 );","\tgl_FragColor = vec4( vec3( 1.0 - occlusion ), 1.0 );","}"].join("\n")},h={defines:{PERSPECTIVE_CAMERA:1},uniforms:{tDepth:{value:null},cameraNear:{value:null},cameraFar:{value:null}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDepth;","uniform float cameraNear;","uniform float cameraFar;","varying vec2 vUv;","#include <packing>","float getLinearDepth( const in vec2 screenPosition ) {","\t#if PERSPECTIVE_CAMERA == 1","\t\tfloat fragCoordZ = texture2D( tDepth, screenPosition ).x;","\t\tfloat viewZ = perspectiveDepthToViewZ( fragCoordZ, cameraNear, cameraFar );","\t\treturn viewZToOrthographicDepth( viewZ, cameraNear, cameraFar );","\t#else","\t\treturn texture2D( tDepth, screenPosition ).x;","\t#endif","}","void main() {","\tfloat depth = getLinearDepth( vUv );","\tgl_FragColor = vec4( vec3( 1.0 - depth ), 1.0 );","}"].join("\n")},u={uniforms:{tDiffuse:{value:null},resolution:{value:new s._101}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform sampler2D tDiffuse;","uniform vec2 resolution;","varying vec2 vUv;","void main() {","\tvec2 texelSize = ( 1.0 / resolution );","\tfloat result = 0.0;","\tfor ( int i = - 2; i <= 2; i ++ ) {","\t\tfor ( int j = - 2; j <= 2; j ++ ) {","\t\t\tvec2 offset = ( vec2( float( i ), float( j ) ) ) * texelSize;","\t\t\tresult += texture2D( tDiffuse, vUv + offset ).r;","\t\t}","\t}","\tgl_FragColor = vec4( vec3( result / ( 5.0 * 5.0 ) ), 1.0 );","}"].join("\n")},c=i("fcDU"),d=function(e,t,i,r){n.a.call(this),this.width=void 0!==i?i:512,this.height=void 0!==r?r:512,this.clear=!0,this.camera=t,this.scene=e,this.kernelRadius=8,this.kernelSize=32,this.kernel=[],this.noiseTexture=null,this.output=0,this.minDistance=.005,this.maxDistance=.1,this._visibilityCache=new Map,this.generateSampleKernel(),this.generateRandomKernelRotations();var a=new s.G;a.type=s._100,a.minFilter=s._37,a.maxFilter=s._37,this.beautyRenderTarget=new s._105(this.width,this.height,{minFilter:s._17,magFilter:s._17,format:s._59}),this.normalRenderTarget=new s._105(this.width,this.height,{minFilter:s._37,magFilter:s._37,format:s._59,depthTexture:a}),this.ssaoRenderTarget=new s._105(this.width,this.height,{minFilter:s._17,magFilter:s._17,format:s._59}),this.blurRenderTarget=this.ssaoRenderTarget.clone(),void 0===l&&console.error("THREE.SSAOPass: The pass relies on SSAOShader."),this.ssaoMaterial=new s._76({defines:Object.assign({},l.defines),uniforms:s._98.clone(l.uniforms),vertexShader:l.vertexShader,fragmentShader:l.fragmentShader,blending:s._40}),this.ssaoMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.ssaoMaterial.uniforms.tNormal.value=this.normalRenderTarget.texture,this.ssaoMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.ssaoMaterial.uniforms.tNoise.value=this.noiseTexture,this.ssaoMaterial.uniforms.kernel.value=this.kernel,this.ssaoMaterial.uniforms.cameraNear.value=this.camera.near,this.ssaoMaterial.uniforms.cameraFar.value=this.camera.far,this.ssaoMaterial.uniforms.resolution.value.set(this.width,this.height),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.normalMaterial=new s._32,this.normalMaterial.blending=s._40,this.blurMaterial=new s._76({defines:Object.assign({},u.defines),uniforms:s._98.clone(u.uniforms),vertexShader:u.vertexShader,fragmentShader:u.fragmentShader}),this.blurMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.blurMaterial.uniforms.resolution.value.set(this.width,this.height),this.depthRenderMaterial=new s._76({defines:Object.assign({},h.defines),uniforms:s._98.clone(h.uniforms),vertexShader:h.vertexShader,fragmentShader:h.fragmentShader,blending:s._40}),this.depthRenderMaterial.uniforms.tDepth.value=this.normalRenderTarget.depthTexture,this.depthRenderMaterial.uniforms.cameraNear.value=this.camera.near,this.depthRenderMaterial.uniforms.cameraFar.value=this.camera.far,this.copyMaterial=new s._76({uniforms:s._98.clone(c.a.uniforms),vertexShader:c.a.vertexShader,fragmentShader:c.a.fragmentShader,transparent:!0,depthTest:!1,depthWrite:!1,blendSrc:s.K,blendDst:s._107,blendEquation:s.a,blendSrcAlpha:s.J,blendDstAlpha:s._107,blendEquationAlpha:s.a}),this.fsQuad=new n.a.FullScreenQuad(null),this.originalClearColor=new s.q};d.prototype=Object.assign(Object.create(n.a.prototype),{constructor:d,dispose:function(){this.beautyRenderTarget.dispose(),this.normalRenderTarget.dispose(),this.ssaoRenderTarget.dispose(),this.blurRenderTarget.dispose(),this.normalMaterial.dispose(),this.blurMaterial.dispose(),this.copyMaterial.dispose(),this.depthRenderMaterial.dispose(),this.fsQuad.dispose()},render:function(e,t){switch(e.setRenderTarget(this.beautyRenderTarget),e.clear(),e.render(this.scene,this.camera),this.overrideVisibility(),this.renderOverride(e,this.normalMaterial,this.normalRenderTarget,7829503,1),this.restoreVisibility(),this.ssaoMaterial.uniforms.kernelRadius.value=this.kernelRadius,this.ssaoMaterial.uniforms.minDistance.value=this.minDistance,this.ssaoMaterial.uniforms.maxDistance.value=this.maxDistance,this.renderPass(e,this.ssaoMaterial,this.ssaoRenderTarget),this.renderPass(e,this.blurMaterial,this.blurRenderTarget),this.output){case d.OUTPUT.SSAO:this.copyMaterial.uniforms.tDiffuse.value=this.ssaoRenderTarget.texture,this.copyMaterial.blending=s._40,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case d.OUTPUT.Blur:this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=s._40,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case d.OUTPUT.Beauty:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=s._40,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case d.OUTPUT.Depth:this.renderPass(e,this.depthRenderMaterial,this.renderToScreen?null:t);break;case d.OUTPUT.Normal:this.copyMaterial.uniforms.tDiffuse.value=this.normalRenderTarget.texture,this.copyMaterial.blending=s._40,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;case d.OUTPUT.Default:this.copyMaterial.uniforms.tDiffuse.value=this.beautyRenderTarget.texture,this.copyMaterial.blending=s._40,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t),this.copyMaterial.uniforms.tDiffuse.value=this.blurRenderTarget.texture,this.copyMaterial.blending=s.z,this.renderPass(e,this.copyMaterial,this.renderToScreen?null:t);break;default:console.warn("THREE.SSAOPass: Unknown output type.")}},renderPass:function(e,t,i,r,a){this.originalClearColor.copy(e.getClearColor());var s=e.getClearAlpha(),n=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(a||0),e.clear()),this.fsQuad.material=t,this.fsQuad.render(e),e.autoClear=n,e.setClearColor(this.originalClearColor),e.setClearAlpha(s)},renderOverride:function(e,t,i,r,a){this.originalClearColor.copy(e.getClearColor());var s=e.getClearAlpha(),n=e.autoClear;e.setRenderTarget(i),e.autoClear=!1,r=t.clearColor||r,a=t.clearAlpha||a,void 0!==r&&null!==r&&(e.setClearColor(r),e.setClearAlpha(a||0),e.clear()),this.scene.overrideMaterial=t,e.render(this.scene,this.camera),this.scene.overrideMaterial=null,e.autoClear=n,e.setClearColor(this.originalClearColor),e.setClearAlpha(s)},setSize:function(e,t){this.width=e,this.height=t,this.beautyRenderTarget.setSize(e,t),this.ssaoRenderTarget.setSize(e,t),this.normalRenderTarget.setSize(e,t),this.blurRenderTarget.setSize(e,t),this.ssaoMaterial.uniforms.resolution.value.set(e,t),this.ssaoMaterial.uniforms.cameraProjectionMatrix.value.copy(this.camera.projectionMatrix),this.ssaoMaterial.uniforms.cameraInverseProjectionMatrix.value.copy(this.camera.projectionMatrixInverse),this.blurMaterial.uniforms.resolution.value.set(e,t)},generateSampleKernel:function(){for(var e=this.kernelSize,t=this.kernel,i=0;i<e;i++){var r=new s._102;r.x=2*Math.random()-1,r.y=2*Math.random()-1,r.z=Math.random(),r.normalize();var a=i/e;a=s._25.lerp(.1,1,a*a),r.multiplyScalar(a),t.push(r)}},generateRandomKernelRotations:function(){void 0===o.a&&console.error("THREE.SSAOPass: The pass relies on SimplexNoise.");for(var e=new o.a,t=new Float32Array(64),i=0;i<16;i++){var r=4*i,a=2*Math.random()-1,n=2*Math.random()-1,l=e.noise3d(a,n,0);t[r]=l,t[r+1]=l,t[r+2]=l,t[r+3]=1}this.noiseTexture=new s.B(t,4,4,s._59,s.T),this.noiseTexture.wrapS=s._73,this.noiseTexture.wrapT=s._73},overrideVisibility:function(){var e=this.scene,t=this._visibilityCache;e.traverse(function(e){t.set(e,e.visible),(e.isPoints||e.isLine)&&(e.visible=!1)})},restoreVisibility:function(){var e=this.scene,t=this._visibilityCache;e.traverse(function(e){var i=t.get(e);e.visible=i}),t.clear()}}),d.OUTPUT={Default:0,SSAO:1,Blur:2,Beauty:3,Depth:4,Normal:5};var m={data:function(){return{container:null,stats:null,camera:null,scene:null,renderer:null,composer:null,group:null,gui:null}},mounted:function(){this.init(),this.animate()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){this.container=document.createElement("div"),document.getElementsByClassName("webglPostprocessingSsao-container")[0].appendChild(this.container),this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglPostprocessingSsao-container")[0].appendChild(this.renderer.domElement),this.camera=new this.$THREE.PerspectiveCamera(65,this.$webglInnerWidth/window.innerHeight,100,700),this.camera.position.z=500,this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(11184810),this.scene.add(new this.$THREE.DirectionalLight),this.scene.add(new this.$THREE.HemisphereLight),this.group=new this.$THREE.Group,this.scene.add(this.group);for(var e=new this.$THREE.BoxBufferGeometry(10,10,10),t=0;t<100;t++){var i=new this.$THREE.MeshLambertMaterial({color:16777215*Math.random()}),s=new this.$THREE.Mesh(e,i);s.position.x=400*Math.random()-200,s.position.y=400*Math.random()-200,s.position.z=400*Math.random()-200,s.rotation.x=Math.random(),s.rotation.y=Math.random(),s.rotation.z=Math.random(),s.scale.setScalar(10*Math.random()+2),this.group.add(s)}this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom);var n=this.$webglInnerWidth,o=window.innerHeight;this.composer=new a.a(this.renderer);var l=new d(this.scene,this.camera,n,o);l.kernelRadius=16,this.composer.addPass(l),this.gui=new r.a,this.gui.add(l,"output",{Default:d.OUTPUT.Default,"SSAO Only":d.OUTPUT.SSAO,"SSAO Only + Blur":d.OUTPUT.Blur,Beauty:d.OUTPUT.Beauty,Depth:d.OUTPUT.Depth,Normal:d.OUTPUT.Normal}).onChange(function(e){l.output=parseInt(e)}),this.gui.add(l,"kernelRadius").min(0).max(32),this.gui.add(l,"minDistance").min(.001).max(.02),this.gui.add(l,"maxDistance").min(.01).max(.3),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){var e=window.innerWidth-281,t=window.innerHeight;this.$onWindowResize(this.camera,this.renderer),this.composer.setSize(e,t)},animate:function(){requestAnimationFrame(this.animate),this.stats.begin(),this.render(),this.stats.end()},render:function(){var e=performance.now();this.group.rotation.x=2e-4*e,this.group.rotation.y=1e-4*e,this.composer.render()}}},p={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglPostprocessingSsao-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - screen space ambient occlusion"),t("br")])])}]};var v=i("VU/8")(m,p,!1,function(e){i("oiTN")},"data-v-4a054fa4",null);t.default=v.exports},oiTN:function(e,t){},uSAz:function(e,t,i){"use strict";i.d(t,"a",function(){return r});var r=function(e){void 0==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};r.prototype.dot=function(e,t,i){return e[0]*t+e[1]*i},r.prototype.dot3=function(e,t,i,r){return e[0]*t+e[1]*i+e[2]*r},r.prototype.dot4=function(e,t,i,r,a){return e[0]*t+e[1]*i+e[2]*r+e[3]*a},r.prototype.noise=function(e,t){var i,r,a=(e+t)*(.5*(Math.sqrt(3)-1)),s=Math.floor(e+a),n=Math.floor(t+a),o=(3-Math.sqrt(3))/6,l=(s+n)*o,h=e-(s-l),u=t-(n-l);h>u?(i=1,r=0):(i=0,r=1);var c=h-i+o,d=u-r+o,m=h-1+2*o,p=u-1+2*o,v=255&s,f=255&n,g=this.perm[v+this.perm[f]]%12,M=this.perm[v+i+this.perm[f+r]]%12,T=this.perm[v+1+this.perm[f+1]]%12,w=.5-h*h-u*u,x=.5-c*c-d*d,D=.5-m*m-p*p;return 70*((w<0?0:(w*=w)*w*this.dot(this.grad3[g],h,u))+(x<0?0:(x*=x)*x*this.dot(this.grad3[M],c,d))+(D<0?0:(D*=D)*D*this.dot(this.grad3[T],m,p)))},r.prototype.noise3d=function(e,t,i){var r,a,s,n,o,l,h=(e+t+i)*(1/3),u=Math.floor(e+h),c=Math.floor(t+h),d=Math.floor(i+h),m=1/6,p=(u+c+d)*m,v=e-(u-p),f=t-(c-p),g=i-(d-p);v>=f?f>=g?(r=1,a=0,s=0,n=1,o=1,l=0):v>=g?(r=1,a=0,s=0,n=1,o=0,l=1):(r=0,a=0,s=1,n=1,o=0,l=1):f<g?(r=0,a=0,s=1,n=0,o=1,l=1):v<g?(r=0,a=1,s=0,n=0,o=1,l=1):(r=0,a=1,s=0,n=1,o=1,l=0);var M=v-r+m,T=f-a+m,w=g-s+m,x=v-n+2*m,D=f-o+2*m,P=g-l+2*m,S=v-1+.5,R=f-1+.5,y=g-1+.5,b=255&u,_=255&c,C=255&d,E=this.perm[b+this.perm[_+this.perm[C]]]%12,N=this.perm[b+r+this.perm[_+a+this.perm[C+s]]]%12,U=this.perm[b+n+this.perm[_+o+this.perm[C+l]]]%12,j=this.perm[b+1+this.perm[_+1+this.perm[C+1]]]%12,O=.6-v*v-f*f-g*g,A=.6-M*M-T*T-w*w,k=.6-x*x-D*D-P*P,z=.6-S*S-R*R-y*y;return 32*((O<0?0:(O*=O)*O*this.dot3(this.grad3[E],v,f,g))+(A<0?0:(A*=A)*A*this.dot3(this.grad3[N],M,T,w))+(k<0?0:(k*=k)*k*this.dot3(this.grad3[U],x,D,P))+(z<0?0:(z*=z)*z*this.dot3(this.grad3[j],S,R,y)))},r.prototype.noise4d=function(e,t,i,r){var a,s,n,o,l,h,u,c,d,m,p,v,f=this.grad4,g=this.simplex,M=this.perm,T=(Math.sqrt(5)-1)/4,w=(5-Math.sqrt(5))/20,x=(e+t+i+r)*T,D=Math.floor(e+x),P=Math.floor(t+x),S=Math.floor(i+x),R=Math.floor(r+x),y=(D+P+S+R)*w,b=e-(D-y),_=t-(P-y),C=i-(S-y),E=r-(R-y),N=(b>_?32:0)+(b>C?16:0)+(_>C?8:0)+(b>E?4:0)+(_>E?2:0)+(C>E?1:0),U=b-(a=g[N][0]>=3?1:0)+w,j=_-(s=g[N][1]>=3?1:0)+w,O=C-(n=g[N][2]>=3?1:0)+w,A=E-(o=g[N][3]>=3?1:0)+w,k=b-(l=g[N][0]>=2?1:0)+2*w,z=_-(h=g[N][1]>=2?1:0)+2*w,F=C-(u=g[N][2]>=2?1:0)+2*w,V=E-(c=g[N][3]>=2?1:0)+2*w,Z=b-(d=g[N][0]>=1?1:0)+3*w,I=_-(m=g[N][1]>=1?1:0)+3*w,H=C-(p=g[N][2]>=1?1:0)+3*w,$=E-(v=g[N][3]>=1?1:0)+3*w,B=b-1+4*w,L=_-1+4*w,W=C-1+4*w,K=E-1+4*w,q=255&D,Q=255&P,G=255&S,J=255&R,X=M[q+M[Q+M[G+M[J]]]]%32,Y=M[q+a+M[Q+s+M[G+n+M[J+o]]]]%32,ee=M[q+l+M[Q+h+M[G+u+M[J+c]]]]%32,te=M[q+d+M[Q+m+M[G+p+M[J+v]]]]%32,ie=M[q+1+M[Q+1+M[G+1+M[J+1]]]]%32,re=.6-b*b-_*_-C*C-E*E,ae=.6-U*U-j*j-O*O-A*A,se=.6-k*k-z*z-F*F-V*V,ne=.6-Z*Z-I*I-H*H-$*$,oe=.6-B*B-L*L-W*W-K*K;return 27*((re<0?0:(re*=re)*re*this.dot4(f[X],b,_,C,E))+(ae<0?0:(ae*=ae)*ae*this.dot4(f[Y],U,j,O,A))+(se<0?0:(se*=se)*se*this.dot4(f[ee],k,z,F,V))+(ne<0?0:(ne*=ne)*ne*this.dot4(f[te],Z,I,H,$))+(oe<0?0:(oe*=oe)*oe*this.dot4(f[ie],B,L,W,K)))}}});
//# sourceMappingURL=21.067a3dac000dace8a923.js.map