webpackJsonp([216],{Jf61:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("85s5"),n=i("Z9IJ"),r=i("fD1D"),o=i("KXdl"),h=i("fcDU"),a={data:function(){return{container:null,camera:null,scene:null,renderer:null,video:null,texture:null,material:null,mesh:null,composer:null,mouseX:0,mouseY:0,windowHalfX:null,windowHalfY:null,cube_count:null,meshes:[],materials:[],xgrid:20,ygrid:10,startButton:null,h:null,counter:1}},mounted:function(){var t=this;this.windowHalfX=this.$webglInnerWidth/2,this.windowHalfY=window.innerHeight/2,this.startButton=document.getElementById("startButton"),this.startButton.addEventListener("click",function(){t.init(),t.animate()},!1)},methods:{init:function(){var t=this;document.getElementById("overlay").remove(),this.container=document.createElement("div"),document.getElementsByClassName("webglMaterialsVideo-container")[0].appendChild(this.container),this.camera=new this.$THREE.PerspectiveCamera(40,this.$webglInnerWidth/window.innerHeight,1,1e4),this.camera.position.z=500,this.scene=new this.$THREE.Scene;var e,i,a,d,l,c=new this.$THREE.DirectionalLight(16777215);c.position.set(.5,1,1).normalize(),this.scene.add(c),this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),this.video=document.getElementById("video"),this.video.play(),this.video.addEventListener("play",function(){t.currentTime=3},!1),this.texture=new this.$THREE.VideoTexture(this.video);var m=1/this.xgrid,u=1/this.ygrid,v=480/this.xgrid,w=204/this.ygrid,p={color:16777215,map:this.texture};for(this.cube_count=0,e=0;e<this.xgrid;e++)for(i=0;i<this.ygrid;i++)a=e,d=i,l=new this.$THREE.BoxBufferGeometry(v,w,v),this.change_uvs(l,m,u,a,d),this.materials[this.cube_count]=new this.$THREE.MeshLambertMaterial(p),this.material=this.materials[this.cube_count],this.material.hue=e/this.xgrid,this.material.saturation=1-i/this.ygrid,this.material.color.setHSL(this.material.hue,this.material.saturation,.5),this.mesh=new this.$THREE.Mesh(l,this.material),this.mesh.position.x=(e-this.xgrid/2)*v,this.mesh.position.y=(i-this.ygrid/2)*w,this.mesh.position.z=0,this.mesh.scale.x=this.mesh.scale.y=this.mesh.scale.z=1,this.scene.add(this.mesh),this.mesh.dx=.001*(.5-Math.random()),this.mesh.dy=.001*(.5-Math.random()),this.meshes[this.cube_count]=this.mesh,this.cube_count+=1;this.renderer.autoClear=!1,document.addEventListener("mousemove",this.onDocumentMouseMove,!1);var f=new n.a(this.scene,this.camera),g=new o.a(1.3),y=new r.a(h.a);this.composer=new s.a(this.renderer),this.composer.addPass(f),this.composer.addPass(g),this.composer.addPass(y),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.windowHalfX=(window.innerWidth-281)/2,this.windowHalfY=window.innerHeight/2,this.$onWindowResize(this.camera,this.renderer),this.composer.setSize(window.innerWidth-281,window.innerHeight)},change_uvs:function(t,e,i,s,n){for(var r=t.attributes.uv.array,o=0;o<r.length;o+=2)r[o]=(r[o]+s)*e,r[o+1]=(r[o+1]+n)*i},onDocumentMouseMove:function(t){this.mouseX=t.clientX-this.windowHalfX,this.mouseY=.3*(t.clientY-this.windowHalfY)},animate:function(){requestAnimationFrame(this.animate),this.render()},render:function(){var t=5e-5*Date.now();this.camera.position.x+=.05*(this.mouseX-this.camera.position.x),this.camera.position.y+=.05*(-this.mouseY-this.camera.position.y),this.camera.lookAt(this.scene.position);for(var e=0;e<this.cube_count;e++)this.material=this.materials[e],this.h=360*(this.material.hue+t)%360/360,this.material.color.setHSL(this.h,this.material.saturation,.5);if(this.counter%1e3>200)for(e=0;e<this.cube_count;e++)this.mesh=this.meshes[e],this.mesh.rotation.x+=10*this.mesh.dx,this.mesh.rotation.y+=10*this.mesh.dy,this.mesh.position.x-=150*this.mesh.dx,this.mesh.position.y+=150*this.mesh.dy,this.mesh.position.z+=300*this.mesh.dx;if(this.counter%1e3==0)for(e=0;e<this.cube_count;e++)this.mesh=this.meshes[e],this.mesh.dx*=-1,this.mesh.dy*=-1;this.counter++,this.renderer.clear(),this.composer.render()}}},d={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"webglMaterialsVideo-container"},[i("div",{attrs:{id:"overlay"}},[i("button",{attrs:{id:"startButton"}},[t._v("Play")])]),t._v(" "),i("div",{attrs:{id:"container"}}),t._v(" "),i("div",{attrs:{id:"info"}},[i("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[t._v("three.js")]),t._v(" - webgl video demo"),i("br"),t._v("\n\t\t\tplaying "),i("a",{attrs:{href:"http://durian.blender.org/",target:"_blank",rel:"noopener"}},[t._v("sintel")]),t._v(" trailer\n\t\t")]),t._v(" "),i("video",{staticStyle:{display:"none"},attrs:{id:"video",loop:"",crossOrigin:"anonymous",playsinline:""}},[i("source",{attrs:{src:"static/textures/sintel.ogv",type:'video/ogg; codecs="theora, vorbis"'}}),t._v(" "),i("source",{attrs:{src:"static/textures/sintel.mp4",type:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'}})])])}]};var l=i("VU/8")(a,d,!1,function(t){i("o/VN")},"data-v-05a4ab4f",null);e.default=l.exports},"o/VN":function(t,e){}});
//# sourceMappingURL=216.2fc10d275bea11a1455e.js.map