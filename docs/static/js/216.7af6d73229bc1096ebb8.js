webpackJsonp([216],{PuU7:function(e,t){},QB89:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=i("aUSN"),n={data:function(){return{container:null,camera:null,scene:null,renderer:null,controller:null,reticle:null,hitTestSource:null,hitTestSourceRequested:!1}},mounted:function(){this.init(),this.animate()},methods:{init:function(){this.container=document.createElement("div"),document.getElementsByClassName("webxrArHittest-container")[0].appendChild(this.container),this.scene=new this.$THREE.Scene,this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,.01,20);var e=new this.$THREE.HemisphereLight(16777215,12303359,1);e.position.set(.5,1,.25),this.scene.add(e),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.xr.enabled=!0,this.container.appendChild(this.renderer.domElement),document.getElementsByClassName("webxrArHittest-container")[0].appendChild(r.a.createButton(this.renderer,{requiredFeatures:["hit-test"]}));var t=new this.$THREE.CylinderBufferGeometry(.1,.1,.2,32).translate(0,.1,0),i=this;this.controller=this.renderer.xr.getController(0),this.controller.addEventListener("select",function(){if(i.reticle.visible){var e=new i.$THREE.MeshPhongMaterial({color:16777215*Math.random()}),r=new i.$THREE.Mesh(t,e);r.position.setFromMatrixPosition(i.reticle.matrix),r.scale.y=2*Math.random()+1,i.scene.add(r)}}),this.scene.add(this.controller),this.reticle=new this.$THREE.Mesh(new this.$THREE.RingBufferGeometry(.15,.2,32).rotateX(-Math.PI/2),new this.$THREE.MeshBasicMaterial),this.reticle.matrixAutoUpdate=!1,this.reticle.visible=!1,this.scene.add(this.reticle),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){this.renderer.setAnimationLoop(this.render)},render:function(e,t){var i=this;if(t){var r=this.renderer.xr.getReferenceSpace(),n=this.renderer.xr.getSession();if(!1===this.hitTestSourceRequested&&(n.requestReferenceSpace("viewer").then(function(e){n.requestHitTestSource({space:e}).then(function(e){i.hitTestSource=e})}),n.addEventListener("end",function(){i.hitTestSourceRequested=!1,i.hitTestSource=null}),this.hitTestSourceRequested=!0),this.hitTestSource){var s=t.getHitTestResults(this.hitTestSource);if(s.length){var a=s[0];this.reticle.visible=!0,this.reticle.matrix.fromArray(a.getPose(r).transform.matrix)}else this.reticle.visible=!1}}this.renderer.render(this.scene,this.camera)}}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webxrArHittest-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" ar - hit test"),t("br"),this._v("(Chrome Android 81+)\n\t\t")])])}]};var a=i("VU/8")(n,s,!1,function(e){i("PuU7")},"data-v-520e2621",null);t.default=a.exports}});
//# sourceMappingURL=216.7af6d73229bc1096ebb8.js.map