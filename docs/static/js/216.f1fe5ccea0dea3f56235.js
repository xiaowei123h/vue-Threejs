webpackJsonp([216],{"6Bb+":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("QEtz"),n=r("wIBv"),s=r("6+nK"),a=function(){};a.prototype={constructor:a,parse:function(e,t,r){r=r||{},""!==(r=Object.assign({version:"1.4.1",author:null,textureDirectory:""},r)).textureDirectory&&(r.textureDirectory=(r.textureDirectory+"/").replace(/\\/g,"/").replace(/\/+/g,"/"));var i,n,a=r.version;if("1.4.1"!==a&&"1.5.0"!==a)return console.warn("ColladaExporter : Version "+a+" not supported for export. Only 1.4.1 and 1.5.0."),null;function o(e,t){return i=i||document.createElement("canvas"),n=n||i.getContext("2d"),i.width=e.width,i.height=e.height,n.drawImage(e,0,0),function(e){for(var t=atob(e),r=new Uint8Array(t.length),i=0,n=r.length;i<n;i++)r[i]=t.charCodeAt(i);return r}(i.toDataURL("image/"+t,1).replace(/^data:image\/(png|jpg);base64,/,""))}var l,h=["getX","getY","getZ","getW"];function c(e){if(e.isInterleavedBufferAttribute){for(var t=new e.array.constructor(e.count*e.itemSize),r=e.itemSize,i=0,n=e.count;i<n;i++)for(var s=0;s<r;s++)t[i*r+s]=e[h[s]](i);return t}return e.array}function u(e,t,r,i){var n=c(e);return'<source id="'+t+'"><float_array id="'+t+'-array" count="'+n.length+'">'+n.join(" ")+'</float_array><technique_common><accessor source="#'+t+'-array" count="'+Math.floor(n.length/e.itemSize)+'" stride="'+e.itemSize+'">'+r.map(function(e){return'<param name="'+e+'" type="'+i+'" />'}).join("")+"</accessor></technique_common></source>"}function d(e){var t=p.get(e);if(null==t){t="image-"+(C.length+1);var i=e.name||t,n='<image id="'+t+'" name="'+i+'">';n+="1.5.0"===a?"<init_from><ref>"+r.textureDirectory+i+".png</ref></init_from>":"<init_from>"+r.textureDirectory+i+".png</init_from>",n+="</image>",C.push(n),p.set(e,t),g.push({directory:r.textureDirectory,name:i,ext:"png",data:o(e.image,"png"),original:e})}return t}var f=new WeakMap,m=new WeakMap,p=new WeakMap,g=[],C=[],b=[],w=[],y=[],E=function e(t){var r='<node name="'+t.name+'">';if(r+=function(e){return e.updateMatrix(),(l=l||new s._28).copy(e.matrix),l.transpose(),"<matrix>"+l.toArray().join(" ")+"</matrix>"}(t),t instanceof s._29&&null!=t.geometry){var i=function(e){var t,r,i,n=f.get(e);if(!n){var a=e;a instanceof s.X&&(a=(new s.m).fromGeometry(a));var o="Mesh"+(b.length+1),l=a.index?a.index.count*a.index.itemSize:a.attributes.position.count,h=null!=a.groups&&0!==a.groups.length?a.groups:[{start:0,count:l,materialIndex:0}],d='<geometry id="'+o+'"'+(e.name?' name="'+e.name+'"':"")+"><mesh>",m=o+"-position",p=o+"-vertices";d+=u(a.attributes.position,m,["X","Y","Z"],"float"),d+='<vertices id="'+p+'"><input semantic="POSITION" source="#'+m+'" /></vertices>';var g='<input semantic="VERTEX" source="#'+p+'" offset="0" />';if("normal"in a.attributes){var C=o+"-normal";d+=u(a.attributes.normal,C,["X","Y","Z"],"float"),g+='<input semantic="NORMAL" source="#'+C+'" offset="0" />'}if("uv"in a.attributes){var w=o+"-texcoord";d+=u(a.attributes.uv,w,["S","T"],"float"),g+='<input semantic="TEXCOORD" source="#'+w+'" offset="0" set="0" />'}if("uv2"in a.attributes&&(w=o+"-texcoord2",d+=u(a.attributes.uv2,w,["S","T"],"float"),g+='<input semantic="TEXCOORD" source="#'+w+'" offset="0" set="1" />'),"color"in a.attributes){var y=o+"-color";d+=u(a.attributes.color,y,["X","Y","Z"],"uint8"),g+='<input semantic="COLOR" source="#'+y+'" offset="0" />'}var E=null;if(a.index)E=c(a.index);else for(var v=0,x=(E=new Array(l)).length;v<x;v++)E[v]=v;for(v=0,x=h.length;v<x;v++){var _=h[v],M=(t=E,r=_.start,i=_.count,Array.isArray(t)?t.slice(r,r+i):new t.constructor(t.buffer,r*t.BYTES_PER_ELEMENT,i)),R=M.length/3;d+='<triangles material="MESH_MATERIAL_'+_.materialIndex+'" count="'+R+'">',d+=g,d+="<p>"+M.join(" ")+"</p>",d+="</triangles>"}d+="</mesh></geometry>",b.push(d),n={meshid:o,bufferGeometry:a},f.set(e,n)}return n}(t.geometry),n=i.meshid,a=i.bufferGeometry,o=null,h=t.material||new s._30,p=Array.isArray(h)?h:[h];o=(a.groups.length>p.length?new Array(a.groups.length):new Array(p.length)).fill().map(function(e,t){return function(e){var t=m.get(e);if(null==t){t="Mat"+(w.length+1);var r="phong";e instanceof s._32?r="lambert":e instanceof s._30&&(r="constant",null!==e.map&&console.warn("ColladaExporter: Texture maps not supported with MeshBasicMaterial."));var i=e.emissive?e.emissive:new s.r(0,0,0),n=e.color?e.color:new s.r(0,0,0),a=e.specular?e.specular:new s.r(1,1,1),o=e.shininess||0,l=e.reflectivity||0,h="";!0===e.transparent&&(h+="<transparent>"+(e.map?'<texture texture="diffuse-sampler"></texture>':"<float>1</float>")+"</transparent>",e.opacity<1&&(h+="<transparency><float>"+e.opacity+"</float></transparency>"));var c='<technique sid="common"><'+r+"><emission>"+(e.emissiveMap?'<texture texture="emissive-sampler" texcoord="TEXCOORD" />':'<color sid="emission">'+i.r+" "+i.g+" "+i.b+" 1</color>")+"</emission>"+("constant"!==r?"<diffuse>"+(e.map?'<texture texture="diffuse-sampler" texcoord="TEXCOORD" />':'<color sid="diffuse">'+n.r+" "+n.g+" "+n.b+" 1</color>")+"</diffuse>":"")+("constant"!==r?"<bump>"+(e.normalMap?'<texture texture="bump-sampler" texcoord="TEXCOORD" />':"")+"</bump>":"")+("phong"===r?'<specular><color sid="specular">'+a.r+" "+a.g+" "+a.b+" 1</color></specular><shininess>"+(e.specularMap?'<texture texture="specular-sampler" texcoord="TEXCOORD" />':'<float sid="shininess">'+o+"</float>")+"</shininess>":"")+"<reflective><color>"+n.r+" "+n.g+" "+n.b+" 1</color></reflective><reflectivity><float>"+l+"</float></reflectivity>"+h+"</"+r+"></technique>",u='<effect id="'+t+'-effect"><profile_COMMON>'+(e.map?'<newparam sid="diffuse-surface"><surface type="2D"><init_from>'+d(e.map)+'</init_from></surface></newparam><newparam sid="diffuse-sampler"><sampler2D><source>diffuse-surface</source></sampler2D></newparam>':"")+(e.specularMap?'<newparam sid="specular-surface"><surface type="2D"><init_from>'+d(e.specularMap)+'</init_from></surface></newparam><newparam sid="specular-sampler"><sampler2D><source>specular-surface</source></sampler2D></newparam>':"")+(e.emissiveMap?'<newparam sid="emissive-surface"><surface type="2D"><init_from>'+d(e.emissiveMap)+'</init_from></surface></newparam><newparam sid="emissive-sampler"><sampler2D><source>emissive-surface</source></sampler2D></newparam>':"")+(e.normalMap?'<newparam sid="bump-surface"><surface type="2D"><init_from>'+d(e.normalMap)+'</init_from></surface></newparam><newparam sid="bump-sampler"><sampler2D><source>bump-surface</source></sampler2D></newparam>':"")+c+(e.side===s.J?'<extra><technique profile="THREEJS"><double_sided sid="double_sided" type="int">1</double_sided></technique></extra>':"")+"</profile_COMMON></effect>",f='<material id="'+t+'"'+(e.name?' name="'+e.name+'"':"")+'><instance_effect url="#'+t+'-effect" /></material>';y.push(f),w.push(u),m.set(e,t)}return t}(p[t%p.length])}),r+='<instance_geometry url="#'+n+'">'+(null!=o?"<bind_material><technique_common>"+o.map(function(e,t){return'<instance_material symbol="MESH_MATERIAL_'+t+'" target="#'+e+'" ><bind_vertex_input semantic="TEXCOORD" input_semantic="TEXCOORD" input_set="0" /></instance_material>'}).join("")+"</technique_common></bind_material>":"")+"</instance_geometry>"}return t.children.forEach(function(t){return r+=e(t)}),r+="</node>"}(e),v='<?xml version="1.0" encoding="UTF-8" standalone="no" ?><COLLADA xmlns="'+("1.4.1"===a?"http://www.collada.org/2005/11/COLLADASchema":"https://www.khronos.org/collada/")+'" version="'+a+'"><asset><contributor><authoring_tool>three.js Collada Exporter</authoring_tool>'+(null!==r.author?"<author>"+r.author+"</author>":"")+"</contributor><created>"+(new Date).toISOString()+"</created><modified>"+(new Date).toISOString()+"</modified><up_axis>Y_UP</up_axis></asset>";v+="<library_images>"+C.join("")+"</library_images>",v+="<library_effects>"+w.join("")+"</library_effects>",v+="<library_materials>"+y.join("")+"</library_materials>",v+="<library_geometries>"+b.join("")+"</library_geometries>",v+='<library_visual_scenes><visual_scene id="Scene" name="scene">'+E+"</visual_scene></library_visual_scenes>",v+='<scene><instance_visual_scene url="#Scene"/></scene>';var x,_,M,R,T,L={data:(x=v+="</COLLADA>",_=/^<\//,M=/(\?>$)|(\/>$)/,R=/<[^>]+>[^<]*<\/[^<]+>/,T=0,x.match(/(<[^>]+>[^<]+<\/[^<]+>)|(<[^>]+>)/g).map(function(e){R.test(e)||M.test(e)||!_.test(e)||T--;var t=""+function e(t,r){return r>0?t+e(t,r-1):""}("  ",T)+e;return R.test(e)||M.test(e)||_.test(e)||T++,t}).join("\n")),textures:g};return"function"==typeof t&&requestAnimationFrame(function(){return t(L)}),L}};var o=r("WvuV"),l={data:function(){return{camera:null,scene:null,renderer:null,cameraControls:null,effectController:null,teapotSize:400,ambientLight:null,light:null,tess:-1,bBottom:null,bLid:null,bBody:null,bFitLid:null,bNonBlinn:null,shading:null,wireMaterial:null,flatMaterial:null,gouraudMaterial:null,phongMaterial:null,texturedMaterial:null,normalMaterial:null,reflectiveMaterial:null,teapot:null,textureCube:null,diffuseColor:null,specularColor:null,exporter:null,link:null,gui:null}},mounted:function(){this.diffuseColor=new this.$THREE.Color,this.specularColor=new this.$THREE.Color,this.exporter=new a,this.link=document.createElement("a"),this.link.style.display="none",document.getElementsByClassName("miscExporterCollada-container")[0].appendChild(this.link),this.init(),this.render()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var e=document.createElement("div");document.getElementsByClassName("miscExporterCollada-container")[0].appendChild(e);var t=this.$webglInnerWidth,r=window.innerHeight;this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,1,8e4),this.camera.position.set(-600,550,1300),this.ambientLight=new this.$THREE.AmbientLight(3355443),this.light=new this.$THREE.DirectionalLight(16777215,1),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(t,r),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,e.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1),this.cameraControls=new n.b(this.camera,this.renderer.domElement),this.cameraControls.addEventListener("change",this.render);var i=new this.$THREE.TextureLoader,s=i.load("staic/textures/uv_grid_opengl.jpg");s.wrapS=s.wrapT=this.$THREE.RepeatWrapping,s.anisotropy=16,s.encoding=this.$THREE.sRGBEncoding;var a=i.load("staic/textures/floors/FloorsCheckerboard_S_Diffuse.jpg"),o=i.load("staic/textures/floors/FloorsCheckerboard_S_Normal.jpg"),l="staic/textures/cube/pisa/",h=[l+"px.png",l+"nx.png",l+"py.png",l+"ny.png",l+"pz.png",l+"nz.png"];this.textureCube=(new this.$THREE.CubeTextureLoader).load(h),this.textureCube.encoding=this.$THREE.sRGBEncoding;var c=new this.$THREE.Color;c.setRGB(1,1,1),this.wireMaterial=new this.$THREE.MeshBasicMaterial({color:16777215,wireframe:!0}),this.flatMaterial=new this.$THREE.MeshPhongMaterial({color:c,specular:0,flatShading:!0,side:this.$THREE.DoubleSide}),this.gouraudMaterial=new this.$THREE.MeshLambertMaterial({color:c,side:this.$THREE.DoubleSide}),this.phongMaterial=new this.$THREE.MeshPhongMaterial({color:c,side:this.$THREE.DoubleSide}),this.texturedMaterial=new this.$THREE.MeshPhongMaterial({color:c,map:s,side:this.$THREE.DoubleSide}),this.normalMaterial=new this.$THREE.MeshPhongMaterial({color:c,map:a,normalMap:o,side:this.$THREE.DoubleSide}),this.reflectiveMaterial=new this.$THREE.MeshPhongMaterial({color:c,envMap:this.textureCube,side:this.$THREE.DoubleSide}),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(11184810),this.scene.add(this.ambientLight),this.scene.add(this.light),this.setupGui()},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},setupGui:function(){var e;this.effectController={shininess:40,ka:.17,kd:.51,ks:.2,metallic:!0,hue:.121,saturation:.73,lightness:.66,lhue:.04,lsaturation:.01,llightness:1,lx:.32,ly:.39,lz:.7,newTess:15,bottom:!0,lid:!0,body:!0,fitLid:!1,nonblinn:!1,newShading:"glossy"},this.gui=new i.a,(e=this.gui.addFolder("Material control")).add(this.effectController,"shininess",1,400,1).name("shininess").onChange(this.render),e.add(this.effectController,"kd",0,1,.025).name("diffuse strength").onChange(this.render),e.add(this.effectController,"ks",0,1,.025).name("specular strength").onChange(this.render),e.add(this.effectController,"metallic").onChange(this.render),(e=this.gui.addFolder("Material color")).add(this.effectController,"hue",0,1,.025).name("hue").onChange(this.render),e.add(this.effectController,"saturation",0,1,.025).name("saturation").onChange(this.render),e.add(this.effectController,"lightness",0,1,.025).name("lightness").onChange(this.render),(e=this.gui.addFolder("Lighting")).add(this.effectController,"lhue",0,1,.025).name("hue").onChange(this.render),e.add(this.effectController,"lsaturation",0,1,.025).name("saturation").onChange(this.render),e.add(this.effectController,"llightness",0,1,.025).name("lightness").onChange(this.render),e.add(this.effectController,"ka",0,1,.025).name("ambient").onChange(this.render),(e=this.gui.addFolder("Light direction")).add(this.effectController,"lx",-1,1,.025).name("x").onChange(this.render),e.add(this.effectController,"ly",-1,1,.025).name("y").onChange(this.render),e.add(this.effectController,"lz",-1,1,.025).name("z").onChange(this.render),(e=this.gui.addFolder("Tessellation control")).add(this.effectController,"newTess",[2,3,4,5,6,8,10,15,20,30,40,50]).name("Tessellation Level").onChange(this.render),e.add(this.effectController,"lid").name("display lid").onChange(this.render),e.add(this.effectController,"body").name("display body").onChange(this.render),e.add(this.effectController,"bottom").name("display bottom").onChange(this.render),e.add(this.effectController,"fitLid").name("snug lid").onChange(this.render),e.add(this.effectController,"nonblinn").name("original scale").onChange(this.render),this.gui.add(this.effectController,"newShading",["wireframe","flat","smooth","glossy","textured","normal","reflective"]).name("Shading").onChange(this.render),document.getElementById("export").addEventListener("click",this.exportCollada)},render:function(){this.effectController.newTess===this.tess&&this.effectController.bottom===this.bBottom&&this.effectController.lid===this.bLid&&this.effectController.body===this.bBody&&this.effectController.fitLid===this.bFitLid&&this.effectController.nonblinn===this.bNonBlinn&&this.effectController.newShading===this.shading||(this.tess=this.effectController.newTess,this.bBottom=this.effectController.bottom,this.bLid=this.effectController.lid,this.bBody=this.effectController.body,this.bFitLid=this.effectController.fitLid,this.bNonBlinn=this.effectController.nonblinn,this.shading=this.effectController.newShading,this.createNewTeapot()),this.phongMaterial.shininess=this.effectController.shininess,this.texturedMaterial.shininess=this.effectController.shininess,this.normalMaterial.shininess=this.effectController.shininess,this.diffuseColor.setHSL(this.effectController.hue,this.effectController.saturation,this.effectController.lightness),this.effectController.metallic?this.specularColor.copy(this.diffuseColor):this.specularColor.setRGB(1,1,1),this.diffuseColor.multiplyScalar(this.effectController.kd),this.flatMaterial.color.copy(this.diffuseColor),this.gouraudMaterial.color.copy(this.diffuseColor),this.phongMaterial.color.copy(this.diffuseColor),this.texturedMaterial.color.copy(this.diffuseColor),this.normalMaterial.color.copy(this.diffuseColor),this.specularColor.multiplyScalar(this.effectController.ks),this.phongMaterial.specular.copy(this.specularColor),this.texturedMaterial.specular.copy(this.specularColor),this.normalMaterial.specular.copy(this.specularColor),this.ambientLight.color.setHSL(this.effectController.hue,this.effectController.saturation,this.effectController.lightness*this.effectController.ka),this.light.position.set(this.effectController.lx,this.effectController.ly,this.effectController.lz),this.light.color.setHSL(this.effectController.lhue,this.effectController.lsaturation,this.effectController.llightness),"reflective"===this.shading?this.scene.background=this.textureCube:this.scene.background=null,this.renderer.render(this.scene,this.camera)},createNewTeapot:function(){null!==this.teapot&&(this.teapot.geometry.dispose(),this.scene.remove(this.teapot));var e=new o.a(this.teapotSize,this.tess,this.effectController.bottom,this.effectController.lid,this.effectController.body,this.effectController.fitLid,!this.effectController.nonblinn);this.teapot=new this.$THREE.Mesh(e,"wireframe"===this.shading?this.wireMaterial:"flat"===this.shading?this.flatMaterial:"smooth"===this.shading?this.gouraudMaterial:"glossy"===this.shading?this.phongMaterial:"textured"===this.shading?this.texturedMaterial:"normal"===this.shading?this.normalMaterial:this.reflectiveMaterial),this.scene.add(this.teapot)},exportCollada:function(){var e=this,t=this.exporter.parse(this.teapot),r="Phong";"wireframe"===this.shading&&(r="Constant"),"smooth"===this.shading&&(r="Lambert"),this.saveString(t.data,"teapot_"+this.shading+"_"+r+".dae"),t.textures.forEach(function(t){e.saveArrayBuffer(t.data,t.name+"."+t.ext)})},save:function(e,t){this.link.href=URL.createObjectURL(e),this.link.download=t,this.link.click()},saveString:function(e,t){this.save(new Blob([e],{type:"text/plain"}),t)},saveArrayBuffer:function(e,t){this.save(new Blob([e],{type:"application/octet-stream"}),t)}}},h={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"miscExporterCollada-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" webgl - exporter - collada"),t("br"),t("br"),this._v(" "),t("button",{attrs:{id:"export"}},[this._v("Export COLLADA")])])])}]};var c=r("VU/8")(l,h,!1,function(e){r("Dxpk")},"data-v-1547b2bb",null);t.default=c.exports},Dxpk:function(e,t){}});
//# sourceMappingURL=216.f1fe5ccea0dea3f56235.js.map