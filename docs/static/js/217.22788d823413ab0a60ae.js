webpackJsonp([217],{ZTw0:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var s=e("QEtz"),n=e("wIBv"),o={data:function(){return{group:null,container:null,stats:null,particlesData:[],camera:null,scene:null,renderer:null,positions:null,colors:null,particles:null,pointCloud:null,particlePositions:null,linesMesh:null,maxParticleCount:1e3,particleCount:500,r:800,rHalf:null,effectController:{showDots:!0,showLines:!0,minDistance:150,limitConnections:!1,maxConnections:20,particleCount:500},gui:null}},mounted:function(){this.rHalf=this.r/2,this.init(),this.animate()},beforeDestroy:function(){this.gui.destroy()},methods:{initGUI:function(){var t=this;this.gui=new s.a,this.gui.add(this.effectController,"showDots").onChange(function(i){t.pointCloud.visible=i}),this.gui.add(this.effectController,"showLines").onChange(function(i){t.linesMesh.visible=i}),this.gui.add(this.effectController,"minDistance",10,300),this.gui.add(this.effectController,"limitConnections"),this.gui.add(this.effectController,"maxConnections",0,30,1),this.gui.add(this.effectController,"particleCount",0,this.maxParticleCount,1).onChange(function(i){t.particleCount=parseInt(i),t.particles.setDrawRange(0,t.particleCount)})},init:function(){this.initGUI(),this.container=document.getElementById("container"),this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,1,4e3),this.camera.position.z=1750;var t=new n.b(this.camera,this.container);t.minDistance=1e3,t.maxDistance=3e3,this.scene=new this.$THREE.Scene,this.group=new this.$THREE.Group,this.scene.add(this.group);var i=new this.$THREE.BoxHelper(new this.$THREE.Mesh(new this.$THREE.BoxBufferGeometry(this.r,this.r,this.r)));i.material.color.setHex(1052688),i.material.blending=this.$THREE.AdditiveBlending,i.material.transparent=!0,this.group.add(i);var e=this.maxParticleCount*this.maxParticleCount;this.positions=new Float32Array(3*e),this.colors=new Float32Array(3*e);var s=new this.$THREE.PointsMaterial({color:16777215,size:3,blending:this.$THREE.AdditiveBlending,transparent:!0,sizeAttenuation:!1});this.particles=new this.$THREE.BufferGeometry,this.particlePositions=new Float32Array(3*this.maxParticleCount);for(var o=0;o<this.maxParticleCount;o++){var r=Math.random()*this.r-this.r/2,a=Math.random()*this.r-this.r/2,h=Math.random()*this.r-this.r/2;this.particlePositions[3*o]=r,this.particlePositions[3*o+1]=a,this.particlePositions[3*o+2]=h,this.particlesData.push({velocity:new this.$THREE.Vector3(2*Math.random()-1,2*Math.random()-1,2*Math.random()-1),numConnections:0})}this.particles.setDrawRange(0,this.particleCount),this.particles.setAttribute("position",new this.$THREE.BufferAttribute(this.particlePositions,3).setUsage(this.$THREE.DynamicDrawUsage)),this.pointCloud=new this.$THREE.Points(this.particles,s),this.group.add(this.pointCloud);var l=new this.$THREE.BufferGeometry;l.setAttribute("position",new this.$THREE.BufferAttribute(this.positions,3).setUsage(this.$THREE.DynamicDrawUsage)),l.setAttribute("color",new this.$THREE.BufferAttribute(this.colors,3).setUsage(this.$THREE.DynamicDrawUsage)),l.computeBoundingSphere(),l.setDrawRange(0,0);var c=new this.$THREE.LineBasicMaterial({vertexColors:!0,blending:this.$THREE.AdditiveBlending,transparent:!0});this.linesMesh=new this.$THREE.LineSegments(l,c),this.group.add(this.linesMesh),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.container.appendChild(this.renderer.domElement),this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){for(var t=0,i=0,e=0,s=0;s<this.particleCount;s++)this.particlesData[s].numConnections=0;for(s=0;s<this.particleCount;s++){var n=this.particlesData[s];if(this.particlePositions[3*s]+=n.velocity.x,this.particlePositions[3*s+1]+=n.velocity.y,this.particlePositions[3*s+2]+=n.velocity.z,(this.particlePositions[3*s+1]<-this.rHalf||this.particlePositions[3*s+1]>this.rHalf)&&(n.velocity.y=-n.velocity.y),(this.particlePositions[3*s]<-this.rHalf||this.particlePositions[3*s]>this.rHalf)&&(n.velocity.x=-n.velocity.x),(this.particlePositions[3*s+2]<-this.rHalf||this.particlePositions[3*s+2]>this.rHalf)&&(n.velocity.z=-n.velocity.z),!(this.effectController.limitConnections&&n.numConnections>=this.effectController.maxConnections))for(var o=s+1;o<this.particleCount;o++){var r=this.particlesData[o];if(!(this.effectController.limitConnections&&r.numConnections>=this.effectController.maxConnections)){var a=this.particlePositions[3*s]-this.particlePositions[3*o],h=this.particlePositions[3*s+1]-this.particlePositions[3*o+1],l=this.particlePositions[3*s+2]-this.particlePositions[3*o+2],c=Math.sqrt(a*a+h*h+l*l);if(c<this.effectController.minDistance){n.numConnections++,r.numConnections++;var u=1-c/this.effectController.minDistance;this.positions[t++]=this.particlePositions[3*s],this.positions[t++]=this.particlePositions[3*s+1],this.positions[t++]=this.particlePositions[3*s+2],this.positions[t++]=this.particlePositions[3*o],this.positions[t++]=this.particlePositions[3*o+1],this.positions[t++]=this.particlePositions[3*o+2],this.colors[i++]=u,this.colors[i++]=u,this.colors[i++]=u,this.colors[i++]=u,this.colors[i++]=u,this.colors[i++]=u,e++}}}}this.linesMesh.geometry.setDrawRange(0,2*e),this.linesMesh.geometry.attributes.position.needsUpdate=!0,this.linesMesh.geometry.attributes.color.needsUpdate=!0,this.pointCloud.geometry.attributes.position.needsUpdate=!0,requestAnimationFrame(this.animate),this.stats.update(),this.render()},render:function(){var t=.001*Date.now();this.group.rotation.y=.1*t,this.renderer.render(this.scene,this.camera)}}},r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,i=this._self._c||t;return i("div",{staticClass:"webglBuffergeometryDrawrange-container"},[i("div",{attrs:{id:"container"}}),this._v(" "),i("div",{attrs:{id:"info"}},[i("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" webgl - buffergeometry drawrange"),i("br"),this._v("\n\t\t\tby "),i("a",{attrs:{href:"https://twitter.com/fernandojsg"}},[this._v("fernandojsg")])])])}]};var a=e("VU/8")(o,r,!1,function(t){e("p3Cm")},"data-v-50a12b81",null);i.default=a.exports},p3Cm:function(t,i){}});
//# sourceMappingURL=217.22788d823413ab0a60ae.js.map