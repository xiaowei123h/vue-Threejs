webpackJsonp([22],{EiNy:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("TWUs"),s=i("qxm1"),h=i("VVsa"),o={data:function(){return{SHADOW_MAP_WIDTH:2048,SHADOW_MAP_HEIGHT:1024,SCREEN_WIDTH:null,SCREEN_HEIGHT:null,FLOOR:-250,camera:null,controls:null,scene:null,renderer:null,container:null,stats:null,NEAR:10,FAR:3e3,mixer:null,morphs:[],light:null,lightShadowMapViewer:null,clock:null,showHUD:!1}},mounted:function(){this.SCREEN_WIDTH=this.$webglInnerWidth,this.SCREEN_HEIGHT=window.innerHeight,this.clock=new this.$THREE.Clock,this.init(),this.animate()},methods:{init:function(){this.container=document.createElement("div"),document.getElementsByClassName("webglShadowmap-container")[0].appendChild(this.container),this.camera=new this.$THREE.PerspectiveCamera(23,this.SCREEN_WIDTH/this.SCREEN_HEIGHT,this.NEAR,this.FAR),this.camera.position.set(700,50,1900),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(5850923),this.scene.fog=new this.$THREE.Fog(5850923,1e3,this.FAR);var e=new this.$THREE.AmbientLight(4473924);this.scene.add(e),this.light=new this.$THREE.SpotLight(16777215,1,0,Math.PI/5,.3),this.light.position.set(0,1500,1e3),this.light.target.position.set(0,0,0),this.light.castShadow=!0,this.light.shadow.camera.near=1200,this.light.shadow.camera.far=2500,this.light.shadow.bias=1e-4,this.light.shadow.mapSize.width=this.SHADOW_MAP_WIDTH,this.light.shadow.mapSize.height=this.SHADOW_MAP_HEIGHT,this.scene.add(this.light),this.createHUD(),this.createScene(),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.SCREEN_WIDTH,this.SCREEN_HEIGHT),this.container.appendChild(this.renderer.domElement),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.renderer.autoClear=!1,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=this.$THREE.PCFShadowMap,this.controls=new n.a(this.camera,this.renderer.domElement),this.controls.lookSpeed=.0125,this.controls.movementSpeed=500,this.controls.noFly=!1,this.controls.lookVertical=!0,this.controls.lookAt(this.scene.position),this.stats=new this.$Stats,window.addEventListener("resize",this.onWindowResize,!1),window.addEventListener("keydown",this.onKeyDown,!1)},onWindowResize:function(){this.SCREEN_WIDTH=window.innerWidth-281,this.SCREEN_HEIGHT=window.innerHeight,this.$onWindowResize(this.camera,this.renderer),this.controls.handleResize()},onKeyDown:function(e){switch(e.keyCode){case 84:this.showHUD=!this.showHUD}},createHUD:function(){this.lightShadowMapViewer=new h.a(this.light),this.lightShadowMapViewer.position.x=10,this.lightShadowMapViewer.position.y=this.SCREEN_HEIGHT-this.SHADOW_MAP_HEIGHT/4-10,this.lightShadowMapViewer.size.width=this.SHADOW_MAP_WIDTH/4,this.lightShadowMapViewer.size.height=this.SHADOW_MAP_HEIGHT/4,this.lightShadowMapViewer.update()},createScene:function(){var e=this,t=new this.$THREE.PlaneBufferGeometry(100,100),i=new this.$THREE.MeshPhongMaterial({color:16758865}),n=new this.$THREE.Mesh(t,i);n.position.set(0,this.FLOOR,0),n.rotation.x=-Math.PI/2,n.scale.set(100,100,100),n.castShadow=!1,n.receiveShadow=!0,this.scene.add(n),(new this.$THREE.FontLoader).load("static/fonts/helvetiker_bold.typeface.json",function(t){var i=new e.$THREE.TextBufferGeometry("this.$THREE.JS",{font:t,size:200,height:50,curveSegments:12,bevelThickness:2,bevelSize:5,bevelEnabled:!0});i.computeBoundingBox();var n=-.5*(i.boundingBox.max.x-i.boundingBox.min.x),s=new e.$THREE.MeshPhongMaterial({color:16711680,specular:16777215}),h=new e.$THREE.Mesh(i,s);h.position.x=n,h.position.y=e.FLOOR+67,h.castShadow=!0,h.receiveShadow=!0,e.scene.add(h)});var h=new this.$THREE.Mesh(new this.$THREE.BoxBufferGeometry(1500,220,150),i);h.position.y=this.FLOOR-50,h.position.z=20,h.castShadow=!0,h.receiveShadow=!0,this.scene.add(h);var o=new this.$THREE.Mesh(new this.$THREE.BoxBufferGeometry(1600,170,250),i);o.position.y=this.FLOOR-50,o.position.z=20,o.castShadow=!0,o.receiveShadow=!0,this.scene.add(o),this.mixer=new this.$THREE.AnimationMixer(this.scene);var a=this;function r(e,t,i,n,s,h,o,r){(e=e.clone()).material=e.material.clone(),r&&e.material.color.offsetHSL(0,.5*Math.random()-.25,.5*Math.random()-.25),e.speed=i,a.mixer.clipAction(t,e).setDuration(n).startAt(-n*Math.random()).play(),e.position.set(s,h,o),e.rotation.y=Math.PI/2,e.castShadow=!0,e.receiveShadow=!0,a.scene.add(e),a.morphs.push(e)}var d=new s.a;d.load("static/models/gltf/Horse.glb",function(t){var i=t.scene.children[0],n=t.animations[0];r(i,n,550,1,100-1e3*Math.random(),e.FLOOR,300,!0),r(i,n,550,1,100-1e3*Math.random(),e.FLOOR,450,!0),r(i,n,550,1,100-1e3*Math.random(),e.FLOOR,600,!0),r(i,n,550,1,100-1e3*Math.random(),e.FLOOR,-300,!0),r(i,n,550,1,100-1e3*Math.random(),e.FLOOR,-450,!0),r(i,n,550,1,100-1e3*Math.random(),e.FLOOR,-600,!0)}),d.load("static/models/gltf/Flamingo.glb",function(t){r(t.scene.children[0],t.animations[0],500,1,500-500*Math.random(),e.FLOOR+350,40)}),d.load("static/models/gltf/Stork.glb",function(t){r(t.scene.children[0],t.animations[0],350,1,500-500*Math.random(),e.FLOOR+350,340)}),d.load("static/models/gltf/Parrot.glb",function(t){r(t.scene.children[0],t.animations[0],450,.5,500-500*Math.random(),e.FLOOR+300,700)})},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){var e=this.clock.getDelta();this.mixer.update(e);for(var t=0;t<this.morphs.length;t++){var i=this.morphs[t];i.position.x+=i.speed*e,i.position.x>2e3&&(i.position.x=-1e3-500*Math.random())}this.controls.update(e),this.renderer.clear(),this.renderer.render(this.scene,this.camera),this.showHUD&&this.lightShadowMapViewer.render(this.renderer)}}},a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglShadowmap-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - shadowmap - models by "),t("a",{attrs:{href:"https://mirada.com/",target:"_blank",rel:"noopener"}},[this._v("mirada")]),this._v(" from "),t("a",{attrs:{href:"http://www.ro.me",target:"_blank",rel:"noopener"}},[this._v("rome")]),t("br"),this._v("\n            move camera with WASD / RF + mouse"),t("br"),this._v("\n            t: toggle HUD\n\t\t")])])}]};var r=i("VU/8")(o,a,!1,function(e){i("iI/w")},"data-v-499c4514",null);t.default=r.exports},VVsa:function(e,t,i){"use strict";i.d(t,"a",function(){return h});var n=i("6+nK"),s=i("rwxs"),h=function(e){var t,i=this,h=void 0!==e.name&&""!==e.name,o=10,a=10,r=256,d=256,l=new n.OrthographicCamera(window.innerWidth/-2,window.innerWidth/2,window.innerHeight/2,window.innerHeight/-2,1,10);l.position.set(0,0,2);var c,w,m=new n.Scene,p=s.a,u=n.UniformsUtils.clone(p.uniforms),E=new n.ShaderMaterial({uniforms:u,vertexShader:p.vertexShader,fragmentShader:p.fragmentShader}),g=new n.PlaneBufferGeometry(r,d),f=new n.Mesh(g,E);if(m.add(f),h){var H=(c=document.createElement("canvas")).getContext("2d");H.font="Bold 20px Arial";var R=H.measureText(e.name).width;c.width=R,c.height=25,H.font="Bold 20px Arial",H.fillStyle="rgba( 255, 0, 0, 1 )",H.fillText(e.name,0,20);var S=new n.Texture(c);S.magFilter=n.LinearFilter,S.minFilter=n.LinearFilter,S.needsUpdate=!0;var v=new n.MeshBasicMaterial({map:S,side:n.DoubleSide});v.transparent=!0;var M=new n.PlaneBufferGeometry(c.width,c.height);w=new n.Mesh(M,v),m.add(w)}this.enabled=!0,this.size={width:r,height:d,set:function(e,t){this.width=e,this.height=t,f.scale.set(this.width/r,this.height/d,1),i.position.set(i.position.x,i.position.y)}},this.position={x:o,y:a,set:function(e,t){this.x=e,this.y=t;var n=i.size.width,s=i.size.height;f.position.set(-window.innerWidth/2+n/2+this.x,window.innerHeight/2-s/2-this.y,0),h&&w.position.set(f.position.x,f.position.y-i.size.height/2+c.height/2,0)}},this.render=function(i){this.enabled&&(u.tDiffuse.value=e.shadow.map.texture,t=i.autoClear,i.autoClear=!1,i.clearDepth(),i.render(m,l),i.autoClear=t)},this.updateForWindowResize=function(){this.enabled&&(l.left=window.innerWidth/-2,l.right=window.innerWidth/2,l.top=window.innerHeight/2,l.bottom=window.innerHeight/-2,l.updateProjectionMatrix(),this.update())},this.update=function(){this.position.set(this.position.x,this.position.y),this.size.set(this.size.width,this.size.height)},this.update()};h.prototype.constructor=h},"iI/w":function(e,t){}});
//# sourceMappingURL=22.b6631d50f3cd590b9830.js.map