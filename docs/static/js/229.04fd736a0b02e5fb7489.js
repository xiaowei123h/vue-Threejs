webpackJsonp([229],{Vpfx:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("wIBv"),i=n("6+nK"),s=function(){};s.prototype={constructor:s,parse:function(e,t){void 0===t&&(t={});var n,r=void 0!==t.binary&&t.binary,s=[],o=0;e.traverse(function(e){if(e.isMesh){var t=e.geometry;t.isGeometry&&(t=(new i.BufferGeometry).fromGeometry(t));var n=t.index,r=t.getAttribute("position");o+=null!==n?n.count/3:r.count/3,s.push({object3d:e,geometry:t})}});var a=80;if(!0===r){var h=new ArrayBuffer(2*o+3*o*4*4+80+4);(n=new DataView(h)).setUint32(a,o,!0),a+=4}else n="",n+="solid exported\n";for(var c=new i.Vector3,l=new i.Vector3,d=new i.Vector3,m=new i.Vector3,u=new i.Vector3,p=new i.Vector3,f=0,w=s.length;f<w;f++){var v=s[f].object3d,E=s[f].geometry,x=E.index,y=E.getAttribute("position");if(null!==x)for(var b=0;b<x.count;b+=3){g(x.getX(b+0),x.getX(b+1),x.getX(b+2),y,v)}else for(b=0;b<y.count;b+=3){g(b+0,b+1,b+2,y,v)}}return!1===r&&(n+="endsolid exported\n"),n;function g(e,t,i,s,o){c.fromBufferAttribute(s,e),l.fromBufferAttribute(s,t),d.fromBufferAttribute(s,i),!0===o.isSkinnedMesh&&(o.boneTransform(e,c),o.boneTransform(t,l),o.boneTransform(i,d)),c.applyMatrix4(o.matrixWorld),l.applyMatrix4(o.matrixWorld),d.applyMatrix4(o.matrixWorld),function(e,t,i){m.subVectors(i,t),u.subVectors(e,t),m.cross(u).normalize(),p.copy(m).normalize(),!0===r?(n.setFloat32(a,p.x,!0),a+=4,n.setFloat32(a,p.y,!0),a+=4,n.setFloat32(a,p.z,!0),a+=4):(n+="\tfacet normal "+p.x+" "+p.y+" "+p.z+"\n",n+="\t\touter loop\n")}(c,l,d),R(c),R(l),R(d),!0===r?(n.setUint16(a,0,!0),a+=2):(n+="\t\tendloop\n",n+="\tendfacet\n")}function R(e){!0===r?(n.setFloat32(a,e.x,!0),a+=4,n.setFloat32(a,e.y,!0),a+=4,n.setFloat32(a,e.z,!0),a+=4):n+="\t\t\tvertex "+e.x+" "+e.y+" "+e.z+"\n"}}};var o={data:function(){return{scene:null,camera:null,renderer:null,exporter:null,mesh:null,link:null}},mounted:function(){this.link=document.createElement("a"),this.link.style.display="none",document.getElementsByClassName("miscExporterStl-container")[0].appendChild(this.link),this.init(),this.animate()},methods:{init:function(){this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.set(200,100,200),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(10526880),this.scene.fog=new this.$THREE.Fog(10526880,200,1e3),this.exporter=new s;var e=new this.$THREE.HemisphereLight(16777215,4473924);e.position.set(0,200,0),this.scene.add(e);var t=new this.$THREE.DirectionalLight(16777215);t.position.set(0,200,100),t.castShadow=!0,t.shadow.camera.top=180,t.shadow.camera.bottom=-100,t.shadow.camera.left=-120,t.shadow.camera.right=120,this.scene.add(t);var n=new this.$THREE.Mesh(new this.$THREE.PlaneBufferGeometry(2e3,2e3),new this.$THREE.MeshPhongMaterial({color:10066329,depthWrite:!1}));n.rotation.x=-Math.PI/2,n.receiveShadow=!0,this.scene.add(n);var i=new this.$THREE.GridHelper(2e3,20,0,0);i.material.opacity=.2,i.material.transparent=!0,this.scene.add(i);var o=new this.$THREE.BoxBufferGeometry(50,50,50),a=new this.$THREE.MeshPhongMaterial({color:65280});this.mesh=new this.$THREE.Mesh(o,a),this.mesh.castShadow=!0,this.mesh.position.y=25,this.scene.add(this.mesh),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,document.getElementsByClassName("miscExporterStl-container")[0].appendChild(this.renderer.domElement);var h=new r.b(this.camera,this.renderer.domElement);h.target.set(0,25,0),h.update(),window.addEventListener("resize",this.onWindowResize,!1),document.getElementById("exportASCII").addEventListener("click",this.exportASCII),document.getElementById("exportBinary").addEventListener("click",this.exportBinary)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},exportASCII:function(){var e=this.exporter.parse(this.mesh);this.saveString(e,"box.stl")},exportBinary:function(){var e=this.exporter.parse(this.mesh,{binary:!0});this.saveArrayBuffer(e,"box.stl")},save:function(e,t){this.link.href=URL.createObjectURL(e),this.link.download=t,this.link.click()},saveString:function(e,t){this.save(new Blob([e],{type:"text/plain"}),t)},saveArrayBuffer:function(e,t){this.save(new Blob([e],{type:"application/octet-stream"}),t)}}},a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"miscExporterStl-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" webgl - exporter - stl"),t("br"),t("br"),this._v(" "),t("button",{attrs:{id:"exportASCII"}},[this._v("export ASCII")]),this._v(" "),t("button",{attrs:{id:"exportBinary"}},[this._v("export binary")])])])}]};var h=n("VU/8")(o,a,!1,function(e){n("sAKV")},"data-v-4a676326",null);t.default=h.exports},sAKV:function(e,t){}});
//# sourceMappingURL=229.04fd736a0b02e5fb7489.js.map