webpackJsonp([23],{"/wAK":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("Iu6k"),o=n("6+nK"),a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=3,l=1024,c=4;function h(e,t,n,i,o,a){var s=e.image.data,c=r*l*a;s[t*r+c+0]=n,s[t*r+c+1]=i,s[t*r+c+2]=o}var p=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;s(this,e);var i=t.clone(),a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=new Float32Array(l*c*e*r),n=new o.z(t,l,c*e,o._56,o.N);return n.wrapS=o._64,n.wrapY=o._64,n.magFilter=o._29,n.needsUpdate=!0,n}(n),h={spineTexture:{value:a},pathOffset:{type:"f",value:0},pathSegment:{type:"f",value:1},spineOffset:{type:"f",value:161},spineLength:{type:"f",value:400},flow:{type:"i",value:1}};i.traverse(function(e){(e instanceof o._22||e instanceof o.X)&&(e.material=e.material.clone(),function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;e.__ok||(e.__ok=!0,e.onBeforeCompile=function(e){if(!e.__modified){e.__modified=!0,Object.assign(e.uniforms,t);var i=("\n\t\t#define USE_ENVMAP\n\t\tuniform sampler2D spineTexture;\n\t\tuniform float pathOffset;\n\t\tuniform float pathSegment;\n\t\tuniform float spineOffset;\n\t\tuniform float spineLength;\n\t\tuniform int flow;\n\n\t\tfloat textureLayers = "+c*n+".;\n\t\tfloat textureStacks = "+c/4+".;\n\n\t\t"+e.vertexShader+"\n\t\t").replace("#include <defaultnormal_vertex>","\n\t\tvec4 worldPos = modelMatrix * vec4(position, 1.);\n\n\t\tbool bend = flow > 0;\n\t\tfloat xWeight = bend ? 0. : 1.;\n\n\t\t#ifdef USE_INSTANCING\n\t\tfloat pathOffsetFromInstanceMatrix = instanceMatrix[3][2];\n\t\tfloat spineLengthFromInstanceMatrix = instanceMatrix[3][0];\n\t\tfloat spinePortion = bend ? (worldPos.x + spineOffset) / spineLengthFromInstanceMatrix : 0.;\n\t\tfloat mt = (spinePortion * pathSegment + pathOffset + pathOffsetFromInstanceMatrix)*textureStacks;\n\t\t#else\n\t\tfloat spinePortion = bend ? (worldPos.x + spineOffset) / spineLength : 0.;\n\t\tfloat mt = (spinePortion * pathSegment + pathOffset)*textureStacks;\n\t\t#endif\n\n\t\tmt = mod(mt, textureStacks);\n\t\tfloat rowOffset = floor(mt);\n\n\t\t#ifdef USE_INSTANCING\n\t\trowOffset += instanceMatrix[3][1] * "+c+".;\n\t\t#endif\n\n\t\tvec3 spinePos = texture(spineTexture, vec2(mt, (0. + rowOffset + 0.5) / textureLayers)).xyz;\n\t\tvec3 a =        texture(spineTexture, vec2(mt, (1. + rowOffset + 0.5) / textureLayers)).xyz;\n\t\tvec3 b =        texture(spineTexture, vec2(mt, (2. + rowOffset + 0.5) / textureLayers)).xyz;\n\t\tvec3 c =        texture(spineTexture, vec2(mt, (3. + rowOffset + 0.5) / textureLayers)).xyz;\n\t\tmat3 basis = mat3(a, b, c);\n\n\t\tvec3 transformed = basis\n\t\t\t* vec3(worldPos.x * xWeight, worldPos.y * 1., worldPos.z * 1.)\n\t\t\t+ spinePos;\n\n\t\tvec3 transformedNormal = normalMatrix * (basis * objectNormal);\n\t\t").replace("#include <begin_vertex>","").replace("#include <project_vertex>","\n\t\t\tvec4 mvPosition = viewMatrix * vec4( transformed, 1.0 );\n\t\t\t// vec4 mvPosition = viewMatrix * worldPos;\n\t\t\tgl_Position = projectionMatrix * mvPosition;\n\t\t\t");e.vertexShader=i}})}(e.material,h,n))}),this.curveArray=new Array(n),this.curveLengthArray=new Array(n),this.object3D=i,this.splineTexure=a,this.uniforms=h}return a(e,[{key:"updateCurve",value:function(e,t){if(e>=this.curveArray.length)throw Error("Index out of range for Flow");var n=t.getLength();this.uniforms.spineLength.value=n,this.curveLengthArray[e]=n,this.curveArray[e]=t,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=Math.floor(l*(c/4));t.arcLengthDivisions=i/2,t.updateArcLengths();for(var o=t.getSpacedPoints(i),a=t.computeFrenetFrames(i,!0),s=0;s<i;s++){var r=Math.floor(s/l),p=s%l,u=o[s];h(e,p,u.x,u.y,u.z,0+r+c*n),h(e,p,(u=a.tangents[s]).x,u.y,u.z,1+r+c*n),h(e,p,(u=a.normals[s]).x,u.y,u.z,2+r+c*n),h(e,p,(u=a.binormals[s]).x,u.y,u.z,3+r+c*n)}e.needsUpdate=!0}(this.splineTexure,t,e)}},{key:"moveAlongCurve",value:function(e){this.uniforms.pathOffset.value+=e}}]),e}(),u=new o._21,d=(function(e){function t(e,n,i,a){s(this,t);var r=new o.X(i,a,e);r.instanceMatrix.setUsage(o.F);var l=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,r,n));return l.offsets=new Array(e).fill(0),l.whichCurve=new Array(e).fill(0),l}(function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)})(t,p),a(t,[{key:"writeChanges",value:function(e){u.makeTranslation(this.curveLengthArray[this.whichCurve[e]],this.whichCurve[e],this.offsets[e]),this.object3D.setMatrixAt(e,u),this.object3D.instanceMatrix.needsUpdate=!0}},{key:"moveIndividualAlongCurve",value:function(e,t){this.offsets[e]+=t,this.writeChanges(e)}},{key:"setCurve",value:function(e,t){if(isNaN(t))throw Error("curve index being set is Not a Number (NaN)");this.whichCurve[e]=t,this.writeChanges(e)}}])}(),{data:function(){return{ACTION_SELECT:1,ACTION_NONE:0,curveHandles:[],mouse:null,stats:null,scene:null,camera:null,renderer:null,rayCaster:null,control:null,flow:null,action:null}},mounted:function(){this.mouse=new this.$THREE.Vector2,this.action=this.ACTION_NONE,this.init(),this.animate()},methods:{init:function(){var e=this;this.scene=new this.$THREE.Scene,this.camera=new this.$THREE.PerspectiveCamera(40,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.set(2,2,4),this.camera.lookAt(this.scene.position);var t=new this.$THREE.BoxBufferGeometry(.1,.1,.1),n=new this.$THREE.MeshBasicMaterial(10092441),o=!0,a=!1,s=void 0;try{for(var r,l=[{x:1,y:0,z:-1},{x:1,y:0,z:1},{x:-1,y:0,z:1},{x:-1,y:0,z:-1}][Symbol.iterator]();!(o=(r=l.next()).done);o=!0){var c=r.value,h=new this.$THREE.Mesh(t,n);h.position.copy(c),this.curveHandles.push(h),this.scene.add(h)}}catch(e){a=!0,s=e}finally{try{!o&&l.return&&l.return()}finally{if(a)throw s}}var u=new this.$THREE.CatmullRomCurve3(this.curveHandles.map(function(e){return e.position}));u.curveType="centripetal",u.closed=!0;var d=u.getPoints(50),w=new this.$THREE.LineLoop((new this.$THREE.BufferGeometry).setFromPoints(d),new this.$THREE.LineBasicMaterial({color:65280}));this.scene.add(w);var m=new this.$THREE.DirectionalLight(16755251);m.position.set(-10,10,10),m.intensity=1,this.scene.add(m);var f=new this.$THREE.AmbientLight(14707);f.intensity=1,this.scene.add(f),(new this.$THREE.FontLoader).load("static/fonts/helvetiker_regular.typeface.json",function(t){var n=new e.$THREE.TextBufferGeometry("Hello three.js!",{font:t,size:.2,height:.05,curveSegments:12,bevelEnabled:!0,bevelThickness:.02,bevelSize:.01,bevelOffset:0,bevelSegments:5});n.rotateX(Math.PI);var i=new e.$THREE.MeshStandardMaterial({color:10092543}),o=new e.$THREE.Mesh(n,i);e.flow=new p(o),e.flow.updateCurve(0,u),e.scene.add(e.flow.object3D)}),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglModifierCurve-container")[0].appendChild(this.renderer.domElement),this.renderer.domElement.addEventListener("pointerdown",this.onPointerDown,!1),this.rayCaster=new this.$THREE.Raycaster,this.control=new i.a(this.camera,this.renderer.domElement),this.control.addEventListener("dragging-changed",function(t){if(!t.value){var n=u.getPoints(50);w.geometry.setFromPoints(n),e.flow.updateCurve(0,u)}}),this.stats=new this.$Stats,this.stats.dom.style.left="280px",document.getElementsByClassName("webglModifierCurve-container")[0].appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},onPointerDown:function(e){this.action=this.ACTION_SELECT,this.mouse.x=e.clientX/(window.innerWidth-281)*2-1,this.mouse.y=-e.clientY/window.innerHeight*2+1},animate:function(){if(requestAnimationFrame(this.animate),this.action===this.ACTION_SELECT){this.rayCaster.setFromCamera(this.mouse,this.camera),this.action=this.ACTION_NONE;var e=this.rayCaster.intersectObjects(this.curveHandles);if(e.length){var t=e[0].object;this.control.attach(t),this.scene.add(this.control)}}this.flow&&this.flow.moveAlongCurve(.001),this.render()},render:function(){this.renderer.render(this.scene,this.camera),this.stats.update()}}}),w={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglModifierCurve-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" webgl - curve modifier\n\t\t")])])}]};var m=n("VU/8")(d,w,!1,function(e){n("COL+")},"data-v-526e0f10",null);t.default=m.exports},"COL+":function(e,t){},Iu6k:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n("6+nK"),o=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),i._36.call(this),this.visible=!1,this.domElement=t;var n=new a;this.add(n);var o=new s;this.add(o);var r=this;H("camera",e),H("object",void 0),H("enabled",!0),H("axis",null),H("mode","translate"),H("translationSnap",null),H("rotationSnap",null),H("scaleSnap",null),H("space","world"),H("size",1),H("dragging",!1),H("showX",!0),H("showY",!0),H("showZ",!0);var l={type:"change"},c={type:"mouseDown"},h={type:"mouseUp",mode:r.mode},p={type:"objectChange"},u=new i._63;function d(e,t,n){for(var i=t.intersectObject(e,!0),o=0;o<i.length;o++)if(i[o].object.visible||n)return i[o];return!1}var w=new i._92,m=new i._92,f=new i._48,v={X:new i._92(1,0,0),Y:new i._92(0,1,0),Z:new i._92(0,0,1)},y=new i._92,_=new i._92,b=new i._92,g=new i._92,x=new i._92,M=new i._92,E=0,P=new i._92,S=new i._48,I=new i._92,X=new i._92,T=new i._48,Y=new i._48,Z=new i._92,C=new i._92,z=new i._48,A=new i._92,O=new i._92,j=new i._48,L=new i._48,k=new i._92,Q=new i._92,R=new i._92,F=new i._48,N=new i._92;function H(e,t){var i=t;Object.defineProperty(r,e,{get:function(){return void 0!==i?i:t},set:function(t){i!==t&&(i=t,o[e]=t,n[e]=t,r.dispatchEvent({type:e+"-changed",value:t}),r.dispatchEvent(l))}}),r[e]=t,o[e]=t,n[e]=t}function W(e){if(r.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var n=e.changedTouches?e.changedTouches[0]:e,i=t.getBoundingClientRect();return{x:(n.clientX-i.left)/i.width*2-1,y:-(n.clientY-i.top)/i.height*2+1,button:e.button}}function $(e){if(r.enabled)switch(e.pointerType){case"mouse":case"pen":r.pointerHover(W(e))}}function D(e){r.enabled&&(r.domElement.style.touchAction="none",r.domElement.ownerDocument.addEventListener("pointermove",q,!1),r.pointerHover(W(e)),r.pointerDown(W(e)))}function q(e){r.enabled&&r.pointerMove(W(e))}function U(e){r.enabled&&(r.domElement.style.touchAction="",r.domElement.ownerDocument.removeEventListener("pointermove",q,!1),r.pointerUp(W(e)))}H("worldPosition",O),H("worldPositionStart",C),H("worldQuaternion",j),H("worldQuaternionStart",z),H("cameraPosition",P),H("cameraQuaternion",S),H("pointStart",y),H("pointEnd",_),H("rotationAxis",g),H("rotationAngle",E),H("eye",Q),t.addEventListener("pointerdown",D,!1),t.addEventListener("pointermove",$,!1),r.domElement.ownerDocument.addEventListener("pointerup",U,!1),this.dispose=function(){t.removeEventListener("pointerdown",D),t.removeEventListener("pointermove",$),r.domElement.ownerDocument.removeEventListener("pointermove",q),r.domElement.ownerDocument.removeEventListener("pointerup",U),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(X,T,Z),this.object.matrixWorld.decompose(O,j,k),Y.copy(T).invert(),L.copy(j).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(P,S,I),Q.copy(P).sub(O).normalize(),i._36.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging){u.setFromCamera(e,this.camera);var t=d(n.picker[this.mode],u);this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){u.setFromCamera(e,this.camera);var t=d(o,u,!0);if(t){var n=this.space;if("scale"===this.mode?n="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(n="world"),"local"===n&&"rotate"===this.mode){var i=this.rotationSnap;"X"===this.axis&&i&&(this.object.rotation.x=Math.round(this.object.rotation.x/i)*i),"Y"===this.axis&&i&&(this.object.rotation.y=Math.round(this.object.rotation.y/i)*i),"Z"===this.axis&&i&&(this.object.rotation.z=Math.round(this.object.rotation.z/i)*i)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),R.copy(this.object.position),F.copy(this.object.quaternion),N.copy(this.object.scale),this.object.matrixWorld.decompose(C,z,A),y.copy(t.point).sub(C)}this.dragging=!0,c.mode=this.mode,this.dispatchEvent(c)}},this.pointerMove=function(e){var t=this.axis,n=this.mode,i=this.object,a=this.space;if("scale"===n?a="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(a="world"),void 0!==i&&null!==t&&!1!==this.dragging&&-1===e.button){u.setFromCamera(e,this.camera);var s=d(o,u,!0);if(s){if(_.copy(s.point).sub(C),"translate"===n)b.copy(_).sub(y),"local"===a&&"XYZ"!==t&&b.applyQuaternion(L),-1===t.indexOf("X")&&(b.x=0),-1===t.indexOf("Y")&&(b.y=0),-1===t.indexOf("Z")&&(b.z=0),"local"===a&&"XYZ"!==t?b.applyQuaternion(F).divide(Z):b.applyQuaternion(Y).divide(Z),i.position.copy(b).add(R),this.translationSnap&&("local"===a&&(i.position.applyQuaternion(f.copy(F).invert()),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.position.applyQuaternion(F)),"world"===a&&(i.parent&&i.position.add(w.setFromMatrixPosition(i.parent.matrixWorld)),-1!==t.search("X")&&(i.position.x=Math.round(i.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(i.position.y=Math.round(i.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(i.position.z=Math.round(i.position.z/this.translationSnap)*this.translationSnap),i.parent&&i.position.sub(w.setFromMatrixPosition(i.parent.matrixWorld))));else if("scale"===n){if(-1!==t.search("XYZ")){var r=_.length()/y.length();_.dot(y)<0&&(r*=-1),m.set(r,r,r)}else w.copy(y),m.copy(_),w.applyQuaternion(L),m.applyQuaternion(L),m.divide(w),-1===t.search("X")&&(m.x=1),-1===t.search("Y")&&(m.y=1),-1===t.search("Z")&&(m.z=1);i.scale.copy(N).multiply(m),this.scaleSnap&&(-1!==t.search("X")&&(i.scale.x=Math.round(i.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(i.scale.y=Math.round(i.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(i.scale.z=Math.round(i.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===n){b.copy(_).sub(y);var c=20/O.distanceTo(w.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(g.copy(Q),E=_.angleTo(y),x.copy(y).normalize(),M.copy(_).normalize(),E*=M.cross(x).dot(Q)<0?1:-1):"XYZE"===t?(g.copy(b).cross(Q).normalize(),E=b.dot(w.copy(g).cross(this.eye))*c):"X"!==t&&"Y"!==t&&"Z"!==t||(g.copy(v[t]),w.copy(v[t]),"local"===a&&w.applyQuaternion(j),E=b.dot(w.cross(Q).normalize())*c),this.rotationSnap&&(E=Math.round(E/this.rotationSnap)*this.rotationSnap),this.rotationAngle=E,"local"===a&&"E"!==t&&"XYZE"!==t?(i.quaternion.copy(F),i.quaternion.multiply(f.setFromAxisAngle(g,E)).normalize()):(g.applyQuaternion(Y),i.quaternion.copy(f.setFromAxisAngle(g,E)),i.quaternion.multiply(F).normalize())}this.dispatchEvent(l),this.dispatchEvent(p)}}},this.pointerUp=function(e){0===e.button&&(this.dragging&&null!==this.axis&&(h.mode=this.mode,this.dispatchEvent(h)),this.dragging=!1,this.axis=null)},this.getMode=function(){return r.mode},this.setMode=function(e){r.mode=e},this.setTranslationSnap=function(e){r.translationSnap=e},this.setRotationSnap=function(e){r.rotationSnap=e},this.setScaleSnap=function(e){r.scaleSnap=e},this.setSize=function(e){r.size=e},this.setSpace=function(e){r.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};o.prototype=Object.assign(Object.create(i._36.prototype),{constructor:o,isTransformControls:!0});var a=function(){i._36.call(this),this.type="TransformControlsGizmo";var e=new i._23({depthTest:!1,depthWrite:!1,transparent:!0,side:i.E,fog:!1,toneMapped:!1}),t=new i._7({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),n=e.clone();n.opacity=.15;var o=e.clone();o.opacity=.33;var a=e.clone();a.color.set(16711680);var s=e.clone();s.color.set(65280);var r=e.clone();r.color.set(255);var l=e.clone();l.opacity=.25;var c=l.clone();c.color.set(16776960);var h=l.clone();h.color.set(65535);var p=l.clone();p.color.set(16711935),e.clone().color.set(16776960);var u=t.clone();u.color.set(16711680);var d=t.clone();d.color.set(65280);var w=t.clone();w.color.set(255);var m=t.clone();m.color.set(65535);var f=t.clone();f.color.set(16711935);var v=t.clone();v.color.set(16776960);var y=t.clone();y.color.set(7895160);var _=v.clone();_.opacity=.25;var b=new i.y(0,.05,.2,12,1,!1),g=new i.i(.125,.125,.125),x=new i.k;x.setAttribute("position",new i.M([0,0,0,1,0,0],3));var M,E=function(e,t){for(var n=new i.k,o=[],a=0;a<=64*t;++a)o.push(0,Math.cos(a/32*Math.PI)*e,Math.sin(a/32*Math.PI)*e);return n.setAttribute("position",new i.M(o,3)),n},P={X:[[new i._22(b,a),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new i._22(b,a),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new i._5(x,u)]],Y:[[new i._22(b,s),[0,1,0],null,null,"fwd"],[new i._22(b,s),[0,1,0],[Math.PI,0,0],null,"bwd"],[new i._5(x,d),null,[0,0,Math.PI/2]]],Z:[[new i._22(b,r),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new i._22(b,r),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new i._5(x,w),null,[0,-Math.PI/2,0]]],XYZ:[[new i._22(new i._37(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new i._22(new i._43(.295,.295),c.clone()),[.15,.15,0]],[new i._5(x,v),[.18,.3,0],null,[.125,1,1]],[new i._5(x,v),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new i._22(new i._43(.295,.295),h.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new i._5(x,m),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new i._5(x,m),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new i._22(new i._43(.295,.295),p.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new i._5(x,f),[.18,0,.3],null,[.125,1,1]],[new i._5(x,f),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},S={X:[[new i._22(new i.y(.2,0,1,4,1,!1),n),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new i._22(new i.y(.2,0,1,4,1,!1),n),[0,.6,0]]],Z:[[new i._22(new i.y(.2,0,1,4,1,!1),n),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new i._22(new i._37(.2,0),n)]],XY:[[new i._22(new i._43(.4,.4),n),[.2,.2,0]]],YZ:[[new i._22(new i._43(.4,.4),n),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new i._22(new i._43(.4,.4),n),[.2,0,.2],[-Math.PI/2,0,0]]]},I={START:[[new i._22(new i._37(.01,2),o),null,null,null,"helper"]],END:[[new i._22(new i._37(.01,2),o),null,null,null,"helper"]],DELTA:[[new i._5((M=new i.k,M.setAttribute("position",new i.M([0,0,0,1,1,1],3)),M),o),null,null,null,"helper"]],X:[[new i._5(x,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new i._5(x,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new i._5(x,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},X={X:[[new i._5(E(1,.5),u)],[new i._22(new i._37(.04,0),a),[0,0,.99],null,[1,3,1]]],Y:[[new i._5(E(1,.5),d),null,[0,0,-Math.PI/2]],[new i._22(new i._37(.04,0),s),[0,0,.99],null,[3,1,1]]],Z:[[new i._5(E(1,.5),w),null,[0,Math.PI/2,0]],[new i._22(new i._37(.04,0),r),[.99,0,0],null,[1,3,1]]],E:[[new i._5(E(1.25,1),_),null,[0,Math.PI/2,0]],[new i._22(new i.y(.03,0,.15,4,1,!1),_),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new i._22(new i.y(.03,0,.15,4,1,!1),_),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new i._22(new i.y(.03,0,.15,4,1,!1),_),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new i._22(new i.y(.03,0,.15,4,1,!1),_),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new i._5(E(1,1),y),null,[0,Math.PI/2,0]]]},T={AXIS:[[new i._5(x,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Y={X:[[new i._22(new i._81(1,.1,4,24),n),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new i._22(new i._81(1,.1,4,24),n),[0,0,0],[Math.PI/2,0,0]]],Z:[[new i._22(new i._81(1,.1,4,24),n),[0,0,0],[0,0,-Math.PI/2]]],E:[[new i._22(new i._81(1.25,.1,2,24),n)]],XYZE:[[new i._22(new i._73(.7,10,8),n)]]},Z={X:[[new i._22(g,a),[.8,0,0],[0,0,-Math.PI/2]],[new i._5(x,u),null,null,[.8,1,1]]],Y:[[new i._22(g,s),[0,.8,0]],[new i._5(x,d),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new i._22(g,r),[0,0,.8],[Math.PI/2,0,0]],[new i._5(x,w),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new i._22(g,c),[.85,.85,0],null,[2,2,.2]],[new i._5(x,v),[.855,.98,0],null,[.125,1,1]],[new i._5(x,v),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new i._22(g,h),[0,.85,.85],null,[.2,2,2]],[new i._5(x,m),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new i._5(x,m),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new i._22(g,p),[.85,0,.85],null,[2,.2,2]],[new i._5(x,f),[.855,0,.98],null,[.125,1,1]],[new i._5(x,f),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new i._22(new i.i(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new i._22(new i.i(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new i._22(new i.i(.125,.125,.125),l.clone()),[0,0,1.1]]]},C={X:[[new i._22(new i.y(.2,0,.8,4,1,!1),n),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new i._22(new i.y(.2,0,.8,4,1,!1),n),[0,.5,0]]],Z:[[new i._22(new i.y(.2,0,.8,4,1,!1),n),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new i._22(g,n),[.85,.85,0],null,[3,3,.2]]],YZ:[[new i._22(g,n),[0,.85,.85],null,[.2,3,3]]],XZ:[[new i._22(g,n),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new i._22(new i.i(.2,.2,.2),n),[1.1,0,0]]],XYZY:[[new i._22(new i.i(.2,.2,.2),n),[0,1.1,0]]],XYZZ:[[new i._22(new i.i(.2,.2,.2),n),[0,0,1.1]]]},z={X:[[new i._5(x,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new i._5(x,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new i._5(x,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},A=function(e){var t=new i._36;for(var n in e)for(var o=e[n].length;o--;){var a=e[n][o][0].clone(),s=e[n][o][1],r=e[n][o][2],l=e[n][o][3],c=e[n][o][4];a.name=n,a.tag=c,s&&a.position.set(s[0],s[1],s[2]),r&&a.rotation.set(r[0],r[1],r[2]),l&&a.scale.set(l[0],l[1],l[2]),a.updateMatrix();var h=a.geometry.clone();h.applyMatrix4(a.matrix),a.geometry=h,a.renderOrder=1/0,a.position.set(0,0,0),a.rotation.set(0,0,0),a.scale.set(1,1,1),t.add(a)}return t},O=new i._92(0,0,0),j=new i.I,L=new i._92(0,1,0),k=new i._92(0,0,0),Q=new i._21,R=new i._48,F=new i._48,N=new i._48,H=new i._92(1,0,0),W=new i._92(0,1,0),$=new i._92(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=A(P)),this.add(this.gizmo.rotate=A(X)),this.add(this.gizmo.scale=A(Z)),this.add(this.picker.translate=A(S)),this.add(this.picker.rotate=A(Y)),this.add(this.picker.scale=A(C)),this.add(this.helper.translate=A(I)),this.add(this.helper.rotate=A(T)),this.add(this.helper.scale=A(z)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:N;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var n=[];n=(n=(n=n.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var o=0;o<n.length;o++){var a,s=n[o];if(s.visible=!0,s.rotation.set(0,0,0),s.position.copy(this.worldPosition),a=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),s.scale.set(1,1,1).multiplyScalar(a*this.size/7),"helper"!==s.tag){if(s.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){"X"!==s.name&&"XYZX"!==s.name||Math.abs(L.copy(H).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"Y"!==s.name&&"XYZY"!==s.name||Math.abs(L.copy(W).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"Z"!==s.name&&"XYZZ"!==s.name||Math.abs(L.copy($).applyQuaternion(t).dot(this.eye))>.99&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"XY"===s.name&&Math.abs(L.copy($).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"YZ"===s.name&&Math.abs(L.copy(H).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),"XZ"===s.name&&Math.abs(L.copy(W).applyQuaternion(t).dot(this.eye))<.2&&(s.scale.set(1e-10,1e-10,1e-10),s.visible=!1),-1!==s.name.search("X")&&(L.copy(H).applyQuaternion(t).dot(this.eye)<0?"fwd"===s.tag?s.visible=!1:s.scale.x*=-1:"bwd"===s.tag&&(s.visible=!1)),-1!==s.name.search("Y")&&(L.copy(W).applyQuaternion(t).dot(this.eye)<0?"fwd"===s.tag?s.visible=!1:s.scale.y*=-1:"bwd"===s.tag&&(s.visible=!1)),-1!==s.name.search("Z")&&(L.copy($).applyQuaternion(t).dot(this.eye)<0?"fwd"===s.tag?s.visible=!1:s.scale.z*=-1:"bwd"===s.tag&&(s.visible=!1))}else"rotate"===this.mode&&(F.copy(t),L.copy(this.eye).applyQuaternion(R.copy(t).invert()),-1!==s.name.search("E")&&s.quaternion.setFromRotationMatrix(Q.lookAt(this.eye,k,W)),"X"===s.name&&(R.setFromAxisAngle(H,Math.atan2(-L.y,L.z)),R.multiplyQuaternions(F,R),s.quaternion.copy(R)),"Y"===s.name&&(R.setFromAxisAngle(W,Math.atan2(L.x,L.z)),R.multiplyQuaternions(F,R),s.quaternion.copy(R)),"Z"===s.name&&(R.setFromAxisAngle($,Math.atan2(L.y,L.x)),R.multiplyQuaternions(F,R),s.quaternion.copy(R)));s.visible=s.visible&&(-1===s.name.indexOf("X")||this.showX),s.visible=s.visible&&(-1===s.name.indexOf("Y")||this.showY),s.visible=s.visible&&(-1===s.name.indexOf("Z")||this.showZ),s.visible=s.visible&&(-1===s.name.indexOf("E")||this.showX&&this.showY&&this.showZ),s.material._opacity=s.material._opacity||s.material.opacity,s.material._color=s.material._color||s.material.color.clone(),s.material.color.copy(s.material._color),s.material.opacity=s.material._opacity,this.enabled?this.axis&&(s.name===this.axis?(s.material.opacity=1,s.material.color.lerp(new i.p(1,1,1),.5)):this.axis.split("").some(function(e){return s.name===e})?(s.material.opacity=1,s.material.color.lerp(new i.p(1,1,1),.5)):(s.material.opacity*=.25,s.material.color.lerp(new i.p(1,1,1),.5))):(s.material.opacity*=.5,s.material.color.lerp(new i.p(1,1,1),.5))}else s.visible=!1,"AXIS"===s.name?(s.position.copy(this.worldPositionStart),s.visible=!!this.axis,"X"===this.axis&&(R.setFromEuler(j.set(0,0,0)),s.quaternion.copy(t).multiply(R),Math.abs(L.copy(H).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),"Y"===this.axis&&(R.setFromEuler(j.set(0,0,Math.PI/2)),s.quaternion.copy(t).multiply(R),Math.abs(L.copy(W).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),"Z"===this.axis&&(R.setFromEuler(j.set(0,Math.PI/2,0)),s.quaternion.copy(t).multiply(R),Math.abs(L.copy($).applyQuaternion(t).dot(this.eye))>.9&&(s.visible=!1)),"XYZE"===this.axis&&(R.setFromEuler(j.set(0,Math.PI/2,0)),L.copy(this.rotationAxis),s.quaternion.setFromRotationMatrix(Q.lookAt(k,L,W)),s.quaternion.multiply(R),s.visible=this.dragging),"E"===this.axis&&(s.visible=!1)):"START"===s.name?(s.position.copy(this.worldPositionStart),s.visible=this.dragging):"END"===s.name?(s.position.copy(this.worldPosition),s.visible=this.dragging):"DELTA"===s.name?(s.position.copy(this.worldPositionStart),s.quaternion.copy(this.worldQuaternionStart),O.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),O.applyQuaternion(this.worldQuaternionStart.clone().invert()),s.scale.copy(O),s.visible=this.dragging):(s.quaternion.copy(t),this.dragging?s.position.copy(this.worldPositionStart):s.position.copy(this.worldPosition),this.axis&&(s.visible=-1!==this.axis.search(s.name)))}i._36.prototype.updateMatrixWorld.call(this)}};a.prototype=Object.assign(Object.create(i._36.prototype),{constructor:a,isTransformControlsGizmo:!0});var s=function(){i._22.call(this,new i._43(1e5,1e5,2,2),new i._23({visible:!1,wireframe:!0,side:i.E,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane";var e=new i._92(1,0,0),t=new i._92(0,1,0),n=new i._92(0,0,1),o=new i._92,a=new i._92,s=new i._92,r=new i._21,l=new i._48;this.updateMatrixWorld=function(){var c=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(c="local"),e.set(1,0,0).applyQuaternion("local"===c?this.worldQuaternion:l),t.set(0,1,0).applyQuaternion("local"===c?this.worldQuaternion:l),n.set(0,0,1).applyQuaternion("local"===c?this.worldQuaternion:l),s.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":s.copy(this.eye).cross(e),a.copy(e).cross(s);break;case"Y":s.copy(this.eye).cross(t),a.copy(t).cross(s);break;case"Z":s.copy(this.eye).cross(n),a.copy(n).cross(s);break;case"XY":a.copy(n);break;case"YZ":a.copy(e);break;case"XZ":s.copy(n),a.copy(t);break;case"XYZ":case"E":a.set(0,0,0)}break;case"rotate":default:a.set(0,0,0)}0===a.length()?this.quaternion.copy(this.cameraQuaternion):(r.lookAt(o.set(0,0,0),a,s),this.quaternion.setFromRotationMatrix(r)),i._36.prototype.updateMatrixWorld.call(this)}};s.prototype=Object.assign(Object.create(i._22.prototype),{constructor:s,isTransformControlsPlane:!0})}});
//# sourceMappingURL=23.47e66d3f628c2cd55f3e.js.map