webpackJsonp([241],{f6Q5:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("QEtz"),s=i("wIBv"),n={data:function(){return{Vertices:[],Indices:[0,1,2,0,2,3,0,3,1,1,3,2],Planes:null,PlaneMatrices:null,GlobalClippingPlanes:null,Empty:null,camera:null,scene:null,renderer:null,startTime:null,stats:null,object:null,clipMaterial:null,volumeVisualization:null,globalClippingPlanes:null,gui:null,transform:null,tmpMatrix:null}},mounted:function(){this.Vertices=[new this.$THREE.Vector3(1,0,+Math.SQRT1_2),new this.$THREE.Vector3(-1,0,+Math.SQRT1_2),new this.$THREE.Vector3(0,1,-Math.SQRT1_2),new this.$THREE.Vector3(0,-1,-Math.SQRT1_2)],this.Planes=this.planesFromMesh(this.Vertices,this.Indices),this.PlaneMatrices=this.Planes.map(this.planeToMatrix()),this.GlobalClippingPlanes=this.cylindricalPlanes(5,2.5),this.Empty=Object.freeze([]),this.transform=new this.$THREE.Matrix4,this.tmpMatrix=new this.$THREE.Matrix4,this.init(),this.animate()},beforeDestroy:function(){this.gui.destroy()},methods:{planesFromMesh:function(e,t){for(var i=t.length/3,a=new Array(i),s=0,n=0;s<i;++s,n+=3){var r=e[t[n]],l=e[t[n+1]],o=e[t[n+2]];a[s]=(new this.$THREE.Plane).setFromCoplanarPoints(r,l,o)}return a},createPlanes:function(e){for(var t=new Array(e),i=0;i!==e;++i)t[i]=new this.$THREE.Plane;return t},assignTransformedPlanes:function(e,t,i){for(var a=0,s=t.length;a!==s;++a)e[a].copy(t[a]).applyMatrix4(i)},cylindricalPlanes:function(e,t){for(var i=this.createPlanes(e),a=0;a!==e;++a){var s=i[a],n=a*Math.PI*2/e;s.normal.set(Math.cos(n),0,Math.sin(n)),s.varant=t}return i},planeToMatrix:function(){var e=new this.$THREE.Vector3,t=new this.$THREE.Vector3,i=new this.$THREE.Vector3,a=this;return function(s){var n=s.normal,r=new a.$THREE.Matrix4;return Math.abs(n.x)>Math.abs(n.z)?t.set(-n.y,n.x,0):t.set(0,-n.z,n.y),e.crossVectors(t.normalize(),n),s.coplanarPoint(i),r.set(e.x,t.x,n.x,i.x,e.y,t.y,n.y,i.y,e.z,t.z,n.z,i.z,0,0,0,1)}},init:function(){this.camera=new this.$THREE.PerspectiveCamera(36,this.$webglInnerWidth/window.innerHeight,.25,16),this.camera.position.set(0,1.5,3),this.scene=new this.$THREE.Scene,this.scene.add(new this.$THREE.AmbientLight(16777215,.3));var e=new this.$THREE.SpotLight(16777215,.5);e.angle=Math.PI/5,e.penumbra=.2,e.position.set(2,3,3),e.castShadow=!0,e.shadow.camera.near=3,e.shadow.camera.far=10,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,this.scene.add(e);var t=new this.$THREE.DirectionalLight(16777215,.5);t.position.set(0,2,0),t.castShadow=!0,t.shadow.camera.near=1,t.shadow.camera.far=10,t.shadow.camera.right=1,t.shadow.camera.left=-1,t.shadow.camera.top=1,t.shadow.camera.bottom=-1,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,this.scene.add(t),this.clipMaterial=new this.$THREE.MeshPhongMaterial({color:15600144,shininess:100,side:this.$THREE.DoubleSide,clippingPlanes:this.createPlanes(this.Planes.length),clipShadows:!0}),this.object=new this.$THREE.Group;for(var i=new this.$THREE.BoxBufferGeometry(.18,.18,.18),n=-2;n<=2;++n)for(var r=-2;r<=2;++r)for(var l=-2;l<=2;++l){(p=new this.$THREE.Mesh(i,this.clipMaterial)).position.set(l/5,r/5,n/5),p.castShadow=!0,this.object.add(p)}this.scene.add(this.object);var o=new this.$THREE.PlaneBufferGeometry(3,3,1,1),h=new this.$THREE.Color;this.volumeVisualization=new this.$THREE.Group,this.volumeVisualization.visible=!1;for(var d=0,c=this.Planes.length;d!==c;++d){var p,u=new this.$THREE.MeshBasicMaterial({color:h.setHSL(d/c,.5,.5).getHex(),side:this.$THREE.DoubleSide,opacity:.2,transparent:!0,clippingPlanes:this.clipMaterial.clippingPlanes.filter(function(e,t){return t!==d})});(p=new this.$THREE.Mesh(o,u)).matrixAutoUpdate=!1,this.volumeVisualization.add(p)}this.scene.add(this.volumeVisualization);var m=new this.$THREE.Mesh(o,new this.$THREE.MeshPhongMaterial({color:10530223,shininess:10}));m.rotation.x=-Math.PI/2,m.scale.multiplyScalar(3),m.receiveShadow=!0,this.scene.add(m);var E=document.getElementsByClassName("webglClippingAdvanced-container")[0];this.renderer=new this.$THREE.WebGLRenderer,this.renderer.shadowMap.enabled=!0,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),window.addEventListener("resize",this.onWindowResize,!1),E.appendChild(this.renderer.domElement),this.globalClippingPlanes=this.createPlanes(this.GlobalClippingPlanes.length),this.renderer.clippingPlanes=this.Empty,this.renderer.localClippingEnabled=!0,this.stats=new this.$Stats,this.stats.dom.style.left="280px",E.appendChild(this.stats.dom);var w=new s.b(this.camera,this.renderer.domElement);w.minDistance=1,w.maxDistance=8,w.target.set(0,1,0),w.update(),this.gui=new a.a;var g=this,f=this.gui.addFolder("Local Clipping"),b={get Enabled(){return g.renderer.localClippingEnabled},set Enabled(e){g.renderer.localClippingEnabled=e,e||(g.volumeVisualization.visible=!1)},get Shadows(){return g.clipMaterial.clipShadows},set Shadows(e){g.clipMaterial.clipShadows=e},get Visualize(){return g.volumeVisualization.visible},set Visualize(e){g.renderer.localClippingEnabled&&(g.volumeVisualization.visible=e)}};f.add(b,"Enabled"),f.add(b,"Shadows"),f.add(b,"Visualize").listen(),this.gui.addFolder("Global Clipping").add({get Enabled(){return g.renderer.clippingPlanes!==g.Empty},set Enabled(e){g.renderer.clippingPlanes=e?g.globalClippingPlanes:g.Empty}},"Enabled"),this.startTime=Date.now()},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},setObjectWorldMatrix:function(e,t){var i=e.parent;this.scene.updateMatrixWorld(),e.matrix.copy(i.matrixWorld).invert(),e.applyMatrix4(t)},animate:function(){var e=(Date.now()-this.startTime)/1e3;requestAnimationFrame(this.animate),this.object.position.y=1,this.object.rotation.x=.5*e,this.object.rotation.y=.2*e,this.object.updateMatrix(),this.transform.copy(this.object.matrix);var t=.5*Math.cos(.5*e)+.7;this.transform.multiply(this.tmpMatrix.makeScale(t,t,t)),this.assignTransformedPlanes(this.clipMaterial.clippingPlanes,this.Planes,this.transform);for(var i=0,a=this.volumeVisualization.children.length;i!==a;++i)this.tmpMatrix.multiplyMatrices(this.transform,this.PlaneMatrices[i]);this.transform.makeRotationY(.1*e),this.assignTransformedPlanes(this.globalClippingPlanes,this.GlobalClippingPlanes,this.transform),this.stats.begin(),this.renderer.render(this.scene,this.camera),this.stats.end()}}},r={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"webglClippingAdvanced-container"})},staticRenderFns:[]};var l=i("VU/8")(n,r,!1,function(e){i("yqSh")},"data-v-4449de4e",null);t.default=l.exports},yqSh:function(e,t){}});
//# sourceMappingURL=241.419c7a7e0bad53be5075.js.map