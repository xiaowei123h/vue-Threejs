webpackJsonp([251],{"6bKl":function(e,t,o){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=o("6+nK"),n=function(e,t){void 0===t&&(console.warn('THREE.PointerLockControls: The second parameter "domElement" is now mandatory.'),t=document.body),this.domElement=t,this.isLocked=!1,this.minPolarAngle=0,this.maxPolarAngle=Math.PI;var o,n=this,r={type:"change"},s={type:"lock"},c={type:"unlock"},a=new i.Euler(0,0,0,"YXZ"),h=Math.PI/2,l=new i.Vector3;function m(t){if(!1!==n.isLocked){var o=t.movementX||t.mozMovementX||t.webkitMovementX||0,i=t.movementY||t.mozMovementY||t.webkitMovementY||0;a.setFromQuaternion(e.quaternion),a.y-=.002*o,a.x-=.002*i,a.x=Math.max(h-n.maxPolarAngle,Math.min(h-n.minPolarAngle,a.x)),e.quaternion.setFromEuler(a),n.dispatchEvent(r)}}function d(){n.domElement.ownerDocument.pointerLockElement===n.domElement?(n.dispatchEvent(s),n.isLocked=!0):(n.dispatchEvent(c),n.isLocked=!1)}function u(){console.error("THREE.PointerLockControls: Unable to use Pointer Lock API")}this.connect=function(){n.domElement.ownerDocument.addEventListener("mousemove",m,!1),n.domElement.ownerDocument.addEventListener("pointerlockchange",d,!1),n.domElement.ownerDocument.addEventListener("pointerlockerror",u,!1)},this.disconnect=function(){n.domElement.ownerDocument.removeEventListener("mousemove",m,!1),n.domElement.ownerDocument.removeEventListener("pointerlockchange",d,!1),n.domElement.ownerDocument.removeEventListener("pointerlockerror",u,!1)},this.dispose=function(){this.disconnect()},this.getObject=function(){return e},this.getDirection=(o=new i.Vector3(0,0,-1),function(t){return t.copy(o).applyQuaternion(e.quaternion)}),this.moveForward=function(t){l.setFromMatrixColumn(e.matrix,0),l.crossVectors(e.up,l),e.position.addScaledVector(l,t)},this.moveRight=function(t){l.setFromMatrixColumn(e.matrix,0),e.position.addScaledVector(l,t)},this.lock=function(){this.domElement.requestPointerLock()},this.unlock=function(){n.domElement.ownerDocument.exitPointerLock()},this.connect()};(n.prototype=Object.create(i.EventDispatcher.prototype)).constructor=n;var r={data:function(){return{camera:null,scene:null,renderer:null,controls:null,objects:[],raycaster:null,moveForward:!1,moveBackward:!1,moveLeft:!1,moveRight:!1,canJump:!1,prevTime:null,velocity:null,direction:null,vertex:null,color:null}},mounted:function(){this.prevTime=performance.now(),this.velocity=new this.$THREE.Vector3,this.direction=new this.$THREE.Vector3,this.vertex=new this.$THREE.Vector3,this.color=new this.$THREE.Color,this.init(),this.animate()},methods:{init:function(){var e=this;this.camera=new this.$THREE.PerspectiveCamera(75,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.y=10,this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(16777215),this.scene.fog=new this.$THREE.Fog(16777215,0,750);var t=new this.$THREE.HemisphereLight(15658751,7829384,.75);t.position.set(.5,1,.75),this.scene.add(t),this.controls=new n(this.camera,document.getElementsByClassName("miscControlsPointerlock-container")[0]);var o=document.getElementById("blocker"),i=document.getElementById("instructions");i.addEventListener("click",function(){e.controls.lock()},!1),this.controls.addEventListener("lock",function(){i.style.display="none",o.style.display="none"}),this.controls.addEventListener("unlock",function(){o.style.display="block",i.style.display=""}),this.scene.add(this.controls.getObject());document.addEventListener("keydown",function(t){switch(t.keyCode){case 38:case 87:e.moveForward=!0;break;case 37:case 65:e.moveLeft=!0;break;case 40:case 83:e.moveBackward=!0;break;case 39:case 68:e.moveRight=!0;break;case 32:!0===e.canJump&&(e.velocity.y+=350),e.canJump=!1}},!1),document.addEventListener("keyup",function(t){switch(t.keyCode){case 38:case 87:e.moveForward=!1;break;case 37:case 65:e.moveLeft=!1;break;case 40:case 83:e.moveBackward=!1;break;case 39:case 68:e.moveRight=!1}},!1),this.raycaster=new this.$THREE.Raycaster(new this.$THREE.Vector3,new this.$THREE.Vector3(0,-1,0),0,10);var r=new this.$THREE.PlaneBufferGeometry(2e3,2e3,100,100);r.rotateX(-Math.PI/2);for(var s=r.attributes.position,c=0,a=s.count;c<a;c++)this.vertex.fromBufferAttribute(s,c),this.vertex.x+=20*Math.random()-10,this.vertex.y+=2*Math.random(),this.vertex.z+=20*Math.random()-10,s.setXYZ(c,this.vertex.x,this.vertex.y,this.vertex.z);var h=[];for(c=0,a=(s=(r=r.toNonIndexed()).attributes.position).count;c<a;c++)this.color.setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75),h.push(this.color.r,this.color.g,this.color.b);r.setAttribute("color",new this.$THREE.Float32BufferAttribute(h,3));var l=new this.$THREE.MeshBasicMaterial({vertexColors:!0}),m=new this.$THREE.Mesh(r,l);this.scene.add(m);var d=new this.$THREE.BoxBufferGeometry(20,20,20).toNonIndexed(),u=[];for(c=0,a=(s=d.attributes.position).count;c<a;c++)this.color.setHSL(.3*Math.random()+.5,.75,.25*Math.random()+.75),u.push(this.color.r,this.color.g,this.color.b);d.setAttribute("color",new this.$THREE.Float32BufferAttribute(u,3));for(c=0;c<500;c++){var v=new this.$THREE.MeshPhongMaterial({specular:16777215,flatShading:!0,vertexColors:!0});v.color.setHSL(.2*Math.random()+.5,.75,.25*Math.random()+.75);var E=new this.$THREE.Mesh(d,v);E.position.x=20*Math.floor(20*Math.random()-10),E.position.y=20*Math.floor(20*Math.random())+10,E.position.z=20*Math.floor(20*Math.random()-10),this.scene.add(E),this.objects.push(E)}this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("miscControlsPointerlock-container")[0].appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate);var e=performance.now();if(!0===this.controls.isLocked){this.raycaster.ray.origin.copy(this.controls.getObject().position),this.raycaster.ray.origin.y-=10;var t=this.raycaster.intersectObjects(this.objects).length>0,o=(e-this.prevTime)/1e3;this.velocity.x-=10*this.velocity.x*o,this.velocity.z-=10*this.velocity.z*o,this.velocity.y-=9.8*100*o,this.direction.z=Number(this.moveForward)-Number(this.moveBackward),this.direction.x=Number(this.moveRight)-Number(this.moveLeft),this.direction.normalize(),(this.moveForward||this.moveBackward)&&(this.velocity.z-=400*this.direction.z*o),(this.moveLeft||this.moveRight)&&(this.velocity.x-=400*this.direction.x*o),!0===t&&(this.velocity.y=Math.max(0,this.velocity.y),this.canJump=!0),this.controls.moveRight(-this.velocity.x*o),this.controls.moveForward(-this.velocity.z*o),this.controls.getObject().position.y+=this.velocity.y*o,this.controls.getObject().position.y<10&&(this.velocity.y=0,this.controls.getObject().position.y=10,this.canJump=!0)}this.prevTime=e,this.renderer.render(this.scene,this.camera)}}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"miscControlsPointerlock-container"},[t("div",{attrs:{id:"blocker"}},[t("div",{attrs:{id:"instructions"}},[t("span",{staticStyle:{"font-size":"36px"}},[this._v("Click to play")]),this._v(" "),t("br"),t("br"),this._v("\n\t\t\t\tMove: WASD"),t("br"),this._v("\n\t\t\t\tJump: SPACE"),t("br"),this._v("\n\t\t\t\tLook: MOUSE\n\t\t\t")])])])}]};var c=o("VU/8")(r,s,!1,function(e){o("NNLY")},"data-v-3fa7e675",null);t.default=c.exports},NNLY:function(e,t){}});
//# sourceMappingURL=251.8b83fb7900d9b473bbe6.js.map