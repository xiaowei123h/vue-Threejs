{"version":3,"sources":["webpack:///./src/components/jsm/controls/PointerLockControls.js","webpack:///src/views/misc/miscControlsPointerlock.vue","webpack:///./src/views/misc/miscControlsPointerlock.vue?2176","webpack:///./src/views/misc/miscControlsPointerlock.vue"],"names":["PointerLockControls","camera","domElement","undefined","console","warn","document","body","this","isLocked","minPolarAngle","maxPolarAngle","Math","PI","direction","scope","changeEvent","type","lockEvent","unlockEvent","euler","Euler","PI_2","vec","Vector3","onMouseMove","event","movementX","mozMovementX","webkitMovementX","movementY","mozMovementY","webkitMovementY","setFromQuaternion","quaternion","y","x","max","min","setFromEuler","dispatchEvent","onPointerlockChange","ownerDocument","pointerLockElement","onPointerlockError","error","connect","addEventListener","disconnect","removeEventListener","dispose","getObject","getDirection","v","copy","applyQuaternion","moveForward","distance","setFromMatrixColumn","matrix","crossVectors","up","position","addScaledVector","moveRight","lock","requestPointerLock","unlock","exitPointerLock","prototype","Object","create","EventDispatcher","constructor","miscControlsPointerlock","data","scene","renderer","controls","objects","raycaster","moveBackward","moveLeft","canJump","prevTime","velocity","vertex","color","mounted","performance","now","$THREE","Color","init","animate","methods","_this","PerspectiveCamera","$webglInnerWidth","window","innerHeight","Scene","background","fog","Fog","light","HemisphereLight","set","add","PointerLockControls_PointerLockControls","getElementsByClassName","blocker","getElementById","instructions","style","display","keyCode","Raycaster","floorGeometry","PlaneBufferGeometry","rotateX","attributes","i","l","count","fromBufferAttribute","random","z","setXYZ","colorsFloor","toNonIndexed","setHSL","push","r","g","b","setAttribute","Float32BufferAttribute","floorMaterial","MeshBasicMaterial","vertexColors","floor","Mesh","boxGeometry","BoxBufferGeometry","colorsBox","boxMaterial","MeshPhongMaterial","specular","flatShading","box","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","appendChild","onWindowResize","$onWindowResize","requestAnimationFrame","time","ray","origin","onObject","intersectObjects","length","delta","Number","normalize","render","misc_miscControlsPointerlock","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","id","staticStyle","font-size","_v","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/251.8b83fb7900d9b473bbe6.js","sourcesContent":["import {\r\n\tEuler,\r\n\tEventDispatcher,\r\n\tVector3\r\n} from \"@/components/build/three.module.js\";\r\n\r\nvar PointerLockControls = function ( camera, domElement ) {\r\n\r\n\tif ( domElement === undefined ) {\r\n\r\n\t\tconsole.warn( 'THREE.PointerLockControls: The second parameter \"domElement\" is now mandatory.' );\r\n\t\tdomElement = document.body;\r\n\r\n\t}\r\n\r\n\tthis.domElement = domElement;\r\n\tthis.isLocked = false;\r\n\r\n\t// Set to constrain the pitch of the camera\r\n\t// Range is 0 to Math.PI radians\r\n\tthis.minPolarAngle = 0; // radians\r\n\tthis.maxPolarAngle = Math.PI; // radians\r\n\r\n\t//\r\n\t// internals\r\n\t//\r\n\r\n\tvar scope = this;\r\n\r\n\tvar changeEvent = { type: 'change' };\r\n\tvar lockEvent = { type: 'lock' };\r\n\tvar unlockEvent = { type: 'unlock' };\r\n\r\n\tvar euler = new Euler( 0, 0, 0, 'YXZ' );\r\n\r\n\tvar PI_2 = Math.PI / 2;\r\n\r\n\tvar vec = new Vector3();\r\n\r\n\tfunction onMouseMove( event ) {\r\n\r\n\t\tif ( scope.isLocked === false ) return;\r\n\r\n\t\tvar movementX = event.movementX || event.mozMovementX || event.webkitMovementX || 0;\r\n\t\tvar movementY = event.movementY || event.mozMovementY || event.webkitMovementY || 0;\r\n\r\n\t\teuler.setFromQuaternion( camera.quaternion );\r\n\r\n\t\teuler.y -= movementX * 0.002;\r\n\t\teuler.x -= movementY * 0.002;\r\n\r\n\t\teuler.x = Math.max( PI_2 - scope.maxPolarAngle, Math.min( PI_2 - scope.minPolarAngle, euler.x ) );\r\n\r\n\t\tcamera.quaternion.setFromEuler( euler );\r\n\r\n\t\tscope.dispatchEvent( changeEvent );\r\n\r\n\t}\r\n\r\n\tfunction onPointerlockChange() {\r\n\r\n\t\tif ( scope.domElement.ownerDocument.pointerLockElement === scope.domElement ) {\r\n\r\n\t\t\tscope.dispatchEvent( lockEvent );\r\n\r\n\t\t\tscope.isLocked = true;\r\n\r\n\t\t} else {\r\n\r\n\t\t\tscope.dispatchEvent( unlockEvent );\r\n\r\n\t\t\tscope.isLocked = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\tfunction onPointerlockError() {\r\n\r\n\t\tconsole.error( 'THREE.PointerLockControls: Unable to use Pointer Lock API' );\r\n\r\n\t}\r\n\r\n\tthis.connect = function () {\r\n\r\n\t\tscope.domElement.ownerDocument.addEventListener( 'mousemove', onMouseMove, false );\r\n\t\tscope.domElement.ownerDocument.addEventListener( 'pointerlockchange', onPointerlockChange, false );\r\n\t\tscope.domElement.ownerDocument.addEventListener( 'pointerlockerror', onPointerlockError, false );\r\n\r\n\t};\r\n\r\n\tthis.disconnect = function () {\r\n\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'mousemove', onMouseMove, false );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerlockchange', onPointerlockChange, false );\r\n\t\tscope.domElement.ownerDocument.removeEventListener( 'pointerlockerror', onPointerlockError, false );\r\n\r\n\t};\r\n\r\n\tthis.dispose = function () {\r\n\r\n\t\tthis.disconnect();\r\n\r\n\t};\r\n\r\n\tthis.getObject = function () { // retaining this method for backward compatibility\r\n\r\n\t\treturn camera;\r\n\r\n\t};\r\n\r\n\tthis.getDirection = function () {\r\n\r\n\t\tvar direction = new Vector3( 0, 0, - 1 );\r\n\r\n\t\treturn function ( v ) {\r\n\r\n\t\t\treturn v.copy( direction ).applyQuaternion( camera.quaternion );\r\n\r\n\t\t};\r\n\r\n\t}();\r\n\r\n\tthis.moveForward = function ( distance ) {\r\n\r\n\t\t// move forward parallel to the xz-plane\r\n\t\t// assumes camera.up is y-up\r\n\r\n\t\tvec.setFromMatrixColumn( camera.matrix, 0 );\r\n\r\n\t\tvec.crossVectors( camera.up, vec );\r\n\r\n\t\tcamera.position.addScaledVector( vec, distance );\r\n\r\n\t};\r\n\r\n\tthis.moveRight = function ( distance ) {\r\n\r\n\t\tvec.setFromMatrixColumn( camera.matrix, 0 );\r\n\r\n\t\tcamera.position.addScaledVector( vec, distance );\r\n\r\n\t};\r\n\r\n\tthis.lock = function () {\r\n\r\n\t\tthis.domElement.requestPointerLock();\r\n\r\n\t};\r\n\r\n\tthis.unlock = function () {\r\n\r\n\t\tscope.domElement.ownerDocument.exitPointerLock();\r\n\r\n\t};\r\n\r\n\tthis.connect();\r\n\r\n};\r\n\r\nPointerLockControls.prototype = Object.create( EventDispatcher.prototype );\r\nPointerLockControls.prototype.constructor = PointerLockControls;\r\n\r\nexport { PointerLockControls };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/controls/PointerLockControls.js","<template>\r\n    <div class=\"miscControlsPointerlock-container\">\r\n        <div id=\"blocker\">\r\n\t\t\t<div id=\"instructions\">\r\n\t\t\t\t<span style=\"font-size:36px\">Click to play</span>\r\n\t\t\t\t<br /><br />\r\n\t\t\t\tMove: WASD<br/>\r\n\t\t\t\tJump: SPACE<br/>\r\n\t\t\t\tLook: MOUSE\r\n\t\t\t</div>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { PointerLockControls } from '@/components/jsm/controls/PointerLockControls.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            camera: null,\r\n            scene: null,\r\n            renderer: null,\r\n            controls: null,\r\n\t\t\tobjects: [],\r\n\t\t\traycaster: null,\r\n\t\t\tmoveForward: false,\r\n\t\t\tmoveBackward: false,\r\n\t\t\tmoveLeft: false,\r\n\t\t\tmoveRight: false,\r\n\t\t\tcanJump: false,\r\n\t\t\tprevTime: null,\r\n\t\t\tvelocity: null,\r\n\t\t\tdirection: null,\r\n\t\t\tvertex: null,\r\n\t\t\tcolor: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.prevTime = performance.now()\r\n        this.velocity = new this.$THREE.Vector3()\r\n        this.direction = new this.$THREE.Vector3()\r\n        this.vertex = new this.$THREE.Vector3()\r\n        this.color = new this.$THREE.Color()\r\n        this.init()\r\n\t\tthis.animate()\r\n    },\r\n    methods: {\r\n        init() {\r\n            this.camera = new this.$THREE.PerspectiveCamera(75, this.$webglInnerWidth / window.innerHeight, 1, 1000)\r\n            this.camera.position.y = 10\r\n            this.scene = new this.$THREE.Scene()\r\n            this.scene.background = new this.$THREE.Color(0xffffff)\r\n            this.scene.fog = new this.$THREE.Fog(0xffffff, 0, 750)\r\n            var light = new this.$THREE.HemisphereLight(0xeeeeff, 0x777788, 0.75)\r\n            light.position.set(0.5, 1, 0.75)\r\n            this.scene.add(light)\r\n            this.controls = new PointerLockControls(this.camera, document.getElementsByClassName('miscControlsPointerlock-container')[0])\r\n            var blocker = document.getElementById('blocker')\r\n            var instructions = document.getElementById('instructions')\r\n            instructions.addEventListener('click', () => {\r\n                this.controls.lock()\r\n            }, false)\r\n            this.controls.addEventListener('lock', () => {\r\n                instructions.style.display = 'none'\r\n                blocker.style.display = 'none'\r\n            })\r\n            this.controls.addEventListener('unlock', () => {\r\n                blocker.style.display = 'block'\r\n                instructions.style.display = ''\r\n            })\r\n            this.scene.add(this.controls.getObject())\r\n            var onKeyDown = (event) => {\r\n                switch (event.keyCode) {\r\n                    case 38: // up\r\n                    case 87: // w\r\n                        this.moveForward = true\r\n                        break\r\n                    case 37: // left\r\n                    case 65: // a\r\n                        this.moveLeft = true\r\n                        break\r\n                    case 40: // down\r\n                    case 83: // s\r\n                        this.moveBackward = true\r\n                        break\r\n                    case 39: // right\r\n                    case 68: // d\r\n                        this.moveRight = true\r\n                        break\r\n                    case 32: // space\r\n                        if (this.canJump === true) this.velocity.y += 350\r\n                        this.canJump = false\r\n                        break\r\n                }\r\n            };\r\n            var onKeyUp = (event) => {\r\n                switch (event.keyCode) {\r\n                    case 38: // up\r\n                    case 87: // w\r\n                        this.moveForward = false\r\n                        break\r\n                    case 37: // left\r\n                    case 65: // a\r\n                        this.moveLeft = false\r\n                        break\r\n                    case 40: // down\r\n                    case 83: // s\r\n                        this.moveBackward = false\r\n                        break\r\n                    case 39: // right\r\n                    case 68: // d\r\n                        this.moveRight = false\r\n                        break\r\n                }\r\n            }\r\n            document.addEventListener('keydown', onKeyDown, false)\r\n            document.addEventListener('keyup', onKeyUp, false)\r\n            this.raycaster = new this.$THREE.Raycaster(new this.$THREE.Vector3(), new this.$THREE.Vector3(0, - 1, 0), 0, 10)\r\n            // floor\r\n            var floorGeometry = new this.$THREE.PlaneBufferGeometry(2000, 2000, 100, 100)\r\n            floorGeometry.rotateX(- Math.PI / 2)\r\n            // vertex displacement\r\n            var position = floorGeometry.attributes.position\r\n            for (var i = 0, l = position.count; i < l; i ++) {\r\n                this.vertex.fromBufferAttribute(position, i)\r\n                this.vertex.x += Math.random() * 20 - 10\r\n                this.vertex.y += Math.random() * 2\r\n                this.vertex.z += Math.random() * 20 - 10\r\n                position.setXYZ(i, this.vertex.x, this.vertex.y, this.vertex.z)\r\n            }\r\n            floorGeometry = floorGeometry.toNonIndexed() // ensure each face has unique vertices\r\n            position = floorGeometry.attributes.position\r\n            var colorsFloor = []\r\n            for (var i = 0, l = position.count; i < l; i ++) {\r\n                this.color.setHSL(Math.random() * 0.3 + 0.5, 0.75, Math.random() * 0.25 + 0.75)\r\n                colorsFloor.push(this.color.r, this.color.g, this.color.b)\r\n            }\r\n            floorGeometry.setAttribute('color', new this.$THREE.Float32BufferAttribute(colorsFloor, 3))\r\n            var floorMaterial = new this.$THREE.MeshBasicMaterial({ vertexColors: true })\r\n            var floor = new this.$THREE.Mesh(floorGeometry, floorMaterial)\r\n            this.scene.add(floor)\r\n            // objects\r\n            var boxGeometry = new this.$THREE.BoxBufferGeometry(20, 20, 20).toNonIndexed()\r\n            position = boxGeometry.attributes.position\r\n            var colorsBox = []\r\n            for (var i = 0, l = position.count; i < l; i ++) {\r\n                this.color.setHSL(Math.random() * 0.3 + 0.5, 0.75, Math.random() * 0.25 + 0.75)\r\n                colorsBox.push(this.color.r, this.color.g, this.color.b)\r\n            }\r\n            boxGeometry.setAttribute('color', new this.$THREE.Float32BufferAttribute(colorsBox, 3))\r\n            for (var i = 0; i < 500; i ++) {\r\n                var boxMaterial = new this.$THREE.MeshPhongMaterial({ specular: 0xffffff, flatShading: true, vertexColors: true })\r\n                boxMaterial.color.setHSL(Math.random() * 0.2 + 0.5, 0.75, Math.random() * 0.25 + 0.75)\r\n                var box = new this.$THREE.Mesh(boxGeometry, boxMaterial)\r\n                box.position.x = Math.floor(Math.random() * 20 - 10) * 20\r\n                box.position.y = Math.floor(Math.random() * 20) * 20 + 10\r\n                box.position.z = Math.floor(Math.random() * 20 - 10) * 20\r\n                this.scene.add(box)\r\n                this.objects.push(box)\r\n            }\r\n            //\r\n            this.renderer = new this.$THREE.WebGLRenderer({ antialias: true })\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            document.getElementsByClassName('miscControlsPointerlock-container')[0].appendChild(this.renderer.domElement)\r\n            //\r\n            window.addEventListener('resize', this.onWindowResize, false)\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n        },\r\n        animate() {\r\n            requestAnimationFrame(this.animate)\r\n            var time = performance.now()\r\n            if (this.controls.isLocked === true) {\r\n                this.raycaster.ray.origin.copy(this.controls.getObject().position)\r\n                this.raycaster.ray.origin.y -= 10\r\n                var intersections = this.raycaster.intersectObjects(this.objects)\r\n                var onObject = intersections.length > 0\r\n                var delta = (time - this.prevTime) / 1000\r\n                this.velocity.x -= this.velocity.x * 10.0 * delta\r\n                this.velocity.z -= this.velocity.z * 10.0 * delta\r\n                this.velocity.y -= 9.8 * 100.0 * delta // 100.0 = mass\r\n                this.direction.z = Number(this.moveForward) - Number(this.moveBackward)\r\n                this.direction.x = Number(this.moveRight) - Number(this.moveLeft)\r\n                this.direction.normalize() // this ensures consistent movements in all this.directions\r\n                if (this.moveForward || this.moveBackward) this.velocity.z -= this.direction.z * 400.0 * delta\r\n                if (this.moveLeft || this.moveRight) this.velocity.x -= this.direction.x * 400.0 * delta\r\n                if (onObject === true) {\r\n                    this.velocity.y = Math.max(0, this.velocity.y)\r\n                    this.canJump = true\r\n                }\r\n                this.controls.moveRight(- this.velocity.x * delta)\r\n                this.controls.moveForward(- this.velocity.z * delta)\r\n                this.controls.getObject().position.y += (this.velocity.y * delta) // new behavior\r\n                if (this.controls.getObject().position.y < 10) {\r\n                    this.velocity.y = 0\r\n                    this.controls.getObject().position.y = 10\r\n                    this.canJump = true\r\n                }\r\n            }\r\n            this.prevTime = time\r\n            this.renderer.render(this.scene, this.camera)\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.miscControlsPointerlock-container {\r\n    position: relative;\r\n    width: 100%;\r\n}\r\n#blocker {\r\n    position: absolute;\r\n    width: 100%;\r\n    height: 100%;\r\n    background-color: rgba(0,0,0,0.5);\r\n}\r\n\r\n#instructions {\r\n    width: 100%;\r\n    height: 100%;\r\n\r\n    display: -webkit-box;\r\n    display: -moz-box;\r\n    display: box;\r\n\r\n    -webkit-box-orient: horizontal;\r\n    -moz-box-orient: horizontal;\r\n    box-orient: horizontal;\r\n\r\n    -webkit-box-pack: center;\r\n    -moz-box-pack: center;\r\n    box-pack: center;\r\n\r\n    -webkit-box-align: center;\r\n    -moz-box-align: center;\r\n    box-align: center;\r\n\r\n    color: #ffffff;\r\n    text-align: center;\r\n    font-family: Arial;\r\n    font-size: 14px;\r\n    line-height: 24px;\r\n\r\n    cursor: pointer;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/misc/miscControlsPointerlock.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"miscControlsPointerlock-container\"},[_c('div',{attrs:{\"id\":\"blocker\"}},[_c('div',{attrs:{\"id\":\"instructions\"}},[_c('span',{staticStyle:{\"font-size\":\"36px\"}},[_vm._v(\"Click to play\")]),_vm._v(\" \"),_c('br'),_c('br'),_vm._v(\"\\n\\t\\t\\t\\tMove: WASD\"),_c('br'),_vm._v(\"\\n\\t\\t\\t\\tJump: SPACE\"),_c('br'),_vm._v(\"\\n\\t\\t\\t\\tLook: MOUSE\\n\\t\\t\\t\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3fa7e675\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/misc/miscControlsPointerlock.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3fa7e675\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./miscControlsPointerlock.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./miscControlsPointerlock.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./miscControlsPointerlock.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3fa7e675\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./miscControlsPointerlock.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3fa7e675\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/misc/miscControlsPointerlock.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}