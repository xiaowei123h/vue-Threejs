webpackJsonp([258],{CzyQ:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("85s5"),n=i("Z9IJ"),r=i("6+nK"),a=i("Ah8h"),o={uniforms:{tDiffuse:{value:null},tDisp:{value:null},byp:{value:0},amount:{value:.08},angle:{value:.02},seed:{value:.02},seed_x:{value:.02},seed_y:{value:.02},distortion_x:{value:.5},distortion_y:{value:.6},col_s:{value:.05}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform int byp;","uniform sampler2D tDiffuse;","uniform sampler2D tDisp;","uniform float amount;","uniform float angle;","uniform float seed;","uniform float seed_x;","uniform float seed_y;","uniform float distortion_x;","uniform float distortion_y;","uniform float col_s;","varying vec2 vUv;","float rand(vec2 co){","\treturn fract(sin(dot(co.xy ,vec2(12.9898,78.233))) * 43758.5453);","}","void main() {","\tif(byp<1) {","\t\tvec2 p = vUv;","\t\tfloat xs = floor(gl_FragCoord.x / 0.5);","\t\tfloat ys = floor(gl_FragCoord.y / 0.5);","\t\tvec4 normal = texture2D (tDisp, p*seed*seed);","\t\tif(p.y<distortion_x+col_s && p.y>distortion_x-col_s*seed) {","\t\t\tif(seed_x>0.){","\t\t\t\tp.y = 1. - (p.y + distortion_y);","\t\t\t}","\t\t\telse {","\t\t\t\tp.y = distortion_y;","\t\t\t}","\t\t}","\t\tif(p.x<distortion_y+col_s && p.x>distortion_y-col_s*seed) {","\t\t\tif(seed_y>0.){","\t\t\t\tp.x=distortion_x;","\t\t\t}","\t\t\telse {","\t\t\t\tp.x = 1. - (p.x + distortion_x);","\t\t\t}","\t\t}","\t\tp.x+=normal.x*seed_x*(seed/5.);","\t\tp.y+=normal.y*seed_y*(seed/5.);","\t\tvec2 offset = amount * vec2( cos(angle), sin(angle));","\t\tvec4 cr = texture2D(tDiffuse, p + offset);","\t\tvec4 cga = texture2D(tDiffuse, p);","\t\tvec4 cb = texture2D(tDiffuse, p - offset);","\t\tgl_FragColor = vec4(cr.r, cga.g, cb.b, cga.a);","\t\tvec4 snow = 200.*amount*vec4(rand(vec2(xs * seed,ys * seed*50.))*0.2);","\t\tgl_FragColor = gl_FragColor+ snow;","\t}","\telse {","\t\tgl_FragColor=texture2D (tDiffuse, vUv);","\t}","}"].join("\n")},l=function(t){a.a.call(this),void 0===o&&console.error("GlitchPass relies on DigitalGlitch");var e=o;this.uniforms=r.UniformsUtils.clone(e.uniforms),void 0==t&&(t=64),this.uniforms.tDisp.value=this.generateHeightmap(t),this.material=new r.ShaderMaterial({uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader}),this.fsQuad=new a.a.FullScreenQuad(this.material),this.goWild=!1,this.curF=0,this.generateTrigger()};l.prototype=Object.assign(Object.create(a.a.prototype),{constructor:l,render:function(t,e,i){this.uniforms.tDiffuse.value=i.texture,this.uniforms.seed.value=Math.random(),this.uniforms.byp.value=0,this.curF%this.randX==0||1==this.goWild?(this.uniforms.amount.value=Math.random()/30,this.uniforms.angle.value=r.MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.seed_x.value=r.MathUtils.randFloat(-1,1),this.uniforms.seed_y.value=r.MathUtils.randFloat(-1,1),this.uniforms.distortion_x.value=r.MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=r.MathUtils.randFloat(0,1),this.curF=0,this.generateTrigger()):this.curF%this.randX<this.randX/5?(this.uniforms.amount.value=Math.random()/90,this.uniforms.angle.value=r.MathUtils.randFloat(-Math.PI,Math.PI),this.uniforms.distortion_x.value=r.MathUtils.randFloat(0,1),this.uniforms.distortion_y.value=r.MathUtils.randFloat(0,1),this.uniforms.seed_x.value=r.MathUtils.randFloat(-.3,.3),this.uniforms.seed_y.value=r.MathUtils.randFloat(-.3,.3)):0==this.goWild&&(this.uniforms.byp.value=1),this.curF++,this.renderToScreen?(t.setRenderTarget(null),this.fsQuad.render(t)):(t.setRenderTarget(e),this.clear&&t.clear(),this.fsQuad.render(t))},generateTrigger:function(){this.randX=r.MathUtils.randInt(120,240)},generateHeightmap:function(t){for(var e=new Float32Array(t*t*3),i=t*t,s=0;s<i;s++){var n=r.MathUtils.randFloat(0,1);e[3*s+0]=n,e[3*s+1]=n,e[3*s+2]=n}return new r.DataTexture(e,t,t,r.RGBFormat,r.FloatType)}});var h={data:function(){return{camera:null,scene:null,renderer:null,composer:null,object:null,light:null,glitchPass:null}},mounted:function(){this.init(),this.animate()},methods:{updateOptions:function(){var t=document.getElementById("wildGlitch");this.glitchPass.goWild=t.checked},init:function(){this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglPostprocessingGlitch-container")[0].appendChild(this.renderer.domElement),this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.z=400,this.scene=new this.$THREE.Scene,this.scene.fog=new this.$THREE.Fog(0,1,1e3),this.object=new this.$THREE.Object3D,this.scene.add(this.object);for(var t=new this.$THREE.SphereBufferGeometry(1,4,4),e=0;e<100;e++){var i=new this.$THREE.MeshPhongMaterial({color:16777215*Math.random(),flatShading:!0}),r=new this.$THREE.Mesh(t,i);r.position.set(Math.random()-.5,Math.random()-.5,Math.random()-.5).normalize(),r.position.multiplyScalar(400*Math.random()),r.rotation.set(2*Math.random(),2*Math.random(),2*Math.random()),r.scale.x=r.scale.y=r.scale.z=50*Math.random(),this.object.add(r)}this.scene.add(new this.$THREE.AmbientLight(2236962)),this.light=new this.$THREE.DirectionalLight(16777215),this.light.position.set(1,1,1),this.scene.add(this.light),this.composer=new s.a(this.renderer),this.composer.addPass(new n.a(this.scene,this.camera)),this.glitchPass=new l,this.composer.addPass(this.glitchPass),window.addEventListener("resize",this.onWindowResize,!1),document.getElementById("wildGlitch").addEventListener("change",this.updateOptions),this.updateOptions()},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.composer.setSize(window.innerWidth-281,window.innerHeight)},animate:function(){requestAnimationFrame(this.animate),this.object.rotation.x+=.005,this.object.rotation.y+=.01,this.composer.render()}}},d={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"webglPostprocessingGlitch-container"},[e("div",{attrs:{id:"info"}},[e("label",{attrs:{for:"dotScreen"}},[this._v("Glitch me wild:")]),e("input",{attrs:{id:"wildGlitch",type:"checkbox"}}),e("br")])])}]};var u=i("VU/8")(h,d,!1,function(t){i("DmcG")},"data-v-3c024449",null);e.default=u.exports},DmcG:function(t,e){}});
//# sourceMappingURL=258.95d1494b5114366019a7.js.map