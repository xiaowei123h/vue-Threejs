{"version":3,"sources":["webpack:///src/views/tonemapping/webglTonemapping.vue","webpack:///./src/views/tonemapping/webglTonemapping.vue?8006","webpack:///./src/views/tonemapping/webglTonemapping.vue"],"names":["webglTonemapping","data","mesh","renderer","scene","camera","controls","gui","guiExposure","params","exposure","toneMapping","toneMappingOptions","mounted","this","None","$THREE","NoToneMapping","Linear","LinearToneMapping","Reinhard","ReinhardToneMapping","Cineon","CineonToneMapping","ACESFilmic","ACESFilmicToneMapping","Custom","CustomToneMapping","init","catch","err","console","error","beforeDestroy","destroy","methods","_this","regeneratorRuntime","mark","_callee","pmremGenerator","rgbeLoader","gltfLoader","_ref","_ref2","texture","gltf","envMap","wrap","_context","prev","next","WebGLRenderer","antialias","setPixelRatio","window","devicePixelRatio","setSize","$webglInnerWidth","innerHeight","document","getElementsByClassName","appendChild","domElement","toneMappingExposure","outputEncoding","sRGBEncoding","ShaderChunk","tonemapping_pars_fragment","replace","Scene","PerspectiveCamera","position","set","OrbitControls","addEventListener","render","enableZoom","enablePan","target","update","PMREMGenerator","compileEquirectangularShader","RGBELoader","setDataType","UnsignedByteType","setPath","GLTFLoader","Promise","all","loadAsync","sent","_slicedToArray","fromEquirectangular","background","environment","dispose","traverse","child","isMesh","add","onWindowResize","dat_gui_module","Object","keys","onChange","updateGUI","material","needsUpdate","open","stop","_this2","remove","$onWindowResize","tonemapping_webglTonemapping","$createElement","_self","_c","_m","staticRenderFns","_vm","_h","staticClass","attrs","id","href","rel","_v","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/287.eec7f76f492dc6f96f7b.js","sourcesContent":["<template>\r\n    <div class=\"webglTonemapping-container\">\r\n        <div id=\"info\">\r\n\t\t\t<a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> - Tone Mapping<br />\r\n\t\t\tBattle Damaged Sci-fi Helmet by\r\n\t\t\t<a href=\"https://sketchfab.com/theblueturtle_\" target=\"_blank\" rel=\"noopener\">theblueturtle_</a><br />\r\n\t\t\t<a href=\"https://hdrihaven.com/hdri/?h=royal_esplanade\" target=\"_blank\" rel=\"noopener\">Royal Esplanade</a> by <a href=\"https://hdrihaven.com/\" target=\"_blank\" rel=\"noopener\">HDRI Haven</a>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { GUI } from '@/components/jsm/libs/dat.gui.module.js'\r\nimport { OrbitControls } from '@/components/jsm/controls/OrbitControls.js'\r\nimport { GLTFLoader } from '@/components/jsm/loaders/GLTFLoader.js'\r\nimport { RGBELoader } from '@/components/jsm/loaders/RGBELoader.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            mesh: null,\r\n            renderer: null,\r\n            scene: null,\r\n            camera: null,\r\n            controls: null,\r\n            gui: null,\r\n            guiExposure: null,\r\n\t\t\tparams: {\r\n\t\t\t\texposure: 1.0,\r\n\t\t\t\ttoneMapping: 'ACESFilmic'\r\n\t\t\t},\r\n\t\t\ttoneMappingOptions: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.toneMappingOptions = {\r\n            None: this.$THREE.NoToneMapping,\r\n            Linear: this.$THREE.LinearToneMapping,\r\n            Reinhard: this.$THREE.ReinhardToneMapping,\r\n            Cineon: this.$THREE.CineonToneMapping,\r\n            ACESFilmic: this.$THREE.ACESFilmicToneMapping,\r\n            Custom: this.$THREE.CustomToneMapping\r\n        }\r\n        this.init().catch((err) => {\r\n            console.error(err)\r\n        })\r\n    },\r\n    beforeDestroy() {\r\n        this.gui.destroy()\r\n    },\r\n    methods: {\r\n        async init() {\r\n            this.renderer = new this.$THREE.WebGLRenderer({ antialias: true })\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            document.getElementsByClassName('webglTonemapping-container')[0].appendChild(this.renderer.domElement)\r\n            this.renderer.toneMapping = this.toneMappingOptions[ this.params.toneMapping ]\r\n            this.renderer.toneMappingExposure = this.params.exposure\r\n            this.renderer.outputEncoding = this.$THREE.sRGBEncoding\r\n            // Set CustomToneMapping to Uncharted2\r\n            // source: http://filmicworlds.com/blog/filmic-tonemapping-operators/\r\n            this.$THREE.ShaderChunk.tonemapping_pars_fragment = this.$THREE.ShaderChunk.tonemapping_pars_fragment.replace(\r\n                'vec3 CustomToneMapping(vec3 color) { return color; }',\r\n                `#define Uncharted2Helper(x) max(((x * (0.15 * x + 0.10 * 0.50) + 0.20 * 0.02) / (x * (0.15 * x + 0.50) + 0.20 * 0.30)) - 0.02 / 0.30, vec3(0.0))\r\n                float toneMappingWhitePoint = 1.0;\r\n                vec3 CustomToneMapping(vec3 color) {\r\n                    color *= toneMappingExposure;\r\n                    return saturate(Uncharted2Helper(color) / Uncharted2Helper(vec3(toneMappingWhitePoint)));\r\n                }`\r\n            );\r\n            this.scene = new this.$THREE.Scene()\r\n            this.camera = new this.$THREE.PerspectiveCamera(45, this.$webglInnerWidth / window.innerHeight, 0.25, 20)\r\n            this.camera.position.set(- 1.8, 0.6, 2.7)\r\n            this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n            this.controls.addEventListener('change', this.render) // use if there is no animation loop\r\n            this.controls.enableZoom = false\r\n            this.controls.enablePan = false\r\n            this.controls.target.set(0, 0, - 0.2)\r\n            this.controls.update()\r\n            var pmremGenerator = new this.$THREE.PMREMGenerator(this.renderer)\r\n            pmremGenerator.compileEquirectangularShader()\r\n            var rgbeLoader = new RGBELoader()\r\n                .setDataType(this.$THREE.UnsignedByteType)\r\n                .setPath('static/textures/equirectangular/')\r\n            var gltfLoader = new GLTFLoader().setPath('static/models/gltf/DamagedHelmet/glTF/')\r\n            var [ texture, gltf ] = await Promise.all([\r\n                rgbeLoader.loadAsync('venice_sunset_1k.hdr'),\r\n                gltfLoader.loadAsync('DamagedHelmet.gltf'),\r\n            ])\r\n            // environment\r\n            var envMap = pmremGenerator.fromEquirectangular(texture).texture\r\n            this.scene.background = envMap\r\n            this.scene.environment = envMap\r\n            texture.dispose()\r\n            pmremGenerator.dispose()\r\n            // model\r\n            gltf.scene.traverse((child) => {\r\n                if (child.isMesh) {\r\n                    this.mesh = child\r\n                    this.scene.add(this.mesh)\r\n                }\r\n            })\r\n            this.render()\r\n            window.addEventListener('resize', this.onWindowResize, false)\r\n            this.gui = new GUI()\r\n            this.gui.add(this.params, 'toneMapping', Object.keys(this.toneMappingOptions))\r\n                .onChange(() => {\r\n                    this.updateGUI()\r\n                    this.renderer.toneMapping = this.toneMappingOptions[ this.params.toneMapping ]\r\n                    this.mesh.material.needsUpdate = true\r\n                    this.render()\r\n                })\r\n            this.updateGUI()\r\n            this.gui.open()\r\n        },\r\n        updateGUI() {\r\n            if (this.guiExposure !== null) {\r\n                this.gui.remove(this.guiExposure)\r\n                this.guiExposure = null\r\n            }\r\n            if (this.params.toneMapping !== 'None') {\r\n                this.guiExposure = this.gui.add(this.params, 'exposure', 0, 2)\r\n                    .onChange(() => {\r\n                        this.renderer.toneMappingExposure = this.params.exposure\r\n                        this.render()\r\n                    })\r\n            }\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n            this.render()\r\n        },\r\n        render() {\r\n            this.renderer.render(this.scene, this.camera)\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.webglTonemapping-container {\r\n    width: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/tonemapping/webglTonemapping.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"webglTonemapping-container\"},[_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" - Tone Mapping\"),_c('br'),_vm._v(\"\\n\\t\\t\\tBattle Damaged Sci-fi Helmet by\\n\\t\\t\\t\"),_c('a',{attrs:{\"href\":\"https://sketchfab.com/theblueturtle_\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"theblueturtle_\")]),_c('br'),_vm._v(\" \"),_c('a',{attrs:{\"href\":\"https://hdrihaven.com/hdri/?h=royal_esplanade\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"Royal Esplanade\")]),_vm._v(\" by \"),_c('a',{attrs:{\"href\":\"https://hdrihaven.com/\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"HDRI Haven\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-29820e2c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/tonemapping/webglTonemapping.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-29820e2c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webglTonemapping.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglTonemapping.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglTonemapping.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-29820e2c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webglTonemapping.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-29820e2c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/tonemapping/webglTonemapping.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}