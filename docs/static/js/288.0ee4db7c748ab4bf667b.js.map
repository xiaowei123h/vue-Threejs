{"version":3,"sources":["webpack:///src/views/materials/webglMaterialsCompile.vue","webpack:///./src/views/materials/webglMaterialsCompile.vue?408a","webpack:///./src/views/materials/webglMaterialsCompile.vue"],"names":["webglMaterialsCompile","data","container","renderer","scene","camera","clock","fov","frame","teapot","controls","meshes","mounted","this","document","getElementById","$THREE","Clock","Nodes","addEventListener","location","hash","substr","length","window","reload","init","methods","_this","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","$webglInnerWidth","innerHeight","appendChild","domElement","Scene","PerspectiveCamera","position","x","z","y","target","Vector3","OrbitControls","minDistance","maxDistance","add","AmbientLight","light1","DirectionalLight","set","light2","TeapotBufferGeometry","i","itemsonrow","mesh","Mesh","Math","floor","updateMaterial","push","onWindowResize","compile","className","setTimeout","animate","material","dispose","mtl","time","speed","random","color","timeSpeed","MUL","sinCycleInSecs","PI2","cycle","SIN","cycleColor","cos","emissive","transformer","transform","build","$onWindowResize","delta","getDelta","update","updateNode","render","requestAnimationFrame","materials_webglMaterialsCompile","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","id","_v","href","rel","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/288.0ee4db7c748ab4bf667b.js","sourcesContent":["<template>\r\n    <div class=\"webglMaterialsCompile-container\">\r\n        <div id=\"container\"></div>\r\n\t\t<div id=\"info\">\r\n\t\t\t<a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> - Node-Based Material\r\n\t\t\t<br /><span class=\"button\" id=\"preload\">change preload</span>\r\n\t\t</div>\r\n\r\n\t\t<div id=\"waitScreen\">\r\n\t\t\tLoading ...\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { OrbitControls } from '@/components/jsm/controls/OrbitControls.js'\r\nimport { TeapotBufferGeometry } from '@/components/jsm/geometries/TeapotBufferGeometry.js'\r\nimport {\r\n    NodeFrame,\r\n    FloatNode,\r\n    ColorNode,\r\n    ConstNode,\r\n    ExpressionNode,\r\n    MathNode,\r\n    OperatorNode,\r\n    TimerNode,\r\n    PhongNodeMaterial\r\n} from '@/components/jsm/nodes/Nodes.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            container: null,\r\n            renderer: null,\r\n            scene: null,\r\n            camera: null,\r\n            clock: null,\r\n            fov: 50,\r\n\t\t\tframe: null,\r\n\t\t\tteapot: null,\r\n\t\t\tcontrols: null,\r\n\t\t\tmeshes: [],\r\n        }\r\n    },\r\n    mounted() {\r\n        this.container = document.getElementById('container')\r\n        this.clock = new this.$THREE.Clock()\r\n        this.frame = new NodeFrame()\r\n        document.getElementById(\"preload\").addEventListener('click', () => {\r\n            var hash = document.location.hash.substr(1)\r\n            if (hash.length === 0) {\r\n                window.location.hash = \"#NoPreLoad\"\r\n            } else {\r\n                window.location.hash = \"\"\r\n            }\r\n            location.reload(true)\r\n        }, false)\r\n        window.addEventListener('load', this.init)\r\n    },\r\n    methods: {\r\n        init() {\r\n            this.renderer = new this.$THREE.WebGLRenderer({ antialias: true })\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            this.container.appendChild(this.renderer.domElement)\r\n            this.scene = new this.$THREE.Scene()\r\n            this.camera = new this.$THREE.PerspectiveCamera(this.fov, this.$webglInnerWidth / window.innerHeight, 1, 1000)\r\n            this.camera.position.x = 0\r\n            this.camera.position.z = - 300\r\n            this.camera.position.y = 200\r\n            this.camera.target = new this.$THREE.Vector3()\r\n            this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n            this.controls.minDistance = 50\r\n            this.controls.maxDistance = 400\r\n            this.scene.add(new this.$THREE.AmbientLight(0x464646))\r\n            var light1 = new this.$THREE.DirectionalLight(0xffddcc, 1)\r\n            light1.position.set(1, 0.75, 0.5)\r\n            this.scene.add(light1)\r\n            var light2 = new this.$THREE.DirectionalLight(0xccccff, 1)\r\n            light2.position.set(- 1, 0.75, - 0.5)\r\n            this.scene.add(light2)\r\n            this.teapot = new TeapotBufferGeometry(15, 18)\r\n            var itemsonrow = 10\r\n            for (var i = 0; i < itemsonrow * itemsonrow; i ++) {\r\n                var mesh = new this.$THREE.Mesh(this.teapot)\r\n                mesh.position.x = 50 * (i % itemsonrow) - 50 * itemsonrow / 2\r\n                mesh.position.z = 50 * Math.floor(i / itemsonrow) - 150\r\n                this.updateMaterial(mesh)\r\n                this.scene.add(mesh)\r\n                this.meshes.push(mesh)\r\n            }\r\n            window.addEventListener('resize', this.onWindowResize, false)\r\n            var hash = document.location.hash.substr(1)\r\n            if (hash.length === 0) {\r\n                this.renderer.compile(this.scene, this.camera)\r\n            }\r\n            document.getElementById(\"waitScreen\").className = \"hide\"\r\n            setTimeout(() => {\r\n                this.onWindowResize()\r\n                this.animate()\r\n            }, 1)\r\n        },\r\n        updateMaterial(mesh) {\r\n            if (mesh.material) mesh.material.dispose()\r\n            var mtl = new PhongNodeMaterial()\r\n            var time = new TimerNode()\r\n            var speed = new FloatNode(Math.random())\r\n            var color = new ColorNode(Math.random() * 0xFFFFFF)\r\n            var timeSpeed = new OperatorNode(\r\n                time,\r\n                speed,\r\n                OperatorNode.MUL\r\n            )\r\n            var sinCycleInSecs = new OperatorNode(\r\n                timeSpeed,\r\n                new ConstNode(ConstNode.PI2),\r\n                OperatorNode.MUL\r\n            )\r\n            var cycle = new MathNode(sinCycleInSecs, MathNode.SIN)\r\n            var cycleColor = new OperatorNode(\r\n                cycle,\r\n                color,\r\n                OperatorNode.MUL\r\n            )\r\n            var cos = new MathNode(cycleColor, MathNode.SIN)\r\n            mtl.color = new ColorNode(0)\r\n            mtl.emissive = cos\r\n            var transformer = new ExpressionNode(\"position + 0.0 * \" + Math.random(), \"vec3\", [ ])\r\n            mtl.transform = transformer\r\n            // build shader (ignore auto build)\r\n            mtl.build()\r\n            // set material\r\n            mesh.material = mtl\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n        },\r\n        animate() {\r\n            var delta = this.clock.getDelta()\r\n            this.frame.update(delta)\r\n            for (var i = 0; i < this.meshes.length; i ++) {\r\n                var mesh = this.meshes[ i ]\r\n                this.frame.updateNode(mesh.material)\r\n            }\r\n            this.renderer.render(this.scene, this.camera)\r\n            requestAnimationFrame(this.animate)\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.webglMaterialsCompile-container {\r\n    width: 100%;\r\n}\r\n#waitScreen {\r\n    color: #fff;\r\n    position: absolute;\r\n    top: 50%;\r\n    left: 50%;\r\n    margin-top: -50px;\r\n    margin-left: -50px;\r\n    width: 100px;\r\n    height: 100px;\r\n}\r\n.hide {\r\n    display:none;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/materials/webglMaterialsCompile.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"webglMaterialsCompile-container\"},[_c('div',{attrs:{\"id\":\"container\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" - Node-Based Material\\n\\t\\t\\t\"),_c('br'),_c('span',{staticClass:\"button\",attrs:{\"id\":\"preload\"}},[_vm._v(\"change preload\")])]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"waitScreen\"}},[_vm._v(\"\\n\\t\\t\\tLoading ...\\n\\t\\t\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2945018a\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/materials/webglMaterialsCompile.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2945018a\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webglMaterialsCompile.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglMaterialsCompile.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglMaterialsCompile.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2945018a\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webglMaterialsCompile.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2945018a\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/materials/webglMaterialsCompile.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}