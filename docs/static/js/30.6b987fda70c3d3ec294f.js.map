{"version":3,"sources":["webpack:///./src/components/jsm/loaders/NodeMaterialLoader.js","webpack:///src/views/sprites/webglSpritesNodes.vue","webpack:///./src/views/sprites/webglSpritesNodes.vue?27f6","webpack:///./src/views/sprites/webglSpritesNodes.vue"],"names":["NodeMaterialLoader","manager","library","this","undefined","DefaultLoadingManager","nodes","materials","passes","names","NodeMaterialLoaderUtils","replaceUUIDObject","object","uuid","value","recursive","_typeof","keys","Object","i","length","key","replaceUUID","json","assign","prototype","load","url","onLoad","onProgress","onError","scope","loader","FileLoader","setPath","path","text","parse","JSON","getObjectByName","getObjectById","getNode","console","warn","resolve","test","Array","isArray","prop","declare","node","Nodes","nodeType","name","type","material","pass","copy","webglSpritesNodes","data","container","renderer","scene","camera","clock","frame","sprite1","sprite2","sprite3","walkingManTexture","walkingManTextureURL","controls","fov","mounted","document","getElementById","$THREE","Clock","window","addEventListener","init","methods","createHorizontalSpriteSheetNode","hCount","speed","speedNode","scale","uvTimer","MUL","uvIntegerTimer","FLOOR","uvFrameOffset","uvScale","ADD","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","$webglInnerWidth","innerHeight","appendChild","domElement","Scene","fog","Fog","PerspectiveCamera","position","z","target","Vector3","OrbitControls","minDistance","maxDistance","TextureLoader","wrapS","wrapT","RepeatWrapping","add","Sprite","x","y","color","uv","INVERT","spherical","SIN","sineWaveFunction","join","phase","spriteToJSON","onWindowResize","animate","sprite","toJSON","dispose","$onWindowResize","delta","getDelta","update","updateNode","rotation","Math","PI","render","requestAnimationFrame","sprites_webglSpritesNodes","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","id","_v","href","rel","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"6VAOIA,EAAqB,SAAWC,EAASC,GAE5CC,KAAKF,aAAwBG,IAAZH,EAA0BA,EAAUI,IAErDF,KAAKG,SACLH,KAAKI,aACLJ,KAAKK,UACLL,KAAKM,SACLN,KAAKD,QAAUA,OAIZQ,GAEHC,kBAAmB,SAAWC,EAAQC,EAAMC,EAAOC,GAMlD,GAJAA,OAA0BX,IAAdW,GAA0BA,EAEjB,iBAAhB,IAAOF,EAAP,YAAAG,EAAOH,MAAoBA,EAAOA,EAAKA,MAErB,iBAAlB,IAAOD,EAAP,YAAAI,EAAOJ,IAIX,IAFA,IAAIK,EAAOC,OAAOD,KAAML,GAEdO,EAAI,EAAGA,EAAIF,EAAKG,OAAQD,IAAO,CAExC,IAAIE,EAAMJ,EAAME,GAEXJ,IAEJH,EAAQS,GAAQlB,KAAKQ,kBAAmBC,EAAQS,GAAOR,EAAMC,IAIzDO,IAAQR,IAEZD,EAAQC,GAASD,EAAQS,UAElBT,EAAQS,IAQlB,OAAOT,IAAWC,EAAOC,EAAQF,GAIlCU,YAAa,SAAWC,EAAMV,EAAMC,GAQnC,OANAX,KAAKQ,kBAAmBY,EAAMV,EAAMC,GAAO,GAC3CX,KAAKQ,kBAAmBY,EAAKjB,MAAOO,EAAMC,GAC1CX,KAAKQ,kBAAmBY,EAAKhB,UAAWM,EAAMC,GAC9CX,KAAKQ,kBAAmBY,EAAKf,OAAQK,EAAMC,GAC3CX,KAAKQ,kBAAmBY,EAAKrB,QAASW,EAAMC,GAAO,GAE5CS,IAMTL,OAAOM,OAAQxB,EAAmByB,WAEjCC,KAAM,SAAWC,EAAKC,EAAQC,EAAYC,GAEzC,IAAIC,EAAQ5B,KAER6B,EAAS,IAAIC,IAAYF,EAAM9B,SAQnC,OAPA+B,EAAOE,QAASH,EAAMI,MACtBH,EAAON,KAAMC,EAAK,SAAWS,GAE5BR,EAAQG,EAAMM,MAAOC,KAAKD,MAAOD,MAE/BP,EAAYC,GAER3B,MAIR+B,QAAS,SAAWpB,GAGnB,OADAX,KAAKgC,KAAOrB,EACLX,MAIRoC,gBAAiB,SAAW1B,GAE3B,OAAOV,KAAKM,MAAOI,IAIpB2B,cAAe,SAAW3B,GAEzB,OAAOV,KAAKD,QAASW,IACpBV,KAAKG,MAAOO,IACZV,KAAKI,UAAWM,IAChBV,KAAKK,OAAQK,IACbV,KAAKM,MAAOI,IAId4B,QAAS,SAAW5B,GAEnB,IAAID,EAAST,KAAKqC,cAAe3B,GAQjC,OANOD,GAEN8B,QAAQC,KAAM,SAAY9B,EAAO,gBAI3BD,GAIRgC,QAAS,SAAWrB,GAEnB,gBAAgBA,EAAhB,YAAAP,EAAgBO,IAEf,IAAK,UACL,IAAK,SAEJ,OAAOA,EAER,IAAK,SAEJ,MAAK,oCAAoCsB,KAAMtB,IAAUpB,KAAKD,QAASqB,GAE/DpB,KAAKsC,QAASlB,GAIfA,EAER,QAEC,GAAKuB,MAAMC,QAASxB,GAEnB,IAAM,IAAIJ,EAAI,EAAGA,EAAII,EAAKH,OAAQD,IAEjCI,EAAMJ,GAAMhB,KAAKyC,QAASrB,EAAMJ,SAMjC,IAAM,IAAI6B,KAAQzB,EAEH,SAATyB,IAELzB,EAAMyB,GAAS7C,KAAKyC,QAASrB,EAAMyB,KAQvC,OAAOzB,GAIR0B,QAAS,SAAW1B,GAEnB,IAAIV,EAAMqC,EAAMtC,EAEhB,IAAMC,KAAQU,EAAKjB,MAElB4C,EAAO3B,EAAKjB,MAAOO,GAEnBD,EAAS,IAAIuC,EAAOD,EAAKE,SAAW,QAE/BF,EAAKG,OAETzC,EAAOyC,KAAOH,EAAKG,KAEnBlD,KAAKM,MAAOG,EAAOyC,MAASzC,GAI7BT,KAAKG,MAAOO,GAASD,EAItB,IAAMC,KAAQU,EAAKhB,UAElB2C,EAAO3B,EAAKhB,UAAWM,GAEvBD,EAAS,IAAIuC,EAAOD,EAAKI,MAEpBJ,EAAKG,OAETzC,EAAOyC,KAAOH,EAAKG,KAEnBlD,KAAKM,MAAOG,EAAOyC,MAASzC,GAI7BT,KAAKI,UAAWM,GAASD,EAI1B,IAAMC,KAAQU,EAAKf,OAElB0C,EAAO3B,EAAKf,OAAQK,GAEpBD,EAAS,IAAIuC,EAAOD,EAAKI,MAEpBJ,EAAKG,OAETzC,EAAOyC,KAAOH,EAAKG,KAEnBlD,KAAKM,MAAOG,EAAOyC,MAASzC,GAI7BT,KAAKK,OAAQK,GAASD,EAQvB,OAJKW,EAAKgC,WAAWpD,KAAKoD,SAAWpD,KAAKI,UAAWgB,EAAKgC,WAErDhC,EAAKiC,OAAOrD,KAAKqD,KAAOrD,KAAKK,OAAQe,EAAKiC,OAExCjC,GAIRc,MAAO,SAAWd,GAEjB,IAAIV,EAIJ,IAAMA,KAFNU,EAAOpB,KAAKyC,QAASzC,KAAK8C,QAAS1B,KAEhBjB,MAElBH,KAAKG,MAAOO,GAAO4C,KAAMlC,EAAKjB,MAAOO,IAItC,IAAMA,KAAQU,EAAKhB,UAElBJ,KAAKI,UAAWM,GAAO4C,KAAMlC,EAAKhB,UAAWM,IAI9C,IAAMA,KAAQU,EAAKf,OAElBL,KAAKK,OAAQK,GAAO4C,KAAMlC,EAAKf,OAAQK,IAIxC,OAAOV,KAAKoD,UAAYpD,KAAKqD,MAAQrD,oIC9OvCuD,GACAC,KADA,WAEA,OACAC,UAAA,KACAC,SAAA,KACAC,MAAA,KACAC,OAAA,KACAC,MAAA,KACAC,MAAA,KACAC,QAAA,KACAC,QAAA,KACAC,QAAA,KACAC,kBAAA,KACAC,qBAAA,KACApE,WACAqE,SAAA,KACAC,IAAA,KAGAC,QAnBA,WAoBAtE,KAAAyD,UAAAc,SAAAC,eAAA,aACAxE,KAAA6D,MAAA,IAAA7D,KAAAyE,OAAAC,MACA1E,KAAA8D,MAAA,IAAAd,EAAA,UACA2B,OAAAC,iBAAA,OAAA5E,KAAA6E,OAEAC,SACAD,KADA,WA0BA,SAAAE,EAAAC,EAAAC,GACA,IAAAC,EAAA,IAAAlC,EAAA,YAAAiC,EAAA,GACAE,EAAA,IAAAnC,EAAA,cAAAgC,EAAA,GACAI,EAAA,IAAApC,EAAA,aACA,IAAAA,EAAA,UACAkC,EACAlC,EAAA,aAAAqC,KAEAC,EAAA,IAAAtC,EAAA,SACAoC,EACApC,EAAA,SAAAuC,OAEAC,EAAA,IAAAxC,EAAA,aACAsC,EACAH,EACAnC,EAAA,aAAAqC,KAEAI,EAAA,IAAAzC,EAAA,aACA,IAAAA,EAAA,OACAmC,EACAnC,EAAA,aAAAqC,KAOA,OALA,IAAArC,EAAA,aACAyC,EACAD,EACAxC,EAAA,aAAA0C,KA9CA1F,KAAA0D,SAAA,IAAA1D,KAAAyE,OAAAkB,eAAAC,WAAA,IACA5F,KAAA0D,SAAAmC,cAAAlB,OAAAmB,kBACA9F,KAAA0D,SAAAqC,QAAA/F,KAAAgG,iBAAArB,OAAAsB,aACAjG,KAAAyD,UAAAyC,YAAAlG,KAAA0D,SAAAyC,YACAnG,KAAA2D,MAAA,IAAA3D,KAAAyE,OAAA2B,MACApG,KAAA2D,MAAA0C,IAAA,IAAArG,KAAAyE,OAAA6B,IAAA,YACAtG,KAAA4D,OAAA,IAAA5D,KAAAyE,OAAA8B,kBAAAvG,KAAAqE,IAAArE,KAAAgG,iBAAArB,OAAAsB,YAAA,OACAjG,KAAA4D,OAAA4C,SAAAC,EAAA,IACAzG,KAAA4D,OAAA8C,OAAA,IAAA1G,KAAAyE,OAAAkC,QACA3G,KAAAoE,SAAA,IAAAwC,EAAA,EAAA5G,KAAA4D,OAAA5D,KAAA0D,SAAAyC,YACAnG,KAAAoE,SAAAyC,YAAA,GACA7G,KAAAoE,SAAA0C,YAAA,IAKA9G,KAAAmE,qBAAA,4CACAnE,KAAAkE,mBAAA,IAAAlE,KAAAyE,OAAAsC,eAAAxF,KAAAvB,KAAAmE,sBACAnE,KAAAkE,kBAAA8C,MAAAhH,KAAAkE,kBAAA+C,MAAAjH,KAAAyE,OAAAyC,eACAlH,KAAAD,QAAAC,KAAAmE,sBAAAnE,KAAAkE,kBAiCAlE,KAAA2D,MAAAwD,IAAAnH,KAAA+D,QAAA,IAAA/D,KAAAyE,OAAA2C,OAAA,IAAApE,EAAA,qBACAhD,KAAA+D,QAAAoB,MAAAkC,EAFA,GAGArH,KAAA+D,QAAAoB,MAAAmC,EAHA,GAIAtH,KAAA+D,QAAAX,SAAAmE,MAAA,IAAAvE,EAAA,YAAAhD,KAAAkE,mBACAlE,KAAA+D,QAAAX,SAAAmE,MAAAC,GAAAzC,EAAA,MACA/E,KAAA2D,MAAAwD,IAAAnH,KAAAgE,QAAA,IAAAhE,KAAAyE,OAAA2C,OAAA,IAAApE,EAAA,qBACAhD,KAAAgE,QAAAwC,SAAAa,EAAA,GACArH,KAAAgE,QAAAmB,MAAAkC,EARA,GASArH,KAAAgE,QAAAmB,MAAAmC,EATA,GAUAtH,KAAAgE,QAAAZ,SAAAmE,MAAA,IAAAvE,EAAA,YAAAhD,KAAAkE,mBACAlE,KAAAgE,QAAAZ,SAAAmE,MAAAC,GAAAzC,EAAA,MACA/E,KAAAgE,QAAAZ,SAAAmE,MAAA,IAAAvE,EAAA,SAAAhD,KAAAgE,QAAAZ,SAAAmE,MAAAvE,EAAA,SAAAyE,QACAzH,KAAAgE,QAAAZ,SAAAsE,WAAA,EAEA1H,KAAAgE,QAAAZ,SAAAoD,SAAA,IAAAxD,EAAA,aACA,IAAAA,EAAA,aACA,IAAAA,EAAA,aAAAA,EAAA,aAAAA,EAAA,SAAA2E,KACA,IAAA3E,EAAA,kBACYA,EAAA,aAAZqC,KAEA,IAAArC,EAAA,aACAA,EAAA,aAAA0C,KAEA,IAAAkC,EAAA,IAAA5E,EAAA,cAEA,uCAEA,gEACA,gEACA,iCACA,KACA6E,KAAA,OACA7H,KAAA2D,MAAAwD,IAAAnH,KAAAiE,QAAA,IAAAjE,KAAAyE,OAAA2C,OAAA,IAAApE,EAAA,qBACAhD,KAAAiE,QAAAuC,SAAAa,GAAA,GACArH,KAAAiE,QAAAkB,MAAAkC,EAnCA,GAoCArH,KAAAiE,QAAAkB,MAAAmC,EApCA,GAqCAtH,KAAAiE,QAAAb,SAAAmE,MAAA,IAAAvE,EAAA,YAAAhD,KAAAkE,mBACAlE,KAAAiE,QAAAb,SAAAmE,MAAAC,GAAA,IAAAxE,EAAA,iBAAA4E,GACAJ,GAAAzC,EAAA,MACA+C,MAAA,IAAA9E,EAAA,YAEAhD,KAAAiE,QAAAb,SAAAiD,KAAA,EAIArG,KAAA+H,aAAA/H,KAAA+D,SACA/D,KAAA+H,aAAA/H,KAAAgE,SACAhE,KAAA+H,aAAA/H,KAAAiE,SAIAU,OAAAC,iBAAA,SAAA5E,KAAAgI,gBAAA,GACAhI,KAAAgI,iBACAhI,KAAAiI,WAEAF,aAhHA,SAgHAG,GAEA,IAAA9G,EAAA8G,EAAA9E,SAAA+E,SAEYtI,EAAA,EAAZsB,YAAAC,EAAApB,KAAAkE,kBAAAlE,KAAAmE,sBAEA,IAAAf,EAAA,IAAAvD,EAAA,OAAAG,KAAAD,SAAAmC,MAAAd,GAEA8G,EAAA9E,SAAAgF,UACAF,EAAA9E,YAEA4E,eA3HA,WA4HAhI,KAAAqI,gBAAArI,KAAA4D,OAAA5D,KAAA0D,WAEAuE,QA9HA,WA+HA,IAAAK,EAAAtI,KAAA6D,MAAA0E,WAEAvI,KAAA8D,MAAA0E,OAAAF,GACAG,WAAAzI,KAAA+D,QAAAX,UACAqF,WAAAzI,KAAAgE,QAAAZ,UACAqF,WAAAzI,KAAAiE,QAAAb,UAEApD,KAAAiE,QAAAyE,SAAAjC,GAAA,KAAAkC,KAAAC,GACA5I,KAAA0D,SAAAmF,OAAA7I,KAAA2D,MAAA3D,KAAA4D,QACAkF,sBAAA9I,KAAAiI,YCvLec,GADEF,OAFjB,WAA0B7I,KAAagJ,eAAbhJ,KAAuCiJ,MAAAC,GAAwB,OAA/DlJ,KAA+DmJ,GAAA,IAExEC,iBADjB,WAAoC,IAAaC,EAAbrJ,KAAagJ,eAA0BE,EAAvClJ,KAAuCiJ,MAAAC,IAAAG,EAAwB,OAAAH,EAAA,OAAiBI,YAAA,gCAA0CJ,EAAA,OAAYK,OAAOC,GAAA,eAA7IxJ,KAA+JyJ,GAAA,KAAAP,EAAA,OAAwBK,OAAOC,GAAA,UAAaN,EAAA,KAAUK,OAAOG,KAAA,sBAAAhD,OAAA,SAAAiD,IAAA,cAA5N3J,KAA6RyJ,GAAA,cAA7RzJ,KAA6RyJ,GAAA,sCCEjU,IAcAG,EAdyBC,EAAQ,OAcjCC,CACEvG,EACAwF,GATF,EAVA,SAAAgB,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/30.6b987fda70c3d3ec294f.js","sourcesContent":["import {\r\n\tDefaultLoadingManager,\r\n\tFileLoader\r\n} from \"@/components/build/three.module.js\";\r\n\r\nimport * as Nodes from \"../nodes/Nodes.js\";\r\n\r\nvar NodeMaterialLoader = function ( manager, library ) {\r\n\r\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\r\n\r\n\tthis.nodes = {};\r\n\tthis.materials = {};\r\n\tthis.passes = {};\r\n\tthis.names = {};\r\n\tthis.library = library || {};\r\n\r\n};\r\n\r\nvar NodeMaterialLoaderUtils = {\r\n\r\n\treplaceUUIDObject: function ( object, uuid, value, recursive ) {\r\n\r\n\t\trecursive = recursive !== undefined ? recursive : true;\r\n\r\n\t\tif ( typeof uuid === \"object\" ) uuid = uuid.uuid;\r\n\r\n\t\tif ( typeof object === \"object\" ) {\r\n\r\n\t\t\tvar keys = Object.keys( object );\r\n\r\n\t\t\tfor ( var i = 0; i < keys.length; i ++ ) {\r\n\r\n\t\t\t\tvar key = keys[ i ];\r\n\r\n\t\t\t\tif ( recursive ) {\r\n\r\n\t\t\t\t\tobject[ key ] = this.replaceUUIDObject( object[ key ], uuid, value );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tif ( key === uuid ) {\r\n\r\n\t\t\t\t\tobject[ uuid ] = object[ key ];\r\n\r\n\t\t\t\t\tdelete object[ key ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn object === uuid ? value : object;\r\n\r\n\t},\r\n\r\n\treplaceUUID: function ( json, uuid, value ) {\r\n\r\n\t\tthis.replaceUUIDObject( json, uuid, value, false );\r\n\t\tthis.replaceUUIDObject( json.nodes, uuid, value );\r\n\t\tthis.replaceUUIDObject( json.materials, uuid, value );\r\n\t\tthis.replaceUUIDObject( json.passes, uuid, value );\r\n\t\tthis.replaceUUIDObject( json.library, uuid, value, false );\r\n\r\n\t\treturn json;\r\n\r\n\t}\r\n\r\n};\r\n\r\nObject.assign( NodeMaterialLoader.prototype, {\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tsetPath: function ( value ) {\r\n\r\n\t\tthis.path = value;\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\tgetObjectByName: function ( uuid ) {\r\n\r\n\t\treturn this.names[ uuid ];\r\n\r\n\t},\r\n\r\n\tgetObjectById: function ( uuid ) {\r\n\r\n\t\treturn this.library[ uuid ] ||\r\n\t\t\tthis.nodes[ uuid ] ||\r\n\t\t\tthis.materials[ uuid ] ||\r\n\t\t\tthis.passes[ uuid ] ||\r\n\t\t\tthis.names[ uuid ];\r\n\r\n\t},\r\n\r\n\tgetNode: function ( uuid ) {\r\n\r\n\t\tvar object = this.getObjectById( uuid );\r\n\r\n\t\tif ( ! object ) {\r\n\r\n\t\t\tconsole.warn( \"Node \\\"\" + uuid + \"\\\" not found.\" );\r\n\r\n\t\t}\r\n\r\n\t\treturn object;\r\n\r\n\t},\r\n\r\n\tresolve: function ( json ) {\r\n\r\n\t\tswitch ( typeof json ) {\r\n\r\n\t\t\tcase \"boolean\":\r\n\t\t\tcase \"number\":\r\n\r\n\t\t\t\treturn json;\r\n\r\n\t\t\tcase \"string\":\r\n\r\n\t\t\t\tif ( /^\\w{8}-\\w{4}-\\w{4}-\\w{4}-\\w{12}$/i.test( json ) || this.library[ json ] ) {\r\n\r\n\t\t\t\t\treturn this.getNode( json );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn json;\r\n\r\n\t\t\tdefault:\r\n\r\n\t\t\t\tif ( Array.isArray( json ) ) {\r\n\r\n\t\t\t\t\tfor ( var i = 0; i < json.length; i ++ ) {\r\n\r\n\t\t\t\t\t\tjson[ i ] = this.resolve( json[ i ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tfor ( var prop in json ) {\r\n\r\n\t\t\t\t\t\tif ( prop === \"uuid\" ) continue;\r\n\r\n\t\t\t\t\t\tjson[ prop ] = this.resolve( json[ prop ] );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\tdeclare: function ( json ) {\r\n\r\n\t\tvar uuid, node, object;\r\n\r\n\t\tfor ( uuid in json.nodes ) {\r\n\r\n\t\t\tnode = json.nodes[ uuid ];\r\n\r\n\t\t\tobject = new Nodes[ node.nodeType + \"Node\" ]();\r\n\r\n\t\t\tif ( node.name ) {\r\n\r\n\t\t\t\tobject.name = node.name;\r\n\r\n\t\t\t\tthis.names[ object.name ] = object;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.nodes[ uuid ] = object;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( uuid in json.materials ) {\r\n\r\n\t\t\tnode = json.materials[ uuid ];\r\n\r\n\t\t\tobject = new Nodes[ node.type ]();\r\n\r\n\t\t\tif ( node.name ) {\r\n\r\n\t\t\t\tobject.name = node.name;\r\n\r\n\t\t\t\tthis.names[ object.name ] = object;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.materials[ uuid ] = object;\r\n\r\n\t\t}\r\n\r\n\t\tfor ( uuid in json.passes ) {\r\n\r\n\t\t\tnode = json.passes[ uuid ];\r\n\r\n\t\t\tobject = new Nodes[ node.type ]();\r\n\r\n\t\t\tif ( node.name ) {\r\n\r\n\t\t\t\tobject.name = node.name;\r\n\r\n\t\t\t\tthis.names[ object.name ] = object;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tthis.passes[ uuid ] = object;\r\n\r\n\t\t}\r\n\r\n\t\tif ( json.material ) this.material = this.materials[ json.material ];\r\n\r\n\t\tif ( json.pass ) this.pass = this.passes[ json.pass ];\r\n\r\n\t\treturn json;\r\n\r\n\t},\r\n\r\n\tparse: function ( json ) {\r\n\r\n\t\tvar uuid;\r\n\r\n\t\tjson = this.resolve( this.declare( json ) );\r\n\r\n\t\tfor ( uuid in json.nodes ) {\r\n\r\n\t\t\tthis.nodes[ uuid ].copy( json.nodes[ uuid ] );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( uuid in json.materials ) {\r\n\r\n\t\t\tthis.materials[ uuid ].copy( json.materials[ uuid ] );\r\n\r\n\t\t}\r\n\r\n\t\tfor ( uuid in json.passes ) {\r\n\r\n\t\t\tthis.passes[ uuid ].copy( json.passes[ uuid ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn this.material || this.pass || this;\r\n\r\n\t}\r\n\r\n} );\r\n\r\nexport { NodeMaterialLoader, NodeMaterialLoaderUtils };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/loaders/NodeMaterialLoader.js","<template>\r\n    <div class=\"webglSpritesNodes-container\">\r\n        <div id=\"container\"></div>\r\n\t\t<div id=\"info\">\r\n\t\t\t<a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> - Node-Based Sprites\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { OrbitControls } from '@/components/jsm/controls/OrbitControls.js'\r\nimport { NodeMaterialLoader, NodeMaterialLoaderUtils } from '@/components/jsm/loaders/NodeMaterialLoader.js'\r\nimport {\r\n    NodeFrame,\r\n    SpriteNodeMaterial,\r\n    MathNode,\r\n    OperatorNode,\r\n    TextureNode,\r\n    Vector2Node,\r\n    TimerNode,\r\n    FunctionNode,\r\n    FunctionCallNode,\r\n    PositionNode,\r\n    UVNode\r\n} from '@/components/jsm/nodes/Nodes.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            container: null,\r\n            renderer: null,\r\n            scene: null,\r\n            camera: null,\r\n\t\t\tclock: null,\r\n\t\t\tframe: null,\r\n            sprite1: null,\r\n            sprite2: null,\r\n            sprite3: null,\r\n            walkingManTexture: null,\r\n            walkingManTextureURL: null,\r\n\t\t\tlibrary: {},\r\n            controls: null,\r\n            fov: 50\r\n        }\r\n    },\r\n    mounted() {\r\n        this.container = document.getElementById('container')\r\n        this.clock = new this.$THREE.Clock()\r\n        this.frame = new NodeFrame()\r\n        window.addEventListener('load', this.init)\r\n    },\r\n    methods: {\r\n        init() {\r\n            //\r\n            // Renderer / Controls\r\n            //\r\n            this.renderer = new this.$THREE.WebGLRenderer({ antialias: true })\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            this.container.appendChild(this.renderer.domElement)\r\n            this.scene = new this.$THREE.Scene()\r\n            this.scene.fog = new this.$THREE.Fog(0x0000FF, 70, 150)\r\n            this.camera = new this.$THREE.PerspectiveCamera(this.fov, this.$webglInnerWidth / window.innerHeight, 1, 1000)\r\n            this.camera.position.z = 100\r\n            this.camera.target = new this.$THREE.Vector3()\r\n            this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n            this.controls.minDistance = 50\r\n            this.controls.maxDistance = 200\r\n            //\r\n            // SpriteNode\r\n            //\r\n            // https://openclipart.org/detail/239883/walking-man-sprite-sheet\r\n            this.walkingManTextureURL = \"static/textures/WalkingManSpriteSheet.png\"\r\n            this.walkingManTexture = new this.$THREE.TextureLoader().load(this.walkingManTextureURL)\r\n            this.walkingManTexture.wrapS = this.walkingManTexture.wrapT = this.$THREE.RepeatWrapping\r\n            this.library[ this.walkingManTextureURL ] = this.walkingManTexture\r\n            // horizontal sprite-sheet animator\r\n            function createHorizontalSpriteSheetNode(hCount, speed) {\r\n                var speedNode = new Vector2Node(speed, 0) // frame per second\r\n                var scale = new Vector2Node(1 / hCount, 1) // 8 horizontal images in sprite-sheet\r\n                var uvTimer = new OperatorNode(\r\n                    new TimerNode(),\r\n                    speedNode,\r\n                    OperatorNode.MUL\r\n                )\r\n                var uvIntegerTimer = new MathNode(\r\n                    uvTimer,\r\n                    MathNode.FLOOR\r\n                )\r\n                var uvFrameOffset = new OperatorNode(\r\n                    uvIntegerTimer,\r\n                    scale,\r\n                    OperatorNode.MUL\r\n                )\r\n                var uvScale = new OperatorNode(\r\n                    new UVNode(),\r\n                    scale,\r\n                    OperatorNode.MUL\r\n                )\r\n                var uvFrame = new OperatorNode(\r\n                    uvScale,\r\n                    uvFrameOffset,\r\n                    OperatorNode.ADD\r\n                )\r\n                return uvFrame\r\n            }\r\n            // sprites\r\n            var spriteWidth = 20, spriteHeight = 20\r\n            this.scene.add(this.sprite1 = new this.$THREE.Sprite(new SpriteNodeMaterial()))\r\n            this.sprite1.scale.x = spriteWidth\r\n            this.sprite1.scale.y = spriteHeight\r\n            this.sprite1.material.color = new TextureNode(this.walkingManTexture)\r\n            this.sprite1.material.color.uv = createHorizontalSpriteSheetNode(8, 10)\r\n            this.scene.add(this.sprite2 = new this.$THREE.Sprite(new SpriteNodeMaterial()))\r\n            this.sprite2.position.x = 30\r\n            this.sprite2.scale.x = spriteWidth\r\n            this.sprite2.scale.y = spriteHeight\r\n            this.sprite2.material.color = new TextureNode(this.walkingManTexture)\r\n            this.sprite2.material.color.uv = createHorizontalSpriteSheetNode(8, 30)\r\n            this.sprite2.material.color = new MathNode(this.sprite2.material.color, MathNode.INVERT)\r\n            this.sprite2.material.spherical = false // look at this.camera horizontally only, very used in vegetation\r\n            // horizontal zigzag sprite\r\n            this.sprite2.material.position = new OperatorNode(\r\n                new OperatorNode(\r\n                    new MathNode(new TimerNode(3), MathNode.SIN), // 3 is speed (time scale)\r\n                    new Vector2Node(.3, 0), // horizontal scale (position)\r\n                    OperatorNode.MUL\r\n                ),\r\n                new PositionNode(),\r\n                OperatorNode.ADD\r\n            )\r\n            var sineWaveFunction = new FunctionNode([\r\n                // https://stackoverflow.com/questions/36174431/how-to-make-a-wave-warp-effect-in-shader\r\n                \"vec2 sineWave(vec2 uv, vec2 phase) {\",\r\n                // wave distortion\r\n                \"\tfloat x = sin(25.0*uv.y + 30.0*uv.x + 6.28*phase.x) * 0.01;\",\r\n                \"\tfloat y = sin(25.0*uv.y + 30.0*uv.x + 6.28*phase.y) * 0.03;\",\r\n                \"\treturn vec2(uv.x+x, uv.y+y);\",\r\n                \"}\"\r\n            ].join(\"\\n\"))\r\n            this.scene.add(this.sprite3 = new this.$THREE.Sprite(new SpriteNodeMaterial()))\r\n            this.sprite3.position.x = - 30\r\n            this.sprite3.scale.x = spriteWidth\r\n            this.sprite3.scale.y = spriteHeight\r\n            this.sprite3.material.color = new TextureNode(this.walkingManTexture)\r\n            this.sprite3.material.color.uv = new FunctionCallNode(sineWaveFunction, {\r\n                \"uv\": createHorizontalSpriteSheetNode(8, 10),\r\n                \"phase\": new TimerNode()\r\n            })\r\n            this.sprite3.material.fog = true\r\n            //\r\n            //\tTest serialization\r\n            //\r\n            this.spriteToJSON(this.sprite1)\r\n            this.spriteToJSON(this.sprite2)\r\n            this.spriteToJSON(this.sprite3)\r\n            //\r\n            // Events\r\n            //\r\n            window.addEventListener('resize', this.onWindowResize, false)\r\n            this.onWindowResize()\r\n            this.animate()\r\n        },\r\n        spriteToJSON(sprite) {\r\n            // serialize\r\n            var json = sprite.material.toJSON()\r\n            // replace uuid to url (facilitates the load of textures using url otherside uuid)\r\n            NodeMaterialLoaderUtils.replaceUUID(json, this.walkingManTexture, this.walkingManTextureURL)\r\n            // deserialize\r\n            var material = new NodeMaterialLoader(null, this.library).parse(json)\r\n            // replace material\r\n            sprite.material.dispose()\r\n            sprite.material = material\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n        },\r\n        animate() {\r\n            var delta = this.clock.getDelta()\r\n            // update material animation and/or gpu calcs (pre-this.renderer)\r\n            this.frame.update(delta)\r\n                .updateNode(this.sprite1.material)\r\n                .updateNode(this.sprite2.material)\r\n                .updateNode(this.sprite3.material)\r\n            // rotate sprite\r\n            this.sprite3.rotation.z -= Math.PI * .005\r\n            this.renderer.render(this.scene, this.camera)\r\n            requestAnimationFrame(this.animate)\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.webglSpritesNodes-container {\r\n    width: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/sprites/webglSpritesNodes.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"webglSpritesNodes-container\"},[_c('div',{attrs:{\"id\":\"container\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" - Node-Based Sprites\\n\\t\\t\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2284fe50\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/sprites/webglSpritesNodes.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2284fe50\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webglSpritesNodes.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglSpritesNodes.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglSpritesNodes.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2284fe50\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webglSpritesNodes.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2284fe50\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/sprites/webglSpritesNodes.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}