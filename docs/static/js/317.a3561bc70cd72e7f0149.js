webpackJsonp([317],{"a0/4":function(e,t){},qMmE:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("wIBv"),i=r("Y95o"),s=r("z8c2"),a={data:function(){return{container:null,camera:null,scene:null,renderer:null,controller1:null,controller2:null,controllerGrip1:null,controllerGrip2:null,raycaster:null,intersected:[],tempMatrix:null,controls:null,group:null}},mounted:function(){this.tempMatrix=new this.$THREE.Matrix4,this.init(),this.animate()},methods:{init:function(){this.container=document.createElement("div"),document.getElementsByClassName("webxrVrDragging-container")[0].appendChild(this.container),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(8421504),this.camera=new this.$THREE.PerspectiveCamera(50,this.$webglInnerWidth/window.innerHeight,.1,10),this.camera.position.set(0,1.6,3),this.controls=new n.b(this.camera,this.container),this.controls.target.set(0,1.6,0),this.controls.update();var e=new this.$THREE.PlaneBufferGeometry(4,4),t=new this.$THREE.MeshStandardMaterial({color:15658734,roughness:1,metalness:0}),r=new this.$THREE.Mesh(e,t);r.rotation.x=-Math.PI/2,r.receiveShadow=!0,this.scene.add(r),this.scene.add(new this.$THREE.HemisphereLight(8421504,6316128));var a=new this.$THREE.DirectionalLight(16777215);a.position.set(0,6,0),a.castShadow=!0,a.shadow.camera.top=2,a.shadow.camera.bottom=-2,a.shadow.camera.right=2,a.shadow.camera.left=-2,a.shadow.mapSize.set(4096,4096),this.scene.add(a),this.group=new this.$THREE.Group,this.scene.add(this.group);for(var o=[new this.$THREE.BoxBufferGeometry(.2,.2,.2),new this.$THREE.ConeBufferGeometry(.2,.2,64),new this.$THREE.CylinderBufferGeometry(.2,.2,.2,64),new this.$THREE.IcosahedronBufferGeometry(.2,8),new this.$THREE.TorusBufferGeometry(.2,.04,64,32)],h=0;h<50;h++){var l=o[Math.floor(Math.random()*o.length)],c=new this.$THREE.MeshStandardMaterial({color:16777215*Math.random(),roughness:.7,metalness:0}),d=new this.$THREE.Mesh(l,c);d.position.x=4*Math.random()-2,d.position.y=2*Math.random(),d.position.z=4*Math.random()-2,d.rotation.x=2*Math.random()*Math.PI,d.rotation.y=2*Math.random()*Math.PI,d.rotation.z=2*Math.random()*Math.PI,d.scale.setScalar(Math.random()+.5),d.castShadow=!0,d.receiveShadow=!0,this.group.add(d)}this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.renderer.shadowMap.enabled=!0,this.renderer.xr.enabled=!0,this.container.appendChild(this.renderer.domElement),document.getElementsByClassName("webxrVrDragging-container")[0].appendChild(i.a.createButton(this.renderer)),this.controller1=this.renderer.xr.getController(0),this.controller1.addEventListener("selectstart",this.onSelectStart),this.controller1.addEventListener("selectend",this.onSelectEnd),this.scene.add(this.controller1),this.controller2=this.renderer.xr.getController(1),this.controller2.addEventListener("selectstart",this.onSelectStart),this.controller2.addEventListener("selectend",this.onSelectEnd),this.scene.add(this.controller2);var m=new s.a;this.controllerGrip1=this.renderer.xr.getControllerGrip(0),this.controllerGrip1.add(m.createControllerModel(this.controllerGrip1)),this.scene.add(this.controllerGrip1),this.controllerGrip2=this.renderer.xr.getControllerGrip(1),this.controllerGrip2.add(m.createControllerModel(this.controllerGrip2)),this.scene.add(this.controllerGrip2);l=(new this.$THREE.BufferGeometry).setFromPoints([new this.$THREE.Vector3(0,0,0),new this.$THREE.Vector3(0,0,-1)]);var u=new this.$THREE.Line(l);u.name="line",u.scale.z=5,this.controller1.add(u.clone()),this.controller2.add(u.clone()),this.raycaster=new this.$THREE.Raycaster,window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},onSelectStart:function(e){var t=e.target,r=this.getIntersections(t);if(r.length>0){var n=r[0].object;n.material.emissive.b=1,t.attach(n),t.userData.selected=n}},onSelectEnd:function(e){var t=e.target;if(void 0!==t.userData.selected){var r=t.userData.selected;r.material.emissive.b=0,this.group.attach(r),t.userData.selected=void 0}},getIntersections:function(e){return this.tempMatrix.identity().extractRotation(e.matrixWorld),this.raycaster.ray.origin.setFromMatrixPosition(e.matrixWorld),this.raycaster.ray.direction.set(0,0,-1).applyMatrix4(this.tempMatrix),this.raycaster.intersectObjects(this.group.children)},intersectObjects:function(e){if(void 0===e.userData.selected){var t=e.getObjectByName("line"),r=this.getIntersections(e);if(r.length>0){var n=r[0],i=n.object;i.material.emissive.r=1,this.intersected.push(i),t.scale.z=n.distance}else t.scale.z=5}},cleanIntersected:function(){for(;this.intersected.length;){this.intersected.pop().material.emissive.r=0}},animate:function(){this.renderer.setAnimationLoop(this.render)},render:function(){this.cleanIntersected(),this.intersectObjects(this.controller1),this.intersectObjects(this.controller2),this.renderer.render(this.scene,this.camera)}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webxrVrDragging-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" vr - dragging\n\t\t")])])}]};var h=r("VU/8")(a,o,!1,function(e){r("a0/4")},"data-v-18d24be1",null);t.default=h.exports}});
//# sourceMappingURL=317.a3561bc70cd72e7f0149.js.map