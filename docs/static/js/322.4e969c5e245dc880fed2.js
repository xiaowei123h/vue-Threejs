webpackJsonp([322],{"8XpZ":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("wIBv"),i=r("6+nK"),a=function(e){i.Loader.call(this,e),this.splitLayer=!1};a.prototype=Object.assign(Object.create(i.Loader.prototype),{constructor:a,load:function(e,t,r,n){var a=this,s=new i.FileLoader(a.manager);s.setPath(a.path),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(r){try{t(a.parse(r))}catch(t){n?n(t):console.error(t),a.manager.itemError(e)}},r,n)},parse:function(e){var t={x:0,y:0,z:0,e:0,f:0,extruding:!1,relative:!1},r=[],n=void 0,a=new i.LineBasicMaterial({color:16711680});a.name="path";var s=new i.LineBasicMaterial({color:65280});function o(e){n={vertex:[],pathVertex:[],z:e.z},r.push(n)}function d(e,r){return t.relative?r:r-e}function c(e,r){return t.relative?e+r:r}s.name="extruded";for(var h,l,u=e.replace(/;.+/g,"").split("\n"),v=0;v<u.length;v++){var f=u[v].split(" "),p=f[0].toUpperCase(),m={};if(f.splice(1).forEach(function(e){if(void 0!==e[0]){var t=e[0].toLowerCase(),r=parseFloat(e.substring(1));m[t]=r}}),"G0"===p||"G1"===p){var x={x:void 0!==m.x?c(t.x,m.x):t.x,y:void 0!==m.y?c(t.y,m.y):t.y,z:void 0!==m.z?c(t.z,m.z):t.z,e:void 0!==m.e?c(t.e,m.e):t.e,f:void 0!==m.f?c(t.f,m.f):t.f};d(t.e,x.e)>0&&(x.extruding=d(t.e,x.e)>0,void 0!=n&&x.z==n.z||o(x)),h=t,l=x,void 0===n&&o(h),x.extruding?(n.vertex.push(h.x,h.y,h.z),n.vertex.push(l.x,l.y,l.z)):(n.pathVertex.push(h.x,h.y,h.z),n.pathVertex.push(l.x,l.y,l.z)),t=x}else if("G2"===p||"G3"===p);else if("G90"===p)t.relative=!1;else if("G91"===p)t.relative=!0;else if("G92"===p){(x=t).x=void 0!==m.x?m.x:x.x,x.y=void 0!==m.y?m.y:x.y,x.z=void 0!==m.z?m.z:x.z,x.e=void 0!==m.e?m.e:x.e,t=x}}function w(e,t){var r=new i.BufferGeometry;r.setAttribute("position",new i.Float32BufferAttribute(e,3));var n=new i.LineSegments(r,t?s:a);n.name="layer"+v,g.add(n)}var g=new i.Group;if(g.name="gcode",this.splitLayer)for(v=0;v<r.length;v++){w((E=r[v]).vertex,!0),w(E.pathVertex,!1)}else{var y=[],z=[];for(v=0;v<r.length;v++){for(var E,b=(E=r[v]).vertex,L=E.pathVertex,G=0;G<b.length;G++)y.push(b[G]);for(G=0;G<L.length;G++)z.push(L[G])}w(y,!0),w(z,!1)}return g.quaternion.setFromEuler(new i.Euler(-Math.PI/2,0,0)),g}});var s={data:function(){return{camera:null,scene:null,renderer:null}},mounted:function(){this.init(),this.render()},methods:{init:function(){var e=this,t=document.createElement("div");document.getElementsByClassName("webglLoaderGcode-container")[0].appendChild(t),this.camera=new this.$THREE.PerspectiveCamera(60,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,0,70),this.scene=new this.$THREE.Scene,(new a).load("static/models/gcode/benchy.gcode",function(t){t.position.set(-100,-20,100),e.scene.add(t),e.render()}),this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),t.appendChild(this.renderer.domElement);var r=new n.b(this.camera,this.renderer.domElement);r.addEventListener("change",this.render),r.minDistance=10,r.maxDistance=100,window.addEventListener("resize",this.resize,!1)},resize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoaderGcode-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - GCode loader\n\t\t")])])}]};var d=r("VU/8")(s,o,!1,function(e){r("K+vF")},"data-v-16cf40ca",null);t.default=d.exports},"K+vF":function(e,t){}});
//# sourceMappingURL=322.4e969c5e245dc880fed2.js.map