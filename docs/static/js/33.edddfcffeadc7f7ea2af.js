webpackJsonp([33],{DHiR:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var i=r("6+nK"),o=r("B6oc"),a=r("GoTt"),n=function e(t,r){i.Mesh.call(this,t),this.type="Water";var n=this,l=void 0!==(r=r||{}).color?new i.Color(r.color):new i.Color(16777215),s=r.textureWidth||512,c=r.textureHeight||512,f=r.clipBias||0,u=r.flowDirection||new i.Vector2(1,0),m=r.flowSpeed||.03,d=r.reflectivity||.02,h=r.scale||1,v=r.shader||e.WaterShader,p=void 0!==r.encoding?r.encoding:i.LinearEncoding,w=new i.TextureLoader,g=r.flowMap||void 0,x=r.normalMap0||w.load("textures/water/Water_1_M_Normal.jpg"),y=r.normalMap1||w.load("textures/water/Water_2_M_Normal.jpg"),E=.15,M=.5*E,R=new i.Matrix4,_=new i.Clock;if(void 0!==o.a)if(void 0!==a.a){var C=new o.a(t,{textureWidth:s,textureHeight:c,clipBias:f,encoding:p}),T=new a.a(t,{textureWidth:s,textureHeight:c,clipBias:f,encoding:p});C.matrixAutoUpdate=!1,T.matrixAutoUpdate=!1,this.material=new i.ShaderMaterial({uniforms:i.UniformsUtils.merge([i.UniformsLib.fog,v.uniforms]),vertexShader:v.vertexShader,fragmentShader:v.fragmentShader,transparent:!0,fog:!0}),void 0!==g?(this.material.defines.USE_FLOWMAP="",this.material.uniforms.tFlowMap={type:"t",value:g}):this.material.uniforms.flowDirection={type:"v2",value:u},x.wrapS=x.wrapT=i.RepeatWrapping,y.wrapS=y.wrapT=i.RepeatWrapping,this.material.uniforms.tReflectionMap.value=C.getRenderTarget().texture,this.material.uniforms.tRefractionMap.value=T.getRenderTarget().texture,this.material.uniforms.tNormalMap0.value=x,this.material.uniforms.tNormalMap1.value=y,this.material.uniforms.color.value=l,this.material.uniforms.reflectivity.value=d,this.material.uniforms.textureMatrix.value=R,this.material.uniforms.config.value.x=0,this.material.uniforms.config.value.y=M,this.material.uniforms.config.value.z=M,this.material.uniforms.config.value.w=h,this.onBeforeRender=function(e,t,r){var i,o;!function(e){R.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),R.multiply(e.projectionMatrix),R.multiply(e.matrixWorldInverse),R.multiply(n.matrixWorld)}(r),i=_.getDelta(),(o=n.material.uniforms.config).value.x+=m*i,o.value.y=o.value.x+M,o.value.x>=E?(o.value.x=0,o.value.y=M):o.value.y>=E&&(o.value.y=o.value.y-E),n.visible=!1,C.matrixWorld.copy(n.matrixWorld),T.matrixWorld.copy(n.matrixWorld),C.onBeforeRender(e,t,r),T.onBeforeRender(e,t,r),n.visible=!0}}else console.error("THREE.Water: Required component Refractor not found.");else console.error("THREE.Water: Required component Reflector not found.")};n.prototype=Object.create(i.Mesh.prototype),n.prototype.constructor=n,n.WaterShader={uniforms:{color:{type:"c",value:null},reflectivity:{type:"f",value:0},tReflectionMap:{type:"t",value:null},tRefractionMap:{type:"t",value:null},tNormalMap0:{type:"t",value:null},tNormalMap1:{type:"t",value:null},textureMatrix:{type:"m4",value:null},config:{type:"v4",value:new i.Vector4}},vertexShader:["#include <common>","#include <fog_pars_vertex>","#include <logdepthbuf_pars_vertex>","uniform mat4 textureMatrix;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\tvUv = uv;","\tvCoord = textureMatrix * vec4( position, 1.0 );","\tvec4 worldPosition = modelMatrix * vec4( position, 1.0 );","\tvToEye = cameraPosition - worldPosition.xyz;","\tvec4 mvPosition =  viewMatrix * worldPosition;","\tgl_Position = projectionMatrix * mvPosition;","\t#include <logdepthbuf_vertex>","\t#include <fog_vertex>","}"].join("\n"),fragmentShader:["#include <common>","#include <fog_pars_fragment>","#include <logdepthbuf_pars_fragment>","uniform sampler2D tReflectionMap;","uniform sampler2D tRefractionMap;","uniform sampler2D tNormalMap0;","uniform sampler2D tNormalMap1;","#ifdef USE_FLOWMAP","\tuniform sampler2D tFlowMap;","#else","\tuniform vec2 flowDirection;","#endif","uniform vec3 color;","uniform float reflectivity;","uniform vec4 config;","varying vec4 vCoord;","varying vec2 vUv;","varying vec3 vToEye;","void main() {","\t#include <logdepthbuf_fragment>","\tfloat flowMapOffset0 = config.x;","\tfloat flowMapOffset1 = config.y;","\tfloat halfCycle = config.z;","\tfloat scale = config.w;","\tvec3 toEye = normalize( vToEye );","\tvec2 flow;","\t#ifdef USE_FLOWMAP","\t\tflow = texture2D( tFlowMap, vUv ).rg * 2.0 - 1.0;","\t#else","\t\tflow = flowDirection;","\t#endif","\tflow.x *= - 1.0;","\tvec4 normalColor0 = texture2D( tNormalMap0, ( vUv * scale ) + flow * flowMapOffset0 );","\tvec4 normalColor1 = texture2D( tNormalMap1, ( vUv * scale ) + flow * flowMapOffset1 );","\tfloat flowLerp = abs( halfCycle - flowMapOffset0 ) / halfCycle;","\tvec4 normalColor = mix( normalColor0, normalColor1, flowLerp );","\tvec3 normal = normalize( vec3( normalColor.r * 2.0 - 1.0, normalColor.b,  normalColor.g * 2.0 - 1.0 ) );","\tfloat theta = max( dot( toEye, normal ), 0.0 );","\tfloat reflectance = reflectivity + ( 1.0 - reflectivity ) * pow( ( 1.0 - theta ), 5.0 );","\tvec3 coord = vCoord.xyz / vCoord.w;","\tvec2 uv = coord.xy + coord.z * normal.xz * 0.05;","\tvec4 reflectColor = texture2D( tReflectionMap, vec2( 1.0 - uv.x, uv.y ) );","\tvec4 refractColor = texture2D( tRefractionMap, uv );","\tgl_FragColor = vec4( color, 1.0 ) * mix( refractColor, reflectColor, reflectance );","\t#include <tonemapping_fragment>","\t#include <encodings_fragment>","\t#include <fog_fragment>","}"].join("\n")}},NfuX:function(e,t){},RvdC:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("QEtz"),o=r("wIBv"),a=r("DHiR"),n={data:function(){return{scene:null,camera:null,clock:null,renderer:null,water:null,torusKnot:null,params:{color:"#ffffff",scale:4,flowX:1,flowY:1},gui:null}},mounted:function(){this.init(),this.animate()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var e=this;this.scene=new this.$THREE.Scene,this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,.1,200),this.camera.position.set(-15,7,15),this.camera.lookAt(this.scene.position),this.clock=new this.$THREE.Clock;var t=new this.$THREE.TorusKnotBufferGeometry(3,1,256,32),r=new this.$THREE.MeshNormalMaterial;this.torusKnot=new this.$THREE.Mesh(t,r),this.torusKnot.position.y=4,this.torusKnot.scale.set(.5,.5,.5),this.scene.add(this.torusKnot);var n=new this.$THREE.PlaneBufferGeometry(20,20),l=new this.$THREE.MeshStandardMaterial({roughness:.8,metalness:.4}),s=new this.$THREE.Mesh(n,l);s.rotation.x=-.5*Math.PI,this.scene.add(s),(new this.$THREE.TextureLoader).load("static/textures/hardwood2_diffuse.jpg",function(t){t.wrapS=e.$THREE.RepeatWrapping,t.wrapT=e.$THREE.RepeatWrapping,t.anisotropy=16,t.repeat.set(4,4),l.map=t,l.needsUpdate=!0});var c=new this.$THREE.PlaneBufferGeometry(20,20);this.water=new a.a(c,{color:this.params.color,scale:this.params.scale,flowDirection:new this.$THREE.Vector2(this.params.flowX,this.params.flowY),textureWidth:1024,textureHeight:1024}),this.water.position.y=1,this.water.rotation.x=-.5*Math.PI,this.scene.add(this.water);var f=new this.$THREE.CubeTextureLoader;f.setPath("static/textures/cube/Park2/");var u=f.load(["posx.jpg","negx.jpg","posy.jpg","negy.jpg","posz.jpg","negz.jpg"]);this.scene.background=u;var m=new this.$THREE.AmbientLight(13421772,.4);this.scene.add(m);var d=new this.$THREE.DirectionalLight(16777215,.6);d.position.set(-1,1,1),this.scene.add(d),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.setPixelRatio(window.devicePixelRatio),document.getElementsByClassName("webglWater-container")[0].appendChild(this.renderer.domElement),this.gui=new i.a,this.gui.addColor(this.params,"color").onChange(function(t){e.water.material.uniforms.color.value.set(t)}),this.gui.add(this.params,"scale",1,10).onChange(function(t){e.water.material.uniforms.config.value.w=t}),this.gui.add(this.params,"flowX",-1,1).step(.01).onChange(function(t){e.water.material.uniforms.flowDirection.value.x=t,e.water.material.uniforms.flowDirection.value.normalize()}),this.gui.add(this.params,"flowY",-1,1).step(.01).onChange(function(t){e.water.material.uniforms.flowDirection.value.y=t,e.water.material.uniforms.flowDirection.value.normalize()}),this.gui.open();var h=new o.b(this.camera,this.renderer.domElement);h.minDistance=5,h.maxDistance=50,window.addEventListener("resize",this.onResize,!1)},onResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.render()},render:function(){var e=this.clock.getDelta();this.torusKnot.rotation.x+=e,this.torusKnot.rotation.y+=.5*e,this.renderer.render(this.scene,this.camera)}}},l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglWater-container"},[t("div",{attrs:{id:"container"}}),this._v(" "),t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener noreferrer"}},[this._v("three.js")]),this._v(" - water\n\t\t")])])}]};var s=r("VU/8")(n,l,!1,function(e){r("NfuX")},"data-v-4de4ddd8",null);t.default=s.exports}});
//# sourceMappingURL=33.edddfcffeadc7f7ea2af.js.map