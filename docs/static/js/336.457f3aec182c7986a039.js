webpackJsonp([336],{CG4k:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("QEtz"),s=n("wIBv"),r=n("6+nK"),a=function(e){this.subdivisions=void 0===e?1:e};a.prototype.modify=function(e){var t=e.isBufferGeometry;(e=t?(new r.Geometry).fromBufferGeometry(e):e.clone()).mergeVertices(6);for(var n=this.subdivisions;n-- >0;)this.smooth(e);return e.computeFaceNormals(),e.computeVertexNormals(),t?(new r.BufferGeometry).fromGeometry(e):e},function(){var e=["a","b","c"];function t(e,t,n){return n[Math.min(e,t)+"_"+Math.max(e,t)]}function n(e,t,n,i,s,r){var a,o=Math.min(e,t),h=Math.max(e,t),c=o+"_"+h;c in i?a=i[c]:(a={a:n[o],b:n[h],newEdge:null,faces:[]},i[c]=a);a.faces.push(s),r[e].edges.push(a),r[t].edges.push(a)}function i(e,t,n,i,s){e.push(new r.Face3(t,n,i,void 0,void 0,s))}function s(e,t){return Math.abs(t-e)/2+Math.min(e,t)}function o(e,t,n,i){e.push([t.clone(),n.clone(),i.clone()])}a.prototype.smooth=function(a){var h,c,d,l,m,u,f,v,g,w,E,p,y,b=new r.Vector3,M=[];h=a.vertices,c=a.faces;var x,R,$,_,H,C,B,I,T,G,S,V,z,W,L=void 0!==(d=a.faceVertexUvs)[0]&&d[0].length>0;if(L)for(var P=0;P<d.length;P++)M.push([]);for(f in function(e,t,i,s){var r,a,o;for(r=0,a=e.length;r<a;r++)i[r]={edges:[]};for(r=0,a=t.length;r<a;r++)n((o=t[r]).a,o.b,e,s,o,i),n(o.b,o.c,e,s,o,i),n(o.c,o.a,e,s,o,i)}(h,c,w=new Array(h.length),E={}),p=[],E){for(R=E[f],$=new r.Vector3,H=3/8,C=1/8,2!=(B=R.faces.length)&&(H=.5,C=0),$.addVectors(R.a,R.b).multiplyScalar(H),b.set(0,0,0),P=0;P<B;P++){for(_=R.faces[P],g=0;g<3&&((x=h[_[e[g]]])===R.a||x===R.b);g++);b.add(x)}b.multiplyScalar(C),$.add(b),R.newEdge=p.length,p.push($)}for(y=[],f=0,v=h.length;f<v;f++){for(z=h[f],3==(u=(V=w[f].edges).length)?I=3/16:u>3&&(I=3/(8*u)),T=1-u*I,G=I,u<=2&&2==u&&(T=.75,G=1/8),W=z.clone().multiplyScalar(T),b.set(0,0,0),P=0;P<u;P++)x=(S=V[P]).a!==z?S.a:S.b,b.add(x);b.multiplyScalar(G),W.add(b),y.push(W)}l=y.concat(p);var j,U,k,F,N,D,K,A=y.length;m=[];var O=new r.Vector2,X=new r.Vector2,q=new r.Vector2;for(f=0,v=c.length;f<v;f++)if(i(m,j=t((_=c[f]).a,_.b,E).newEdge+A,U=t(_.b,_.c,E).newEdge+A,k=t(_.c,_.a,E).newEdge+A,_.materialIndex),i(m,_.a,j,k,_.materialIndex),i(m,_.b,U,j,_.materialIndex),i(m,_.c,k,U,_.materialIndex),L)for(P=0;P<d.length;P++)N=(F=d[P][f])[0],D=F[1],K=F[2],O.set(s(N.x,D.x),s(N.y,D.y)),X.set(s(D.x,K.x),s(D.y,K.y)),q.set(s(N.x,K.x),s(N.y,K.y)),o(M[P],O,X,q),o(M[P],N,O,q),o(M[P],D,X,O),o(M[P],K,q,X);a.vertices=l,a.faces=m,L&&(a.faceVertexUvs=M)}}();var o={data:function(){return{camera:null,scene:null,renderer:null,stats:null,smoothMesh:null,wireframe:null,smoothMaterial:null,wireframeMaterial:null,faceIndices:["a","b","c"],params:{subdivisions:2},gui:null}},mounted:function(){this.smoothMaterial=new this.$THREE.MeshPhongMaterial({color:16777215,flatShading:!0,vertexColors:!0}),this.wireframeMaterial=new this.$THREE.MeshBasicMaterial({color:0,wireframe:!0,opacity:.15,transparent:!0}),this.init()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var e=this;this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,1,500),this.camera.position.z=100,this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(15790320);var t=new this.$THREE.PointLight(16777215,1.5);t.position.set(1e3,1e3,2e3),this.scene.add(t),(new this.$THREE.BufferGeometryLoader).load("static/models/json/WaltHeadLo_buffergeometry.json",function(t){var n=(new e.$THREE.Geometry).fromBufferGeometry(t);n.mergeVertices();var s=new e.$THREE.MeshBasicMaterial({color:13421772,wireframe:!0}),r=new e.$THREE.Mesh(t,s);e.scene.add(r),e.gui=new i.a,e.gui.add(e.params,"subdivisions",0,3).step(1).onChange(function(t){e.subdivide(n,t)}),e.subdivide(n,e.params.subdivisions),e.animate()}),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglModifierSubdivision-container")[0].appendChild(this.renderer.domElement),this.stats=new this.$Stats,this.stats.dom.style.left="280px",document.getElementsByClassName("webglModifierSubdivision-container")[0].appendChild(this.stats.dom);var n=new s.b(this.camera,this.renderer.domElement);n.minDistance=50,n.maxDistance=400,window.addEventListener("resize",this.onWindowResize,!1),this.smoothMesh=new this.$THREE.Mesh(void 0,this.smoothMaterial),this.wireframe=new this.$THREE.Mesh(void 0,this.wireframeMaterial),this.scene.add(this.smoothMesh,this.wireframe)},subdivide:function(e,t){for(var n=new a(t).modify(e),i=0;i<n.faces.length;i++)for(var s=n.faces[i],r=0;r<3;r++){var o=s[this.faceIndices[r]],h=n.vertices[o].y/200+.5,c=(new this.$THREE.Color).setHSL(h,1,.5);s.vertexColors[r]=c}this.smoothMesh.geometry&&this.smoothMesh.geometry.dispose(),this.smoothMesh.geometry=(new this.$THREE.BufferGeometry).fromGeometry(n),this.wireframe.geometry=this.smoothMesh.geometry,this.updateUI(e,n)},updateUI:function(e,t){document.getElementById("original-vertex-count").textContent=e.vertices.length,document.getElementById("original-face-count").textContent=e.faces.length,document.getElementById("smooth-vertex-count").textContent=t.vertices.length,document.getElementById("smooth-face-count").textContent=t.faces.length},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){this.renderer.render(this.scene,this.camera)}}},h={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"webglModifierSubdivision-container"},[n("div",{attrs:{id:"info"}},[n("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[e._v("three.js")]),e._v(" - subdivision modifier"),e._v("/ >\n\t\t\tOriginal Geometry: "),n("span",{attrs:{id:"original-vertex-count"}}),e._v(" vertices and "),n("span",{attrs:{id:"original-face-count"}}),e._v(" faces"),e._v("/ >\n\t\t\tSmooth Geometry: "),n("span",{attrs:{id:"smooth-vertex-count"}}),e._v(" vertices and "),n("span",{attrs:{id:"smooth-face-count"}}),e._v(" faces"),e._v("/ >\n\t\t")])])}]};var c=n("VU/8")(o,h,!1,function(e){n("XonK")},"data-v-0de29144",null);t.default=c.exports},XonK:function(e,t){}});
//# sourceMappingURL=336.457f3aec182c7986a039.js.map