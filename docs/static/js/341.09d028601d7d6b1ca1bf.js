webpackJsonp([341],{"7XWi":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){return{camera:null,scene:null,renderer:null,stats:null,mesh:null,dummy:null,amount:8,count:null}},mounted:function(){this.dummy=new this.$THREE.Object3D,this.count=Math.pow(this.amount,3),this.init(),this.animate()},methods:{init:function(){var e=this;this.renderer=new this.$THREE.WebGLRenderer({antialias:!1}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglInstancingModified-container")[0].appendChild(this.renderer.domElement),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.scene=new this.$THREE.Scene,this.camera=new this.$THREE.PerspectiveCamera(40,this.$webglInnerWidth/window.innerHeight,1,100),this.camera.position.set(0,0,20),(new this.$THREE.BufferGeometryLoader).load("static/models/json/suzanne_buffergeometry.json",function(t){for(var n=[],i=0;i<e.count;i++)n.push(Math.random()),n.push(Math.random()),n.push(Math.random());t.setAttribute("instanceColor",new e.$THREE.InstancedBufferAttribute(new Float32Array(n),3)),t.computeVertexNormals(),t.scale(.5,.5,.5),(new e.$THREE.TextureLoader).load("static/textures/matcaps/matcap-porcelain-white.jpg",function(n){n.encoding=e.$THREE.sRGBEncoding;var i=new e.$THREE.MeshMatcapMaterial({color:11184895,matcap:n}),s=["attribute vec3 instanceColor;","varying vec3 vInstanceColor;","#include <common>"].join("\n"),a=["#include <begin_vertex>","\tvInstanceColor = instanceColor;"].join("\n"),r=["varying vec3 vInstanceColor;","#include <common>"].join("\n"),o=["vec4 diffuseColor = vec4( diffuse * vInstanceColor, opacity );"].join("\n");i.onBeforeCompile=function(e){e.vertexShader=e.vertexShader.replace("#include <common>",s).replace("#include <begin_vertex>",a),e.fragmentShader=e.fragmentShader.replace("#include <common>",r).replace("vec4 diffuseColor = vec4( diffuse, opacity );",o)},e.mesh=new e.$THREE.InstancedMesh(t,i,e.count),e.mesh.instanceMatrix.setUsage(e.$THREE.DynamicDrawUsage),e.scene.add(e.mesh)})}),this.stats=new this.$Stats,this.stats.dom.style.left="280px",document.getElementsByClassName("webglInstancingModified-container")[0].appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){if(this.mesh){var e=.001*Date.now();this.mesh.rotation.x=Math.sin(e/4),this.mesh.rotation.y=Math.sin(e/2);for(var t=0,n=(this.amount-1)/2,i=0;i<this.amount;i++)for(var s=0;s<this.amount;s++)for(var a=0;a<this.amount;a++)this.dummy.position.set(n-i,n-s,n-a),this.dummy.rotation.y=Math.sin(i/4+e)+Math.sin(s/4+e)+Math.sin(a/4+e),this.dummy.rotation.z=2*this.dummy.rotation.y,this.dummy.updateMatrix(),this.mesh.setMatrixAt(t++,this.dummy.matrix);this.mesh.instanceMatrix.needsUpdate=!0}this.renderer.render(this.scene,this.camera)}}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglInstancingModified-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - webgl instancing - modified\n\t\t")])])}]};var a=n("VU/8")(i,s,!1,function(e){n("Kuv2")},"data-v-094b5f30",null);t.default=a.exports},Kuv2:function(e,t){}});
//# sourceMappingURL=341.09d028601d7d6b1ca1bf.js.map