webpackJsonp([348],{Ydv1:function(e,t){},pyFs:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("6+nK"),r=function(){var e=null;function t(){if(null===e){var t=new ArrayBuffer(2),n=new Uint8Array(t),i=new Uint16Array(t);n[0]=170,n[1]=187,e=43707===i[0]}return e}var n=[null,Float32Array,null,Int8Array,Int16Array,null,Int32Array,Uint8Array,Uint16Array,null,Uint32Array],r={Uint16Array:"getUint16",Uint32Array:"getUint32",Int16Array:"getInt16",Int32Array:"getInt32",Float32Array:"getFloat32",Float64Array:"getFloat64"};function o(e,n,i,o,a){var s,l=n.BYTES_PER_ELEMENT;if(a===t()||1===l)s=new n(e,i,o);else{var d=new DataView(e,i,o*l),c=r[n.name],h=!a,u=0;for(s=new n(o);u<o;u++)s[u]=d[c](u*l,h)}return s}function a(e){i.Loader.call(this,e)}return a.prototype=Object.assign(Object.create(i.Loader.prototype),{constructor:a,load:function(e,n,r,o){var a=this,s=new i.FileLoader(a.manager);s.setPath(a.path),s.setResponseType("arraybuffer"),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),e=e.replace(/\*/g,t()?"be":"le"),s.load(e,function(t){try{n(a.parse(t))}catch(t){o?o(t):console.error(t),a.manager.itemError(e)}},r,o)},parse:function(e){var t,r,a=function(e){var t=new Uint8Array(e),i=t[0],r=t[1],a=!!(r>>7&1),s=r>>6&1,l=1==(r>>5&1),d=31&r,c=0,h=0;if(l?(c=(t[2]<<16)+(t[3]<<8)+t[4],h=(t[5]<<16)+(t[6]<<8)+t[7]):(c=t[2]+(t[3]<<8)+(t[4]<<16),h=t[5]+(t[6]<<8)+(t[7]<<16)),0===i)throw new Error("PRWM decoder: Invalid format version: 0");if(1!==i)throw new Error("PRWM decoder: Unsupported format version: "+i);if(!a){if(0!==s)throw new Error("PRWM decoder: Indices type must be set to 0 for non-indexed geometries");if(0!==h)throw new Error("PRWM decoder: Number of indices must be set to 0 for non-indexed geometries")}var u,m,f,w,v,p,g,y,E=8,b={};for(y=0;y<d;y++){for(u="";E<t.length&&(m=t[E],E++,0!==m);)u+=String.fromCharCode(m);f=(r=t[E])>>7&1,w=1+(r>>4&3),E++,p=o(e,v=n[15&r],E=4*Math.ceil(E/4),w*c,l),E+=v.BYTES_PER_ELEMENT*w*c,b[u]={type:f,cardinality:w,values:p}}return E=4*Math.ceil(E/4),g=null,a&&(g=o(e,1===s?Uint32Array:Uint16Array,E,h,l)),{version:i,attributes:b,indices:g}}(e),s=Object.keys(a.attributes),l=new i.BufferGeometry;for(r=0;r<s.length;r++)t=a.attributes[s[r]],l.setAttribute(s[r],new i.BufferAttribute(t.values,t.cardinality,t.normalized));return null!==a.indices&&l.setIndex(new i.BufferAttribute(a.indices,1)),l}}),a.isBigEndianPlatform=function(){return t()},a}(),o={data:function(){return{camera:null,scene:null,renderer:null,mouseX:0,mouseY:0,windowHalfX:null,windowHalfY:null}},mounted:function(){this.windowHalfX=this.$webglInnerWidth/2,this.windowHalfY=window.innerHeight/2,this.init(),this.animate()},methods:{init:function(){document.getElementById("endianness").innerHTML=r.isBigEndianPlatform()?"big-endian":"little-endian";var e=document.createElement("div");document.getElementsByClassName("webglLoaderPrwm-container")[0].appendChild(e),this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,1,2e3),this.camera.position.z=250,this.scene=new this.$THREE.Scene;var t=new this.$THREE.AmbientLight(1052720);this.scene.add(t);var n=new this.$THREE.DirectionalLight(16772829);n.position.set(0,0,1),this.scene.add(n);var i=new r,o=new this.$THREE.MeshPhongMaterial({}),a=!1,s=null,l=function(e){if(e.lengthComputable){var t=e.loaded/e.total*100;console.log(Math.round(t,2)+"% downloaded"),e.loaded===e.total&&(console.log("File size: "+(e.total/1024).toFixed(2)+"kB"),console.timeEnd("Download"))}},d=function(){a=!1},c=this;function h(e){a||(a=!0,null!==s&&(c.scene.remove(s),s.geometry.dispose()),console.log("-- Loading",e),console.time("Download"),i.load(e,function(e){(s=new c.$THREE.Mesh(e,o)).scale.set(50,50,50),c.scene.add(s),console.log(e.index?"indexed geometry":"non-indexed geometry"),console.log("# of vertices: "+e.attributes.position.count),console.log("# of polygons: "+(e.index?e.index.count/3:e.attributes.position.count/3)),a=!1},l,d))}this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),e.appendChild(this.renderer.domElement),document.addEventListener("mousemove",this.onDocumentMouseMove,!1),document.querySelectorAll("a.model").forEach(function(e){e.addEventListener("click",function(t){t.preventDefault(),h(e.href)})}),h("static/models/prwm/smooth-suzanne.*.prwm"),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.windowHalfX=window.innerWidth-140.5,this.windowHalfY=window.innerHeight/2,this.$onWindowResize(this.camera,this.renderer)},onDocumentMouseMove:function(e){this.mouseX=(e.clientX-this.windowHalfX)/2,this.mouseY=(e.clientY-this.windowHalfY)/2},animate:function(){requestAnimationFrame(this.animate),this.render()},render:function(){this.camera.position.x+=.05*(this.mouseX-this.camera.position.x),this.camera.position.y+=.05*(-this.mouseY-this.camera.position.y),this.camera.lookAt(this.scene.position),this.renderer.render(this.scene,this.camera)}}},a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"webglLoaderPrwm-container"},[n("div",{attrs:{id:"info"}},[n("strong",[e._v("Models")]),e._v(":\n\t\t\t"),n("a",{staticClass:"model",attrs:{href:"static/models/prwm/faceted-nefertiti.*.prwm"}},[e._v("Faceted Nefertiti")]),e._v(",\n\t\t\t"),n("a",{staticClass:"model",attrs:{href:"static/models/prwm/smooth-suzanne.*.prwm"}},[e._v("Smooth Suzanne")]),e._v(",\n\t\t\t"),n("a",{staticClass:"model",attrs:{href:"static/models/prwm/vive-controller.*.prwm"}},[e._v("Vive Controller")]),e._v(" "),n("div",{staticClass:"notes"},[e._v("\n\t\t\t\tThe parsing of PRWM file is especially fast when the endianness of the file is the same as the endianness of the client platform.\n\t\t\t\tThe loader will automatically replace the "),n("strong",[e._v("*")]),e._v(" in the model url by either "),n("strong",[e._v("le")]),e._v(" or "),n("strong",[e._v("be")]),e._v(" depending on the client platform's endianness to download the most appropriate file. "),n("a",{attrs:{href:"https://github.com/kchapelier/PRWM",target:"_blank",rel:"noopener noreferrer"}},[e._v("Specifications and implementations")]),n("br"),n("br"),e._v("\n\t\t\t\tThis platform endianness is "),n("strong",{attrs:{id:"endianness"}}),e._v("."),n("br"),e._v("\n\t\t\t\tSee your console for stats.\n\t\t\t")])])])}]};var s=n("VU/8")(o,a,!1,function(e){n("Ydv1")},"data-v-078e140a",null);t.default=s.exports}});
//# sourceMappingURL=348.436d15fc4e2a61c6802a.js.map