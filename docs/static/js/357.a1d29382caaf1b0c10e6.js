webpackJsonp([357],{"0mff":function(e,t,r){"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}Object.defineProperty(t,"__esModule",{value:!0});var i={data:function(){var e;return n(e={fragmentShader:null,vertexShader:null,N:100,container:null,camera:null,scene:null,renderer:null,geometry:null,meshes:[]},"fragmentShader",null),n(e,"vertexShader",null),e},mounted:function(){this.fragmentShader="\n            void main() {\n\t\t\t\tif (mod (gl_FragCoord.x, 4.0001) < 1.0 || mod (gl_FragCoord.y, 4.0001) < 1.0)\n\t\t\t\t\tgl_FragColor = vec4(XXX, 1.0);\n\t\t\t\telse\n\t\t\t\t\tgl_FragColor = vec4(1.0);\n            }",this.vertexShader="\n            void main() {\n\t\t\t\tvec4 mvPosition = modelViewMatrix * vec4(position, 1.0);\n\t\t\t\tgl_Position = projectionMatrix * mvPosition;\n            }",this.init(),setInterval(this.render,1e3/60)},methods:{init:function(){this.container=document.createElement("div"),document.getElementsByClassName("webglTestMemory2-container")[0].appendChild(this.container),this.camera=new this.$THREE.PerspectiveCamera(40,this.$webglInnerWidth/window.innerHeight,1,1e4),this.camera.position.z=2e3,this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(16777215),this.geometry=new this.$THREE.SphereBufferGeometry(15,64,32);for(var e=0;e<this.N;e++){var t=new this.$THREE.ShaderMaterial({vertexShader:this.vertexShader,fragmentShader:this.generateFragmentShader()}),r=new this.$THREE.Mesh(this.geometry,t);r.position.x=1e3*(.5-Math.random()),r.position.y=1e3*(.5-Math.random()),r.position.z=1e3*(.5-Math.random()),this.scene.add(r),this.meshes.push(r)}this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},generateFragmentShader:function(){return this.fragmentShader.replace("XXX",Math.random()+","+Math.random()+","+Math.random())},render:function(){for(var e=0;e<this.N;e++){this.meshes[e].material=new this.$THREE.ShaderMaterial({vertexShader:this.vertexShader,fragmentShader:this.generateFragmentShader()})}this.renderer.render(this.scene,this.camera),console.log("before",this.renderer.info.programs.length);for(e=0;e<this.N;e++){this.meshes[e].material.dispose()}console.log("after",this.renderer.info.programs.length)}}},a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglTestMemory2-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - memory test II\n\t\t")])])}]};var s=r("VU/8")(i,a,!1,function(e){r("fXK7")},"data-v-03731514",null);t.default=s.exports},fXK7:function(e,t){}});
//# sourceMappingURL=357.a1d29382caaf1b0c10e6.js.map