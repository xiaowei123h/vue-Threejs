webpackJsonp([360],{PK5R:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=r("6+nK"),i=function(e,t){s.BufferGeometry.call(this);var r=[],i=[],n=[],o=[1,1,1],a=[1,1,0],h=new s.Vector3(0,1,0),p=new s.Vector3,c=new s.Vector3,u=new s.Quaternion,l=new s.Quaternion;l.setFromAxisAngle(h,Math.PI/2);var y=new s.Vector3,m=new s.Vector3;m.copy(e.getPointAt(0));for(var d=[new s.Vector3(-.225,0,0),new s.Vector3(0,-.05,0),new s.Vector3(0,-.175,0),new s.Vector3(0,-.05,0),new s.Vector3(.225,0,0),new s.Vector3(0,-.175,0)],w=2*Math.PI,f=5,v=[],M=0;M<f;M++){var g=M/f*w;v.push(new s.Vector3(.06*Math.sin(g),.06*Math.cos(g),0))}f=6;var E=[];for(M=0;M<f;M++){g=M/f*w;E.push(new s.Vector3(.025*Math.sin(g),.025*Math.cos(g),0))}var V=new s.Vector3,x=new s.Vector3;function A(e,t){x.set(0,0,-1).applyQuaternion(u);for(var s=0;s<e.length;s++)V.copy(e[s]),V.applyQuaternion(u),V.add(y),r.push(V.x,V.y,V.z),i.push(x.x,x.y,x.z),n.push(t[0],t[1],t[2]);x.set(0,0,1).applyQuaternion(u);for(s=e.length-1;s>=0;s--)V.copy(e[s]),V.applyQuaternion(u),V.add(y),r.push(V.x,V.y,V.z),i.push(x.x,x.y,x.z),n.push(t[0],t[1],t[2])}var z=new s.Vector3,R=new s.Vector3,b=new s.Vector3,T=new s.Vector3,Q=new s.Vector3,$=new s.Vector3,H=new s.Vector3,P=new s.Vector3;function B(e,t,s){for(var o=0,a=e.length;o<a;o++){var h=e[o],p=e[(o+1)%a];z.copy(h).add(t),z.applyQuaternion(u),z.add(y),R.copy(p).add(t),R.applyQuaternion(u),R.add(y),b.copy(p).add(t),b.applyQuaternion(l),b.add(m),T.copy(h).add(t),T.applyQuaternion(l),T.add(m),r.push(z.x,z.y,z.z),r.push(R.x,R.y,R.z),r.push(T.x,T.y,T.z),r.push(R.x,R.y,R.z),r.push(b.x,b.y,b.z),r.push(T.x,T.y,T.z),Q.copy(h),Q.applyQuaternion(u),Q.normalize(),$.copy(p),$.applyQuaternion(u),$.normalize(),H.copy(p),H.applyQuaternion(l),H.normalize(),P.copy(h),P.applyQuaternion(l),P.normalize(),i.push(Q.x,Q.y,Q.z),i.push($.x,$.y,$.z),i.push(P.x,P.y,P.z),i.push($.x,$.y,$.z),i.push(H.x,H.y,H.z),i.push(P.x,P.y,P.z),n.push(s[0],s[1],s[2]),n.push(s[0],s[1],s[2]),n.push(s[0],s[1],s[2]),n.push(s[0],s[1],s[2]),n.push(s[0],s[1],s[2]),n.push(s[0],s[1],s[2])}}var F=new s.Vector3;for(M=1;M<=t;M++){y.copy(e.getPointAt(M/t)),h.set(0,1,0),p.subVectors(y,m).normalize(),c.crossVectors(h,p).normalize(),h.crossVectors(p,c);g=Math.atan2(p.x,p.z);u.setFromAxisAngle(h,g),M%2==0&&A(d,a),B(v,F.set(0,-.125,0),a),B(E,F.set(.2,0,0),o),B(E,F.set(-.2,0,0),o),m.copy(y),l.copy(u)}this.setAttribute("position",new s.BufferAttribute(new Float32Array(r),3)),this.setAttribute("normal",new s.BufferAttribute(new Float32Array(i),3)),this.setAttribute("color",new s.BufferAttribute(new Float32Array(n),3))};i.prototype=Object.create(s.BufferGeometry.prototype);var n=function(e,t){s.BufferGeometry.call(this);var r=[],i=[],n=new s.Quaternion,o=new s.Vector3(0,1,0),a=new s.Vector3,h=new s.Vector3,p=[new s.Vector3(0,.05,-.05),new s.Vector3(0,.05,.05),new s.Vector3(0,-.05,0)],c=[new s.Vector3(-.05,0,.05),new s.Vector3(-.05,0,-.05),new s.Vector3(.05,0,0)],u=[new s.Vector3(.05,0,-.05),new s.Vector3(.05,0,.05),new s.Vector3(-.05,0,0)],l=new s.Vector3,y=new s.Vector3,m=new s.Vector3,d=new s.Vector3,w=new s.Vector3,f=new s.Vector3,v=new s.Vector3,M=new s.Vector3;function g(e,t,s){for(var o=0,a=e.length;o<a;o++){var h=e[o],p=e[(o+1)%a];l.copy(h),l.applyQuaternion(n),l.add(t),y.copy(p),y.applyQuaternion(n),y.add(t),m.copy(p),m.applyQuaternion(n),m.add(s),d.copy(h),d.applyQuaternion(n),d.add(s),r.push(l.x,l.y,l.z),r.push(y.x,y.y,y.z),r.push(d.x,d.y,d.z),r.push(y.x,y.y,y.z),r.push(m.x,m.y,m.z),r.push(d.x,d.y,d.z),w.copy(h),w.applyQuaternion(n),w.normalize(),f.copy(p),f.applyQuaternion(n),f.normalize(),v.copy(p),v.applyQuaternion(n),v.normalize(),M.copy(h),M.applyQuaternion(n),M.normalize(),i.push(w.x,w.y,w.z),i.push(f.x,f.y,f.z),i.push(M.x,M.y,M.z),i.push(f.x,f.y,f.z),i.push(v.x,v.y,v.z),i.push(M.x,M.y,M.z)}}for(var E=new s.Vector3,V=new s.Vector3,x=1;x<=t;x++){a.copy(e.getPointAt(x/t)),h.copy(e.getTangentAt(x/t));var A=Math.atan2(h.x,h.z);n.setFromAxisAngle(o,A),a.y>10?(E.set(-.75,-.35,0),E.applyQuaternion(n),E.add(a),V.set(.75,-.35,0),V.applyQuaternion(n),V.add(a),g(p,E,V),E.set(-.7,-.3,0),E.applyQuaternion(n),E.add(a),V.set(-.7,-a.y,0),V.applyQuaternion(n),V.add(a),g(c,E,V),E.set(.7,-.3,0),E.applyQuaternion(n),E.add(a),V.set(.7,-a.y,0),V.applyQuaternion(n),V.add(a),g(u,E,V)):(E.set(0,-.2,0),E.applyQuaternion(n),E.add(a),V.set(0,-a.y,0),V.applyQuaternion(n),V.add(a),g(u,E,V))}this.setAttribute("position",new s.BufferAttribute(new Float32Array(r),3)),this.setAttribute("normal",new s.BufferAttribute(new Float32Array(i),3))};n.prototype=Object.create(s.BufferGeometry.prototype);var o=function(e,t){s.BufferGeometry.call(this);var r=[],i=new s.Vector3(0,1,0),n=new s.Vector3,o=new s.Quaternion,a=new s.Quaternion;a.setFromAxisAngle(i,Math.PI/2);var h=new s.Vector3,p=new s.Vector3;p.copy(e.getPointAt(0)),p.y=0;for(var c=new s.Vector3,u=new s.Vector3,l=new s.Vector3,y=new s.Vector3,m=1;m<=t;m++){h.copy(e.getPointAt(m/t)),h.y=0,n.subVectors(h,p);var d=Math.atan2(n.x,n.z);o.setFromAxisAngle(i,d),c.set(-.3,0,0),c.applyQuaternion(o),c.add(h),u.set(.3,0,0),u.applyQuaternion(o),u.add(h),l.set(.3,0,0),l.applyQuaternion(a),l.add(p),y.set(-.3,0,0),y.applyQuaternion(a),y.add(p),r.push(c.x,c.y,c.z),r.push(u.x,u.y,u.z),r.push(y.x,y.y,y.z),r.push(u.x,u.y,u.z),r.push(l.x,l.y,l.z),r.push(y.x,y.y,y.z),p.copy(h),a.copy(o)}this.setAttribute("position",new s.BufferAttribute(new Float32Array(r),3))};o.prototype=Object.create(s.BufferGeometry.prototype);var a=function(){s.BufferGeometry.call(this);for(var e=[],t=0;t<100;t++){var r=800*Math.random()-400,i=50*Math.random()+50,n=800*Math.random()-400,o=40*Math.random()+20;e.push(r-o,i,n-o),e.push(r+o,i,n-o),e.push(r-o,i,n+o),e.push(r+o,i,n-o),e.push(r+o,i,n+o),e.push(r-o,i,n+o)}this.setAttribute("position",new s.BufferAttribute(new Float32Array(e),3))};a.prototype=Object.create(s.BufferGeometry.prototype);var h=function(e){s.BufferGeometry.call(this);var t=[],r=[],i=new s.Raycaster;i.ray.direction.set(0,-1,0);for(var n=0;n<2e3;n++){var o=500*Math.random()-250,a=500*Math.random()-250;i.ray.origin.set(o,50,a);var h=i.intersectObject(e);if(0!==h.length){var p=h[0].point.y,c=5*Math.random()+.5,u=Math.random()*Math.PI*2;t.push(o+Math.sin(u),p,a+Math.cos(u)),t.push(o,p+c,a),t.push(o+Math.sin(u+Math.PI),p,a+Math.cos(u+Math.PI)),u+=Math.PI/2,t.push(o+Math.sin(u),p,a+Math.cos(u)),t.push(o,p+c,a),t.push(o+Math.sin(u+Math.PI),p,a+Math.cos(u+Math.PI));for(var l=.1*Math.random(),y=0;y<6;y++)r.push(.2+l,.4+l,0)}}this.setAttribute("position",new s.BufferAttribute(new Float32Array(t),3)),this.setAttribute("color",new s.BufferAttribute(new Float32Array(r),3))};h.prototype=Object.create(s.BufferGeometry.prototype);var p=r("Y95o"),c={data:function(){return{mesh:null,material:null,geometry:null,renderer:null,scene:null,light:null,train:null,camera:null,positions:null,vertex:null,tangent:null,lookAt:null,velocity:0,progress:0,prevTime:null,funfairs:[],position:null,curve:null}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.xr.enabled=!0,this.renderer.xr.setReferenceSpaceType("local"),document.getElementsByClassName("webxrVrRollercoaster-container")[0].appendChild(this.renderer.domElement),document.getElementsByClassName("webxrVrRollercoaster-container")[0].appendChild(p.a.createButton(this.renderer)),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(15790335),this.light=new this.$THREE.HemisphereLight(16773360,6316134),this.light.position.set(1,1,1),this.scene.add(this.light),this.train=new this.$THREE.Object3D,this.scene.add(this.train),this.camera=new this.$THREE.PerspectiveCamera(50,this.$webglInnerWidth/window.innerHeight,.1,500),this.train.add(this.camera),this.geometry=new this.$THREE.PlaneBufferGeometry(500,500,15,15),this.geometry.rotateX(-Math.PI/2),this.positions=this.geometry.attributes.position.array,this.vertex=new this.$THREE.Vector3;for(var t=0;t<this.positions.length;t+=3){this.vertex.fromArray(this.positions,t),this.vertex.x+=10*Math.random()-5,this.vertex.z+=10*Math.random()-5;var r=this.vertex.distanceTo(this.scene.position)/5-25;this.vertex.y=Math.random()*Math.max(0,r),this.vertex.toArray(this.positions,t)}this.geometry.computeVertexNormals(),this.material=new this.$THREE.MeshLambertMaterial({color:4222976}),this.mesh=new this.$THREE.Mesh(this.geometry,this.material),this.scene.add(this.mesh),this.geometry=new h(this.mesh),this.material=new this.$THREE.MeshBasicMaterial({side:this.$THREE.DoubleSide,vertexColors:!0}),this.mesh=new this.$THREE.Mesh(this.geometry,this.material),this.scene.add(this.mesh),this.geometry=new a,this.material=new this.$THREE.MeshBasicMaterial({color:16777215}),this.mesh=new this.$THREE.Mesh(this.geometry,this.material),this.scene.add(this.mesh);var s,c,u=2*Math.PI;this.curve=(s=new e.$THREE.Vector3,c=new e.$THREE.Vector3,{getPointAt:function(e){e*=u;var t=Math.sin(3*e)*Math.cos(4*e)*50,r=2*Math.sin(10*e)+2*Math.cos(17*e)+5,i=Math.sin(e)*Math.sin(4*e)*50;return s.set(t,r,i).multiplyScalar(2)},getTangentAt:function(e){var t=Math.max(0,e-1e-4),r=Math.min(1,e+1e-4);return c.copy(this.getPointAt(r)).sub(this.getPointAt(t)).normalize()}}),this.geometry=new i(this.curve,1500),this.material=new this.$THREE.MeshPhongMaterial({vertexColors:!0}),this.mesh=new this.$THREE.Mesh(this.geometry,this.material),this.scene.add(this.mesh),this.geometry=new n(this.curve,100),this.material=new this.$THREE.MeshPhongMaterial,this.mesh=new this.$THREE.Mesh(this.geometry,this.material),this.mesh.position.y=.1,this.scene.add(this.mesh),this.geometry=new o(this.curve,500),this.material=new this.$THREE.MeshBasicMaterial({color:3166208,depthWrite:!1,transparent:!0}),this.mesh=new this.$THREE.Mesh(this.geometry,this.material),this.mesh.position.y=.1,this.scene.add(this.mesh),this.geometry=new this.$THREE.CylinderBufferGeometry(10,10,5,15),this.material=new this.$THREE.MeshLambertMaterial({color:16744576}),this.mesh=new this.$THREE.Mesh(this.geometry,this.material),this.mesh.position.set(-80,10,-70),this.mesh.rotation.x=Math.PI/2,this.scene.add(this.mesh),this.funfairs.push(this.mesh),this.geometry=new this.$THREE.CylinderBufferGeometry(5,6,4,10),this.material=new this.$THREE.MeshLambertMaterial({color:8421631}),this.mesh=new this.$THREE.Mesh(this.geometry,this.material),this.mesh.position.set(50,2,30),this.scene.add(this.mesh),this.funfairs.push(this.mesh),window.addEventListener("resize",this.onWindowResize,!1),this.position=new this.$THREE.Vector3,this.tangent=new this.$THREE.Vector3,this.lookAt=new this.$THREE.Vector3,this.prevTime=performance.now(),this.renderer.setAnimationLoop(this.render)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},render:function(){for(var e=performance.now(),t=e-this.prevTime,r=0;r<this.funfairs.length;r++)this.funfairs[r].rotation.y=4e-4*e;this.progress+=this.velocity,this.progress=this.progress%1,this.position.copy(this.curve.getPointAt(this.progress)),this.position.y+=.3,this.train.position.copy(this.position),this.tangent.copy(this.curve.getTangentAt(this.progress)),this.velocity-=1e-7*this.tangent.y*t,this.velocity=Math.max(4e-5,Math.min(2e-4,this.velocity)),this.train.lookAt(this.lookAt.copy(this.position).sub(this.tangent)),this.renderer.render(this.scene,this.camera),this.prevTime=e}}},u={render:function(){var e=this.$createElement;return(this._self._c||e)("div",{staticClass:"webxrVrRollercoaster-container"})},staticRenderFns:[]};var l=r("VU/8")(c,u,!1,function(e){r("YWPS")},"data-v-015a8232",null);t.default=l.exports},YWPS:function(e,t){}});
//# sourceMappingURL=360.c227673bbcafd60d727f.js.map