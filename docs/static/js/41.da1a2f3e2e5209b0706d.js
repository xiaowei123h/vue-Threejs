webpackJsonp([41],{"3lxl":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("wIBv"),a=r("tred"),i=r("Y95o"),s={data:function(){return{camera:null,scene:null,renderer:null,controller1:null,controller2:null,cursor:null,controls:null}},mounted:function(){this.cursor=new this.$THREE.Vector3,this.init(),this.animate()},methods:{init:function(){var e=document.createElement("div");document.getElementsByClassName("webxrVrPaint-container")[0].appendChild(e),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(2236962),this.camera=new this.$THREE.PerspectiveCamera(50,this.$webglInnerWidth/window.innerHeight,.01,50),this.camera.position.set(0,1.6,3),this.controls=new n.b(this.camera,e),this.controls.target.set(0,1.6,0),this.controls.update();var t=new this.$THREE.BoxBufferGeometry(.5,.8,.5),r=new this.$THREE.MeshStandardMaterial({color:4473924,roughness:1,metalness:0}),s=new this.$THREE.Mesh(t,r);s.position.y=.35,s.position.z=.85,this.scene.add(s);var o=new this.$THREE.PlaneBufferGeometry(4,4),l=new this.$THREE.MeshStandardMaterial({color:2236962,roughness:1,metalness:0}),c=new this.$THREE.Mesh(o,l);c.rotation.x=-Math.PI/2,this.scene.add(c);var d=new this.$THREE.GridHelper(10,20,1118481,1118481);this.scene.add(d),this.scene.add(new this.$THREE.HemisphereLight(8947831,7829384));var h=new this.$THREE.DirectionalLight(16777215,.5);h.position.set(0,4,0),this.scene.add(h);var u=new a.a;this.scene.add(u.mesh);var y=new a.a;function p(){this.userData.isSelecting=!0}function w(){this.userData.isSelecting=!1}function f(){this.userData.isSqueezing=!0,this.userData.positionAtSqueezeStart=this.position.y,this.userData.scaleAtSqueezeStart=this.scale.x}function E(){this.userData.isSqueezing=!1}this.scene.add(y.mesh),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.renderer.xr.enabled=!0,e.appendChild(this.renderer.domElement),document.getElementsByClassName("webxrVrPaint-container")[0].appendChild(i.a.createButton(this.renderer)),this.controller1=this.renderer.xr.getController(0),this.controller1.addEventListener("selectstart",p),this.controller1.addEventListener("selectend",w),this.controller1.addEventListener("squeezestart",f),this.controller1.addEventListener("squeezeend",E),this.controller1.userData.painter=u,this.scene.add(this.controller1),this.controller2=this.renderer.xr.getController(1),this.controller2.addEventListener("selectstart",p),this.controller2.addEventListener("selectend",w),this.controller2.addEventListener("squeezestart",f),this.controller2.addEventListener("squeezeend",E),this.controller2.userData.painter=y,this.scene.add(this.controller2);var m=new this.$THREE.CylinderBufferGeometry(.01,.02,.08,5);m.rotateX(-Math.PI/2);var v=new this.$THREE.MeshStandardMaterial({flatShading:!0}),g=new this.$THREE.Mesh(m,v),R=new this.$THREE.Mesh(new this.$THREE.IcosahedronBufferGeometry(.01,3));R.name="pivot",R.position.z=-.05,g.add(R),this.controller1.add(g.clone()),this.controller2.add(g.clone()),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},handleController:function(e){var t=e.userData,r=t.painter,n=e.getObjectByName("pivot");if(!0===t.isSqueezing){var a=5*(e.position.y-t.positionAtSqueezeStart),i=Math.max(.1,t.scaleAtSqueezeStart+a);n.scale.setScalar(i),r.setSize(i)}this.cursor.setFromMatrixPosition(n.matrixWorld),!0===t.isSelecting?(r.lineTo(this.cursor),r.update()):r.moveTo(this.cursor)},animate:function(){this.renderer.setAnimationLoop(this.render)},render:function(){this.handleController(this.controller1),this.handleController(this.controller2),this.renderer.render(this.scene,this.camera)}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webxrVrPaint-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" vr - paint\n\t\t")])])}]};var l=r("VU/8")(s,o,!1,function(e){r("oLQm")},"data-v-65c523e3",null);t.default=l.exports},oLQm:function(e,t){},tred:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var n=r("6+nK");function a(){var e=new n.BufferAttribute(new Float32Array(3e6),3);e.usage=n.DynamicDrawUsage;var t=new n.BufferAttribute(new Float32Array(3e6),3);t.usage=n.DynamicDrawUsage;var r=new n.BufferAttribute(new Float32Array(3e6),3);r.usage=n.DynamicDrawUsage;var a=new n.BufferGeometry;a.setAttribute("position",e),a.setAttribute("normal",t),a.setAttribute("color",r),a.drawRange.count=0;var i=new n.MeshStandardMaterial({vertexColors:!0}),s=new n.Mesh(a,i);s.frustumCulled=!1;var o=new n.Vector3,l=new n.Vector3,c=new n.Vector3,d=new n.Vector3,h=new n.Color(16777215),u=1;function y(i,s,y,p){if(0!==i.distanceToSquared(s)){for(var w=a.drawRange.count,f=function(e){for(var t=2*Math.PI,r=[],a=.01*e,i=0;i<10;i++){var s=i/10*t;r.push(new n.Vector3(Math.sin(s)*a,Math.cos(s)*a,0))}return r}(u),E=0,m=f.length;E<m;E++){var v=f[E],g=f[(E+1)%m];o.copy(v).applyMatrix4(p).add(s),l.copy(g).applyMatrix4(p).add(s),c.copy(g).applyMatrix4(y).add(i),d.copy(v).applyMatrix4(y).add(i),o.toArray(e.array,3*(w+0)),l.toArray(e.array,3*(w+1)),d.toArray(e.array,3*(w+2)),l.toArray(e.array,3*(w+3)),c.toArray(e.array,3*(w+4)),d.toArray(e.array,3*(w+5)),o.copy(v).applyMatrix4(p).normalize(),l.copy(g).applyMatrix4(p).normalize(),c.copy(g).applyMatrix4(y).normalize(),d.copy(v).applyMatrix4(y).normalize(),o.toArray(t.array,3*(w+0)),l.toArray(t.array,3*(w+1)),d.toArray(t.array,3*(w+2)),l.toArray(t.array,3*(w+3)),c.toArray(t.array,3*(w+4)),d.toArray(t.array,3*(w+5)),h.toArray(r.array,3*(w+0)),h.toArray(r.array,3*(w+1)),h.toArray(r.array,3*(w+2)),h.toArray(r.array,3*(w+3)),h.toArray(r.array,3*(w+4)),h.toArray(r.array,3*(w+5)),w+=6}a.drawRange.count=w}}var p=new n.Vector3(0,1,0),w=new n.Vector3,f=new n.Vector3,E=new n.Matrix4,m=new n.Matrix4;var v=0;return{mesh:s,moveTo:function(e){w.copy(e),E.lookAt(f,w,p),f.copy(e),m.copy(E)},lineTo:function(e){w.copy(e),E.lookAt(f,w,p),y(w,f,E,m),f.copy(w),m.copy(E)},setSize:function(e){u=e},update:function(){var n=v,i=a.drawRange.count;n!==i&&(e.updateRange.offset=3*n,e.updateRange.count=3*(i-n),e.needsUpdate=!0,t.updateRange.offset=3*n,t.updateRange.count=3*(i-n),t.needsUpdate=!0,r.updateRange.offset=3*n,r.updateRange.count=3*(i-n),r.needsUpdate=!0,v=a.drawRange.count)}}}}});
//# sourceMappingURL=41.da1a2f3e2e5209b0706d.js.map