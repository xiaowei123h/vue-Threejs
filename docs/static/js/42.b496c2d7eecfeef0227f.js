webpackJsonp([42],{"3Dnk":function(e,r,t){"use strict";Object.defineProperty(r,"__esModule",{value:!0});var a=t("tred"),n=t("aUSN"),i={data:function(){return{container:null,camera:null,scene:null,renderer:null,controller:null,painter:null,cursor:null}},mounted:function(){this.cursor=new this.$THREE.Vector3,this.init(),this.animate()},methods:{init:function(){this.container=document.createElement("div"),document.getElementsByClassName("webxrArPaint-container")[0].appendChild(this.container),this.scene=new this.$THREE.Scene,this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,.01,20),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0,alpha:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.xr.enabled=!0,this.container.appendChild(this.renderer.domElement),document.getElementsByClassName("webxrArPaint-container")[0].appendChild(n.a.createButton(this.renderer));var e=new this.$THREE.HemisphereLight(16777215,12303359,1);e.position.set(0,1,0),this.scene.add(e),this.painter=new a.a,this.painter.setSize(.4),this.painter.mesh.material.side=this.$THREE.DoubleSide,this.scene.add(this.painter.mesh);var r=this;this.controller=this.renderer.xr.getController(0),this.controller.addEventListener("selectstart",function(){r.userData.isSelecting=!0,r.userData.skipFrames=2}),this.controller.addEventListener("selectend",function(){r.userData.isSelecting=!1}),this.controller.userData.skipFrames=0,this.scene.add(this.controller),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},handleController:function(e){var r=e.userData;this.cursor.set(0,0,-.2).applyMatrix4(e.matrixWorld),!0===r.isSelecting&&(r.skipFrames>=0?(r.skipFrames--,this.painter.moveTo(this.cursor)):(this.painter.lineTo(this.cursor),this.painter.update()))},animate:function(){this.renderer.setAnimationLoop(this.render)},render:function(){this.handleController(this.controller),this.renderer.render(this.scene,this.camera)}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,r=this._self._c||e;return r("div",{staticClass:"webxrArPaint-container"},[r("div",{attrs:{id:"info"}},[r("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" ar - paint"),r("br"),this._v("(Chrome Android 81+)\n\t\t")])])}]};var s=t("VU/8")(i,o,!1,function(e){t("CkTs")},"data-v-269eb27e",null);r.default=s.exports},CkTs:function(e,r){},tred:function(e,r,t){"use strict";t.d(r,"a",function(){return n});var a=t("6+nK");function n(){var e=new a.BufferAttribute(new Float32Array(3e6),3);e.usage=a.DynamicDrawUsage;var r=new a.BufferAttribute(new Float32Array(3e6),3);r.usage=a.DynamicDrawUsage;var t=new a.BufferAttribute(new Float32Array(3e6),3);t.usage=a.DynamicDrawUsage;var n=new a.BufferGeometry;n.setAttribute("position",e),n.setAttribute("normal",r),n.setAttribute("color",t),n.drawRange.count=0;var i=new a.MeshStandardMaterial({vertexColors:!0}),o=new a.Mesh(n,i);o.frustumCulled=!1;var s=new a.Vector3,c=new a.Vector3,d=new a.Vector3,l=new a.Vector3,u=new a.Color(16777215),h=1;function p(i,o,p,y){if(0!==i.distanceToSquared(o)){for(var w=n.drawRange.count,f=function(e){for(var r=2*Math.PI,t=[],n=.01*e,i=0;i<10;i++){var o=i/10*r;t.push(new a.Vector3(Math.sin(o)*n,Math.cos(o)*n,0))}return t}(h),m=0,v=f.length;m<v;m++){var A=f[m],g=f[(m+1)%v];s.copy(A).applyMatrix4(y).add(o),c.copy(g).applyMatrix4(y).add(o),d.copy(g).applyMatrix4(p).add(i),l.copy(A).applyMatrix4(p).add(i),s.toArray(e.array,3*(w+0)),c.toArray(e.array,3*(w+1)),l.toArray(e.array,3*(w+2)),c.toArray(e.array,3*(w+3)),d.toArray(e.array,3*(w+4)),l.toArray(e.array,3*(w+5)),s.copy(A).applyMatrix4(y).normalize(),c.copy(g).applyMatrix4(y).normalize(),d.copy(g).applyMatrix4(p).normalize(),l.copy(A).applyMatrix4(p).normalize(),s.toArray(r.array,3*(w+0)),c.toArray(r.array,3*(w+1)),l.toArray(r.array,3*(w+2)),c.toArray(r.array,3*(w+3)),d.toArray(r.array,3*(w+4)),l.toArray(r.array,3*(w+5)),u.toArray(t.array,3*(w+0)),u.toArray(t.array,3*(w+1)),u.toArray(t.array,3*(w+2)),u.toArray(t.array,3*(w+3)),u.toArray(t.array,3*(w+4)),u.toArray(t.array,3*(w+5)),w+=6}n.drawRange.count=w}}var y=new a.Vector3(0,1,0),w=new a.Vector3,f=new a.Vector3,m=new a.Matrix4,v=new a.Matrix4;var A=0;return{mesh:o,moveTo:function(e){w.copy(e),m.lookAt(f,w,y),f.copy(e),v.copy(m)},lineTo:function(e){w.copy(e),m.lookAt(f,w,y),p(w,f,m,v),f.copy(w),v.copy(m)},setSize:function(e){h=e},update:function(){var a=A,i=n.drawRange.count;a!==i&&(e.updateRange.offset=3*a,e.updateRange.count=3*(i-a),e.needsUpdate=!0,r.updateRange.offset=3*a,r.updateRange.count=3*(i-a),r.needsUpdate=!0,t.updateRange.offset=3*a,t.updateRange.count=3*(i-a),t.needsUpdate=!0,A=n.drawRange.count)}}}}});
//# sourceMappingURL=42.b496c2d7eecfeef0227f.js.map