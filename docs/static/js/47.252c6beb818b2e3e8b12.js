webpackJsonp([47],{"48wM":function(e,n,t){"use strict";t.d(n,"a",function(){return i});var r=t("6+nK");function i(e){r.Loader.call(this,e)}i.prototype=Object.assign(Object.create(r.Loader.prototype),{constructor:i,load:function(e,n,t,i){var a=this,o=new r.FileLoader(a.manager);o.setPath(a.path),o.setResponseType("arraybuffer"),o.setRequestHeader(a.requestHeader),o.load(e,function(t){try{n(a.parse(t))}catch(n){i?i(n):console.error(n),a.manager.itemError(e)}},t,i)},parse:function(e){var n=new DataView(e),t=n.getInt32(0,!0),r=n.getUint32(4,!0);if(542658390===t&&150===r){for(var i=[0,4294967295,4291624959,4288282623,4284940287,4281597951,4278255615,4294954239,4291611903,4288269567,4284927231,4281584895,4278242559,4294941183,4291598847,4288256511,4284914175,4281571839,4278229503,4294928127,4291585791,4288243455,4284901119,4281558783,4278216447,4294915071,4291572735,4288230399,4284888063,4281545727,4278203391,4294902015,4291559679,4288217343,4284875007,4281532671,4278190335,4294967244,4291624908,4288282572,4284940236,4281597900,4278255564,4294954188,4291611852,4288269516,4284927180,4281584844,4278242508,4294941132,4291598796,4288256460,4284914124,4281571788,4278229452,4294928076,4291585740,4288243404,4284901068,4281558732,4278216396,4294915020,4291572684,4288230348,4284888012,4281545676,4278203340,4294901964,4291559628,4288217292,4284874956,4281532620,4278190284,4294967193,4291624857,4288282521,4284940185,4281597849,4278255513,4294954137,4291611801,4288269465,4284927129,4281584793,4278242457,4294941081,4291598745,4288256409,4284914073,4281571737,4278229401,4294928025,4291585689,4288243353,4284901017,4281558681,4278216345,4294914969,4291572633,4288230297,4284887961,4281545625,4278203289,4294901913,4291559577,4288217241,4284874905,4281532569,4278190233,4294967142,4291624806,4288282470,4284940134,4281597798,4278255462,4294954086,4291611750,4288269414,4284927078,4281584742,4278242406,4294941030,4291598694,4288256358,4284914022,4281571686,4278229350,4294927974,4291585638,4288243302,4284900966,4281558630,4278216294,4294914918,4291572582,4288230246,4284887910,4281545574,4278203238,4294901862,4291559526,4288217190,4284874854,4281532518,4278190182,4294967091,4291624755,4288282419,4284940083,4281597747,4278255411,4294954035,4291611699,4288269363,4284927027,4281584691,4278242355,4294940979,4291598643,4288256307,4284913971,4281571635,4278229299,4294927923,4291585587,4288243251,4284900915,4281558579,4278216243,4294914867,4291572531,4288230195,4284887859,4281545523,4278203187,4294901811,4291559475,4288217139,4284874803,4281532467,4278190131,4294967040,4291624704,4288282368,4284940032,4281597696,4278255360,4294953984,4291611648,4288269312,4284926976,4281584640,4278242304,4294940928,4291598592,4288256256,4284913920,4281571584,4278229248,4294927872,4291585536,4288243200,4284900864,4281558528,4278216192,4294914816,4291572480,4288230144,4284887808,4281545472,4278203136,4294901760,4291559424,4288217088,4284874752,4281532416,4278190318,4278190301,4278190267,4278190250,4278190216,4278190199,4278190165,4278190148,4278190114,4278190097,4278251008,4278246656,4278237952,4278233600,4278224896,4278220544,4278211840,4278207488,4278198784,4278194432,4293787648,4292673536,4290445312,4289331200,4287102976,4285988864,4283760640,4282646528,4280418304,4279304192,4293848814,4292730333,4290493371,4289374890,4287137928,4286019447,4283782485,4282664004,4280427042,4279308561],a=8,o=void 0,s=[];a<n.byteLength;){for(var c="",m=0;m<4;m++)c+=String.fromCharCode(n.getInt8(a++,!0));var l=n.getInt32(a,!0);if(a+=4,n.getInt32(a,!0),a+=4,"SIZE"===c){var d=n.getInt32(a,!0);a+=4;var v=n.getInt32(a,!0);a+=4;var u=n.getInt32(a,!0);a+=4,o={palette:i,size:{x:d,y:v,z:u}},s.push(o),a+=l-12}else if("XYZI"===c){var p=n.getInt32(a,!0);a+=4,o.data=new Int8Array(e,a,4*p),a+=4*p}else if("RGBA"===c){for(var f=[0],h=0;h<256;h++)f[h+1]=n.getInt32(a,!0),a+=4;o.palette=f}else a+=l}return s}console.error("Not a valid VOX file")}})},"w+bv":function(e,n){},zLXR:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=t("wIBv"),i=t("48wM"),a=t("DqHV"),o={data:function(){return{renderer:null,scene:null,camera:null,controls:null}},mounted:function(){!1===a.a.isWebGL2Available()&&document.getElementsByClassName("webgl2VolumeInstancing-container")[0].appendChild(a.a.getWebGL2ErrorMessage()),this.init(),this.animate()},methods:{init:function(){var e=this;this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webgl2VolumeInstancing-container")[0].appendChild(this.renderer.domElement),this.scene=new this.$THREE.Scene,this.camera=new this.$THREE.PerspectiveCamera(60,this.$webglInnerWidth/window.innerHeight,.1,1e3),this.camera.position.set(0,0,4),this.controls=new r.b(this.camera,this.renderer.domElement),this.controls.autoRotate=!0,this.controls.autoRotateSpeed=-1,this.controls.enableDamping=!0;(new i.a).load("static/models/vox/menger.vox",function(n){for(var t=0;t<n.length;t++){for(var r=n[t],i=r.data,a=r.size,o=new Uint8Array(a.x*a.y*a.z),s=0,c=0;s<i.length;s+=4,c++){var m=i[s+0],l=i[s+1],d=i[s+2];o[m+l*a.x+d*a.x*a.y]=255}var v=new e.$THREE.DataTexture3D(o,a.x,a.y,a.z);v.format=e.$THREE.RedFormat,v.minFilter=e.$THREE.NearestFilter,v.magFilter=e.$THREE.LinearFilter,v.unpackAlignment=1;var u=new e.$THREE.BoxBufferGeometry(1,1,1),p=new e.$THREE.RawShaderMaterial({glslVersion:e.$THREE.GLSL3,uniforms:{map:{value:v},cameraPos:{value:new e.$THREE.Vector3}},vertexShader:"\n                in vec3 position;\n                in mat4 instanceMatrix;\n                uniform mat4 modelMatrix;\n                uniform mat4 modelViewMatrix;\n                uniform mat4 projectionMatrix;\n                uniform vec3 cameraPos;\n                out vec3 vOrigin;\n                out vec3 vDirection;\n                void main() {\n                    vec4 mvPosition = modelViewMatrix * instanceMatrix * vec4(position, 1.0);\n                    vOrigin = vec3(inverse(instanceMatrix * modelMatrix) * vec4(cameraPos, 1.0)).xyz;\n                    vDirection = position - vOrigin;\n                    gl_Position = projectionMatrix * mvPosition;\n                }\n            ",fragmentShader:"\n                precision highp float;\n                precision highp sampler3D;\n                uniform mat4 modelViewMatrix;\n                uniform mat4 projectionMatrix;\n                in vec3 vOrigin;\n                in vec3 vDirection;\n                out vec4 color;\n                uniform sampler3D map;\n                uniform float threshold;\n                uniform float steps;\n                vec2 hitBox(vec3 orig, vec3 dir) {\n                    const vec3 box_min = vec3(- 0.5);\n                    const vec3 box_max = vec3(0.5);\n                    vec3 inv_dir = 1.0 / dir;\n                    vec3 tmin_tmp = (box_min - orig) * inv_dir;\n                    vec3 tmax_tmp = (box_max - orig) * inv_dir;\n                    vec3 tmin = min(tmin_tmp, tmax_tmp);\n                    vec3 tmax = max(tmin_tmp, tmax_tmp);\n                    float t0 = max(tmin.x, max(tmin.y, tmin.z));\n                    float t1 = min(tmax.x, min(tmax.y, tmax.z));\n                    return vec2(t0, t1);\n                }\n                float sample1(vec3 p) {\n                    return texture(map, p).r;\n                }\n                #define epsilon .0001\n                vec3 normal(vec3 coord) {\n                    if (coord.x < epsilon) return vec3(1.0, 0.0, 0.0);\n                    if (coord.y < epsilon) return vec3(0.0, 1.0, 0.0);\n                    if (coord.z < epsilon) return vec3(0.0, 0.0, 1.0);\n                    if (coord.x > 1.0 - epsilon) return vec3(- 1.0, 0.0, 0.0);\n                    if (coord.y > 1.0 - epsilon) return vec3(0.0, - 1.0, 0.0);\n                    if (coord.z > 1.0 - epsilon) return vec3(0.0, 0.0, - 1.0);\n                    float step = 0.01;\n                    float x = sample1(coord + vec3(- step, 0.0, 0.0)) - sample1(coord + vec3(step, 0.0, 0.0));\n                    float y = sample1(coord + vec3(0.0, - step, 0.0)) - sample1(coord + vec3(0.0, step, 0.0));\n                    float z = sample1(coord + vec3(0.0, 0.0, - step)) - sample1(coord + vec3(0.0, 0.0, step));\n                    return normalize(vec3(x, y, z));\n                }\n                void main(){\n                    vec3 rayDir = normalize(vDirection);\n                    vec2 bounds = hitBox(vOrigin, rayDir);\n                    if (bounds.x > bounds.y) discard;\n                    bounds.x = max(bounds.x, 0.0);\n                    vec3 p = vOrigin + bounds.x * rayDir;\n                    vec3 inc = 1.0 / abs(rayDir);\n                    float delta = min(inc.x, min(inc.y, inc.z));\n                    delta /= 50.0;\n                    for (float t = bounds.x; t < bounds.y; t += delta) {\n                        float d = sample1(p + 0.5);\n                        if (d > 0.5) {\n                            color.rgb = p * 2.0; // normal(p + 0.5); // * 0.5 + (p * 1.5 + 0.25);\n                            color.a = 1.;\n                            break;\n                        }\n                        p += rayDir * delta;\n                    }\n                    if (color.a == 0.0) discard;\n                }\n            ",side:e.$THREE.BackSide}),f=new e.$THREE.InstancedMesh(u,p,1e5);f.onBeforeRender=function(){p.uniforms.cameraPos.value.copy(e.camera.position)};for(var h=new e.$THREE.Object3D,x=0;x<f.count;x++)h.position.random().subScalar(.5).multiplyScalar(150),h.rotation.x=Math.random()*Math.PI,h.rotation.y=Math.random()*Math.PI,h.rotation.z=Math.random()*Math.PI,h.updateMatrix(),f.setMatrixAt(x,h.matrix);e.scene.add(f)}}),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.controls.update(),this.renderer.render(this.scene,this.camera)}}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"webgl2VolumeInstancing-container"},[n("div",{attrs:{id:"info"}},[n("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" webgl2 - volume - instancing\n\t\t")])])}]};var c=t("VU/8")(o,s,!1,function(e){t("w+bv")},"data-v-24ec7e09",null);n.default=c.exports}});
//# sourceMappingURL=47.252c6beb818b2e3e8b12.js.map