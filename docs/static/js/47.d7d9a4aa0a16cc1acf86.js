webpackJsonp([47],{"4Cgm":function(e,t){},Uxxj:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("JQAX"),r=s("6+nK"),n=function(e){r._7.call(this,e),this.debug=!1,this.group=null,this.position=0,this.materials=[],this.meshes=[]};n.prototype=Object.assign(Object.create(r._7.prototype),{constructor:n,load:function(e,t,s,i){var n=this,a=""===this.path?r._8.extractUrlBase(e):this.path,h=new r.G(this.manager);h.setPath(this.path),h.setResponseType("arraybuffer"),h.setRequestHeader(this.requestHeader),h.setWithCredentials(this.withCredentials),h.load(e,function(s){try{t(n.parse(s,a))}catch(t){i?i(t):console.error(t),n.manager.itemError(e)}},s,i)},parse:function(e,t){this.group=new r.M,this.position=0,this.materials=[],this.meshes=[],this.readFile(e,t);for(var s=0;s<this.meshes.length;s++)this.group.add(this.meshes[s]);return this.group},readFile:function(e,t){var s=new DataView(e),i=this.readChunk(s);if(i.id===h||i.id===o||i.id===a)for(var r=this.nextChunk(s,i);0!==r;){if(r===d){var n=this.readDWord(s);this.debugMessage("3DS file version: "+n)}else r===p?(this.resetPosition(s),this.readMeshData(s,t)):this.debugMessage("Unknown main chunk: "+r.toString(16));r=this.nextChunk(s,i)}this.debugMessage("Parsed "+this.meshes.length+" meshes")},readMeshData:function(e,t){for(var s=this.readChunk(e),i=this.nextChunk(e,s);0!==i;){if(i===f){var r=+this.readDWord(e);this.debugMessage("Mesh Version: "+r)}else if(i===m){var n=this.readFloat(e);this.debugMessage("Master scale: "+n),this.group.scale.set(n,n,n)}else i===T?(this.debugMessage("Named Object"),this.resetPosition(e),this.readNamedObject(e)):i===M?(this.debugMessage("Material"),this.resetPosition(e),this.readMaterialEntry(e,t)):this.debugMessage("Unknown MDATA chunk: "+i.toString(16));i=this.nextChunk(e,s)}},readNamedObject:function(e){var t=this.readChunk(e),s=this.readString(e,64);t.cur=this.position;for(var i=this.nextChunk(e,t);0!==i;){if(i===$){this.resetPosition(e);var r=this.readMesh(e);r.name=s,this.meshes.push(r)}else this.debugMessage("Unknown named object chunk: "+i.toString(16));i=this.nextChunk(e,t)}this.endChunk(t)},readMaterialEntry:function(e,t){for(var s=this.readChunk(e),i=this.nextChunk(e,s),n=new r._18;0!==i;){if(i===b)n.name=this.readString(e,64),this.debugMessage("   Name: "+n.name);else if(i===F)this.debugMessage("   Wireframe"),n.wireframe=!0;else if(i===S){var a=this.readByte(e);n.wireframeLinewidth=a,this.debugMessage("   Wireframe Thickness: "+a)}else if(i===y)n.side=r.B,this.debugMessage("   DoubleSided");else if(i===E)this.debugMessage("   Additive Blending"),n.blending=r.b;else if(i===k)this.debugMessage("   Diffuse Color"),n.color=this.readColor(e);else if(i===C)this.debugMessage("   Specular Color"),n.specular=this.readColor(e);else if(i===v)this.debugMessage("   Ambient color"),n.color=this.readColor(e);else if(i===w){var h=this.readWord(e);n.shininess=h,this.debugMessage("   Shininess : "+h)}else if(i===x){var o=this.readWord(e);n.opacity=.01*o,this.debugMessage("  Opacity : "+o),n.transparent=o<100}else i===W?(this.debugMessage("   ColorMap"),this.resetPosition(e),n.map=this.readMap(e,t)):i===R?(this.debugMessage("   BumpMap"),this.resetPosition(e),n.bumpMap=this.readMap(e,t)):i===P?(this.debugMessage("   OpacityMap"),this.resetPosition(e),n.alphaMap=this.readMap(e,t)):i===_?(this.debugMessage("   SpecularMap"),this.resetPosition(e),n.specularMap=this.readMap(e,t)):this.debugMessage("   Unknown material chunk: "+i.toString(16));i=this.nextChunk(e,s)}this.endChunk(s),this.materials[n.name]=n},readMesh:function(e){var t=this.readChunk(e),s=this.nextChunk(e,t),i=new r.k,n=[],a=new r._18,h=new r._15(i,a);for(h.name="mesh";0!==s;){if(s===j){var o=this.readWord(e);this.debugMessage("   Vertex: "+o);for(var d=[],u=0;u<o;u++)d.push(this.readFloat(e)),d.push(this.readFloat(e)),d.push(this.readFloat(e));i.setAttribute("position",new r.H(d,3))}else if(s===A)this.resetPosition(e),this.readFaceArray(e,h);else if(s===L){var l=this.readWord(e);this.debugMessage("   UV: "+l);for(n=[],u=0;u<l;u++)n.push(this.readFloat(e)),n.push(this.readFloat(e));i.setAttribute("uv",new r.H(n,2))}else if(s===G){this.debugMessage("   Tranformation Matrix (TODO)");var g=[];for(u=0;u<12;u++)g[u]=this.readFloat(e);var c=new r._14;c.elements[0]=g[0],c.elements[1]=g[6],c.elements[2]=g[3],c.elements[3]=g[9],c.elements[4]=g[2],c.elements[5]=g[8],c.elements[6]=g[5],c.elements[7]=g[11],c.elements[8]=g[1],c.elements[9]=g[7],c.elements[10]=g[4],c.elements[11]=g[10],c.elements[12]=0,c.elements[13]=0,c.elements[14]=0,c.elements[15]=1,c.transpose();var p=new r._14;p.copy(c).invert(),i.applyMatrix4(p),c.decompose(h.position,h.quaternion,h.scale)}else this.debugMessage("   Unknown mesh chunk: "+s.toString(16));s=this.nextChunk(e,t)}return this.endChunk(t),i.computeVertexNormals(),h},readFaceArray:function(e,t){var s=this.readChunk(e),i=this.readWord(e);this.debugMessage("   Faces: "+i);for(var r=[],n=0;n<i;++n)r.push(this.readWord(e),this.readWord(e),this.readWord(e)),this.readWord(e);for(t.geometry.setIndex(r);this.position<s.end;){if((s=this.readChunk(e)).id===z){this.debugMessage("      Material Group"),this.resetPosition(e);var a=this.readMaterialGroup(e),h=this.materials[a.name];void 0!==h&&(t.material=h,""===h.name&&(h.name=t.name))}else this.debugMessage("      Unknown face array chunk: "+s.toString(16));this.endChunk(s)}this.endChunk(s)},readMap:function(e,t){var s=this.readChunk(e),i=this.nextChunk(e,s),n={},a=new r._71(this.manager);for(a.setPath(this.resourcePath||t).setCrossOrigin(this.crossOrigin);0!==i;){if(i===U){var h=this.readString(e,128);n=a.load(h),this.debugMessage("      File: "+t+h)}else i===H?(n.offset.x=this.readFloat(e),this.debugMessage("      OffsetX: "+n.offset.x)):i===O?(n.offset.y=this.readFloat(e),this.debugMessage("      OffsetY: "+n.offset.y)):i===B?(n.repeat.x=this.readFloat(e),this.debugMessage("      RepeatX: "+n.repeat.x)):i===D?(n.repeat.y=this.readFloat(e),this.debugMessage("      RepeatY: "+n.repeat.y)):this.debugMessage("      Unknown map chunk: "+i.toString(16));i=this.nextChunk(e,s)}return this.endChunk(s),n},readMaterialGroup:function(e){this.readChunk(e);var t=this.readString(e,64),s=this.readWord(e);this.debugMessage("         Name: "+t),this.debugMessage("         Faces: "+s);for(var i=[],r=0;r<s;++r)i.push(this.readWord(e));return{name:t,index:i}},readColor:function(e){var t=this.readChunk(e),s=new r.o;if(t.id===l||t.id===g){var i=this.readByte(e),n=this.readByte(e),a=this.readByte(e);s.setRGB(i/255,n/255,a/255),this.debugMessage("      Color: "+s.r+", "+s.g+", "+s.b)}else if(t.id===u||t.id===c){i=this.readFloat(e),n=this.readFloat(e),a=this.readFloat(e);s.setRGB(i,n,a),this.debugMessage("      Color: "+s.r+", "+s.g+", "+s.b)}else this.debugMessage("      Unknown color chunk: "+t.toString(16));return this.endChunk(t),s},readChunk:function(e){var t={};return t.cur=this.position,t.id=this.readWord(e),t.size=this.readDWord(e),t.end=t.cur+t.size,t.cur+=6,t},endChunk:function(e){this.position=e.end},nextChunk:function(e,t){if(t.cur>=t.end)return 0;this.position=t.cur;try{var s=this.readChunk(e);return t.cur+=s.size,s.id}catch(e){return this.debugMessage("Unable to read chunk at "+this.position),0}},resetPosition:function(){this.position-=6},readByte:function(e){var t=e.getUint8(this.position,!0);return this.position+=1,t},readFloat:function(e){try{var t=e.getFloat32(this.position,!0);return this.position+=4,t}catch(t){this.debugMessage(t+" "+this.position+" "+e.byteLength)}},readInt:function(e){var t=e.getInt32(this.position,!0);return this.position+=4,t},readShort:function(e){var t=e.getInt16(this.position,!0);return this.position+=2,t},readDWord:function(e){var t=e.getUint32(this.position,!0);return this.position+=4,t},readWord:function(e){var t=e.getUint16(this.position,!0);return this.position+=2,t},readString:function(e,t){for(var s="",i=0;i<t;i++){var r=this.readByte(e);if(!r)break;s+=String.fromCharCode(r)}return s},debugMessage:function(e){this.debug&&console.log(e)}});var a=19789,h=15786,o=49725,d=2,u=16,l=17,g=18,c=19,p=15677,f=15678,m=256,M=45055,b=40960,v=40976,k=40992,C=41008,w=41024,x=41040,y=41089,E=41091,F=41093,S=41095,W=41472,P=41488,R=41520,_=41476,U=41728,B=41812,D=41814,H=41816,O=41818,T=16384,$=16640,j=16656,A=16672,z=16688,L=16704,G=16736,N={data:function(){return{container:null,controls:null,camera:null,scene:null,renderer:null}},mounted:function(){this.init(),this.animate()},methods:{init:function(){var e=this;this.container=document.createElement("div"),document.getElementsByClassName("webglLoader3ds-container")[0].appendChild(this.container),this.camera=new this.$THREE.PerspectiveCamera(60,this.$webglInnerWidth/window.innerHeight,.1,10),this.camera.position.z=2,this.scene=new this.$THREE.Scene,this.scene.add(new this.$THREE.HemisphereLight);var t=new this.$THREE.DirectionalLight(16772829);t.position.set(0,0,2),this.scene.add(t);var s=(new this.$THREE.TextureLoader).load("models/3ds/portalgun/textures/normal.jpg"),r=new n;r.setResourcePath("static/models/3ds/portalgun/textures/"),r.load("static/models/3ds/portalgun/portalgun.3ds",function(t){t.traverse(function(e){e.isMesh&&(e.material.specular.setScalar(.1),e.material.normalMap=s)}),e.scene.add(t)}),this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.container.appendChild(this.renderer.domElement),this.controls=new i.a(this.camera,this.renderer.domElement),window.addEventListener("resize",this.resize,!1)},resize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){this.controls.update(),this.renderer.render(this.scene,this.camera),requestAnimationFrame(this.animate)}}},I={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoader3ds-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - 3DS loader\n\t\t")])])}]};var V=s("VU/8")(N,I,!1,function(e){s("4Cgm")},"data-v-7489e373",null);t.default=V.exports}});
//# sourceMappingURL=47.d7d9a4aa0a16cc1acf86.js.map