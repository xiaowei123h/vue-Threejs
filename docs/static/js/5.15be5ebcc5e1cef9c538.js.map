{"version":3,"sources":["webpack:///./src/utils/animationCloth.js","webpack:///./src/components/jsm/libs/dat.gui.module.js","webpack:///src/views/animation/webglAnimationCloth.vue","webpack:///./src/views/animation/webglAnimationCloth.vue?b891","webpack:///./src/views/animation/webglAnimationCloth.vue"],"names":["Plane","width","height","u","v","target","x","y","set","Cloth","w","h","MASS","THREE","restDistance","DRAG","clothFunction","this","particles","constraints","push","Particle","index","z","mass","position","Vector3","previous","original","a","invMass","tmp","tmp2","prototype","addForce","force","add","copy","multiplyScalar","integrate","timesq","newPos","subVectors","colorToString","color","forceCSSHex","colorFormat","__state","conversionName","toString","r","Math","round","g","b","s","toFixed","str","hex","length","ARR_EACH","Array","forEach","ARR_SLICE","slice","Common","BREAK","extend","each","call","arguments","obj","isObject","Object","keys","key","isUndefined","bind","defaults","compose","toCall","args","i","apply","itr","scope","l","_key","defer","fnc","setTimeout","debounce","func","threshold","callImmediately","timeout","callNow","clearTimeout","toArray","undefined","isNull","isNaN","_isNaN","isArray","constructor","isNumber","isString","isBoolean","isFunction","Function","INTERPRETATIONS","litmus","conversions","THREE_CHAR_HEX","read","test","match","space","parseInt","write","SIX_CHAR_HEX","CSS_RGB","parseFloat","CSS_RGBA","HEX","RGB_ARRAY","RGBA_ARRAY","RGBA_OBJ","RGB_OBJ","HSVA_OBJ","HSV_OBJ","result","toReturn","interpret","family","conversion","tmpComponent","ColorMath","hsv_to_rgb","hi","floor","f","p","q","t","c","rgb_to_hsv","min","max","delta","NaN","rgb_to_hex","hex_with_component","component_from_hex","componentIndex","value","_typeof","Symbol","_typeof2","iterator","classCallCheck","instance","Constructor","TypeError","createClass","defineProperties","props","descriptor","enumerable","configurable","writable","defineProperty","protoProps","staticProps","get","object","property","receiver","desc","getOwnPropertyDescriptor","parent","getPrototypeOf","getter","inherits","subClass","superClass","create","setPrototypeOf","__proto__","possibleConstructorReturn","self","ReferenceError","Color","Error","defineRGBComponent","component","componentHexIndex","recalculateRGB","defineHSVComponent","recalculateHSV","COMPONENTS","Controller","initialValue","domElement","document","createElement","__onChange","__onFinishChange","newValue","updateDisplay","getValue","EVENT_MAP_INV","HTMLEvents","MouseEvents","KeyboardEvents","k","e","CSS_VALUE_PIXELS","cssValueToPixels","val","dom","makeSelectable","elem","selectable","style","onselectstart","MozUserSelect","KhtmlUserSelect","unselectable","makeFullscreen","hor","vert","vertical","horizontal","left","right","top","bottom","fakeEvent","eventType","pars","aux","params","className","evt","createEvent","clientX","clientY","initMouseEvent","bubbles","cancelable","window","clickCount","init","initKeyboardEvent","initKeyEvent","ctrlKey","altKey","shiftKey","metaKey","keyCode","charCode","initEvent","dispatchEvent","event","newBool","bool","addEventListener","attachEvent","unbind","removeEventListener","detachEvent","addClass","classes","split","indexOf","join","replace","removeClass","removeAttribute","splice","hasClass","RegExp","getWidth","getComputedStyle","getHeight","getOffset","el","offset","offsetParent","offsetLeft","offsetTop","isActive","activeElement","type","href","BooleanController","_Controller","_this2","_this","__prev","__checkbox","setAttribute","setValue","appendChild","checked","OptionController","opts","options","__select","map","element","opt","innerHTML","desiredValue","selectedIndex","StringController","onChange","__input","blur","numDecimals","_x","NumberController","_params","__min","__max","__step","step","__impliedStep","pow","log","abs","LN10","__precision","_v","minValue","maxValue","stepValue","NumberControllerBox","_NumberController","__truncationSuspended","prevY","onFinish","onMouseDrag","diff","onMouseUp","attempted","decimals","tenTo","i1","i2","o1","o2","NumberControllerSlider","preventDefault","bgRect","__background","getBoundingClientRect","onTouchMove","touches","onTouchEnd","__foreground","pct","FunctionController","text","__button","fire","ColorController","__color","__temp","__selector","__saturation_field","__field_knob","__field_knob_border","__hue_knob","__hue_field","__input_textShadow","onBlur","valueField","fieldDown","setSV","fieldUpSV","fieldDownH","setH","fieldUpH","toOriginal","fieldRect","_ref","padding","backgroundColor","boxShadow","border","borderRadius","zIndex","borderRight","marginRight","display","cursor","background","linearGradient","cssText","outline","textAlign","fontWeight","textShadow","mismatch","flip","_flip","marginLeft","marginTop","toHexString","vendors","vendor","css","cssContent","indoc","doc","injected","head","getElementsByTagName","ControllerFactory","requestAnimationFrame$1","requestAnimationFrame","webkitRequestAnimationFrame","mozRequestAnimationFrame","oRequestAnimationFrame","msRequestAnimationFrame","callback","CenteredDiv","backgroundElement","opacity","WebkitTransition","transition","body","hide","webkitTransform","layout","innerWidth","innerHeight","___$insertStyle","DEFAULT_DEFAULT_PRESET_NAME","SUPPORTS_LOCAL_STORAGE","localStorage","SAVE_DIALOGUE","autoPlaceVirgin","autoPlaceContainer","hideableGuis","GUI","__ul","__folders","__controllers","__rememberedObjects","__rememberedObjectIndecesToControllers","__listening","closeOnTop","autoPlace","DEFAULT_WIDTH","resizable","hideable","load","preset","scrollable","root","useLocalStorage","getItem","getLocalStorageHash","saveToLocalStorage","titleRow","getRoot","gui","__preset_select","setPresetSelectIndex","revert","setWidth","name","closed","CLASS_CLOSED","onResize","__closeButton","TEXT_OPEN","TEXT_CLOSED","setItem","CLASS_MAIN","savedGui","JSON","parse","CLASS_CLOSE_BUTTON","CLASS_CLOSE_TOP","insertBefore","childNodes","CLASS_CLOSE_BOTTOM","titleRowName","createTextNode","addRow","CLASS_AUTO_PLACE_CONTAINER","CLASS_AUTO_PLACE","__resizeHandler","onResizeDebounced","addResizeHandle","stringify","getSaveObject","saveToLocalStorageIfPossible","newDom","liBefore","li","removeListeners","markPresetModified","modified","recallSavedValue","controller","matchedIndex","controllerMap","remembered","presetMap","_add","factoryArgs","concat","before","__li","container","CLASS_CONTROLLER_ROW","__gui","_options","nextSibling","nextElementSibling","remove","_nextSibling","_name","firstElementChild","listen","box","method","pc","pb","returned","oldName","wasListening","newController","stopPropagation","borderLeftColor","isModified","augmentController","location","addPresetOption","setSelected","showHideExplain","explain","pmouseX","drag","dragStop","CLASS_DRAG","dragStart","__resize_handle","__save_row","getCurrentPreset","useInitialValues","savedValues","toggleHide","CLASS_TOO_TALL","_keydownHandler","which","addColor","removeChild","destroy","subfolder","removeFolder","addFolder","newGuiParams","folders","folder","parentElement","open","close","show","node","offsetHeight","remember","div","firstChild","gears","button","button2","button3","select","getElementById","localStorageCheckBox","saveLocally","newConstructorTextArea","focus","save","presetName","prompt","saveAs","addSaveMenu","updateDisplays","controllerArray","GUI$1","webglAnimationCloth","data","enableWind","showBall","togglePins","DAMPING","xSegs","ySegs","cloth","GRAVITY","gravity","TIMESTEP","TIMESTEP_SQ","pins","windForce","ballPosition","ballSize","tmpForce","pinsFormation","clothGeometry","sphere","stats","camera","scene","renderer","il","mounted","$THREE","initPinsFormation","animate","methods","getElementsByClassName","Scene","fog","Fog","PerspectiveCamera","AmbientLight","light","DirectionalLight","castShadow","shadow","mapSize","d","far","loader","TextureLoader","clothTexture","anisotropy","clothMaterial","MeshLambertMaterial","side","DoubleSide","alphaTest","ParametricBufferGeometry","Mesh","customDepthMaterial","MeshDepthMaterial","depthPacking","RGBADepthPacking","ballGeo","SphereBufferGeometry","ballMaterial","receiveShadow","visible","groundTexture","wrapS","wrapT","RepeatWrapping","repeat","encoding","sRGBEncoding","groundMaterial","mesh","PlaneBufferGeometry","rotation","PI","poleGeo","BoxBufferGeometry","poleMat","gg","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","outputEncoding","shadowMap","enabled","controls","OrbitControls","maxPolarAngle","minDistance","maxDistance","$Stats","onWindowResize","TESTING","simulate","now","render","update","attributes","setXYZ","needsUpdate","computeVertexNormals","aspect","updateProjectionMatrix","random","satisfyConstraints","p1","p2","distance","currentDist","correctionHalf","sub","windStrength","cos","sin","normalize","ill","indx","normal","indices","normals","count","j","getX","fromBufferAttribute","dot","_i","_ill","particle","iil","_i2","constraint","_i3","_iil","pos","_pos","animation_webglAnimationCloth","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","id","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/5.15be5ebcc5e1cef9c538.js","sourcesContent":["export function clothFunction1(x, y) {\r\n    return Plane(x, y)\r\n}\r\n\r\nexport function Plane(width, height) {\r\n    return function (u, v, target) {\r\n        const x = (u - 0.5) * width\r\n        const y = (v + 0.5) * height\r\n        const z = 0\r\n        target.set(x, y, z)\r\n    }\r\n}\r\n\r\nexport function Cloth(w, h, MASS, THREE, restDistance, DRAG, clothFunction) {\r\n    w = w || 10\r\n    h = h || 10\r\n    this.w = w\r\n    this.h = h\r\n    const particles = []\r\n    const constraints = []\r\n    // Create particles\r\n    for (let v = 0; v <= h; v ++) {\r\n        for (let u = 0; u <= w; u ++) {\r\n            particles.push(\r\n                new Particle( u / w, v / h, 0, MASS, THREE, DRAG, clothFunction )\r\n            )\r\n        }\r\n    }\r\n    // Structural\r\n    for (let v = 0; v < h; v ++) {\r\n        for (let u = 0; u < w; u ++) {\r\n            constraints.push([\r\n                particles[index(u, v)],\r\n                particles[index(u, v + 1)],\r\n                restDistance\r\n            ])\r\n            constraints.push([\r\n                particles[index(u, v)],\r\n                particles[index(u + 1, v)],\r\n                restDistance\r\n            ])\r\n        }\r\n    }\r\n    for (let u = w, v = 0; v < h; v ++) {\r\n        constraints.push([\r\n            particles[index(u, v)],\r\n            particles[index(u, v + 1)],\r\n            restDistance\r\n        ])\r\n    }\r\n    for (let v = h, u = 0; u < w; u ++) {\r\n\r\n        constraints.push([\r\n            particles[index(u, v)],\r\n            particles[index(u + 1, v)],\r\n            restDistance\r\n        ])\r\n    }\r\n\r\n    // While many systems use shear and bend springs,\r\n    // the relaxed constraints model seems to be just fine\r\n    // using structural springs.\r\n    // Shear\r\n    // const diagonalDist = Math.sqrt(restDistance * restDistance * 2);\r\n\r\n    // for (v=0;v<h;v++) {\r\n    // \tfor (u=0;u<w;u++) {\r\n\r\n    // \t\tconstraints.push([\r\n    // \t\t\tparticles[index(u, v)],\r\n    // \t\t\tparticles[index(u+1, v+1)],\r\n    // \t\t\tdiagonalDist\r\n    // \t\t]);\r\n\r\n    // \t\tconstraints.push([\r\n    // \t\t\tparticles[index(u+1, v)],\r\n    // \t\t\tparticles[index(u, v+1)],\r\n    // \t\t\tdiagonalDist\r\n    // \t\t]);\r\n\r\n    // \t}\r\n    // }\r\n\r\n    this.particles = particles\r\n    this.constraints = constraints\r\n    function index(u, v) {\r\n        return u + v * (w + 1)\r\n    }\r\n    this.index = index\r\n}\r\n\r\nexport function Particle(x, y, z, mass, THREE, DRAG, clothFunction) {\r\n    // console.log('x=' + x + 'y=' + y + 'z=' + z + 'mass=' + mass + 'DRAG=' + DRAG)\r\n    this.position = new THREE.Vector3()\r\n    this.previous = new THREE.Vector3()\r\n    this.original = new THREE.Vector3()\r\n    this.a = new THREE.Vector3(0, 0, 0) // acceleration\r\n    this.mass = mass\r\n    this.DRAG = DRAG\r\n    this.invMass = 1 / mass\r\n    this.tmp = new THREE.Vector3()\r\n    this.tmp2 = new THREE.Vector3()\r\n\r\n    // init\r\n    clothFunction(x, y, this.position)\r\n    clothFunction(x, y, this.previous)\r\n    clothFunction(x, y, this.original)\r\n}\r\n\r\n// Force -> Acceleration\r\nParticle.prototype.addForce = function (force) {\r\n    this.a.add(\r\n        this.tmp2.copy(force).multiplyScalar(this.invMass)\r\n    )\r\n}\r\n\r\n// Performs Verlet integration\r\nParticle.prototype.integrate = function (timesq) {\r\n    const newPos = this.tmp.subVectors(this.position, this.previous)\r\n    newPos.multiplyScalar(this.DRAG).add(this.position)\r\n    newPos.add(this.a.multiplyScalar(timesq))\r\n    this.tmp = this.previous\r\n    this.previous = this.position\r\n    this.position = newPos\r\n    this.a.set(0, 0, 0)\r\n}\r\n\r\nexport default {\r\n    Cloth,\r\n    Plane\r\n}\n\n\n// WEBPACK FOOTER //\n// ./src/utils/animationCloth.js","/**\r\n * dat-gui JavaScript Controller Library\r\n * http://code.google.com/p/dat-gui\r\n *\r\n * Copyright 2011 Data Arts Team, Google Creative Lab\r\n *\r\n * Licensed under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n * http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n\r\nfunction ___$insertStyle( css ) {\r\n\r\n\tif ( ! css ) {\r\n\r\n\t\treturn;\r\n\r\n\t}\r\n\tif ( typeof window === 'undefined' ) {\r\n\r\n\t\treturn;\r\n\r\n\t}\r\n\r\n\tvar style = document.createElement( 'style' );\r\n\r\n\tstyle.setAttribute( 'type', 'text/css' );\r\n\tstyle.innerHTML = css;\r\n\tdocument.head.appendChild( style );\r\n\r\n\treturn css;\r\n\r\n}\r\n\r\nfunction colorToString( color, forceCSSHex ) {\r\n\r\n\tvar colorFormat = color.__state.conversionName.toString();\r\n\tvar r = Math.round( color.r );\r\n\tvar g = Math.round( color.g );\r\n\tvar b = Math.round( color.b );\r\n\tvar a = color.a;\r\n\tvar h = Math.round( color.h );\r\n\tvar s = color.s.toFixed( 1 );\r\n\tvar v = color.v.toFixed( 1 );\r\n\tif ( forceCSSHex || colorFormat === 'THREE_CHAR_HEX' || colorFormat === 'SIX_CHAR_HEX' ) {\r\n\r\n\t\tvar str = color.hex.toString( 16 );\r\n\t\twhile ( str.length < 6 ) {\r\n\r\n\t\t\tstr = '0' + str;\r\n\r\n\t\t}\r\n\t\treturn '#' + str;\r\n\r\n\t} else if ( colorFormat === 'CSS_RGB' ) {\r\n\r\n\t\treturn 'rgb(' + r + ',' + g + ',' + b + ')';\r\n\r\n\t} else if ( colorFormat === 'CSS_RGBA' ) {\r\n\r\n\t\treturn 'rgba(' + r + ',' + g + ',' + b + ',' + a + ')';\r\n\r\n\t} else if ( colorFormat === 'HEX' ) {\r\n\r\n\t\treturn '0x' + color.hex.toString( 16 );\r\n\r\n\t} else if ( colorFormat === 'RGB_ARRAY' ) {\r\n\r\n\t\treturn '[' + r + ',' + g + ',' + b + ']';\r\n\r\n\t} else if ( colorFormat === 'RGBA_ARRAY' ) {\r\n\r\n\t\treturn '[' + r + ',' + g + ',' + b + ',' + a + ']';\r\n\r\n\t} else if ( colorFormat === 'RGB_OBJ' ) {\r\n\r\n\t\treturn '{r:' + r + ',g:' + g + ',b:' + b + '}';\r\n\r\n\t} else if ( colorFormat === 'RGBA_OBJ' ) {\r\n\r\n\t\treturn '{r:' + r + ',g:' + g + ',b:' + b + ',a:' + a + '}';\r\n\r\n\t} else if ( colorFormat === 'HSV_OBJ' ) {\r\n\r\n\t\treturn '{h:' + h + ',s:' + s + ',v:' + v + '}';\r\n\r\n\t} else if ( colorFormat === 'HSVA_OBJ' ) {\r\n\r\n\t\treturn '{h:' + h + ',s:' + s + ',v:' + v + ',a:' + a + '}';\r\n\r\n\t}\r\n\treturn 'unknown format';\r\n\r\n}\r\n\r\nvar ARR_EACH = Array.prototype.forEach;\r\nvar ARR_SLICE = Array.prototype.slice;\r\nvar Common = {\r\n\tBREAK: {},\r\n\textend: function extend( target ) {\r\n\r\n\t\tthis.each( ARR_SLICE.call( arguments, 1 ), function ( obj ) {\r\n\r\n\t\t\tvar keys = this.isObject( obj ) ? Object.keys( obj ) : [];\r\n\t\t\tkeys.forEach( function ( key ) {\r\n\r\n\t\t\t\tif ( ! this.isUndefined( obj[ key ] ) ) {\r\n\r\n\t\t\t\t\ttarget[ key ] = obj[ key ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}.bind( this ) );\r\n\r\n\t\t}, this );\r\n\t\treturn target;\r\n\r\n\t},\r\n\tdefaults: function defaults( target ) {\r\n\r\n\t\tthis.each( ARR_SLICE.call( arguments, 1 ), function ( obj ) {\r\n\r\n\t\t\tvar keys = this.isObject( obj ) ? Object.keys( obj ) : [];\r\n\t\t\tkeys.forEach( function ( key ) {\r\n\r\n\t\t\t\tif ( this.isUndefined( target[ key ] ) ) {\r\n\r\n\t\t\t\t\ttarget[ key ] = obj[ key ];\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}.bind( this ) );\r\n\r\n\t\t}, this );\r\n\t\treturn target;\r\n\r\n\t},\r\n\tcompose: function compose() {\r\n\r\n\t\tvar toCall = ARR_SLICE.call( arguments );\r\n\t\treturn function () {\r\n\r\n\t\t\tvar args = ARR_SLICE.call( arguments );\r\n\t\t\tfor ( var i = toCall.length - 1; i >= 0; i -- ) {\r\n\r\n\t\t\t\targs = [ toCall[ i ].apply( this, args ) ];\r\n\r\n\t\t\t}\r\n\t\t\treturn args[ 0 ];\r\n\r\n\t\t};\r\n\r\n\t},\r\n\teach: function each( obj, itr, scope ) {\r\n\r\n\t\tif ( ! obj ) {\r\n\r\n\t\t\treturn;\r\n\r\n\t\t}\r\n\t\tif ( ARR_EACH && obj.forEach && obj.forEach === ARR_EACH ) {\r\n\r\n\t\t\tobj.forEach( itr, scope );\r\n\r\n\t\t} else if ( obj.length === obj.length + 0 ) {\r\n\r\n\t\t\tvar key = void 0;\r\n\t\t\tvar l = void 0;\r\n\t\t\tfor ( key = 0, l = obj.length; key < l; key ++ ) {\r\n\r\n\t\t\t\tif ( key in obj && itr.call( scope, obj[ key ], key ) === this.BREAK ) {\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( var _key in obj ) {\r\n\r\n\t\t\t\tif ( itr.call( scope, obj[ _key ], _key ) === this.BREAK ) {\r\n\r\n\t\t\t\t\treturn;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t},\r\n\tdefer: function defer( fnc ) {\r\n\r\n\t\tsetTimeout( fnc, 0 );\r\n\r\n\t},\r\n\tdebounce: function debounce( func, threshold, callImmediately ) {\r\n\r\n\t\tvar timeout = void 0;\r\n\t\treturn function () {\r\n\r\n\t\t\tvar obj = this;\r\n\t\t\tvar args = arguments;\r\n\t\t\tfunction delayed() {\r\n\r\n\t\t\t\ttimeout = null;\r\n\t\t\t\tif ( ! callImmediately ) func.apply( obj, args );\r\n\r\n\t\t\t}\r\n\t\t\tvar callNow = callImmediately || ! timeout;\r\n\t\t\tclearTimeout( timeout );\r\n\t\t\ttimeout = setTimeout( delayed, threshold );\r\n\t\t\tif ( callNow ) {\r\n\r\n\t\t\t\tfunc.apply( obj, args );\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\r\n\t},\r\n\ttoArray: function toArray( obj ) {\r\n\r\n\t\tif ( obj.toArray ) return obj.toArray();\r\n\t\treturn ARR_SLICE.call( obj );\r\n\r\n\t},\r\n\tisUndefined: function isUndefined( obj ) {\r\n\r\n\t\treturn obj === undefined;\r\n\r\n\t},\r\n\tisNull: function isNull( obj ) {\r\n\r\n\t\treturn obj === null;\r\n\r\n\t},\r\n\tisNaN: function ( _isNaN ) {\r\n\r\n\t\tfunction isNaN() {\r\n\r\n\t\t\treturn _isNaN.apply( this, arguments );\r\n\r\n\t\t}\r\n\t\tisNaN.toString = function () {\r\n\r\n\t\t\treturn _isNaN.toString();\r\n\r\n\t\t};\r\n\t\treturn isNaN;\r\n\r\n\t}( function ( obj ) {\r\n\r\n\t\treturn isNaN( obj );\r\n\r\n\t} ),\r\n\tisArray: Array.isArray || function ( obj ) {\r\n\r\n\t\treturn obj.constructor === Array;\r\n\r\n\t},\r\n\tisObject: function isObject( obj ) {\r\n\r\n\t\treturn obj === Object( obj );\r\n\r\n\t},\r\n\tisNumber: function isNumber( obj ) {\r\n\r\n\t\treturn obj === obj + 0;\r\n\r\n\t},\r\n\tisString: function isString( obj ) {\r\n\r\n\t\treturn obj === obj + '';\r\n\r\n\t},\r\n\tisBoolean: function isBoolean( obj ) {\r\n\r\n\t\treturn obj === false || obj === true;\r\n\r\n\t},\r\n\tisFunction: function isFunction( obj ) {\r\n\r\n\t\treturn obj instanceof Function;\r\n\r\n\t}\r\n};\r\n\r\nvar INTERPRETATIONS = [\r\n\t{\r\n\t\tlitmus: Common.isString,\r\n\t\tconversions: {\r\n\t\t\tTHREE_CHAR_HEX: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\tvar test = original.match( /^#([A-F0-9])([A-F0-9])([A-F0-9])$/i );\r\n\t\t\t\t\tif ( test === null ) {\r\n\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tspace: 'HEX',\r\n\t\t\t\t\t\thex: parseInt( '0x' + test[ 1 ].toString() + test[ 1 ].toString() + test[ 2 ].toString() + test[ 2 ].toString() + test[ 3 ].toString() + test[ 3 ].toString(), 0 )\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: colorToString\r\n\t\t\t},\r\n\t\t\tSIX_CHAR_HEX: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\tvar test = original.match( /^#([A-F0-9]{6})$/i );\r\n\t\t\t\t\tif ( test === null ) {\r\n\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tspace: 'HEX',\r\n\t\t\t\t\t\thex: parseInt( '0x' + test[ 1 ].toString(), 0 )\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: colorToString\r\n\t\t\t},\r\n\t\t\tCSS_RGB: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\tvar test = original.match( /^rgb\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/ );\r\n\t\t\t\t\tif ( test === null ) {\r\n\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tspace: 'RGB',\r\n\t\t\t\t\t\tr: parseFloat( test[ 1 ] ),\r\n\t\t\t\t\t\tg: parseFloat( test[ 2 ] ),\r\n\t\t\t\t\t\tb: parseFloat( test[ 3 ] )\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: colorToString\r\n\t\t\t},\r\n\t\t\tCSS_RGBA: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\tvar test = original.match( /^rgba\\(\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*,\\s*(.+)\\s*\\)/ );\r\n\t\t\t\t\tif ( test === null ) {\r\n\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tspace: 'RGB',\r\n\t\t\t\t\t\tr: parseFloat( test[ 1 ] ),\r\n\t\t\t\t\t\tg: parseFloat( test[ 2 ] ),\r\n\t\t\t\t\t\tb: parseFloat( test[ 3 ] ),\r\n\t\t\t\t\t\ta: parseFloat( test[ 4 ] )\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: colorToString\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tlitmus: Common.isNumber,\r\n\t\tconversions: {\r\n\t\t\tHEX: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tspace: 'HEX',\r\n\t\t\t\t\t\thex: original,\r\n\t\t\t\t\t\tconversionName: 'HEX'\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: function write( color ) {\r\n\r\n\t\t\t\t\treturn color.hex;\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tlitmus: Common.isArray,\r\n\t\tconversions: {\r\n\t\t\tRGB_ARRAY: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\tif ( original.length !== 3 ) {\r\n\r\n\t\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tspace: 'RGB',\r\n\t\t\t\t\t\tr: original[ 0 ],\r\n\t\t\t\t\t\tg: original[ 1 ],\r\n\t\t\t\t\t\tb: original[ 2 ]\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: function write( color ) {\r\n\r\n\t\t\t\t\treturn [ color.r, color.g, color.b ];\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tRGBA_ARRAY: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\tif ( original.length !== 4 ) return false;\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tspace: 'RGB',\r\n\t\t\t\t\t\tr: original[ 0 ],\r\n\t\t\t\t\t\tg: original[ 1 ],\r\n\t\t\t\t\t\tb: original[ 2 ],\r\n\t\t\t\t\t\ta: original[ 3 ]\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: function write( color ) {\r\n\r\n\t\t\t\t\treturn [ color.r, color.g, color.b, color.a ];\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\tlitmus: Common.isObject,\r\n\t\tconversions: {\r\n\t\t\tRGBA_OBJ: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\tif ( Common.isNumber( original.r ) && Common.isNumber( original.g ) && Common.isNumber( original.b ) && Common.isNumber( original.a ) ) {\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tspace: 'RGB',\r\n\t\t\t\t\t\t\tr: original.r,\r\n\t\t\t\t\t\t\tg: original.g,\r\n\t\t\t\t\t\t\tb: original.b,\r\n\t\t\t\t\t\t\ta: original.a\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: function write( color ) {\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tr: color.r,\r\n\t\t\t\t\t\tg: color.g,\r\n\t\t\t\t\t\tb: color.b,\r\n\t\t\t\t\t\ta: color.a\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tRGB_OBJ: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\tif ( Common.isNumber( original.r ) && Common.isNumber( original.g ) && Common.isNumber( original.b ) ) {\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tspace: 'RGB',\r\n\t\t\t\t\t\t\tr: original.r,\r\n\t\t\t\t\t\t\tg: original.g,\r\n\t\t\t\t\t\t\tb: original.b\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: function write( color ) {\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\tr: color.r,\r\n\t\t\t\t\t\tg: color.g,\r\n\t\t\t\t\t\tb: color.b\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tHSVA_OBJ: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\tif ( Common.isNumber( original.h ) && Common.isNumber( original.s ) && Common.isNumber( original.v ) && Common.isNumber( original.a ) ) {\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tspace: 'HSV',\r\n\t\t\t\t\t\t\th: original.h,\r\n\t\t\t\t\t\t\ts: original.s,\r\n\t\t\t\t\t\t\tv: original.v,\r\n\t\t\t\t\t\t\ta: original.a\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: function write( color ) {\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\th: color.h,\r\n\t\t\t\t\t\ts: color.s,\r\n\t\t\t\t\t\tv: color.v,\r\n\t\t\t\t\t\ta: color.a\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tHSV_OBJ: {\r\n\t\t\t\tread: function read( original ) {\r\n\r\n\t\t\t\t\tif ( Common.isNumber( original.h ) && Common.isNumber( original.s ) && Common.isNumber( original.v ) ) {\r\n\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\tspace: 'HSV',\r\n\t\t\t\t\t\t\th: original.h,\r\n\t\t\t\t\t\t\ts: original.s,\r\n\t\t\t\t\t\t\tv: original.v\r\n\t\t\t\t\t\t};\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\r\n\t\t\t\t},\r\n\t\t\t\twrite: function write( color ) {\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\th: color.h,\r\n\t\t\t\t\t\ts: color.s,\r\n\t\t\t\t\t\tv: color.v\r\n\t\t\t\t\t};\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t} ];\r\nvar result = void 0;\r\nvar toReturn = void 0;\r\nvar interpret = function interpret() {\r\n\r\n\ttoReturn = false;\r\n\tvar original = arguments.length > 1 ? Common.toArray( arguments ) : arguments[ 0 ];\r\n\tCommon.each( INTERPRETATIONS, function ( family ) {\r\n\r\n\t\tif ( family.litmus( original ) ) {\r\n\r\n\t\t\tCommon.each( family.conversions, function ( conversion, conversionName ) {\r\n\r\n\t\t\t\tresult = conversion.read( original );\r\n\t\t\t\tif ( toReturn === false && result !== false ) {\r\n\r\n\t\t\t\t\ttoReturn = result;\r\n\t\t\t\t\tresult.conversionName = conversionName;\r\n\t\t\t\t\tresult.conversion = conversion;\r\n\t\t\t\t\treturn Common.BREAK;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\t\t\treturn Common.BREAK;\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\treturn toReturn;\r\n\r\n};\r\n\r\nvar tmpComponent = void 0;\r\nvar ColorMath = {\r\n\thsv_to_rgb: function hsv_to_rgb( h, s, v ) {\r\n\r\n\t\tvar hi = Math.floor( h / 60 ) % 6;\r\n\t\tvar f = h / 60 - Math.floor( h / 60 );\r\n\t\tvar p = v * ( 1.0 - s );\r\n\t\tvar q = v * ( 1.0 - f * s );\r\n\t\tvar t = v * ( 1.0 - ( 1.0 - f ) * s );\r\n\t\tvar c = [[ v, t, p ], [ q, v, p ], [ p, v, t ], [ p, q, v ], [ t, p, v ], [ v, p, q ]][ hi ];\r\n\t\treturn {\r\n\t\t\tr: c[ 0 ] * 255,\r\n\t\t\tg: c[ 1 ] * 255,\r\n\t\t\tb: c[ 2 ] * 255\r\n\t\t};\r\n\r\n\t},\r\n\trgb_to_hsv: function rgb_to_hsv( r, g, b ) {\r\n\r\n\t\tvar min = Math.min( r, g, b );\r\n\t\tvar max = Math.max( r, g, b );\r\n\t\tvar delta = max - min;\r\n\t\tvar h = void 0;\r\n\t\tvar s = void 0;\r\n\t\tif ( max !== 0 ) {\r\n\r\n\t\t\ts = delta / max;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn {\r\n\t\t\t\th: NaN,\r\n\t\t\t\ts: 0,\r\n\t\t\t\tv: 0\r\n\t\t\t};\r\n\r\n\t\t}\r\n\t\tif ( r === max ) {\r\n\r\n\t\t\th = ( g - b ) / delta;\r\n\r\n\t\t} else if ( g === max ) {\r\n\r\n\t\t\th = 2 + ( b - r ) / delta;\r\n\r\n\t\t} else {\r\n\r\n\t\t\th = 4 + ( r - g ) / delta;\r\n\r\n\t\t}\r\n\t\th /= 6;\r\n\t\tif ( h < 0 ) {\r\n\r\n\t\t\th += 1;\r\n\r\n\t\t}\r\n\t\treturn {\r\n\t\t\th: h * 360,\r\n\t\t\ts: s,\r\n\t\t\tv: max / 255\r\n\t\t};\r\n\r\n\t},\r\n\trgb_to_hex: function rgb_to_hex( r, g, b ) {\r\n\r\n\t\tvar hex = this.hex_with_component( 0, 2, r );\r\n\t\thex = this.hex_with_component( hex, 1, g );\r\n\t\thex = this.hex_with_component( hex, 0, b );\r\n\t\treturn hex;\r\n\r\n\t},\r\n\tcomponent_from_hex: function component_from_hex( hex, componentIndex ) {\r\n\r\n\t\treturn hex >> componentIndex * 8 & 0xFF;\r\n\r\n\t},\r\n\thex_with_component: function hex_with_component( hex, componentIndex, value ) {\r\n\r\n\t\treturn value << ( tmpComponent = componentIndex * 8 ) | hex & ~ ( 0xFF << tmpComponent );\r\n\r\n\t}\r\n};\r\n\r\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function ( obj ) {\r\n\r\n\treturn typeof obj;\r\n\r\n} : function ( obj ) {\r\n\r\n\treturn obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar classCallCheck = function ( instance, Constructor ) {\r\n\r\n\tif ( ! ( instance instanceof Constructor ) ) {\r\n\r\n\t\tthrow new TypeError( \"Cannot call a class as a function\" );\r\n\r\n\t}\r\n\r\n};\r\n\r\nvar createClass = function () {\r\n\r\n\tfunction defineProperties( target, props ) {\r\n\r\n\t\tfor ( var i = 0; i < props.length; i ++ ) {\r\n\r\n\t\t\tvar descriptor = props[ i ];\r\n\t\t\tdescriptor.enumerable = descriptor.enumerable || false;\r\n\t\t\tdescriptor.configurable = true;\r\n\t\t\tif ( \"value\" in descriptor ) descriptor.writable = true;\r\n\t\t\tObject.defineProperty( target, descriptor.key, descriptor );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\treturn function ( Constructor, protoProps, staticProps ) {\r\n\r\n\t\tif ( protoProps ) defineProperties( Constructor.prototype, protoProps );\r\n\t\tif ( staticProps ) defineProperties( Constructor, staticProps );\r\n\t\treturn Constructor;\r\n\r\n\t};\r\n\r\n}();\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar get = function get( object, property, receiver ) {\r\n\r\n\tif ( object === null ) object = Function.prototype;\r\n\tvar desc = Object.getOwnPropertyDescriptor( object, property );\r\n\r\n\tif ( desc === undefined ) {\r\n\r\n\t\tvar parent = Object.getPrototypeOf( object );\r\n\r\n\t\tif ( parent === null ) {\r\n\r\n\t\t\treturn undefined;\r\n\r\n\t\t} else {\r\n\r\n\t\t\treturn get( parent, property, receiver );\r\n\r\n\t\t}\r\n\r\n\t} else if ( \"value\" in desc ) {\r\n\r\n\t\treturn desc.value;\r\n\r\n\t} else {\r\n\r\n\t\tvar getter = desc.get;\r\n\r\n\t\tif ( getter === undefined ) {\r\n\r\n\t\t\treturn undefined;\r\n\r\n\t\t}\r\n\r\n\t\treturn getter.call( receiver );\r\n\r\n\t}\r\n\r\n};\r\n\r\nvar inherits = function ( subClass, superClass ) {\r\n\r\n\tif ( typeof superClass !== \"function\" && superClass !== null ) {\r\n\r\n\t\tthrow new TypeError( \"Super expression must either be null or a function, not \" + typeof superClass );\r\n\r\n\t}\r\n\r\n\tsubClass.prototype = Object.create( superClass && superClass.prototype, {\r\n\t\tconstructor: {\r\n\t\t\tvalue: subClass,\r\n\t\t\tenumerable: false,\r\n\t\t\twritable: true,\r\n\t\t\tconfigurable: true\r\n\t\t}\r\n\t} );\r\n\tif ( superClass ) Object.setPrototypeOf ? Object.setPrototypeOf( subClass, superClass ) : subClass.__proto__ = superClass;\r\n\r\n};\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nvar possibleConstructorReturn = function ( self, call ) {\r\n\r\n\tif ( ! self ) {\r\n\r\n\t\tthrow new ReferenceError( \"this hasn't been initialised - super() hasn't been called\" );\r\n\r\n\t}\r\n\r\n\treturn call && ( typeof call === \"object\" || typeof call === \"function\" ) ? call : self;\r\n\r\n};\r\n\r\nvar Color = function () {\r\n\r\n\tfunction Color() {\r\n\r\n\t\tclassCallCheck( this, Color );\r\n\t\tthis.__state = interpret.apply( this, arguments );\r\n\t\tif ( this.__state === false ) {\r\n\r\n\t\t\tthrow new Error( 'Failed to interpret color arguments' );\r\n\r\n\t\t}\r\n\t\tthis.__state.a = this.__state.a || 1;\r\n\r\n\t}\r\n\tcreateClass( Color, [ {\r\n\t\tkey: 'toString',\r\n\t\tvalue: function toString() {\r\n\r\n\t\t\treturn colorToString( this );\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'toHexString',\r\n\t\tvalue: function toHexString() {\r\n\r\n\t\t\treturn colorToString( this, true );\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'toOriginal',\r\n\t\tvalue: function toOriginal() {\r\n\r\n\t\t\treturn this.__state.conversion.write( this );\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn Color;\r\n\r\n}();\r\nfunction defineRGBComponent( target, component, componentHexIndex ) {\r\n\r\n\tObject.defineProperty( target, component, {\r\n\t\tget: function get$$1() {\r\n\r\n\t\t\tif ( this.__state.space === 'RGB' ) {\r\n\r\n\t\t\t\treturn this.__state[ component ];\r\n\r\n\t\t\t}\r\n\t\t\tColor.recalculateRGB( this, component, componentHexIndex );\r\n\t\t\treturn this.__state[ component ];\r\n\r\n\t\t},\r\n\t\tset: function set$$1( v ) {\r\n\r\n\t\t\tif ( this.__state.space !== 'RGB' ) {\r\n\r\n\t\t\t\tColor.recalculateRGB( this, component, componentHexIndex );\r\n\t\t\t\tthis.__state.space = 'RGB';\r\n\r\n\t\t\t}\r\n\t\t\tthis.__state[ component ] = v;\r\n\r\n\t\t}\r\n\t} );\r\n\r\n}\r\nfunction defineHSVComponent( target, component ) {\r\n\r\n\tObject.defineProperty( target, component, {\r\n\t\tget: function get$$1() {\r\n\r\n\t\t\tif ( this.__state.space === 'HSV' ) {\r\n\r\n\t\t\t\treturn this.__state[ component ];\r\n\r\n\t\t\t}\r\n\t\t\tColor.recalculateHSV( this );\r\n\t\t\treturn this.__state[ component ];\r\n\r\n\t\t},\r\n\t\tset: function set$$1( v ) {\r\n\r\n\t\t\tif ( this.__state.space !== 'HSV' ) {\r\n\r\n\t\t\t\tColor.recalculateHSV( this );\r\n\t\t\t\tthis.__state.space = 'HSV';\r\n\r\n\t\t\t}\r\n\t\t\tthis.__state[ component ] = v;\r\n\r\n\t\t}\r\n\t} );\r\n\r\n}\r\nColor.recalculateRGB = function ( color, component, componentHexIndex ) {\r\n\r\n\tif ( color.__state.space === 'HEX' ) {\r\n\r\n\t\tcolor.__state[ component ] = ColorMath.component_from_hex( color.__state.hex, componentHexIndex );\r\n\r\n\t} else if ( color.__state.space === 'HSV' ) {\r\n\r\n\t\tCommon.extend( color.__state, ColorMath.hsv_to_rgb( color.__state.h, color.__state.s, color.__state.v ) );\r\n\r\n\t} else {\r\n\r\n\t\tthrow new Error( 'Corrupted color state' );\r\n\r\n\t}\r\n\r\n};\r\nColor.recalculateHSV = function ( color ) {\r\n\r\n\tvar result = ColorMath.rgb_to_hsv( color.r, color.g, color.b );\r\n\tCommon.extend( color.__state, {\r\n\t\ts: result.s,\r\n\t\tv: result.v\r\n\t} );\r\n\tif ( ! Common.isNaN( result.h ) ) {\r\n\r\n\t\tcolor.__state.h = result.h;\r\n\r\n\t} else if ( Common.isUndefined( color.__state.h ) ) {\r\n\r\n\t\tcolor.__state.h = 0;\r\n\r\n\t}\r\n\r\n};\r\nColor.COMPONENTS = [ 'r', 'g', 'b', 'h', 's', 'v', 'hex', 'a' ];\r\ndefineRGBComponent( Color.prototype, 'r', 2 );\r\ndefineRGBComponent( Color.prototype, 'g', 1 );\r\ndefineRGBComponent( Color.prototype, 'b', 0 );\r\ndefineHSVComponent( Color.prototype, 'h' );\r\ndefineHSVComponent( Color.prototype, 's' );\r\ndefineHSVComponent( Color.prototype, 'v' );\r\nObject.defineProperty( Color.prototype, 'a', {\r\n\tget: function get$$1() {\r\n\r\n\t\treturn this.__state.a;\r\n\r\n\t},\r\n\tset: function set$$1( v ) {\r\n\r\n\t\tthis.__state.a = v;\r\n\r\n\t}\r\n} );\r\nObject.defineProperty( Color.prototype, 'hex', {\r\n\tget: function get$$1() {\r\n\r\n\t\tif ( this.__state.space !== 'HEX' ) {\r\n\r\n\t\t\tthis.__state.hex = ColorMath.rgb_to_hex( this.r, this.g, this.b );\r\n\t\t\tthis.__state.space = 'HEX';\r\n\r\n\t\t}\r\n\t\treturn this.__state.hex;\r\n\r\n\t},\r\n\tset: function set$$1( v ) {\r\n\r\n\t\tthis.__state.space = 'HEX';\r\n\t\tthis.__state.hex = v;\r\n\r\n\t}\r\n} );\r\n\r\nvar Controller = function () {\r\n\r\n\tfunction Controller( object, property ) {\r\n\r\n\t\tclassCallCheck( this, Controller );\r\n\t\tthis.initialValue = object[ property ];\r\n\t\tthis.domElement = document.createElement( 'div' );\r\n\t\tthis.object = object;\r\n\t\tthis.property = property;\r\n\t\tthis.__onChange = undefined;\r\n\t\tthis.__onFinishChange = undefined;\r\n\r\n\t}\r\n\tcreateClass( Controller, [ {\r\n\t\tkey: 'onChange',\r\n\t\tvalue: function onChange( fnc ) {\r\n\r\n\t\t\tthis.__onChange = fnc;\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'onFinishChange',\r\n\t\tvalue: function onFinishChange( fnc ) {\r\n\r\n\t\t\tthis.__onFinishChange = fnc;\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'setValue',\r\n\t\tvalue: function setValue( newValue ) {\r\n\r\n\t\t\tthis.object[ this.property ] = newValue;\r\n\t\t\tif ( this.__onChange ) {\r\n\r\n\t\t\t\tthis.__onChange.call( this, newValue );\r\n\r\n\t\t\t}\r\n\t\t\tthis.updateDisplay();\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'getValue',\r\n\t\tvalue: function getValue() {\r\n\r\n\t\t\treturn this.object[ this.property ];\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'updateDisplay',\r\n\t\tvalue: function updateDisplay() {\r\n\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'isModified',\r\n\t\tvalue: function isModified() {\r\n\r\n\t\t\treturn this.initialValue !== this.getValue();\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn Controller;\r\n\r\n}();\r\n\r\nvar EVENT_MAP = {\r\n\tHTMLEvents: [ 'change' ],\r\n\tMouseEvents: [ 'click', 'mousemove', 'mousedown', 'mouseup', 'mouseover' ],\r\n\tKeyboardEvents: [ 'keydown' ]\r\n};\r\nvar EVENT_MAP_INV = {};\r\nCommon.each( EVENT_MAP, function ( v, k ) {\r\n\r\n\tCommon.each( v, function ( e ) {\r\n\r\n\t\tEVENT_MAP_INV[ e ] = k;\r\n\r\n\t} );\r\n\r\n} );\r\nvar CSS_VALUE_PIXELS = /(\\d+(\\.\\d+)?)px/;\r\nfunction cssValueToPixels( val ) {\r\n\r\n\tif ( val === '0' || Common.isUndefined( val ) ) {\r\n\r\n\t\treturn 0;\r\n\r\n\t}\r\n\tvar match = val.match( CSS_VALUE_PIXELS );\r\n\tif ( ! Common.isNull( match ) ) {\r\n\r\n\t\treturn parseFloat( match[ 1 ] );\r\n\r\n\t}\r\n\treturn 0;\r\n\r\n}\r\nvar dom = {\r\n\tmakeSelectable: function makeSelectable( elem, selectable ) {\r\n\r\n\t\tif ( elem === undefined || elem.style === undefined ) return;\r\n\t\telem.onselectstart = selectable ? function () {\r\n\r\n\t\t\treturn false;\r\n\r\n\t\t} : function () {};\r\n\t\telem.style.MozUserSelect = selectable ? 'auto' : 'none';\r\n\t\telem.style.KhtmlUserSelect = selectable ? 'auto' : 'none';\r\n\t\telem.unselectable = selectable ? 'on' : 'off';\r\n\r\n\t},\r\n\tmakeFullscreen: function makeFullscreen( elem, hor, vert ) {\r\n\r\n\t\tvar vertical = vert;\r\n\t\tvar horizontal = hor;\r\n\t\tif ( Common.isUndefined( horizontal ) ) {\r\n\r\n\t\t\thorizontal = true;\r\n\r\n\t\t}\r\n\t\tif ( Common.isUndefined( vertical ) ) {\r\n\r\n\t\t\tvertical = true;\r\n\r\n\t\t}\r\n\t\telem.style.position = 'absolute';\r\n\t\tif ( horizontal ) {\r\n\r\n\t\t\telem.style.left = 0;\r\n\t\t\telem.style.right = 0;\r\n\r\n\t\t}\r\n\t\tif ( vertical ) {\r\n\r\n\t\t\telem.style.top = 0;\r\n\t\t\telem.style.bottom = 0;\r\n\r\n\t\t}\r\n\r\n\t},\r\n\tfakeEvent: function fakeEvent( elem, eventType, pars, aux ) {\r\n\r\n\t\tvar params = pars || {};\r\n\t\tvar className = EVENT_MAP_INV[ eventType ];\r\n\t\tif ( ! className ) {\r\n\r\n\t\t\tthrow new Error( 'Event type ' + eventType + ' not supported.' );\r\n\r\n\t\t}\r\n\t\tvar evt = document.createEvent( className );\r\n\t\tswitch ( className ) {\r\n\r\n\t\t\tcase 'MouseEvents':\r\n\t\t\t{\r\n\r\n\t\t\t\tvar clientX = params.x || params.clientX || 0;\r\n\t\t\t\tvar clientY = params.y || params.clientY || 0;\r\n\t\t\t\tevt.initMouseEvent( eventType, params.bubbles || false, params.cancelable || true, window, params.clickCount || 1, 0,\r\n\t\t\t\t\t0,\r\n\t\t\t\t\tclientX,\r\n\t\t\t\t\tclientY,\r\n\t\t\t\t\tfalse, false, false, false, 0, null );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t\tcase 'KeyboardEvents':\r\n\t\t\t{\r\n\r\n\t\t\t\tvar init = evt.initKeyboardEvent || evt.initKeyEvent;\r\n\t\t\t\tCommon.defaults( params, {\r\n\t\t\t\t\tcancelable: true,\r\n\t\t\t\t\tctrlKey: false,\r\n\t\t\t\t\taltKey: false,\r\n\t\t\t\t\tshiftKey: false,\r\n\t\t\t\t\tmetaKey: false,\r\n\t\t\t\t\tkeyCode: undefined,\r\n\t\t\t\t\tcharCode: undefined\r\n\t\t\t\t} );\r\n\t\t\t\tinit( eventType, params.bubbles || false, params.cancelable, window, params.ctrlKey, params.altKey, params.shiftKey, params.metaKey, params.keyCode, params.charCode );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\t\t\tdefault:\r\n\t\t\t{\r\n\r\n\t\t\t\tevt.initEvent( eventType, params.bubbles || false, params.cancelable || true );\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tCommon.defaults( evt, aux );\r\n\t\telem.dispatchEvent( evt );\r\n\r\n\t},\r\n\tbind: function bind( elem, event, func, newBool ) {\r\n\r\n\t\tvar bool = newBool || false;\r\n\t\tif ( elem.addEventListener ) {\r\n\r\n\t\t\telem.addEventListener( event, func, bool );\r\n\r\n\t\t} else if ( elem.attachEvent ) {\r\n\r\n\t\t\telem.attachEvent( 'on' + event, func );\r\n\r\n\t\t}\r\n\t\treturn dom;\r\n\r\n\t},\r\n\tunbind: function unbind( elem, event, func, newBool ) {\r\n\r\n\t\tvar bool = newBool || false;\r\n\t\tif ( elem.removeEventListener ) {\r\n\r\n\t\t\telem.removeEventListener( event, func, bool );\r\n\r\n\t\t} else if ( elem.detachEvent ) {\r\n\r\n\t\t\telem.detachEvent( 'on' + event, func );\r\n\r\n\t\t}\r\n\t\treturn dom;\r\n\r\n\t},\r\n\taddClass: function addClass( elem, className ) {\r\n\r\n\t\tif ( elem.className === undefined ) {\r\n\r\n\t\t\telem.className = className;\r\n\r\n\t\t} else if ( elem.className !== className ) {\r\n\r\n\t\t\tvar classes = elem.className.split( / +/ );\r\n\t\t\tif ( classes.indexOf( className ) === - 1 ) {\r\n\r\n\t\t\t\tclasses.push( className );\r\n\t\t\t\telem.className = classes.join( ' ' ).replace( /^\\s+/, '' ).replace( /\\s+$/, '' );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\treturn dom;\r\n\r\n\t},\r\n\tremoveClass: function removeClass( elem, className ) {\r\n\r\n\t\tif ( className ) {\r\n\r\n\t\t\tif ( elem.className === className ) {\r\n\r\n\t\t\t\telem.removeAttribute( 'class' );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tvar classes = elem.className.split( / +/ );\r\n\t\t\t\tvar index = classes.indexOf( className );\r\n\t\t\t\tif ( index !== - 1 ) {\r\n\r\n\t\t\t\t\tclasses.splice( index, 1 );\r\n\t\t\t\t\telem.className = classes.join( ' ' );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\telem.className = undefined;\r\n\r\n\t\t}\r\n\t\treturn dom;\r\n\r\n\t},\r\n\thasClass: function hasClass( elem, className ) {\r\n\r\n\t\treturn new RegExp( '(?:^|\\\\s+)' + className + '(?:\\\\s+|$)' ).test( elem.className ) || false;\r\n\r\n\t},\r\n\tgetWidth: function getWidth( elem ) {\r\n\r\n\t\tvar style = getComputedStyle( elem );\r\n\t\treturn cssValueToPixels( style[ 'border-left-width' ] ) + cssValueToPixels( style[ 'border-right-width' ] ) + cssValueToPixels( style[ 'padding-left' ] ) + cssValueToPixels( style[ 'padding-right' ] ) + cssValueToPixels( style.width );\r\n\r\n\t},\r\n\tgetHeight: function getHeight( elem ) {\r\n\r\n\t\tvar style = getComputedStyle( elem );\r\n\t\treturn cssValueToPixels( style[ 'border-top-width' ] ) + cssValueToPixels( style[ 'border-bottom-width' ] ) + cssValueToPixels( style[ 'padding-top' ] ) + cssValueToPixels( style[ 'padding-bottom' ] ) + cssValueToPixels( style.height );\r\n\r\n\t},\r\n\tgetOffset: function getOffset( el ) {\r\n\r\n\t\tvar elem = el;\r\n\t\tvar offset = { left: 0, top: 0 };\r\n\t\tif ( elem.offsetParent ) {\r\n\r\n\t\t\tdo {\r\n\r\n\t\t\t\toffset.left += elem.offsetLeft;\r\n\t\t\t\toffset.top += elem.offsetTop;\r\n\t\t\t\telem = elem.offsetParent;\r\n\r\n\t\t\t} while ( elem );\r\n\r\n\t\t}\r\n\t\treturn offset;\r\n\r\n\t},\r\n\tisActive: function isActive( elem ) {\r\n\r\n\t\treturn elem === document.activeElement && ( elem.type || elem.href );\r\n\r\n\t}\r\n};\r\n\r\nvar BooleanController = function ( _Controller ) {\r\n\r\n\tinherits( BooleanController, _Controller );\r\n\tfunction BooleanController( object, property ) {\r\n\r\n\t\tclassCallCheck( this, BooleanController );\r\n\t\tvar _this2 = possibleConstructorReturn( this, ( BooleanController.__proto__ || Object.getPrototypeOf( BooleanController ) ).call( this, object, property ) );\r\n\t\tvar _this = _this2;\r\n\t\t_this2.__prev = _this2.getValue();\r\n\t\t_this2.__checkbox = document.createElement( 'input' );\r\n\t\t_this2.__checkbox.setAttribute( 'type', 'checkbox' );\r\n\t\tfunction onChange() {\r\n\r\n\t\t\t_this.setValue( ! _this.__prev );\r\n\r\n\t\t}\r\n\t\tdom.bind( _this2.__checkbox, 'change', onChange, false );\r\n\t\t_this2.domElement.appendChild( _this2.__checkbox );\r\n\t\t_this2.updateDisplay();\r\n\t\treturn _this2;\r\n\r\n\t}\r\n\tcreateClass( BooleanController, [ {\r\n\t\tkey: 'setValue',\r\n\t\tvalue: function setValue( v ) {\r\n\r\n\t\t\tvar toReturn = get( BooleanController.prototype.__proto__ || Object.getPrototypeOf( BooleanController.prototype ), 'setValue', this ).call( this, v );\r\n\t\t\tif ( this.__onFinishChange ) {\r\n\r\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\r\n\r\n\t\t\t}\r\n\t\t\tthis.__prev = this.getValue();\r\n\t\t\treturn toReturn;\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'updateDisplay',\r\n\t\tvalue: function updateDisplay() {\r\n\r\n\t\t\tif ( this.getValue() === true ) {\r\n\r\n\t\t\t\tthis.__checkbox.setAttribute( 'checked', 'checked' );\r\n\t\t\t\tthis.__checkbox.checked = true;\r\n\t\t\t\tthis.__prev = true;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.__checkbox.checked = false;\r\n\t\t\t\tthis.__prev = false;\r\n\r\n\t\t\t}\r\n\t\t\treturn get( BooleanController.prototype.__proto__ || Object.getPrototypeOf( BooleanController.prototype ), 'updateDisplay', this ).call( this );\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn BooleanController;\r\n\r\n}( Controller );\r\n\r\nvar OptionController = function ( _Controller ) {\r\n\r\n\tinherits( OptionController, _Controller );\r\n\tfunction OptionController( object, property, opts ) {\r\n\r\n\t\tclassCallCheck( this, OptionController );\r\n\t\tvar _this2 = possibleConstructorReturn( this, ( OptionController.__proto__ || Object.getPrototypeOf( OptionController ) ).call( this, object, property ) );\r\n\t\tvar options = opts;\r\n\t\tvar _this = _this2;\r\n\t\t_this2.__select = document.createElement( 'select' );\r\n\t\tif ( Common.isArray( options ) ) {\r\n\r\n\t\t\tvar map = {};\r\n\t\t\tCommon.each( options, function ( element ) {\r\n\r\n\t\t\t\tmap[ element ] = element;\r\n\r\n\t\t\t} );\r\n\t\t\toptions = map;\r\n\r\n\t\t}\r\n\t\tCommon.each( options, function ( value, key ) {\r\n\r\n\t\t\tvar opt = document.createElement( 'option' );\r\n\t\t\topt.innerHTML = key;\r\n\t\t\topt.setAttribute( 'value', value );\r\n\t\t\t_this.__select.appendChild( opt );\r\n\r\n\t\t} );\r\n\t\t_this2.updateDisplay();\r\n\t\tdom.bind( _this2.__select, 'change', function () {\r\n\r\n\t\t\tvar desiredValue = this.options[ this.selectedIndex ].value;\r\n\t\t\t_this.setValue( desiredValue );\r\n\r\n\t\t} );\r\n\t\t_this2.domElement.appendChild( _this2.__select );\r\n\t\treturn _this2;\r\n\r\n\t}\r\n\tcreateClass( OptionController, [ {\r\n\t\tkey: 'setValue',\r\n\t\tvalue: function setValue( v ) {\r\n\r\n\t\t\tvar toReturn = get( OptionController.prototype.__proto__ || Object.getPrototypeOf( OptionController.prototype ), 'setValue', this ).call( this, v );\r\n\t\t\tif ( this.__onFinishChange ) {\r\n\r\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\r\n\r\n\t\t\t}\r\n\t\t\treturn toReturn;\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'updateDisplay',\r\n\t\tvalue: function updateDisplay() {\r\n\r\n\t\t\tif ( dom.isActive( this.__select ) ) return this;\r\n\t\t\tthis.__select.value = this.getValue();\r\n\t\t\treturn get( OptionController.prototype.__proto__ || Object.getPrototypeOf( OptionController.prototype ), 'updateDisplay', this ).call( this );\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn OptionController;\r\n\r\n}( Controller );\r\n\r\nvar StringController = function ( _Controller ) {\r\n\r\n\tinherits( StringController, _Controller );\r\n\tfunction StringController( object, property ) {\r\n\r\n\t\tclassCallCheck( this, StringController );\r\n\t\tvar _this2 = possibleConstructorReturn( this, ( StringController.__proto__ || Object.getPrototypeOf( StringController ) ).call( this, object, property ) );\r\n\t\tvar _this = _this2;\r\n\t\tfunction onChange() {\r\n\r\n\t\t\t_this.setValue( _this.__input.value );\r\n\r\n\t\t}\r\n\t\tfunction onBlur() {\r\n\r\n\t\t\tif ( _this.__onFinishChange ) {\r\n\r\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t_this2.__input = document.createElement( 'input' );\r\n\t\t_this2.__input.setAttribute( 'type', 'text' );\r\n\t\tdom.bind( _this2.__input, 'keyup', onChange );\r\n\t\tdom.bind( _this2.__input, 'change', onChange );\r\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\r\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\r\n\r\n\t\t\tif ( e.keyCode === 13 ) {\r\n\r\n\t\t\t\tthis.blur();\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\t\t_this2.updateDisplay();\r\n\t\t_this2.domElement.appendChild( _this2.__input );\r\n\t\treturn _this2;\r\n\r\n\t}\r\n\tcreateClass( StringController, [ {\r\n\t\tkey: 'updateDisplay',\r\n\t\tvalue: function updateDisplay() {\r\n\r\n\t\t\tif ( ! dom.isActive( this.__input ) ) {\r\n\r\n\t\t\t\tthis.__input.value = this.getValue();\r\n\r\n\t\t\t}\r\n\t\t\treturn get( StringController.prototype.__proto__ || Object.getPrototypeOf( StringController.prototype ), 'updateDisplay', this ).call( this );\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn StringController;\r\n\r\n}( Controller );\r\n\r\nfunction numDecimals( x ) {\r\n\r\n\tvar _x = x.toString();\r\n\tif ( _x.indexOf( '.' ) > - 1 ) {\r\n\r\n\t\treturn _x.length - _x.indexOf( '.' ) - 1;\r\n\r\n\t}\r\n\treturn 0;\r\n\r\n}\r\nvar NumberController = function ( _Controller ) {\r\n\r\n\tinherits( NumberController, _Controller );\r\n\tfunction NumberController( object, property, params ) {\r\n\r\n\t\tclassCallCheck( this, NumberController );\r\n\t\tvar _this = possibleConstructorReturn( this, ( NumberController.__proto__ || Object.getPrototypeOf( NumberController ) ).call( this, object, property ) );\r\n\t\tvar _params = params || {};\r\n\t\t_this.__min = _params.min;\r\n\t\t_this.__max = _params.max;\r\n\t\t_this.__step = _params.step;\r\n\t\tif ( Common.isUndefined( _this.__step ) ) {\r\n\r\n\t\t\tif ( _this.initialValue === 0 ) {\r\n\r\n\t\t\t\t_this.__impliedStep = 1;\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\t_this.__impliedStep = Math.pow( 10, Math.floor( Math.log( Math.abs( _this.initialValue ) ) / Math.LN10 ) ) / 10;\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\t_this.__impliedStep = _this.__step;\r\n\r\n\t\t}\r\n\t\t_this.__precision = numDecimals( _this.__impliedStep );\r\n\t\treturn _this;\r\n\r\n\t}\r\n\tcreateClass( NumberController, [ {\r\n\t\tkey: 'setValue',\r\n\t\tvalue: function setValue( v ) {\r\n\r\n\t\t\tvar _v = v;\r\n\t\t\tif ( this.__min !== undefined && _v < this.__min ) {\r\n\r\n\t\t\t\t_v = this.__min;\r\n\r\n\t\t\t} else if ( this.__max !== undefined && _v > this.__max ) {\r\n\r\n\t\t\t\t_v = this.__max;\r\n\r\n\t\t\t}\r\n\t\t\tif ( this.__step !== undefined && _v % this.__step !== 0 ) {\r\n\r\n\t\t\t\t_v = Math.round( _v / this.__step ) * this.__step;\r\n\r\n\t\t\t}\r\n\t\t\treturn get( NumberController.prototype.__proto__ || Object.getPrototypeOf( NumberController.prototype ), 'setValue', this ).call( this, _v );\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'min',\r\n\t\tvalue: function min( minValue ) {\r\n\r\n\t\t\tthis.__min = minValue;\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'max',\r\n\t\tvalue: function max( maxValue ) {\r\n\r\n\t\t\tthis.__max = maxValue;\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'step',\r\n\t\tvalue: function step( stepValue ) {\r\n\r\n\t\t\tthis.__step = stepValue;\r\n\t\t\tthis.__impliedStep = stepValue;\r\n\t\t\tthis.__precision = numDecimals( stepValue );\r\n\t\t\treturn this;\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn NumberController;\r\n\r\n}( Controller );\r\n\r\nfunction roundToDecimal( value, decimals ) {\r\n\r\n\tvar tenTo = Math.pow( 10, decimals );\r\n\treturn Math.round( value * tenTo ) / tenTo;\r\n\r\n}\r\nvar NumberControllerBox = function ( _NumberController ) {\r\n\r\n\tinherits( NumberControllerBox, _NumberController );\r\n\tfunction NumberControllerBox( object, property, params ) {\r\n\r\n\t\tclassCallCheck( this, NumberControllerBox );\r\n\t\tvar _this2 = possibleConstructorReturn( this, ( NumberControllerBox.__proto__ || Object.getPrototypeOf( NumberControllerBox ) ).call( this, object, property, params ) );\r\n\t\t_this2.__truncationSuspended = false;\r\n\t\tvar _this = _this2;\r\n\t\tvar prevY = void 0;\r\n\t\tfunction onChange() {\r\n\r\n\t\t\tvar attempted = parseFloat( _this.__input.value );\r\n\t\t\tif ( ! Common.isNaN( attempted ) ) {\r\n\r\n\t\t\t\t_this.setValue( attempted );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfunction onFinish() {\r\n\r\n\t\t\tif ( _this.__onFinishChange ) {\r\n\r\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfunction onBlur() {\r\n\r\n\t\t\tonFinish();\r\n\r\n\t\t}\r\n\t\tfunction onMouseDrag( e ) {\r\n\r\n\t\t\tvar diff = prevY - e.clientY;\r\n\t\t\t_this.setValue( _this.getValue() + diff * _this.__impliedStep );\r\n\t\t\tprevY = e.clientY;\r\n\r\n\t\t}\r\n\t\tfunction onMouseUp() {\r\n\r\n\t\t\tdom.unbind( window, 'mousemove', onMouseDrag );\r\n\t\t\tdom.unbind( window, 'mouseup', onMouseUp );\r\n\t\t\tonFinish();\r\n\r\n\t\t}\r\n\t\tfunction onMouseDown( e ) {\r\n\r\n\t\t\tdom.bind( window, 'mousemove', onMouseDrag );\r\n\t\t\tdom.bind( window, 'mouseup', onMouseUp );\r\n\t\t\tprevY = e.clientY;\r\n\r\n\t\t}\r\n\t\t_this2.__input = document.createElement( 'input' );\r\n\t\t_this2.__input.setAttribute( 'type', 'text' );\r\n\t\tdom.bind( _this2.__input, 'change', onChange );\r\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\r\n\t\tdom.bind( _this2.__input, 'mousedown', onMouseDown );\r\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\r\n\r\n\t\t\tif ( e.keyCode === 13 ) {\r\n\r\n\t\t\t\t_this.__truncationSuspended = true;\r\n\t\t\t\tthis.blur();\r\n\t\t\t\t_this.__truncationSuspended = false;\r\n\t\t\t\tonFinish();\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\t\t_this2.updateDisplay();\r\n\t\t_this2.domElement.appendChild( _this2.__input );\r\n\t\treturn _this2;\r\n\r\n\t}\r\n\tcreateClass( NumberControllerBox, [ {\r\n\t\tkey: 'updateDisplay',\r\n\t\tvalue: function updateDisplay() {\r\n\r\n\t\t\tthis.__input.value = this.__truncationSuspended ? this.getValue() : roundToDecimal( this.getValue(), this.__precision );\r\n\t\t\treturn get( NumberControllerBox.prototype.__proto__ || Object.getPrototypeOf( NumberControllerBox.prototype ), 'updateDisplay', this ).call( this );\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn NumberControllerBox;\r\n\r\n}( NumberController );\r\n\r\nfunction map( v, i1, i2, o1, o2 ) {\r\n\r\n\treturn o1 + ( o2 - o1 ) * ( ( v - i1 ) / ( i2 - i1 ) );\r\n\r\n}\r\nvar NumberControllerSlider = function ( _NumberController ) {\r\n\r\n\tinherits( NumberControllerSlider, _NumberController );\r\n\tfunction NumberControllerSlider( object, property, min, max, step ) {\r\n\r\n\t\tclassCallCheck( this, NumberControllerSlider );\r\n\t\tvar _this2 = possibleConstructorReturn( this, ( NumberControllerSlider.__proto__ || Object.getPrototypeOf( NumberControllerSlider ) ).call( this, object, property, { min: min, max: max, step: step } ) );\r\n\t\tvar _this = _this2;\r\n\t\t_this2.__background = document.createElement( 'div' );\r\n\t\t_this2.__foreground = document.createElement( 'div' );\r\n\t\tdom.bind( _this2.__background, 'mousedown', onMouseDown );\r\n\t\tdom.bind( _this2.__background, 'touchstart', onTouchStart );\r\n\t\tdom.addClass( _this2.__background, 'slider' );\r\n\t\tdom.addClass( _this2.__foreground, 'slider-fg' );\r\n\t\tfunction onMouseDown( e ) {\r\n\r\n\t\t\tdocument.activeElement.blur();\r\n\t\t\tdom.bind( window, 'mousemove', onMouseDrag );\r\n\t\t\tdom.bind( window, 'mouseup', onMouseUp );\r\n\t\t\tonMouseDrag( e );\r\n\r\n\t\t}\r\n\t\tfunction onMouseDrag( e ) {\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\tvar bgRect = _this.__background.getBoundingClientRect();\r\n\t\t\t_this.setValue( map( e.clientX, bgRect.left, bgRect.right, _this.__min, _this.__max ) );\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\t\tfunction onMouseUp() {\r\n\r\n\t\t\tdom.unbind( window, 'mousemove', onMouseDrag );\r\n\t\t\tdom.unbind( window, 'mouseup', onMouseUp );\r\n\t\t\tif ( _this.__onFinishChange ) {\r\n\r\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfunction onTouchStart( e ) {\r\n\r\n\t\t\tif ( e.touches.length !== 1 ) {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\t\t\tdom.bind( window, 'touchmove', onTouchMove );\r\n\t\t\tdom.bind( window, 'touchend', onTouchEnd );\r\n\t\t\tonTouchMove( e );\r\n\r\n\t\t}\r\n\t\tfunction onTouchMove( e ) {\r\n\r\n\t\t\tvar clientX = e.touches[ 0 ].clientX;\r\n\t\t\tvar bgRect = _this.__background.getBoundingClientRect();\r\n\t\t\t_this.setValue( map( clientX, bgRect.left, bgRect.right, _this.__min, _this.__max ) );\r\n\r\n\t\t}\r\n\t\tfunction onTouchEnd() {\r\n\r\n\t\t\tdom.unbind( window, 'touchmove', onTouchMove );\r\n\t\t\tdom.unbind( window, 'touchend', onTouchEnd );\r\n\t\t\tif ( _this.__onFinishChange ) {\r\n\r\n\t\t\t\t_this.__onFinishChange.call( _this, _this.getValue() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t_this2.updateDisplay();\r\n\t\t_this2.__background.appendChild( _this2.__foreground );\r\n\t\t_this2.domElement.appendChild( _this2.__background );\r\n\t\treturn _this2;\r\n\r\n\t}\r\n\tcreateClass( NumberControllerSlider, [ {\r\n\t\tkey: 'updateDisplay',\r\n\t\tvalue: function updateDisplay() {\r\n\r\n\t\t\tvar pct = ( this.getValue() - this.__min ) / ( this.__max - this.__min );\r\n\t\t\tthis.__foreground.style.width = pct * 100 + '%';\r\n\t\t\treturn get( NumberControllerSlider.prototype.__proto__ || Object.getPrototypeOf( NumberControllerSlider.prototype ), 'updateDisplay', this ).call( this );\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn NumberControllerSlider;\r\n\r\n}( NumberController );\r\n\r\nvar FunctionController = function ( _Controller ) {\r\n\r\n\tinherits( FunctionController, _Controller );\r\n\tfunction FunctionController( object, property, text ) {\r\n\r\n\t\tclassCallCheck( this, FunctionController );\r\n\t\tvar _this2 = possibleConstructorReturn( this, ( FunctionController.__proto__ || Object.getPrototypeOf( FunctionController ) ).call( this, object, property ) );\r\n\t\tvar _this = _this2;\r\n\t\t_this2.__button = document.createElement( 'div' );\r\n\t\t_this2.__button.innerHTML = text === undefined ? 'Fire' : text;\r\n\t\tdom.bind( _this2.__button, 'click', function ( e ) {\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\t_this.fire();\r\n\t\t\treturn false;\r\n\r\n\t\t} );\r\n\t\tdom.addClass( _this2.__button, 'button' );\r\n\t\t_this2.domElement.appendChild( _this2.__button );\r\n\t\treturn _this2;\r\n\r\n\t}\r\n\tcreateClass( FunctionController, [ {\r\n\t\tkey: 'fire',\r\n\t\tvalue: function fire() {\r\n\r\n\t\t\tif ( this.__onChange ) {\r\n\r\n\t\t\t\tthis.__onChange.call( this );\r\n\r\n\t\t\t}\r\n\t\t\tthis.getValue().call( this.object );\r\n\t\t\tif ( this.__onFinishChange ) {\r\n\r\n\t\t\t\tthis.__onFinishChange.call( this, this.getValue() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn FunctionController;\r\n\r\n}( Controller );\r\n\r\nvar ColorController = function ( _Controller ) {\r\n\r\n\tinherits( ColorController, _Controller );\r\n\tfunction ColorController( object, property ) {\r\n\r\n\t\tclassCallCheck( this, ColorController );\r\n\t\tvar _this2 = possibleConstructorReturn( this, ( ColorController.__proto__ || Object.getPrototypeOf( ColorController ) ).call( this, object, property ) );\r\n\t\t_this2.__color = new Color( _this2.getValue() );\r\n\t\t_this2.__temp = new Color( 0 );\r\n\t\tvar _this = _this2;\r\n\t\t_this2.domElement = document.createElement( 'div' );\r\n\t\tdom.makeSelectable( _this2.domElement, false );\r\n\t\t_this2.__selector = document.createElement( 'div' );\r\n\t\t_this2.__selector.className = 'selector';\r\n\t\t_this2.__saturation_field = document.createElement( 'div' );\r\n\t\t_this2.__saturation_field.className = 'saturation-field';\r\n\t\t_this2.__field_knob = document.createElement( 'div' );\r\n\t\t_this2.__field_knob.className = 'field-knob';\r\n\t\t_this2.__field_knob_border = '2px solid ';\r\n\t\t_this2.__hue_knob = document.createElement( 'div' );\r\n\t\t_this2.__hue_knob.className = 'hue-knob';\r\n\t\t_this2.__hue_field = document.createElement( 'div' );\r\n\t\t_this2.__hue_field.className = 'hue-field';\r\n\t\t_this2.__input = document.createElement( 'input' );\r\n\t\t_this2.__input.type = 'text';\r\n\t\t_this2.__input_textShadow = '0 1px 1px ';\r\n\t\tdom.bind( _this2.__input, 'keydown', function ( e ) {\r\n\r\n\t\t\tif ( e.keyCode === 13 ) {\r\n\r\n\t\t\t\tonBlur.call( this );\r\n\r\n\t\t\t}\r\n\r\n\t\t} );\r\n\t\tdom.bind( _this2.__input, 'blur', onBlur );\r\n\t\tdom.bind( _this2.__selector, 'mousedown', function () {\r\n\r\n\t\t\tdom.addClass( this, 'drag' ).bind( window, 'mouseup', function () {\r\n\r\n\t\t\t\tdom.removeClass( _this.__selector, 'drag' );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\t\tdom.bind( _this2.__selector, 'touchstart', function () {\r\n\r\n\t\t\tdom.addClass( this, 'drag' ).bind( window, 'touchend', function () {\r\n\r\n\t\t\t\tdom.removeClass( _this.__selector, 'drag' );\r\n\r\n\t\t\t} );\r\n\r\n\t\t} );\r\n\t\tvar valueField = document.createElement( 'div' );\r\n\t\tCommon.extend( _this2.__selector.style, {\r\n\t\t\twidth: '122px',\r\n\t\t\theight: '102px',\r\n\t\t\tpadding: '3px',\r\n\t\t\tbackgroundColor: '#222',\r\n\t\t\tboxShadow: '0px 1px 3px rgba(0,0,0,0.3)'\r\n\t\t} );\r\n\t\tCommon.extend( _this2.__field_knob.style, {\r\n\t\t\tposition: 'absolute',\r\n\t\t\twidth: '12px',\r\n\t\t\theight: '12px',\r\n\t\t\tborder: _this2.__field_knob_border + ( _this2.__color.v < 0.5 ? '#fff' : '#000' ),\r\n\t\t\tboxShadow: '0px 1px 3px rgba(0,0,0,0.5)',\r\n\t\t\tborderRadius: '12px',\r\n\t\t\tzIndex: 1\r\n\t\t} );\r\n\t\tCommon.extend( _this2.__hue_knob.style, {\r\n\t\t\tposition: 'absolute',\r\n\t\t\twidth: '15px',\r\n\t\t\theight: '2px',\r\n\t\t\tborderRight: '4px solid #fff',\r\n\t\t\tzIndex: 1\r\n\t\t} );\r\n\t\tCommon.extend( _this2.__saturation_field.style, {\r\n\t\t\twidth: '100px',\r\n\t\t\theight: '100px',\r\n\t\t\tborder: '1px solid #555',\r\n\t\t\tmarginRight: '3px',\r\n\t\t\tdisplay: 'inline-block',\r\n\t\t\tcursor: 'pointer'\r\n\t\t} );\r\n\t\tCommon.extend( valueField.style, {\r\n\t\t\twidth: '100%',\r\n\t\t\theight: '100%',\r\n\t\t\tbackground: 'none'\r\n\t\t} );\r\n\t\tlinearGradient( valueField, 'top', 'rgba(0,0,0,0)', '#000' );\r\n\t\tCommon.extend( _this2.__hue_field.style, {\r\n\t\t\twidth: '15px',\r\n\t\t\theight: '100px',\r\n\t\t\tborder: '1px solid #555',\r\n\t\t\tcursor: 'ns-resize',\r\n\t\t\tposition: 'absolute',\r\n\t\t\ttop: '3px',\r\n\t\t\tright: '3px'\r\n\t\t} );\r\n\t\thueGradient( _this2.__hue_field );\r\n\t\tCommon.extend( _this2.__input.style, {\r\n\t\t\toutline: 'none',\r\n\t\t\ttextAlign: 'center',\r\n\t\t\tcolor: '#fff',\r\n\t\t\tborder: 0,\r\n\t\t\tfontWeight: 'bold',\r\n\t\t\ttextShadow: _this2.__input_textShadow + 'rgba(0,0,0,0.7)'\r\n\t\t} );\r\n\t\tdom.bind( _this2.__saturation_field, 'mousedown', fieldDown );\r\n\t\tdom.bind( _this2.__saturation_field, 'touchstart', fieldDown );\r\n\t\tdom.bind( _this2.__field_knob, 'mousedown', fieldDown );\r\n\t\tdom.bind( _this2.__field_knob, 'touchstart', fieldDown );\r\n\t\tdom.bind( _this2.__hue_field, 'mousedown', fieldDownH );\r\n\t\tdom.bind( _this2.__hue_field, 'touchstart', fieldDownH );\r\n\t\tfunction fieldDown( e ) {\r\n\r\n\t\t\tsetSV( e );\r\n\t\t\tdom.bind( window, 'mousemove', setSV );\r\n\t\t\tdom.bind( window, 'touchmove', setSV );\r\n\t\t\tdom.bind( window, 'mouseup', fieldUpSV );\r\n\t\t\tdom.bind( window, 'touchend', fieldUpSV );\r\n\r\n\t\t}\r\n\t\tfunction fieldDownH( e ) {\r\n\r\n\t\t\tsetH( e );\r\n\t\t\tdom.bind( window, 'mousemove', setH );\r\n\t\t\tdom.bind( window, 'touchmove', setH );\r\n\t\t\tdom.bind( window, 'mouseup', fieldUpH );\r\n\t\t\tdom.bind( window, 'touchend', fieldUpH );\r\n\r\n\t\t}\r\n\t\tfunction fieldUpSV() {\r\n\r\n\t\t\tdom.unbind( window, 'mousemove', setSV );\r\n\t\t\tdom.unbind( window, 'touchmove', setSV );\r\n\t\t\tdom.unbind( window, 'mouseup', fieldUpSV );\r\n\t\t\tdom.unbind( window, 'touchend', fieldUpSV );\r\n\t\t\tonFinish();\r\n\r\n\t\t}\r\n\t\tfunction fieldUpH() {\r\n\r\n\t\t\tdom.unbind( window, 'mousemove', setH );\r\n\t\t\tdom.unbind( window, 'touchmove', setH );\r\n\t\t\tdom.unbind( window, 'mouseup', fieldUpH );\r\n\t\t\tdom.unbind( window, 'touchend', fieldUpH );\r\n\t\t\tonFinish();\r\n\r\n\t\t}\r\n\t\tfunction onBlur() {\r\n\r\n\t\t\tvar i = interpret( this.value );\r\n\t\t\tif ( i !== false ) {\r\n\r\n\t\t\t\t_this.__color.__state = i;\r\n\t\t\t\t_this.setValue( _this.__color.toOriginal() );\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\tthis.value = _this.__color.toString();\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tfunction onFinish() {\r\n\r\n\t\t\tif ( _this.__onFinishChange ) {\r\n\r\n\t\t\t\t_this.__onFinishChange.call( _this, _this.__color.toOriginal() );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\t_this2.__saturation_field.appendChild( valueField );\r\n\t\t_this2.__selector.appendChild( _this2.__field_knob );\r\n\t\t_this2.__selector.appendChild( _this2.__saturation_field );\r\n\t\t_this2.__selector.appendChild( _this2.__hue_field );\r\n\t\t_this2.__hue_field.appendChild( _this2.__hue_knob );\r\n\t\t_this2.domElement.appendChild( _this2.__input );\r\n\t\t_this2.domElement.appendChild( _this2.__selector );\r\n\t\t_this2.updateDisplay();\r\n\t\tfunction setSV( e ) {\r\n\r\n\t\t\tif ( e.type.indexOf( 'touch' ) === - 1 ) {\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t}\r\n\t\t\tvar fieldRect = _this.__saturation_field.getBoundingClientRect();\r\n\t\t\tvar _ref = e.touches && e.touches[ 0 ] || e,\r\n\t\t\t\tclientX = _ref.clientX,\r\n\t\t\t\tclientY = _ref.clientY;\r\n\t\t\tvar s = ( clientX - fieldRect.left ) / ( fieldRect.right - fieldRect.left );\r\n\t\t\tvar v = 1 - ( clientY - fieldRect.top ) / ( fieldRect.bottom - fieldRect.top );\r\n\t\t\tif ( v > 1 ) {\r\n\r\n\t\t\t\tv = 1;\r\n\r\n\t\t\t} else if ( v < 0 ) {\r\n\r\n\t\t\t\tv = 0;\r\n\r\n\t\t\t}\r\n\t\t\tif ( s > 1 ) {\r\n\r\n\t\t\t\ts = 1;\r\n\r\n\t\t\t} else if ( s < 0 ) {\r\n\r\n\t\t\t\ts = 0;\r\n\r\n\t\t\t}\r\n\t\t\t_this.__color.v = v;\r\n\t\t\t_this.__color.s = s;\r\n\t\t\t_this.setValue( _this.__color.toOriginal() );\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\t\tfunction setH( e ) {\r\n\r\n\t\t\tif ( e.type.indexOf( 'touch' ) === - 1 ) {\r\n\r\n\t\t\t\te.preventDefault();\r\n\r\n\t\t\t}\r\n\t\t\tvar fieldRect = _this.__hue_field.getBoundingClientRect();\r\n\t\t\tvar _ref2 = e.touches && e.touches[ 0 ] || e,\r\n\t\t\t\tclientY = _ref2.clientY;\r\n\t\t\tvar h = 1 - ( clientY - fieldRect.top ) / ( fieldRect.bottom - fieldRect.top );\r\n\t\t\tif ( h > 1 ) {\r\n\r\n\t\t\t\th = 1;\r\n\r\n\t\t\t} else if ( h < 0 ) {\r\n\r\n\t\t\t\th = 0;\r\n\r\n\t\t\t}\r\n\t\t\t_this.__color.h = h * 360;\r\n\t\t\t_this.setValue( _this.__color.toOriginal() );\r\n\t\t\treturn false;\r\n\r\n\t\t}\r\n\t\treturn _this2;\r\n\r\n\t}\r\n\tcreateClass( ColorController, [ {\r\n\t\tkey: 'updateDisplay',\r\n\t\tvalue: function updateDisplay() {\r\n\r\n\t\t\tvar i = interpret( this.getValue() );\r\n\t\t\tif ( i !== false ) {\r\n\r\n\t\t\t\tvar mismatch = false;\r\n\t\t\t\tCommon.each( Color.COMPONENTS, function ( component ) {\r\n\r\n\t\t\t\t\tif ( ! Common.isUndefined( i[ component ] ) && ! Common.isUndefined( this.__color.__state[ component ] ) && i[ component ] !== this.__color.__state[ component ] ) {\r\n\r\n\t\t\t\t\t\tmismatch = true;\r\n\t\t\t\t\t\treturn {};\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}, this );\r\n\t\t\t\tif ( mismatch ) {\r\n\r\n\t\t\t\t\tCommon.extend( this.__color.__state, i );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tCommon.extend( this.__temp.__state, this.__color.__state );\r\n\t\t\tthis.__temp.a = 1;\r\n\t\t\tvar flip = this.__color.v < 0.5 || this.__color.s > 0.5 ? 255 : 0;\r\n\t\t\tvar _flip = 255 - flip;\r\n\t\t\tCommon.extend( this.__field_knob.style, {\r\n\t\t\t\tmarginLeft: 100 * this.__color.s - 7 + 'px',\r\n\t\t\t\tmarginTop: 100 * ( 1 - this.__color.v ) - 7 + 'px',\r\n\t\t\t\tbackgroundColor: this.__temp.toHexString(),\r\n\t\t\t\tborder: this.__field_knob_border + 'rgb(' + flip + ',' + flip + ',' + flip + ')'\r\n\t\t\t} );\r\n\t\t\tthis.__hue_knob.style.marginTop = ( 1 - this.__color.h / 360 ) * 100 + 'px';\r\n\t\t\tthis.__temp.s = 1;\r\n\t\t\tthis.__temp.v = 1;\r\n\t\t\tlinearGradient( this.__saturation_field, 'left', '#fff', this.__temp.toHexString() );\r\n\t\t\tthis.__input.value = this.__color.toString();\r\n\t\t\tCommon.extend( this.__input.style, {\r\n\t\t\t\tbackgroundColor: this.__color.toHexString(),\r\n\t\t\t\tcolor: 'rgb(' + flip + ',' + flip + ',' + flip + ')',\r\n\t\t\t\ttextShadow: this.__input_textShadow + 'rgba(' + _flip + ',' + _flip + ',' + _flip + ',.7)'\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn ColorController;\r\n\r\n}( Controller );\r\nvar vendors = [ '-moz-', '-o-', '-webkit-', '-ms-', '' ];\r\nfunction linearGradient( elem, x, a, b ) {\r\n\r\n\telem.style.background = '';\r\n\tCommon.each( vendors, function ( vendor ) {\r\n\r\n\t\telem.style.cssText += 'background: ' + vendor + 'linear-gradient(' + x + ', ' + a + ' 0%, ' + b + ' 100%); ';\r\n\r\n\t} );\r\n\r\n}\r\nfunction hueGradient( elem ) {\r\n\r\n\telem.style.background = '';\r\n\telem.style.cssText += 'background: -moz-linear-gradient(top,  #ff0000 0%, #ff00ff 17%, #0000ff 34%, #00ffff 50%, #00ff00 67%, #ffff00 84%, #ff0000 100%);';\r\n\telem.style.cssText += 'background: -webkit-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n\telem.style.cssText += 'background: -o-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n\telem.style.cssText += 'background: -ms-linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n\telem.style.cssText += 'background: linear-gradient(top,  #ff0000 0%,#ff00ff 17%,#0000ff 34%,#00ffff 50%,#00ff00 67%,#ffff00 84%,#ff0000 100%);';\r\n\r\n}\r\n\r\nvar css = {\r\n\tload: function load( url, indoc ) {\r\n\r\n\t\tvar doc = indoc || document;\r\n\t\tvar link = doc.createElement( 'link' );\r\n\t\tlink.type = 'text/css';\r\n\t\tlink.rel = 'stylesheet';\r\n\t\tlink.href = url;\r\n\t\tdoc.getElementsByTagName( 'head' )[ 0 ].appendChild( link );\r\n\r\n\t},\r\n\tinject: function inject( cssContent, indoc ) {\r\n\r\n\t\tvar doc = indoc || document;\r\n\t\tvar injected = document.createElement( 'style' );\r\n\t\tinjected.type = 'text/css';\r\n\t\tinjected.innerHTML = cssContent;\r\n\t\tvar head = doc.getElementsByTagName( 'head' )[ 0 ];\r\n\t\ttry {\r\n\r\n\t\t\thead.appendChild( injected );\r\n\r\n\t\t} catch ( e ) {\r\n\t\t}\r\n\r\n\t}\r\n};\r\n\r\nvar saveDialogContents = \"<div id=\\\"dg-save\\\" class=\\\"dg dialogue\\\">\\n\\n  Here's the new load parameter for your <code>GUI</code>'s constructor:\\n\\n  <textarea id=\\\"dg-new-constructor\\\"></textarea>\\n\\n  <div id=\\\"dg-save-locally\\\">\\n\\n    <input id=\\\"dg-local-storage\\\" type=\\\"checkbox\\\"/> Automatically save\\n    values to <code>localStorage</code> on exit.\\n\\n    <div id=\\\"dg-local-explain\\\">The values saved to <code>localStorage</code> will\\n      override those passed to <code>dat.GUI</code>'s constructor. This makes it\\n      easier to work incrementally, but <code>localStorage</code> is fragile,\\n      and your friends may not see the same values you do.\\n\\n    </div>\\n\\n  </div>\\n\\n</div>\";\r\n\r\nvar ControllerFactory = function ControllerFactory( object, property ) {\r\n\r\n\tvar initialValue = object[ property ];\r\n\tif ( Common.isArray( arguments[ 2 ] ) || Common.isObject( arguments[ 2 ] ) ) {\r\n\r\n\t\treturn new OptionController( object, property, arguments[ 2 ] );\r\n\r\n\t}\r\n\tif ( Common.isNumber( initialValue ) ) {\r\n\r\n\t\tif ( Common.isNumber( arguments[ 2 ] ) && Common.isNumber( arguments[ 3 ] ) ) {\r\n\r\n\t\t\tif ( Common.isNumber( arguments[ 4 ] ) ) {\r\n\r\n\t\t\t\treturn new NumberControllerSlider( object, property, arguments[ 2 ], arguments[ 3 ], arguments[ 4 ] );\r\n\r\n\t\t\t}\r\n\t\t\treturn new NumberControllerSlider( object, property, arguments[ 2 ], arguments[ 3 ] );\r\n\r\n\t\t}\r\n\t\tif ( Common.isNumber( arguments[ 4 ] ) ) {\r\n\r\n\t\t\treturn new NumberControllerBox( object, property, { min: arguments[ 2 ], max: arguments[ 3 ], step: arguments[ 4 ] } );\r\n\r\n\t\t}\r\n\t\treturn new NumberControllerBox( object, property, { min: arguments[ 2 ], max: arguments[ 3 ] } );\r\n\r\n\t}\r\n\tif ( Common.isString( initialValue ) ) {\r\n\r\n\t\treturn new StringController( object, property );\r\n\r\n\t}\r\n\tif ( Common.isFunction( initialValue ) ) {\r\n\r\n\t\treturn new FunctionController( object, property, '' );\r\n\r\n\t}\r\n\tif ( Common.isBoolean( initialValue ) ) {\r\n\r\n\t\treturn new BooleanController( object, property );\r\n\r\n\t}\r\n\treturn null;\r\n\r\n};\r\n\r\nfunction requestAnimationFrame( callback ) {\r\n\r\n\tsetTimeout( callback, 1000 / 60 );\r\n\r\n}\r\nvar requestAnimationFrame$1 = window.requestAnimationFrame || window.webkitRequestAnimationFrame || window.mozRequestAnimationFrame || window.oRequestAnimationFrame || window.msRequestAnimationFrame || requestAnimationFrame;\r\n\r\nvar CenteredDiv = function () {\r\n\r\n\tfunction CenteredDiv() {\r\n\r\n\t\tclassCallCheck( this, CenteredDiv );\r\n\t\tthis.backgroundElement = document.createElement( 'div' );\r\n\t\tCommon.extend( this.backgroundElement.style, {\r\n\t\t\tbackgroundColor: 'rgba(0,0,0,0.8)',\r\n\t\t\ttop: 0,\r\n\t\t\tleft: 0,\r\n\t\t\tdisplay: 'none',\r\n\t\t\tzIndex: '1000',\r\n\t\t\topacity: 0,\r\n\t\t\tWebkitTransition: 'opacity 0.2s linear',\r\n\t\t\ttransition: 'opacity 0.2s linear'\r\n\t\t} );\r\n\t\tdom.makeFullscreen( this.backgroundElement );\r\n\t\tthis.backgroundElement.style.position = 'fixed';\r\n\t\tthis.domElement = document.createElement( 'div' );\r\n\t\tCommon.extend( this.domElement.style, {\r\n\t\t\tposition: 'fixed',\r\n\t\t\tdisplay: 'none',\r\n\t\t\tzIndex: '1001',\r\n\t\t\topacity: 0,\r\n\t\t\tWebkitTransition: '-webkit-transform 0.2s ease-out, opacity 0.2s linear',\r\n\t\t\ttransition: 'transform 0.2s ease-out, opacity 0.2s linear'\r\n\t\t} );\r\n\t\tdocument.body.appendChild( this.backgroundElement );\r\n\t\tdocument.body.appendChild( this.domElement );\r\n\t\tvar _this = this;\r\n\t\tdom.bind( this.backgroundElement, 'click', function () {\r\n\r\n\t\t\t_this.hide();\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\tcreateClass( CenteredDiv, [ {\r\n\t\tkey: 'show',\r\n\t\tvalue: function show() {\r\n\r\n\t\t\tvar _this = this;\r\n\t\t\tthis.backgroundElement.style.display = 'block';\r\n\t\t\tthis.domElement.style.display = 'block';\r\n\t\t\tthis.domElement.style.opacity = 0;\r\n\t\t\tthis.domElement.style.webkitTransform = 'scale(1.1)';\r\n\t\t\tthis.layout();\r\n\t\t\tCommon.defer( function () {\r\n\r\n\t\t\t\t_this.backgroundElement.style.opacity = 1;\r\n\t\t\t\t_this.domElement.style.opacity = 1;\r\n\t\t\t\t_this.domElement.style.webkitTransform = 'scale(1)';\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'hide',\r\n\t\tvalue: function hide() {\r\n\r\n\t\t\tvar _this = this;\r\n\t\t\tvar hide = function hide() {\r\n\r\n\t\t\t\t_this.domElement.style.display = 'none';\r\n\t\t\t\t_this.backgroundElement.style.display = 'none';\r\n\t\t\t\tdom.unbind( _this.domElement, 'webkitTransitionEnd', hide );\r\n\t\t\t\tdom.unbind( _this.domElement, 'transitionend', hide );\r\n\t\t\t\tdom.unbind( _this.domElement, 'oTransitionEnd', hide );\r\n\r\n\t\t\t};\r\n\t\t\tdom.bind( this.domElement, 'webkitTransitionEnd', hide );\r\n\t\t\tdom.bind( this.domElement, 'transitionend', hide );\r\n\t\t\tdom.bind( this.domElement, 'oTransitionEnd', hide );\r\n\t\t\tthis.backgroundElement.style.opacity = 0;\r\n\t\t\tthis.domElement.style.opacity = 0;\r\n\t\t\tthis.domElement.style.webkitTransform = 'scale(1.1)';\r\n\r\n\t\t}\r\n\t}, {\r\n\t\tkey: 'layout',\r\n\t\tvalue: function layout() {\r\n\r\n\t\t\tthis.domElement.style.left = window.innerWidth / 2 - dom.getWidth( this.domElement ) / 2 + 'px';\r\n\t\t\tthis.domElement.style.top = window.innerHeight / 2 - dom.getHeight( this.domElement ) / 2 + 'px';\r\n\r\n\t\t}\r\n\t} ] );\r\n\treturn CenteredDiv;\r\n\r\n}();\r\n\r\nvar styleSheet = ___$insertStyle( \".dg ul{list-style:none;margin:0;padding:0;width:100%;clear:both}.dg.ac{position:fixed;top:0;left:0;right:0;height:0;z-index:0}.dg:not(.ac) .main{overflow:hidden}.dg.main{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear}.dg.main.taller-than-window{overflow-y:auto}.dg.main.taller-than-window .close-button{opacity:1;margin-top:-1px;border-top:1px solid #2c2c2c}.dg.main ul.closed .close-button{opacity:1 !important}.dg.main:hover .close-button,.dg.main .close-button.drag{opacity:1}.dg.main .close-button{-webkit-transition:opacity .1s linear;-o-transition:opacity .1s linear;-moz-transition:opacity .1s linear;transition:opacity .1s linear;border:0;line-height:19px;height:20px;cursor:pointer;text-align:center;background-color:#000}.dg.main .close-button.close-top{position:relative}.dg.main .close-button.close-bottom{position:absolute}.dg.main .close-button:hover{background-color:#111}.dg.a{float:right;margin-right:15px;overflow-y:visible}.dg.a.has-save>ul.close-top{margin-top:0}.dg.a.has-save>ul.close-bottom{margin-top:27px}.dg.a.has-save>ul.closed{margin-top:0}.dg.a .save-row{top:0;z-index:1002}.dg.a .save-row.close-top{position:relative}.dg.a .save-row.close-bottom{position:fixed}.dg li{-webkit-transition:height .1s ease-out;-o-transition:height .1s ease-out;-moz-transition:height .1s ease-out;transition:height .1s ease-out;-webkit-transition:overflow .1s linear;-o-transition:overflow .1s linear;-moz-transition:overflow .1s linear;transition:overflow .1s linear}.dg li:not(.folder){cursor:auto;height:27px;line-height:27px;padding:0 4px 0 5px}.dg li.folder{padding:0;border-left:4px solid rgba(0,0,0,0)}.dg li.title{cursor:pointer;margin-left:-4px}.dg .closed li:not(.title),.dg .closed ul li,.dg .closed ul li>*{height:0;overflow:hidden;border:0}.dg .cr{clear:both;padding-left:3px;height:27px;overflow:hidden}.dg .property-name{cursor:default;float:left;clear:left;width:40%;overflow:hidden;text-overflow:ellipsis}.dg .c{float:left;width:60%;position:relative}.dg .c input[type=text]{border:0;margin-top:4px;padding:3px;width:100%;float:right}.dg .has-slider input[type=text]{width:30%;margin-left:0}.dg .slider{float:left;width:66%;margin-left:-5px;margin-right:0;height:19px;margin-top:4px}.dg .slider-fg{height:100%}.dg .c input[type=checkbox]{margin-top:7px}.dg .c select{margin-top:5px}.dg .cr.function,.dg .cr.function .property-name,.dg .cr.function *,.dg .cr.boolean,.dg .cr.boolean *{cursor:pointer}.dg .cr.color{overflow:visible}.dg .selector{display:none;position:absolute;margin-left:-9px;margin-top:23px;z-index:10}.dg .c:hover .selector,.dg .selector.drag{display:block}.dg li.save-row{padding:0}.dg li.save-row .button{display:inline-block;padding:0px 6px}.dg.dialogue{background-color:#222;width:460px;padding:15px;font-size:13px;line-height:15px}#dg-new-constructor{padding:10px;color:#222;font-family:Monaco, monospace;font-size:10px;border:0;resize:none;box-shadow:inset 1px 1px 1px #888;word-wrap:break-word;margin:12px 0;display:block;width:440px;overflow-y:scroll;height:100px;position:relative}#dg-local-explain{display:none;font-size:11px;line-height:17px;border-radius:3px;background-color:#333;padding:8px;margin-top:10px}#dg-local-explain code{font-size:10px}#dat-gui-save-locally{display:none}.dg{color:#eee;font:11px 'Lucida Grande', sans-serif;text-shadow:0 -1px 0 #111}.dg.main::-webkit-scrollbar{width:5px;background:#1a1a1a}.dg.main::-webkit-scrollbar-corner{height:0;display:none}.dg.main::-webkit-scrollbar-thumb{border-radius:5px;background:#676767}.dg li:not(.folder){background:#1a1a1a;border-bottom:1px solid #2c2c2c}.dg li.save-row{line-height:25px;background:#dad5cb;border:0}.dg li.save-row select{margin-left:5px;width:108px}.dg li.save-row .button{margin-left:5px;margin-top:1px;border-radius:2px;font-size:9px;line-height:7px;padding:4px 4px 5px 4px;background:#c5bdad;color:#fff;text-shadow:0 1px 0 #b0a58f;box-shadow:0 -1px 0 #b0a58f;cursor:pointer}.dg li.save-row .button.gears{background:#c5bdad url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAsAAAANCAYAAAB/9ZQ7AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAQJJREFUeNpiYKAU/P//PwGIC/ApCABiBSAW+I8AClAcgKxQ4T9hoMAEUrxx2QSGN6+egDX+/vWT4e7N82AMYoPAx/evwWoYoSYbACX2s7KxCxzcsezDh3evFoDEBYTEEqycggWAzA9AuUSQQgeYPa9fPv6/YWm/Acx5IPb7ty/fw+QZblw67vDs8R0YHyQhgObx+yAJkBqmG5dPPDh1aPOGR/eugW0G4vlIoTIfyFcA+QekhhHJhPdQxbiAIguMBTQZrPD7108M6roWYDFQiIAAv6Aow/1bFwXgis+f2LUAynwoIaNcz8XNx3Dl7MEJUDGQpx9gtQ8YCueB+D26OECAAQDadt7e46D42QAAAABJRU5ErkJggg==) 2px 1px no-repeat;height:7px;width:8px}.dg li.save-row .button:hover{background-color:#bab19e;box-shadow:0 -1px 0 #b0a58f}.dg li.folder{border-bottom:0}.dg li.title{padding-left:16px;background:#000 url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlI+hKgFxoCgAOw==) 6px 10px no-repeat;cursor:pointer;border-bottom:1px solid rgba(255,255,255,0.2)}.dg .closed li.title{background-image:url(data:image/gif;base64,R0lGODlhBQAFAJEAAP////Pz8////////yH5BAEAAAIALAAAAAAFAAUAAAIIlGIWqMCbWAEAOw==)}.dg .cr.boolean{border-left:3px solid #806787}.dg .cr.color{border-left:3px solid}.dg .cr.function{border-left:3px solid #e61d5f}.dg .cr.number{border-left:3px solid #2FA1D6}.dg .cr.number input[type=text]{color:#2FA1D6}.dg .cr.string{border-left:3px solid #1ed36f}.dg .cr.string input[type=text]{color:#1ed36f}.dg .cr.function:hover,.dg .cr.boolean:hover{background:#111}.dg .c input[type=text]{background:#303030;outline:none}.dg .c input[type=text]:hover{background:#3c3c3c}.dg .c input[type=text]:focus{background:#494949;color:#fff}.dg .c .slider{background:#303030;cursor:ew-resize}.dg .c .slider-fg{background:#2FA1D6;max-width:100%}.dg .c .slider:hover{background:#3c3c3c}.dg .c .slider:hover .slider-fg{background:#44abda}\\n\" );\r\n\r\ncss.inject( styleSheet );\r\nvar CSS_NAMESPACE = 'dg';\r\nvar HIDE_KEY_CODE = 72;\r\nvar CLOSE_BUTTON_HEIGHT = 20;\r\nvar DEFAULT_DEFAULT_PRESET_NAME = 'Default';\r\nvar SUPPORTS_LOCAL_STORAGE = function () {\r\n\r\n\ttry {\r\n\r\n\t\treturn !! window.localStorage;\r\n\r\n\t} catch ( e ) {\r\n\r\n\t\treturn false;\r\n\r\n\t}\r\n\r\n}();\r\nvar SAVE_DIALOGUE = void 0;\r\nvar autoPlaceVirgin = true;\r\nvar autoPlaceContainer = void 0;\r\nvar hide = false;\r\nvar hideableGuis = [];\r\nvar GUI = function GUI( pars ) {\r\n\r\n\tvar _this = this;\r\n\tvar params = pars || {};\r\n\tthis.domElement = document.createElement( 'div' );\r\n\tthis.__ul = document.createElement( 'ul' );\r\n\tthis.domElement.appendChild( this.__ul );\r\n\tdom.addClass( this.domElement, CSS_NAMESPACE );\r\n\tthis.__folders = {};\r\n\tthis.__controllers = [];\r\n\tthis.__rememberedObjects = [];\r\n\tthis.__rememberedObjectIndecesToControllers = [];\r\n\tthis.__listening = [];\r\n\tparams = Common.defaults( params, {\r\n\t\tcloseOnTop: false,\r\n\t\tautoPlace: true,\r\n\t\twidth: GUI.DEFAULT_WIDTH\r\n\t} );\r\n\tparams = Common.defaults( params, {\r\n\t\tresizable: params.autoPlace,\r\n\t\thideable: params.autoPlace\r\n\t} );\r\n\tif ( ! Common.isUndefined( params.load ) ) {\r\n\r\n\t\tif ( params.preset ) {\r\n\r\n\t\t\tparams.load.preset = params.preset;\r\n\r\n\t\t}\r\n\r\n\t} else {\r\n\r\n\t\tparams.load = { preset: DEFAULT_DEFAULT_PRESET_NAME };\r\n\r\n\t}\r\n\tif ( Common.isUndefined( params.parent ) && params.hideable ) {\r\n\r\n\t\thideableGuis.push( this );\r\n\r\n\t}\r\n\tparams.resizable = Common.isUndefined( params.parent ) && params.resizable;\r\n\tif ( params.autoPlace && Common.isUndefined( params.scrollable ) ) {\r\n\r\n\t\tparams.scrollable = true;\r\n\r\n\t}\r\n\tvar useLocalStorage = SUPPORTS_LOCAL_STORAGE && localStorage.getItem( getLocalStorageHash( this, 'isLocal' ) ) === 'true';\r\n\tvar saveToLocalStorage = void 0;\r\n\tvar titleRow = void 0;\r\n\tObject.defineProperties( this,\r\n\t\t{\r\n\t\t\tparent: {\r\n\t\t\t\tget: function get$$1() {\r\n\r\n\t\t\t\t\treturn params.parent;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tscrollable: {\r\n\t\t\t\tget: function get$$1() {\r\n\r\n\t\t\t\t\treturn params.scrollable;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tautoPlace: {\r\n\t\t\t\tget: function get$$1() {\r\n\r\n\t\t\t\t\treturn params.autoPlace;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tcloseOnTop: {\r\n\t\t\t\tget: function get$$1() {\r\n\r\n\t\t\t\t\treturn params.closeOnTop;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tpreset: {\r\n\t\t\t\tget: function get$$1() {\r\n\r\n\t\t\t\t\tif ( _this.parent ) {\r\n\r\n\t\t\t\t\t\treturn _this.getRoot().preset;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn params.load.preset;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tset: function set$$1( v ) {\r\n\r\n\t\t\t\t\tif ( _this.parent ) {\r\n\r\n\t\t\t\t\t\t_this.getRoot().preset = v;\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tparams.load.preset = v;\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tsetPresetSelectIndex( this );\r\n\t\t\t\t\t_this.revert();\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\twidth: {\r\n\t\t\t\tget: function get$$1() {\r\n\r\n\t\t\t\t\treturn params.width;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tset: function set$$1( v ) {\r\n\r\n\t\t\t\t\tparams.width = v;\r\n\t\t\t\t\tsetWidth( _this, v );\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tname: {\r\n\t\t\t\tget: function get$$1() {\r\n\r\n\t\t\t\t\treturn params.name;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tset: function set$$1( v ) {\r\n\r\n\t\t\t\t\tparams.name = v;\r\n\t\t\t\t\tif ( titleRow ) {\r\n\r\n\t\t\t\t\t\ttitleRow.innerHTML = params.name;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tclosed: {\r\n\t\t\t\tget: function get$$1() {\r\n\r\n\t\t\t\t\treturn params.closed;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tset: function set$$1( v ) {\r\n\r\n\t\t\t\t\tparams.closed = v;\r\n\t\t\t\t\tif ( params.closed ) {\r\n\r\n\t\t\t\t\t\tdom.addClass( _this.__ul, GUI.CLASS_CLOSED );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\tdom.removeClass( _this.__ul, GUI.CLASS_CLOSED );\r\n\r\n\t\t\t\t\t}\r\n\t\t\t\t\tthis.onResize();\r\n\t\t\t\t\tif ( _this.__closeButton ) {\r\n\r\n\t\t\t\t\t\t_this.__closeButton.innerHTML = v ? GUI.TEXT_OPEN : GUI.TEXT_CLOSED;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tload: {\r\n\t\t\t\tget: function get$$1() {\r\n\r\n\t\t\t\t\treturn params.load;\r\n\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tuseLocalStorage: {\r\n\t\t\t\tget: function get$$1() {\r\n\r\n\t\t\t\t\treturn useLocalStorage;\r\n\r\n\t\t\t\t},\r\n\t\t\t\tset: function set$$1( bool ) {\r\n\r\n\t\t\t\t\tif ( SUPPORTS_LOCAL_STORAGE ) {\r\n\r\n\t\t\t\t\t\tuseLocalStorage = bool;\r\n\t\t\t\t\t\tif ( bool ) {\r\n\r\n\t\t\t\t\t\t\tdom.bind( window, 'unload', saveToLocalStorage );\r\n\r\n\t\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\t\tdom.unbind( window, 'unload', saveToLocalStorage );\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tlocalStorage.setItem( getLocalStorageHash( _this, 'isLocal' ), bool );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t} );\r\n\tif ( Common.isUndefined( params.parent ) ) {\r\n\r\n\t\tthis.closed = params.closed || false;\r\n\t\tdom.addClass( this.domElement, GUI.CLASS_MAIN );\r\n\t\tdom.makeSelectable( this.domElement, false );\r\n\t\tif ( SUPPORTS_LOCAL_STORAGE ) {\r\n\r\n\t\t\tif ( useLocalStorage ) {\r\n\r\n\t\t\t\t_this.useLocalStorage = true;\r\n\t\t\t\tvar savedGui = localStorage.getItem( getLocalStorageHash( this, 'gui' ) );\r\n\t\t\t\tif ( savedGui ) {\r\n\r\n\t\t\t\t\tparams.load = JSON.parse( savedGui );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\t\tthis.__closeButton = document.createElement( 'div' );\r\n\t\tthis.__closeButton.innerHTML = GUI.TEXT_CLOSED;\r\n\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_BUTTON );\r\n\t\tif ( params.closeOnTop ) {\r\n\r\n\t\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_TOP );\r\n\t\t\tthis.domElement.insertBefore( this.__closeButton, this.domElement.childNodes[ 0 ] );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tdom.addClass( this.__closeButton, GUI.CLASS_CLOSE_BOTTOM );\r\n\t\t\tthis.domElement.appendChild( this.__closeButton );\r\n\r\n\t\t}\r\n\t\tdom.bind( this.__closeButton, 'click', function () {\r\n\r\n\t\t\t_this.closed = ! _this.closed;\r\n\r\n\t\t} );\r\n\r\n\t} else {\r\n\r\n\t\tif ( params.closed === undefined ) {\r\n\r\n\t\t\tparams.closed = true;\r\n\r\n\t\t}\r\n\t\tvar titleRowName = document.createTextNode( params.name );\r\n\t\tdom.addClass( titleRowName, 'controller-name' );\r\n\t\ttitleRow = addRow( _this, titleRowName );\r\n\t\tvar onClickTitle = function onClickTitle( e ) {\r\n\r\n\t\t\te.preventDefault();\r\n\t\t\t_this.closed = ! _this.closed;\r\n\t\t\treturn false;\r\n\r\n\t\t};\r\n\t\tdom.addClass( this.__ul, GUI.CLASS_CLOSED );\r\n\t\tdom.addClass( titleRow, 'title' );\r\n\t\tdom.bind( titleRow, 'click', onClickTitle );\r\n\t\tif ( ! params.closed ) {\r\n\r\n\t\t\tthis.closed = false;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\tif ( params.autoPlace ) {\r\n\r\n\t\tif ( Common.isUndefined( params.parent ) ) {\r\n\r\n\t\t\tif ( autoPlaceVirgin ) {\r\n\r\n\t\t\t\tautoPlaceContainer = document.createElement( 'div' );\r\n\t\t\t\tdom.addClass( autoPlaceContainer, CSS_NAMESPACE );\r\n\t\t\t\tdom.addClass( autoPlaceContainer, GUI.CLASS_AUTO_PLACE_CONTAINER );\r\n\t\t\t\tdocument.body.appendChild( autoPlaceContainer );\r\n\t\t\t\tautoPlaceVirgin = false;\r\n\r\n\t\t\t}\r\n\t\t\tautoPlaceContainer.appendChild( this.domElement );\r\n\t\t\tdom.addClass( this.domElement, GUI.CLASS_AUTO_PLACE );\r\n\r\n\t\t}\r\n\t\tif ( ! this.parent ) {\r\n\r\n\t\t\tsetWidth( _this, params.width );\r\n\r\n\t\t}\r\n\r\n\t}\r\n\tthis.__resizeHandler = function () {\r\n\r\n\t\t_this.onResizeDebounced();\r\n\r\n\t};\r\n\tdom.bind( window, 'resize', this.__resizeHandler );\r\n\tdom.bind( this.__ul, 'webkitTransitionEnd', this.__resizeHandler );\r\n\tdom.bind( this.__ul, 'transitionend', this.__resizeHandler );\r\n\tdom.bind( this.__ul, 'oTransitionEnd', this.__resizeHandler );\r\n\tthis.onResize();\r\n\tif ( params.resizable ) {\r\n\r\n\t\taddResizeHandle( this );\r\n\r\n\t}\r\n\tsaveToLocalStorage = function saveToLocalStorage() {\r\n\r\n\t\tif ( SUPPORTS_LOCAL_STORAGE && localStorage.getItem( getLocalStorageHash( _this, 'isLocal' ) ) === 'true' ) {\r\n\r\n\t\t\tlocalStorage.setItem( getLocalStorageHash( _this, 'gui' ), JSON.stringify( _this.getSaveObject() ) );\r\n\r\n\t\t}\r\n\r\n\t};\r\n\tthis.saveToLocalStorageIfPossible = saveToLocalStorage;\r\n\tfunction resetWidth() {\r\n\r\n\t\tvar root = _this.getRoot();\r\n\t\troot.width += 1;\r\n\t\tCommon.defer( function () {\r\n\r\n\t\t\troot.width -= 1;\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\tif ( ! params.parent ) {\r\n\r\n\t\tresetWidth();\r\n\r\n\t}\r\n\r\n};\r\nGUI.toggleHide = function () {\r\n\r\n\thide = ! hide;\r\n\tCommon.each( hideableGuis, function ( gui ) {\r\n\r\n\t\tgui.domElement.style.display = hide ? 'none' : '';\r\n\r\n\t} );\r\n\r\n};\r\nGUI.CLASS_AUTO_PLACE = 'a';\r\nGUI.CLASS_AUTO_PLACE_CONTAINER = 'ac';\r\nGUI.CLASS_MAIN = 'main';\r\nGUI.CLASS_CONTROLLER_ROW = 'cr';\r\nGUI.CLASS_TOO_TALL = 'taller-than-window';\r\nGUI.CLASS_CLOSED = 'closed';\r\nGUI.CLASS_CLOSE_BUTTON = 'close-button';\r\nGUI.CLASS_CLOSE_TOP = 'close-top';\r\nGUI.CLASS_CLOSE_BOTTOM = 'close-bottom';\r\nGUI.CLASS_DRAG = 'drag';\r\nGUI.DEFAULT_WIDTH = 245;\r\nGUI.TEXT_CLOSED = 'Close Controls';\r\nGUI.TEXT_OPEN = 'Open Controls';\r\nGUI._keydownHandler = function ( e ) {\r\n\r\n\tif ( document.activeElement.type !== 'text' && ( e.which === HIDE_KEY_CODE || e.keyCode === HIDE_KEY_CODE ) ) {\r\n\r\n\t\tGUI.toggleHide();\r\n\r\n\t}\r\n\r\n};\r\ndom.bind( window, 'keydown', GUI._keydownHandler, false );\r\nCommon.extend( GUI.prototype,\r\n\t{\r\n\t\tadd: function add( object, property ) {\r\n\r\n\t\t\treturn _add( this, object, property, {\r\n\t\t\t\tfactoryArgs: Array.prototype.slice.call( arguments, 2 )\r\n\t\t\t} );\r\n\r\n\t\t},\r\n\t\taddColor: function addColor( object, property ) {\r\n\r\n\t\t\treturn _add( this, object, property, {\r\n\t\t\t\tcolor: true\r\n\t\t\t} );\r\n\r\n\t\t},\r\n\t\tremove: function remove( controller ) {\r\n\r\n\t\t\tthis.__ul.removeChild( controller.__li );\r\n\t\t\tthis.__controllers.splice( this.__controllers.indexOf( controller ), 1 );\r\n\t\t\tvar _this = this;\r\n\t\t\tCommon.defer( function () {\r\n\r\n\t\t\t\t_this.onResize();\r\n\r\n\t\t\t} );\r\n\r\n\t\t},\r\n\t\tdestroy: function destroy() {\r\n\r\n\t\t\tif ( this.parent ) {\r\n\r\n\t\t\t\tthrow new Error( 'Only the root GUI should be removed with .destroy(). ' + 'For subfolders, use gui.removeFolder(folder) instead.' );\r\n\r\n\t\t\t}\r\n\t\t\tif ( this.autoPlace ) {\r\n\r\n\t\t\t\tautoPlaceContainer.removeChild( this.domElement );\r\n\r\n\t\t\t}\r\n\t\t\tvar _this = this;\r\n\t\t\tCommon.each( this.__folders, function ( subfolder ) {\r\n\r\n\t\t\t\t_this.removeFolder( subfolder );\r\n\r\n\t\t\t} );\r\n\t\t\tdom.unbind( window, 'keydown', GUI._keydownHandler, false );\r\n\t\t\tremoveListeners( this );\r\n\r\n\t\t},\r\n\t\taddFolder: function addFolder( name ) {\r\n\r\n\t\t\tif ( this.__folders[ name ] !== undefined ) {\r\n\r\n\t\t\t\tthrow new Error( 'You already have a folder in this GUI by the' + ' name \"' + name + '\"' );\r\n\r\n\t\t\t}\r\n\t\t\tvar newGuiParams = { name: name, parent: this };\r\n\t\t\tnewGuiParams.autoPlace = this.autoPlace;\r\n\t\t\tif ( this.load &&\r\n    this.load.folders &&\r\n    this.load.folders[ name ] ) {\r\n\r\n\t\t\t\tnewGuiParams.closed = this.load.folders[ name ].closed;\r\n\t\t\t\tnewGuiParams.load = this.load.folders[ name ];\r\n\r\n\t\t\t}\r\n\t\t\tvar gui = new GUI( newGuiParams );\r\n\t\t\tthis.__folders[ name ] = gui;\r\n\t\t\tvar li = addRow( this, gui.domElement );\r\n\t\t\tdom.addClass( li, 'folder' );\r\n\t\t\treturn gui;\r\n\r\n\t\t},\r\n\t\tremoveFolder: function removeFolder( folder ) {\r\n\r\n\t\t\tthis.__ul.removeChild( folder.domElement.parentElement );\r\n\t\t\tdelete this.__folders[ folder.name ];\r\n\t\t\tif ( this.load &&\r\n    this.load.folders &&\r\n    this.load.folders[ folder.name ] ) {\r\n\r\n\t\t\t\tdelete this.load.folders[ folder.name ];\r\n\r\n\t\t\t}\r\n\t\t\tremoveListeners( folder );\r\n\t\t\tvar _this = this;\r\n\t\t\tCommon.each( folder.__folders, function ( subfolder ) {\r\n\r\n\t\t\t\tfolder.removeFolder( subfolder );\r\n\r\n\t\t\t} );\r\n\t\t\tCommon.defer( function () {\r\n\r\n\t\t\t\t_this.onResize();\r\n\r\n\t\t\t} );\r\n\r\n\t\t},\r\n\t\topen: function open() {\r\n\r\n\t\t\tthis.closed = false;\r\n\r\n\t\t},\r\n\t\tclose: function close() {\r\n\r\n\t\t\tthis.closed = true;\r\n\r\n\t\t},\r\n\t\thide: function hide() {\r\n\r\n\t\t\tthis.domElement.style.display = 'none';\r\n\r\n\t\t},\r\n\t\tshow: function show() {\r\n\r\n\t\t\tthis.domElement.style.display = '';\r\n\r\n\t\t},\r\n\t\tonResize: function onResize() {\r\n\r\n\t\t\tvar root = this.getRoot();\r\n\t\t\tif ( root.scrollable ) {\r\n\r\n\t\t\t\tvar top = dom.getOffset( root.__ul ).top;\r\n\t\t\t\tvar h = 0;\r\n\t\t\t\tCommon.each( root.__ul.childNodes, function ( node ) {\r\n\r\n\t\t\t\t\tif ( ! ( root.autoPlace && node === root.__save_row ) ) {\r\n\r\n\t\t\t\t\t\th += dom.getHeight( node );\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t} );\r\n\t\t\t\tif ( window.innerHeight - top - CLOSE_BUTTON_HEIGHT < h ) {\r\n\r\n\t\t\t\t\tdom.addClass( root.domElement, GUI.CLASS_TOO_TALL );\r\n\t\t\t\t\troot.__ul.style.height = window.innerHeight - top - CLOSE_BUTTON_HEIGHT + 'px';\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tdom.removeClass( root.domElement, GUI.CLASS_TOO_TALL );\r\n\t\t\t\t\troot.__ul.style.height = 'auto';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\t\t\tif ( root.__resize_handle ) {\r\n\r\n\t\t\t\tCommon.defer( function () {\r\n\r\n\t\t\t\t\troot.__resize_handle.style.height = root.__ul.offsetHeight + 'px';\r\n\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\t\t\tif ( root.__closeButton ) {\r\n\r\n\t\t\t\troot.__closeButton.style.width = root.width + 'px';\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tonResizeDebounced: Common.debounce( function () {\r\n\r\n\t\t\tthis.onResize();\r\n\r\n\t\t}, 50 ),\r\n\t\tremember: function remember() {\r\n\r\n\t\t\tif ( Common.isUndefined( SAVE_DIALOGUE ) ) {\r\n\r\n\t\t\t\tSAVE_DIALOGUE = new CenteredDiv();\r\n\t\t\t\tSAVE_DIALOGUE.domElement.innerHTML = saveDialogContents;\r\n\r\n\t\t\t}\r\n\t\t\tif ( this.parent ) {\r\n\r\n\t\t\t\tthrow new Error( 'You can only call remember on a top level GUI.' );\r\n\r\n\t\t\t}\r\n\t\t\tvar _this = this;\r\n\t\t\tCommon.each( Array.prototype.slice.call( arguments ), function ( object ) {\r\n\r\n\t\t\t\tif ( _this.__rememberedObjects.length === 0 ) {\r\n\r\n\t\t\t\t\taddSaveMenu( _this );\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( _this.__rememberedObjects.indexOf( object ) === - 1 ) {\r\n\r\n\t\t\t\t\t_this.__rememberedObjects.push( object );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t} );\r\n\t\t\tif ( this.autoPlace ) {\r\n\r\n\t\t\t\tsetWidth( this, this.width );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tgetRoot: function getRoot() {\r\n\r\n\t\t\tvar gui = this;\r\n\t\t\twhile ( gui.parent ) {\r\n\r\n\t\t\t\tgui = gui.parent;\r\n\r\n\t\t\t}\r\n\t\t\treturn gui;\r\n\r\n\t\t},\r\n\t\tgetSaveObject: function getSaveObject() {\r\n\r\n\t\t\tvar toReturn = this.load;\r\n\t\t\ttoReturn.closed = this.closed;\r\n\t\t\tif ( this.__rememberedObjects.length > 0 ) {\r\n\r\n\t\t\t\ttoReturn.preset = this.preset;\r\n\t\t\t\tif ( ! toReturn.remembered ) {\r\n\r\n\t\t\t\t\ttoReturn.remembered = {};\r\n\r\n\t\t\t\t}\r\n\t\t\t\ttoReturn.remembered[ this.preset ] = getCurrentPreset( this );\r\n\r\n\t\t\t}\r\n\t\t\ttoReturn.folders = {};\r\n\t\t\tCommon.each( this.__folders, function ( element, key ) {\r\n\r\n\t\t\t\ttoReturn.folders[ key ] = element.getSaveObject();\r\n\r\n\t\t\t} );\r\n\t\t\treturn toReturn;\r\n\r\n\t\t},\r\n\t\tsave: function save() {\r\n\r\n\t\t\tif ( ! this.load.remembered ) {\r\n\r\n\t\t\t\tthis.load.remembered = {};\r\n\r\n\t\t\t}\r\n\t\t\tthis.load.remembered[ this.preset ] = getCurrentPreset( this );\r\n\t\t\tmarkPresetModified( this, false );\r\n\t\t\tthis.saveToLocalStorageIfPossible();\r\n\r\n\t\t},\r\n\t\tsaveAs: function saveAs( presetName ) {\r\n\r\n\t\t\tif ( ! this.load.remembered ) {\r\n\r\n\t\t\t\tthis.load.remembered = {};\r\n\t\t\t\tthis.load.remembered[ DEFAULT_DEFAULT_PRESET_NAME ] = getCurrentPreset( this, true );\r\n\r\n\t\t\t}\r\n\t\t\tthis.load.remembered[ presetName ] = getCurrentPreset( this );\r\n\t\t\tthis.preset = presetName;\r\n\t\t\taddPresetOption( this, presetName, true );\r\n\t\t\tthis.saveToLocalStorageIfPossible();\r\n\r\n\t\t},\r\n\t\trevert: function revert( gui ) {\r\n\r\n\t\t\tCommon.each( this.__controllers, function ( controller ) {\r\n\r\n\t\t\t\tif ( ! this.getRoot().load.remembered ) {\r\n\r\n\t\t\t\t\tcontroller.setValue( controller.initialValue );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\trecallSavedValue( gui || this.getRoot(), controller );\r\n\r\n\t\t\t\t}\r\n\t\t\t\tif ( controller.__onFinishChange ) {\r\n\r\n\t\t\t\t\tcontroller.__onFinishChange.call( controller, controller.getValue() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}, this );\r\n\t\t\tCommon.each( this.__folders, function ( folder ) {\r\n\r\n\t\t\t\tfolder.revert( folder );\r\n\r\n\t\t\t} );\r\n\t\t\tif ( ! gui ) {\r\n\r\n\t\t\t\tmarkPresetModified( this.getRoot(), false );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tlisten: function listen( controller ) {\r\n\r\n\t\t\tvar init = this.__listening.length === 0;\r\n\t\t\tthis.__listening.push( controller );\r\n\t\t\tif ( init ) {\r\n\r\n\t\t\t\tupdateDisplays( this.__listening );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tupdateDisplay: function updateDisplay() {\r\n\r\n\t\t\tCommon.each( this.__controllers, function ( controller ) {\r\n\r\n\t\t\t\tcontroller.updateDisplay();\r\n\r\n\t\t\t} );\r\n\t\t\tCommon.each( this.__folders, function ( folder ) {\r\n\r\n\t\t\t\tfolder.updateDisplay();\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\t} );\r\nfunction addRow( gui, newDom, liBefore ) {\r\n\r\n\tvar li = document.createElement( 'li' );\r\n\tif ( newDom ) {\r\n\r\n\t\tli.appendChild( newDom );\r\n\r\n\t}\r\n\tif ( liBefore ) {\r\n\r\n\t\tgui.__ul.insertBefore( li, liBefore );\r\n\r\n\t} else {\r\n\r\n\t\tgui.__ul.appendChild( li );\r\n\r\n\t}\r\n\tgui.onResize();\r\n\treturn li;\r\n\r\n}\r\nfunction removeListeners( gui ) {\r\n\r\n\tdom.unbind( window, 'resize', gui.__resizeHandler );\r\n\tif ( gui.saveToLocalStorageIfPossible ) {\r\n\r\n\t\tdom.unbind( window, 'unload', gui.saveToLocalStorageIfPossible );\r\n\r\n\t}\r\n\r\n}\r\nfunction markPresetModified( gui, modified ) {\r\n\r\n\tvar opt = gui.__preset_select[ gui.__preset_select.selectedIndex ];\r\n\tif ( modified ) {\r\n\r\n\t\topt.innerHTML = opt.value + '*';\r\n\r\n\t} else {\r\n\r\n\t\topt.innerHTML = opt.value;\r\n\r\n\t}\r\n\r\n}\r\nfunction augmentController( gui, li, controller ) {\r\n\r\n\tcontroller.__li = li;\r\n\tcontroller.__gui = gui;\r\n\tCommon.extend( controller, {\r\n\t\toptions: function options( _options ) {\r\n\r\n\t\t\tif ( arguments.length > 1 ) {\r\n\r\n\t\t\t\tvar nextSibling = controller.__li.nextElementSibling;\r\n\t\t\t\tcontroller.remove();\r\n\t\t\t\treturn _add( gui, controller.object, controller.property, {\r\n\t\t\t\t\tbefore: nextSibling,\r\n\t\t\t\t\tfactoryArgs: [ Common.toArray( arguments ) ]\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\t\t\tif ( Common.isArray( _options ) || Common.isObject( _options ) ) {\r\n\r\n\t\t\t\tvar _nextSibling = controller.__li.nextElementSibling;\r\n\t\t\t\tcontroller.remove();\r\n\t\t\t\treturn _add( gui, controller.object, controller.property, {\r\n\t\t\t\t\tbefore: _nextSibling,\r\n\t\t\t\t\tfactoryArgs: [ _options ]\r\n\t\t\t\t} );\r\n\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tname: function name( _name ) {\r\n\r\n\t\t\tcontroller.__li.firstElementChild.firstElementChild.innerHTML = _name;\r\n\t\t\treturn controller;\r\n\r\n\t\t},\r\n\t\tlisten: function listen() {\r\n\r\n\t\t\tcontroller.__gui.listen( controller );\r\n\t\t\treturn controller;\r\n\r\n\t\t},\r\n\t\tremove: function remove() {\r\n\r\n\t\t\tcontroller.__gui.remove( controller );\r\n\t\t\treturn controller;\r\n\r\n\t\t}\r\n\t} );\r\n\tif ( controller instanceof NumberControllerSlider ) {\r\n\r\n\t\tvar box = new NumberControllerBox( controller.object, controller.property, { min: controller.__min, max: controller.__max, step: controller.__step } );\r\n\t\tCommon.each( [ 'updateDisplay', 'onChange', 'onFinishChange', 'step', 'min', 'max' ], function ( method ) {\r\n\r\n\t\t\tvar pc = controller[ method ];\r\n\t\t\tvar pb = box[ method ];\r\n\t\t\tcontroller[ method ] = box[ method ] = function () {\r\n\r\n\t\t\t\tvar args = Array.prototype.slice.call( arguments );\r\n\t\t\t\tpb.apply( box, args );\r\n\t\t\t\treturn pc.apply( controller, args );\r\n\r\n\t\t\t};\r\n\r\n\t\t} );\r\n\t\tdom.addClass( li, 'has-slider' );\r\n\t\tcontroller.domElement.insertBefore( box.domElement, controller.domElement.firstElementChild );\r\n\r\n\t} else if ( controller instanceof NumberControllerBox ) {\r\n\r\n\t\tvar r = function r( returned ) {\r\n\r\n\t\t\tif ( Common.isNumber( controller.__min ) && Common.isNumber( controller.__max ) ) {\r\n\r\n\t\t\t\tvar oldName = controller.__li.firstElementChild.firstElementChild.innerHTML;\r\n\t\t\t\tvar wasListening = controller.__gui.__listening.indexOf( controller ) > - 1;\r\n\t\t\t\tcontroller.remove();\r\n\t\t\t\tvar newController = _add( gui, controller.object, controller.property, {\r\n\t\t\t\t\tbefore: controller.__li.nextElementSibling,\r\n\t\t\t\t\tfactoryArgs: [ controller.__min, controller.__max, controller.__step ]\r\n\t\t\t\t} );\r\n\t\t\t\tnewController.name( oldName );\r\n\t\t\t\tif ( wasListening ) newController.listen();\r\n\t\t\t\treturn newController;\r\n\r\n\t\t\t}\r\n\t\t\treturn returned;\r\n\r\n\t\t};\r\n\t\tcontroller.min = Common.compose( r, controller.min );\r\n\t\tcontroller.max = Common.compose( r, controller.max );\r\n\r\n\t} else if ( controller instanceof BooleanController ) {\r\n\r\n\t\tdom.bind( li, 'click', function () {\r\n\r\n\t\t\tdom.fakeEvent( controller.__checkbox, 'click' );\r\n\r\n\t\t} );\r\n\t\tdom.bind( controller.__checkbox, 'click', function ( e ) {\r\n\r\n\t\t\te.stopPropagation();\r\n\r\n\t\t} );\r\n\r\n\t} else if ( controller instanceof FunctionController ) {\r\n\r\n\t\tdom.bind( li, 'click', function () {\r\n\r\n\t\t\tdom.fakeEvent( controller.__button, 'click' );\r\n\r\n\t\t} );\r\n\t\tdom.bind( li, 'mouseover', function () {\r\n\r\n\t\t\tdom.addClass( controller.__button, 'hover' );\r\n\r\n\t\t} );\r\n\t\tdom.bind( li, 'mouseout', function () {\r\n\r\n\t\t\tdom.removeClass( controller.__button, 'hover' );\r\n\r\n\t\t} );\r\n\r\n\t} else if ( controller instanceof ColorController ) {\r\n\r\n\t\tdom.addClass( li, 'color' );\r\n\t\tcontroller.updateDisplay = Common.compose( function ( val ) {\r\n\r\n\t\t\tli.style.borderLeftColor = controller.__color.toString();\r\n\t\t\treturn val;\r\n\r\n\t\t}, controller.updateDisplay );\r\n\t\tcontroller.updateDisplay();\r\n\r\n\t}\r\n\tcontroller.setValue = Common.compose( function ( val ) {\r\n\r\n\t\tif ( gui.getRoot().__preset_select && controller.isModified() ) {\r\n\r\n\t\t\tmarkPresetModified( gui.getRoot(), true );\r\n\r\n\t\t}\r\n\t\treturn val;\r\n\r\n\t}, controller.setValue );\r\n\r\n}\r\nfunction recallSavedValue( gui, controller ) {\r\n\r\n\tvar root = gui.getRoot();\r\n\tvar matchedIndex = root.__rememberedObjects.indexOf( controller.object );\r\n\tif ( matchedIndex !== - 1 ) {\r\n\r\n\t\tvar controllerMap = root.__rememberedObjectIndecesToControllers[ matchedIndex ];\r\n\t\tif ( controllerMap === undefined ) {\r\n\r\n\t\t\tcontrollerMap = {};\r\n\t\t\troot.__rememberedObjectIndecesToControllers[ matchedIndex ] = controllerMap;\r\n\r\n\t\t}\r\n\t\tcontrollerMap[ controller.property ] = controller;\r\n\t\tif ( root.load && root.load.remembered ) {\r\n\r\n\t\t\tvar presetMap = root.load.remembered;\r\n\t\t\tvar preset = void 0;\r\n\t\t\tif ( presetMap[ gui.preset ] ) {\r\n\r\n\t\t\t\tpreset = presetMap[ gui.preset ];\r\n\r\n\t\t\t} else if ( presetMap[ DEFAULT_DEFAULT_PRESET_NAME ] ) {\r\n\r\n\t\t\t\tpreset = presetMap[ DEFAULT_DEFAULT_PRESET_NAME ];\r\n\r\n\t\t\t} else {\r\n\r\n\t\t\t\treturn;\r\n\r\n\t\t\t}\r\n\t\t\tif ( preset[ matchedIndex ] && preset[ matchedIndex ][ controller.property ] !== undefined ) {\r\n\r\n\t\t\t\tvar value = preset[ matchedIndex ][ controller.property ];\r\n\t\t\t\tcontroller.initialValue = value;\r\n\t\t\t\tcontroller.setValue( value );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\nfunction _add( gui, object, property, params ) {\r\n\r\n\tif ( object[ property ] === undefined ) {\r\n\r\n\t\tthrow new Error( 'Object \"' + object + '\" has no property \"' + property + '\"' );\r\n\r\n\t}\r\n\tvar controller = void 0;\r\n\tif ( params.color ) {\r\n\r\n\t\tcontroller = new ColorController( object, property );\r\n\r\n\t} else {\r\n\r\n\t\tvar factoryArgs = [ object, property ].concat( params.factoryArgs );\r\n\t\tcontroller = ControllerFactory.apply( gui, factoryArgs );\r\n\r\n\t}\r\n\tif ( params.before instanceof Controller ) {\r\n\r\n\t\tparams.before = params.before.__li;\r\n\r\n\t}\r\n\trecallSavedValue( gui, controller );\r\n\tdom.addClass( controller.domElement, 'c' );\r\n\tvar name = document.createElement( 'span' );\r\n\tdom.addClass( name, 'property-name' );\r\n\tname.innerHTML = controller.property;\r\n\tvar container = document.createElement( 'div' );\r\n\tcontainer.appendChild( name );\r\n\tcontainer.appendChild( controller.domElement );\r\n\tvar li = addRow( gui, container, params.before );\r\n\tdom.addClass( li, GUI.CLASS_CONTROLLER_ROW );\r\n\tif ( controller instanceof ColorController ) {\r\n\r\n\t\tdom.addClass( li, 'color' );\r\n\r\n\t} else {\r\n\r\n\t\tdom.addClass( li, _typeof( controller.getValue() ) );\r\n\r\n\t}\r\n\taugmentController( gui, li, controller );\r\n\tgui.__controllers.push( controller );\r\n\treturn controller;\r\n\r\n}\r\nfunction getLocalStorageHash( gui, key ) {\r\n\r\n\treturn document.location.href + '.' + key;\r\n\r\n}\r\nfunction addPresetOption( gui, name, setSelected ) {\r\n\r\n\tvar opt = document.createElement( 'option' );\r\n\topt.innerHTML = name;\r\n\topt.value = name;\r\n\tgui.__preset_select.appendChild( opt );\r\n\tif ( setSelected ) {\r\n\r\n\t\tgui.__preset_select.selectedIndex = gui.__preset_select.length - 1;\r\n\r\n\t}\r\n\r\n}\r\nfunction showHideExplain( gui, explain ) {\r\n\r\n\texplain.style.display = gui.useLocalStorage ? 'block' : 'none';\r\n\r\n}\r\nfunction addSaveMenu( gui ) {\r\n\r\n\tvar div = gui.__save_row = document.createElement( 'li' );\r\n\tdom.addClass( gui.domElement, 'has-save' );\r\n\tgui.__ul.insertBefore( div, gui.__ul.firstChild );\r\n\tdom.addClass( div, 'save-row' );\r\n\tvar gears = document.createElement( 'span' );\r\n\tgears.innerHTML = '&nbsp;';\r\n\tdom.addClass( gears, 'button gears' );\r\n\tvar button = document.createElement( 'span' );\r\n\tbutton.innerHTML = 'Save';\r\n\tdom.addClass( button, 'button' );\r\n\tdom.addClass( button, 'save' );\r\n\tvar button2 = document.createElement( 'span' );\r\n\tbutton2.innerHTML = 'New';\r\n\tdom.addClass( button2, 'button' );\r\n\tdom.addClass( button2, 'save-as' );\r\n\tvar button3 = document.createElement( 'span' );\r\n\tbutton3.innerHTML = 'Revert';\r\n\tdom.addClass( button3, 'button' );\r\n\tdom.addClass( button3, 'revert' );\r\n\tvar select = gui.__preset_select = document.createElement( 'select' );\r\n\tif ( gui.load && gui.load.remembered ) {\r\n\r\n\t\tCommon.each( gui.load.remembered, function ( value, key ) {\r\n\r\n\t\t\taddPresetOption( gui, key, key === gui.preset );\r\n\r\n\t\t} );\r\n\r\n\t} else {\r\n\r\n\t\taddPresetOption( gui, DEFAULT_DEFAULT_PRESET_NAME, false );\r\n\r\n\t}\r\n\tdom.bind( select, 'change', function () {\r\n\r\n\t\tfor ( var index = 0; index < gui.__preset_select.length; index ++ ) {\r\n\r\n\t\t\tgui.__preset_select[ index ].innerHTML = gui.__preset_select[ index ].value;\r\n\r\n\t\t}\r\n\t\tgui.preset = this.value;\r\n\r\n\t} );\r\n\tdiv.appendChild( select );\r\n\tdiv.appendChild( gears );\r\n\tdiv.appendChild( button );\r\n\tdiv.appendChild( button2 );\r\n\tdiv.appendChild( button3 );\r\n\tif ( SUPPORTS_LOCAL_STORAGE ) {\r\n\r\n\t\tvar explain = document.getElementById( 'dg-local-explain' );\r\n\t\tvar localStorageCheckBox = document.getElementById( 'dg-local-storage' );\r\n\t\tvar saveLocally = document.getElementById( 'dg-save-locally' );\r\n\t\tsaveLocally.style.display = 'block';\r\n\t\tif ( localStorage.getItem( getLocalStorageHash( gui, 'isLocal' ) ) === 'true' ) {\r\n\r\n\t\t\tlocalStorageCheckBox.setAttribute( 'checked', 'checked' );\r\n\r\n\t\t}\r\n\t\tshowHideExplain( gui, explain );\r\n\t\tdom.bind( localStorageCheckBox, 'change', function () {\r\n\r\n\t\t\tgui.useLocalStorage = ! gui.useLocalStorage;\r\n\t\t\tshowHideExplain( gui, explain );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\tvar newConstructorTextArea = document.getElementById( 'dg-new-constructor' );\r\n\tdom.bind( newConstructorTextArea, 'keydown', function ( e ) {\r\n\r\n\t\tif ( e.metaKey && ( e.which === 67 || e.keyCode === 67 ) ) {\r\n\r\n\t\t\tSAVE_DIALOGUE.hide();\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\tdom.bind( gears, 'click', function () {\r\n\r\n\t\tnewConstructorTextArea.innerHTML = JSON.stringify( gui.getSaveObject(), undefined, 2 );\r\n\t\tSAVE_DIALOGUE.show();\r\n\t\tnewConstructorTextArea.focus();\r\n\t\tnewConstructorTextArea.select();\r\n\r\n\t} );\r\n\tdom.bind( button, 'click', function () {\r\n\r\n\t\tgui.save();\r\n\r\n\t} );\r\n\tdom.bind( button2, 'click', function () {\r\n\r\n\t\tvar presetName = prompt( 'Enter a new preset name.' );\r\n\t\tif ( presetName ) {\r\n\r\n\t\t\tgui.saveAs( presetName );\r\n\r\n\t\t}\r\n\r\n\t} );\r\n\tdom.bind( button3, 'click', function () {\r\n\r\n\t\tgui.revert();\r\n\r\n\t} );\r\n\r\n}\r\nfunction addResizeHandle( gui ) {\r\n\r\n\tvar pmouseX = void 0;\r\n\tgui.__resize_handle = document.createElement( 'div' );\r\n\tCommon.extend( gui.__resize_handle.style, {\r\n\t\twidth: '6px',\r\n\t\tmarginLeft: '-3px',\r\n\t\theight: '200px',\r\n\t\tcursor: 'ew-resize',\r\n\t\tposition: 'absolute'\r\n\t} );\r\n\tfunction drag( e ) {\r\n\r\n\t\te.preventDefault();\r\n\t\tgui.width += pmouseX - e.clientX;\r\n\t\tgui.onResize();\r\n\t\tpmouseX = e.clientX;\r\n\t\treturn false;\r\n\r\n\t}\r\n\tfunction dragStop() {\r\n\r\n\t\tdom.removeClass( gui.__closeButton, GUI.CLASS_DRAG );\r\n\t\tdom.unbind( window, 'mousemove', drag );\r\n\t\tdom.unbind( window, 'mouseup', dragStop );\r\n\r\n\t}\r\n\tfunction dragStart( e ) {\r\n\r\n\t\te.preventDefault();\r\n\t\tpmouseX = e.clientX;\r\n\t\tdom.addClass( gui.__closeButton, GUI.CLASS_DRAG );\r\n\t\tdom.bind( window, 'mousemove', drag );\r\n\t\tdom.bind( window, 'mouseup', dragStop );\r\n\t\treturn false;\r\n\r\n\t}\r\n\tdom.bind( gui.__resize_handle, 'mousedown', dragStart );\r\n\tdom.bind( gui.__closeButton, 'mousedown', dragStart );\r\n\tgui.domElement.insertBefore( gui.__resize_handle, gui.domElement.firstElementChild );\r\n\r\n}\r\nfunction setWidth( gui, w ) {\r\n\r\n\tgui.domElement.style.width = w + 'px';\r\n\tif ( gui.__save_row && gui.autoPlace ) {\r\n\r\n\t\tgui.__save_row.style.width = w + 'px';\r\n\r\n\t}\r\n\tif ( gui.__closeButton ) {\r\n\r\n\t\tgui.__closeButton.style.width = w + 'px';\r\n\r\n\t}\r\n\r\n}\r\nfunction getCurrentPreset( gui, useInitialValues ) {\r\n\r\n\tvar toReturn = {};\r\n\tCommon.each( gui.__rememberedObjects, function ( val, index ) {\r\n\r\n\t\tvar savedValues = {};\r\n\t\tvar controllerMap = gui.__rememberedObjectIndecesToControllers[ index ];\r\n\t\tCommon.each( controllerMap, function ( controller, property ) {\r\n\r\n\t\t\tsavedValues[ property ] = useInitialValues ? controller.initialValue : controller.getValue();\r\n\r\n\t\t} );\r\n\t\ttoReturn[ index ] = savedValues;\r\n\r\n\t} );\r\n\treturn toReturn;\r\n\r\n}\r\nfunction setPresetSelectIndex( gui ) {\r\n\r\n\tfor ( var index = 0; index < gui.__preset_select.length; index ++ ) {\r\n\r\n\t\tif ( gui.__preset_select[ index ].value === gui.preset ) {\r\n\r\n\t\t\tgui.__preset_select.selectedIndex = index;\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n}\r\nfunction updateDisplays( controllerArray ) {\r\n\r\n\tif ( controllerArray.length !== 0 ) {\r\n\r\n\t\trequestAnimationFrame$1.call( window, function () {\r\n\r\n\t\t\tupdateDisplays( controllerArray );\r\n\r\n\t\t} );\r\n\r\n\t}\r\n\tCommon.each( controllerArray, function ( c ) {\r\n\r\n\t\tc.updateDisplay();\r\n\r\n\t} );\r\n\r\n}\r\n\r\nvar color = {\r\n\tColor: Color,\r\n\tmath: ColorMath,\r\n\tinterpret: interpret\r\n};\r\nvar controllers = {\r\n\tController: Controller,\r\n\tBooleanController: BooleanController,\r\n\tOptionController: OptionController,\r\n\tStringController: StringController,\r\n\tNumberController: NumberController,\r\n\tNumberControllerBox: NumberControllerBox,\r\n\tNumberControllerSlider: NumberControllerSlider,\r\n\tFunctionController: FunctionController,\r\n\tColorController: ColorController\r\n};\r\nvar dom$1 = { dom: dom };\r\nvar gui = { GUI: GUI };\r\nvar GUI$1 = GUI;\r\nvar index = {\r\n\tcolor: color,\r\n\tcontrollers: controllers,\r\n\tdom: dom$1,\r\n\tgui: gui,\r\n\tGUI: GUI$1\r\n};\r\n\r\nexport { color, controllers, dom$1 as dom, gui, GUI$1 as GUI };\r\nexport default index;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/libs/dat.gui.module.js","<template>\r\n    <div class=\"webglAnimationCloth-container\">\r\n        <div id=\"info\">Simple Cloth Simulation<br/>\r\n\t\t\tVerlet integration with relaxed constraints<br/>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport * as THREE from 'three'\r\nimport { Cloth, Plane } from '@/utils/animationCloth.js'\r\nimport { GUI } from '@/components/jsm/libs/dat.gui.module.js'\r\nimport { OrbitControls } from '@/components/jsm/controls/OrbitControls.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            params: {\r\n\t\t\t\tenableWind: true,\r\n\t\t\t\tshowBall: false,\r\n\t\t\t\ttogglePins: this.togglePins\r\n            },\r\n            DAMPING: 0.03,\r\n            DRAG: null,\r\n\t\t\tMASS: 0.1,\r\n\t\t\trestDistance: 25,\r\n\t\t\txSegs: 10,\r\n\t\t\tySegs: 10,\r\n\t\t\tclothFunction: null,\r\n\t\t\tcloth: null,\r\n\t\t\tGRAVITY: 981 * 1.4,\r\n\t\t\tgravity: null,\r\n\t\t\tTIMESTEP: 18 / 1000,\r\n\t\t\tTIMESTEP_SQ: null,\r\n\t\t\tpins: [],\r\n\t\t\twindForce: null,\r\n\t\t\tballPosition: null,\r\n\t\t\tballSize: 60,\r\n            tmpForce: null,\r\n            pinsFormation: [],\r\n            diff: null,\r\n            clothGeometry: null,\r\n            sphere: null,\r\n            container: null,\r\n            stats: null,\r\n            camera: null,\r\n            scene: null,\r\n            renderer: null,\r\n            object: null,\r\n            il: null,\r\n            constraints: null\r\n        }\r\n    },\r\n    mounted() {\r\n        this.DRAG = 1 - this.DAMPING\r\n        this.clothFunction = Plane( this.restDistance * this.xSegs, this.restDistance * this.ySegs )\r\n        this.cloth = new Cloth( this.xSegs, this.ySegs, this.MASS, this.$THREE, this.restDistance, this.DRAG, this.clothFunction )\r\n        this.gravity = new this.$THREE.Vector3( 0, - this.GRAVITY, 0 ).multiplyScalar( this.MASS )\r\n        this.TIMESTEP_SQ = this.TIMESTEP * this.TIMESTEP\r\n        this.windForce = new this.$THREE.Vector3( 0, 0, 0 )\r\n        this.ballPosition = new this.$THREE.Vector3( 0, - 45, 0 )\r\n        this.tmpForce = new this.$THREE.Vector3()\r\n        this.diff = new this.$THREE.Vector3()\r\n        this.initPinsFormation()\r\n        this.init()\r\n        this.animate(0)\r\n    },\r\n    methods: {\r\n        init() {\r\n            this.container = document.createElement('div')\r\n\t\t\tdocument.getElementsByClassName('webglAnimationCloth-container')[0].appendChild(this.container)\r\n            // scene\r\n            this.scene = new this.$THREE.Scene()\r\n            this.scene.background = new this.$THREE.Color(0xcce0ff)\r\n            this.scene.fog = new this.$THREE.Fog(0xcce0ff, 500, 10000)\r\n            // camera\r\n            this.camera = new this.$THREE.PerspectiveCamera(30, window.innerWidth / window.innerHeight, 1, 10000)\r\n            this.camera.position.set(1000, 50, 1500)\r\n            // lights\r\n            this.scene.add(new this.$THREE.AmbientLight(0x666666))\r\n            const light = new this.$THREE.DirectionalLight(0xdfebff, 1)\r\n            light.position.set(50, 200, 100)\r\n            light.position.multiplyScalar(1.3)\r\n            light.castShadow = true\r\n            light.shadow.mapSize.width = 1024\r\n            light.shadow.mapSize.height = 1024\r\n            const d = 300\r\n            light.shadow.camera.left = - d\r\n            light.shadow.camera.right = d\r\n            light.shadow.camera.top = d\r\n            light.shadow.camera.bottom = - d\r\n            light.shadow.camera.far = 1000\r\n            this.scene.add(light)\r\n            // cloth material\r\n            const loader = new this.$THREE.TextureLoader()\r\n            const clothTexture = loader.load('static/textures/patterns/circuit_pattern.png')\r\n            clothTexture.anisotropy = 16\r\n            const clothMaterial = new this.$THREE.MeshLambertMaterial({\r\n                map: clothTexture,\r\n                side: this.$THREE.DoubleSide,\r\n                alphaTest: 0.5\r\n            })\r\n            // cloth geometry\r\n            this.clothGeometry = new this.$THREE.ParametricBufferGeometry(this.clothFunction, this.cloth.w, this.cloth.h)\r\n            // cloth mesh\r\n            this.object = new this.$THREE.Mesh(this.clothGeometry, clothMaterial)\r\n            this.object.position.set( 0, 0, 0 )\r\n            this.object.castShadow = true\r\n            this.scene.add(this.object)\r\n            this.object.customDepthMaterial = new this.$THREE.MeshDepthMaterial({\r\n                depthPacking: this.$THREE.RGBADepthPacking,\r\n                map: clothTexture,\r\n                alphaTest: 0.5\r\n            })\r\n            // sphere\r\n            const ballGeo = new this.$THREE.SphereBufferGeometry(this.ballSize, 32, 16)\r\n            const ballMaterial = new this.$THREE.MeshLambertMaterial()\r\n            this.sphere = new this.$THREE.Mesh( ballGeo, ballMaterial )\r\n            this.sphere.castShadow = true\r\n            this.sphere.receiveShadow = true\r\n            this.sphere.visible = false\r\n            this.scene.add( this.sphere )\r\n            // ground\r\n            const groundTexture = loader.load('static/textures/terrain/grasslight-big.jpg')\r\n            groundTexture.wrapS = groundTexture.wrapT = this.$THREE.RepeatWrapping\r\n            groundTexture.repeat.set(25, 25)\r\n            groundTexture.anisotropy = 16\r\n            groundTexture.encoding = this.$THREE.sRGBEncoding\r\n            const groundMaterial = new this.$THREE.MeshLambertMaterial({map: groundTexture})\r\n            let mesh = new this.$THREE.Mesh(new this.$THREE.PlaneBufferGeometry(20000, 20000), groundMaterial)\r\n            mesh.position.y = - 250\r\n            mesh.rotation.x = - Math.PI / 2\r\n            mesh.receiveShadow = true\r\n            this.scene.add(mesh)\r\n            // poles\r\n            const poleGeo = new this.$THREE.BoxBufferGeometry(5, 375, 5)\r\n            const poleMat = new this.$THREE.MeshLambertMaterial()\r\n            mesh = new this.$THREE.Mesh(poleGeo, poleMat)\r\n            mesh.position.x = - 125\r\n            mesh.position.y = - 62\r\n            mesh.receiveShadow = true\r\n            mesh.castShadow = true\r\n            this.scene.add( mesh )\r\n            mesh = new this.$THREE.Mesh(poleGeo, poleMat)\r\n            mesh.position.x = 125\r\n            mesh.position.y = - 62\r\n            mesh.receiveShadow = true\r\n            mesh.castShadow = true\r\n            this.scene.add(mesh)\r\n            mesh = new this.$THREE.Mesh(new this.$THREE.BoxBufferGeometry(255, 5, 5), poleMat)\r\n            mesh.position.y = - 250 + (750 / 2)\r\n            mesh.position.x = 0\r\n            mesh.receiveShadow = true\r\n            mesh.castShadow = true\r\n            this.scene.add(mesh)\r\n            const gg = new this.$THREE.BoxBufferGeometry(10, 10, 10)\r\n            mesh = new this.$THREE.Mesh(gg, poleMat)\r\n            mesh.position.y = - 250\r\n            mesh.position.x = 125\r\n            mesh.receiveShadow = true\r\n            mesh.castShadow = true\r\n            this.scene.add(mesh)\r\n            mesh = new this.$THREE.Mesh(gg, poleMat)\r\n            mesh.position.y = - 250\r\n            mesh.position.x = - 125\r\n            mesh.receiveShadow = true\r\n            mesh.castShadow = true\r\n            this.scene.add(mesh)\r\n            // renderer\r\n            this.renderer = new this.$THREE.WebGLRenderer({antialias: true})\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(window.innerWidth, window.innerHeight)\r\n            this.container.appendChild(this.renderer.domElement)\r\n            this.renderer.outputEncoding = this.$THREE.sRGBEncoding\r\n            this.renderer.shadowMap.enabled = true\r\n            // controls\r\n            const controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n            controls.maxPolarAngle = Math.PI * 0.5\r\n            controls.minDistance = 1000\r\n            controls.maxDistance = 5000\r\n            // performance monitor\r\n            this.stats = new this.$Stats()\r\n            this.container.appendChild( this.stats.dom )\r\n            //\r\n            window.addEventListener('resize', this.onWindowResize, false)\r\n            //\r\n            const gui = new GUI()\r\n            gui.add(this.params, 'enableWind').name('Enable wind')\r\n            gui.add(this.params, 'showBall').name('Show ball')\r\n            gui.add(this.params, 'togglePins').name('Toggle pins')\r\n            //\r\n            if (typeof TESTING !== 'undefined') {\r\n                for (var i = 0; i < 50; i ++) {\r\n                    this.simulate(500 - 10 * i)\r\n                }\r\n            }\r\n        },\r\n        animate(now) {\r\n            requestAnimationFrame(this.animate)\r\n            this.simulate(now)\r\n            this.render()\r\n            this.stats.update()\r\n        },\r\n        render() {\r\n            const p = this.cloth.particles\r\n            for (var i = 0, il = p.length; i < il; i ++) {\r\n                const v = p[i].position\r\n                this.clothGeometry.attributes.position.setXYZ(i, v.x, v.y, v.z)\r\n            }\r\n            this.clothGeometry.attributes.position.needsUpdate = true\r\n            this.clothGeometry.computeVertexNormals()\r\n            this.sphere.position.copy(this.ballPosition)\r\n            this.renderer.render(this.scene, this.camera)\r\n        },\r\n        onWindowResize() {\r\n            this.camera.aspect = window.innerWidth / window.innerHeight\r\n            this.camera.updateProjectionMatrix()\r\n            this.renderer.setSize(window.innerWidth, window.innerHeight)\r\n        },\r\n        initPinsFormation() {\r\n            this.pins = [6]\r\n\t\t\tthis.pinsFormation.push(this.pins)\r\n\t\t\tthis.pins = [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10]\r\n\t\t\tthis.pinsFormation.push(this.pins)\r\n\t\t\tthis.pins = [0]\r\n\t\t\tthis.pinsFormation.push(this.pins)\r\n\t\t\tthis.pins = [] // cut the rope ;)\r\n\t\t\tthis.pinsFormation.push(this.pins)\r\n\t\t\tthis.pins = [0, this.cloth.w] // classic 2 pins\r\n\t\t\tthis.pinsFormation.push(this.pins)\r\n\t\t\tthis.pins = this.pinsFormation[1]\r\n        },\r\n        togglePins() {\r\n            this.pins = this.pinsFormation[~ ~ (Math.random() * this.pinsFormation.length)]\r\n        },\r\n        satisfyConstraints(p1, p2, distance) {\r\n            this.diff.subVectors(p2.position, p1.position)\r\n            const currentDist = this.diff.length()\r\n            if (currentDist === 0) return // prevents division by 0\r\n            const correction = this.diff.multiplyScalar(1 - distance / currentDist)\r\n            const correctionHalf = correction.multiplyScalar(0.5)\r\n            p1.position.add(correctionHalf)\r\n            p2.position.sub(correctionHalf)\r\n        },\r\n        simulate(now) {\r\n            const windStrength = Math.cos(now / 7000) * 20 + 40\r\n            this.windForce.set( Math.sin(now / 2000), Math.cos(now / 3000), Math.sin(now / 1000) )\r\n            this.windForce.normalize()\r\n            this.windForce.multiplyScalar(windStrength)\r\n            // Aerodynamics forces\r\n            const particles = this.cloth.particles\r\n            var ill = this.il\r\n            if (this.params.enableWind) {\r\n                let indx\r\n                const normal = new this.$THREE.Vector3()\r\n                const indices = this.clothGeometry.index\r\n                const normals = this.clothGeometry.attributes.normal\r\n                for (var i = 0, ill = indices.count; i < ill; i += 3) {\r\n                    for (let j = 0; j < 3; j ++) {\r\n                        indx = indices.getX(i + j)\r\n                        normal.fromBufferAttribute(normals, indx)\r\n                        this.tmpForce.copy(normal).normalize().multiplyScalar(normal.dot(this.windForce))\r\n                        particles[indx].addForce(this.tmpForce)\r\n                    }\r\n                }\r\n            }\r\n            for (let i = 0, ill = particles.length; i < ill; i ++) {\r\n                const particle = particles[i]\r\n                particle.addForce(this.gravity)\r\n                particle.integrate(this.TIMESTEP_SQ)\r\n            }\r\n            // Start Constraints\r\n            this.constraints = this.cloth.constraints\r\n            this.il = this.constraints.length\r\n            var iil = this.il\r\n            for (let i = 0; i < iil; i ++) {\r\n                const constraint = this.constraints[i]\r\n                this.satisfyConstraints(constraint[0], constraint[1], constraint[2])\r\n            }\r\n            // Ball Constraints\r\n            this.ballPosition.z = - Math.sin(now / 600) * 90 //+ 40;\r\n            this.ballPosition.x = Math.cos(now / 400) * 70\r\n            if (this.params.showBall) {\r\n                this.sphere.visible = true\r\n                for (let i = 0, iil = particles.length; i < iil; i ++) {\r\n                    const particle = particles[i]\r\n                    const pos = particle.position\r\n                    this.diff.subVectors(pos, this.ballPosition)\r\n                    if (this.diff.length() < this.ballSize) {\r\n                        // collided\r\n                        this.diff.normalize().multiplyScalar(this.ballSize)\r\n                        pos.copy( this.ballPosition ).add(this.diff)\r\n                    }\r\n                }\r\n            } else {\r\n                this.sphere.visible = false\r\n            }\r\n            // Floor Constraints\r\n            for (var i = 0, iil = particles.length; i < iil; i ++) {\r\n                const particle = particles[i]\r\n                const pos = particle.position\r\n                if (pos.y < - 250) {\r\n                    pos.y =- 250\r\n                }\r\n            }\r\n            // Pin Constraints\r\n            for (var i = 0, iil = this.pins.length; i < iil; i ++) {\r\n                const xy = this.pins[i]\r\n                const p = particles[xy]\r\n                p.position.copy(p.original)\r\n                p.previous.copy(p.original)\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.webglAnimationCloth-container {\r\n    background-color: #cce0ff;\r\n    color: #000;\r\n}\r\na {\r\n    color: #080;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/animation/webglAnimationCloth.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"webglAnimationCloth-container\"},[_c('div',{attrs:{\"id\":\"info\"}},[_vm._v(\"Simple Cloth Simulation\"),_c('br'),_vm._v(\"\\n\\t\\t\\tVerlet integration with relaxed constraints\"),_c('br')])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-64aa5fb8\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/animation/webglAnimationCloth.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-64aa5fb8\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webglAnimationCloth.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglAnimationCloth.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglAnimationCloth.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-64aa5fb8\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webglAnimationCloth.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-64aa5fb8\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/animation/webglAnimationCloth.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}