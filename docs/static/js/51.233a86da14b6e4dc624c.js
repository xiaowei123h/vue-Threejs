webpackJsonp([51],{"6Rwp":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n("VNKA"),r={data:function(){return{container:null,stats:null,camera:null,cameraTarget:null,scene:null,renderer:null}},mounted:function(){this.init(),this.animate()},methods:{init:function(){var e=this;this.container=document.createElement("div"),document.getElementsByClassName("webglLoaderPly-container")[0].appendChild(this.container),this.camera=new this.$THREE.PerspectiveCamera(35,this.$webglInnerWidth/window.innerHeight,1,15),this.camera.position.set(3,.15,3),this.cameraTarget=new this.$THREE.Vector3(0,-.1,0),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(7496795),this.scene.fog=new this.$THREE.Fog(7496795,2,15);var t=new this.$THREE.Mesh(new this.$THREE.PlaneBufferGeometry(40,40),new this.$THREE.MeshPhongMaterial({color:10066329,specular:1052688}));t.rotation.x=-Math.PI/2,t.position.y=-.5,this.scene.add(t),t.receiveShadow=!0;var n=new a.a;n.load("static/models/ply/ascii/dolphins.ply",function(t){t.computeVertexNormals();var n=new e.$THREE.MeshStandardMaterial({color:22015,flatShading:!0}),a=new e.$THREE.Mesh(t,n);a.position.y=-.2,a.position.z=.3,a.rotation.x=-Math.PI/2,a.scale.multiplyScalar(.001),a.castShadow=!0,a.receiveShadow=!0,e.scene.add(a)}),n.load("static/models/ply/binary/Lucy100k.ply",function(t){t.computeVertexNormals();var n=new e.$THREE.MeshStandardMaterial({color:22015,flatShading:!0}),a=new e.$THREE.Mesh(t,n);a.position.x=-.2,a.position.y=-.02,a.position.z=-.2,a.scale.multiplyScalar(6e-4),a.castShadow=!0,a.receiveShadow=!0,e.scene.add(a)}),this.scene.add(new this.$THREE.HemisphereLight(4469555,1118498)),this.addShadowedLight(1,1,1,16777215,1.35),this.addShadowedLight(.5,1,-1,16755200,1),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.renderer.shadowMap.enabled=!0,this.container.appendChild(this.renderer.domElement),this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1)},addShadowedLight:function(e,t,n,a,r){var s=new this.$THREE.DirectionalLight(a,r);s.position.set(e,t,n),this.scene.add(s),s.castShadow=!0;s.shadow.camera.left=-1,s.shadow.camera.right=1,s.shadow.camera.top=1,s.shadow.camera.bottom=-1,s.shadow.camera.near=1,s.shadow.camera.far=4,s.shadow.mapSize.width=1024,s.shadow.mapSize.height=1024,s.shadow.bias=-.001},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){var e=5e-4*Date.now();this.camera.position.x=2.5*Math.sin(e),this.camera.position.z=2.5*Math.cos(e),this.camera.lookAt(this.cameraTarget),this.renderer.render(this.scene,this.camera)}}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoaderPly-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" -\n\t\t\tPLY loader test by "),t("a",{attrs:{href:"https://github.com/menway",target:"_blank",rel:"noopener"}},[this._v("Wei Meng")]),this._v("."),t("br"),this._v("\n\t\t\tImage from "),t("a",{attrs:{href:"http://people.sc.fsu.edu/~jburkardt/data/ply/ply.html"}},[this._v("John Burkardt")])])])}]};var i=n("VU/8")(r,s,!1,function(e){n("EEHw")},"data-v-3f2cdaee",null);t.default=i.exports},EEHw:function(e,t){},VNKA:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var a=n("6+nK"),r=function(e){a.Loader.call(this,e),this.propertyNameMapping={}};r.prototype=Object.assign(Object.create(a.Loader.prototype),{constructor:r,load:function(e,t,n,r){var s=this,i=new a.FileLoader(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.setRequestHeader(this.requestHeader),i.setWithCredentials(this.withCredentials),i.load(e,function(n){try{t(s.parse(n))}catch(t){r?r(t):console.error(t),s.manager.itemError(e)}},n,r)},setPropertyNameMapping:function(e){this.propertyNameMapping=e},parse:function(e){function t(e){var t="",n=0,a=/ply([\s\S]*)end_header\r?\n/.exec(e);null!==a&&(t=a[1],n=new Blob([a[0]]).size);var r,s,i,o,c,h,l={comments:[],elements:[],headerLength:n,objInfo:""},u=t.split("\n");for(var p=0;p<u.length;p++){var m=u[p];if(""!==(m=m.trim()))switch(s=(i=m.split(/\s+/)).shift(),m=i.join(" "),s){case"format":l.format=i[0],l.version=i[1];break;case"comment":l.comments.push(m);break;case"element":void 0!==r&&l.elements.push(r),(r={}).name=i[0],r.count=parseInt(i[1]),r.properties=[];break;case"property":r.properties.push((o=i,c=d.propertyNameMapping,h=void 0,"list"===(h={type:o[0]}).type?(h.name=o[3],h.countType=o[1],h.itemType=o[2]):h.name=o[1],h.name in c&&(h.name=c[h.name]),h));break;case"obj_info":l.objInfo=m;break;default:console.log("unhandled",s,i)}}return void 0!==r&&l.elements.push(r),l}function n(e,t){switch(t){case"char":case"uchar":case"short":case"ushort":case"int":case"uint":case"int8":case"uint8":case"int16":case"uint16":case"int32":case"uint32":return parseInt(e);case"float":case"double":case"float32":case"float64":return parseFloat(e)}}function r(e,t){for(var a=t.split(/\s+/),r={},s=0;s<e.length;s++)if("list"===e[s].type){for(var i=[],o=n(a.shift(),e[s].countType),c=0;c<o;c++)i.push(n(a.shift(),e[s].itemType));r[e[s].name]=i}else r[e[s].name]=n(a.shift(),e[s].type);return r}function s(e,t){var n,a={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},s="";null!==(n=/end_header\s([\s\S]*)$/.exec(e))&&(s=n[1]);for(var c=s.split("\n"),h=0,l=0,d=0;d<c.length;d++){var u=c[d];if(""!==(u=u.trim())){l>=t.elements[h].count&&(h++,l=0);var p=r(t.elements[h].properties,u);o(a,t.elements[h].name,p),l++}}return i(a)}function i(e){var t=new a.BufferGeometry;return e.indices.length>0&&t.setIndex(e.indices),t.setAttribute("position",new a.Float32BufferAttribute(e.vertices,3)),e.normals.length>0&&t.setAttribute("normal",new a.Float32BufferAttribute(e.normals,3)),e.uvs.length>0&&t.setAttribute("uv",new a.Float32BufferAttribute(e.uvs,2)),e.colors.length>0&&t.setAttribute("color",new a.Float32BufferAttribute(e.colors,3)),e.faceVertexUvs.length>0&&(t=t.toNonIndexed()).setAttribute("uv",new a.Float32BufferAttribute(e.faceVertexUvs,2)),t.computeBoundingSphere(),t}function o(e,t,n){if("vertex"===t)e.vertices.push(n.x,n.y,n.z),"nx"in n&&"ny"in n&&"nz"in n&&e.normals.push(n.nx,n.ny,n.nz),"s"in n&&"t"in n&&e.uvs.push(n.s,n.t),"red"in n&&"green"in n&&"blue"in n&&e.colors.push(n.red/255,n.green/255,n.blue/255);else if("face"===t){var a=n.vertex_indices||n.vertex_index,r=n.texcoord;3===a.length?(e.indices.push(a[0],a[1],a[2]),r&&6===r.length&&(e.faceVertexUvs.push(r[0],r[1]),e.faceVertexUvs.push(r[2],r[3]),e.faceVertexUvs.push(r[4],r[5]))):4===a.length&&(e.indices.push(a[0],a[1],a[3]),e.indices.push(a[1],a[2],a[3]))}}function c(e,t,n,a){switch(n){case"int8":case"char":return[e.getInt8(t),1];case"uint8":case"uchar":return[e.getUint8(t),1];case"int16":case"short":return[e.getInt16(t,a),2];case"uint16":case"ushort":return[e.getUint16(t,a),2];case"int32":case"int":return[e.getInt32(t,a),4];case"uint32":case"uint":return[e.getUint32(t,a),4];case"float32":case"float":return[e.getFloat32(t,a),4];case"float64":case"double":return[e.getFloat64(t,a),8]}}function h(e,t,n,a){for(var r,s={},i=0,o=0;o<n.length;o++)if("list"===n[o].type){var h=[],l=(r=c(e,t+i,n[o].countType,a))[0];i+=r[1];for(var d=0;d<l;d++)r=c(e,t+i,n[o].itemType,a),h.push(r[0]),i+=r[1];s[n[o].name]=h}else r=c(e,t+i,n[o].type,a),s[n[o].name]=r[0],i+=r[1];return[s,i]}var l,d=this;if(e instanceof ArrayBuffer){var u=a.LoaderUtils.decodeText(new Uint8Array(e)),p=t(u);l="ascii"===p.format?s(u,p):function(e,t){for(var n,a={indices:[],vertices:[],normals:[],uvs:[],faceVertexUvs:[],colors:[]},r="binary_little_endian"===t.format,s=new DataView(e,t.headerLength),c=0,l=0;l<t.elements.length;l++)for(var d=0;d<t.elements[l].count;d++){c+=(n=h(s,c,t.elements[l].properties,r))[1];var u=n[0];o(a,t.elements[l].name,u)}return i(a)}(e,p)}else l=s(e,t(e));return l}})}});
//# sourceMappingURL=51.233a86da14b6e4dc624c.js.map