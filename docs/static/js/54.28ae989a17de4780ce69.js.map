{"version":3,"sources":["webpack:///./src/components/jsm/libs/gunzip.module.min.js","webpack:///./src/components/jsm/misc/VolumeSlice.js","webpack:///./src/components/jsm/misc/Volume.js","webpack:///./src/components/jsm/loaders/NRRDLoader.js","webpack:///./src/components/jsm/shaders/VolumeShader.js","webpack:///src/views/materials/webgl2MaterialsTexture3d.vue","webpack:///./src/views/materials/webgl2MaterialsTexture3d.vue?a635","webpack:///./src/views/materials/webgl2MaterialsTexture3d.vue"],"names":["n","e","q","aa","r","c","a","d","split","b","execScript","length","shift","v","u","Uint8Array","Uint16Array","Uint32Array","DataView","Array","w","x","f","z","A","B","D","g","k","m","p","t","h","l","y","Number","POSITIVE_INFINITY","prototype","getName","this","name","getData","data","H","I","F","E","push","ca","G","i","j","input","o","index","bufferSize","bufferType","resize","Error","J","set","subarray","da","ea","fa","W","ia","K","L","N","O","P","Q","R","ga","ha","U","V","Y","ja","X","Z","call","$","s","slice","buffer","Date","String","fromCharCode","join","C","toString","M","S","T","concat","apply","Zlib","VolumeSlice","volume","axis","Object","defineProperty","get","value","geometryNeedsUpdate","canvas","document","createElement","canvasBuffer","updateGeometry","canvasMap","Texture","minFilter","LinearFilter","wrapS","wrapT","ClampToEdgeWrapping","material","MeshBasicMaterial","map","side","DoubleSide","transparent","mesh","Mesh","geometry","matrixAutoUpdate","repaint","constructor","iLength","jLength","sliceAccess","ctx","ctxBuffer","imgData","getImageData","volumeData","upperThreshold","lowerThreshold","windowLow","windowHigh","pixelCount","dataType","label","colorMap","color","alpha","Math","floor","putImageData","drawImage","width","height","needsUpdate","extracted","extractPerpendicularPlane","matrix","planeWidth","planeHeight","getContext","dispose","PlaneBufferGeometry","identity","applyMatrix4","Volume","xLength","yLength","zLength","type","arrayBuffer","arguments","Int8Array","Int16Array","Int32Array","Float32Array","Float64Array","spacing","offset","Matrix3","Infinity","sliceList","forEach","access","reverseAccess","functionToMap","context","RASIndex","firstSpacing","secondSpacing","positionOffset","IJKIndex","planeMatrix","Matrix4","axisInIJK","Vector3","firstDirection","secondDirection","dimensions","multiply","makeRotationY","PI","RASDimensions","setPosition","makeRotationX","inverseMatrix","normalize","argVar","abs","dot","round","base","iDirection","find","jDirection","kDirection","si","sj","sk","accessI","accessJ","accessK","extractSlice","repaintAllSlices","computeMinMax","min","max","datasize","isNaN","__webpack_require__","__webpack_exports__","NRRDLoader_NRRDLoader","NRRDLoader","manager","Loader","assign","create","load","url","onLoad","onProgress","onError","scope","loader","FileLoader","setPath","path","setResponseType","setRequestHeader","requestHeader","setWithCredentials","withCredentials","parse","console","error","itemError","_data","_dataPointer","_nativeLittleEndian","_littleEndian","headerObject","_bytes","chunks","undefined","_chunkSize","_array_type","array","chunkSize","u8","byteOffset","byteLength","tmp","flipEndianness","scan","_length","_header","_data_start","parseChars","header","field","fn","lines","_i","_len","match","isNrrd","trim","fieldFunctions","encoding","vectors","spacings","multiplyScalar","parseHeader","inflate","Gunzip","decompress","start","end","number","lengthOfTheResult","sizes","reduce","previous","current","result","__array","resultIndex","parsingFunction","parseInt","parseFloat","parseDataAsText","_copy","min_max","spacingX","spacingY","spacingZ","_spaceX","_spaceY","space","copy","invert","toArray","output","endian","dimension","dim","_ref","_results","space origin","space_origin","space directions","parts","_j","_len2","_results2","VolumeRenderShader1","uniforms","u_size","u_renderstyle","u_renderthreshold","u_clim","Vector2","u_data","u_cmdata","vertexShader","fragmentShader","webgl2MaterialsTexture3d","renderer","scene","camera","controls","volconfig","cmtextures","gui","mounted","WebGL","isWebGL2Available","getElementsByClassName","appendChild","getWebGL2ErrorMessage","init","beforeDestroy","destroy","methods","_this","$THREE","Scene","WebGLRenderer","setPixelRatio","window","devicePixelRatio","setSize","$webglInnerWidth","innerHeight","domElement","aspect","OrthographicCamera","position","up","OrbitControls","addEventListener","render","target","minZoom","maxZoom","update","clim1","clim2","renderstyle","isothreshold","colormap","dat_gui_module","add","onChange","updateUniforms","gray","viridis","mip","iso","texture","DataTexture3D","format","RedFormat","FloatType","magFilter","unpackAlignment","TextureLoader","shader","UniformsUtils","clone","ShaderMaterial","BackSide","BoxBufferGeometry","translate","onWindowResize","innerWidth","frustumHeight","top","bottom","left","right","updateProjectionMatrix","materials_webgl2MaterialsTexture3d","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","id","href","rel","_v","Component","normalizeComponent","ssrContext"],"mappings":";yFAAyF,SAASA,EAAEC,GAAG,MAAMA,EAAG,IAAIC,OAAE,EAAOC,KAAM,SAASC,EAAEH,EAAEI,GAAG,IAAqFC,EAAjFC,EAAEN,EAAEO,MAAM,KAAKC,EAAEN,IAAKI,EAAE,KAAKE,IAAIA,EAAEC,YAAYD,EAAEC,WAAW,OAAOH,EAAE,IAAI,KAAUA,EAAEI,SAASL,EAAEC,EAAEK,UAAWL,EAAEI,QAAQN,IAAIH,EAASO,EAAEA,EAAEH,GAAGG,EAAEH,GAAGG,EAAEH,MAArBG,EAAEH,GAAGD,EAAuB,IAA2KQ,EAAvKC,EAAE,oBAAqBC,YAAY,oBAAqBC,aAAa,oBAAqBC,aAAa,oBAAqBC,SAA6C,IAApC,IAAKJ,EAAEC,WAAWI,OAAO,KAAeN,EAAE,EAAE,IAAIA,IAAIA,EAAE,IAAI,IAAaO,GAATA,EAAEP,KAAa,EAAEO,EAAEA,KAAK,EAAE,EAAK,SAASC,EAAEpB,EAAEI,EAAEE,GAAG,IAAIE,EAAEH,EAAE,iBAAkBD,EAAEA,EAAEA,EAAE,EAAEiB,EAAE,iBAAkBf,EAAEA,EAAEN,EAAEU,OAAY,IAALF,GAAG,EAAMH,EAAI,EAAFgB,EAAIhB,MAAMD,EAAEI,EAAEA,IAAI,EAAEc,EAAW,KAARd,EAAER,EAAEI,KAAS,IAAIC,EAAEgB,GAAG,EAAEhB,IAAID,GAAG,EAAsLI,GAA1BA,GAA1BA,GAA1BA,GAA1BA,GAA1BA,GAA1BA,GAAxBA,EAAEA,IAAI,EAAEc,EAAW,KAARd,EAAER,EAAEI,QAAe,EAAEkB,EAAa,KAAVd,EAAER,EAAEI,EAAE,QAAe,EAAEkB,EAAa,KAAVd,EAAER,EAAEI,EAAE,QAAe,EAAEkB,EAAa,KAAVd,EAAER,EAAEI,EAAE,QAAe,EAAEkB,EAAa,KAAVd,EAAER,EAAEI,EAAE,QAAe,EAAEkB,EAAa,KAAVd,EAAER,EAAEI,EAAE,QAAe,EAAEkB,EAAa,KAAVd,EAAER,EAAEI,EAAE,QAAe,EAAEkB,EAAa,KAAVd,EAAER,EAAEI,EAAE,KAAS,OAAS,WAAFI,KAAgB,EACn5B,IAAIe,GAAG,EAAE,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAC9e,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,WAAW,SAAS,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAC9e,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,WAAW,SAAS,WAAW,WAAW,WAAW,SAAS,WAAW,WAAW,WAAW,UAAU,WAAW,WAC9e,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAC/e,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,WAAW,SAAS,WAAW,WAAW,WAAW,SAAS,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,WAAW,WAAW,WAAW,WAC9e,SAAS,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU,WAAW,WAAW,WAAW,UAAU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","file":"static/js/54.28ae989a17de4780ce69.js","sourcesContent":["/** @license zlib.js 2012 - imaya [ https://github.com/imaya/zlib.js ] The MIT License */function n(e){throw e;}var q=void 0,aa={};function r(e,c){var d=e.split(\".\"),b=aa;!(d[0]in b)&&b.execScript&&b.execScript(\"var \"+d[0]);for(var a;d.length&&(a=d.shift());)!d.length&&c!==q?b[a]=c:b=b[a]?b[a]:b[a]={}};var u=\"undefined\"!==typeof Uint8Array&&\"undefined\"!==typeof Uint16Array&&\"undefined\"!==typeof Uint32Array&&\"undefined\"!==typeof DataView;new (u?Uint8Array:Array)(256);var v;for(v=0;256>v;++v)for(var w=v,ba=7,w=w>>>1;w;w>>>=1)--ba;function x(e,c,d){var b,a=\"number\"===typeof c?c:c=0,f=\"number\"===typeof d?d:e.length;b=-1;for(a=f&7;a--;++c)b=b>>>8^z[(b^e[c])&255];for(a=f>>3;a--;c+=8)b=b>>>8^z[(b^e[c])&255],b=b>>>8^z[(b^e[c+1])&255],b=b>>>8^z[(b^e[c+2])&255],b=b>>>8^z[(b^e[c+3])&255],b=b>>>8^z[(b^e[c+4])&255],b=b>>>8^z[(b^e[c+5])&255],b=b>>>8^z[(b^e[c+6])&255],b=b>>>8^z[(b^e[c+7])&255];return(b^4294967295)>>>0}\r\nvar A=[0,1996959894,3993919788,2567524794,124634137,1886057615,3915621685,2657392035,249268274,2044508324,3772115230,2547177864,162941995,2125561021,3887607047,2428444049,498536548,1789927666,4089016648,2227061214,450548861,1843258603,4107580753,2211677639,325883990,1684777152,4251122042,2321926636,335633487,1661365465,4195302755,2366115317,997073096,1281953886,3579855332,2724688242,1006888145,1258607687,3524101629,2768942443,901097722,1119000684,3686517206,2898065728,853044451,1172266101,3705015759,\r\n2882616665,651767980,1373503546,3369554304,3218104598,565507253,1454621731,3485111705,3099436303,671266974,1594198024,3322730930,2970347812,795835527,1483230225,3244367275,3060149565,1994146192,31158534,2563907772,4023717930,1907459465,112637215,2680153253,3904427059,2013776290,251722036,2517215374,3775830040,2137656763,141376813,2439277719,3865271297,1802195444,476864866,2238001368,4066508878,1812370925,453092731,2181625025,4111451223,1706088902,314042704,2344532202,4240017532,1658658271,366619977,\r\n2362670323,4224994405,1303535960,984961486,2747007092,3569037538,1256170817,1037604311,2765210733,3554079995,1131014506,879679996,2909243462,3663771856,1141124467,855842277,2852801631,3708648649,1342533948,654459306,3188396048,3373015174,1466479909,544179635,3110523913,3462522015,1591671054,702138776,2966460450,3352799412,1504918807,783551873,3082640443,3233442989,3988292384,2596254646,62317068,1957810842,3939845945,2647816111,81470997,1943803523,3814918930,2489596804,225274430,2053790376,3826175755,\r\n2466906013,167816743,2097651377,4027552580,2265490386,503444072,1762050814,4150417245,2154129355,426522225,1852507879,4275313526,2312317920,282753626,1742555852,4189708143,2394877945,397917763,1622183637,3604390888,2714866558,953729732,1340076626,3518719985,2797360999,1068828381,1219638859,3624741850,2936675148,906185462,1090812512,3747672003,2825379669,829329135,1181335161,3412177804,3160834842,628085408,1382605366,3423369109,3138078467,570562233,1426400815,3317316542,2998733608,733239954,1555261956,\r\n3268935591,3050360625,752459403,1541320221,2607071920,3965973030,1969922972,40735498,2617837225,3943577151,1913087877,83908371,2512341634,3803740692,2075208622,213261112,2463272603,3855990285,2094854071,198958881,2262029012,4057260610,1759359992,534414190,2176718541,4139329115,1873836001,414664567,2282248934,4279200368,1711684554,285281116,2405801727,4167216745,1634467795,376229701,2685067896,3608007406,1308918612,956543938,2808555105,3495958263,1231636301,1047427035,2932959818,3654703836,1088359270,\r\n936918E3,2847714899,3736837829,1202900863,817233897,3183342108,3401237130,1404277552,615818150,3134207493,3453421203,1423857449,601450431,3009837614,3294710456,1567103746,711928724,3020668471,3272380065,1510334235,755167117],z=u?new Uint32Array(A):A;function B(){}B.prototype.getName=function(){return this.name};B.prototype.getData=function(){return this.data};B.prototype.H=function(){return this.I};r(\"Zlib.GunzipMember\",B);r(\"Zlib.GunzipMember.prototype.getName\",B.prototype.getName);r(\"Zlib.GunzipMember.prototype.getData\",B.prototype.getData);r(\"Zlib.GunzipMember.prototype.getMtime\",B.prototype.H);function D(e){var c=e.length,d=0,b=Number.POSITIVE_INFINITY,a,f,g,k,m,p,t,h,l,y;for(h=0;h<c;++h)e[h]>d&&(d=e[h]),e[h]<b&&(b=e[h]);a=1<<d;f=new (u?Uint32Array:Array)(a);g=1;k=0;for(m=2;g<=d;){for(h=0;h<c;++h)if(e[h]===g){p=0;t=k;for(l=0;l<g;++l)p=p<<1|t&1,t>>=1;y=g<<16|h;for(l=p;l<a;l+=m)f[l]=y;++k}++g;k<<=1;m<<=1}return[f,d,b]};var E=[],F;for(F=0;288>F;F++)switch(!0){case 143>=F:E.push([F+48,8]);break;case 255>=F:E.push([F-144+400,9]);break;case 279>=F:E.push([F-256+0,7]);break;case 287>=F:E.push([F-280+192,8]);break;default:n(\"invalid literal: \"+F)}\r\nvar ca=function(){function e(a){switch(!0){case 3===a:return[257,a-3,0];case 4===a:return[258,a-4,0];case 5===a:return[259,a-5,0];case 6===a:return[260,a-6,0];case 7===a:return[261,a-7,0];case 8===a:return[262,a-8,0];case 9===a:return[263,a-9,0];case 10===a:return[264,a-10,0];case 12>=a:return[265,a-11,1];case 14>=a:return[266,a-13,1];case 16>=a:return[267,a-15,1];case 18>=a:return[268,a-17,1];case 22>=a:return[269,a-19,2];case 26>=a:return[270,a-23,2];case 30>=a:return[271,a-27,2];case 34>=a:return[272,\r\na-31,2];case 42>=a:return[273,a-35,3];case 50>=a:return[274,a-43,3];case 58>=a:return[275,a-51,3];case 66>=a:return[276,a-59,3];case 82>=a:return[277,a-67,4];case 98>=a:return[278,a-83,4];case 114>=a:return[279,a-99,4];case 130>=a:return[280,a-115,4];case 162>=a:return[281,a-131,5];case 194>=a:return[282,a-163,5];case 226>=a:return[283,a-195,5];case 257>=a:return[284,a-227,5];case 258===a:return[285,a-258,0];default:n(\"invalid length: \"+a)}}var c=[],d,b;for(d=3;258>=d;d++)b=e(d),c[d]=b[2]<<24|b[1]<<\r\n16|b[0];return c}();u&&new Uint32Array(ca);function G(e,c){this.i=[];this.j=32768;this.d=this.f=this.c=this.n=0;this.input=u?new Uint8Array(e):e;this.o=!1;this.k=H;this.z=!1;if(c||!(c={}))c.index&&(this.c=c.index),c.bufferSize&&(this.j=c.bufferSize),c.bufferType&&(this.k=c.bufferType),c.resize&&(this.z=c.resize);switch(this.k){case I:this.a=32768;this.b=new (u?Uint8Array:Array)(32768+this.j+258);break;case H:this.a=0;this.b=new (u?Uint8Array:Array)(this.j);this.e=this.F;this.q=this.B;this.l=this.D;break;default:n(Error(\"invalid inflate mode\"))}}\r\nvar I=0,H=1;\r\nG.prototype.g=function(){for(;!this.o;){var e=J(this,3);e&1&&(this.o=!0);e>>>=1;switch(e){case 0:var c=this.input,d=this.c,b=this.b,a=this.a,f=c.length,g=q,k=q,m=b.length,p=q;this.d=this.f=0;d+1>=f&&n(Error(\"invalid uncompressed block header: LEN\"));g=c[d++]|c[d++]<<8;d+1>=f&&n(Error(\"invalid uncompressed block header: NLEN\"));k=c[d++]|c[d++]<<8;g===~k&&n(Error(\"invalid uncompressed block header: length verify\"));d+g>c.length&&n(Error(\"input buffer is broken\"));switch(this.k){case I:for(;a+g>b.length;){p=\r\nm-a;g-=p;if(u)b.set(c.subarray(d,d+p),a),a+=p,d+=p;else for(;p--;)b[a++]=c[d++];this.a=a;b=this.e();a=this.a}break;case H:for(;a+g>b.length;)b=this.e({t:2});break;default:n(Error(\"invalid inflate mode\"))}if(u)b.set(c.subarray(d,d+g),a),a+=g,d+=g;else for(;g--;)b[a++]=c[d++];this.c=d;this.a=a;this.b=b;break;case 1:this.l(da,ea);break;case 2:fa(this);break;default:n(Error(\"unknown BTYPE: \"+e))}}return this.q()};\r\nvar K=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],L=u?new Uint16Array(K):K,N=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],O=u?new Uint16Array(N):N,P=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],Q=u?new Uint8Array(P):P,R=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],ga=u?new Uint16Array(R):R,ha=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,\r\n13,13],U=u?new Uint8Array(ha):ha,V=new (u?Uint8Array:Array)(288),W,ia;W=0;for(ia=V.length;W<ia;++W)V[W]=143>=W?8:255>=W?9:279>=W?7:8;var da=D(V),X=new (u?Uint8Array:Array)(30),Y,ja;Y=0;for(ja=X.length;Y<ja;++Y)X[Y]=5;var ea=D(X);function J(e,c){for(var d=e.f,b=e.d,a=e.input,f=e.c,g=a.length,k;b<c;)f>=g&&n(Error(\"input buffer is broken\")),d|=a[f++]<<b,b+=8;k=d&(1<<c)-1;e.f=d>>>c;e.d=b-c;e.c=f;return k}\r\nfunction Z(e,c){for(var d=e.f,b=e.d,a=e.input,f=e.c,g=a.length,k=c[0],m=c[1],p,t;b<m&&!(f>=g);)d|=a[f++]<<b,b+=8;p=k[d&(1<<m)-1];t=p>>>16;e.f=d>>t;e.d=b-t;e.c=f;return p&65535}\r\nfunction fa(e){function c(a,c,b){var d,e=this.w,f,g;for(g=0;g<a;)switch(d=Z(this,c),d){case 16:for(f=3+J(this,2);f--;)b[g++]=e;break;case 17:for(f=3+J(this,3);f--;)b[g++]=0;e=0;break;case 18:for(f=11+J(this,7);f--;)b[g++]=0;e=0;break;default:e=b[g++]=d}this.w=e;return b}var d=J(e,5)+257,b=J(e,5)+1,a=J(e,4)+4,f=new (u?Uint8Array:Array)(L.length),g,k,m,p;for(p=0;p<a;++p)f[L[p]]=J(e,3);if(!u){p=a;for(a=f.length;p<a;++p)f[L[p]]=0}g=D(f);k=new (u?Uint8Array:Array)(d);m=new (u?Uint8Array:Array)(b);e.w=\r\n0;e.l(D(c.call(e,d,g,k)),D(c.call(e,b,g,m)))}G.prototype.l=function(e,c){var d=this.b,b=this.a;this.r=e;for(var a=d.length-258,f,g,k,m;256!==(f=Z(this,e));)if(256>f)b>=a&&(this.a=b,d=this.e(),b=this.a),d[b++]=f;else{g=f-257;m=O[g];0<Q[g]&&(m+=J(this,Q[g]));f=Z(this,c);k=ga[f];0<U[f]&&(k+=J(this,U[f]));b>=a&&(this.a=b,d=this.e(),b=this.a);for(;m--;)d[b]=d[b++-k]}for(;8<=this.d;)this.d-=8,this.c--;this.a=b};\r\nG.prototype.D=function(e,c){var d=this.b,b=this.a;this.r=e;for(var a=d.length,f,g,k,m;256!==(f=Z(this,e));)if(256>f)b>=a&&(d=this.e(),a=d.length),d[b++]=f;else{g=f-257;m=O[g];0<Q[g]&&(m+=J(this,Q[g]));f=Z(this,c);k=ga[f];0<U[f]&&(k+=J(this,U[f]));b+m>a&&(d=this.e(),a=d.length);for(;m--;)d[b]=d[b++-k]}for(;8<=this.d;)this.d-=8,this.c--;this.a=b};\r\nG.prototype.e=function(){var e=new (u?Uint8Array:Array)(this.a-32768),c=this.a-32768,d,b,a=this.b;if(u)e.set(a.subarray(32768,e.length));else{d=0;for(b=e.length;d<b;++d)e[d]=a[d+32768]}this.i.push(e);this.n+=e.length;if(u)a.set(a.subarray(c,c+32768));else for(d=0;32768>d;++d)a[d]=a[c+d];this.a=32768;return a};\r\nG.prototype.F=function(e){var c,d=this.input.length/this.c+1|0,b,a,f,g=this.input,k=this.b;e&&(\"number\"===typeof e.t&&(d=e.t),\"number\"===typeof e.A&&(d+=e.A));2>d?(b=(g.length-this.c)/this.r[2],f=258*(b/2)|0,a=f<k.length?k.length+f:k.length<<1):a=k.length*d;u?(c=new Uint8Array(a),c.set(k)):c=k;return this.b=c};\r\nG.prototype.q=function(){var e=0,c=this.b,d=this.i,b,a=new (u?Uint8Array:Array)(this.n+(this.a-32768)),f,g,k,m;if(0===d.length)return u?this.b.subarray(32768,this.a):this.b.slice(32768,this.a);f=0;for(g=d.length;f<g;++f){b=d[f];k=0;for(m=b.length;k<m;++k)a[e++]=b[k]}f=32768;for(g=this.a;f<g;++f)a[e++]=c[f];this.i=[];return this.buffer=a};\r\nG.prototype.B=function(){var e,c=this.a;u?this.z?(e=new Uint8Array(c),e.set(this.b.subarray(0,c))):e=this.b.subarray(0,c):(this.b.length>c&&(this.b.length=c),e=this.b);return this.buffer=e};function $(e){this.input=e;this.c=0;this.m=[];this.s=!1}$.prototype.G=function(){this.s||this.g();return this.m.slice()};\r\n$.prototype.g=function(){for(var e=this.input.length;this.c<e;){var c=new B,d=q,b=q,a=q,f=q,g=q,k=q,m=q,p=q,t=q,h=this.input,l=this.c;c.u=h[l++];c.v=h[l++];(31!==c.u||139!==c.v)&&n(Error(\"invalid file signature:\"+c.u+\",\"+c.v));c.p=h[l++];switch(c.p){case 8:break;default:n(Error(\"unknown compression method: \"+c.p))}c.h=h[l++];p=h[l++]|h[l++]<<8|h[l++]<<16|h[l++]<<24;c.I=new Date(1E3*p);c.O=h[l++];c.N=h[l++];0<(c.h&4)&&(c.J=h[l++]|h[l++]<<8,l+=c.J);if(0<(c.h&8)){m=[];for(k=0;0<(g=h[l++]);)m[k++]=String.fromCharCode(g);\r\nc.name=m.join(\"\")}if(0<(c.h&16)){m=[];for(k=0;0<(g=h[l++]);)m[k++]=String.fromCharCode(g);c.K=m.join(\"\")}0<(c.h&2)&&(c.C=x(h,0,l)&65535,c.C!==(h[l++]|h[l++]<<8)&&n(Error(\"invalid header crc16\")));d=h[h.length-4]|h[h.length-3]<<8|h[h.length-2]<<16|h[h.length-1]<<24;h.length-l-4-4<512*d&&(f=d);b=new G(h,{index:l,bufferSize:f});c.data=a=b.g();l=b.c;c.L=t=(h[l++]|h[l++]<<8|h[l++]<<16|h[l++]<<24)>>>0;x(a,q,q)!==t&&n(Error(\"invalid CRC-32 checksum: 0x\"+x(a,q,q).toString(16)+\" / 0x\"+t.toString(16)));c.M=\r\nd=(h[l++]|h[l++]<<8|h[l++]<<16|h[l++]<<24)>>>0;(a.length&4294967295)!==d&&n(Error(\"invalid input size: \"+(a.length&4294967295)+\" / \"+d));this.m.push(c);this.c=l}this.s=!0;var y=this.m,s,M,S=0,T=0,C;s=0;for(M=y.length;s<M;++s)T+=y[s].data.length;if(u){C=new Uint8Array(T);for(s=0;s<M;++s)C.set(y[s].data,S),S+=y[s].data.length}else{C=[];for(s=0;s<M;++s)C[s]=y[s].data;C=Array.prototype.concat.apply([],C)}return C};r(\"Zlib.Gunzip\",$);r(\"Zlib.Gunzip.prototype.decompress\",$.prototype.g);r(\"Zlib.Gunzip.prototype.getMembers\",$.prototype.G);\r\nvar Zlib=aa.Zlib;\r\nexport { Zlib }\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/libs/gunzip.module.min.js","import {\r\n\tClampToEdgeWrapping,\r\n\tDoubleSide,\r\n\tLinearFilter,\r\n\tMesh,\r\n\tMeshBasicMaterial,\r\n\tPlaneBufferGeometry,\r\n\tTexture\r\n} from \"@/components/build/three.module.js\";\r\n\r\n/**\r\n * This class has been made to hold a slice of a volume data\r\n * @class\r\n * @param   {Volume} volume    The associated volume\r\n * @param   {number}       [index=0] The index of the slice\r\n * @param   {string}       [axis='z']      For now only 'x', 'y' or 'z' but later it will change to a normal vector\r\n * @see Volume\r\n */\r\nvar VolumeSlice = function ( volume, index, axis ) {\r\n\r\n\tvar slice = this;\r\n\t/**\r\n\t * @member {Volume} volume The associated volume\r\n\t */\r\n\tthis.volume = volume;\r\n\t/**\r\n\t * @member {Number} index The index of the slice, if changed, will automatically call updateGeometry at the next repaint\r\n\t */\r\n\tindex = index || 0;\r\n\tObject.defineProperty( this, 'index', {\r\n\t\tget: function () {\r\n\r\n\t\t\treturn index;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tindex = value;\r\n\t\t\tslice.geometryNeedsUpdate = true;\r\n\t\t\treturn index;\r\n\r\n\t\t}\r\n\t} );\r\n\t/**\r\n\t * @member {String} axis The normal axis\r\n\t */\r\n\tthis.axis = axis || 'z';\r\n\r\n\t/**\r\n\t * @member {HTMLCanvasElement} canvas The final canvas used for the texture\r\n\t */\r\n\t/**\r\n\t * @member {CanvasRenderingContext2D} ctx Context of the canvas\r\n\t */\r\n\tthis.canvas = document.createElement( 'canvas' );\r\n\t/**\r\n\t * @member {HTMLCanvasElement} canvasBuffer The intermediary canvas used to paint the data\r\n\t */\r\n\t/**\r\n\t * @member {CanvasRenderingContext2D} ctxBuffer Context of the canvas buffer\r\n\t */\r\n\tthis.canvasBuffer = document.createElement( 'canvas' );\r\n\tthis.updateGeometry();\r\n\r\n\r\n\tvar canvasMap = new Texture( this.canvas );\r\n\tcanvasMap.minFilter = LinearFilter;\r\n\tcanvasMap.wrapS = canvasMap.wrapT = ClampToEdgeWrapping;\r\n\tvar material = new MeshBasicMaterial( { map: canvasMap, side: DoubleSide, transparent: true } );\r\n\t/**\r\n\t * @member {Mesh} mesh The mesh ready to get used in the scene\r\n\t */\r\n\tthis.mesh = new Mesh( this.geometry, material );\r\n\tthis.mesh.matrixAutoUpdate = false;\r\n\t/**\r\n\t * @member {Boolean} geometryNeedsUpdate If set to true, updateGeometry will be triggered at the next repaint\r\n\t */\r\n\tthis.geometryNeedsUpdate = true;\r\n\tthis.repaint();\r\n\r\n\t/**\r\n\t * @member {Number} iLength Width of slice in the original coordinate system, corresponds to the width of the buffer canvas\r\n\t */\r\n\r\n\t/**\r\n\t * @member {Number} jLength Height of slice in the original coordinate system, corresponds to the height of the buffer canvas\r\n\t */\r\n\r\n\t/**\r\n\t * @member {Function} sliceAccess Function that allow the slice to access right data\r\n\t * @see Volume.extractPerpendicularPlane\r\n\t * @param {Number} i The first coordinate\r\n\t * @param {Number} j The second coordinate\r\n\t * @returns {Number} the index corresponding to the voxel in volume.data of the given position in the slice\r\n\t */\r\n\r\n\r\n};\r\n\r\nVolumeSlice.prototype = {\r\n\r\n\tconstructor: VolumeSlice,\r\n\r\n\t/**\r\n\t * @member {Function} repaint Refresh the texture and the geometry if geometryNeedsUpdate is set to true\r\n\t * @memberof VolumeSlice\r\n\t */\r\n\trepaint: function () {\r\n\r\n\t\tif ( this.geometryNeedsUpdate ) {\r\n\r\n\t\t\tthis.updateGeometry();\r\n\r\n\t\t}\r\n\r\n\t\tvar iLength = this.iLength,\r\n\t\t\tjLength = this.jLength,\r\n\t\t\tsliceAccess = this.sliceAccess,\r\n\t\t\tvolume = this.volume,\r\n\t\t\tcanvas = this.canvasBuffer,\r\n\t\t\tctx = this.ctxBuffer;\r\n\r\n\r\n\t\t// get the imageData and pixel array from the canvas\r\n\t\tvar imgData = ctx.getImageData( 0, 0, iLength, jLength );\r\n\t\tvar data = imgData.data;\r\n\t\tvar volumeData = volume.data;\r\n\t\tvar upperThreshold = volume.upperThreshold;\r\n\t\tvar lowerThreshold = volume.lowerThreshold;\r\n\t\tvar windowLow = volume.windowLow;\r\n\t\tvar windowHigh = volume.windowHigh;\r\n\r\n\t\t// manipulate some pixel elements\r\n\t\tvar pixelCount = 0;\r\n\r\n\t\tif ( volume.dataType === 'label' ) {\r\n\r\n\t\t\t//this part is currently useless but will be used when colortables will be handled\r\n\t\t\tfor ( var j = 0; j < jLength; j ++ ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < iLength; i ++ ) {\r\n\r\n\t\t\t\t\tvar label = volumeData[ sliceAccess( i, j ) ];\r\n\t\t\t\t\tlabel = label >= this.colorMap.length ? ( label % this.colorMap.length ) + 1 : label;\r\n\t\t\t\t\tvar color = this.colorMap[ label ];\r\n\t\t\t\t\tdata[ 4 * pixelCount ] = ( color >> 24 ) & 0xff;\r\n\t\t\t\t\tdata[ 4 * pixelCount + 1 ] = ( color >> 16 ) & 0xff;\r\n\t\t\t\t\tdata[ 4 * pixelCount + 2 ] = ( color >> 8 ) & 0xff;\r\n\t\t\t\t\tdata[ 4 * pixelCount + 3 ] = color & 0xff;\r\n\t\t\t\t\tpixelCount ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t} else {\r\n\r\n\t\t\tfor ( var j = 0; j < jLength; j ++ ) {\r\n\r\n\t\t\t\tfor ( var i = 0; i < iLength; i ++ ) {\r\n\r\n\t\t\t\t\tvar value = volumeData[ sliceAccess( i, j ) ];\r\n\t\t\t\t\tvar alpha = 0xff;\r\n\t\t\t\t\t//apply threshold\r\n\t\t\t\t\talpha = upperThreshold >= value ? ( lowerThreshold <= value ? alpha : 0 ) : 0;\r\n\t\t\t\t\t//apply window level\r\n\t\t\t\t\tvalue = Math.floor( 255 * ( value - windowLow ) / ( windowHigh - windowLow ) );\r\n\t\t\t\t\tvalue = value > 255 ? 255 : ( value < 0 ? 0 : value | 0 );\r\n\r\n\t\t\t\t\tdata[ 4 * pixelCount ] = value;\r\n\t\t\t\t\tdata[ 4 * pixelCount + 1 ] = value;\r\n\t\t\t\t\tdata[ 4 * pixelCount + 2 ] = value;\r\n\t\t\t\t\tdata[ 4 * pixelCount + 3 ] = alpha;\r\n\t\t\t\t\tpixelCount ++;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tctx.putImageData( imgData, 0, 0 );\r\n\t\tthis.ctx.drawImage( canvas, 0, 0, iLength, jLength, 0, 0, this.canvas.width, this.canvas.height );\r\n\r\n\r\n\t\tthis.mesh.material.map.needsUpdate = true;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @member {Function} Refresh the geometry according to axis and index\r\n\t * @see Volume.extractPerpendicularPlane\r\n\t * @memberof VolumeSlice\r\n\t */\r\n\tupdateGeometry: function () {\r\n\r\n\t\tvar extracted = this.volume.extractPerpendicularPlane( this.axis, this.index );\r\n\t\tthis.sliceAccess = extracted.sliceAccess;\r\n\t\tthis.jLength = extracted.jLength;\r\n\t\tthis.iLength = extracted.iLength;\r\n\t\tthis.matrix = extracted.matrix;\r\n\r\n\t\tthis.canvas.width = extracted.planeWidth;\r\n\t\tthis.canvas.height = extracted.planeHeight;\r\n\t\tthis.canvasBuffer.width = this.iLength;\r\n\t\tthis.canvasBuffer.height = this.jLength;\r\n\t\tthis.ctx = this.canvas.getContext( '2d' );\r\n\t\tthis.ctxBuffer = this.canvasBuffer.getContext( '2d' );\r\n\r\n\t\tif ( this.geometry ) this.geometry.dispose(); // dispose existing geometry\r\n\r\n\t\tthis.geometry = new PlaneBufferGeometry( extracted.planeWidth, extracted.planeHeight );\r\n\r\n\t\tif ( this.mesh ) {\r\n\r\n\t\t\tthis.mesh.geometry = this.geometry;\r\n\t\t\t//reset mesh matrix\r\n\t\t\tthis.mesh.matrix.identity();\r\n\t\t\tthis.mesh.applyMatrix4( this.matrix );\r\n\r\n\t\t}\r\n\r\n\t\tthis.geometryNeedsUpdate = false;\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { VolumeSlice };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/misc/VolumeSlice.js","import {\r\n\tMatrix3,\r\n\tMatrix4,\r\n\tVector3\r\n} from \"@/components/build/three.module.js\";\r\nimport { VolumeSlice } from \"../misc/VolumeSlice.js\";\r\n\r\n/**\r\n * This class had been written to handle the output of the NRRD loader.\r\n * It contains a volume of data and informations about it.\r\n * For now it only handles 3 dimensional data.\r\n * See the webgl_loader_nrrd.html example and the loaderNRRD.js file to see how to use this class.\r\n * @class\r\n * @param   {number}        xLength         Width of the volume\r\n * @param   {number}        yLength         Length of the volume\r\n * @param   {number}        zLength         Depth of the volume\r\n * @param   {string}        type            The type of data (uint8, uint16, ...)\r\n * @param   {ArrayBuffer}   arrayBuffer     The buffer with volume data\r\n */\r\nvar Volume = function ( xLength, yLength, zLength, type, arrayBuffer ) {\r\n\r\n\tif ( arguments.length > 0 ) {\r\n\r\n\t\t/**\r\n\t\t * @member {number} xLength Width of the volume in the IJK coordinate system\r\n\t\t */\r\n\t\tthis.xLength = Number( xLength ) || 1;\r\n\t\t/**\r\n\t\t * @member {number} yLength Height of the volume in the IJK coordinate system\r\n\t\t */\r\n\t\tthis.yLength = Number( yLength ) || 1;\r\n\t\t/**\r\n\t\t * @member {number} zLength Depth of the volume in the IJK coordinate system\r\n\t\t */\r\n\t\tthis.zLength = Number( zLength ) || 1;\r\n\r\n\t\t/**\r\n\t\t * @member {TypedArray} data Data of the volume\r\n\t\t */\r\n\r\n\t\tswitch ( type ) {\r\n\r\n\t\t\tcase 'Uint8' :\r\n\t\t\tcase 'uint8' :\r\n\t\t\tcase 'uchar' :\r\n\t\t\tcase 'unsigned char' :\r\n\t\t\tcase 'uint8_t' :\r\n\t\t\t\tthis.data = new Uint8Array( arrayBuffer );\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Int8' :\r\n\t\t\tcase 'int8' :\r\n\t\t\tcase 'signed char' :\r\n\t\t\tcase 'int8_t' :\r\n\t\t\t\tthis.data = new Int8Array( arrayBuffer );\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Int16' :\r\n\t\t\tcase 'int16' :\r\n\t\t\tcase 'short' :\r\n\t\t\tcase 'short int' :\r\n\t\t\tcase 'signed short' :\r\n\t\t\tcase 'signed short int' :\r\n\t\t\tcase 'int16_t' :\r\n\t\t\t\tthis.data = new Int16Array( arrayBuffer );\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Uint16' :\r\n\t\t\tcase 'uint16' :\r\n\t\t\tcase 'ushort' :\r\n\t\t\tcase 'unsigned short' :\r\n\t\t\tcase 'unsigned short int' :\r\n\t\t\tcase 'uint16_t' :\r\n\t\t\t\tthis.data = new Uint16Array( arrayBuffer );\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Int32' :\r\n\t\t\tcase 'int32' :\r\n\t\t\tcase 'int' :\r\n\t\t\tcase 'signed int' :\r\n\t\t\tcase 'int32_t' :\r\n\t\t\t\tthis.data = new Int32Array( arrayBuffer );\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Uint32' :\r\n\t\t\tcase 'uint32' :\r\n\t\t\tcase 'uint' :\r\n\t\t\tcase 'unsigned int' :\r\n\t\t\tcase 'uint32_t' :\r\n\t\t\t\tthis.data = new Uint32Array( arrayBuffer );\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'longlong' :\r\n\t\t\tcase 'long long' :\r\n\t\t\tcase 'long long int' :\r\n\t\t\tcase 'signed long long' :\r\n\t\t\tcase 'signed long long int' :\r\n\t\t\tcase 'int64' :\r\n\t\t\tcase 'int64_t' :\r\n\t\t\tcase 'ulonglong' :\r\n\t\t\tcase 'unsigned long long' :\r\n\t\t\tcase 'unsigned long long int' :\r\n\t\t\tcase 'uint64' :\r\n\t\t\tcase 'uint64_t' :\r\n\t\t\t\tthrow 'Error in Volume constructor : this type is not supported in JavaScript';\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Float32' :\r\n\t\t\tcase 'float32' :\r\n\t\t\tcase 'float' :\r\n\t\t\t\tthis.data = new Float32Array( arrayBuffer );\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'Float64' :\r\n\t\t\tcase 'float64' :\r\n\t\t\tcase 'double' :\r\n\t\t\t\tthis.data = new Float64Array( arrayBuffer );\r\n\t\t\t\tbreak;\r\n\t\t\tdefault :\r\n\t\t\t\tthis.data = new Uint8Array( arrayBuffer );\r\n\r\n\t\t}\r\n\r\n\t\tif ( this.data.length !== this.xLength * this.yLength * this.zLength ) {\r\n\r\n\t\t\tthrow 'Error in Volume constructor, lengths are not matching arrayBuffer size';\r\n\r\n\t\t}\r\n\r\n\t}\r\n\r\n\t/**\r\n\t * @member {Array}  spacing Spacing to apply to the volume from IJK to RAS coordinate system\r\n\t */\r\n\tthis.spacing = [ 1, 1, 1 ];\r\n\t/**\r\n\t * @member {Array}  offset Offset of the volume in the RAS coordinate system\r\n\t */\r\n\tthis.offset = [ 0, 0, 0 ];\r\n\t/**\r\n\t * @member {Martrix3} matrix The IJK to RAS matrix\r\n\t */\r\n\tthis.matrix = new Matrix3();\r\n\tthis.matrix.identity();\r\n\t/**\r\n\t * @member {Martrix3} inverseMatrix The RAS to IJK matrix\r\n\t */\r\n\t/**\r\n\t * @member {number} lowerThreshold The voxels with values under this threshold won't appear in the slices.\r\n\t *                      If changed, geometryNeedsUpdate is automatically set to true on all the slices associated to this volume\r\n\t */\r\n\tvar lowerThreshold = - Infinity;\r\n\tObject.defineProperty( this, 'lowerThreshold', {\r\n\t\tget: function () {\r\n\r\n\t\t\treturn lowerThreshold;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tlowerThreshold = value;\r\n\t\t\tthis.sliceList.forEach( function ( slice ) {\r\n\r\n\t\t\t\tslice.geometryNeedsUpdate = true;\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\t} );\r\n\t/**\r\n\t * @member {number} upperThreshold The voxels with values over this threshold won't appear in the slices.\r\n\t *                      If changed, geometryNeedsUpdate is automatically set to true on all the slices associated to this volume\r\n\t */\r\n\tvar upperThreshold = Infinity;\r\n\tObject.defineProperty( this, 'upperThreshold', {\r\n\t\tget: function () {\r\n\r\n\t\t\treturn upperThreshold;\r\n\r\n\t\t},\r\n\t\tset: function ( value ) {\r\n\r\n\t\t\tupperThreshold = value;\r\n\t\t\tthis.sliceList.forEach( function ( slice ) {\r\n\r\n\t\t\t\tslice.geometryNeedsUpdate = true;\r\n\r\n\t\t\t} );\r\n\r\n\t\t}\r\n\t} );\r\n\r\n\r\n\t/**\r\n\t * @member {Array} sliceList The list of all the slices associated to this volume\r\n\t */\r\n\tthis.sliceList = [];\r\n\r\n\r\n\t/**\r\n\t * @member {Array} RASDimensions This array holds the dimensions of the volume in the RAS space\r\n\t */\r\n\r\n};\r\n\r\nVolume.prototype = {\r\n\r\n\tconstructor: Volume,\r\n\r\n\t/**\r\n\t * @member {Function} getData Shortcut for data[access(i,j,k)]\r\n\t * @memberof Volume\r\n\t * @param {number} i    First coordinate\r\n\t * @param {number} j    Second coordinate\r\n\t * @param {number} k    Third coordinate\r\n\t * @returns {number}  value in the data array\r\n\t */\r\n\tgetData: function ( i, j, k ) {\r\n\r\n\t\treturn this.data[ k * this.xLength * this.yLength + j * this.xLength + i ];\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @member {Function} access compute the index in the data array corresponding to the given coordinates in IJK system\r\n\t * @memberof Volume\r\n\t * @param {number} i    First coordinate\r\n\t * @param {number} j    Second coordinate\r\n\t * @param {number} k    Third coordinate\r\n\t * @returns {number}  index\r\n\t */\r\n\taccess: function ( i, j, k ) {\r\n\r\n\t\treturn k * this.xLength * this.yLength + j * this.xLength + i;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @member {Function} reverseAccess Retrieve the IJK coordinates of the voxel corresponding of the given index in the data\r\n\t * @memberof Volume\r\n\t * @param {number} index index of the voxel\r\n\t * @returns {Array}  [x,y,z]\r\n\t */\r\n\treverseAccess: function ( index ) {\r\n\r\n\t\tvar z = Math.floor( index / ( this.yLength * this.xLength ) );\r\n\t\tvar y = Math.floor( ( index - z * this.yLength * this.xLength ) / this.xLength );\r\n\t\tvar x = index - z * this.yLength * this.xLength - y * this.xLength;\r\n\t\treturn [ x, y, z ];\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @member {Function} map Apply a function to all the voxels, be careful, the value will be replaced\r\n\t * @memberof Volume\r\n\t * @param {Function} functionToMap A function to apply to every voxel, will be called with the following parameters :\r\n\t *                                 value of the voxel\r\n\t *                                 index of the voxel\r\n\t *                                 the data (TypedArray)\r\n\t * @param {Object}   context    You can specify a context in which call the function, default if this Volume\r\n\t * @returns {Volume}   this\r\n\t */\r\n\tmap: function ( functionToMap, context ) {\r\n\r\n\t\tvar length = this.data.length;\r\n\t\tcontext = context || this;\r\n\r\n\t\tfor ( var i = 0; i < length; i ++ ) {\r\n\r\n\t\t\tthis.data[ i ] = functionToMap.call( context, this.data[ i ], i, this.data );\r\n\r\n\t\t}\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @member {Function} extractPerpendicularPlane Compute the orientation of the slice and returns all the information relative to the geometry such as sliceAccess, the plane matrix (orientation and position in RAS coordinate) and the dimensions of the plane in both coordinate system.\r\n\t * @memberof Volume\r\n\t * @param {string}            axis  the normal axis to the slice 'x' 'y' or 'z'\r\n\t * @param {number}            index the index of the slice\r\n\t * @returns {Object} an object containing all the usefull information on the geometry of the slice\r\n\t */\r\n\textractPerpendicularPlane: function ( axis, RASIndex ) {\r\n\r\n\t\tvar iLength,\r\n\t\t\tjLength,\r\n\t\t\tsliceAccess,\r\n\t\t\tplaneMatrix = ( new Matrix4() ).identity(),\r\n\t\t\tvolume = this,\r\n\t\t\tplaneWidth,\r\n\t\t\tplaneHeight,\r\n\t\t\tfirstSpacing,\r\n\t\t\tsecondSpacing,\r\n\t\t\tpositionOffset,\r\n\t\t\tIJKIndex;\r\n\r\n\t\tvar axisInIJK = new Vector3(),\r\n\t\t\tfirstDirection = new Vector3(),\r\n\t\t\tsecondDirection = new Vector3();\r\n\r\n\t\tvar dimensions = new Vector3( this.xLength, this.yLength, this.zLength );\r\n\r\n\r\n\t\tswitch ( axis ) {\r\n\r\n\t\t\tcase 'x' :\r\n\t\t\t\taxisInIJK.set( 1, 0, 0 );\r\n\t\t\t\tfirstDirection.set( 0, 0, - 1 );\r\n\t\t\t\tsecondDirection.set( 0, - 1, 0 );\r\n\t\t\t\tfirstSpacing = this.spacing[ 2 ];\r\n\t\t\t\tsecondSpacing = this.spacing[ 1 ];\r\n\t\t\t\tIJKIndex = new Vector3( RASIndex, 0, 0 );\r\n\r\n\t\t\t\tplaneMatrix.multiply( ( new Matrix4() ).makeRotationY( Math.PI / 2 ) );\r\n\t\t\t\tpositionOffset = ( volume.RASDimensions[ 0 ] - 1 ) / 2;\r\n\t\t\t\tplaneMatrix.setPosition( new Vector3( RASIndex - positionOffset, 0, 0 ) );\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'y' :\r\n\t\t\t\taxisInIJK.set( 0, 1, 0 );\r\n\t\t\t\tfirstDirection.set( 1, 0, 0 );\r\n\t\t\t\tsecondDirection.set( 0, 0, 1 );\r\n\t\t\t\tfirstSpacing = this.spacing[ 0 ];\r\n\t\t\t\tsecondSpacing = this.spacing[ 2 ];\r\n\t\t\t\tIJKIndex = new Vector3( 0, RASIndex, 0 );\r\n\r\n\t\t\t\tplaneMatrix.multiply( ( new Matrix4() ).makeRotationX( - Math.PI / 2 ) );\r\n\t\t\t\tpositionOffset = ( volume.RASDimensions[ 1 ] - 1 ) / 2;\r\n\t\t\t\tplaneMatrix.setPosition( new Vector3( 0, RASIndex - positionOffset, 0 ) );\r\n\t\t\t\tbreak;\r\n\t\t\tcase 'z' :\r\n\t\t\tdefault :\r\n\t\t\t\taxisInIJK.set( 0, 0, 1 );\r\n\t\t\t\tfirstDirection.set( 1, 0, 0 );\r\n\t\t\t\tsecondDirection.set( 0, - 1, 0 );\r\n\t\t\t\tfirstSpacing = this.spacing[ 0 ];\r\n\t\t\t\tsecondSpacing = this.spacing[ 1 ];\r\n\t\t\t\tIJKIndex = new Vector3( 0, 0, RASIndex );\r\n\r\n\t\t\t\tpositionOffset = ( volume.RASDimensions[ 2 ] - 1 ) / 2;\r\n\t\t\t\tplaneMatrix.setPosition( new Vector3( 0, 0, RASIndex - positionOffset ) );\r\n\t\t\t\tbreak;\r\n\r\n\t\t}\r\n\r\n\t\tfirstDirection.applyMatrix4( volume.inverseMatrix ).normalize();\r\n\t\tfirstDirection.argVar = 'i';\r\n\t\tsecondDirection.applyMatrix4( volume.inverseMatrix ).normalize();\r\n\t\tsecondDirection.argVar = 'j';\r\n\t\taxisInIJK.applyMatrix4( volume.inverseMatrix ).normalize();\r\n\t\tiLength = Math.floor( Math.abs( firstDirection.dot( dimensions ) ) );\r\n\t\tjLength = Math.floor( Math.abs( secondDirection.dot( dimensions ) ) );\r\n\t\tplaneWidth = Math.abs( iLength * firstSpacing );\r\n\t\tplaneHeight = Math.abs( jLength * secondSpacing );\r\n\r\n\t\tIJKIndex = Math.abs( Math.round( IJKIndex.applyMatrix4( volume.inverseMatrix ).dot( axisInIJK ) ) );\r\n\t\tvar base = [ new Vector3( 1, 0, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ) ];\r\n\t\tvar iDirection = [ firstDirection, secondDirection, axisInIJK ].find( function ( x ) {\r\n\r\n\t\t\treturn Math.abs( x.dot( base[ 0 ] ) ) > 0.9;\r\n\r\n\t\t} );\r\n\t\tvar jDirection = [ firstDirection, secondDirection, axisInIJK ].find( function ( x ) {\r\n\r\n\t\t\treturn Math.abs( x.dot( base[ 1 ] ) ) > 0.9;\r\n\r\n\t\t} );\r\n\t\tvar kDirection = [ firstDirection, secondDirection, axisInIJK ].find( function ( x ) {\r\n\r\n\t\t\treturn Math.abs( x.dot( base[ 2 ] ) ) > 0.9;\r\n\r\n\t\t} );\r\n\r\n\t\tsliceAccess = function ( i, j ) {\r\n\r\n\t\t\tvar accessI, accessJ, accessK;\r\n\r\n\t\t\tvar si = ( iDirection === axisInIJK ) ? IJKIndex : ( iDirection.argVar === 'i' ? i : j );\r\n\t\t\tvar sj = ( jDirection === axisInIJK ) ? IJKIndex : ( jDirection.argVar === 'i' ? i : j );\r\n\t\t\tvar sk = ( kDirection === axisInIJK ) ? IJKIndex : ( kDirection.argVar === 'i' ? i : j );\r\n\r\n\t\t\t// invert indices if necessary\r\n\r\n\t\t\tvar accessI = ( iDirection.dot( base[ 0 ] ) > 0 ) ? si : ( volume.xLength - 1 ) - si;\r\n\t\t\tvar accessJ = ( jDirection.dot( base[ 1 ] ) > 0 ) ? sj : ( volume.yLength - 1 ) - sj;\r\n\t\t\tvar accessK = ( kDirection.dot( base[ 2 ] ) > 0 ) ? sk : ( volume.zLength - 1 ) - sk;\r\n\r\n\t\t\treturn volume.access( accessI, accessJ, accessK );\r\n\r\n\t\t};\r\n\r\n\t\treturn {\r\n\t\t\tiLength: iLength,\r\n\t\t\tjLength: jLength,\r\n\t\t\tsliceAccess: sliceAccess,\r\n\t\t\tmatrix: planeMatrix,\r\n\t\t\tplaneWidth: planeWidth,\r\n\t\t\tplaneHeight: planeHeight\r\n\t\t};\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @member {Function} extractSlice Returns a slice corresponding to the given axis and index\r\n\t *                        The coordinate are given in the Right Anterior Superior coordinate format\r\n\t * @memberof Volume\r\n\t * @param {string}            axis  the normal axis to the slice 'x' 'y' or 'z'\r\n\t * @param {number}            index the index of the slice\r\n\t * @returns {VolumeSlice} the extracted slice\r\n\t */\r\n\textractSlice: function ( axis, index ) {\r\n\r\n\t\tvar slice = new VolumeSlice( this, index, axis );\r\n\t\tthis.sliceList.push( slice );\r\n\t\treturn slice;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @member {Function} repaintAllSlices Call repaint on all the slices extracted from this volume\r\n\t * @see VolumeSlice.repaint\r\n\t * @memberof Volume\r\n\t * @returns {Volume} this\r\n\t */\r\n\trepaintAllSlices: function () {\r\n\r\n\t\tthis.sliceList.forEach( function ( slice ) {\r\n\r\n\t\t\tslice.repaint();\r\n\r\n\t\t} );\r\n\r\n\t\treturn this;\r\n\r\n\t},\r\n\r\n\t/**\r\n\t * @member {Function} computeMinMax Compute the minimum and the maximum of the data in the volume\r\n\t * @memberof Volume\r\n\t * @returns {Array} [min,max]\r\n\t */\r\n\tcomputeMinMax: function () {\r\n\r\n\t\tvar min = Infinity;\r\n\t\tvar max = - Infinity;\r\n\r\n\t\t// buffer the length\r\n\t\tvar datasize = this.data.length;\r\n\r\n\t\tvar i = 0;\r\n\r\n\t\tfor ( i = 0; i < datasize; i ++ ) {\r\n\r\n\t\t\tif ( ! isNaN( this.data[ i ] ) ) {\r\n\r\n\t\t\t\tvar value = this.data[ i ];\r\n\t\t\t\tmin = Math.min( min, value );\r\n\t\t\t\tmax = Math.max( max, value );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tthis.min = min;\r\n\t\tthis.max = max;\r\n\r\n\t\treturn [ min, max ];\r\n\r\n\t}\r\n\r\n};\r\n\r\nexport { Volume };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/misc/Volume.js","import {\r\n\tFileLoader,\r\n\tLoader,\r\n\tMatrix4,\r\n\tVector3\r\n} from \"@/components/build/three.module.js\";\r\nimport { Zlib } from \"../libs/gunzip.module.min.js\";\r\nimport { Volume } from \"../misc/Volume.js\";\r\n\r\nvar NRRDLoader = function ( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n};\r\n\r\nNRRDLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: NRRDLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setResponseType( 'arraybuffer' );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.setWithCredentials( scope.withCredentials );\r\n\t\tloader.load( url, function ( data ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( data ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\tparse: function ( data ) {\r\n\r\n\t\t// this parser is largely inspired from the XTK NRRD parser : https://github.com/xtk/X\r\n\r\n\t\tvar _data = data;\r\n\r\n\t\tvar _dataPointer = 0;\r\n\r\n\t\tvar _nativeLittleEndian = new Int8Array( new Int16Array( [ 1 ] ).buffer )[ 0 ] > 0;\r\n\r\n\t\tvar _littleEndian = true;\r\n\r\n\t\tvar headerObject = {};\r\n\r\n\t\tfunction scan( type, chunks ) {\r\n\r\n\t\t\tif ( chunks === undefined || chunks === null ) {\r\n\r\n\t\t\t\tchunks = 1;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar _chunkSize = 1;\r\n\t\t\tvar _array_type = Uint8Array;\r\n\r\n\t\t\tswitch ( type ) {\r\n\r\n\t\t\t\t// 1 byte data types\r\n\t\t\t\tcase 'uchar':\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'schar':\r\n\t\t\t\t\t_array_type = Int8Array;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t// 2 byte data types\r\n\t\t\t\tcase 'ushort':\r\n\t\t\t\t\t_array_type = Uint16Array;\r\n\t\t\t\t\t_chunkSize = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'sshort':\r\n\t\t\t\t\t_array_type = Int16Array;\r\n\t\t\t\t\t_chunkSize = 2;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t\t// 4 byte data types\r\n\t\t\t\tcase 'uint':\r\n\t\t\t\t\t_array_type = Uint32Array;\r\n\t\t\t\t\t_chunkSize = 4;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'sint':\r\n\t\t\t\t\t_array_type = Int32Array;\r\n\t\t\t\t\t_chunkSize = 4;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'float':\r\n\t\t\t\t\t_array_type = Float32Array;\r\n\t\t\t\t\t_chunkSize = 4;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'complex':\r\n\t\t\t\t\t_array_type = Float64Array;\r\n\t\t\t\t\t_chunkSize = 8;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'double':\r\n\t\t\t\t\t_array_type = Float64Array;\r\n\t\t\t\t\t_chunkSize = 8;\r\n\t\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// increase the data pointer in-place\r\n\t\t\tvar _bytes = new _array_type( _data.slice( _dataPointer,\r\n\t\t\t\t_dataPointer += chunks * _chunkSize ) );\r\n\r\n\t\t\t// if required, flip the endianness of the bytes\r\n\t\t\tif ( _nativeLittleEndian != _littleEndian ) {\r\n\r\n\t\t\t\t// we need to flip here since the format doesn't match the native endianness\r\n\t\t\t\t_bytes = flipEndianness( _bytes, _chunkSize );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( chunks == 1 ) {\r\n\r\n\t\t\t\t// if only one chunk was requested, just return one value\r\n\t\t\t\treturn _bytes[ 0 ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// return the byte array\r\n\t\t\treturn _bytes;\r\n\r\n\t\t}\r\n\r\n\t\t//Flips typed array endianness in-place. Based on https://github.com/kig/DataStream.js/blob/master/DataStream.js.\r\n\r\n\t\tfunction flipEndianness( array, chunkSize ) {\r\n\r\n\t\t\tvar u8 = new Uint8Array( array.buffer, array.byteOffset, array.byteLength );\r\n\t\t\tfor ( var i = 0; i < array.byteLength; i += chunkSize ) {\r\n\r\n\t\t\t\tfor ( var j = i + chunkSize - 1, k = i; j > k; j --, k ++ ) {\r\n\r\n\t\t\t\t\tvar tmp = u8[ k ];\r\n\t\t\t\t\tu8[ k ] = u8[ j ];\r\n\t\t\t\t\tu8[ j ] = tmp;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn array;\r\n\r\n\t\t}\r\n\r\n\t\t//parse the header\r\n\t\tfunction parseHeader( header ) {\r\n\r\n\t\t\tvar data, field, fn, i, l, lines, m, _i, _len;\r\n\t\t\tlines = header.split( /\\r?\\n/ );\r\n\t\t\tfor ( _i = 0, _len = lines.length; _i < _len; _i ++ ) {\r\n\r\n\t\t\t\tl = lines[ _i ];\r\n\t\t\t\tif ( l.match( /NRRD\\d+/ ) ) {\r\n\r\n\t\t\t\t\theaderObject.isNrrd = true;\r\n\r\n\t\t\t\t} else if ( l.match( /^#/ ) ) {\r\n\t\t\t\t} else if ( m = l.match( /(.*):(.*)/ ) ) {\r\n\r\n\t\t\t\t\tfield = m[ 1 ].trim();\r\n\t\t\t\t\tdata = m[ 2 ].trim();\r\n\t\t\t\t\tfn = NRRDLoader.prototype.fieldFunctions[ field ];\r\n\t\t\t\t\tif ( fn ) {\r\n\r\n\t\t\t\t\t\tfn.call( headerObject, data );\r\n\r\n\t\t\t\t\t} else {\r\n\r\n\t\t\t\t\t\theaderObject[ field ] = data;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! headerObject.isNrrd ) {\r\n\r\n\t\t\t\tthrow new Error( 'Not an NRRD file' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( headerObject.encoding === 'bz2' || headerObject.encoding === 'bzip2' ) {\r\n\r\n\t\t\t\tthrow new Error( 'Bzip is not supported' );\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( ! headerObject.vectors ) {\r\n\r\n\t\t\t\t//if no space direction is set, let's use the identity\r\n\t\t\t\theaderObject.vectors = [ new Vector3( 1, 0, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ) ];\r\n\t\t\t\t//apply spacing if defined\r\n\t\t\t\tif ( headerObject.spacings ) {\r\n\r\n\t\t\t\t\tfor ( i = 0; i <= 2; i ++ ) {\r\n\r\n\t\t\t\t\t\tif ( ! isNaN( headerObject.spacings[ i ] ) ) {\r\n\r\n\t\t\t\t\t\t\theaderObject.vectors[ i ].multiplyScalar( headerObject.spacings[ i ] );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t//parse the data when registred as one of this type : 'text', 'ascii', 'txt'\r\n\t\tfunction parseDataAsText( data, start, end ) {\r\n\r\n\t\t\tvar number = '';\r\n\t\t\tstart = start || 0;\r\n\t\t\tend = end || data.length;\r\n\t\t\tvar value;\r\n\t\t\t//length of the result is the product of the sizes\r\n\t\t\tvar lengthOfTheResult = headerObject.sizes.reduce( function ( previous, current ) {\r\n\r\n\t\t\t\treturn previous * current;\r\n\r\n\t\t\t}, 1 );\r\n\r\n\t\t\tvar base = 10;\r\n\t\t\tif ( headerObject.encoding === 'hex' ) {\r\n\r\n\t\t\t\tbase = 16;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tvar result = new headerObject.__array( lengthOfTheResult );\r\n\t\t\tvar resultIndex = 0;\r\n\t\t\tvar parsingFunction = parseInt;\r\n\t\t\tif ( headerObject.__array === Float32Array || headerObject.__array === Float64Array ) {\r\n\r\n\t\t\t\tparsingFunction = parseFloat;\r\n\r\n\t\t\t}\r\n\r\n\t\t\tfor ( var i = start; i < end; i ++ ) {\r\n\r\n\t\t\t\tvalue = data[ i ];\r\n\t\t\t\t//if value is not a space\r\n\t\t\t\tif ( ( value < 9 || value > 13 ) && value !== 32 ) {\r\n\r\n\t\t\t\t\tnumber += String.fromCharCode( value );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tif ( number !== '' ) {\r\n\r\n\t\t\t\t\t\tresult[ resultIndex ] = parsingFunction( number, base );\r\n\t\t\t\t\t\tresultIndex ++;\r\n\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tnumber = '';\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t\tif ( number !== '' ) {\r\n\r\n\t\t\t\tresult[ resultIndex ] = parsingFunction( number, base );\r\n\t\t\t\tresultIndex ++;\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn result;\r\n\r\n\t\t}\r\n\r\n\t\tvar _bytes = scan( 'uchar', data.byteLength );\r\n\t\tvar _length = _bytes.length;\r\n\t\tvar _header = null;\r\n\t\tvar _data_start = 0;\r\n\t\tvar i;\r\n\t\tfor ( i = 1; i < _length; i ++ ) {\r\n\r\n\t\t\tif ( _bytes[ i - 1 ] == 10 && _bytes[ i ] == 10 ) {\r\n\r\n\t\t\t\t// we found two line breaks in a row\r\n\t\t\t\t// now we know what the header is\r\n\t\t\t\t_header = this.parseChars( _bytes, 0, i - 2 );\r\n\t\t\t\t// this is were the data starts\r\n\t\t\t\t_data_start = i + 1;\r\n\t\t\t\tbreak;\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// parse the header\r\n\t\tparseHeader( _header );\r\n\r\n\t\tvar _data = _bytes.subarray( _data_start ); // the data without header\r\n\t\tif ( headerObject.encoding === 'gzip' || headerObject.encoding === 'gz' ) {\r\n\r\n\t\t\t// we need to decompress the datastream\r\n\t\t\t// here we start the unzipping and get a typed Uint8Array back\r\n\t\t\tvar inflate = new Zlib.Gunzip( new Uint8Array( _data ) ); // eslint-disable-line no-undef\r\n\t\t\t_data = inflate.decompress();\r\n\r\n\t\t} else if ( headerObject.encoding === 'ascii' || headerObject.encoding === 'text' || headerObject.encoding === 'txt' || headerObject.encoding === 'hex' ) {\r\n\r\n\t\t\t_data = parseDataAsText( _data );\r\n\r\n\t\t} else if ( headerObject.encoding === 'raw' ) {\r\n\r\n\t\t\t//we need to copy the array to create a new array buffer, else we retrieve the original arraybuffer with the header\r\n\t\t\tvar _copy = new Uint8Array( _data.length );\r\n\r\n\t\t\tfor ( var i = 0; i < _data.length; i ++ ) {\r\n\r\n\t\t\t\t_copy[ i ] = _data[ i ];\r\n\r\n\t\t\t}\r\n\r\n\t\t\t_data = _copy;\r\n\r\n\t\t}\r\n\r\n\t\t// .. let's use the underlying array buffer\r\n\t\t_data = _data.buffer;\r\n\r\n\t\tvar volume = new Volume();\r\n\t\tvolume.header = headerObject;\r\n\t\t//\r\n\t\t// parse the (unzipped) data to a datastream of the correct type\r\n\t\t//\r\n\t\tvolume.data = new headerObject.__array( _data );\r\n\t\t// get the min and max intensities\r\n\t\tvar min_max = volume.computeMinMax();\r\n\t\tvar min = min_max[ 0 ];\r\n\t\tvar max = min_max[ 1 ];\r\n\t\t// attach the scalar range to the volume\r\n\t\tvolume.windowLow = min;\r\n\t\tvolume.windowHigh = max;\r\n\r\n\t\t// get the image dimensions\r\n\t\tvolume.dimensions = [ headerObject.sizes[ 0 ], headerObject.sizes[ 1 ], headerObject.sizes[ 2 ] ];\r\n\t\tvolume.xLength = volume.dimensions[ 0 ];\r\n\t\tvolume.yLength = volume.dimensions[ 1 ];\r\n\t\tvolume.zLength = volume.dimensions[ 2 ];\r\n\t\t// spacing\r\n\t\tvar spacingX = ( new Vector3( headerObject.vectors[ 0 ][ 0 ], headerObject.vectors[ 0 ][ 1 ],\r\n\t\t\theaderObject.vectors[ 0 ][ 2 ] ) ).length();\r\n\t\tvar spacingY = ( new Vector3( headerObject.vectors[ 1 ][ 0 ], headerObject.vectors[ 1 ][ 1 ],\r\n\t\t\theaderObject.vectors[ 1 ][ 2 ] ) ).length();\r\n\t\tvar spacingZ = ( new Vector3( headerObject.vectors[ 2 ][ 0 ], headerObject.vectors[ 2 ][ 1 ],\r\n\t\t\theaderObject.vectors[ 2 ][ 2 ] ) ).length();\r\n\t\tvolume.spacing = [ spacingX, spacingY, spacingZ ];\r\n\r\n\r\n\t\t// Create IJKtoRAS matrix\r\n\t\tvolume.matrix = new Matrix4();\r\n\r\n\t\tvar _spaceX = 1;\r\n\t\tvar _spaceY = 1;\r\n\t\tvar _spaceZ = 1;\r\n\r\n\t\tif ( headerObject.space == \"left-posterior-superior\" ) {\r\n\r\n\t\t\t_spaceX = - 1;\r\n\t\t\t_spaceY = - 1;\r\n\r\n\t\t} else if ( headerObject.space === 'left-anterior-superior' ) {\r\n\r\n\t\t\t_spaceX = - 1;\r\n\r\n\t\t}\r\n\r\n\r\n\t\tif ( ! headerObject.vectors ) {\r\n\r\n\t\t\tvolume.matrix.set(\r\n\t\t\t\t_spaceX, 0, 0, 0,\r\n\t\t\t\t0, _spaceY, 0, 0,\r\n\t\t\t\t0, 0, _spaceZ, 0,\r\n\t\t\t\t0, 0, 0, 1 );\r\n\r\n\t\t} else {\r\n\r\n\t\t\tvar v = headerObject.vectors;\r\n\r\n\t\t\tvolume.matrix.set(\r\n\t\t\t\t_spaceX * v[ 0 ][ 0 ], _spaceX * v[ 1 ][ 0 ], _spaceX * v[ 2 ][ 0 ], 0,\r\n\t\t\t\t_spaceY * v[ 0 ][ 1 ], _spaceY * v[ 1 ][ 1 ], _spaceY * v[ 2 ][ 1 ], 0,\r\n\t\t\t\t_spaceZ * v[ 0 ][ 2 ], _spaceZ * v[ 1 ][ 2 ], _spaceZ * v[ 2 ][ 2 ], 0,\r\n\t\t\t\t0, 0, 0, 1 );\r\n\r\n\t\t}\r\n\r\n\t\tvolume.inverseMatrix = new Matrix4();\r\n\t\tvolume.inverseMatrix.copy( volume.matrix ).invert();\r\n\t\tvolume.RASDimensions = ( new Vector3( volume.xLength, volume.yLength, volume.zLength ) ).applyMatrix4( volume.matrix ).round().toArray().map( Math.abs );\r\n\r\n\t\t// .. and set the default threshold\r\n\t\t// only if the threshold was not already set\r\n\t\tif ( volume.lowerThreshold === - Infinity ) {\r\n\r\n\t\t\tvolume.lowerThreshold = min;\r\n\r\n\t\t}\r\n\r\n\t\tif ( volume.upperThreshold === Infinity ) {\r\n\r\n\t\t\tvolume.upperThreshold = max;\r\n\r\n\t\t}\r\n\r\n\t\treturn volume;\r\n\r\n\t},\r\n\r\n\tparseChars: function ( array, start, end ) {\r\n\r\n\t\t// without borders, use the whole array\r\n\t\tif ( start === undefined ) {\r\n\r\n\t\t\tstart = 0;\r\n\r\n\t\t}\r\n\r\n\t\tif ( end === undefined ) {\r\n\r\n\t\t\tend = array.length;\r\n\r\n\t\t}\r\n\r\n\t\tvar output = '';\r\n\t\t// create and append the chars\r\n\t\tvar i = 0;\r\n\t\tfor ( i = start; i < end; ++ i ) {\r\n\r\n\t\t\toutput += String.fromCharCode( array[ i ] );\r\n\r\n\t\t}\r\n\r\n\t\treturn output;\r\n\r\n\t},\r\n\r\n\tfieldFunctions: {\r\n\r\n\t\ttype: function ( data ) {\r\n\r\n\t\t\tswitch ( data ) {\r\n\r\n\t\t\t\tcase 'uchar':\r\n\t\t\t\tcase 'unsigned char':\r\n\t\t\t\tcase 'uint8':\r\n\t\t\t\tcase 'uint8_t':\r\n\t\t\t\t\tthis.__array = Uint8Array;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'signed char':\r\n\t\t\t\tcase 'int8':\r\n\t\t\t\tcase 'int8_t':\r\n\t\t\t\t\tthis.__array = Int8Array;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'short':\r\n\t\t\t\tcase 'short int':\r\n\t\t\t\tcase 'signed short':\r\n\t\t\t\tcase 'signed short int':\r\n\t\t\t\tcase 'int16':\r\n\t\t\t\tcase 'int16_t':\r\n\t\t\t\t\tthis.__array = Int16Array;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'ushort':\r\n\t\t\t\tcase 'unsigned short':\r\n\t\t\t\tcase 'unsigned short int':\r\n\t\t\t\tcase 'uint16':\r\n\t\t\t\tcase 'uint16_t':\r\n\t\t\t\t\tthis.__array = Uint16Array;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'int':\r\n\t\t\t\tcase 'signed int':\r\n\t\t\t\tcase 'int32':\r\n\t\t\t\tcase 'int32_t':\r\n\t\t\t\t\tthis.__array = Int32Array;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'uint':\r\n\t\t\t\tcase 'unsigned int':\r\n\t\t\t\tcase 'uint32':\r\n\t\t\t\tcase 'uint32_t':\r\n\t\t\t\t\tthis.__array = Uint32Array;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'float':\r\n\t\t\t\t\tthis.__array = Float32Array;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tcase 'double':\r\n\t\t\t\t\tthis.__array = Float64Array;\r\n\t\t\t\t\tbreak;\r\n\t\t\t\tdefault:\r\n\t\t\t\t\tthrow new Error( 'Unsupported NRRD data type: ' + data );\r\n\r\n\t\t\t}\r\n\r\n\t\t\treturn this.type = data;\r\n\r\n\t\t},\r\n\r\n\t\tendian: function ( data ) {\r\n\r\n\t\t\treturn this.endian = data;\r\n\r\n\t\t},\r\n\r\n\t\tencoding: function ( data ) {\r\n\r\n\t\t\treturn this.encoding = data;\r\n\r\n\t\t},\r\n\r\n\t\tdimension: function ( data ) {\r\n\r\n\t\t\treturn this.dim = parseInt( data, 10 );\r\n\r\n\t\t},\r\n\r\n\t\tsizes: function ( data ) {\r\n\r\n\t\t\tvar i;\r\n\t\t\treturn this.sizes = ( function () {\r\n\r\n\t\t\t\tvar _i, _len, _ref, _results;\r\n\t\t\t\t_ref = data.split( /\\s+/ );\r\n\t\t\t\t_results = [];\r\n\r\n\t\t\t\tfor ( _i = 0, _len = _ref.length; _i < _len; _i ++ ) {\r\n\r\n\t\t\t\t\ti = _ref[ _i ];\r\n\t\t\t\t\t_results.push( parseInt( i, 10 ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn _results;\r\n\r\n\t\t\t} )();\r\n\r\n\t\t},\r\n\r\n\t\tspace: function ( data ) {\r\n\r\n\t\t\treturn this.space = data;\r\n\r\n\t\t},\r\n\r\n\t\t'space origin': function ( data ) {\r\n\r\n\t\t\treturn this.space_origin = data.split( \"(\" )[ 1 ].split( \")\" )[ 0 ].split( \",\" );\r\n\r\n\t\t},\r\n\r\n\t\t'space directions': function ( data ) {\r\n\r\n\t\t\tvar f, parts, v;\r\n\t\t\tparts = data.match( /\\(.*?\\)/g );\r\n\t\t\treturn this.vectors = ( function () {\r\n\r\n\t\t\t\tvar _i, _len, _results;\r\n\t\t\t\t_results = [];\r\n\r\n\t\t\t\tfor ( _i = 0, _len = parts.length; _i < _len; _i ++ ) {\r\n\r\n\t\t\t\t\tv = parts[ _i ];\r\n\t\t\t\t\t_results.push( ( function () {\r\n\r\n\t\t\t\t\t\tvar _j, _len2, _ref, _results2;\r\n\t\t\t\t\t\t_ref = v.slice( 1, - 1 ).split( /,/ );\r\n\t\t\t\t\t\t_results2 = [];\r\n\r\n\t\t\t\t\t\tfor ( _j = 0, _len2 = _ref.length; _j < _len2; _j ++ ) {\r\n\r\n\t\t\t\t\t\t\tf = _ref[ _j ];\r\n\t\t\t\t\t\t\t_results2.push( parseFloat( f ) );\r\n\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\treturn _results2;\r\n\r\n\t\t\t\t\t} )() );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn _results;\r\n\r\n\t\t\t} )();\r\n\r\n\t\t},\r\n\r\n\t\tspacings: function ( data ) {\r\n\r\n\t\t\tvar f, parts;\r\n\t\t\tparts = data.split( /\\s+/ );\r\n\t\t\treturn this.spacings = ( function () {\r\n\r\n\t\t\t\tvar _i, _len, _results = [];\r\n\r\n\t\t\t\tfor ( _i = 0, _len = parts.length; _i < _len; _i ++ ) {\r\n\r\n\t\t\t\t\tf = parts[ _i ];\r\n\t\t\t\t\t_results.push( parseFloat( f ) );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\treturn _results;\r\n\r\n\t\t\t} )();\r\n\r\n\t\t}\r\n\t}\r\n\r\n} );\r\n\r\nexport { NRRDLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/loaders/NRRDLoader.js","import {\r\n\tVector2,\r\n\tVector3\r\n} from \"@/components/build/three.module.js\";\r\n\r\n/**\r\n * Shaders to render 3D volumes using raycasting.\r\n * The applied techniques are based on similar implementations in the Visvis and Vispy projects.\r\n * This is not the only approach, therefore it's marked 1.\r\n */\r\n\r\nvar VolumeRenderShader1 = {\r\n\tuniforms: {\r\n\t\t\"u_size\": { value: new Vector3( 1, 1, 1 ) },\r\n\t\t\"u_renderstyle\": { value: 0 },\r\n\t\t\"u_renderthreshold\": { value: 0.5 },\r\n\t\t\"u_clim\": { value: new Vector2( 1, 1 ) },\r\n\t\t\"u_data\": { value: null },\r\n\t\t\"u_cmdata\": { value: null }\r\n\t},\r\n\tvertexShader: [\r\n\t\t\"\t\tvarying vec4 v_nearpos;\",\r\n\t\t\"\t\tvarying vec4 v_farpos;\",\r\n\t\t\"\t\tvarying vec3 v_position;\",\r\n\r\n\t\t\"\t\tvoid main() {\",\r\n\t\t// Prepare transforms to map to \"camera view\". See also:\r\n\t\t// https://threejs.org/docs/#api/renderers/webgl/WebGLProgram\r\n\t\t\"\t\t\t\tmat4 viewtransformf = modelViewMatrix;\",\r\n\t\t\"\t\t\t\tmat4 viewtransformi = inverse(modelViewMatrix);\",\r\n\r\n\t\t// Project local vertex coordinate to camera position. Then do a step\r\n\t\t// backward (in cam coords) to the near clipping plane, and project back. Do\r\n\t\t// the same for the far clipping plane. This gives us all the information we\r\n\t\t// need to calculate the ray and truncate it to the viewing cone.\r\n\t\t\"\t\t\t\tvec4 position4 = vec4(position, 1.0);\",\r\n\t\t\"\t\t\t\tvec4 pos_in_cam = viewtransformf * position4;\",\r\n\r\n\t\t// Intersection of ray and near clipping plane (z = -1 in clip coords)\r\n\t\t\"\t\t\t\tpos_in_cam.z = -pos_in_cam.w;\",\r\n\t\t\"\t\t\t\tv_nearpos = viewtransformi * pos_in_cam;\",\r\n\r\n\t\t// Intersection of ray and far clipping plane (z = +1 in clip coords)\r\n\t\t\"\t\t\t\tpos_in_cam.z = pos_in_cam.w;\",\r\n\t\t\"\t\t\t\tv_farpos = viewtransformi * pos_in_cam;\",\r\n\r\n\t\t// Set varyings and output pos\r\n\t\t\"\t\t\t\tv_position = position;\",\r\n\t\t\"\t\t\t\tgl_Position = projectionMatrix * viewMatrix * modelMatrix * position4;\",\r\n\t\t\"\t\t}\",\r\n\t].join( \"\\n\" ),\r\n\tfragmentShader: [\r\n\t\t\"\t\tprecision highp float;\",\r\n\t\t\"\t\tprecision mediump sampler3D;\",\r\n\r\n\t\t\"\t\tuniform vec3 u_size;\",\r\n\t\t\"\t\tuniform int u_renderstyle;\",\r\n\t\t\"\t\tuniform float u_renderthreshold;\",\r\n\t\t\"\t\tuniform vec2 u_clim;\",\r\n\r\n\t\t\"\t\tuniform sampler3D u_data;\",\r\n\t\t\"\t\tuniform sampler2D u_cmdata;\",\r\n\r\n\t\t\"\t\tvarying vec3 v_position;\",\r\n\t\t\"\t\tvarying vec4 v_nearpos;\",\r\n\t\t\"\t\tvarying vec4 v_farpos;\",\r\n\r\n\t\t// The maximum distance through our rendering volume is sqrt(3).\r\n\t\t\"\t\tconst int MAX_STEPS = 887;\t// 887 for 512^3, 1774 for 1024^3\",\r\n\t\t\"\t\tconst int REFINEMENT_STEPS = 4;\",\r\n\t\t\"\t\tconst float relative_step_size = 1.0;\",\r\n\t\t\"\t\tconst vec4 ambient_color = vec4(0.2, 0.4, 0.2, 1.0);\",\r\n\t\t\"\t\tconst vec4 diffuse_color = vec4(0.8, 0.2, 0.2, 1.0);\",\r\n\t\t\"\t\tconst vec4 specular_color = vec4(1.0, 1.0, 1.0, 1.0);\",\r\n\t\t\"\t\tconst float shininess = 40.0;\",\r\n\r\n\t\t\"\t\tvoid cast_mip(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray);\",\r\n\t\t\"\t\tvoid cast_iso(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray);\",\r\n\r\n\t\t\"\t\tfloat sample1(vec3 texcoords);\",\r\n\t\t\"\t\tvec4 apply_colormap(float val);\",\r\n\t\t\"\t\tvec4 add_lighting(float val, vec3 loc, vec3 step, vec3 view_ray);\",\r\n\r\n\r\n\t\t\"\t\tvoid main() {\",\r\n\t\t// Normalize clipping plane info\r\n\t\t\"\t\t\t\tvec3 farpos = v_farpos.xyz / v_farpos.w;\",\r\n\t\t\"\t\t\t\tvec3 nearpos = v_nearpos.xyz / v_nearpos.w;\",\r\n\r\n\t\t// Calculate unit vector pointing in the view direction through this fragment.\r\n\t\t\"\t\t\t\tvec3 view_ray = normalize(nearpos.xyz - farpos.xyz);\",\r\n\r\n\t\t// Compute the (negative) distance to the front surface or near clipping plane.\r\n\t\t// v_position is the back face of the cuboid, so the initial distance calculated in the dot\r\n\t\t// product below is the distance from near clip plane to the back of the cuboid\r\n\t\t\"\t\t\t\tfloat distance = dot(nearpos - v_position, view_ray);\",\r\n\t\t\"\t\t\t\tdistance = max(distance, min((-0.5 - v_position.x) / view_ray.x,\",\r\n\t\t\"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u_size.x - 0.5 - v_position.x) / view_ray.x));\",\r\n\t\t\"\t\t\t\tdistance = max(distance, min((-0.5 - v_position.y) / view_ray.y,\",\r\n\t\t\"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u_size.y - 0.5 - v_position.y) / view_ray.y));\",\r\n\t\t\"\t\t\t\tdistance = max(distance, min((-0.5 - v_position.z) / view_ray.z,\",\r\n\t\t\"\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t(u_size.z - 0.5 - v_position.z) / view_ray.z));\",\r\n\r\n\t\t// Now we have the starting position on the front surface\r\n\t\t\"\t\t\t\tvec3 front = v_position + view_ray * distance;\",\r\n\r\n\t\t// Decide how many steps to take\r\n\t\t\"\t\t\t\tint nsteps = int(-distance / relative_step_size + 0.5);\",\r\n\t\t\"\t\t\t\tif ( nsteps < 1 )\",\r\n\t\t\"\t\t\t\t\t\tdiscard;\",\r\n\r\n\t\t// Get starting location and step vector in texture coordinates\r\n\t\t\"\t\t\t\tvec3 step = ((v_position - front) / u_size) / float(nsteps);\",\r\n\t\t\"\t\t\t\tvec3 start_loc = front / u_size;\",\r\n\r\n\t\t// For testing: show the number of steps. This helps to establish\r\n\t\t// whether the rays are correctly oriented\r\n\t\t//'gl_FragColor = vec4(0.0, float(nsteps) / 1.0 / u_size.x, 1.0, 1.0);',\r\n\t\t//'return;',\r\n\r\n\t\t\"\t\t\t\tif (u_renderstyle == 0)\",\r\n\t\t\"\t\t\t\t\t\tcast_mip(start_loc, step, nsteps, view_ray);\",\r\n\t\t\"\t\t\t\telse if (u_renderstyle == 1)\",\r\n\t\t\"\t\t\t\t\t\tcast_iso(start_loc, step, nsteps, view_ray);\",\r\n\r\n\t\t\"\t\t\t\tif (gl_FragColor.a < 0.05)\",\r\n\t\t\"\t\t\t\t\t\tdiscard;\",\r\n\t\t\"\t\t}\",\r\n\r\n\r\n\t\t\"\t\tfloat sample1(vec3 texcoords) {\",\r\n\t\t\"\t\t\t\t/* Sample float value from a 3D texture. Assumes intensity data. */\",\r\n\t\t\"\t\t\t\treturn texture(u_data, texcoords.xyz).r;\",\r\n\t\t\"\t\t}\",\r\n\r\n\r\n\t\t\"\t\tvec4 apply_colormap(float val) {\",\r\n\t\t\"\t\t\t\tval = (val - u_clim[0]) / (u_clim[1] - u_clim[0]);\",\r\n\t\t\"\t\t\t\treturn texture2D(u_cmdata, vec2(val, 0.5));\",\r\n\t\t\"\t\t}\",\r\n\r\n\r\n\t\t\"\t\tvoid cast_mip(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray) {\",\r\n\r\n\t\t\"\t\t\t\tfloat max_val = -1e6;\",\r\n\t\t\"\t\t\t\tint max_i = 100;\",\r\n\t\t\"\t\t\t\tvec3 loc = start_loc;\",\r\n\r\n\t\t// Enter the raycasting loop. In WebGL 1 the loop index cannot be compared with\r\n\t\t// non-constant expression. So we use a hard-coded max, and an additional condition\r\n\t\t// inside the loop.\r\n\t\t\"\t\t\t\tfor (int iter=0; iter<MAX_STEPS; iter++) {\",\r\n\t\t\"\t\t\t\t\t\tif (iter >= nsteps)\",\r\n\t\t\"\t\t\t\t\t\t\t\tbreak;\",\r\n\t\t// Sample from the 3D texture\r\n\t\t\"\t\t\t\t\t\tfloat val = sample1(loc);\",\r\n\t\t// Apply MIP operation\r\n\t\t\"\t\t\t\t\t\tif (val > max_val) {\",\r\n\t\t\"\t\t\t\t\t\t\t\tmax_val = val;\",\r\n\t\t\"\t\t\t\t\t\t\t\tmax_i = iter;\",\r\n\t\t\"\t\t\t\t\t\t}\",\r\n\t\t// Advance location deeper into the volume\r\n\t\t\"\t\t\t\t\t\tloc += step;\",\r\n\t\t\"\t\t\t\t}\",\r\n\r\n\t\t// Refine location, gives crispier images\r\n\t\t\"\t\t\t\tvec3 iloc = start_loc + step * (float(max_i) - 0.5);\",\r\n\t\t\"\t\t\t\tvec3 istep = step / float(REFINEMENT_STEPS);\",\r\n\t\t\"\t\t\t\tfor (int i=0; i<REFINEMENT_STEPS; i++) {\",\r\n\t\t\"\t\t\t\t\t\tmax_val = max(max_val, sample1(iloc));\",\r\n\t\t\"\t\t\t\t\t\tiloc += istep;\",\r\n\t\t\"\t\t\t\t}\",\r\n\r\n\t\t// Resolve final color\r\n\t\t\"\t\t\t\tgl_FragColor = apply_colormap(max_val);\",\r\n\t\t\"\t\t}\",\r\n\r\n\r\n\t\t\"\t\tvoid cast_iso(vec3 start_loc, vec3 step, int nsteps, vec3 view_ray) {\",\r\n\r\n\t\t\"\t\t\t\tgl_FragColor = vec4(0.0);\t// init transparent\",\r\n\t\t\"\t\t\t\tvec4 color3 = vec4(0.0);\t// final color\",\r\n\t\t\"\t\t\t\tvec3 dstep = 1.5 / u_size;\t// step to sample derivative\",\r\n\t\t\"\t\t\t\tvec3 loc = start_loc;\",\r\n\r\n\t\t\"\t\t\t\tfloat low_threshold = u_renderthreshold - 0.02 * (u_clim[1] - u_clim[0]);\",\r\n\r\n\t\t// Enter the raycasting loop. In WebGL 1 the loop index cannot be compared with\r\n\t\t// non-constant expression. So we use a hard-coded max, and an additional condition\r\n\t\t// inside the loop.\r\n\t\t\"\t\t\t\tfor (int iter=0; iter<MAX_STEPS; iter++) {\",\r\n\t\t\"\t\t\t\t\t\tif (iter >= nsteps)\",\r\n\t\t\"\t\t\t\t\t\t\t\tbreak;\",\r\n\r\n\t\t// Sample from the 3D texture\r\n\t\t\"\t\t\t\t\t\tfloat val = sample1(loc);\",\r\n\r\n\t\t\"\t\t\t\t\t\tif (val > low_threshold) {\",\r\n\t\t// Take the last interval in smaller steps\r\n\t\t\"\t\t\t\t\t\t\t\tvec3 iloc = loc - 0.5 * step;\",\r\n\t\t\"\t\t\t\t\t\t\t\tvec3 istep = step / float(REFINEMENT_STEPS);\",\r\n\t\t\"\t\t\t\t\t\t\t\tfor (int i=0; i<REFINEMENT_STEPS; i++) {\",\r\n\t\t\"\t\t\t\t\t\t\t\t\t\tval = sample1(iloc);\",\r\n\t\t\"\t\t\t\t\t\t\t\t\t\tif (val > u_renderthreshold) {\",\r\n\t\t\"\t\t\t\t\t\t\t\t\t\t\t\tgl_FragColor = add_lighting(val, iloc, dstep, view_ray);\",\r\n\t\t\"\t\t\t\t\t\t\t\t\t\t\t\treturn;\",\r\n\t\t\"\t\t\t\t\t\t\t\t\t\t}\",\r\n\t\t\"\t\t\t\t\t\t\t\t\t\tiloc += istep;\",\r\n\t\t\"\t\t\t\t\t\t\t\t}\",\r\n\t\t\"\t\t\t\t\t\t}\",\r\n\r\n\t\t// Advance location deeper into the volume\r\n\t\t\"\t\t\t\t\t\tloc += step;\",\r\n\t\t\"\t\t\t\t}\",\r\n\t\t\"\t\t}\",\r\n\r\n\r\n\t\t\"\t\tvec4 add_lighting(float val, vec3 loc, vec3 step, vec3 view_ray)\",\r\n\t\t\"\t\t{\",\r\n\t\t// Calculate color by incorporating lighting\r\n\r\n\t\t// View direction\r\n\t\t\"\t\t\t\tvec3 V = normalize(view_ray);\",\r\n\r\n\t\t// calculate normal vector from gradient\r\n\t\t\"\t\t\t\tvec3 N;\",\r\n\t\t\"\t\t\t\tfloat val1, val2;\",\r\n\t\t\"\t\t\t\tval1 = sample1(loc + vec3(-step[0], 0.0, 0.0));\",\r\n\t\t\"\t\t\t\tval2 = sample1(loc + vec3(+step[0], 0.0, 0.0));\",\r\n\t\t\"\t\t\t\tN[0] = val1 - val2;\",\r\n\t\t\"\t\t\t\tval = max(max(val1, val2), val);\",\r\n\t\t\"\t\t\t\tval1 = sample1(loc + vec3(0.0, -step[1], 0.0));\",\r\n\t\t\"\t\t\t\tval2 = sample1(loc + vec3(0.0, +step[1], 0.0));\",\r\n\t\t\"\t\t\t\tN[1] = val1 - val2;\",\r\n\t\t\"\t\t\t\tval = max(max(val1, val2), val);\",\r\n\t\t\"\t\t\t\tval1 = sample1(loc + vec3(0.0, 0.0, -step[2]));\",\r\n\t\t\"\t\t\t\tval2 = sample1(loc + vec3(0.0, 0.0, +step[2]));\",\r\n\t\t\"\t\t\t\tN[2] = val1 - val2;\",\r\n\t\t\"\t\t\t\tval = max(max(val1, val2), val);\",\r\n\r\n\t\t\"\t\t\t\tfloat gm = length(N); // gradient magnitude\",\r\n\t\t\"\t\t\t\tN = normalize(N);\",\r\n\r\n\t\t// Flip normal so it points towards viewer\r\n\t\t\"\t\t\t\tfloat Nselect = float(dot(N, V) > 0.0);\",\r\n\t\t\"\t\t\t\tN = (2.0 * Nselect - 1.0) * N;\t// ==\tNselect * N - (1.0-Nselect)*N;\",\r\n\r\n\t\t// Init colors\r\n\t\t\"\t\t\t\tvec4 ambient_color = vec4(0.0, 0.0, 0.0, 0.0);\",\r\n\t\t\"\t\t\t\tvec4 diffuse_color = vec4(0.0, 0.0, 0.0, 0.0);\",\r\n\t\t\"\t\t\t\tvec4 specular_color = vec4(0.0, 0.0, 0.0, 0.0);\",\r\n\r\n\t\t// note: could allow multiple lights\r\n\t\t\"\t\t\t\tfor (int i=0; i<1; i++)\",\r\n\t\t\"\t\t\t\t{\",\r\n\t\t\t\t\t\t\t\t // Get light direction (make sure to prevent zero devision)\r\n\t\t\"\t\t\t\t\t\tvec3 L = normalize(view_ray);\t//lightDirs[i];\",\r\n\t\t\"\t\t\t\t\t\tfloat lightEnabled = float( length(L) > 0.0 );\",\r\n\t\t\"\t\t\t\t\t\tL = normalize(L + (1.0 - lightEnabled));\",\r\n\r\n\t\t// Calculate lighting properties\r\n\t\t\"\t\t\t\t\t\tfloat lambertTerm = clamp(dot(N, L), 0.0, 1.0);\",\r\n\t\t\"\t\t\t\t\t\tvec3 H = normalize(L+V); // Halfway vector\",\r\n\t\t\"\t\t\t\t\t\tfloat specularTerm = pow(max(dot(H, N), 0.0), shininess);\",\r\n\r\n\t\t// Calculate mask\r\n\t\t\"\t\t\t\t\t\tfloat mask1 = lightEnabled;\",\r\n\r\n\t\t// Calculate colors\r\n\t\t\"\t\t\t\t\t\tambient_color +=\tmask1 * ambient_color;\t// * gl_LightSource[i].ambient;\",\r\n\t\t\"\t\t\t\t\t\tdiffuse_color +=\tmask1 * lambertTerm;\",\r\n\t\t\"\t\t\t\t\t\tspecular_color += mask1 * specularTerm * specular_color;\",\r\n\t\t\"\t\t\t\t}\",\r\n\r\n\t\t// Calculate final color by componing different components\r\n\t\t\"\t\t\t\tvec4 final_color;\",\r\n\t\t\"\t\t\t\tvec4 color = apply_colormap(val);\",\r\n\t\t\"\t\t\t\tfinal_color = color * (ambient_color + diffuse_color) + specular_color;\",\r\n\t\t\"\t\t\t\tfinal_color.a = color.a;\",\r\n\t\t\"\t\t\t\treturn final_color;\",\r\n\t\t\"\t\t}\",\r\n\t].join( \"\\n\" )\r\n};\r\n\r\nexport { VolumeRenderShader1 };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/shaders/VolumeShader.js","<template>\r\n    <div class=\"webgl2MaterialsTexture3d-container\">\r\n        <div id=\"info\">\r\n            <a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> - Float volume render test (mip / isosurface)\r\n        </div>\r\n        <div id=\"inset\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { GUI } from '@/components/jsm/libs/dat.gui.module.js'\r\nimport { OrbitControls } from '@/components/jsm/controls/OrbitControls.js'\r\nimport { NRRDLoader } from '@/components/jsm/loaders/NRRDLoader.js'\r\nimport { VolumeRenderShader1 } from '@/components/jsm/shaders/VolumeShader.js'\r\nimport { WEBGL } from '@/components/jsm/WebGL.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            renderer: null,\r\n\t\t\tscene: null,\r\n\t\t\tcamera: null,\r\n\t\t\tcontrols: null,\r\n\t\t\tmaterial: null,\r\n\t\t\tvolconfig: null,\r\n            cmtextures: null,\r\n            gui: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        if (WEBGL.isWebGL2Available() === false) {\r\n\t\t\tdocument.getElementsByClassName('webgl2MaterialsTexture3d-container')[0].appendChild(WEBGL.getWebGL2ErrorMessage())\r\n        }\r\n        this.init()\r\n    },\r\n    beforeDestroy() {\r\n        this.gui.destroy()\r\n    },\r\n    methods: {\r\n        init() {\r\n\t\t\tthis.scene = new this.$THREE.Scene()\r\n\t\t\t// Create renderer\r\n\t\t\tthis.renderer = new this.$THREE.WebGLRenderer()\r\n\t\t\tthis.renderer.setPixelRatio(window.devicePixelRatio)\r\n\t\t\tthis.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n\t\t\tdocument.getElementsByClassName('webgl2MaterialsTexture3d-container')[0].appendChild(this.renderer.domElement)\r\n\t\t\t// Create camera (The volume this.renderer does not work very well with perspective yet)\r\n\t\t\tvar h = 512 // frustum height\r\n\t\t\tvar aspect = this.$webglInnerWidth / window.innerHeight\r\n\t\t\tthis.camera = new this.$THREE.OrthographicCamera(- h * aspect / 2, h * aspect / 2, h / 2, - h / 2, 1, 1000)\r\n\t\t\tthis.camera.position.set(0, 0, 128)\r\n\t\t\tthis.camera.up.set(0, 0, 1) // In our data, z is up\r\n\t\t\t// Create controls\r\n\t\t\tthis.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n\t\t\tthis.controls.addEventListener('change', this.render)\r\n\t\t\tthis.controls.target.set(64, 64, 128)\r\n\t\t\tthis.controls.minZoom = 0.5\r\n\t\t\tthis.controls.maxZoom = 4\r\n\t\t\tthis.controls.update()\r\n\t\t\t// this.scene.add(new AxesHelper(128))\r\n\t\t\t// Lighting is baked into the shader a.t.m.\r\n\t\t\t// let dirLight = new DirectionalLight(0xffffff)\r\n\t\t\t// The gui for interaction\r\n\t\t\tthis.volconfig = { clim1: 0, clim2: 1, renderstyle: 'iso', isothreshold: 0.15, colormap: 'viridis' }\r\n\t\t\tthis.gui = new GUI()\r\n\t\t\tthis.gui.add(this.volconfig, 'clim1', 0, 1, 0.01).onChange(this.updateUniforms)\r\n\t\t\tthis.gui.add(this.volconfig, 'clim2', 0, 1, 0.01).onChange(this.updateUniforms)\r\n\t\t\tthis.gui.add(this.volconfig, 'colormap', { gray: 'gray', viridis: 'viridis' }).onChange(this.updateUniforms)\r\n\t\t\tthis.gui.add(this.volconfig, 'renderstyle', { mip: 'mip', iso: 'iso' }).onChange(this.updateUniforms)\r\n\t\t\tthis.gui.add(this.volconfig, 'isothreshold', 0, 1, 0.01).onChange(this.updateUniforms)\r\n\t\t\t// Load the data ...\r\n\t\t\tnew NRRDLoader().load(\"static/models/nrrd/stent.nrrd\", (volume) => {\r\n\t\t\t\t// Texture to hold the volume. We have scalars, so we put our data in the red channel.\r\n\t\t\t\t// this.$THREEJS will select R32F (33326) based on the this.$THREE.RedFormat and this.$THREE.FloatType.\r\n\t\t\t\t// Also see https://www.khronos.org/registry/webgl/specs/latest/2.0/#TEXTURE_TYPES_FORMATS_FROM_DOM_ELEMENTS_TABLE\r\n\t\t\t\t// TODO: look the dtype up in the volume metadata\r\n\t\t\t\tvar texture = new this.$THREE.DataTexture3D(volume.data, volume.xLength, volume.yLength, volume.zLength)\r\n\t\t\t\ttexture.format = this.$THREE.RedFormat\r\n\t\t\t\ttexture.type = this.$THREE.FloatType\r\n\t\t\t\ttexture.minFilter = texture.magFilter = this.$THREE.LinearFilter\r\n\t\t\t\ttexture.unpackAlignment = 1\r\n\t\t\t\t// Colormap textures\r\n\t\t\t\tthis.cmtextures = {\r\n\t\t\t\t\tviridis: new this.$THREE.TextureLoader().load('static/textures/cm_viridis.png', this.render),\r\n\t\t\t\t\tgray: new this.$THREE.TextureLoader().load('static/textures/cm_gray.png', this.render)\r\n\t\t\t\t}\r\n\t\t\t\t// Material\r\n\t\t\t\tvar shader = VolumeRenderShader1\r\n\t\t\t\tvar uniforms = this.$THREE.UniformsUtils.clone(shader.uniforms)\r\n\t\t\t\tuniforms[ \"u_data\" ].value = texture\r\n\t\t\t\tuniforms[ \"u_size\" ].value.set(volume.xLength, volume.yLength, volume.zLength)\r\n\t\t\t\tuniforms[ \"u_clim\" ].value.set(this.volconfig.clim1, this.volconfig.clim2)\r\n\t\t\t\tuniforms[ \"u_renderstyle\" ].value = this.volconfig.renderstyle == 'mip' ? 0 : 1 // 0: MIP, 1: ISO\r\n\t\t\t\tuniforms[ \"u_renderthreshold\" ].value = this.volconfig.isothreshold // For ISO renderstyle\r\n\t\t\t\tuniforms[ \"u_cmdata\" ].value = this.cmtextures[ this.volconfig.colormap ]\r\n\t\t\t\tthis.material = new this.$THREE.ShaderMaterial({\r\n\t\t\t\t\tuniforms: uniforms,\r\n\t\t\t\t\tvertexShader: shader.vertexShader,\r\n\t\t\t\t\tfragmentShader: shader.fragmentShader,\r\n\t\t\t\t\tside: this.$THREE.BackSide // The volume shader uses the backface as its \"reference point\"\r\n\t\t\t\t})\r\n\t\t\t\t// this.$THREE.Mesh\r\n\t\t\t\tvar geometry = new this.$THREE.BoxBufferGeometry(volume.xLength, volume.yLength, volume.zLength)\r\n\t\t\t\tgeometry.translate(volume.xLength / 2 - 0.5, volume.yLength / 2 - 0.5, volume.zLength / 2 - 0.5)\r\n\t\t\t\tvar mesh = new this.$THREE.Mesh(geometry, this.material)\r\n\t\t\t\tthis.scene.add(mesh)\r\n\t\t\t\tthis.render()\r\n\t\t\t})\r\n\t\t\twindow.addEventListener('resize', this.onWindowResize, false)\r\n        },\r\n        updateUniforms() {\r\n\t\t\tthis.material.uniforms[ \"u_clim\" ].value.set(this.volconfig.clim1, this.volconfig.clim2)\r\n\t\t\tthis.material.uniforms[ \"u_renderstyle\" ].value = this.volconfig.renderstyle == 'mip' ? 0 : 1 // 0: MIP, 1: ISO\r\n\t\t\tthis.material.uniforms[ \"u_renderthreshold\" ].value = this.volconfig.isothreshold // For ISO renderstyle\r\n\t\t\tthis.material.uniforms[ \"u_cmdata\" ].value = this.cmtextures[ this.volconfig.colormap ]\r\n\t\t\tthis.render()\r\n        },\r\n        onWindowResize() {\r\n\t\t\tthis.renderer.setSize(window.innerWidth - 281, window.innerHeight)\r\n\t\t\tvar aspect = (window.innerWidth - 281 )/ window.innerHeight\r\n\t\t\tvar frustumHeight = this.camera.top - this.camera.bottom\r\n\t\t\tthis.camera.left = - frustumHeight * aspect / 2\r\n\t\t\tthis.camera.right = frustumHeight * aspect / 2\r\n\t\t\tthis.camera.updateProjectionMatrix()\r\n\t\t\tthis.render()\r\n        },\r\n        render() {\r\n\t\t\tthis.renderer.render(this.scene, this.camera)\r\n\t\t}\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.webgl2MaterialsTexture3d-container {\r\n    width: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/materials/webgl2MaterialsTexture3d.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"webgl2MaterialsTexture3d-container\"},[_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" - Float volume render test (mip / isosurface)\\n    \")]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"inset\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-4985ab4e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/materials/webgl2MaterialsTexture3d.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-4985ab4e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webgl2MaterialsTexture3d.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webgl2MaterialsTexture3d.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webgl2MaterialsTexture3d.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-4985ab4e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webgl2MaterialsTexture3d.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-4985ab4e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/materials/webgl2MaterialsTexture3d.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}