webpackJsonp([55],{"5cG8":function(t,e){},eBBl:function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n("wIBv"),r=n("6+nK"),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){};a.prototype={constructor:a,parse:function(t,e,n){function i(e){t.traverse(function(t){if(!0===t.isMesh){var n=t,i=n.geometry;!0===i.isGeometry&&(i=s.get(i)),!0===i.isBufferGeometry&&void 0!==i.getAttribute("position")&&e(n,i)}})}e&&"object"===(void 0===e?"undefined":o(e))&&(console.warn('THREE.PLYExporter: The options parameter is now the third argument to the "parse" function. See the documentation for the new API.'),n=e,e=void 0);var a=(n=Object.assign({binary:!1,excludeAttributes:[],littleEndian:!1},n)).excludeAttributes,s=new WeakMap,l=!1,d=!1,c=!1,h=0,u=0;t.traverse(function(t){if(!0===t.isMesh){var e=t,n=e.geometry;if(!0===n.isGeometry){var i=s.get(n)||(new r.m).setFromObject(e);s.set(n,i),n=i}if(!0===n.isBufferGeometry){var o=n.getAttribute("position"),a=n.getAttribute("normal"),p=n.getAttribute("uv"),f=n.getAttribute("color"),m=n.getIndex();if(void 0===o)return;h+=o.count,u+=m?m.count/3:o.count/3,void 0!==a&&(l=!0),void 0!==p&&(c=!0),void 0!==f&&(d=!0)}}});var p=-1===a.indexOf("index");if(l=l&&-1===a.indexOf("normal"),d=d&&-1===a.indexOf("color"),c=c&&-1===a.indexOf("uv"),p&&u!==Math.floor(u))return console.error("PLYExporter: Failed to generate a valid PLY file with triangle indices because the number of indices is not divisible by 3."),null;var f="ply\nformat "+(n.binary?n.littleEndian?"binary_little_endian":"binary_big_endian":"ascii")+" 1.0\nelement vertex "+h+"\nproperty float x\nproperty float y\nproperty float z\n";!0===l&&(f+="property float nx\nproperty float ny\nproperty float nz\n"),!0===c&&(f+="property float s\nproperty float t\n"),!0===d&&(f+="property uchar red\nproperty uchar green\nproperty uchar blue\n"),!0===p&&(f+="element face "+u+"\nproperty list uchar int vertex_index\n"),f+="end_header\n";var m=new r._105,y=new r._27,g=null;if(!0===n.binary){var E=(new TextEncoder).encode(f),v=h*(12+(l?12:0)+(d?3:0)+(c?8:0)),x=p?13*u:0,b=new DataView(new ArrayBuffer(E.length+v+x));new Uint8Array(b.buffer).set(E,0);var w=E.length,B=E.length+v,A=0;i(function(t,e){var i=e.getAttribute("position"),r=e.getAttribute("normal"),o=e.getAttribute("uv"),a=e.getAttribute("color"),s=e.getIndex();y.getNormalMatrix(t.matrixWorld);for(var h=0,u=i.count;h<u;h++)m.x=i.getX(h),m.y=i.getY(h),m.z=i.getZ(h),m.applyMatrix4(t.matrixWorld),b.setFloat32(w,m.x,n.littleEndian),w+=4,b.setFloat32(w,m.y,n.littleEndian),w+=4,b.setFloat32(w,m.z,n.littleEndian),w+=4,!0===l&&(null!=r?(m.x=r.getX(h),m.y=r.getY(h),m.z=r.getZ(h),m.applyMatrix3(y).normalize(),b.setFloat32(w,m.x,n.littleEndian),w+=4,b.setFloat32(w,m.y,n.littleEndian),w+=4,b.setFloat32(w,m.z,n.littleEndian),w+=4):(b.setFloat32(w,0,n.littleEndian),w+=4,b.setFloat32(w,0,n.littleEndian),w+=4,b.setFloat32(w,0,n.littleEndian),w+=4)),!0===c&&(null!=o?(b.setFloat32(w,o.getX(h),n.littleEndian),w+=4,b.setFloat32(w,o.getY(h),n.littleEndian),w+=4):!1!==c&&(b.setFloat32(w,0,n.littleEndian),w+=4,b.setFloat32(w,0,n.littleEndian),w+=4)),!0===d&&(null!=a?(b.setUint8(w,Math.floor(255*a.getX(h))),w+=1,b.setUint8(w,Math.floor(255*a.getY(h))),w+=1,b.setUint8(w,Math.floor(255*a.getZ(h))),w+=1):(b.setUint8(w,255),w+=1,b.setUint8(w,255),w+=1,b.setUint8(w,255),w+=1));if(!0===p)if(null!==s)for(h=0,u=s.count;h<u;h+=3)b.setUint8(B,3),B+=1,b.setUint32(B,s.getX(h+0)+A,n.littleEndian),B+=4,b.setUint32(B,s.getX(h+1)+A,n.littleEndian),B+=4,b.setUint32(B,s.getX(h+2)+A,n.littleEndian),B+=4;else for(h=0,u=i.count;h<u;h+=3)b.setUint8(B,3),B+=1,b.setUint32(B,A+h,n.littleEndian),B+=4,b.setUint32(B,A+h+1,n.littleEndian),B+=4,b.setUint32(B,A+h+2,n.littleEndian),B+=4;A+=i.count}),g=b.buffer}else{A=0;var M="",R="";i(function(t,e){var n=e.getAttribute("position"),i=e.getAttribute("normal"),r=e.getAttribute("uv"),o=e.getAttribute("color"),a=e.getIndex();y.getNormalMatrix(t.matrixWorld);for(var s=0,h=n.count;s<h;s++){m.x=n.getX(s),m.y=n.getY(s),m.z=n.getZ(s),m.applyMatrix4(t.matrixWorld);var f=m.x+" "+m.y+" "+m.z;!0===l&&(null!=i?(m.x=i.getX(s),m.y=i.getY(s),m.z=i.getZ(s),m.applyMatrix3(y).normalize(),f+=" "+m.x+" "+m.y+" "+m.z):f+=" 0 0 0"),!0===c&&(null!=r?f+=" "+r.getX(s)+" "+r.getY(s):!1!==c&&(f+=" 0 0")),!0===d&&(f+=null!=o?" "+Math.floor(255*o.getX(s))+" "+Math.floor(255*o.getY(s))+" "+Math.floor(255*o.getZ(s)):" 255 255 255"),M+=f+"\n"}if(!0===p){if(null!==a)for(s=0,h=a.count;s<h;s+=3)R+="3 "+(a.getX(s+0)+A),R+=" "+(a.getX(s+1)+A),R+=" "+(a.getX(s+2)+A)+"\n";else for(s=0,h=n.count;s<h;s+=3)R+="3 "+(A+s)+" "+(A+s+1)+" "+(A+s+2)+"\n";u+=a?a.count/3:n.count/3}A+=n.count}),g=""+f+M+(p?R+"\n":"\n")}return"function"==typeof e&&requestAnimationFrame(function(){return e(g)}),g}};var s={data:function(){return{scene:null,camera:null,renderer:null,exporter:null,mesh:null,link:null}},mounted:function(){this.link=document.createElement("a"),this.link.style.display="none",document.getElementsByClassName("miscExporterPly-container")[0].appendChild(this.link),this.init(),this.animate()},methods:{init:function(){this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.set(200,100,200),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(10526880),this.scene.fog=new this.$THREE.Fog(10526880,200,1e3),this.exporter=new a;var t=new this.$THREE.HemisphereLight(16777215,4473924);t.position.set(0,200,0),this.scene.add(t);var e=new this.$THREE.DirectionalLight(16777215);e.position.set(0,200,100),e.castShadow=!0,e.shadow.camera.top=180,e.shadow.camera.bottom=-100,e.shadow.camera.left=-120,e.shadow.camera.right=120,this.scene.add(e);var n=new this.$THREE.Mesh(new this.$THREE.PlaneBufferGeometry(2e3,2e3),new this.$THREE.MeshPhongMaterial({color:10066329,depthWrite:!1}));n.rotation.x=-Math.PI/2,n.receiveShadow=!0,this.scene.add(n);var r=new this.$THREE.GridHelper(2e3,20,0,0);r.material.opacity=.2,r.material.transparent=!0,this.scene.add(r);var o=new this.$THREE.BoxBufferGeometry(50,50,50),s=new this.$THREE.MeshPhongMaterial({color:65280});this.mesh=new this.$THREE.Mesh(o,s),this.mesh.castShadow=!0,this.mesh.position.y=25,this.scene.add(this.mesh),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,document.getElementsByClassName("miscExporterPly-container")[0].appendChild(this.renderer.domElement);var l=new i.b(this.camera,this.renderer.domElement);l.target.set(0,25,0),l.update(),window.addEventListener("resize",this.onWindowResize,!1),document.getElementById("exportASCII").addEventListener("click",this.exportASCII),document.getElementById("exportBinaryBigEndian").addEventListener("click",this.exportBinaryBigEndian),document.getElementById("exportBinaryLittleEndian").addEventListener("click",this.exportBinaryLittleEndian)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.renderer.render(this.scene,this.camera)},exportASCII:function(){var t=this;this.exporter.parse(this.mesh,function(e){t.saveString(e,"box.ply")})},exportBinaryBigEndian:function(){var t=this;this.exporter.parse(this.mesh,function(e){t.saveArrayBuffer(e,"box.ply")},{binary:!0})},exportBinaryLittleEndian:function(){var t=this;this.exporter.parse(this.mesh,function(e){t.saveArrayBuffer(e,"box.ply")},{binary:!0,littleEndian:!0})},save:function(t,e){this.link.href=URL.createObjectURL(t),this.link.download=e,this.link.click()},saveString:function(t,e){this.save(new Blob([t],{type:"text/plain"}),e)},saveArrayBuffer:function(t,e){this.save(new Blob([t],{type:"application/octet-stream"}),e)}}},l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"miscExporterPly-container"},[n("div",{attrs:{id:"info"}},[n("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[t._v("three.js")]),t._v(" webgl - exporter - ply"),n("br"),n("br"),t._v(" "),n("button",{attrs:{id:"exportASCII"}},[t._v("export ASCII")]),t._v(" "),n("button",{attrs:{id:"exportBinaryBigEndian"}},[t._v("export binary (Big Endian)")]),t._v(" "),n("button",{attrs:{id:"exportBinaryLittleEndian"}},[t._v("export binary (Little Endian)")])])])}]};var d=n("VU/8")(s,l,!1,function(t){n("5cG8")},"data-v-e1a49e38",null);e.default=d.exports}});
//# sourceMappingURL=55.91b8811d9aa2d78777ef.js.map