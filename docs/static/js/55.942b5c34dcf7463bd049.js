webpackJsonp([55],{TrA0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("wIBv"),i=r("VELm"),n=r("QEtz"),s={data:function(){return{camera:null,scene:null,renderer:null,object:null,loader:null,controls:null,params:null,assets:null,gui:null}},mounted:function(){this.params={asset:"cube_gears"},this.assets=["cube_gears","facecolors","multipletextures","vertexcolors"],this.init()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var e=this;this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglLoader3mf-container")[0].appendChild(this.renderer.domElement),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(3355443),this.scene.add(new this.$THREE.AmbientLight(16777215,.2)),this.camera=new this.$THREE.PerspectiveCamera(35,this.$webglInnerWidth/window.innerHeight,1,500),this.camera.up.set(0,0,1),this.camera.position.set(-100,-250,100),this.scene.add(this.camera),this.controls=new a.b(this.camera,this.renderer.domElement),this.controls.addEventListener("change",this.render),this.controls.minDistance=50,this.controls.maxDistance=400,this.controls.enablePan=!1,this.controls.update();var t=new this.$THREE.PointLight(16777215,.8);this.camera.add(t);var r=new this.$THREE.LoadingManager;r.onLoad=function(){var t=(new e.$THREE.Box3).setFromObject(e.object).getCenter(new e.$THREE.Vector3);e.object.position.x+=e.object.position.x-t.x,e.object.position.y+=e.object.position.y-t.y,e.object.position.z+=e.object.position.z-t.z,e.controls.reset(),e.scene.add(e.object),e.render()},this.loader=new i.a(r),this.loadAsset(this.params.asset),window.addEventListener("resize",this.onWindowResize,!1),this.gui=new n.a({width:300}),this.gui.add(this.params,"asset",this.assets).onChange(function(t){e.loadAsset(t)})},loadAsset:function(e){var t=this;this.loader.load("static/models/3mf/"+e+".3mf",function(e){t.object&&(t.object.traverse(function(e){e.material&&e.material.dispose(),e.material&&e.material.map&&e.material.map.dispose(),e.geometry&&e.geometry.dispose()}),t.scene.remove(t.object)),t.object=e})},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"webglLoader3mf-container"},[r("div",{attrs:{id:"info"}},[r("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[e._v("three.js")]),e._v(" "),r("a",{attrs:{href:"http://3mf.io",target:"_blank",rel:"noopener"}},[e._v("3MF File format")]),e._v(" "),r("div",[e._v("3MF loader test by "),r("a",{attrs:{href:"https://github.com/technohippy",target:"_blank",rel:"noopener"}},[e._v("technohippy")])]),e._v(" "),r("div",[e._v("Files from "),r("a",{attrs:{href:"https://github.com/3MFConsortium/3mf-samples",target:"_blank",rel:"noopener"}},[e._v("3mf-samples")])])])])}]};var l=r("VU/8")(s,o,!1,function(e){r("ev1b")},"data-v-7406e69c",null);t.default=l.exports},VELm:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r("6+nK"),i=r("w45l"),n=function(e){a.Loader.call(this,e),this.availableExtensions=[]};n.prototype=Object.assign(Object.create(a.Loader.prototype),{constructor:n,load:function(e,t,r,i){var n=this,s=new a.FileLoader(n.manager);s.setPath(n.path),s.setResponseType("arraybuffer"),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(r){try{t(n.parse(r))}catch(t){i?i(t):console.error(t),n.manager.itemError(e)}},r,i)},parse:function(e){var t=this,r=new a.TextureLoader(this.manager);function n(e){for(var t=[],r=(new DOMParser).parseFromString(e,"application/xml").querySelectorAll("Relationship"),a=0;a<r.length;a++){var i=r[a],n={target:i.getAttribute("Target"),id:i.getAttribute("Id"),type:i.getAttribute("Type")};t.push(n)}return t}function s(e){for(var t={id:e.getAttribute("id"),basematerials:[]},r=e.querySelectorAll("base"),a=0;a<r.length;a++){var i=p(r[a]);i.index=a,t.basematerials.push(i)}return t}function o(e){for(var t={id:e.getAttribute("id"),texid:e.getAttribute("texid"),displaypropertiesid:e.getAttribute("displaypropertiesid")},r=e.querySelectorAll("tex2coord"),a=[],i=0;i<r.length;i++){var n=r[i],s=n.getAttribute("u"),o=n.getAttribute("v");a.push(parseFloat(s),parseFloat(o))}return t.uvs=new Float32Array(a),t}function l(e){for(var t={id:e.getAttribute("id"),displaypropertiesid:e.getAttribute("displaypropertiesid")},r=e.querySelectorAll("color"),i=[],n=new a.Color,s=0;s<r.length;s++){var o=r[s].getAttribute("color");n.setStyle(o.substring(0,7)),n.convertSRGBToLinear(),i.push(n.r,n.g,n.b)}return t.colors=new Float32Array(i),t}function u(e){for(var t={id:e.getAttribute("id")},r=e.querySelectorAll("pbmetallic"),a=[],i=0;i<r.length;i++){var n=r[i];a.push({name:n.getAttribute("name"),metallicness:parseFloat(n.getAttribute("metallicness")),roughness:parseFloat(n.getAttribute("roughness"))})}return t.data=a,t}function p(e){var t={};return t.name=e.getAttribute("name"),t.displaycolor=e.getAttribute("displaycolor"),t.displaypropertiesid=e.getAttribute("displaypropertiesid"),t}function c(e){var t={};t.objectId=e.getAttribute("objectid");var r=e.getAttribute("transform");return r&&(t.transform=d(r)),t}function d(e){var t=[];e.split(" ").forEach(function(e){t.push(parseFloat(e))});var r=new a.Matrix4;return r.set(t[0],t[3],t[6],t[9],t[1],t[4],t[7],t[10],t[2],t[5],t[8],t[11],0,0,0,1),r}function h(e){var t={type:e.getAttribute("type")},r=e.getAttribute("id");r&&(t.id=r);var a=e.getAttribute("pid");a&&(t.pid=a);var i=e.getAttribute("pindex");i&&(t.pindex=i);var n=e.getAttribute("thumbnail");n&&(t.thumbnail=n);var s=e.getAttribute("partnumber");s&&(t.partnumber=s);var o=e.getAttribute("name");o&&(t.name=o);var l=e.querySelector("mesh");l&&(t.mesh=function(e){for(var t={},r=[],a=e.querySelectorAll("vertices vertex"),i=0;i<a.length;i++){var n=a[i],s=n.getAttribute("x"),o=n.getAttribute("y"),l=n.getAttribute("z");r.push(parseFloat(s),parseFloat(o),parseFloat(l))}t.vertices=new Float32Array(r);var u=[],p=[],c=e.querySelectorAll("triangles triangle");for(i=0;i<c.length;i++){var d=c[i],h=d.getAttribute("v1"),v=d.getAttribute("v2"),f=d.getAttribute("v3"),g=d.getAttribute("p1"),b=d.getAttribute("p2"),m=d.getAttribute("p3"),y=d.getAttribute("pid"),A={};A.v1=parseInt(h,10),A.v2=parseInt(v,10),A.v3=parseInt(f,10),p.push(A.v1,A.v2,A.v3),g&&(A.p1=parseInt(g,10)),b&&(A.p2=parseInt(b,10)),m&&(A.p3=parseInt(m,10)),y&&(A.pid=y),0<Object.keys(A).length&&u.push(A)}return t.triangleProperties=u,t.triangles=new Uint32Array(p),t}(l));var u=e.querySelector("components");return u&&(t.components=function(e){for(var t=[],r=e.querySelectorAll("component"),a=0;a<r.length;a++){var i=c(r[a]);t.push(i)}return t}(u)),t}function v(e){var t={unit:e.getAttribute("unit")||"millimeter"},r=e.querySelectorAll("metadata");r&&(t.metadata=function(e){for(var t={},r=0;r<e.length;r++){var a=e[r],i=a.getAttribute("name");0<=["Title","Designer","Description","Copyright","LicenseTerms","Rating","CreationDate","ModificationDate"].indexOf(i)&&(t[i]=a.textContent)}return t}(r));var a=e.querySelector("resources");a&&(t.resources=function(e){for(var t={basematerials:{}},r=e.querySelectorAll("basematerials"),a=0;a<r.length;a++){var i=s(r[a]);t.basematerials[i.id]=i}t.texture2d={};var n,p=e.querySelectorAll("texture2d");for(a=0;a<p.length;a++){var c=p[a],d={id:(n=c).getAttribute("id"),path:n.getAttribute("path"),contenttype:n.getAttribute("contenttype"),tilestyleu:n.getAttribute("tilestyleu"),tilestylev:n.getAttribute("tilestylev"),filter:n.getAttribute("filter")};t.texture2d[d.id]=d}t.colorgroup={};var v=e.querySelectorAll("colorgroup");for(a=0;a<v.length;a++){var f=l(v[a]);t.colorgroup[f.id]=f}t.pbmetallicdisplayproperties={};var g=e.querySelectorAll("pbmetallicdisplayproperties");for(a=0;a<g.length;a++){var b=u(g[a]);t.pbmetallicdisplayproperties[b.id]=b}t.texture2dgroup={};var m=e.querySelectorAll("texture2dgroup");for(a=0;a<m.length;a++){var y=o(m[a]);t.texture2dgroup[y.id]=y}t.object={};var A=e.querySelectorAll("object");for(a=0;a<A.length;a++){var w=h(A[a]);t.object[w.id]=w}return t}(a));var i=e.querySelector("build");return i&&(t.build=function(e){for(var t=[],r=e.querySelectorAll("item"),a=0;a<r.length;a++){var i=r[a],n={objectId:i.getAttribute("objectid")},s=i.getAttribute("transform");s&&(n.transform=d(s)),t.push(n)}return t}(i)),t}function f(e,t,i,n){var s=e.texid,o=i.resources.texture2d[s];if(o){var l=n[o.path],u=o.contenttype,p=new Blob([l],{type:u}),c=URL.createObjectURL(p),d=r.load(c,function(){URL.revokeObjectURL(c)});switch(d.encoding=a.sRGBEncoding,o.tilestyleu){case"wrap":d.wrapS=a.RepeatWrapping;break;case"mirror":d.wrapS=a.MirroredRepeatWrapping;break;case"none":case"clamp":d.wrapS=a.ClampToEdgeWrapping;break;default:d.wrapS=a.RepeatWrapping}switch(o.tilestylev){case"wrap":d.wrapT=a.RepeatWrapping;break;case"mirror":d.wrapT=a.MirroredRepeatWrapping;break;case"none":case"clamp":d.wrapT=a.ClampToEdgeWrapping;break;default:d.wrapT=a.RepeatWrapping}switch(o.filter){case"auto":d.magFilter=a.LinearFilter,d.minFilter=a.LinearMipmapLinearFilter;break;case"linear":d.magFilter=a.LinearFilter,d.minFilter=a.LinearFilter;break;case"nearest":d.magFilter=a.NearestFilter,d.minFilter=a.NearestFilter;break;default:d.magFilter=a.LinearFilter,d.minFilter=a.LinearMipmapLinearFilter}return d}return null}function g(e,t,r,i,n,s){for(var o=s.pindex,l={},u=0,p=t.length;u<p;u++){var c=void 0!==(F=t[u]).p1?F.p1:o;void 0===l[c]&&(l[c]=[]),l[c].push(F)}var d=Object.keys(l),h=[];for(u=0,p=d.length;u<p;u++){for(var v=d[u],f=l[v],g=x(e.basematerials[v],S,r,n,s,E),b=new a.BufferGeometry,m=[],y=i.vertices,A=0,w=f.length;A<w;A++){var F=f[A];m.push(y[3*F.v1+0]),m.push(y[3*F.v1+1]),m.push(y[3*F.v1+2]),m.push(y[3*F.v2+0]),m.push(y[3*F.v2+1]),m.push(y[3*F.v2+2]),m.push(y[3*F.v3+0]),m.push(y[3*F.v3+1]),m.push(y[3*F.v3+2])}b.setAttribute("position",new a.Float32BufferAttribute(m,3));var j=new a.Mesh(b,g);h.push(j)}return h}function b(e,t,r,i,n,s){for(var o=new a.BufferGeometry,l=[],u=[],p=i.vertices,c=e.uvs,d=0,h=t.length;d<h;d++){var v=t[d];l.push(p[3*v.v1+0]),l.push(p[3*v.v1+1]),l.push(p[3*v.v1+2]),l.push(p[3*v.v2+0]),l.push(p[3*v.v2+1]),l.push(p[3*v.v2+2]),l.push(p[3*v.v3+0]),l.push(p[3*v.v3+1]),l.push(p[3*v.v3+2]),u.push(c[2*v.p1+0]),u.push(c[2*v.p1+1]),u.push(c[2*v.p2+0]),u.push(c[2*v.p2+1]),u.push(c[2*v.p3+0]),u.push(c[2*v.p3+1])}o.setAttribute("position",new a.Float32BufferAttribute(l,3)),o.setAttribute("uv",new a.Float32BufferAttribute(u,2));var g=x(e,S,r,n,s,f),b=new a.MeshPhongMaterial({map:g,flatShading:!0});return new a.Mesh(o,b)}function m(e,t,r,i,n){for(var s=new a.BufferGeometry,o=[],l=[],u=i.vertices,p=e.colors,c=0,d=t.length;c<d;c++){var h=t[c],v=h.v1,f=h.v2,g=h.v3;o.push(u[3*v+0]),o.push(u[3*v+1]),o.push(u[3*v+2]),o.push(u[3*f+0]),o.push(u[3*f+1]),o.push(u[3*f+2]),o.push(u[3*g+0]),o.push(u[3*g+1]),o.push(u[3*g+2]);var b=void 0!==h.p1?h.p1:n.pindex,m=void 0!==h.p2?h.p2:b,y=void 0!==h.p3?h.p3:b;l.push(p[3*b+0]),l.push(p[3*b+1]),l.push(p[3*b+2]),l.push(p[3*m+0]),l.push(p[3*m+1]),l.push(p[3*m+2]),l.push(p[3*y+0]),l.push(p[3*y+1]),l.push(p[3*y+2])}s.setAttribute("position",new a.Float32BufferAttribute(o,3)),s.setAttribute("color",new a.Float32BufferAttribute(l,3));var A=new a.MeshPhongMaterial({vertexColors:!0,flatShading:!0});return new a.Mesh(s,A)}function y(e){var t=new a.BufferGeometry;t.setIndex(new a.BufferAttribute(e.triangles,1)),t.setAttribute("position",new a.BufferAttribute(e.vertices,3));var r=new a.MeshPhongMaterial({color:11184895,flatShading:!0});return new a.Mesh(t,r)}function A(e,t){return void 0!==t.resources.texture2dgroup[e]?"texture":void 0!==t.resources.basematerials[e]?"material":void 0!==t.resources.colorgroup[e]?"vertexColors":"default"===e?"default":void 0}function w(e,t,r,i,n){for(var s=new a.Group,o=function(e,t,r,a,i){for(var n=Object.keys(e),s=[],o=0,l=n.length;o<l;o++){var u=n[o],p=e[u];switch(A(u,t)){case"material":for(var c=g(t.resources.basematerials[u],p,t,r,a,i),d=0,h=c.length;d<h;d++)s.push(c[d]);break;case"texture":var v=t.resources.texture2dgroup[u];s.push(b(v,p,t,r,a,i));break;case"vertexColors":var f=t.resources.colorgroup[u];s.push(m(f,p,0,r,i));break;case"default":s.push(y(r));break;default:console.error("THREE.3MFLoader: Unsupported resource type.")}}return s}(function(e,t,r){for(var a={},i=t.triangleProperties,n=r.pid,s=0,o=i.length;s<o;s++){var l=i[s],u=void 0!==l.pid?l.pid:n;void 0===u&&(u="default"),void 0===a[u]&&(a[u]=[]),a[u].push(l)}return a}(0,e,n),r,e,i,n),l=0,u=o.length;l<u;l++)s.add(o[l]);return s}function x(e,t,r,a,i,n){return void 0!==e.build?e.build:(e.build=n(e,t,r,a,i),e.build)}function E(e,t,r){var i,n=e.displaypropertiesid,s=r.resources.pbmetallicdisplayproperties;if(null!==n&&void 0!==s[n]){var o=s[n].data[e.index];i=new a.MeshStandardMaterial({flatShading:!0,roughness:o.roughness,metalness:o.metallicness})}else i=new a.MeshPhongMaterial({flatShading:!0});i.name=e.name;var l=e.displaycolor,u=l.substring(0,7);return i.color.setStyle(u),i.color.convertSRGBToLinear(),9===l.length&&(i.opacity=parseInt(l.charAt(7)+l.charAt(8),16)/255),i}function F(e,t,r,i){for(var n=new a.Group,s=0;s<e.length;s++){var o=e[s],l=t[o.objectId];void 0===l&&(j(o.objectId,t,r,i),l=t[o.objectId]);var u=l.clone(),p=o.transform;p&&u.applyMatrix4(p),n.add(u)}return n}function j(e,r,a,i){var n=a.resources.object[e];if(n.mesh){var s=n.mesh;!function(e,r,a){if(e){for(var i=[],n=Object.keys(e),s=0;s<n.length;s++)for(var o=n[s],l=0;l<t.availableExtensions.length;l++)(u=t.availableExtensions[l]).ns===o&&i.push(u);for(s=0;s<i.length;s++){var u;(u=i[s]).apply(a,e[u.ns],r)}}}(a.extensions,s,a.xml),r[n.id]=x(s,r,a,i,n,w)}else{var o=n.components;r[n.id]=x(o,r,a,i,n,F)}}var R=function(e){var t,r,s,o,l=null,u=null,p=[],c=[],d=[],h=[],f={},g={};try{l=new i.a(e)}catch(e){if(e instanceof ReferenceError)return console.error("THREE.3MFLoader: jszip missing and file is compressed."),null}for(u in l.files)u.match(/\_rels\/.rels$/)?t=u:u.match(/3D\/_rels\/.*\.model\.rels$/)?r=u:u.match(/^3D\/.*\.model$/)?p.push(u):u.match(/^3D\/Metadata\/.*\.xml$/)?c.push(u):u.match(/^3D\/Textures?\/.*/)?d.push(u):u.match(/^3D\/Other\/.*/)&&h.push(u);var b=new Uint8Array(l.file(t).asArrayBuffer());s=n(a.LoaderUtils.decodeText(b)),r&&(b=new Uint8Array(l.file(r).asArrayBuffer()),o=n(a.LoaderUtils.decodeText(b)));for(var m=0;m<p.length;m++){var y=p[m],A=new Uint8Array(l.file(y).asArrayBuffer()),w=a.LoaderUtils.decodeText(A),x=(new DOMParser).parseFromString(w,"application/xml");"model"!==x.documentElement.nodeName.toLowerCase()&&console.error("THREE.3MFLoader: Error loading 3MF - no 3MF document found: ",y);var E=x.querySelector("model"),F={};for(m=0;m<E.attributes.length;m++){var j=E.attributes[m];j.name.match(/^xmlns:(.+)$/)&&(F[j.value]=RegExp.$1)}var R=v(E);R.xml=E,0<Object.keys(F).length&&(R.extensions=F),f[y]=R}for(m=0;m<d.length;m++){var S=d[m];g[S]=l.file(S).asArrayBuffer()}return{rels:s,modelRels:o,model:f,printTicket:{},texture:g,other:{}}}(e),S=function(e){var t=e.model,r=e.modelRels,a={},i=Object.keys(t),n={};if(r)for(var s=0,o=r.length;s<o;s++){var l=r[s],u=l.target.substring(1);e.texture[u]&&(n[l.target]=e.texture[u])}for(s=0;s<i.length;s++)for(var p=t[i[s]],c=Object.keys(p.resources.object),d=0;d<c.length;d++)j(c[d],a,p,n);return a}(R);return function(e,t){for(var r=new a.Group,i=t.rels[0],n=t.model[i.target.substring(1)].build,s=0;s<n.length;s++){var o=n[s],l=e[o.objectId],u=o.transform;u&&l.applyMatrix4(u),r.add(l)}return r}(S,R)},addExtension:function(e){this.availableExtensions.push(e)}})},ev1b:function(e,t){}});
//# sourceMappingURL=55.942b5c34dcf7463bd049.js.map