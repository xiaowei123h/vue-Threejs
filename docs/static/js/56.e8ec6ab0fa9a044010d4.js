webpackJsonp([56],{B6bD:function(e,t){},JS46:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("wIBv"),i=r("VELm"),n={data:function(){return{camera:null,scene:null,renderer:null}},mounted:function(){this.init()},methods:{init:function(){var e=this;this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(10526880),this.scene.fog=new this.$THREE.Fog(10526880,10,500),this.camera=new this.$THREE.PerspectiveCamera(35,this.$webglInnerWidth/window.innerHeight,1,500),this.camera.position.set(-50,40,50),this.scene.add(this.camera);var t=new this.$THREE.HemisphereLight(16777215,4473924);t.position.set(0,100,0),this.scene.add(t);var r=new this.$THREE.DirectionalLight(16777215);r.position.set(-0,40,50),r.castShadow=!0,r.shadow.camera.top=50,r.shadow.camera.bottom=-25,r.shadow.camera.left=-25,r.shadow.camera.right=25,r.shadow.camera.near=.1,r.shadow.camera.far=200,r.shadow.mapSize.set(1024,1024),this.scene.add(r);var n=new this.$THREE.LoadingManager;new i.a(n).load("static/models/3mf/truck.3mf",function(t){t.quaternion.setFromEuler(new e.$THREE.Euler(-Math.PI/2,0,0)),t.traverse(function(e){e.castShadow=!0}),e.scene.add(t)}),n.onLoad=function(){e.render()};var s=new this.$THREE.Mesh(new this.$THREE.PlaneBufferGeometry(1e3,1e3),new this.$THREE.MeshPhongMaterial({color:10066329,depthWrite:!1}));s.rotation.x=-Math.PI/2,s.position.y=11,s.receiveShadow=!0,this.scene.add(s),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.renderer.shadowMap.enabled=!0,this.renderer.shadowMap.type=this.$THREE.PCFSoftShadowMap,document.getElementsByClassName("webglLoader3mfMaterials-container")[0].appendChild(this.renderer.domElement);var o=new a.b(this.camera,this.renderer.domElement);o.addEventListener("change",this.render),o.minDistance=50,o.maxDistance=200,o.enablePan=!1,o.target.set(0,20,0),o.update(),window.addEventListener("resize",this.onWindowResize,!1),this.render()},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoader3mfMaterials-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" -\n\t\t\t"),t("a",{attrs:{href:"http://3mf.io",target:"_blank",rel:"noopener"}},[this._v("3MF")]),this._v(" file with materials\n\t\t")])])}]};var o=r("VU/8")(n,s,!1,function(e){r("B6bD")},"data-v-0b5787d7",null);t.default=o.exports},VELm:function(e,t,r){"use strict";r.d(t,"a",function(){return n});var a=r("6+nK"),i=r("w45l"),n=function(e){a.Loader.call(this,e),this.availableExtensions=[]};n.prototype=Object.assign(Object.create(a.Loader.prototype),{constructor:n,load:function(e,t,r,i){var n=this,s=new a.FileLoader(n.manager);s.setPath(n.path),s.setResponseType("arraybuffer"),s.setRequestHeader(n.requestHeader),s.setWithCredentials(n.withCredentials),s.load(e,function(r){try{t(n.parse(r))}catch(t){i?i(t):console.error(t),n.manager.itemError(e)}},r,i)},parse:function(e){var t=this,r=new a.TextureLoader(this.manager);function n(e){for(var t=[],r=(new DOMParser).parseFromString(e,"application/xml").querySelectorAll("Relationship"),a=0;a<r.length;a++){var i=r[a],n={target:i.getAttribute("Target"),id:i.getAttribute("Id"),type:i.getAttribute("Type")};t.push(n)}return t}function s(e){for(var t={id:e.getAttribute("id"),basematerials:[]},r=e.querySelectorAll("base"),a=0;a<r.length;a++){var i=p(r[a]);i.index=a,t.basematerials.push(i)}return t}function o(e){for(var t={id:e.getAttribute("id"),texid:e.getAttribute("texid"),displaypropertiesid:e.getAttribute("displaypropertiesid")},r=e.querySelectorAll("tex2coord"),a=[],i=0;i<r.length;i++){var n=r[i],s=n.getAttribute("u"),o=n.getAttribute("v");a.push(parseFloat(s),parseFloat(o))}return t.uvs=new Float32Array(a),t}function u(e){for(var t={id:e.getAttribute("id"),displaypropertiesid:e.getAttribute("displaypropertiesid")},r=e.querySelectorAll("color"),i=[],n=new a.Color,s=0;s<r.length;s++){var o=r[s].getAttribute("color");n.setStyle(o.substring(0,7)),n.convertSRGBToLinear(),i.push(n.r,n.g,n.b)}return t.colors=new Float32Array(i),t}function l(e){for(var t={id:e.getAttribute("id")},r=e.querySelectorAll("pbmetallic"),a=[],i=0;i<r.length;i++){var n=r[i];a.push({name:n.getAttribute("name"),metallicness:parseFloat(n.getAttribute("metallicness")),roughness:parseFloat(n.getAttribute("roughness"))})}return t.data=a,t}function p(e){var t={};return t.name=e.getAttribute("name"),t.displaycolor=e.getAttribute("displaycolor"),t.displaypropertiesid=e.getAttribute("displaypropertiesid"),t}function c(e){var t={};t.objectId=e.getAttribute("objectid");var r=e.getAttribute("transform");return r&&(t.transform=d(r)),t}function d(e){var t=[];e.split(" ").forEach(function(e){t.push(parseFloat(e))});var r=new a.Matrix4;return r.set(t[0],t[3],t[6],t[9],t[1],t[4],t[7],t[10],t[2],t[5],t[8],t[11],0,0,0,1),r}function h(e){var t={type:e.getAttribute("type")},r=e.getAttribute("id");r&&(t.id=r);var a=e.getAttribute("pid");a&&(t.pid=a);var i=e.getAttribute("pindex");i&&(t.pindex=i);var n=e.getAttribute("thumbnail");n&&(t.thumbnail=n);var s=e.getAttribute("partnumber");s&&(t.partnumber=s);var o=e.getAttribute("name");o&&(t.name=o);var u=e.querySelector("mesh");u&&(t.mesh=function(e){for(var t={},r=[],a=e.querySelectorAll("vertices vertex"),i=0;i<a.length;i++){var n=a[i],s=n.getAttribute("x"),o=n.getAttribute("y"),u=n.getAttribute("z");r.push(parseFloat(s),parseFloat(o),parseFloat(u))}t.vertices=new Float32Array(r);var l=[],p=[],c=e.querySelectorAll("triangles triangle");for(i=0;i<c.length;i++){var d=c[i],h=d.getAttribute("v1"),v=d.getAttribute("v2"),f=d.getAttribute("v3"),g=d.getAttribute("p1"),b=d.getAttribute("p2"),m=d.getAttribute("p3"),w=d.getAttribute("pid"),y={};y.v1=parseInt(h,10),y.v2=parseInt(v,10),y.v3=parseInt(f,10),p.push(y.v1,y.v2,y.v3),g&&(y.p1=parseInt(g,10)),b&&(y.p2=parseInt(b,10)),m&&(y.p3=parseInt(m,10)),w&&(y.pid=w),0<Object.keys(y).length&&l.push(y)}return t.triangleProperties=l,t.triangles=new Uint32Array(p),t}(u));var l=e.querySelector("components");return l&&(t.components=function(e){for(var t=[],r=e.querySelectorAll("component"),a=0;a<r.length;a++){var i=c(r[a]);t.push(i)}return t}(l)),t}function v(e){var t={unit:e.getAttribute("unit")||"millimeter"},r=e.querySelectorAll("metadata");r&&(t.metadata=function(e){for(var t={},r=0;r<e.length;r++){var a=e[r],i=a.getAttribute("name");0<=["Title","Designer","Description","Copyright","LicenseTerms","Rating","CreationDate","ModificationDate"].indexOf(i)&&(t[i]=a.textContent)}return t}(r));var a=e.querySelector("resources");a&&(t.resources=function(e){for(var t={basematerials:{}},r=e.querySelectorAll("basematerials"),a=0;a<r.length;a++){var i=s(r[a]);t.basematerials[i.id]=i}t.texture2d={};var n,p=e.querySelectorAll("texture2d");for(a=0;a<p.length;a++){var c=p[a],d={id:(n=c).getAttribute("id"),path:n.getAttribute("path"),contenttype:n.getAttribute("contenttype"),tilestyleu:n.getAttribute("tilestyleu"),tilestylev:n.getAttribute("tilestylev"),filter:n.getAttribute("filter")};t.texture2d[d.id]=d}t.colorgroup={};var v=e.querySelectorAll("colorgroup");for(a=0;a<v.length;a++){var f=u(v[a]);t.colorgroup[f.id]=f}t.pbmetallicdisplayproperties={};var g=e.querySelectorAll("pbmetallicdisplayproperties");for(a=0;a<g.length;a++){var b=l(g[a]);t.pbmetallicdisplayproperties[b.id]=b}t.texture2dgroup={};var m=e.querySelectorAll("texture2dgroup");for(a=0;a<m.length;a++){var w=o(m[a]);t.texture2dgroup[w.id]=w}t.object={};var y=e.querySelectorAll("object");for(a=0;a<y.length;a++){var A=h(y[a]);t.object[A.id]=A}return t}(a));var i=e.querySelector("build");return i&&(t.build=function(e){for(var t=[],r=e.querySelectorAll("item"),a=0;a<r.length;a++){var i=r[a],n={objectId:i.getAttribute("objectid")},s=i.getAttribute("transform");s&&(n.transform=d(s)),t.push(n)}return t}(i)),t}function f(e,t,i,n){var s=e.texid,o=i.resources.texture2d[s];if(o){var u=n[o.path],l=o.contenttype,p=new Blob([u],{type:l}),c=URL.createObjectURL(p),d=r.load(c,function(){URL.revokeObjectURL(c)});switch(d.encoding=a.sRGBEncoding,o.tilestyleu){case"wrap":d.wrapS=a.RepeatWrapping;break;case"mirror":d.wrapS=a.MirroredRepeatWrapping;break;case"none":case"clamp":d.wrapS=a.ClampToEdgeWrapping;break;default:d.wrapS=a.RepeatWrapping}switch(o.tilestylev){case"wrap":d.wrapT=a.RepeatWrapping;break;case"mirror":d.wrapT=a.MirroredRepeatWrapping;break;case"none":case"clamp":d.wrapT=a.ClampToEdgeWrapping;break;default:d.wrapT=a.RepeatWrapping}switch(o.filter){case"auto":d.magFilter=a.LinearFilter,d.minFilter=a.LinearMipmapLinearFilter;break;case"linear":d.magFilter=a.LinearFilter,d.minFilter=a.LinearFilter;break;case"nearest":d.magFilter=a.NearestFilter,d.minFilter=a.NearestFilter;break;default:d.magFilter=a.LinearFilter,d.minFilter=a.LinearMipmapLinearFilter}return d}return null}function g(e,t,r,i,n,s){for(var o=s.pindex,u={},l=0,p=t.length;l<p;l++){var c=void 0!==(R=t[l]).p1?R.p1:o;void 0===u[c]&&(u[c]=[]),u[c].push(R)}var d=Object.keys(u),h=[];for(l=0,p=d.length;l<p;l++){for(var v=d[l],f=u[v],g=E(e.basematerials[v],M,r,n,s,x),b=new a.BufferGeometry,m=[],w=i.vertices,y=0,A=f.length;y<A;y++){var R=f[y];m.push(w[3*R.v1+0]),m.push(w[3*R.v1+1]),m.push(w[3*R.v1+2]),m.push(w[3*R.v2+0]),m.push(w[3*R.v2+1]),m.push(w[3*R.v2+2]),m.push(w[3*R.v3+0]),m.push(w[3*R.v3+1]),m.push(w[3*R.v3+2])}b.setAttribute("position",new a.Float32BufferAttribute(m,3));var S=new a.Mesh(b,g);h.push(S)}return h}function b(e,t,r,i,n,s){for(var o=new a.BufferGeometry,u=[],l=[],p=i.vertices,c=e.uvs,d=0,h=t.length;d<h;d++){var v=t[d];u.push(p[3*v.v1+0]),u.push(p[3*v.v1+1]),u.push(p[3*v.v1+2]),u.push(p[3*v.v2+0]),u.push(p[3*v.v2+1]),u.push(p[3*v.v2+2]),u.push(p[3*v.v3+0]),u.push(p[3*v.v3+1]),u.push(p[3*v.v3+2]),l.push(c[2*v.p1+0]),l.push(c[2*v.p1+1]),l.push(c[2*v.p2+0]),l.push(c[2*v.p2+1]),l.push(c[2*v.p3+0]),l.push(c[2*v.p3+1])}o.setAttribute("position",new a.Float32BufferAttribute(u,3)),o.setAttribute("uv",new a.Float32BufferAttribute(l,2));var g=E(e,M,r,n,s,f),b=new a.MeshPhongMaterial({map:g,flatShading:!0});return new a.Mesh(o,b)}function m(e,t,r,i,n){for(var s=new a.BufferGeometry,o=[],u=[],l=i.vertices,p=e.colors,c=0,d=t.length;c<d;c++){var h=t[c],v=h.v1,f=h.v2,g=h.v3;o.push(l[3*v+0]),o.push(l[3*v+1]),o.push(l[3*v+2]),o.push(l[3*f+0]),o.push(l[3*f+1]),o.push(l[3*f+2]),o.push(l[3*g+0]),o.push(l[3*g+1]),o.push(l[3*g+2]);var b=void 0!==h.p1?h.p1:n.pindex,m=void 0!==h.p2?h.p2:b,w=void 0!==h.p3?h.p3:b;u.push(p[3*b+0]),u.push(p[3*b+1]),u.push(p[3*b+2]),u.push(p[3*m+0]),u.push(p[3*m+1]),u.push(p[3*m+2]),u.push(p[3*w+0]),u.push(p[3*w+1]),u.push(p[3*w+2])}s.setAttribute("position",new a.Float32BufferAttribute(o,3)),s.setAttribute("color",new a.Float32BufferAttribute(u,3));var y=new a.MeshPhongMaterial({vertexColors:!0,flatShading:!0});return new a.Mesh(s,y)}function w(e){var t=new a.BufferGeometry;t.setIndex(new a.BufferAttribute(e.triangles,1)),t.setAttribute("position",new a.BufferAttribute(e.vertices,3));var r=new a.MeshPhongMaterial({color:11184895,flatShading:!0});return new a.Mesh(t,r)}function y(e,t){return void 0!==t.resources.texture2dgroup[e]?"texture":void 0!==t.resources.basematerials[e]?"material":void 0!==t.resources.colorgroup[e]?"vertexColors":"default"===e?"default":void 0}function A(e,t,r,i,n){for(var s=new a.Group,o=function(e,t,r,a,i){for(var n=Object.keys(e),s=[],o=0,u=n.length;o<u;o++){var l=n[o],p=e[l];switch(y(l,t)){case"material":for(var c=g(t.resources.basematerials[l],p,t,r,a,i),d=0,h=c.length;d<h;d++)s.push(c[d]);break;case"texture":var v=t.resources.texture2dgroup[l];s.push(b(v,p,t,r,a,i));break;case"vertexColors":var f=t.resources.colorgroup[l];s.push(m(f,p,0,r,i));break;case"default":s.push(w(r));break;default:console.error("THREE.3MFLoader: Unsupported resource type.")}}return s}(function(e,t,r){for(var a={},i=t.triangleProperties,n=r.pid,s=0,o=i.length;s<o;s++){var u=i[s],l=void 0!==u.pid?u.pid:n;void 0===l&&(l="default"),void 0===a[l]&&(a[l]=[]),a[l].push(u)}return a}(0,e,n),r,e,i,n),u=0,l=o.length;u<l;u++)s.add(o[u]);return s}function E(e,t,r,a,i,n){return void 0!==e.build?e.build:(e.build=n(e,t,r,a,i),e.build)}function x(e,t,r){var i,n=e.displaypropertiesid,s=r.resources.pbmetallicdisplayproperties;if(null!==n&&void 0!==s[n]){var o=s[n].data[e.index];i=new a.MeshStandardMaterial({flatShading:!0,roughness:o.roughness,metalness:o.metallicness})}else i=new a.MeshPhongMaterial({flatShading:!0});i.name=e.name;var u=e.displaycolor,l=u.substring(0,7);return i.color.setStyle(l),i.color.convertSRGBToLinear(),9===u.length&&(i.opacity=parseInt(u.charAt(7)+u.charAt(8),16)/255),i}function R(e,t,r,i){for(var n=new a.Group,s=0;s<e.length;s++){var o=e[s],u=t[o.objectId];void 0===u&&(S(o.objectId,t,r,i),u=t[o.objectId]);var l=u.clone(),p=o.transform;p&&l.applyMatrix4(p),n.add(l)}return n}function S(e,r,a,i){var n=a.resources.object[e];if(n.mesh){var s=n.mesh;!function(e,r,a){if(e){for(var i=[],n=Object.keys(e),s=0;s<n.length;s++)for(var o=n[s],u=0;u<t.availableExtensions.length;u++)(l=t.availableExtensions[u]).ns===o&&i.push(l);for(s=0;s<i.length;s++){var l;(l=i[s]).apply(a,e[l.ns],r)}}}(a.extensions,s,a.xml),r[n.id]=E(s,r,a,i,n,A)}else{var o=n.components;r[n.id]=E(o,r,a,i,n,R)}}var F=function(e){var t,r,s,o,u=null,l=null,p=[],c=[],d=[],h=[],f={},g={};try{u=new i.a(e)}catch(e){if(e instanceof ReferenceError)return console.error("THREE.3MFLoader: jszip missing and file is compressed."),null}for(l in u.files)l.match(/\_rels\/.rels$/)?t=l:l.match(/3D\/_rels\/.*\.model\.rels$/)?r=l:l.match(/^3D\/.*\.model$/)?p.push(l):l.match(/^3D\/Metadata\/.*\.xml$/)?c.push(l):l.match(/^3D\/Textures?\/.*/)?d.push(l):l.match(/^3D\/Other\/.*/)&&h.push(l);var b=new Uint8Array(u.file(t).asArrayBuffer());s=n(a.LoaderUtils.decodeText(b)),r&&(b=new Uint8Array(u.file(r).asArrayBuffer()),o=n(a.LoaderUtils.decodeText(b)));for(var m=0;m<p.length;m++){var w=p[m],y=new Uint8Array(u.file(w).asArrayBuffer()),A=a.LoaderUtils.decodeText(y),E=(new DOMParser).parseFromString(A,"application/xml");"model"!==E.documentElement.nodeName.toLowerCase()&&console.error("THREE.3MFLoader: Error loading 3MF - no 3MF document found: ",w);var x=E.querySelector("model"),R={};for(m=0;m<x.attributes.length;m++){var S=x.attributes[m];S.name.match(/^xmlns:(.+)$/)&&(R[S.value]=RegExp.$1)}var F=v(x);F.xml=x,0<Object.keys(R).length&&(F.extensions=R),f[w]=F}for(m=0;m<d.length;m++){var M=d[m];g[M]=u.file(M).asArrayBuffer()}return{rels:s,modelRels:o,model:f,printTicket:{},texture:g,other:{}}}(e),M=function(e){var t=e.model,r=e.modelRels,a={},i=Object.keys(t),n={};if(r)for(var s=0,o=r.length;s<o;s++){var u=r[s],l=u.target.substring(1);e.texture[l]&&(n[u.target]=e.texture[l])}for(s=0;s<i.length;s++)for(var p=t[i[s]],c=Object.keys(p.resources.object),d=0;d<c.length;d++)S(c[d],a,p,n);return a}(F);return function(e,t){for(var r=new a.Group,i=t.rels[0],n=t.model[i.target.substring(1)].build,s=0;s<n.length;s++){var o=n[s],u=e[o.objectId],l=o.transform;l&&u.applyMatrix4(l),r.add(u)}return r}(M,F)},addExtension:function(e){this.availableExtensions.push(e)}})}});
//# sourceMappingURL=56.e8ec6ab0fa9a044010d4.js.map