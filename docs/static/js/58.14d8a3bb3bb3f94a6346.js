webpackJsonp([58],{"+Qez":function(e,t){},H59c:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n("QEtz"),r=n("wIBv"),s=n("RmjB"),a={data:function(){return{mesh:null,renderer:null,scene:null,camera:null,gui:null,lightProbe:null,directionalLight:null,API:null}},mounted:function(){this.API={lightProbeIntensity:1,directionalLightIntensity:.2,envMapIntensity:1},this.init()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var e=this;this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglLightprobe-container")[0].appendChild(this.renderer.domElement),this.renderer.toneMapping=this.$THREE.NoToneMapping,this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.scene=new this.$THREE.Scene,this.camera=new this.$THREE.PerspectiveCamera(40,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,0,30);var t=new r.b(this.camera,this.renderer.domElement);t.addEventListener("change",this.render),t.minDistance=10,t.maxDistance=50,t.enablePan=!1,this.lightProbe=new this.$THREE.LightProbe,this.scene.add(this.lightProbe),this.directionalLight=new this.$THREE.DirectionalLight(16777215,this.API.directionalLightIntensity),this.directionalLight.position.set(10,10,10),this.scene.add(this.directionalLight);var n,a,o=[(n="static/textures/cube/pisa/")+"px"+(a=".png"),n+"nx"+a,n+"py"+a,n+"ny"+a,n+"pz"+a,n+"nz"+a];(new this.$THREE.CubeTextureLoader).load(o,function(t){t.encoding=e.$THREE.sRGBEncoding,e.scene.background=t,e.lightProbe.copy(s.a.fromCubeTexture(t));var n=new e.$THREE.SphereBufferGeometry(5,64,32),i=new e.$THREE.MeshStandardMaterial({color:16777215,metalness:0,roughness:0,envMap:t,envMapIntensity:e.API.envMapIntensity});e.mesh=new e.$THREE.Mesh(n,i),e.scene.add(e.mesh),e.render()}),this.gui=new i.a,this.gui.width=300,this.gui.domElement.style.userSelect="none";var h=this.gui.addFolder("Intensity");h.add(this.API,"lightProbeIntensity",0,1,.02).name("light probe").onChange(function(){e.lightProbe.intensity=e.API.lightProbeIntensity,e.render()}),h.add(this.API,"directionalLightIntensity",0,1,.02).name("directional light").onChange(function(){e.directionalLight.intensity=e.API.directionalLightIntensity,e.render()}),h.add(this.API,"envMapIntensity",0,1,.02).name("envMap").onChange(function(){e.mesh.material.envMapIntensity=e.API.envMapIntensity,e.render()}),h.open(),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLightprobe-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" webgl - light probe\n\t\t")])])}]};var h=n("VU/8")(a,o,!1,function(e){n("+Qez")},"data-v-2bf0c917",null);t.default=h.exports},RmjB:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n("6+nK"),r={fromCubeTexture:function(e){for(var t,n,r,a=0,o=new i.Vector3,h=new i.Vector3,c=new i.Color,d=[0,0,0,0,0,0,0,0,0],l=new i.SphericalHarmonics3,g=l.coefficients,u=0;u<6;u++){var w=e.image[u],b=w.width,m=w.height,f=document.createElement("canvas");f.width=b,f.height=m;var p=f.getContext("2d");p.drawImage(w,0,0,b,m);for(var v=p.getImageData(0,0,b,m),E=v.data,y=v.width,I=2/y,P=0,R=E.length;P<R;P+=4){c.setRGB(E[P]/255,E[P+1]/255,E[P+2]/255),s(c,e.encoding);var L=P/4,M=(L%y+.5)*I-1,T=1-(Math.floor(L/y)+.5)*I;switch(u){case 0:o.set(-1,T,-M);break;case 1:o.set(1,T,M);break;case 2:o.set(-M,1,-T);break;case 3:o.set(-M,-1,T);break;case 4:o.set(-M,T,1);break;case 5:o.set(M,T,-1)}n=o.lengthSq(),a+=r=4/(Math.sqrt(n)*n),h.copy(o).normalize(),i.SphericalHarmonics3.getBasisAt(h,d);for(var H=0;H<9;H++)g[H].x+=d[H]*c.r*r,g[H].y+=d[H]*c.g*r,g[H].z+=d[H]*c.b*r}}t=4*Math.PI/a;for(H=0;H<9;H++)g[H].x*=t,g[H].y*=t,g[H].z*=t;return new i.LightProbe(l)},fromCubeRenderTarget:function(e,t){for(var n,r,a,o=0,h=new i.Vector3,c=new i.Vector3,d=new i.Color,l=[0,0,0,0,0,0,0,0,0],g=new i.SphericalHarmonics3,u=g.coefficients,w=0;w<6;w++){var b=t.width,m=new Uint8Array(b*b*4);e.readRenderTargetPixels(t,0,0,b,b,m,w);for(var f=2/b,p=0,v=m.length;p<v;p+=4){d.setRGB(m[p]/255,m[p+1]/255,m[p+2]/255),s(d,t.texture.encoding);var E=p/4,y=(E%b+.5)*f-1,I=1-(Math.floor(E/b)+.5)*f;switch(w){case 0:h.set(1,I,-y);break;case 1:h.set(-1,I,y);break;case 2:h.set(y,1,-I);break;case 3:h.set(y,-1,I);break;case 4:h.set(y,I,1);break;case 5:h.set(-y,I,-1)}r=h.lengthSq(),o+=a=4/(Math.sqrt(r)*r),c.copy(h).normalize(),i.SphericalHarmonics3.getBasisAt(c,l);for(var P=0;P<9;P++)u[P].x+=l[P]*d.r*a,u[P].y+=l[P]*d.g*a,u[P].z+=l[P]*d.b*a}}n=4*Math.PI/o;for(P=0;P<9;P++)u[P].x*=n,u[P].y*=n,u[P].z*=n;return new i.LightProbe(g)}},s=function(e,t){switch(t){case i.sRGBEncoding:e.convertSRGBToLinear();break;case i.LinearEncoding:break;default:console.warn("WARNING: LightProbeGenerator convertColorToLinear() encountered an unsupported encoding.")}return e}}});
//# sourceMappingURL=58.14d8a3bb3bb3f94a6346.js.map