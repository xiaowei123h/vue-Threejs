webpackJsonp([62],{jxoy:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("JQAX"),s=i("FktL"),r={data:function(){return{container:null,stats:null,camera:null,controls:null,scene:null,renderer:null,pickingTexture:null,pickingScene:null,highlightBox:null,pickingData:[],mouse:null,offset:null}},mounted:function(){this.mouse=new this.$THREE.Vector2,this.offset=new this.$THREE.Vector3(10,10,10),this.init(),this.animate()},methods:{init:function(){this.container=document.getElementById("container"),this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,1,1e4),this.camera.position.z=1e3,this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(16777215),this.pickingScene=new this.$THREE.Scene,this.pickingTexture=new this.$THREE.WebGLRenderTarget(1,1),this.scene.add(new this.$THREE.AmbientLight(5592405));var e=new this.$THREE.SpotLight(16777215,1.5);e.position.set(0,500,2e3),this.scene.add(e);var t=new this.$THREE.MeshBasicMaterial({vertexColors:!0}),i=new this.$THREE.MeshPhongMaterial({color:16777215,flatShading:!0,vertexColors:!0,shininess:0}),r=this;function o(e,t){for(var i=e.attributes.position,n=[],s=0;s<i.count;s++)n.push(t.r,t.g,t.b);e.setAttribute("color",new r.$THREE.Float32BufferAttribute(n,3))}for(var h=[],a=[],c=new this.$THREE.Matrix4,d=new this.$THREE.Quaternion,l=new this.$THREE.Color,u=0;u<5e3;u++){var m=new this.$THREE.BoxBufferGeometry,E=new this.$THREE.Vector3;E.x=1e4*Math.random()-5e3,E.y=6e3*Math.random()-3e3,E.z=8e3*Math.random()-4e3;var g=new this.$THREE.Euler;g.x=2*Math.random()*Math.PI,g.y=2*Math.random()*Math.PI,g.z=2*Math.random()*Math.PI;var w=new this.$THREE.Vector3;w.x=200*Math.random()+100,w.y=200*Math.random()+100,w.z=200*Math.random()+100,d.setFromEuler(g),c.compose(E,d,w),m.applyMatrix4(c),o(m,l.setHex(16777215*Math.random())),h.push(m),o(m=m.clone(),l.setHex(u)),a.push(m),this.pickingData[u]={position:E,rotation:g,scale:w}}var p=new this.$THREE.Mesh(s.a.mergeBufferGeometries(h),i);this.scene.add(p),this.pickingScene.add(new this.$THREE.Mesh(s.a.mergeBufferGeometries(a),t)),this.highlightBox=new this.$THREE.Mesh(new this.$THREE.BoxBufferGeometry,new this.$THREE.MeshLambertMaterial({color:16776960})),this.scene.add(this.highlightBox),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),this.controls=new n.a(this.camera,this.renderer.domElement),this.controls.rotateSpeed=1,this.controls.zoomSpeed=1.2,this.controls.panSpeed=.8,this.controls.noZoom=!1,this.controls.noPan=!1,this.controls.staticMoving=!0,this.controls.dynamicDampingFactor=.3,this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1),this.renderer.domElement.addEventListener("mousemove",this.onMouseMove)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},onMouseMove:function(e){this.mouse.x=e.clientX-281,this.mouse.y=e.clientY},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},pick:function(){this.camera.setViewOffset(this.renderer.domElement.width,this.renderer.domElement.height,this.mouse.x*window.devicePixelRatio|0,this.mouse.y*window.devicePixelRatio|0,1,1),this.renderer.setRenderTarget(this.pickingTexture),this.renderer.render(this.pickingScene,this.camera),this.camera.clearViewOffset();var e=new Uint8Array(4);this.renderer.readRenderTargetPixels(this.pickingTexture,0,0,1,1,e);var t=e[0]<<16|e[1]<<8|e[2],i=this.pickingData[t];i?i.position&&i.rotation&&i.scale&&(this.highlightBox.position.copy(i.position),this.highlightBox.rotation.copy(i.rotation),this.highlightBox.scale.copy(i.scale).add(this.offset),this.highlightBox.visible=!0):this.highlightBox.visible=!1},render:function(){this.controls.update(),this.pick(),this.renderer.setRenderTarget(null),this.renderer.render(this.scene,this.camera)}}},o={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglInteractiveCubesGpu-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" webgl - gpu picking\n\t\t")]),this._v(" "),t("div",{attrs:{id:"container"}})])}]};var h=i("VU/8")(r,o,!1,function(e){i("uwSW")},"data-v-716aa462",null);t.default=h.exports},uwSW:function(e,t){}});
//# sourceMappingURL=62.d2b0720b650ffc921a8a.js.map