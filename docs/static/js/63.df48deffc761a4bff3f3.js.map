{"version":3,"sources":["webpack:///src/views/geometries/webglGeometryText.vue","webpack:///./src/views/geometries/webglGeometryText.vue?9f11","webpack:///./src/views/geometries/webglGeometryText.vue"],"names":["webglGeometryText","data","container","stats","permalink","hex","camera","cameraTarget","scene","renderer","group","textMesh1","textMesh2","textGeo","materials","firstLetter","text","bevelEnabled","font","undefined","fontName","fontWeight","height","size","hover","curveSegments","bevelThickness","bevelSize","mirror","fontMap","helvetiker","optimer","gentilis","droid/droid_sans","droid/droid_serif","weightMap","regular","bold","reverseFontMap","reverseWeightMap","targetRotation","targetRotationOnPointerDown","pointerX","pointerXOnPointerDown","windowHalfX","fontIndex","dirLight","pointLight","hash","colorhash","fonthash","weighthash","bevelhash","texthash","plane","link","loader","triangle","triangleAreaHeuristics","face","centerOffset","mounted","this","prefabricate","init","animate","methods","i","$webglInnerWidth","document","createElement","getElementsByClassName","appendChild","getElementById","$THREE","PerspectiveCamera","window","innerHeight","position","set","Vector3","Scene","background","Color","fog","Fog","DirectionalLight","normalize","add","PointLight","location","substr","length","color","setHSL","Math","random","decimalToHex","getHex","MeshPhongMaterial","flatShading","Group","y","loadFont","Mesh","PlaneBufferGeometry","MeshBasicMaterial","opacity","transparent","rotation","x","PI","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","domElement","$Stats","style","touchAction","addEventListener","onPointerDown","setAttribute","focus","onDocumentKeyPress","onDocumentKeyDown","onWindowResize","requestAnimationFrame","render","update","lookAt","clear","$onWindowResize","event","isPrimary","clientX","onPointerMove","onPointerUp","keyCode","which","preventDefault","ch","String","fromCharCode","refreshText","substring","removeEventListener","d","Number","toString","toUpperCase","updatePermalink","boolToNum","encodeURI","href","_this","FontLoader","console","log","load","response","b","handleColor","handleFont","handleWeight","handleBevel","remove","createText","TextGeometry","computeBoundingBox","computeVertexNormals","Triangle","faces","materialIndex","j","vertexNormals","z","va","vertices","a","vb","vc","c","getArea","copy","normal","boundingBox","max","min","BufferGeometry","fromGeometry","geometries_webglGeometryText","_vm","_h","$createElement","_c","_self","staticClass","attrs","id","target","rel","_v","type","on","click","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/63.df48deffc761a4bff3f3.js","sourcesContent":["<template>\r\n    <div class=\"text-container\">\r\n        <div id=\"info\">\r\n\t\t\t<a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> - procedural 3D text by <a href=\"http://www.lab4games.net/zz85/blog\" target=\"_blank\" rel=\"noopener\">zz85</a> &amp; alteredq<br/>\r\n\t\t\ttype to enter new text, drag to spin the text<br/>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleColor\">change color</el-button>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleFont\">change font</el-button>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleWeight\">change weight</el-button>\r\n            <el-button type=\"primary\" size=\"mini\" @click=\"handleBevel\">change bevel</el-button>\r\n            <br/>\r\n\t\t\t<a id=\"permalink\" href=\"#\">permalink</a>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nexport default {\r\n    data() {\r\n        return {\r\n            container: '',\r\n            stats: '',\r\n            permalink: '',\r\n            hex: '',\r\n            camera: '',\r\n            cameraTarget: '',\r\n            scene: '',\r\n            renderer: '',\r\n            group: '',\r\n            textMesh1: '',\r\n            textMesh2: '',\r\n            textGeo: '',\r\n            materials: '',\r\n            firstLetter: true,\r\n            text: 'three.js',\r\n            bevelEnabled: true,\r\n            font: undefined,\r\n            fontName: 'optimer',\r\n            fontWeight: 'bold',\r\n            height: 20,\r\n            size: 70,\r\n            hover: 30,\r\n            curveSegments: 4,\r\n            bevelThickness: 2,\r\n            bevelSize: 1.5,\r\n            mirror: true,\r\n            fontMap: {\r\n                helvetiker: 0,\r\n                optimer: 1,\r\n                gentilis: 2,\r\n                \"droid/droid_sans\": 3,\r\n\t\t\t\t\"droid/droid_serif\": 4\r\n            },\r\n            weightMap: {\r\n                regular: 0,\r\n                bold: 1\r\n            },\r\n            reverseFontMap: [],\r\n            reverseWeightMap: [],\r\n            targetRotation: 0,\r\n            targetRotationOnPointerDown: 0,\r\n            pointerX: 0,\r\n            pointerXOnPointerDown: 0,\r\n            windowHalfX: 0,\r\n            fontIndex: 1,\r\n            dirLight: '',\r\n            pointLight: '',\r\n            hash: '',\r\n            colorhash: '',\r\n            fonthash: '',\r\n            weighthash: '',\r\n            bevelhash: '',\r\n            texthash: '',\r\n            plane: '',\r\n            link: '',\r\n            loader: '',\r\n            triangle: '',\r\n            triangleAreaHeuristics: '',\r\n            face: '',\r\n            centerOffset: ''\r\n        }\r\n    },\r\n    mounted() {\r\n        this.prefabricate()\r\n        this.init()\r\n        this.animate()\r\n    },\r\n    methods: {\r\n        prefabricate() {\r\n            // 将对象的key顺序放到数组中\r\n            for (var i in this.fontMap) {\r\n                this.reverseFontMap[ this.fontMap[ i ] ] = i\r\n            }\r\n\t\t\tfor (var i in this.weightMap) {\r\n                this.reverseWeightMap[ this.weightMap[ i ] ] = i\r\n            }\r\n            this.windowHalfX = (this.$webglInnerWidth) / 2\r\n        },\r\n        init() {\r\n            this.container = document.createElement( 'div' )\r\n            document.getElementsByClassName('text-container')[0].appendChild(this.container)\r\n            this.permalink = document.getElementById(\"permalink\")\r\n            // CAMERA\r\n            this.camera = new this.$THREE.PerspectiveCamera(30, (this.$webglInnerWidth) / window.innerHeight, 1, 1500)\r\n            this.camera.position.set(0, 400, 700)\r\n            this.cameraTarget = new this.$THREE.Vector3(0, 150, 0)\r\n            // SCENE\r\n            this.scene = new this.$THREE.Scene()\r\n            this.scene.background = new this.$THREE.Color(0x000000)\r\n            this.scene.fog = new this.$THREE.Fog(0x000000, 250, 1400)\r\n            // LIGHTS\r\n            this.dirLight = new this.$THREE.DirectionalLight(0xffffff, 0.125)\r\n            this.dirLight.position.set(0, 0, 1).normalize()\r\n            this.scene.add(this.dirLight)\r\n            this.pointLight = new this.$THREE.PointLight(0xffffff, 1.5)\r\n            this.pointLight.position.set(0, 100, 90)\r\n            this.scene.add(this.pointLight)\r\n            // Get text from hash\r\n            this.hash = document.location.hash.substr(1)\r\n            if (this.hash.length !== 0) {\r\n                // this.colorhash = this.hash.substring(0, 6)\r\n                // this.fonthash = this.hash.substring(6, 7)\r\n                // this.weighthash = this.hash.substring(7, 8)\r\n                // this.bevelhash = this.hash.substring(8, 9)\r\n                // this.texthash = this.hash.substring(10)\r\n                // this.hex = this.colorhash\r\n                // this.pointLight.color.setHex(parseInt(this.colorhash, 16))\r\n                // this.fontName = this.reverseFontMap[parseInt(this.fonthash)]\r\n                // this.fontWeight = this.reverseWeightMap[parseInt(this.weighthash)]\r\n                // this.bevelEnabled = parseInt(this.bevelhash)\r\n                // this.text = decodeURI(this.texthash)\r\n                // this.updatePermalink()\r\n            } else {\r\n                this.pointLight.color.setHSL(Math.random(), 1, 0.5)\r\n                this.hex = decimalToHex(this.pointLight.color.getHex())\r\n            }\r\n            this.materials = [\r\n                new this.$THREE.MeshPhongMaterial({color: 0xffffff, flatShading: true}), // front\r\n                new this.$THREE.MeshPhongMaterial({color: 0xffffff}) // side\r\n            ]\r\n            this.group = new this.$THREE.Group()\r\n            this.group.position.y = 100\r\n            this.scene.add(this.group)\r\n            this.loadFont()\r\n            this.plane = new this.$THREE.Mesh(\r\n                new this.$THREE.PlaneBufferGeometry(10000, 10000),\r\n                new this.$THREE.MeshBasicMaterial({color: 0xffffff, opacity: 0.5, transparent: true})\r\n            )\r\n            this.plane.position.y = 100\r\n            this.plane.rotation.x = - Math.PI / 2\r\n            this.scene.add(this.plane)\r\n            // RENDERER\r\n            this.renderer = new this.$THREE.WebGLRenderer({antialias: true})\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            this.container.appendChild(this.renderer.domElement)\r\n            // STATS\r\n            this.stats = new this.$Stats()\r\n            // EVENTS\r\n            this.container.style.touchAction = 'none'\r\n            this.container.addEventListener('pointerdown', this.onPointerDown, false)\r\n            this.container.setAttribute('tabindex', '0');\r\n            this.container.focus()\r\n            this.container.addEventListener('keypress', this.onDocumentKeyPress, false)\r\n            this.container.addEventListener('keydown', this.onDocumentKeyDown, false)\r\n            window.addEventListener( 'resize', this.onWindowResize, false )\r\n        },\r\n        animate() {\r\n            requestAnimationFrame(this.animate)\r\n            this.render()\r\n            this.stats.update()\r\n        },\r\n        render() {\r\n            this.group.rotation.y += (this.targetRotation - this.group.rotation.y) * 0.05\r\n            this.camera.lookAt(this.cameraTarget)\r\n            this.renderer.clear()\r\n            this.renderer.render(this.scene, this.camera)\r\n        },\r\n        onWindowResize() {\r\n            this.windowHalfX = (this.$webglInnerWidth) / 2\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n        },\r\n        onPointerDown(event) {\r\n            if (event.isPrimary === false) {\r\n                return\r\n            }\r\n            this.pointerXOnPointerDown = event.clientX - this.windowHalfX\r\n            this.targetRotationOnPointerDown = this.targetRotation\r\n            document.addEventListener('pointermove', this.onPointerMove, false)\r\n            document.addEventListener('pointerup', this.onPointerUp, false)\r\n        },\r\n        onDocumentKeyPress(event) {\r\n            var keyCode = event.which\r\n            // backspace\r\n            if ( keyCode == 8 ) {\r\n                event.preventDefault()\r\n            } else {\r\n                var ch = String.fromCharCode( keyCode )\r\n                this.text += ch\r\n                this.refreshText()\r\n            }\r\n        },\r\n        onDocumentKeyDown(event) {\r\n            if ( this.firstLetter ) {\r\n                this.firstLetter = false\r\n                this.text = \"\"\r\n            }\r\n            var keyCode = event.keyCode\r\n            // backspace\r\n            if ( keyCode == 8 ) {\r\n                event.preventDefault()\r\n                this.text = this.text.substring( 0, this.text.length - 1 )\r\n                this.refreshText()\r\n                return false\r\n            }\r\n        },\r\n        onPointerMove(event) {\r\n            if (event.isPrimary === false) {\r\n                return\r\n            }\r\n            this.pointerX = event.clientX - this.windowHalfX\r\n            this.targetRotation = this.targetRotationOnPointerDown + (this.pointerX - this.pointerXOnPointerDown) * 0.02\r\n        },\r\n        onPointerUp() {\r\n            if (event.isPrimary === false) {\r\n                return\r\n            }\r\n            document.removeEventListener('pointermove', this.onPointerMove)\r\n            document.removeEventListener('pointerup', this.onPointerUp)\r\n        },\r\n        decimalToHex(d) {\r\n            // 将十进制数字转换为十六进制数并转化为字符串\r\n            var hex = Number(d).toString(16)\r\n            // 将输入的d转换为六位十六进制字符串\r\n            hex = \"000000\".substr(0, 6 - hex.length) + hex\r\n            // 将六位十六进制里的字符转换成大写返回\r\n            return hex.toUpperCase()\r\n        },\r\n        // 更新id为permalink的a标签href\r\n        updatePermalink() {\r\n            // encodeURI() 函数可把字符串作为 URI 进行编码，将网址转换成放入浏览器地址栏后的内容\r\n            this.link = this.hex + this.fontMap[this.fontName] + this.weightMap[this.fontWeight] + this.boolToNum(this.bevelEnabled) + \"#\" + encodeURI(this.text)\r\n            this.permalink.href = \"#\" + this.link\r\n            window.location.hash = this.link\r\n        },\r\n        loadFont() {\r\n            this.loader = new this.$THREE.FontLoader()\r\n            console.log(3333333)\r\n            // 'static/fonts/gentilis_bold.typeface.json'\r\n            // this.loader.load('../fonts/' + this.fontName + '_' + this.fontWeight + '.typeface.json', (response) => {\r\n            this.loader.load('static/fonts/' + this.fontName + '_' + this.fontWeight + '.typeface.json', (response) => {\r\n                console.log(response)\r\n                console.log('wwwwwwwwwwwwwwwwww')\r\n                this.font = response\r\n                this.refreshText()\r\n            })\r\n        },\r\n        // b为true是1为false是0\r\n        boolToNum(b) {\r\n            return b ? 1 : 0\r\n        },\r\n        handleColor() {\r\n            this.pointLight.color.setHSL(Math.random(), 1, 0.5)\r\n            this.hex = this.decimalToHex(this.pointLight.color.getHex())\r\n            // this.updatePermalink()\r\n        },\r\n        handleFont() {\r\n            this.fontIndex++\r\n            this.fontName = this.reverseFontMap[this.fontIndex % this.reverseFontMap.length]\r\n            this.loadFont()\r\n        },\r\n        handleWeight() {\r\n            if (this.fontWeight === \"bold\") {\r\n                this.fontWeight = \"regular\"\r\n            } else {\r\n                this.fontWeight = \"bold\"\r\n            }\r\n            this.loadFont()\r\n        },\r\n        handleBevel() {\r\n            this.bevelEnabled = !this.bevelEnabled\r\n            this.refreshText()\r\n        },\r\n        refreshText() {\r\n            // this.updatePermalink()\r\n            this.group.remove(this.textMesh1)\r\n            if (this.mirror) {\r\n                this.group.remove(this.textMesh2)\r\n            }\r\n            if (!this.text) {\r\n                return\r\n            }\r\n            this.createText()\r\n        },\r\n        createText() {\r\n            this.textGeo = new this.$THREE.TextGeometry(this.text, {\r\n                font: this.font,\r\n                size: this.size,\r\n                height: this.height,\r\n                curveSegments: this.curveSegments,\r\n                bevelThickness: this.bevelThickness,\r\n                bevelSize: this.bevelSize,\r\n                bevelEnabled: this.bevelEnabled\r\n            } )\r\n            this.textGeo.computeBoundingBox()\r\n            this.textGeo.computeVertexNormals()\r\n            this.triangle = new this.$THREE.Triangle()\r\n            // \"fix\" side normals by removing z-component of normals for side faces\r\n            // (this doesn't work well for beveled geometry as then we lose nice curvature around z-axis)\r\n            if (! this.bevelEnabled) {\r\n                this.triangleAreaHeuristics = 0.1 * ( this.height * this.size )\r\n                for (var i = 0; i < this.textGeo.faces.length; i ++) {\r\n                    this.face = this.textGeo.faces[i]\r\n                    if ( this.face.materialIndex == 1 ) {\r\n                        for (var j = 0; j < this.face.vertexNormals.length; j ++) {\r\n                            this.face.vertexNormals[j].z = 0\r\n                            this.face.vertexNormals[j].normalize()\r\n                        }\r\n                        var va = this.textGeo.vertices[this.face.a]\r\n                        var vb = this.textGeo.vertices[this.face.b]\r\n                        var vc = this.textGeo.vertices[this.face.c]\r\n                        var s = this.triangle.set(va, vb, vc).getArea()\r\n                        if (s > this.triangleAreaHeuristics) {\r\n                            for (var j = 0; j < this.face.vertexNormals.length; j ++) {\r\n                                this.face.vertexNormals[j].copy(this.face.normal)\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n            this.centerOffset = - 0.5 * (this.textGeo.boundingBox.max.x - this.textGeo.boundingBox.min.x)\r\n            this.textGeo = new this.$THREE.BufferGeometry().fromGeometry(this.textGeo)\r\n            this.textMesh1 = new this.$THREE.Mesh(this.textGeo, this.materials)\r\n            this.textMesh1.position.x = this.centerOffset\r\n            this.textMesh1.position.y = this.hover\r\n            this.textMesh1.position.z = 0\r\n            this.textMesh1.rotation.x = 0\r\n            this.textMesh1.rotation.y = Math.PI * 2\r\n            this.group.add(this.textMesh1)\r\n            if (this.mirror) {\r\n                this.textMesh2 = new this.$THREE.Mesh(this.textGeo, this.materials)\r\n                this.textMesh2.position.x = this.centerOffset\r\n                this.textMesh2.position.y = - this.hover\r\n                this.textMesh2.position.z = this.height\r\n                this.textMesh2.rotation.x = Math.PI\r\n                this.textMesh2.rotation.y = Math.PI * 2\r\n                this.group.add(this.textMesh2)\r\n            }\r\n        }\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.text-container {\r\n    width: 100%;\r\n    height: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/geometries/webglGeometryText.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"text-container\"},[_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" - procedural 3D text by \"),_c('a',{attrs:{\"href\":\"http://www.lab4games.net/zz85/blog\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"zz85\")]),_vm._v(\" & alteredq\"),_c('br'),_vm._v(\"\\n\\t\\t\\ttype to enter new text, drag to spin the text\"),_c('br'),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.handleColor}},[_vm._v(\"change color\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.handleFont}},[_vm._v(\"change font\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.handleWeight}},[_vm._v(\"change weight\")]),_vm._v(\" \"),_c('el-button',{attrs:{\"type\":\"primary\",\"size\":\"mini\"},on:{\"click\":_vm.handleBevel}},[_vm._v(\"change bevel\")]),_vm._v(\" \"),_c('br'),_vm._v(\" \"),_c('a',{attrs:{\"id\":\"permalink\",\"href\":\"#\"}},[_vm._v(\"permalink\")])],1)])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-3cdf1728\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/geometries/webglGeometryText.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-3cdf1728\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webglGeometryText.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglGeometryText.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglGeometryText.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-3cdf1728\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webglGeometryText.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-3cdf1728\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/geometries/webglGeometryText.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}