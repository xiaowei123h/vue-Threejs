webpackJsonp([65],{"5wgQ":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("wIBv"),a=n("qxm1"),i=n("6+nK"),s=function(e){i.x.call(this,e),this.type=i._80};s.prototype=Object.assign(Object.create(i.x.prototype),{constructor:s,parse:function(e){var t=function(e,t){switch(e){case 1:console.error("RGBELoader Read Error: "+(t||""));break;case 2:console.error("RGBELoader Write Error: "+(t||""));break;case 3:console.error("RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,a=-1,i=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(a=o.indexOf("\n"))&&i<t&&r<e.byteLength;)s+=o,i+=o.length,r+=128,o+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<a&&(!1!==n&&(e.pos+=i+a+1),s+o.slice(0,a))},r=function(e,t,n,r){var a=e[t+3],s=Math.pow(2,a-128)/255;n[r+0]=i.y.toHalfFloat(e[t+0]*s),n[r+1]=i.y.toHalfFloat(e[t+1]*s),n[r+2]=i.y.toHalfFloat(e[t+2]*s)},a=new Uint8Array(e);a.pos=0;var s,o,l,u,h,d,c=function(e){var r,a,i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(a=r.match(/^#\?(\S+)$/)))return t(3,"bad initial token");for(u.valid|=1,u.programtype=a[1],u.string+=r+"\n";!1!==(r=n(e));)if(u.string+=r+"\n","#"!==r.charAt(0)){if((a=r.match(i))&&(u.gamma=parseFloat(a[1],10)),(a=r.match(s))&&(u.exposure=parseFloat(a[1],10)),(a=r.match(o))&&(u.valid|=2,u.format=a[1]),(a=r.match(l))&&(u.valid|=4,u.height=parseInt(a[1],10),u.width=parseInt(a[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=r+"\n";return 2&u.valid?4&u.valid?u:t(3,"missing image size specifier"):t(3,"missing format specifier")}(a);if(-1!==c){var p=c.width,g=c.height,v=function(e,n,r){var a,i,s,o,l,u,h,d,c,p,g,v,f,m=n,w=r;if(m<8||m>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(m!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");if(!(a=new Uint8Array(4*n*r)).length)return t(4,"unable to allocate buffer space");for(i=0,s=0,d=4*m,f=new Uint8Array(4),u=new Uint8Array(d);w>0&&s<e.byteLength;){if(s+4>e.byteLength)return t(1);if(f[0]=e[s++],f[1]=e[s++],f[2]=e[s++],f[3]=e[s++],2!=f[0]||2!=f[1]||(f[2]<<8|f[3])!=m)return t(3,"bad rgbe scanline format");for(h=0;h<d&&s<e.byteLength;){if((v=(o=e[s++])>128)&&(o-=128),0===o||h+o>d)return t(3,"bad scanline data");if(v)for(l=e[s++],c=0;c<o;c++)u[h++]=l;else u.set(e.subarray(s,s+o),h),h+=o,s+=o}for(p=m,c=0;c<p;c++)g=0,a[i]=u[c+g],g+=m,a[i+1]=u[c+g],g+=m,a[i+2]=u[c+g],g+=m,a[i+3]=u[c+g],i+=4;w--}return a}(a.subarray(a.pos),p,g);if(-1!==v){switch(this.type){case i._80:var f=v,m=i._48,w=i._80;break;case i.I:for(var y=v.length/4*3,_=new Float32Array(y),b=0;b<y;b++)l=_,u=3*b,void 0,void 0,h=(s=v)[(o=4*b)+3],d=Math.pow(2,h-128)/255,l[u+0]=s[o+0]*d,l[u+1]=s[o+1]*d,l[u+2]=s[o+2]*d;f=_,m=i._49,w=i.I;break;case i.N:y=v.length/4*3;var E=new Uint16Array(y);for(b=0;b<y;b++)r(v,4*b,E,3*b);f=E,m=i._49,w=i.N;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:p,height:g,data:f,header:c.string,gamma:c.gamma,exposure:c.exposure,format:m,type:w}}}return null},setDataType:function(e){return this.type=e,this},load:function(e,t,n,r){return i.x.prototype.load.call(this,e,function(e,n){switch(e.type){case i._80:e.encoding=i._47,e.minFilter=i._22,e.magFilter=i._22,e.generateMipmaps=!1,e.flipY=!0;break;case i.I:case i.N:e.encoding=i._3,e.minFilter=i._4,e.magFilter=i._4,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)},n,r)}});var o,l=((o=new i._54({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new i._81(1,1)}},vertexShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t\t}\n\t\t",fragmentShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform sampler2D roughnessMap;\n\t\t\tuniform sampler2D normalMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\n\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tfloat roughnessToVariance( float roughness ) {\n\n\t\t\t\tfloat variance = 0.0;\n\n\t\t\t\tif ( roughness >= r1 ) {\n\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\n\n\t\t\t\t} else if ( roughness >= r4 ) {\n\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\n\n\t\t\t\t} else if ( roughness >= r5 ) {\n\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\n\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\n\n\t\t\t\t}\n\n\t\t\t\treturn variance;\n\n\t\t\t}\n\n\t\t\tfloat varianceToRoughness( float variance ) {\n\n\t\t\t\tfloat roughness = 0.0;\n\n\t\t\t\tif ( variance >= v1 ) {\n\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\n\n\t\t\t\t} else if ( variance >= v4 ) {\n\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\n\n\t\t\t\t} else if ( variance >= v5 ) {\n\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\n\n\t\t\t\t}\n\n\t\t\t\treturn roughness;\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\n\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\n\n\t\t\t\tfloat roughness = gl_FragColor.g;\n\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\n\n\t\t\t\tvec3 avgNormal;\n\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\n\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\n\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\n\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\n\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\n\n\t\t\t}\n\t\t",blending:i._25,depthTest:!1,depthWrite:!1})).type="RoughnessMipmapper",o),u=new i._15(new i._36(2,2),l),h=new i._31(0,1,0,1,0,1),d=null,c=null;function p(e){(c=e).compile(u,h)}p.prototype={constructor:p,generateMipmaps:function(e){if("roughnessMap"in e!=!1){var t=e.roughnessMap,n=e.normalMap;if(null!==t&&null!==n&&t.generateMipmaps&&!e.userData.roughnessUpdated){e.userData.roughnessUpdated=!0;var r=Math.max(t.image.width,n.image.width),a=Math.max(t.image.height,n.image.height);if(i._12.isPowerOfTwo(r)&&i._12.isPowerOfTwo(a)){var s=c.getRenderTarget(),o=c.autoClear;if(c.autoClear=!1,null!==d&&d.width===r&&d.height===a||(null!==d&&d.dispose(),(d=new i._85(r,a,{depthBuffer:!1})).scissorTest=!0),r!==t.image.width||a!==t.image.height){var p={wrapS:t.wrapS,wrapT:t.wrapT,magFilter:t.magFilter,minFilter:t.minFilter,depthBuffer:!1},g=new i._85(r,a,p);g.texture.generateMipmaps=!0,c.setRenderTarget(g),e.roughnessMap=g.texture,e.metalnessMap==t&&(e.metalnessMap=e.roughnessMap),e.aoMap==t&&(e.aoMap=e.roughnessMap)}l.uniforms.roughnessMap.value=t,l.uniforms.normalMap.value=n;for(var v=new i._81(0,0),f=l.uniforms.texelSize.value,m=0;r>=1&&a>=1;++m,r/=2,a/=2)f.set(1/r,1/a),0==m&&f.set(0,0),d.viewport.set(v.x,v.y,r,a),d.scissor.set(v.x,v.y,r,a),c.setRenderTarget(d),c.render(u,h),c.copyFramebufferToTexture(v,e.roughnessMap,m),l.uniforms.roughnessMap.value=e.roughnessMap;t!==e.roughnessMap&&t.dispose(),c.setRenderTarget(s),c.autoClear=o}}}},dispose:function(){l.dispose(),u.geometry.dispose(),null!=d&&d.dispose()}};var g={data:function(){return{camera:null,scene:null,renderer:null}},mounted:function(){this.init(),this.render()},methods:{init:function(){var e=this,t=document.createElement("div");document.getElementsByClassName("webglLoaderGltf-container")[0].appendChild(t),this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,.25,20),this.camera.position.set(-1.8,.6,2.7),this.scene=new this.$THREE.Scene,(new s).setDataType(this.$THREE.UnsignedByteType).setPath("static/textures/equirectangular/").load("royal_esplanade_1k.hdr",function(t){var r=n.fromEquirectangular(t).texture;e.scene.background=r,e.scene.environment=r,t.dispose(),n.dispose(),e.render();var i=new p(e.renderer);(new a.a).setPath("static/models/gltf/DamagedHelmet/glTF/").load("DamagedHelmet.gltf",function(t){t.scene.traverse(function(e){e.isMesh}),e.scene.add(t.scene),i.dispose(),e.render()})}),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.toneMapping=this.$THREE.ACESFilmicToneMapping,this.renderer.toneMappingExposure=1,this.renderer.outputEncoding=this.$THREE.sRGBEncoding,t.appendChild(this.renderer.domElement);var n=new this.$THREE.PMREMGenerator(this.renderer);n.compileEquirectangularShader();var i=new r.a(this.camera,this.renderer.domElement);i.addEventListener("change",this.render),i.minDistance=2,i.maxDistance=10,i.target.set(0,0,-.2),i.update(),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},v={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"webglLoaderGltf-container"},[n("div",{attrs:{id:"info"}},[n("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[e._v("three.js")]),e._v(" - GLTFLoader"),n("br"),e._v("\n\t\t\tBattle Damaged Sci-fi Helmet by\n\t\t\t"),n("a",{attrs:{href:"https://sketchfab.com/theblueturtle_",target:"_blank",rel:"noopener"}},[e._v("theblueturtle_")]),n("br"),e._v(" "),n("a",{attrs:{href:"https://hdrihaven.com/hdri/?h=royal_esplanade",target:"_blank",rel:"noopener"}},[e._v("Royal Esplanade")]),e._v(" by "),n("a",{attrs:{href:"https://hdrihaven.com/",target:"_blank",rel:"noopener"}},[e._v("HDRI Haven")])])])}]};var f=n("VU/8")(g,v,!1,function(e){n("aNOW")},"data-v-3bdeefa8",null);t.default=f.exports},aNOW:function(e,t){}});
//# sourceMappingURL=65.24213e903ce0d98fdf98.js.map