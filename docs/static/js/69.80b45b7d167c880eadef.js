webpackJsonp([69],{"Q1g/":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("6+nK"),s={c:null,u:[new n._105,new n._105,new n._105],e:[]},a={c:null,u:[new n._105,new n._105,new n._105],e:[]},r=[[],[],[]],o=[[],[],[]],h=[],c=new n._105,l=new n._105,u=new n._105,d=new n._105,m=new n._105,f=new n._105,b=new n._27,w=new n.i,p=new n._28,y=new n._28,M=new n._73;function v(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new n._105,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new n._105,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new n._27;this.center=t,this.halfSize=e,this.rotation=i}Object.assign(v.prototype,{set:function(t,e,i){return this.center=t,this.halfSize=e,this.rotation=i,this},copy:function(t){return this.center.copy(t.center),this.halfSize.copy(t.halfSize),this.rotation.copy(t.rotation),this},clone:function(){return(new this.constructor).copy(this)},getSize:function(t){return t.copy(this.halfSize).multiplyScalar(2)},clampPoint:function(t,e){var i=this.halfSize;d.subVectors(t,this.center),this.rotation.extractBasis(c,l,u),e.copy(this.center);var s=n._26.clamp(d.dot(c),-i.x,i.x);e.add(c.multiplyScalar(s));var a=n._26.clamp(d.dot(l),-i.y,i.y);e.add(l.multiplyScalar(a));var r=n._26.clamp(d.dot(u),-i.z,i.z);return e.add(u.multiplyScalar(r)),e},containsPoint:function(t){return d.subVectors(t,this.center),this.rotation.extractBasis(c,l,u),Math.abs(d.dot(c))<=this.halfSize.x&&Math.abs(d.dot(l))<=this.halfSize.y&&Math.abs(d.dot(u))<=this.halfSize.z},intersectsBox3:function(t){return this.intersectsOBB(z.fromBox3(t))},intersectsSphere:function(t){return this.clampPoint(t.center,f),f.distanceToSquared(t.center)<=t.radius*t.radius},intersectsOBB:function(t){var e,i,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.EPSILON;s.c=this.center,s.e[0]=this.halfSize.x,s.e[1]=this.halfSize.y,s.e[2]=this.halfSize.z,this.rotation.extractBasis(s.u[0],s.u[1],s.u[2]),a.c=t.center,a.e[0]=t.halfSize.x,a.e[1]=t.halfSize.y,a.e[2]=t.halfSize.z,t.rotation.extractBasis(a.u[0],a.u[1],a.u[2]);for(var c=0;c<3;c++)for(var l=0;l<3;l++)r[c][l]=s.u[c].dot(a.u[l]);d.subVectors(a.c,s.c),h[0]=d.dot(s.u[0]),h[1]=d.dot(s.u[1]),h[2]=d.dot(s.u[2]);for(c=0;c<3;c++)for(l=0;l<3;l++)o[c][l]=Math.abs(r[c][l])+n;for(c=0;c<3;c++)if(e=s.e[c],i=a.e[0]*o[c][0]+a.e[1]*o[c][1]+a.e[2]*o[c][2],Math.abs(h[c])>e+i)return!1;for(c=0;c<3;c++)if(e=s.e[0]*o[0][c]+s.e[1]*o[1][c]+s.e[2]*o[2][c],i=a.e[c],Math.abs(h[0]*r[0][c]+h[1]*r[1][c]+h[2]*r[2][c])>e+i)return!1;return e=s.e[1]*o[2][0]+s.e[2]*o[1][0],i=a.e[1]*o[0][2]+a.e[2]*o[0][1],!(Math.abs(h[2]*r[1][0]-h[1]*r[2][0])>e+i)&&(e=s.e[1]*o[2][1]+s.e[2]*o[1][1],i=a.e[0]*o[0][2]+a.e[2]*o[0][0],!(Math.abs(h[2]*r[1][1]-h[1]*r[2][1])>e+i)&&(e=s.e[1]*o[2][2]+s.e[2]*o[1][2],i=a.e[0]*o[0][1]+a.e[1]*o[0][0],!(Math.abs(h[2]*r[1][2]-h[1]*r[2][2])>e+i)&&(e=s.e[0]*o[2][0]+s.e[2]*o[0][0],i=a.e[1]*o[1][2]+a.e[2]*o[1][1],!(Math.abs(h[0]*r[2][0]-h[2]*r[0][0])>e+i)&&(e=s.e[0]*o[2][1]+s.e[2]*o[0][1],i=a.e[0]*o[1][2]+a.e[2]*o[1][0],!(Math.abs(h[0]*r[2][1]-h[2]*r[0][1])>e+i)&&(e=s.e[0]*o[2][2]+s.e[2]*o[0][2],i=a.e[0]*o[1][1]+a.e[1]*o[1][0],!(Math.abs(h[0]*r[2][2]-h[2]*r[0][2])>e+i)&&(e=s.e[0]*o[1][0]+s.e[1]*o[0][0],i=a.e[1]*o[2][2]+a.e[2]*o[2][1],!(Math.abs(h[1]*r[0][0]-h[0]*r[1][0])>e+i)&&(e=s.e[0]*o[1][1]+s.e[1]*o[0][1],i=a.e[0]*o[2][2]+a.e[2]*o[2][0],!(Math.abs(h[1]*r[0][1]-h[0]*r[1][1])>e+i)&&(e=s.e[0]*o[1][2]+s.e[1]*o[0][2],i=a.e[0]*o[2][1]+a.e[1]*o[2][0],!(Math.abs(h[1]*r[0][2]-h[0]*r[1][2])>e+i)))))))))},intersectsPlane:function(t){this.rotation.extractBasis(c,l,u);var e=this.halfSize.x*Math.abs(t.normal.dot(c))+this.halfSize.y*Math.abs(t.normal.dot(l))+this.halfSize.z*Math.abs(t.normal.dot(u)),i=t.normal.dot(this.center)-t.constant;return Math.abs(i)<=e},intersectRay:function(t,e){var i,n,s,a;return this.getSize(m),w.setFromCenterAndSize(d.set(0,0,0),m),i=p,n=this.rotation,s=i.elements,a=n.elements,s[0]=a[0],s[1]=a[1],s[2]=a[2],s[3]=0,s[4]=a[3],s[5]=a[4],s[6]=a[5],s[7]=0,s[8]=a[6],s[9]=a[7],s[10]=a[8],s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,p.setPosition(this.center),y.copy(p).invert(),M.copy(t).applyMatrix4(y),M.intersectBox(w,e)?e.applyMatrix4(p):null},intersectsRay:function(t){return null!==this.intersectRay(t,d)},fromBox3:function(t){return t.getCenter(this.center),t.getSize(this.halfSize).multiplyScalar(.5),this.rotation.identity(),this},equals:function(t){return t.center.equals(this.center)&&t.halfSize.equals(this.halfSize)&&t.rotation.equals(this.rotation)},applyMatrix4:function(t){var e=t.elements,i=d.set(e[0],e[1],e[2]).length(),n=d.set(e[4],e[5],e[6]).length(),s=d.set(e[8],e[9],e[10]).length();t.determinant()<0&&(i=-i),b.setFromMatrix4(t);var a=1/i,r=1/n,o=1/s;return b.elements[0]*=a,b.elements[1]*=a,b.elements[2]*=a,b.elements[3]*=r,b.elements[4]*=r,b.elements[5]*=r,b.elements[6]*=o,b.elements[7]*=o,b.elements[8]*=o,this.rotation.multiply(b),this.halfSize.x*=i,this.halfSize.y*=n,this.halfSize.z*=s,d.setFromMatrixPosition(t),this.center.add(d),this}});var z=new v,x=i("wIBv"),S={data:function(){return{camera:null,scene:null,renderer:null,clock:null,controls:null,stats:null,raycaster:null,hitbox:null,objects:[],mouse:null}},mounted:function(){this.mouse=new this.$THREE.Vector2,this.init(),this.animate()},methods:{init:function(){this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,0,75),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(16777215),this.clock=new this.$THREE.Clock,this.raycaster=new this.$THREE.Raycaster;var t=new this.$THREE.HemisphereLight(16777215,2236962,1.5);t.position.set(1,1,1),this.scene.add(t);var e=new this.$THREE.Vector3(10,5,6),i=new this.$THREE.BoxBufferGeometry(e.x,e.y,e.z);i.userData.obb=new v,i.userData.obb.halfSize.copy(e).multiplyScalar(.5);for(var n=0;n<100;n++){var s=new this.$THREE.Mesh(i,new this.$THREE.MeshLambertMaterial({color:65280}));s.matrixAutoUpdate=!1,s.position.x=80*Math.random()-40,s.position.y=80*Math.random()-40,s.position.z=80*Math.random()-40,s.rotation.x=2*Math.random()*Math.PI,s.rotation.y=2*Math.random()*Math.PI,s.rotation.z=2*Math.random()*Math.PI,s.scale.x=Math.random()+.5,s.scale.y=Math.random()+.5,s.scale.z=Math.random()+.5,this.scene.add(s),s.userData.obb=new v,this.objects.push(s)}this.hitbox=new this.$THREE.Mesh(i,new this.$THREE.MeshBasicMaterial({color:0,wireframe:!0})),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglMathObb-container")[0].appendChild(this.renderer.domElement),this.controls=new x.b(this.camera,this.renderer.domElement),this.controls.enableDamping=!0,this.stats=new this.$Stats,this.stats.dom.style.left="280px",document.getElementsByClassName("webglMathObb-container")[0].appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1),document.addEventListener("click",this.onClick,!1)},onClick:function(t){t.preventDefault(),this.mouse.x=t.clientX/(window.innerWidth-281)*2-1,this.mouse.y=-t.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);for(var e=new this.$THREE.Vector3,i=[],n=0,s=this.objects.length;n<s;n++){var a=this.objects[n],r=a.userData.obb,o=this.raycaster.ray;if(null!==r.intersectRay(o,e)){var h=o.origin.distanceTo(e);i.push({distance:h,object:a})}}if(i.length>0)i.sort(this.sortIntersections),i[0].object.add(this.hitbox);else{var c=this.hitbox.parent;c&&c.remove(this.hitbox)}},sortIntersections:function(t,e){return t.distance-e.distance},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate),this.controls.update();for(var t=this.clock.getDelta(),e=0,i=this.objects.length;e<i;e++){(n=this.objects[e]).rotation.x+=t*Math.PI*.2,n.rotation.y+=t*Math.PI*.1,n.updateMatrix(),n.updateMatrixWorld(),n.userData.obb.copy(n.geometry.userData.obb),n.userData.obb.applyMatrix4(n.matrixWorld),n.material.color.setHex(65280)}for(e=0,i=this.objects.length;e<i;e++)for(var n,s=(n=this.objects[e]).userData.obb,a=e+1,r=this.objects.length;a<r;a++){var o=this.objects[a],h=o.userData.obb;!0===s.intersectsOBB(h)&&(n.material.color.setHex(16711680),o.material.color.setHex(16711680))}this.renderer.render(this.scene,this.camera),this.stats.update()}}},E={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"webglMathObb-container"},[e("div",{attrs:{id:"container"}}),this._v(" "),e("div",{attrs:{id:"info"}},[e("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener noreferrer"}},[this._v("three.js")]),this._v(" - OBB (Oriented Bounding Box)\n\t\t")])])}]};var g=i("VU/8")(S,E,!1,function(t){i("Rzyo")},"data-v-ba055fa2",null);e.default=g.exports},Rzyo:function(t,e){}});
//# sourceMappingURL=69.80b45b7d167c880eadef.js.map