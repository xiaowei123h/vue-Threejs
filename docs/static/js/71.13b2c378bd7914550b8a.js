webpackJsonp([71],{"D/ct":function(e,t){},sEXd:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("wIBv"),i=n("6+nK"),o=function(e){i._21.call(this,e),this.animateBonePositions=!0,this.animateBoneRotations=!0};o.prototype=Object.assign(Object.create(i._21.prototype),{constructor:o,load:function(e,t,n,r){var o=this,s=new i.S(o.manager);s.setPath(o.path),s.setRequestHeader(o.requestHeader),s.setWithCredentials(o.withCredentials),s.load(e,function(n){try{t(o.parse(n))}catch(t){r?r(t):console.error(t),o.manager.itemError(e)}},n,r)},parse:function(e){function t(e,n,r){if("ENDSITE"!==r.type){var o={time:n,position:new i._105,rotation:new i._58};r.frames.push(o);for(var s=new i._58,a=new i._105(1,0,0),l=new i._105(0,1,0),c=new i._105(0,0,1),h=0;h<r.channels.length;h++)switch(r.channels[h]){case"Xposition":o.position.x=parseFloat(e.shift().trim());break;case"Yposition":o.position.y=parseFloat(e.shift().trim());break;case"Zposition":o.position.z=parseFloat(e.shift().trim());break;case"Xrotation":s.setFromAxisAngle(a,parseFloat(e.shift().trim())*Math.PI/180),o.rotation.multiply(s);break;case"Yrotation":s.setFromAxisAngle(l,parseFloat(e.shift().trim())*Math.PI/180),o.rotation.multiply(s);break;case"Zrotation":s.setFromAxisAngle(c,parseFloat(e.shift().trim())*Math.PI/180),o.rotation.multiply(s);break;default:console.warn("THREE.BVHLoader: Invalid channel type.")}for(h=0;h<r.children.length;h++)t(e,n,r.children[h])}}function n(e){for(var t;0===(t=e.shift().trim()).length;);return t}var r=this,o=function(e){"HIERARCHY"!==n(e)&&console.error("THREE.BVHLoader: HIERARCHY expected.");var r=[],o=function e(t,r,o){var s={name:"",type:"",frames:[]};o.push(s);var a=r.split(/[\s]+/);"END"===a[0].toUpperCase()&&"SITE"===a[1].toUpperCase()?(s.type="ENDSITE",s.name="ENDSITE"):(s.name=a[1],s.type=a[0].toUpperCase()),"{"!==n(t)&&console.error("THREE.BVHLoader: Expected opening { after type & name"),"OFFSET"!==(a=n(t).split(/[\s]+/))[0]&&console.error("THREE.BVHLoader: Expected OFFSET but got: "+a[0]),4!==a.length&&console.error("THREE.BVHLoader: Invalid number of values for OFFSET.");var l=new i._105(parseFloat(a[1]),parseFloat(a[2]),parseFloat(a[3]));if((isNaN(l.x)||isNaN(l.y)||isNaN(l.z))&&console.error("THREE.BVHLoader: Invalid values of OFFSET."),s.offset=l,"ENDSITE"!==s.type){"CHANNELS"!==(a=n(t).split(/[\s]+/))[0]&&console.error("THREE.BVHLoader: Expected CHANNELS definition.");var c=parseInt(a[1]);s.channels=a.splice(2,c),s.children=[]}for(;;){var h=n(t);if("}"===h)return s;s.children.push(e(t,h,o))}}(e,n(e),r);"MOTION"!==n(e)&&console.error("THREE.BVHLoader: MOTION expected.");var s=n(e).split(/[\s]+/),a=parseInt(s[1]);isNaN(a)&&console.error("THREE.BVHLoader: Failed to read number of frames."),s=n(e).split(/[\s]+/);var l=parseFloat(s[2]);isNaN(l)&&console.error("THREE.BVHLoader: Failed to read frame time.");for(var c=0;c<a;c++)t(s=n(e).split(/[\s]+/),c*l,o);return r}(e.split(/[\r\n]+/g)),s=[];!function e(t,n){var r=new i.h;if(n.push(r),r.position.add(t.offset),r.name=t.name,"ENDSITE"!==t.type)for(var o=0;o<t.children.length;o++)r.add(e(t.children[o],n));return r}(o[0],s);var a=function(e){for(var t=[],n=0;n<e.length;n++){var o=e[n];if("ENDSITE"!==o.type){for(var s=[],a=[],l=[],c=0;c<o.frames.length;c++){var h=o.frames[c];s.push(h.time),a.push(h.position.x+o.offset.x),a.push(h.position.y+o.offset.y),a.push(h.position.z+o.offset.z),l.push(h.rotation.x),l.push(h.rotation.y),l.push(h.rotation.z),l.push(h.rotation.w)}r.animateBonePositions&&t.push(new i._107(".bones["+o.name+"].position",s,a)),r.animateBoneRotations&&t.push(new i._59(".bones["+o.name+"].quaternion",s,l))}}return new i.e("animation",-1,t)}(o);return{skeleton:new i._82(s),clip:a}}});var s={data:function(){return{clock:null,camera:null,controls:null,scene:null,renderer:null,mixer:null,skeletonHelper:null,loader:null}},mounted:function(){var e=this;this.clock=new this.$THREE.Clock,this.init(),this.animate(),this.loader=new o,this.loader.load("static/models/bvh/pirouette.bvh",function(t){e.skeletonHelper=new e.$THREE.SkeletonHelper(t.skeleton.bones[0]),e.skeletonHelper.skeleton=t.skeleton;var n=new e.$THREE.Group;n.add(t.skeleton.bones[0]),e.scene.add(e.skeletonHelper),e.scene.add(n),e.mixer=new e.$THREE.AnimationMixer(e.skeletonHelper),e.mixer.clipAction(t.clip).setEffectiveWeight(1).play()})},methods:{init:function(){this.camera=new this.$THREE.PerspectiveCamera(60,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,200,300),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(15658734),this.scene.add(new this.$THREE.GridHelper(400,10)),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglLoaderBvh-container")[0].appendChild(this.renderer.domElement),this.controls=new r.b(this.camera,this.renderer.domElement),this.controls.minDistance=300,this.controls.maxDistance=700,window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},animate:function(){requestAnimationFrame(this.animate);var e=this.clock.getDelta();this.mixer&&this.mixer.update(e),this.renderer.render(this.scene,this.camera)}}},a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoaderBvh-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - BVH Loader"),t("br"),this._v("\n\t\t\tanimation from "),t("a",{attrs:{href:"http://mocap.cs.cmu.edu/"}},[this._v("http://mocap.cs.cmu.edu/")])])])}]};var l=n("VU/8")(s,a,!1,function(e){n("D/ct")},"data-v-b5c68e26",null);t.default=l.exports}});
//# sourceMappingURL=71.13b2c378bd7914550b8a.js.map