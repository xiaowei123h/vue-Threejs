webpackJsonp([71],{W88r:function(e,t){},"kD/V":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={data:function(){return{vertexshader:null,fragmentshader:null,camera:null,scene:null,renderer:null,stats:null,geometry:null,mesh:null,numLat:100,numLng:200,numLinesCulled:0}},mounted:function(){this.vertexshader="\n            attribute float visible;\n            varying float vVisible;\n            attribute vec3 vertColor;\n            varying vec3 vColor;\n\n            void main() {\n\n                vColor = vertColor;\n                vVisible = visible;\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n\n            }",this.fragmentshader="\n            varying float vVisible;\n            varying vec3 vColor;\n\n            void main() {\n\n                if ( vVisible > 0.0 ) {\n\n                    gl_FragColor = vec4( vColor, 1.0 );\n\n                } else {\n\n                    discard;\n\n                }\n\n            }",this.init(),this.animate()},methods:{init:function(){this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),document.getElementsByClassName("webglBuffergeometrySelectiveDraw-container")[0].appendChild(this.renderer.domElement),this.scene=new this.$THREE.Scene,this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,.01,10),this.camera.position.z=3.5,this.scene.add(new this.$THREE.AmbientLight(4473924)),this.stats=new this.$Stats,this.stats.dom.style.left="280px",document.getElementsByClassName("webglBuffergeometrySelectiveDraw-container")[0].appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1),this.addLines(1),document.getElementById("hideLines").addEventListener("click",this.hideLines),document.getElementById("showAllLines").addEventListener("click",this.showAllLines)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},addLines:function(e){this.geometry=new this.$THREE.BufferGeometry;for(var t=new Float32Array(this.numLat*this.numLng*3*2),i=new Float32Array(this.numLat*this.numLng*3*2),n=new Float32Array(this.numLat*this.numLng*2),s=0;s<this.numLat;++s)for(var r=0;r<this.numLng;++r){var a=Math.random()*Math.PI/50+s/this.numLat*Math.PI,h=Math.random()*Math.PI/50+r/this.numLng*2*Math.PI,o=s*this.numLng+r;t[6*o+0]=0,t[6*o+1]=0,t[6*o+2]=0,t[6*o+3]=e*Math.sin(a)*Math.cos(h),t[6*o+4]=e*Math.cos(a),t[6*o+5]=e*Math.sin(a)*Math.sin(h);var l=new this.$THREE.Color(16777215);l.setHSL(a/Math.PI,1,.2),i[6*o+0]=l.r,i[6*o+1]=l.g,i[6*o+2]=l.b,l.setHSL(a/Math.PI,1,.7),i[6*o+3]=l.r,i[6*o+4]=l.g,i[6*o+5]=l.b,n[2*o+0]=1,n[2*o+1]=1}this.geometry.setAttribute("position",new this.$THREE.BufferAttribute(t,3)),this.geometry.setAttribute("vertColor",new this.$THREE.BufferAttribute(i,3)),this.geometry.setAttribute("visible",new this.$THREE.BufferAttribute(n,1)),this.geometry.computeBoundingSphere();var d=new this.$THREE.ShaderMaterial({vertexShader:this.vertexshader,fragmentShader:this.fragmentshader});this.mesh=new this.$THREE.LineSegments(this.geometry,d),this.scene.add(this.mesh),this.updateCount()},updateCount:function(){var e="1 draw call, "+this.numLat*this.numLng+" lines, "+this.numLinesCulled+' culled (<a target="_blank" href="http://callum.com">author</a>)';document.getElementById("title").innerHTML=e.replace(/\B(?=(\d{3})+(?!\d))/g,",")},hideLines:function(){for(var e=0;e<this.geometry.attributes.visible.array.length;e+=2)Math.random()>.75&&(this.geometry.attributes.visible.array[e+0]&&++numLinesCulled,this.geometry.attributes.visible.array[e+0]=0,this.geometry.attributes.visible.array[e+1]=0);this.geometry.attributes.visible.needsUpdate=!0,this.updateCount()},showAllLines:function(){this.numLinesCulled=0;for(var e=0;e<this.geometry.attributes.visible.array.length;e+=2)this.geometry.attributes.visible.array[e+0]=1,this.geometry.attributes.visible.array[e+1]=1;this.geometry.attributes.visible.needsUpdate=!0,this.updateCount()},animate:function(){requestAnimationFrame(this.animate);var e=.001*Date.now();this.mesh.rotation.x=.25*e,this.mesh.rotation.y=.5*e,this.stats.update(),this.renderer.render(this.scene,this.camera)}}},s={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglBuffergeometrySelectiveDraw-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" buffergeometry - selective - draw\n\t\t\t"),t("div",{attrs:{id:"title"}}),this._v(" "),t("div",{attrs:{id:"ui"}},[t("a",{attrs:{href:"#",id:"hideLines"}},[this._v("CULL SOME LINES")]),this._v(" - "),t("a",{attrs:{href:"#",id:"showAllLines"}},[this._v("SHOW ALL LINES")])])])])}]};var r=i("VU/8")(n,s,!1,function(e){i("W88r")},"data-v-af21ac46",null);t.default=r.exports}});
//# sourceMappingURL=71.f0244484c6168d2cfc00.js.map