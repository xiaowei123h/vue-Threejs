webpackJsonp([8],{B6oc:function(e,t,r){"use strict";r.d(t,"a",function(){return a});var i=r("6+nK"),a=function e(t,r){i._22.call(this,t),this.type="Reflector";var a=this,n=void 0!==(r=r||{}).color?new i.p(r.color):new i.p(8355711),o=r.textureWidth||512,s=r.textureHeight||512,l=r.clipBias||0,h=r.shader||e.ReflectorShader,d=new i._42,c=new i._92,u=new i._92,p=new i._92,m=new i._21,w=new i._92(0,0,-1),f=new i._93,E=new i._92,v=new i._92,M=new i._93,g=new i._21,x=new i._41,T={minFilter:i._11,magFilter:i._11,format:i._56},R=new i._95(o,s,T);i._19.isPowerOfTwo(o)&&i._19.isPowerOfTwo(s)||(R.texture.generateMipmaps=!1);var H=new i._67({uniforms:i._89.clone(h.uniforms),fragmentShader:h.fragmentShader,vertexShader:h.vertexShader});H.uniforms.tDiffuse.value=R.texture,H.uniforms.color.value=n,H.uniforms.textureMatrix.value=g,this.material=H,this.onBeforeRender=function(e,t,r){if(u.setFromMatrixPosition(a.matrixWorld),p.setFromMatrixPosition(r.matrixWorld),m.extractRotation(a.matrixWorld),c.set(0,0,1),c.applyMatrix4(m),E.subVectors(u,p),!(E.dot(c)>0)){E.reflect(c).negate(),E.add(u),m.extractRotation(r.matrixWorld),w.set(0,0,-1),w.applyMatrix4(m),w.add(p),v.subVectors(u,w),v.reflect(c).negate(),v.add(u),x.position.copy(E),x.up.set(0,1,0),x.up.applyMatrix4(m),x.up.reflect(c),x.lookAt(v),x.far=r.far,x.updateMatrixWorld(),x.projectionMatrix.copy(r.projectionMatrix),g.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),g.multiply(x.projectionMatrix),g.multiply(x.matrixWorldInverse),g.multiply(a.matrixWorld),d.setFromNormalAndCoplanarPoint(c,u),d.applyMatrix4(x.matrixWorldInverse),f.set(d.normal.x,d.normal.y,d.normal.z,d.constant);var i=x.projectionMatrix;M.x=(Math.sign(f.x)+i.elements[8])/i.elements[0],M.y=(Math.sign(f.y)+i.elements[9])/i.elements[5],M.z=-1,M.w=(1+i.elements[10])/i.elements[14],f.multiplyScalar(2/f.dot(M)),i.elements[2]=f.x,i.elements[6]=f.y,i.elements[10]=f.z+1-l,i.elements[14]=f.w,R.texture.encoding=e.outputEncoding,a.visible=!1;var n=e.getRenderTarget(),o=e.xr.enabled,s=e.shadowMap.autoUpdate;e.xr.enabled=!1,e.shadowMap.autoUpdate=!1,e.setRenderTarget(R),e.state.buffers.depth.setMask(!0),!1===e.autoClear&&e.clear(),e.render(t,x),e.xr.enabled=o,e.shadowMap.autoUpdate=s,e.setRenderTarget(n);var h=r.viewport;void 0!==h&&e.state.viewport(h),a.visible=!0}},this.getRenderTarget=function(){return R}};a.prototype=Object.create(i._22.prototype),a.prototype.constructor=a,a.ReflectorShader={uniforms:{color:{value:null},tDiffuse:{value:null},textureMatrix:{value:null}},vertexShader:["uniform mat4 textureMatrix;","varying vec4 vUv;","void main() {","\tvUv = textureMatrix * vec4( position, 1.0 );","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform vec3 color;","uniform sampler2D tDiffuse;","varying vec4 vUv;","float blendOverlay( float base, float blend ) {","\treturn( base < 0.5 ? ( 2.0 * base * blend ) : ( 1.0 - 2.0 * ( 1.0 - base ) * ( 1.0 - blend ) ) );","}","vec3 blendOverlay( vec3 base, vec3 blend ) {","\treturn vec3( blendOverlay( base.r, blend.r ), blendOverlay( base.g, blend.g ), blendOverlay( base.b, blend.b ) );","}","void main() {","\tvec4 base = texture2DProj( tDiffuse, vUv );","\tgl_FragColor = vec4( blendOverlay( base.rgb, color ), 1.0 );","}"].join("\n")}},XgjR:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=r("QEtz"),a=r("wIBv"),n=r("B6oc"),o=function(e,t){n.a.call(this,e,t),this.geometry.setDrawRange(0,0)};o.prototype=Object.create(n.a.prototype);var s=r("p8Aj"),l={data:function(){return{WIDTH:null,HEIGHT:null,VIEW_ANGLE:45,ASPECT:null,NEAR:1,FAR:500,decalNormal:null,decalDiffuse:null,camera:null,scene:null,renderer:null,clock:null,cameraControls:null,gui:null,sphereGroup:null,smallSphere:null,groundMirrorMaterial:null,frame:null}},mounted:function(){this.WIDTH=this.$webglInnerWidth,this.HEIGHT=window.innerHeight,this.ASPECT=this.WIDTH/this.HEIGHT,this.decalNormal=(new this.$THREE.TextureLoader).load("static/textures/decal/decal-normal.jpg"),this.decalDiffuse=(new this.$THREE.TextureLoader).load("static/textures/decal/decal-diffuse.png"),this.decalDiffuse.wrapS=this.decalDiffuse.wrapT=this.$THREE.RepeatWrapping,this.clock=new this.$THREE.Clock,this.gui=new i.a,this.frame=new s.NodeFrame,this.init(),this.fillScene(),this.update()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){this.renderer=new this.$THREE.WebGLRenderer,this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.WIDTH,this.HEIGHT),this.scene=new this.$THREE.Scene,this.camera=new this.$THREE.PerspectiveCamera(this.VIEW_ANGLE,this.ASPECT,this.NEAR,this.FAR),this.camera.position.set(0,75,160),this.cameraControls=new a.a(this.camera,this.renderer.domElement),this.cameraControls.target.set(0,40,0),this.cameraControls.maxDistance=400,this.cameraControls.minDistance=10,this.cameraControls.update(),document.getElementById("container").appendChild(this.renderer.domElement),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},fillScene:function(){var e,t,r=new this.$THREE.PlaneBufferGeometry(100.1,100.1);e=new this.$THREE.PlaneBufferGeometry(100,100);var i=new o(e,{clipBias:.003,textureWidth:this.WIDTH,textureHeight:this.HEIGHT}),a=new s.SwitchNode(new s.TextureNode(this.decalDiffuse),"w"),n=new s.ReflectorNode(i),l=new s.TextureNode(this.decalNormal),h=new s.SwitchNode(l,"xy"),d=new s.MathNode(h,s.MathNode.INVERT),c=new s.OperatorNode(d,new s.FloatNode(.5),s.OperatorNode.SUB);n.offset=new s.OperatorNode(c,new s.FloatNode(6),s.OperatorNode.MUL);var u=new s.BlurNode(n);u.size=new this.$THREE.Vector2(this.WIDTH,this.HEIGHT),u.uv=new s.ExpressionNode("projCoord.xyz / projCoord.q","vec3"),u.uv.keywords.projCoord=new s.OperatorNode(n.offset,n.uv,s.OperatorNode.ADD),u.radius.x=u.radius.y=0,this.gui.add({blur:u.radius.x},"blur",0,25).onChange(function(e){u.radius.x=u.radius.y=e}),this.groundMirrorMaterial=new s.PhongNodeMaterial,this.groundMirrorMaterial.environment=u,this.groundMirrorMaterial.environmentAlpha=a,this.groundMirrorMaterial.normal=new s.NormalMapNode(l);var p=new this.$THREE.Mesh(r,this.groundMirrorMaterial);i.add(p),i.rotateX(-Math.PI/2),this.scene.add(i),this.sphereGroup=new this.$THREE.Object3D,this.scene.add(this.sphereGroup),e=new this.$THREE.CylinderBufferGeometry(.1,15*Math.cos(Math.PI/180*30),.1,24,1),t=new this.$THREE.MeshPhongMaterial({color:16777215,emissive:4473924});var m=new this.$THREE.Mesh(e,t);m.position.y=-15*Math.sin(Math.PI/180*30)-.05,m.rotateX(-Math.PI),e=new this.$THREE.SphereBufferGeometry(15,24,24,Math.PI/2,2*Math.PI,0,Math.PI/180*120);var w=new this.$THREE.Mesh(e,t);w.add(m),w.rotateX(-Math.PI/180*135),w.rotateZ(-Math.PI/180*20),w.position.y=7.5+15*Math.sin(Math.PI/180*30),this.sphereGroup.add(w),e=new this.$THREE.IcosahedronBufferGeometry(5,0),t=new this.$THREE.MeshPhongMaterial({color:16777215,emissive:3355443,flatShading:!0}),this.smallSphere=new this.$THREE.Mesh(e,t),this.scene.add(this.smallSphere);var f=new this.$THREE.Mesh(r,new this.$THREE.MeshPhongMaterial({color:16777215}));f.position.y=100,f.rotateX(Math.PI/2),this.scene.add(f);var E=new this.$THREE.Mesh(r,new this.$THREE.MeshPhongMaterial({color:16777215}));E.position.z=-50,E.position.y=50,this.scene.add(E);var v=new this.$THREE.Mesh(r,new this.$THREE.MeshPhongMaterial({color:8355839}));v.position.z=50,v.position.y=50,v.rotateY(Math.PI),this.scene.add(v);var M=new this.$THREE.Mesh(r,new this.$THREE.MeshPhongMaterial({color:65280}));M.position.x=50,M.position.y=50,M.rotateY(-Math.PI/2),this.scene.add(M);var g=new this.$THREE.Mesh(r,new this.$THREE.MeshPhongMaterial({color:16711680}));g.position.x=-50,g.position.y=50,g.rotateY(Math.PI/2),this.scene.add(g);var x=new this.$THREE.PointLight(13421772,1.5,250);x.position.y=60,this.scene.add(x);var T=new this.$THREE.PointLight(65280,.25,1e3);T.position.set(550,50,0),this.scene.add(T);var R=new this.$THREE.PointLight(16711680,.25,1e3);R.position.set(-550,50,0),this.scene.add(R);var H=new this.$THREE.PointLight(8355839,.25,1e3);H.position.set(0,50,550),this.scene.add(H)},render:function(){this.renderer.render(this.scene,this.camera)},update:function(){requestAnimationFrame(this.update);var e=this.clock.getDelta(),t=.01*Date.now();this.sphereGroup.rotation.y-=.002,this.smallSphere.position.set(30*Math.cos(.1*t),20*Math.abs(Math.cos(.2*t))+5,30*Math.sin(.1*t)),this.smallSphere.rotation.y=Math.PI/2-.1*t,this.smallSphere.rotation.z=.8*t,this.frame.update(e).updateNode(this.groundMirrorMaterial),this.render()}}},h={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglMirrorNodes-container"},[t("div",{attrs:{id:"container"}}),this._v(" "),t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - mirror node-based\n\t\t")])])}]};var d=r("VU/8")(l,h,!1,function(e){r("r39W")},"data-v-0d6ad06f",null);t.default=d.exports},r39W:function(e,t){}});
//# sourceMappingURL=8.522f2818148cf4b1e189.js.map