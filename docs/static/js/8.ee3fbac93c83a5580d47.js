webpackJsonp([8],{"1k18":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("QEtz"),o=i("wIBv"),s=i("Iu6k"),a=(i("el/I"),{data:function(){return{container:null,stats:null,camera:null,scene:null,renderer:null,splineHelperObjects:[],splinePointsLength:4,positions:[],point:null,raycaster:null,pointer:null,onUpPosition:null,onDownPosition:null,geometry:null,transformControl:null,ARC_SEGMENTS:200,splines:{},params:null,gui:null}},mounted:function(){this.point=new this.$THREE.Vector3,this.raycaster=new this.$THREE.Raycaster,this.pointer=new this.$THREE.Vector2,this.onUpPosition=new this.$THREE.Vector2,this.onDownPosition=new this.$THREE.Vector2,this.geometry=new this.$THREE.BoxBufferGeometry(20,20,20),this.ARC_SEGMENTS=200,this.splines={},this.params={uniform:!0,tension:.5,centripetal:!0,chordal:!0,addPoint:this.addPoint,removePoint:this.removePoint,exportSpline:this.exportSpline},this.init(),this.animate()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var e=this;this.container=document.getElementById("container"),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(15790320),this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,1,1e4),this.camera.position.set(0,250,1e3),this.scene.add(this.camera),this.scene.add(new this.$THREE.AmbientLight(15790320));var t=new this.$THREE.SpotLight(16777215,1.5);t.position.set(0,1500,200),t.angle=.2*Math.PI,t.castShadow=!0,t.shadow.camera.near=200,t.shadow.camera.far=2e3,t.shadow.bias=-222e-6,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,this.scene.add(t);var i=new this.$THREE.PlaneBufferGeometry(2e3,2e3);i.rotateX(-Math.PI/2);var a=new this.$THREE.ShadowMaterial({opacity:.2}),r=new this.$THREE.Mesh(i,a);r.position.y=-200,r.receiveShadow=!0,this.scene.add(r);var l=new this.$THREE.GridHelper(2e3,100);l.position.y=-199,l.material.opacity=.25,l.material.transparent=!0,this.scene.add(l),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.container.appendChild(this.renderer.domElement),this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),this.gui=new n.a,this.gui.add(this.params,"uniform"),this.gui.add(this.params,"tension",0,1).step(.01).onChange(function(t){e.splines.uniform.tension=t,e.updateSplineOutline()}),this.gui.add(this.params,"centripetal"),this.gui.add(this.params,"chordal"),this.gui.add(this.params,"addPoint"),this.gui.add(this.params,"removePoint"),this.gui.add(this.params,"exportSpline"),this.gui.open();var h=new o.a(this.camera,this.renderer.domElement);h.damping=.2,h.addEventListener("change",this.render),this.transformControl=new s.a(this.camera,this.renderer.domElement),this.transformControl.addEventListener("change",this.render),this.transformControl.addEventListener("dragging-changed",function(e){h.enabled=!e.value}),this.scene.add(this.transformControl),this.transformControl.addEventListener("objectChange",function(){e.updateSplineOutline()}),document.addEventListener("pointerdown",this.onPointerDown,!1),document.addEventListener("pointerup",this.onPointerUp,!1),document.addEventListener("pointermove",this.onPointerMove,!1);for(var c=0;c<this.splinePointsLength;c++)this.addSplineObject(this.positions[c]);this.positions.length=0;for(c=0;c<this.splinePointsLength;c++)this.positions.push(this.splineHelperObjects[c].position);var p=new this.$THREE.BufferGeometry;p.setAttribute("position",new this.$THREE.BufferAttribute(new Float32Array(3*this.ARC_SEGMENTS),3));var d=new this.$THREE.CatmullRomCurve3(this.positions);for(var u in d.curveType="catmullrom",d.mesh=new this.$THREE.Line(p.clone(),new this.$THREE.LineBasicMaterial({color:16711680,opacity:.35})),d.mesh.castShadow=!0,this.splines.uniform=d,(d=new this.$THREE.CatmullRomCurve3(this.positions)).curveType="centripetal",d.mesh=new this.$THREE.Line(p.clone(),new this.$THREE.LineBasicMaterial({color:65280,opacity:.35})),d.mesh.castShadow=!0,this.splines.centripetal=d,(d=new this.$THREE.CatmullRomCurve3(this.positions)).curveType="chordal",d.mesh=new this.$THREE.Line(p.clone(),new this.$THREE.LineBasicMaterial({color:255,opacity:.35})),d.mesh.castShadow=!0,this.splines.chordal=d,this.splines){var m=this.splines[u];this.scene.add(m.mesh)}this.load([new this.$THREE.Vector3(289.76843686945404,452.51481137238443,56.10018915737797),new this.$THREE.Vector3(-53.56300074753207,171.49711742836848,-14.495472686253045),new this.$THREE.Vector3(-91.40118730204415,176.4306956436485,-6.958271935582161),new this.$THREE.Vector3(-383.785318791128,491.1365363371675,47.869296953772746)]),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},addSplineObject:function(e){var t=new this.$THREE.MeshLambertMaterial({color:16777215*Math.random()}),i=new this.$THREE.Mesh(this.geometry,t);return e?i.position.copy(e):(i.position.x=1e3*Math.random()-500,i.position.y=600*Math.random(),i.position.z=800*Math.random()-400),i.castShadow=!0,i.receiveShadow=!0,this.scene.add(i),this.splineHelperObjects.push(i),i},addPoint:function(){this.splinePointsLength++,this.positions.push(this.addSplineObject().position),this.updateSplineOutline()},removePoint:function(){if(!(this.splinePointsLength<=4)){var e=this.splineHelperObjects.pop();this.splinePointsLength--,this.positions.pop(),this.transformControl.object===e&&this.transformControl.detach(),this.scene.remove(e),this.updateSplineOutline()}},updateSplineOutline:function(){for(var e in this.splines){for(var t=this.splines[e],i=t.mesh.geometry.attributes.position,n=0;n<this.ARC_SEGMENTS;n++){var o=n/(this.ARC_SEGMENTS-1);t.getPoint(o,this.point),i.setXYZ(n,this.point.x,this.point.y,this.point.z)}i.needsUpdate=!0}},exportSpline:function(){for(var e=[],t=0;t<this.splinePointsLength;t++){var i=this.splineHelperObjects[t].position;e.push("new this.$THREE.Vector3({0}, {1}, {2})".format("new this.$THREE.Vector3({0}, {1}, {2})",i.x,i.y,i.z))}console.log(e.join(",\n"));var n="["+e.join(",\n\t")+"]";prompt("copy and paste code",n)},load:function(e){for(;e.length>this.positions.length;)this.addPoint();for(;e.length<this.positions.length;)this.removePoint();for(var t=0;t<this.positions.length;t++)this.positions[t].copy(e[t]);this.updateSplineOutline()},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){this.splines.uniform.mesh.visible=this.params.uniform,this.splines.centripetal.mesh.visible=this.params.centripetal,this.splines.chordal.mesh.visible=this.params.chordal,this.renderer.render(this.scene,this.camera)},onPointerDown:function(e){this.onDownPosition.x=e.clientX,this.onDownPosition.y=e.clientY},onPointerUp:function(){this.onUpPosition.x=event.clientX,this.onUpPosition.y=event.clientY,0===this.onDownPosition.distanceTo(this.onUpPosition)&&this.transformControl.detach()},onPointerMove:function(e){this.pointer.x=2*(e.clientX/window.innerWidth-281)-1,this.pointer.y=-e.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);var t=this.raycaster.intersectObjects(this.splineHelperObjects);if(t.length>0){var i=t[0].object;i!==this.transformControl.object&&this.transformControl.attach(i)}}}}),r={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglGeometrySplineEditor-container"},[t("div",{attrs:{id:"container"}}),this._v(" "),t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - geometry - catmull spline editor\n\t\t")])])}]};var l=i("VU/8")(a,r,!1,function(e){i("RvJH")},"data-v-0e1baf35",null);t.default=l.exports},Iu6k:function(e,t,i){"use strict";i.d(t,"a",function(){return o});var n=i("6+nK"),o=function(e,t){void 0===t&&(console.warn('THREE.TransformControls: The second parameter "domElement" is now mandatory.'),t=document),n._44.call(this),this.visible=!1,this.domElement=t;var i=new s;this.add(i);var o=new a;this.add(o);var r=this;W("camera",e),W("object",void 0),W("enabled",!0),W("axis",null),W("mode","translate"),W("translationSnap",null),W("rotationSnap",null),W("scaleSnap",null),W("space","world"),W("size",1),W("dragging",!1),W("showX",!0),W("showY",!0),W("showZ",!0);var l={type:"change"},h={type:"mouseDown"},c={type:"mouseUp",mode:r.mode},p={type:"objectChange"},d=new n._72;function u(e,t,i){for(var n=t.intersectObject(e,!0),o=0;o<n.length;o++)if(n[o].object.visible||i)return n[o];return!1}var m=new n._102,w=new n._102,y=new n._56,v={X:new n._102(1,0,0),Y:new n._102(0,1,0),Z:new n._102(0,0,1)},_=new n._102,b=new n._102,f=new n._102,E=new n._102,g=new n._102,M=new n._102,P=0,S=new n._102,x=new n._56,X=new n._102,T=new n._102,Y=new n._56,Z=new n._56,I=new n._102,R=new n._102,j=new n._56,H=new n._102,A=new n._102,z=new n._56,C=new n._56,$=new n._102,Q=new n._102,L=new n._102,O=new n._56,k=new n._102;function W(e,t){var n=t;Object.defineProperty(r,e,{get:function(){return void 0!==n?n:t},set:function(t){n!==t&&(n=t,o[e]=t,i[e]=t,r.dispatchEvent({type:e+"-changed",value:t}),r.dispatchEvent(l))}}),r[e]=t,o[e]=t,i[e]=t}function q(e){if(r.domElement.ownerDocument.pointerLockElement)return{x:0,y:0,button:e.button};var i=e.changedTouches?e.changedTouches[0]:e,n=t.getBoundingClientRect();return{x:(i.clientX-n.left)/n.width*2-1,y:-(i.clientY-n.top)/n.height*2+1,button:e.button}}function D(e){if(r.enabled)switch(e.pointerType){case"mouse":case"pen":r.pointerHover(q(e))}}function F(e){r.enabled&&(r.domElement.style.touchAction="none",r.domElement.ownerDocument.addEventListener("pointermove",G,!1),r.pointerHover(q(e)),r.pointerDown(q(e)))}function G(e){r.enabled&&r.pointerMove(q(e))}function U(e){r.enabled&&(r.domElement.style.touchAction="",r.domElement.ownerDocument.removeEventListener("pointermove",G,!1),r.pointerUp(q(e)))}W("worldPosition",A),W("worldPositionStart",R),W("worldQuaternion",z),W("worldQuaternionStart",j),W("cameraPosition",S),W("cameraQuaternion",x),W("pointStart",_),W("pointEnd",b),W("rotationAxis",E),W("rotationAngle",P),W("eye",Q),t.addEventListener("pointerdown",F,!1),t.addEventListener("pointermove",D,!1),r.domElement.ownerDocument.addEventListener("pointerup",U,!1),this.dispose=function(){t.removeEventListener("pointerdown",F),t.removeEventListener("pointermove",D),r.domElement.ownerDocument.removeEventListener("pointermove",G),r.domElement.ownerDocument.removeEventListener("pointerup",U),this.traverse(function(e){e.geometry&&e.geometry.dispose(),e.material&&e.material.dispose()})},this.attach=function(e){return this.object=e,this.visible=!0,this},this.detach=function(){return this.object=void 0,this.visible=!1,this.axis=null,this},this.updateMatrixWorld=function(){void 0!==this.object&&(this.object.updateMatrixWorld(),null===this.object.parent?console.error("TransformControls: The attached 3D object must be a part of the scene graph."):this.object.parent.matrixWorld.decompose(T,Y,I),this.object.matrixWorld.decompose(A,z,$),Z.copy(Y).invert(),C.copy(z).invert()),this.camera.updateMatrixWorld(),this.camera.matrixWorld.decompose(S,x,X),Q.copy(S).sub(A).normalize(),n._44.prototype.updateMatrixWorld.call(this)},this.pointerHover=function(e){if(void 0!==this.object&&!0!==this.dragging){d.setFromCamera(e,this.camera);var t=u(i.picker[this.mode],d);this.axis=t?t.object.name:null}},this.pointerDown=function(e){if(void 0!==this.object&&!0!==this.dragging&&0===e.button&&null!==this.axis){d.setFromCamera(e,this.camera);var t=u(o,d,!0);if(t){var i=this.space;if("scale"===this.mode?i="local":"E"!==this.axis&&"XYZE"!==this.axis&&"XYZ"!==this.axis||(i="world"),"local"===i&&"rotate"===this.mode){var n=this.rotationSnap;"X"===this.axis&&n&&(this.object.rotation.x=Math.round(this.object.rotation.x/n)*n),"Y"===this.axis&&n&&(this.object.rotation.y=Math.round(this.object.rotation.y/n)*n),"Z"===this.axis&&n&&(this.object.rotation.z=Math.round(this.object.rotation.z/n)*n)}this.object.updateMatrixWorld(),this.object.parent.updateMatrixWorld(),L.copy(this.object.position),O.copy(this.object.quaternion),k.copy(this.object.scale),this.object.matrixWorld.decompose(R,j,H),_.copy(t.point).sub(R)}this.dragging=!0,h.mode=this.mode,this.dispatchEvent(h)}},this.pointerMove=function(e){var t=this.axis,i=this.mode,n=this.object,s=this.space;if("scale"===i?s="local":"E"!==t&&"XYZE"!==t&&"XYZ"!==t||(s="world"),void 0!==n&&null!==t&&!1!==this.dragging&&-1===e.button){d.setFromCamera(e,this.camera);var a=u(o,d,!0);if(a){if(b.copy(a.point).sub(R),"translate"===i)f.copy(b).sub(_),"local"===s&&"XYZ"!==t&&f.applyQuaternion(C),-1===t.indexOf("X")&&(f.x=0),-1===t.indexOf("Y")&&(f.y=0),-1===t.indexOf("Z")&&(f.z=0),"local"===s&&"XYZ"!==t?f.applyQuaternion(O).divide(I):f.applyQuaternion(Z).divide(I),n.position.copy(f).add(L),this.translationSnap&&("local"===s&&(n.position.applyQuaternion(y.copy(O).invert()),-1!==t.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.position.applyQuaternion(O)),"world"===s&&(n.parent&&n.position.add(m.setFromMatrixPosition(n.parent.matrixWorld)),-1!==t.search("X")&&(n.position.x=Math.round(n.position.x/this.translationSnap)*this.translationSnap),-1!==t.search("Y")&&(n.position.y=Math.round(n.position.y/this.translationSnap)*this.translationSnap),-1!==t.search("Z")&&(n.position.z=Math.round(n.position.z/this.translationSnap)*this.translationSnap),n.parent&&n.position.sub(m.setFromMatrixPosition(n.parent.matrixWorld))));else if("scale"===i){if(-1!==t.search("XYZ")){var r=b.length()/_.length();b.dot(_)<0&&(r*=-1),w.set(r,r,r)}else m.copy(_),w.copy(b),m.applyQuaternion(C),w.applyQuaternion(C),w.divide(m),-1===t.search("X")&&(w.x=1),-1===t.search("Y")&&(w.y=1),-1===t.search("Z")&&(w.z=1);n.scale.copy(k).multiply(w),this.scaleSnap&&(-1!==t.search("X")&&(n.scale.x=Math.round(n.scale.x/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Y")&&(n.scale.y=Math.round(n.scale.y/this.scaleSnap)*this.scaleSnap||this.scaleSnap),-1!==t.search("Z")&&(n.scale.z=Math.round(n.scale.z/this.scaleSnap)*this.scaleSnap||this.scaleSnap))}else if("rotate"===i){f.copy(b).sub(_);var h=20/A.distanceTo(m.setFromMatrixPosition(this.camera.matrixWorld));"E"===t?(E.copy(Q),P=b.angleTo(_),g.copy(_).normalize(),M.copy(b).normalize(),P*=M.cross(g).dot(Q)<0?1:-1):"XYZE"===t?(E.copy(f).cross(Q).normalize(),P=f.dot(m.copy(E).cross(this.eye))*h):"X"!==t&&"Y"!==t&&"Z"!==t||(E.copy(v[t]),m.copy(v[t]),"local"===s&&m.applyQuaternion(z),P=f.dot(m.cross(Q).normalize())*h),this.rotationSnap&&(P=Math.round(P/this.rotationSnap)*this.rotationSnap),this.rotationAngle=P,"local"===s&&"E"!==t&&"XYZE"!==t?(n.quaternion.copy(O),n.quaternion.multiply(y.setFromAxisAngle(E,P)).normalize()):(E.applyQuaternion(Z),n.quaternion.copy(y.setFromAxisAngle(E,P)),n.quaternion.multiply(O).normalize())}this.dispatchEvent(l),this.dispatchEvent(p)}}},this.pointerUp=function(e){0===e.button&&(this.dragging&&null!==this.axis&&(c.mode=this.mode,this.dispatchEvent(c)),this.dragging=!1,this.axis=null)},this.getMode=function(){return r.mode},this.setMode=function(e){r.mode=e},this.setTranslationSnap=function(e){r.translationSnap=e},this.setRotationSnap=function(e){r.rotationSnap=e},this.setScaleSnap=function(e){r.scaleSnap=e},this.setSize=function(e){r.size=e},this.setSpace=function(e){r.space=e},this.update=function(){console.warn("THREE.TransformControls: update function has no more functionality and therefore has been deprecated.")}};o.prototype=Object.assign(Object.create(n._44.prototype),{constructor:o,isTransformControls:!0});var s=function(){n._44.call(this),this.type="TransformControlsGizmo";var e=new n._29({depthTest:!1,depthWrite:!1,transparent:!0,side:n.I,fog:!1,toneMapped:!1}),t=new n._13({depthTest:!1,depthWrite:!1,transparent:!0,linewidth:1,fog:!1,toneMapped:!1}),i=e.clone();i.opacity=.15;var o=e.clone();o.opacity=.33;var s=e.clone();s.color.set(16711680);var a=e.clone();a.color.set(65280);var r=e.clone();r.color.set(255);var l=e.clone();l.opacity=.25;var h=l.clone();h.color.set(16776960);var c=l.clone();c.color.set(65535);var p=l.clone();p.color.set(16711935),e.clone().color.set(16776960);var d=t.clone();d.color.set(16711680);var u=t.clone();u.color.set(65280);var m=t.clone();m.color.set(255);var w=t.clone();w.color.set(65535);var y=t.clone();y.color.set(16711935);var v=t.clone();v.color.set(16776960);var _=t.clone();_.color.set(7895160);var b=v.clone();b.opacity=.25;var f=new n.A(0,.05,.2,12,1,!1),E=new n.j(.125,.125,.125),g=new n.l;g.setAttribute("position",new n.S([0,0,0,1,0,0],3));var M,P=function(e,t){for(var i=new n.l,o=[],s=0;s<=64*t;++s)o.push(0,Math.cos(s/32*Math.PI)*e,Math.sin(s/32*Math.PI)*e);return i.setAttribute("position",new n.S(o,3)),i},S={X:[[new n._28(f,s),[1,0,0],[0,0,-Math.PI/2],null,"fwd"],[new n._28(f,s),[1,0,0],[0,0,Math.PI/2],null,"bwd"],[new n._11(g,d)]],Y:[[new n._28(f,a),[0,1,0],null,null,"fwd"],[new n._28(f,a),[0,1,0],[Math.PI,0,0],null,"bwd"],[new n._11(g,u),null,[0,0,Math.PI/2]]],Z:[[new n._28(f,r),[0,0,1],[Math.PI/2,0,0],null,"fwd"],[new n._28(f,r),[0,0,1],[-Math.PI/2,0,0],null,"bwd"],[new n._11(g,m),null,[0,-Math.PI/2,0]]],XYZ:[[new n._28(new n._45(.1,0),l.clone()),[0,0,0],[0,0,0]]],XY:[[new n._28(new n._51(.295,.295),h.clone()),[.15,.15,0]],[new n._11(g,v),[.18,.3,0],null,[.125,1,1]],[new n._11(g,v),[.3,.18,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new n._28(new n._51(.295,.295),c.clone()),[0,.15,.15],[0,Math.PI/2,0]],[new n._11(g,w),[0,.18,.3],[0,0,Math.PI/2],[.125,1,1]],[new n._11(g,w),[0,.3,.18],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new n._28(new n._51(.295,.295),p.clone()),[.15,0,.15],[-Math.PI/2,0,0]],[new n._11(g,y),[.18,0,.3],null,[.125,1,1]],[new n._11(g,y),[.3,0,.18],[0,-Math.PI/2,0],[.125,1,1]]]},x={X:[[new n._28(new n.A(.2,0,1,4,1,!1),i),[.6,0,0],[0,0,-Math.PI/2]]],Y:[[new n._28(new n.A(.2,0,1,4,1,!1),i),[0,.6,0]]],Z:[[new n._28(new n.A(.2,0,1,4,1,!1),i),[0,0,.6],[Math.PI/2,0,0]]],XYZ:[[new n._28(new n._45(.2,0),i)]],XY:[[new n._28(new n._51(.4,.4),i),[.2,.2,0]]],YZ:[[new n._28(new n._51(.4,.4),i),[0,.2,.2],[0,Math.PI/2,0]]],XZ:[[new n._28(new n._51(.4,.4),i),[.2,0,.2],[-Math.PI/2,0,0]]]},X={START:[[new n._28(new n._45(.01,2),o),null,null,null,"helper"]],END:[[new n._28(new n._45(.01,2),o),null,null,null,"helper"]],DELTA:[[new n._11((M=new n.l,M.setAttribute("position",new n.S([0,0,0,1,1,1],3)),M),o),null,null,null,"helper"]],X:[[new n._11(g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n._11(g,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n._11(g,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},T={X:[[new n._11(P(1,.5),d)],[new n._28(new n._45(.04,0),s),[0,0,.99],null,[1,3,1]]],Y:[[new n._11(P(1,.5),u),null,[0,0,-Math.PI/2]],[new n._28(new n._45(.04,0),a),[0,0,.99],null,[3,1,1]]],Z:[[new n._11(P(1,.5),m),null,[0,Math.PI/2,0]],[new n._28(new n._45(.04,0),r),[.99,0,0],null,[1,3,1]]],E:[[new n._11(P(1.25,1),b),null,[0,Math.PI/2,0]],[new n._28(new n.A(.03,0,.15,4,1,!1),b),[1.17,0,0],[0,0,-Math.PI/2],[1,1,.001]],[new n._28(new n.A(.03,0,.15,4,1,!1),b),[-1.17,0,0],[0,0,Math.PI/2],[1,1,.001]],[new n._28(new n.A(.03,0,.15,4,1,!1),b),[0,-1.17,0],[Math.PI,0,0],[1,1,.001]],[new n._28(new n.A(.03,0,.15,4,1,!1),b),[0,1.17,0],[0,0,0],[1,1,.001]]],XYZE:[[new n._11(P(1,1),_),null,[0,Math.PI/2,0]]]},Y={AXIS:[[new n._11(g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]]},Z={X:[[new n._28(new n._90(1,.1,4,24),i),[0,0,0],[0,-Math.PI/2,-Math.PI/2]]],Y:[[new n._28(new n._90(1,.1,4,24),i),[0,0,0],[Math.PI/2,0,0]]],Z:[[new n._28(new n._90(1,.1,4,24),i),[0,0,0],[0,0,-Math.PI/2]]],E:[[new n._28(new n._90(1.25,.1,2,24),i)]],XYZE:[[new n._28(new n._82(.7,10,8),i)]]},I={X:[[new n._28(E,s),[.8,0,0],[0,0,-Math.PI/2]],[new n._11(g,d),null,null,[.8,1,1]]],Y:[[new n._28(E,a),[0,.8,0]],[new n._11(g,u),null,[0,0,Math.PI/2],[.8,1,1]]],Z:[[new n._28(E,r),[0,0,.8],[Math.PI/2,0,0]],[new n._11(g,m),null,[0,-Math.PI/2,0],[.8,1,1]]],XY:[[new n._28(E,h),[.85,.85,0],null,[2,2,.2]],[new n._11(g,v),[.855,.98,0],null,[.125,1,1]],[new n._11(g,v),[.98,.855,0],[0,0,Math.PI/2],[.125,1,1]]],YZ:[[new n._28(E,c),[0,.85,.85],null,[.2,2,2]],[new n._11(g,w),[0,.855,.98],[0,0,Math.PI/2],[.125,1,1]],[new n._11(g,w),[0,.98,.855],[0,-Math.PI/2,0],[.125,1,1]]],XZ:[[new n._28(E,p),[.85,0,.85],null,[2,.2,2]],[new n._11(g,y),[.855,0,.98],null,[.125,1,1]],[new n._11(g,y),[.98,0,.855],[0,-Math.PI/2,0],[.125,1,1]]],XYZX:[[new n._28(new n.j(.125,.125,.125),l.clone()),[1.1,0,0]]],XYZY:[[new n._28(new n.j(.125,.125,.125),l.clone()),[0,1.1,0]]],XYZZ:[[new n._28(new n.j(.125,.125,.125),l.clone()),[0,0,1.1]]]},R={X:[[new n._28(new n.A(.2,0,.8,4,1,!1),i),[.5,0,0],[0,0,-Math.PI/2]]],Y:[[new n._28(new n.A(.2,0,.8,4,1,!1),i),[0,.5,0]]],Z:[[new n._28(new n.A(.2,0,.8,4,1,!1),i),[0,0,.5],[Math.PI/2,0,0]]],XY:[[new n._28(E,i),[.85,.85,0],null,[3,3,.2]]],YZ:[[new n._28(E,i),[0,.85,.85],null,[.2,3,3]]],XZ:[[new n._28(E,i),[.85,0,.85],null,[3,.2,3]]],XYZX:[[new n._28(new n.j(.2,.2,.2),i),[1.1,0,0]]],XYZY:[[new n._28(new n.j(.2,.2,.2),i),[0,1.1,0]]],XYZZ:[[new n._28(new n.j(.2,.2,.2),i),[0,0,1.1]]]},j={X:[[new n._11(g,o.clone()),[-1e3,0,0],null,[1e6,1,1],"helper"]],Y:[[new n._11(g,o.clone()),[0,-1e3,0],[0,0,Math.PI/2],[1e6,1,1],"helper"]],Z:[[new n._11(g,o.clone()),[0,0,-1e3],[0,-Math.PI/2,0],[1e6,1,1],"helper"]]},H=function(e){var t=new n._44;for(var i in e)for(var o=e[i].length;o--;){var s=e[i][o][0].clone(),a=e[i][o][1],r=e[i][o][2],l=e[i][o][3],h=e[i][o][4];s.name=i,s.tag=h,a&&s.position.set(a[0],a[1],a[2]),r&&s.rotation.set(r[0],r[1],r[2]),l&&s.scale.set(l[0],l[1],l[2]),s.updateMatrix();var c=s.geometry.clone();c.applyMatrix4(s.matrix),s.geometry=c,s.renderOrder=1/0,s.position.set(0,0,0),s.rotation.set(0,0,0),s.scale.set(1,1,1),t.add(s)}return t},A=new n._102(0,0,0),z=new n.O,C=new n._102(0,1,0),$=new n._102(0,0,0),Q=new n._27,L=new n._56,O=new n._56,k=new n._56,W=new n._102(1,0,0),q=new n._102(0,1,0),D=new n._102(0,0,1);this.gizmo={},this.picker={},this.helper={},this.add(this.gizmo.translate=H(S)),this.add(this.gizmo.rotate=H(T)),this.add(this.gizmo.scale=H(I)),this.add(this.picker.translate=H(x)),this.add(this.picker.rotate=H(Z)),this.add(this.picker.scale=H(R)),this.add(this.helper.translate=H(X)),this.add(this.helper.rotate=H(Y)),this.add(this.helper.scale=H(j)),this.picker.translate.visible=!1,this.picker.rotate.visible=!1,this.picker.scale.visible=!1,this.updateMatrixWorld=function(){var e=this.space;"scale"===this.mode&&(e="local");var t="local"===e?this.worldQuaternion:k;this.gizmo.translate.visible="translate"===this.mode,this.gizmo.rotate.visible="rotate"===this.mode,this.gizmo.scale.visible="scale"===this.mode,this.helper.translate.visible="translate"===this.mode,this.helper.rotate.visible="rotate"===this.mode,this.helper.scale.visible="scale"===this.mode;var i=[];i=(i=(i=i.concat(this.picker[this.mode].children)).concat(this.gizmo[this.mode].children)).concat(this.helper[this.mode].children);for(var o=0;o<i.length;o++){var s,a=i[o];if(a.visible=!0,a.rotation.set(0,0,0),a.position.copy(this.worldPosition),s=this.camera.isOrthographicCamera?(this.camera.top-this.camera.bottom)/this.camera.zoom:this.worldPosition.distanceTo(this.cameraPosition)*Math.min(1.9*Math.tan(Math.PI*this.camera.fov/360)/this.camera.zoom,7),a.scale.set(1,1,1).multiplyScalar(s*this.size/7),"helper"!==a.tag){if(a.quaternion.copy(t),"translate"===this.mode||"scale"===this.mode){"X"!==a.name&&"XYZX"!==a.name||Math.abs(C.copy(W).applyQuaternion(t).dot(this.eye))>.99&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Y"!==a.name&&"XYZY"!==a.name||Math.abs(C.copy(q).applyQuaternion(t).dot(this.eye))>.99&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"Z"!==a.name&&"XYZZ"!==a.name||Math.abs(C.copy(D).applyQuaternion(t).dot(this.eye))>.99&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XY"===a.name&&Math.abs(C.copy(D).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"YZ"===a.name&&Math.abs(C.copy(W).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),"XZ"===a.name&&Math.abs(C.copy(q).applyQuaternion(t).dot(this.eye))<.2&&(a.scale.set(1e-10,1e-10,1e-10),a.visible=!1),-1!==a.name.search("X")&&(C.copy(W).applyQuaternion(t).dot(this.eye)<0?"fwd"===a.tag?a.visible=!1:a.scale.x*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Y")&&(C.copy(q).applyQuaternion(t).dot(this.eye)<0?"fwd"===a.tag?a.visible=!1:a.scale.y*=-1:"bwd"===a.tag&&(a.visible=!1)),-1!==a.name.search("Z")&&(C.copy(D).applyQuaternion(t).dot(this.eye)<0?"fwd"===a.tag?a.visible=!1:a.scale.z*=-1:"bwd"===a.tag&&(a.visible=!1))}else"rotate"===this.mode&&(O.copy(t),C.copy(this.eye).applyQuaternion(L.copy(t).invert()),-1!==a.name.search("E")&&a.quaternion.setFromRotationMatrix(Q.lookAt(this.eye,$,q)),"X"===a.name&&(L.setFromAxisAngle(W,Math.atan2(-C.y,C.z)),L.multiplyQuaternions(O,L),a.quaternion.copy(L)),"Y"===a.name&&(L.setFromAxisAngle(q,Math.atan2(C.x,C.z)),L.multiplyQuaternions(O,L),a.quaternion.copy(L)),"Z"===a.name&&(L.setFromAxisAngle(D,Math.atan2(C.y,C.x)),L.multiplyQuaternions(O,L),a.quaternion.copy(L)));a.visible=a.visible&&(-1===a.name.indexOf("X")||this.showX),a.visible=a.visible&&(-1===a.name.indexOf("Y")||this.showY),a.visible=a.visible&&(-1===a.name.indexOf("Z")||this.showZ),a.visible=a.visible&&(-1===a.name.indexOf("E")||this.showX&&this.showY&&this.showZ),a.material._opacity=a.material._opacity||a.material.opacity,a.material._color=a.material._color||a.material.color.clone(),a.material.color.copy(a.material._color),a.material.opacity=a.material._opacity,this.enabled?this.axis&&(a.name===this.axis?(a.material.opacity=1,a.material.color.lerp(new n.q(1,1,1),.5)):this.axis.split("").some(function(e){return a.name===e})?(a.material.opacity=1,a.material.color.lerp(new n.q(1,1,1),.5)):(a.material.opacity*=.25,a.material.color.lerp(new n.q(1,1,1),.5))):(a.material.opacity*=.5,a.material.color.lerp(new n.q(1,1,1),.5))}else a.visible=!1,"AXIS"===a.name?(a.position.copy(this.worldPositionStart),a.visible=!!this.axis,"X"===this.axis&&(L.setFromEuler(z.set(0,0,0)),a.quaternion.copy(t).multiply(L),Math.abs(C.copy(W).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Y"===this.axis&&(L.setFromEuler(z.set(0,0,Math.PI/2)),a.quaternion.copy(t).multiply(L),Math.abs(C.copy(q).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"Z"===this.axis&&(L.setFromEuler(z.set(0,Math.PI/2,0)),a.quaternion.copy(t).multiply(L),Math.abs(C.copy(D).applyQuaternion(t).dot(this.eye))>.9&&(a.visible=!1)),"XYZE"===this.axis&&(L.setFromEuler(z.set(0,Math.PI/2,0)),C.copy(this.rotationAxis),a.quaternion.setFromRotationMatrix(Q.lookAt($,C,q)),a.quaternion.multiply(L),a.visible=this.dragging),"E"===this.axis&&(a.visible=!1)):"START"===a.name?(a.position.copy(this.worldPositionStart),a.visible=this.dragging):"END"===a.name?(a.position.copy(this.worldPosition),a.visible=this.dragging):"DELTA"===a.name?(a.position.copy(this.worldPositionStart),a.quaternion.copy(this.worldQuaternionStart),A.set(1e-10,1e-10,1e-10).add(this.worldPositionStart).sub(this.worldPosition).multiplyScalar(-1),A.applyQuaternion(this.worldQuaternionStart.clone().invert()),a.scale.copy(A),a.visible=this.dragging):(a.quaternion.copy(t),this.dragging?a.position.copy(this.worldPositionStart):a.position.copy(this.worldPosition),this.axis&&(a.visible=-1!==this.axis.search(a.name)))}n._44.prototype.updateMatrixWorld.call(this)}};s.prototype=Object.assign(Object.create(n._44.prototype),{constructor:s,isTransformControlsGizmo:!0});var a=function(){n._28.call(this,new n._51(1e5,1e5,2,2),new n._29({visible:!1,wireframe:!0,side:n.I,transparent:!0,opacity:.1,toneMapped:!1})),this.type="TransformControlsPlane";var e=new n._102(1,0,0),t=new n._102(0,1,0),i=new n._102(0,0,1),o=new n._102,s=new n._102,a=new n._102,r=new n._27,l=new n._56;this.updateMatrixWorld=function(){var h=this.space;switch(this.position.copy(this.worldPosition),"scale"===this.mode&&(h="local"),e.set(1,0,0).applyQuaternion("local"===h?this.worldQuaternion:l),t.set(0,1,0).applyQuaternion("local"===h?this.worldQuaternion:l),i.set(0,0,1).applyQuaternion("local"===h?this.worldQuaternion:l),a.copy(t),this.mode){case"translate":case"scale":switch(this.axis){case"X":a.copy(this.eye).cross(e),s.copy(e).cross(a);break;case"Y":a.copy(this.eye).cross(t),s.copy(t).cross(a);break;case"Z":a.copy(this.eye).cross(i),s.copy(i).cross(a);break;case"XY":s.copy(i);break;case"YZ":s.copy(e);break;case"XZ":a.copy(i),s.copy(t);break;case"XYZ":case"E":s.set(0,0,0)}break;case"rotate":default:s.set(0,0,0)}0===s.length()?this.quaternion.copy(this.cameraQuaternion):(r.lookAt(o.set(0,0,0),s,a),this.quaternion.setFromRotationMatrix(r)),n._44.prototype.updateMatrixWorld.call(this)}};a.prototype=Object.assign(Object.create(n._28.prototype),{constructor:a,isTransformControlsPlane:!0})},RvJH:function(e,t){},"el/I":function(e,t){String.prototype.format=function(e,t,i,n){e=e;for(var o=[t,i,n],s=0;s<o.length;s++)e=e.replace("{"+s+"}",o[s]);return e}}});
//# sourceMappingURL=8.ee3fbac93c83a5580d47.js.map