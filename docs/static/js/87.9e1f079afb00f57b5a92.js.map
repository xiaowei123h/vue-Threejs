{"version":3,"sources":["webpack:///src/views/buffergeometry/webglBuffergeometryInstancing.vue","webpack:///./src/views/buffergeometry/webglBuffergeometryInstancing.vue?06e5","webpack:///./src/views/buffergeometry/webglBuffergeometryInstancing.vue"],"names":["webglBuffergeometryInstancing","data","vertexShader","fragmentShader","container","stats","camera","scene","renderer","gui","mounted","this","init","animate","beforeDestroy","destroy","methods","document","getElementById","$THREE","PerspectiveCamera","$webglInnerWidth","window","innerHeight","position","z","Scene","vector","Vector4","positions","offsets","colors","orientationsStart","orientationsEnd","push","i","Math","random","set","normalize","x","y","w","geometry","InstancedBufferGeometry","instanceCount","setAttribute","Float32BufferAttribute","InstancedBufferAttribute","Float32Array","material","RawShaderMaterial","uniforms","time","value","sineTime","side","DoubleSide","transparent","mesh","Mesh","add","WebGLRenderer","setPixelRatio","devicePixelRatio","setSize","appendChild","domElement","capabilities","isWebGL2","extensions","has","dat_gui_module","width","$Stats","dom","style","left","addEventListener","onWindowResize","display","$onWindowResize","requestAnimationFrame","render","update","performance","now","object","children","rotation","sin","buffergeometry_webglBuffergeometryInstancing","$createElement","_self","_c","_m","staticRenderFns","_h","staticClass","attrs","id","_v","href","target","rel","staticStyle","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/87.9e1f079afb00f57b5a92.js","sourcesContent":["<template>\r\n    <div class=\"webglBuffergeometryInstancing-container\">\r\n        <div id=\"container\"></div>\r\n        <div id=\"info\">\r\n            <a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> - instancing demo (single triangle)\r\n            <div id=\"notSupported\" style=\"display:none\">Sorry your graphics card + browser does not support hardware instancing</div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { GUI } from '@/components/jsm/libs/dat.gui.module.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            vertexShader: null,\r\n            fragmentShader: null,\r\n            container: null,\r\n            stats: null,\r\n            camera: null,\r\n            scene: null,\r\n\t\t\trenderer: null,\r\n\t\t\tgui: null\r\n        }\r\n    },\r\n    mounted() {\r\n        this.vertexShader = `\r\n            precision highp float;\r\n            uniform float sineTime;\r\n            uniform mat4 modelViewMatrix;\r\n            uniform mat4 projectionMatrix;\r\n            attribute vec3 position;\r\n            attribute vec3 offset;\r\n            attribute vec4 color;\r\n            attribute vec4 orientationStart;\r\n            attribute vec4 orientationEnd;\r\n            varying vec3 vPosition;\r\n            varying vec4 vColor;\r\n            void main(){\r\n                vPosition = offset * max( abs( sineTime * 2.0 + 1.0 ), 0.5 ) + position;\r\n                vec4 orientation = normalize( mix( orientationStart, orientationEnd, sineTime ) );\r\n                vec3 vcV = cross( orientation.xyz, vPosition );\r\n                vPosition = vcV * ( 2.0 * orientation.w ) + ( cross( orientation.xyz, vcV ) * 2.0 + vPosition );\r\n                vColor = color;\r\n                gl_Position = projectionMatrix * modelViewMatrix * vec4( vPosition, 1.0 );\r\n            }`\r\n        this.fragmentShader = `\r\n            precision highp float;\r\n            uniform float time;\r\n            varying vec3 vPosition;\r\n            varying vec4 vColor;\r\n            void main() {\r\n                vec4 color = vec4( vColor );\r\n                color.r += sin( vPosition.x * 10.0 + time ) * 0.5;\r\n                gl_FragColor = color;\r\n            }`\r\n        this.init()\r\n        this.animate()\r\n\t},\r\n\tbeforeDestroy() {\r\n        this.gui.destroy()\r\n    },\r\n    methods: {\r\n        init() {\r\n\t\t\tthis.container = document.getElementById('container')\r\n\t\t\tthis.camera = new this.$THREE.PerspectiveCamera(50, this.$webglInnerWidth / window.innerHeight, 1, 10)\r\n\t\t\tthis.camera.position.z = 2\r\n\t\t\tthis.scene = new this.$THREE.Scene()\r\n\t\t\t// geometry\r\n\t\t\tvar vector = new this.$THREE.Vector4()\r\n\t\t\tvar instances = 50000\r\n\t\t\tvar positions = []\r\n\t\t\tvar offsets = []\r\n\t\t\tvar colors = []\r\n\t\t\tvar orientationsStart = []\r\n\t\t\tvar orientationsEnd = []\r\n\t\t\tpositions.push(0.025, - 0.025, 0)\r\n\t\t\tpositions.push(- 0.025, 0.025, 0)\r\n\t\t\tpositions.push(0, 0, 0.025)\r\n\t\t\t// instanced attributes\r\n\t\t\tfor (var i = 0; i < instances; i ++) {\r\n\t\t\t\t// offsets\r\n\t\t\t\toffsets.push(Math.random() - 0.5, Math.random() - 0.5, Math.random() - 0.5)\r\n\t\t\t\t// colors\r\n\t\t\t\tcolors.push(Math.random(), Math.random(), Math.random(), Math.random())\r\n\t\t\t\t// orientation start\r\n\t\t\t\tvector.set(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1)\r\n\t\t\t\tvector.normalize()\r\n\t\t\t\torientationsStart.push(vector.x, vector.y, vector.z, vector.w)\r\n\t\t\t\t// orientation end\r\n\t\t\t\tvector.set(Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1, Math.random() * 2 - 1)\r\n\t\t\t\tvector.normalize()\r\n\t\t\t\torientationsEnd.push(vector.x, vector.y, vector.z, vector.w)\r\n\t\t\t}\r\n\t\t\tvar geometry = new this.$THREE.InstancedBufferGeometry()\r\n\t\t\tgeometry.instanceCount = instances // set so its initalized for dat.GUI, will be set in first draw otherwise\r\n\t\t\tgeometry.setAttribute('position', new this.$THREE.Float32BufferAttribute(positions, 3))\r\n\t\t\tgeometry.setAttribute('offset', new this.$THREE.InstancedBufferAttribute(new Float32Array(offsets), 3))\r\n\t\t\tgeometry.setAttribute('color', new this.$THREE.InstancedBufferAttribute(new Float32Array(colors), 4))\r\n\t\t\tgeometry.setAttribute('orientationStart', new this.$THREE.InstancedBufferAttribute(new Float32Array(orientationsStart), 4))\r\n\t\t\tgeometry.setAttribute('orientationEnd', new this.$THREE.InstancedBufferAttribute(new Float32Array(orientationsEnd), 4))\r\n\t\t\t// material\r\n\t\t\tvar material = new this.$THREE.RawShaderMaterial({\r\n\t\t\t\tuniforms: {\r\n\t\t\t\t\t\"time\": { value: 1.0 },\r\n\t\t\t\t\t\"sineTime\": { value: 1.0 }\r\n\t\t\t\t},\r\n\t\t\t\tvertexShader: this.vertexShader,\r\n\t\t\t\tfragmentShader: this.fragmentShader,\r\n\t\t\t\tside: this.$THREE.DoubleSide,\r\n\t\t\t\ttransparent: true\r\n\t\t\t})\r\n\t\t\t//\r\n\t\t\tvar mesh = new this.$THREE.Mesh(geometry, material)\r\n\t\t\tthis.scene.add(mesh)\r\n\t\t\t//\r\n\t\t\tthis.renderer = new this.$THREE.WebGLRenderer()\r\n\t\t\tthis.renderer.setPixelRatio(window.devicePixelRatio)\r\n\t\t\tthis.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n\t\t\tthis.container.appendChild(this.renderer.domElement)\r\n\t\t\tif (this.renderer.capabilities.isWebGL2 === false && this.renderer.extensions.has('ANGLE_instanced_arrays') === false) {\r\n\t\t\t\tdocument.getElementById('notSupported').style.display = ''\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\t\t\t//\r\n\t\t\tthis.gui = new GUI({ width: 350 })\r\n\t\t\tthis.gui.add(geometry, 'instanceCount', 0, instances)\r\n\t\t\t//\r\n            this.stats = new this.$Stats()\r\n            this.stats.dom.style.left = '280px'\r\n\t\t\tthis.container.appendChild(this.stats.dom)\r\n\t\t\t//\r\n\t\t\twindow.addEventListener('resize', this.onWindowResize, false)\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n        },\r\n        animate() {\r\n\t\t\trequestAnimationFrame(this.animate)\r\n\t\t\tthis.render()\r\n\t\t\tthis.stats.update()\r\n        },\r\n        render() {\r\n\t\t\tvar time = performance.now()\r\n\t\t\tvar object = this.scene.children[0]\r\n\t\t\tobject.rotation.y = time * 0.0005\r\n\t\t\tobject.material.uniforms[\"time\"].value = time * 0.005\r\n\t\t\tobject.material.uniforms[\"sineTime\"].value = Math.sin(object.material.uniforms[\"time\"].value * 0.05)\r\n\t\t\tthis.renderer.render(this.scene, this.camera)\r\n\t\t}\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.webglBuffergeometryInstancing-container {\r\n    width: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/buffergeometry/webglBuffergeometryInstancing.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"webglBuffergeometryInstancing-container\"},[_c('div',{attrs:{\"id\":\"container\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" - instancing demo (single triangle)\\n        \"),_c('div',{staticStyle:{\"display\":\"none\"},attrs:{\"id\":\"notSupported\"}},[_vm._v(\"Sorry your graphics card + browser does not support hardware instancing\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-e0dcd2c6\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/buffergeometry/webglBuffergeometryInstancing.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-e0dcd2c6\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webglBuffergeometryInstancing.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglBuffergeometryInstancing.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglBuffergeometryInstancing.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-e0dcd2c6\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webglBuffergeometryInstancing.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-e0dcd2c6\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/buffergeometry/webglBuffergeometryInstancing.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}