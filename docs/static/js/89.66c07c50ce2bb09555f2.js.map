{"version":3,"sources":["webpack:///src/views/pmrem/webglPmremTest.vue","webpack:///./src/views/pmrem/webglPmremTest.vue?af62","webpack:///./src/views/pmrem/webglPmremTest.vue"],"names":["webglPmremTest","data","scene","camera","controls","renderer","mounted","Promise","resolve","then","this","init","createObjects","render","methods","_this","width","$webglInnerWidth","height","window","innerHeight","aspect","$THREE","WebGLRenderer","antialias","setPixelRatio","devicePixelRatio","setSize","outputEncoding","sRGBEncoding","physicallyCorrectLights","toneMapping","ACESFilmicToneMapping","toneMappingExposure","document","getElementsByClassName","appendChild","domElement","addEventListener","onResize","Scene","PerspectiveCamera","updateCamera","position","set","OrbitControls","minDistance","maxDistance","directionalLight","DirectionalLight","theta","Math","PI","phi","setFromSphericalCoords","add","traverse","child","isMesh","material","envMapIntensity","intensity","_this2","radianceMap","RGBELoader","setDataType","UnsignedByteType","setPath","load","texture","pmremGenerator","fromEquirectangular","dispose","background","geometry","SphereBufferGeometry","x","y","MeshPhysicalMaterial","roughness","metalness","color","envMap","mesh","Mesh","PMREMGenerator","compileEquirectangularShader","innerWidth","verticalFoV","atan","tan","horizontalFoV","fov","updateProjectionMatrix","pmrem_webglPmremTest","$createElement","_self","_c","_m","staticRenderFns","_vm","_h","staticClass","attrs","id","href","target","rel","_v","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/89.66c07c50ce2bb09555f2.js","sourcesContent":["<template>\r\n    <div class=\"webglPmremTest-container\">\r\n        <div id=\"container\">\r\n\t\t\t<div id=\"info\">\r\n\t\t\t\t<a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> -\r\n\t\t\t\tPMREM directional light test <a href=\"https://github.com/elalish\" target=\"_blank\" rel=\"noopener\">Emmett Lalish</a>\r\n\t\t\t\t<br>Top row is white metal\r\n\t\t\t\t<br>Middle row is white dielectric\r\n\t\t\t\t<br>Bottom row is black dielectric.\r\n\t\t\t\t<br>Mouse-out is a standard Directional Light.\r\n\t\t\t\t<br>Mouse-over is a PMREM of the skybox: a single bright pixel representing the same directional light source.\r\n\t\t\t\t<br>The difference between these renders indicates the error in the PMREM approximations.\r\n\t\t\t</div>\r\n\t\t</div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { OrbitControls } from '@/components/jsm/controls/OrbitControls.js'\r\nimport { RGBELoader } from '@/components/jsm/loaders/RGBELoader.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            scene: null,\r\n            camera: null,\r\n            controls: null,\r\n            renderer: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        Promise.resolve()\r\n            .then(this.init)\r\n            .then(this.createObjects)\r\n            .then(this.render)\r\n    },\r\n    methods: {\r\n        init() {\r\n            var width = this.$webglInnerWidth\r\n            var height = window.innerHeight\r\n            var aspect = width / height\r\n            // renderer\r\n            this.renderer = new this.$THREE.WebGLRenderer({ antialias: true })\r\n            this.renderer.setPixelRatio(window.devicePixelRatio)\r\n            this.renderer.setSize(width, height)\r\n            this.renderer.outputEncoding = this.$THREE.sRGBEncoding\r\n            this.renderer.physicallyCorrectLights = true\r\n            // tonemapping\r\n            this.renderer.toneMapping = this.$THREE.ACESFilmicToneMapping\r\n            this.renderer.toneMappingExposure = 1\r\n            document.getElementsByClassName('webglPmremTest-container')[0].appendChild(this.renderer.domElement)\r\n            window.addEventListener('resize', this.onResize, false)\r\n            // scene\r\n            this.scene = new this.$THREE.Scene()\r\n            // camera\r\n            this.camera = new this.$THREE.PerspectiveCamera(40, aspect, 1, 30)\r\n            this.updateCamera()\r\n            this.camera.position.set(0, 0, 16)\r\n            // controls\r\n            this.controls = new OrbitControls(this.camera, this.renderer.domElement)\r\n            this.controls.addEventListener('change', this.render) // use if there is no animation loop\r\n            this.controls.minDistance = 4\r\n            this.controls.maxDistance = 20\r\n            // light\r\n            var directionalLight = new this.$THREE.DirectionalLight(0xffffff, 0) // set intensity to 0 to start\r\n            var x = 597\r\n            var y = 213\r\n            var theta = (x + 0.5) * Math.PI / 512\r\n            var phi = (y + 0.5) * Math.PI / 512\r\n            directionalLight.position.setFromSphericalCoords(100, - phi, Math.PI / 2 - theta)\r\n            this.scene.add(directionalLight)\r\n            // this.scene.add(new this.$THREE.DirectionalLightHelper(directionalLight))\r\n            // The spot1Lux HDR environment map is expressed in nits (lux / sr). The directional light has units of lux,\r\n            // so to match a 1 lux light, we set a single pixel with a value equal to 1 divided by the solid\r\n            // angle of the pixel in steradians. This image is 1024 x 512,\r\n            // so the value is 1 / (sin(phi) * (pi / 512) ^ 2) = 27,490 nits.\r\n            document.getElementsByClassName('webglPmremTest-container')[0].addEventListener('mouseover', () => {\r\n                this.scene.traverse((child) => {\r\n                    if (child.isMesh) {\r\n                        child.material.envMapIntensity = 1\r\n                        directionalLight.intensity = 0\r\n                    }\r\n                })\r\n                this.render()\r\n            })\r\n            document.getElementsByClassName('webglPmremTest-container')[0].addEventListener('mouseout', () => {\r\n                this.scene.traverse((child) => {\r\n                    if (child.isMesh) {\r\n                        child.material.envMapIntensity = 0\r\n                        directionalLight.intensity = 1\r\n                    }\r\n                })\r\n                this.render()\r\n            })\r\n        },\r\n        createObjects() {\r\n            var radianceMap = null\r\n            new RGBELoader()\r\n                .setDataType(this.$THREE.UnsignedByteType)\r\n                // .setDataType(this.$THREE.FloatType)\r\n                .setPath('static/textures/equirectangular/')\r\n                .load('spot1Lux.hdr', (texture) => {\r\n                    radianceMap = pmremGenerator.fromEquirectangular(texture).texture\r\n                    pmremGenerator.dispose()\r\n                    this.scene.background = radianceMap\r\n                    var geometry = new this.$THREE.SphereBufferGeometry(0.4, 32, 32)\r\n                    for (var x = 0; x <= 10; x ++) {\r\n                        for (var y = 0; y <= 2; y ++) {\r\n                            var material = new this.$THREE.MeshPhysicalMaterial({\r\n                                roughness: x / 10,\r\n                                metalness: y < 1 ? 1 : 0,\r\n                                color: y < 2 ? 0xffffff : 0x000000,\r\n                                envMap: radianceMap,\r\n                                envMapIntensity: 1\r\n                            })\r\n                            var mesh = new this.$THREE.Mesh(geometry, material)\r\n                            mesh.position.x = x - 5\r\n                            mesh.position.y = 1 - y\r\n                            this.scene.add(mesh)\r\n                        }\r\n                    }\r\n                    this.render()\r\n                })\r\n            var pmremGenerator = new this.$THREE.PMREMGenerator(this.renderer)\r\n            pmremGenerator.compileEquirectangularShader()\r\n        },\r\n        onResize() {\r\n            var width = window.innerWidth - 281\r\n            var height = window.innerHeight\r\n            this.camera.aspect = width / height\r\n            this.updateCamera()\r\n            this.renderer.setSize(width, height)\r\n            this.render()\r\n        },\r\n        updateCamera() {\r\n            var horizontalFoV = 40\r\n            var verticalFoV = 2 * Math.atan(Math.tan(horizontalFoV / 2 * Math.PI / 180) / this.camera.aspect) * 180 / Math.PI\r\n            this.camera.fov = verticalFoV\r\n            this.camera.updateProjectionMatrix()\r\n        },\r\n        render() {\r\n            this.renderer.render(this.scene, this.camera)\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.webglPmremTest-container {\r\n    width: 100%;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/pmrem/webglPmremTest.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"webglPmremTest-container\"},[_c('div',{attrs:{\"id\":\"container\"}},[_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" -\\n\\t\\t\\t\\tPMREM directional light test \"),_c('a',{attrs:{\"href\":\"https://github.com/elalish\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"Emmett Lalish\")]),_vm._v(\" \"),_c('br'),_vm._v(\"Top row is white metal\\n\\t\\t\\t\\t\"),_c('br'),_vm._v(\"Middle row is white dielectric\\n\\t\\t\\t\\t\"),_c('br'),_vm._v(\"Bottom row is black dielectric.\\n\\t\\t\\t\\t\"),_c('br'),_vm._v(\"Mouse-out is a standard Directional Light.\\n\\t\\t\\t\\t\"),_c('br'),_vm._v(\"Mouse-over is a PMREM of the skybox: a single bright pixel representing the same directional light source.\\n\\t\\t\\t\\t\"),_c('br'),_vm._v(\"The difference between these renders indicates the error in the PMREM approximations.\\n\\t\\t\\t\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-707b20ae\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/pmrem/webglPmremTest.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-707b20ae\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./webglPmremTest.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglPmremTest.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./webglPmremTest.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-707b20ae\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./webglPmremTest.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-707b20ae\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/pmrem/webglPmremTest.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}