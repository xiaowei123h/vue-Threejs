webpackJsonp([9],{"5wgQ":function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r,a=n("wIBv"),i=n("qxm1"),s=n("Glcs"),o=n("6+nK"),l=((r=new o._55({uniforms:{roughnessMap:{value:null},normalMap:{value:null},texelSize:{value:new o._83(1,1)}},vertexShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tattribute vec3 position;\n\t\t\tattribute vec2 uv;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tvoid main() {\n\n\t\t\t\tvUv = uv;\n\n\t\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t\t}\n\t\t",fragmentShader:"\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec2 vUv;\n\n\t\t\tuniform sampler2D roughnessMap;\n\t\t\tuniform sampler2D normalMap;\n\t\t\tuniform vec2 texelSize;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\n\t\t\tvec4 envMapTexelToLinear( vec4 a ) { return a; }\n\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tfloat roughnessToVariance( float roughness ) {\n\n\t\t\t\tfloat variance = 0.0;\n\n\t\t\t\tif ( roughness >= r1 ) {\n\n\t\t\t\t\tvariance = ( r0 - roughness ) * ( v1 - v0 ) / ( r0 - r1 ) + v0;\n\n\t\t\t\t} else if ( roughness >= r4 ) {\n\n\t\t\t\t\tvariance = ( r1 - roughness ) * ( v4 - v1 ) / ( r1 - r4 ) + v1;\n\n\t\t\t\t} else if ( roughness >= r5 ) {\n\n\t\t\t\t\tvariance = ( r4 - roughness ) * ( v5 - v4 ) / ( r4 - r5 ) + v4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfloat roughness2 = roughness * roughness;\n\n\t\t\t\t\tvariance = 1.79 * roughness2 * roughness2;\n\n\t\t\t\t}\n\n\t\t\t\treturn variance;\n\n\t\t\t}\n\n\t\t\tfloat varianceToRoughness( float variance ) {\n\n\t\t\t\tfloat roughness = 0.0;\n\n\t\t\t\tif ( variance >= v1 ) {\n\n\t\t\t\t\troughness = ( v0 - variance ) * ( r1 - r0 ) / ( v0 - v1 ) + r0;\n\n\t\t\t\t} else if ( variance >= v4 ) {\n\n\t\t\t\t\troughness = ( v1 - variance ) * ( r4 - r1 ) / ( v1 - v4 ) + r1;\n\n\t\t\t\t} else if ( variance >= v5 ) {\n\n\t\t\t\t\troughness = ( v4 - variance ) * ( r5 - r4 ) / ( v4 - v5 ) + r4;\n\n\t\t\t\t} else {\n\n\t\t\t\t\troughness = pow( 0.559 * variance, 0.25 ); // 0.559 = 1.0 / 1.79\n\n\t\t\t\t}\n\n\t\t\t\treturn roughness;\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = texture2D( roughnessMap, vUv, - 1.0 );\n\n\t\t\t\tif ( texelSize.x == 0.0 ) return;\n\n\t\t\t\tfloat roughness = gl_FragColor.g;\n\n\t\t\t\tfloat variance = roughnessToVariance( roughness );\n\n\t\t\t\tvec3 avgNormal;\n\n\t\t\t\tfor ( float x = - 1.0; x < 2.0; x += 2.0 ) {\n\n\t\t\t\t\tfor ( float y = - 1.0; y < 2.0; y += 2.0 ) {\n\n\t\t\t\t\t\tvec2 uv = vUv + vec2( x, y ) * 0.25 * texelSize;\n\n\t\t\t\t\t\tavgNormal += normalize( texture2D( normalMap, uv, - 1.0 ).xyz - 0.5 );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvariance += 1.0 - 0.25 * length( avgNormal );\n\n\t\t\t\tgl_FragColor.g = varianceToRoughness( variance );\n\n\t\t\t}\n\t\t",blending:o._26,depthTest:!1,depthWrite:!1})).type="RoughnessMipmapper",r),u=new o._16(new o._37(2,2),l),h=new o._32(0,1,0,1,0,1),c=null,d=null;function p(t){(d=t).compile(u,h)}p.prototype={constructor:p,generateMipmaps:function(t){if("roughnessMap"in t!=!1){var e=t.roughnessMap,n=t.normalMap;if(null!==e&&null!==n&&e.generateMipmaps&&!t.userData.roughnessUpdated){t.userData.roughnessUpdated=!0;var r=Math.max(e.image.width,n.image.width),a=Math.max(e.image.height,n.image.height);if(o._13.isPowerOfTwo(r)&&o._13.isPowerOfTwo(a)){var i=d.getRenderTarget(),s=d.autoClear;if(d.autoClear=!1,null!==c&&c.width===r&&c.height===a||(null!==c&&c.dispose(),(c=new o._87(r,a,{depthBuffer:!1})).scissorTest=!0),r!==e.image.width||a!==e.image.height){var p={wrapS:e.wrapS,wrapT:e.wrapT,magFilter:e.magFilter,minFilter:e.minFilter,depthBuffer:!1},g=new o._87(r,a,p);g.texture.generateMipmaps=!0,d.setRenderTarget(g),t.roughnessMap=g.texture,t.metalnessMap==e&&(t.metalnessMap=t.roughnessMap),t.aoMap==e&&(t.aoMap=t.roughnessMap)}l.uniforms.roughnessMap.value=e,l.uniforms.normalMap.value=n;for(var v=new o._83(0,0),f=l.uniforms.texelSize.value,m=0;r>=1&&a>=1;++m,r/=2,a/=2)f.set(1/r,1/a),0==m&&f.set(0,0),c.viewport.set(v.x,v.y,r,a),c.scissor.set(v.x,v.y,r,a),d.setRenderTarget(c),d.render(u,h),d.copyFramebufferToTexture(v,t.roughnessMap,m),l.uniforms.roughnessMap.value=t.roughnessMap;e!==t.roughnessMap&&e.dispose(),d.setRenderTarget(i),d.autoClear=s}}}},dispose:function(){l.dispose(),u.geometry.dispose(),null!=c&&c.dispose()}};var g={data:function(){return{camera:null,scene:null,renderer:null}},mounted:function(){this.init(),this.render()},methods:{init:function(){var t=this,e=document.createElement("div");document.getElementsByClassName("webglLoaderGltf-container")[0].appendChild(e),this.camera=new this.$THREE.PerspectiveCamera(45,this.$webglInnerWidth/window.innerHeight,.25,20),this.camera.position.set(-1.8,.6,2.7),this.scene=new this.$THREE.Scene,(new s.a).setDataType(this.$THREE.UnsignedByteType).setPath("static/textures/equirectangular/").load("royal_esplanade_1k.hdr",function(e){var r=n.fromEquirectangular(e).texture;t.scene.background=r,t.scene.environment=r,e.dispose(),n.dispose(),t.render();var a=new p(t.renderer);(new i.a).setPath("static/models/gltf/DamagedHelmet/glTF/").load("DamagedHelmet.gltf",function(e){e.scene.traverse(function(t){t.isMesh}),t.scene.add(e.scene),a.dispose(),t.render()})}),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.toneMapping=this.$THREE.ACESFilmicToneMapping,this.renderer.toneMappingExposure=1,this.renderer.outputEncoding=this.$THREE.sRGBEncoding,e.appendChild(this.renderer.domElement);var n=new this.$THREE.PMREMGenerator(this.renderer);n.compileEquirectangularShader();var r=new a.a(this.camera,this.renderer.domElement);r.addEventListener("change",this.render),r.minDistance=2,r.maxDistance=10,r.target.set(0,0,-.2),r.update(),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer),this.render()},render:function(){this.renderer.render(this.scene,this.camera)}}},v={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"webglLoaderGltf-container"},[n("div",{attrs:{id:"info"}},[n("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[t._v("three.js")]),t._v(" - GLTFLoader"),n("br"),t._v("\n\t\t\tBattle Damaged Sci-fi Helmet by\n\t\t\t"),n("a",{attrs:{href:"https://sketchfab.com/theblueturtle_",target:"_blank",rel:"noopener"}},[t._v("theblueturtle_")]),n("br"),t._v(" "),n("a",{attrs:{href:"https://hdrihaven.com/hdri/?h=royal_esplanade",target:"_blank",rel:"noopener"}},[t._v("Royal Esplanade")]),t._v(" by "),n("a",{attrs:{href:"https://hdrihaven.com/",target:"_blank",rel:"noopener"}},[t._v("HDRI Haven")])])])}]};var f=n("VU/8")(g,v,!1,function(t){n("aNOW")},"data-v-3bdeefa8",null);e.default=f.exports},Glcs:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("6+nK"),a=function(t){r.y.call(this,t),this.type=r._82};a.prototype=Object.assign(Object.create(r.y.prototype),{constructor:a,parse:function(t){var e=function(t,e){switch(t){case 1:console.error("RGBELoader Read Error: "+(e||""));break;case 2:console.error("RGBELoader Write Error: "+(e||""));break;case 3:console.error("RGBELoader Bad File Format: "+(e||""));break;default:case 4:console.error("RGBELoader: Error: "+(e||""))}return-1},n=function(t,e,n){e=e||1024;for(var r=t.pos,a=-1,i=0,s="",o=String.fromCharCode.apply(null,new Uint16Array(t.subarray(r,r+128)));0>(a=o.indexOf("\n"))&&i<e&&r<t.byteLength;)s+=o,i+=o.length,r+=128,o+=String.fromCharCode.apply(null,new Uint16Array(t.subarray(r,r+128)));return-1<a&&(!1!==n&&(t.pos+=i+a+1),s+o.slice(0,a))},a=function(t,e,n,a){var i=t[e+3],s=Math.pow(2,i-128)/255;n[a+0]=r.z.toHalfFloat(t[e+0]*s),n[a+1]=r.z.toHalfFloat(t[e+1]*s),n[a+2]=r.z.toHalfFloat(t[e+2]*s)},i=new Uint8Array(t);i.pos=0;var s,o,l,u,h,c,d=function(t){var r,a,i=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,s=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,o=/^\s*FORMAT=(\S+)\s*$/,l=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,u={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(t.pos>=t.byteLength||!(r=n(t)))return e(1,"no header found");if(!(a=r.match(/^#\?(\S+)$/)))return e(3,"bad initial token");for(u.valid|=1,u.programtype=a[1],u.string+=r+"\n";!1!==(r=n(t));)if(u.string+=r+"\n","#"!==r.charAt(0)){if((a=r.match(i))&&(u.gamma=parseFloat(a[1],10)),(a=r.match(s))&&(u.exposure=parseFloat(a[1],10)),(a=r.match(o))&&(u.valid|=2,u.format=a[1]),(a=r.match(l))&&(u.valid|=4,u.height=parseInt(a[1],10),u.width=parseInt(a[2],10)),2&u.valid&&4&u.valid)break}else u.comments+=r+"\n";return 2&u.valid?4&u.valid?u:e(3,"missing image size specifier"):e(3,"missing format specifier")}(i);if(-1!==d){var p=d.width,g=d.height,v=function(t,n,r){var a,i,s,o,l,u,h,c,d,p,g,v,f,m=n,w=r;if(m<8||m>32767||2!==t[0]||2!==t[1]||128&t[2])return new Uint8Array(t);if(m!==(t[2]<<8|t[3]))return e(3,"wrong scanline width");if(!(a=new Uint8Array(4*n*r)).length)return e(4,"unable to allocate buffer space");for(i=0,s=0,c=4*m,f=new Uint8Array(4),u=new Uint8Array(c);w>0&&s<t.byteLength;){if(s+4>t.byteLength)return e(1);if(f[0]=t[s++],f[1]=t[s++],f[2]=t[s++],f[3]=t[s++],2!=f[0]||2!=f[1]||(f[2]<<8|f[3])!=m)return e(3,"bad rgbe scanline format");for(h=0;h<c&&s<t.byteLength;){if((v=(o=t[s++])>128)&&(o-=128),0===o||h+o>c)return e(3,"bad scanline data");if(v)for(l=t[s++],d=0;d<o;d++)u[h++]=l;else u.set(t.subarray(s,s+o),h),h+=o,s+=o}for(p=m,d=0;d<p;d++)g=0,a[i]=u[d+g],g+=m,a[i+1]=u[d+g],g+=m,a[i+2]=u[d+g],g+=m,a[i+3]=u[d+g],i+=4;w--}return a}(i.subarray(i.pos),p,g);if(-1!==v){switch(this.type){case r._82:var f=v,m=r._49,w=r._82;break;case r.J:for(var y=v.length/4*3,_=new Float32Array(y),b=0;b<y;b++)l=_,u=3*b,void 0,void 0,h=(s=v)[(o=4*b)+3],c=Math.pow(2,h-128)/255,l[u+0]=s[o+0]*c,l[u+1]=s[o+1]*c,l[u+2]=s[o+2]*c;f=_,m=r._50,w=r.J;break;case r.O:y=v.length/4*3;var E=new Uint16Array(y);for(b=0;b<y;b++)a(v,4*b,E,3*b);f=E,m=r._50,w=r.O;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:p,height:g,data:f,header:d.string,gamma:d.gamma,exposure:d.exposure,format:m,type:w}}}return null},setDataType:function(t){return this.type=t,this},load:function(t,e,n,a){return r.y.prototype.load.call(this,t,function(t,n){switch(t.type){case r._82:t.encoding=r._48,t.minFilter=r._23,t.magFilter=r._23,t.generateMipmaps=!1,t.flipY=!0;break;case r.J:case r.O:t.encoding=r._4,t.minFilter=r._5,t.magFilter=r._5,t.generateMipmaps=!1,t.flipY=!0}e&&e(t,n)},n,a)}})},aNOW:function(t,e){}});
//# sourceMappingURL=9.42b439a188e5aa1ec444.js.map