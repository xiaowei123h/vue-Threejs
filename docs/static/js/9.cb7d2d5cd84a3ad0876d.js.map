{"version":3,"sources":["webpack:///src/views/css3d/css3dMolecules.vue","webpack:///./src/views/css3d/css3dMolecules.vue?5743","webpack:///./src/views/css3d/css3dMolecules.vue","webpack:///./src/components/jsm/loaders/PDBLoader.js"],"names":["css3dMolecules","data","camera","scene","renderer","controls","root","objects","tmpVec1","tmpVec2","tmpVec3","tmpVec4","offset","visualizationType","MOLECULES","Ethanol","Aspirin","Caffeine","Nicotine","LSD","Cocaine","Cholesterol","Lycopene","Glucose","Aluminium oxide","Cubane","Copper","Fluorite","Salt","YBCO superconductor","Buckyball","Graphite","loader","colorSpriteMap","baseSprite","menu","mounted","this","$THREE","Vector3","PDBLoader","document","createElement","getElementById","init","animate","methods","_this","PerspectiveCamera","$webglInnerWidth","window","innerHeight","position","z","Scene","Object3D","add","CSS3DRenderer","setSize","appendChild","domElement","TrackballControls","rotateSpeed","onload","loadMolecule","createMenu","src","addEventListener","onWindowResize","generateButtonCallback","url","_this2","_this3","m","button","innerHTML","b_a","b_b","b_ab","showAtoms","showBonds","showAtomsBonds","i","length","object","element","style","display","visible","height","userData","bondLengthFull","bondLengthShort","colorify","ctx","width","color","r","g","b","imageData","getImageData","l","putImageData","imageToCanvas","image","canvas","getContext","drawImage","_this4","parent","remove","load","pdb","geometryAtoms","geometryBonds","json","computeBoundingBox","boundingBox","getCenter","negate","translate","x","y","positionAtoms","getAttribute","colorAtoms","Color","count","fromBufferAttribute","atoms","context","dataUrl","toDataURL","colorSprite","atom","copy","multiplyScalar","matrixAutoUpdate","updateMatrix","push","positionBonds","start","end","subVectors","bondLength","bond","className","lerp","axis","set","cross","radians","Math","acos","dot","normalize","objMatrix","Matrix4","makeRotationAxis","matrix","quaternion","setFromRotationMatrix","joint","rotation","PI","$onWindowResize","requestAnimationFrame","update","time","Date","now","render","css3d_css3dMolecules","$createElement","_self","_c","_m","staticRenderFns","_vm","_h","staticClass","attrs","id","_v","href","target","rel","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__","d","__WEBPACK_IMPORTED_MODULE_0__components_build_three_module_js__","manager","Loader","call","prototype","Object","assign","create","constructor","onLoad","onProgress","onError","scope","FileLoader","setPath","path","setRequestHeader","requestHeader","setWithCredentials","withCredentials","text","parse","e","console","error","itemError","trim","replace","capitalize","charAt","toUpperCase","substr","toLowerCase","parseBond","s","eatom","parseInt","lines","h","satom","min","max","undefined","_bhash","_bonds","index","CPK","he","li","be","c","n","o","f","ne","na","mg","al","si","p","cl","ar","k","ca","sc","ti","v","cr","mn","fe","co","ni","cu","zn","ga","ge","as","se","br","kr","rb","sr","zr","nb","mo","tc","ru","rh","pd","ag","cd","in","sn","sb","te","xe","cs","ba","la","ce","pr","nd","pm","sm","eu","gd","tb","dy","ho","er","tm","yb","lu","hf","ta","w","re","os","ir","pt","au","hg","tl","pb","bi","po","at","rn","fr","ra","ac","th","pa","u","np","pu","am","cm","bk","cf","es","fm","md","no","lr","rf","db","sg","bh","hs","mt","ds","rg","cn","uut","uuq","uup","uuh","uus","uuo","_atomMap","split","parseFloat","atomData","build","BufferGeometry","verticesAtoms","colorsAtoms","verticesBonds","startAtom","endAtom","setAttribute","Float32BufferAttribute","buildGeometry"],"mappings":"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","file":"static/js/9.cb7d2d5cd84a3ad0876d.js","sourcesContent":["<template>\r\n    <div class=\"css3dMolecules-container\">\r\n        <div id=\"container\"></div>\r\n\t\t<div id=\"info\"><a href=\"https://threejs.org\" target=\"_blank\" rel=\"noopener\">three.js</a> css3d - molecules</div>\r\n\t\t<div id=\"topmenu\">\r\n\t\t\t<button id=\"b_a\">Atoms</button><button id=\"b_b\">Bonds</button><button id=\"b_ab\">Atoms + Bonds</button>\r\n\t\t</div>\r\n\t\t<div id=\"menu\"></div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport { TrackballControls } from '@/components/jsm/controls/TrackballControls.js'\r\nimport { PDBLoader } from '@/components/jsm/loaders/PDBLoader.js'\r\nimport { CSS3DRenderer, CSS3DObject, CSS3DSprite } from '@/components/jsm/renderers/CSS3DRenderer.js'\r\nexport default {\r\n    data() {\r\n        return {\r\n            camera: null,\r\n            scene: null,\r\n            renderer: null,\r\n\t\t\tcontrols: null,\r\n\t\t\troot: null,\r\n\t\t\tobjects: [],\r\n\t\t\ttmpVec1: null,\r\n\t\t\ttmpVec2: null,\r\n\t\t\ttmpVec3: null,\r\n\t\t\ttmpVec4: null,\r\n\t\t\toffset: null,\r\n\t\t\tvisualizationType: 2,\r\n\t\t\tMOLECULES: {\r\n\t\t\t\t\"Ethanol\": \"ethanol.pdb\",\r\n\t\t\t\t\"Aspirin\": \"aspirin.pdb\",\r\n\t\t\t\t\"Caffeine\": \"caffeine.pdb\",\r\n\t\t\t\t\"Nicotine\": \"nicotine.pdb\",\r\n\t\t\t\t\"LSD\": \"lsd.pdb\",\r\n\t\t\t\t\"Cocaine\": \"cocaine.pdb\",\r\n\t\t\t\t\"Cholesterol\": \"cholesterol.pdb\",\r\n\t\t\t\t\"Lycopene\": \"lycopene.pdb\",\r\n\t\t\t\t\"Glucose\": \"glucose.pdb\",\r\n\t\t\t\t\"Aluminium oxide\": \"Al2O3.pdb\",\r\n\t\t\t\t\"Cubane\": \"cubane.pdb\",\r\n\t\t\t\t\"Copper\": \"cu.pdb\",\r\n\t\t\t\t\"Fluorite\": \"caf2.pdb\",\r\n\t\t\t\t\"Salt\": \"nacl.pdb\",\r\n\t\t\t\t\"YBCO superconductor\": \"ybco.pdb\",\r\n\t\t\t\t\"Buckyball\": \"buckyball.pdb\",\r\n\t\t\t\t//\"Diamond\": \"diamond.pdb\",\r\n\t\t\t\t\"Graphite\": \"graphite.pdb\"\r\n\t\t\t},\r\n\t\t\tloader: null,\r\n\t\t\tcolorSpriteMap: {},\r\n\t\t\tbaseSprite: null,\r\n\t\t\tmenu: null,\r\n        }\r\n    },\r\n    mounted() {\r\n        this.tmpVec1 = new this.$THREE.Vector3()\r\n        this.tmpVec2 = new this.$THREE.Vector3()\r\n        this.tmpVec3 = new this.$THREE.Vector3()\r\n        this.tmpVec4 = new this.$THREE.Vector3()\r\n        this.offset = new this.$THREE.Vector3()\r\n        this.loader = new PDBLoader()\r\n        this.baseSprite = document.createElement('img')\r\n        this.menu = document.getElementById(\"menu\")\r\n        this.init()\r\n        this.animate()\r\n    },\r\n    methods: {\r\n        init() {\r\n            this.camera = new this.$THREE.PerspectiveCamera(70, this.$webglInnerWidth / window.innerHeight, 1, 5000)\r\n            this.camera.position.z = 1000\r\n            this.scene = new this.$THREE.Scene()\r\n            this.root = new this.$THREE.Object3D()\r\n            this.scene.add(this.root)\r\n            //\r\n            this.renderer = new CSS3DRenderer()\r\n            this.renderer.setSize(this.$webglInnerWidth, window.innerHeight)\r\n            document.getElementById('container').appendChild(this.renderer.domElement)\r\n            //\r\n            this.controls = new TrackballControls(this.camera, this.renderer.domElement)\r\n            this.controls.rotateSpeed = 0.5\r\n            //\r\n            this.baseSprite.onload = () => {\r\n                this.loadMolecule(\"static/models/pdb/caffeine.pdb\")\r\n                this.createMenu()\r\n            }\r\n            this.baseSprite.src = 'static/textures/sprites/ball.png'\r\n            //\r\n            window.addEventListener('resize', this.onWindowResize, false)\r\n        },\r\n        generateButtonCallback(url) {\r\n            return () => {\r\n                this.loadMolecule(url)\r\n            }\r\n        },\r\n        createMenu() {\r\n            for (var m in this.MOLECULES) {\r\n                var button = document.createElement('button')\r\n                button.innerHTML = m\r\n                this.menu.appendChild(button)\r\n                var url = \"static/models/pdb/\" + this.MOLECULES[ m ]\r\n                button.addEventListener('click', this.generateButtonCallback(url), false)\r\n            }\r\n            var b_a = document.getElementById(\"b_a\")\r\n            var b_b = document.getElementById(\"b_b\")\r\n            var b_ab = document.getElementById(\"b_ab\")\r\n            b_a.addEventListener('click', () => {\r\n                this.visualizationType = 0\r\n                this.showAtoms()\r\n            })\r\n            b_b.addEventListener('click', () => {\r\n                this.visualizationType = 1\r\n                this.showBonds()\r\n            })\r\n            b_ab.addEventListener('click', () => {\r\n                this.visualizationType = 2\r\n                this.showAtomsBonds()\r\n            })\r\n        },\r\n        showAtoms() {\r\n            for (var i = 0; i < this.objects.length; i ++) {\r\n                var object = this.objects[ i ]\r\n                if (object instanceof CSS3DSprite) {\r\n                    object.element.style.display = \"\"\r\n                    object.visible = true\r\n                } else {\r\n                    object.element.style.display = \"none\"\r\n                    object.visible = false\r\n                }\r\n            }\r\n        },\r\n        showBonds() {\r\n            for (var i = 0; i < this.objects.length; i ++) {\r\n                var object = this.objects[ i ]\r\n                if (object instanceof CSS3DSprite) {\r\n                    object.element.style.display = \"none\"\r\n                    object.visible = false\r\n                } else {\r\n                    object.element.style.display = \"\"\r\n                    object.element.style.height = object.userData.bondLengthFull\r\n                    object.visible = true\r\n                }\r\n            }\r\n        },\r\n        showAtomsBonds() {\r\n            for (var i = 0; i < this.objects.length; i ++) {\r\n                var object = this.objects[ i ]\r\n                object.element.style.display = \"\"\r\n                object.visible = true\r\n                if (! (object instanceof CSS3DSprite)) {\r\n                    object.element.style.height = object.userData.bondLengthShort\r\n                }\r\n            }\r\n        },\r\n        colorify(ctx, width, height, color) {\r\n            var r = color.r, g = color.g, b = color.b\r\n            var imageData = ctx.getImageData(0, 0, width, height)\r\n            var data = imageData.data\r\n            for (var i = 0, l = data.length; i < l; i += 4) {\r\n                data[ i + 0 ] *= r\r\n                data[ i + 1 ] *= g\r\n                data[ i + 2 ] *= b\r\n            }\r\n            ctx.putImageData(imageData, 0, 0)\r\n        },\r\n        imageToCanvas(image) {\r\n            var width = image.width\r\n            var height = image.height\r\n            var canvas = document.createElement('canvas')\r\n            canvas.width = width\r\n            canvas.height = height\r\n            var context = canvas.getContext('2d')\r\n            context.drawImage(image, 0, 0, width, height)\r\n            return canvas\r\n        },\r\n        loadMolecule(url) {\r\n            for (var i = 0; i < this.objects.length; i ++) {\r\n                var object = this.objects[ i ]\r\n                object.parent.remove(object)\r\n            }\r\n            this.objects.length = 0\r\n            this.loader.load(url, (pdb) => {\r\n                var geometryAtoms = pdb.geometryAtoms\r\n                var geometryBonds = pdb.geometryBonds\r\n                var json = pdb.json\r\n                geometryAtoms.computeBoundingBox()\r\n                geometryAtoms.boundingBox.getCenter(this.offset).negate()\r\n                geometryAtoms.translate(this.offset.x, this.offset.y, this.offset.z)\r\n                geometryBonds.translate(this.offset.x, this.offset.y, this.offset.z)\r\n                var positionAtoms = geometryAtoms.getAttribute('position')\r\n                var colorAtoms = geometryAtoms.getAttribute('color')\r\n                var position = new this.$THREE.Vector3()\r\n                var color = new this.$THREE.Color()\r\n                for (var i = 0; i < positionAtoms.count; i ++) {\r\n                    position.fromBufferAttribute(positionAtoms, i)\r\n                    color.fromBufferAttribute(colorAtoms, i)\r\n                    var atomJSON = json.atoms[ i ]\r\n                    var element = atomJSON[ 4 ]\r\n                    if (! this.colorSpriteMap[ element ]) {\r\n                        var canvas = this.imageToCanvas(this.baseSprite)\r\n                        var context = canvas.getContext('2d')\r\n                        this.colorify(context, canvas.width, canvas.height, color)\r\n                        var dataUrl = canvas.toDataURL()\r\n                        this.colorSpriteMap[ element ] = dataUrl\r\n                    }\r\n                    var colorSprite = this.colorSpriteMap[ element ]\r\n                    var atom = document.createElement('img')\r\n                    atom.src = colorSprite\r\n                    var object = new CSS3DSprite(atom)\r\n                    object.position.copy(position)\r\n                    object.position.multiplyScalar(75)\r\n                    object.matrixAutoUpdate = false\r\n                    object.updateMatrix()\r\n                    this.root.add(object)\r\n                    this.objects.push(object)\r\n                }\r\n                var positionBonds = geometryBonds.getAttribute('position')\r\n                var start = new this.$THREE.Vector3()\r\n                var end = new this.$THREE.Vector3()\r\n                for (var i = 0; i < positionBonds.count; i += 2) {\r\n                    start.fromBufferAttribute(positionBonds, i)\r\n                    end.fromBufferAttribute(positionBonds, i + 1)\r\n                    start.multiplyScalar(75)\r\n                    end.multiplyScalar(75)\r\n                    this.tmpVec1.subVectors(end, start)\r\n                    var bondLength = this.tmpVec1.length() - 50\r\n                    //\r\n                    var bond = document.createElement('div')\r\n                    bond.className = \"bond\"\r\n                    bond.style.height = bondLength + \"px\"\r\n                    var object = new CSS3DObject(bond)\r\n                    object.position.copy(start)\r\n                    object.position.lerp(end, 0.5)\r\n                    object.userData.bondLengthShort = bondLength + \"px\"\r\n                    object.userData.bondLengthFull = (bondLength + 55) + \"px\"\r\n                    //\r\n                    var axis = this.tmpVec2.set(0, 1, 0).cross(this.tmpVec1)\r\n                    var radians = Math.acos(this.tmpVec3.set(0, 1, 0).dot(this.tmpVec4.copy(this.tmpVec1).normalize()))\r\n                    var objMatrix = new this.$THREE.Matrix4().makeRotationAxis(axis.normalize(), radians)\r\n                    object.matrix.copy(objMatrix)\r\n                    object.quaternion.setFromRotationMatrix(object.matrix)\r\n                    object.matrixAutoUpdate = false\r\n                    object.updateMatrix()\r\n                    this.root.add(object)\r\n                    this.objects.push(object)\r\n                    //\r\n                    bond = document.createElement('div')\r\n                    bond.className = \"bond\"\r\n                    bond.style.height = bondLength + \"px\"\r\n                    var joint = new this.$THREE.Object3D(bond)\r\n                    joint.position.copy(start)\r\n                    joint.position.lerp(end, 0.5)\r\n                    joint.matrix.copy(objMatrix)\r\n                    joint.quaternion.setFromRotationMatrix(joint.matrix)\r\n                    joint.matrixAutoUpdate = false\r\n                    joint.updateMatrix()\r\n                    object = new CSS3DObject(bond)\r\n                    object.rotation.y = Math.PI / 2\r\n                    object.matrixAutoUpdate = false\r\n                    object.updateMatrix()\r\n                    object.userData.bondLengthShort = bondLength + \"px\"\r\n                    object.userData.bondLengthFull = (bondLength + 55) + \"px\"\r\n                    object.userData.joint = joint\r\n                    joint.add(object)\r\n                    this.root.add(joint)\r\n                    this.objects.push(object)\r\n                }\r\n                //console.log(\"CSS3DObjects:\", objects.length)\r\n                switch (this.visualizationType) {\r\n                    case 0:\r\n                        this.showAtoms()\r\n                        break\r\n                    case 1:\r\n                        this.showBonds()\r\n                        break\r\n                    case 2:\r\n                        this.showAtomsBonds()\r\n                        break\r\n                }\r\n            })\r\n        },\r\n        onWindowResize() {\r\n            this.$onWindowResize(this.camera, this.renderer)\r\n        },\r\n        animate() {\r\n            requestAnimationFrame(this.animate)\r\n            this.controls.update()\r\n            var time = Date.now() * 0.0004\r\n            this.root.rotation.x = time\r\n            this.root.rotation.y = time * 0.7\r\n            this.render()\r\n        },\r\n        render() {\r\n            this.renderer.render(this.scene, this.camera)\r\n        }\r\n    },\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.css3dMolecules-container {\r\n    position: relative;\r\n    width: 100%;\r\n    background-color: #050505;\r\n    background: radial-gradient(ellipse at center,  rgba(43,45,48,1) 0%,rgba(0,0,0,1) 100%);\r\n}\r\n</style>\r\n\r\n<style>\r\n.css3dMolecules-container #topmenu {\r\n    position: absolute;\r\n    top: 50px;\r\n    width: 100%;\r\n    padding: 10px;\r\n    box-sizing: border-box;\r\n    text-align: center;\r\n}\r\n.css3dMolecules-container #menu {\r\n    position: absolute;\r\n    bottom: 20px;\r\n    width: 100%;\r\n    padding: 10px;\r\n    box-sizing: border-box;\r\n    text-align: center;\r\n}\r\n.css3dMolecules-container button {\r\n    color: rgb(255,255,255);\r\n    background: rgb(255,255,255,0.1);\r\n    border: 0px;\r\n    padding: 5px 10px;\r\n    margin: 2px;\r\n    font-size: 14px;\r\n    cursor: pointer;\r\n}\r\n.css3dMolecules-container button:hover {\r\n    background-color: rgba(0,255,255,0.5);\r\n}\r\n.css3dMolecules-container button:active {\r\n    color: #000000;\r\n    background-color: rgba(0,255,255,1);\r\n}\r\n.css3dMolecules-container .bond {\r\n    width: 5px;\r\n    height: 10px;\r\n    background: #eee;\r\n    display: block;\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/views/css3d/css3dMolecules.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"css3dMolecules-container\"},[_c('div',{attrs:{\"id\":\"container\"}}),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"info\"}},[_c('a',{attrs:{\"href\":\"https://threejs.org\",\"target\":\"_blank\",\"rel\":\"noopener\"}},[_vm._v(\"three.js\")]),_vm._v(\" css3d - molecules\")]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"topmenu\"}},[_c('button',{attrs:{\"id\":\"b_a\"}},[_vm._v(\"Atoms\")]),_c('button',{attrs:{\"id\":\"b_b\"}},[_vm._v(\"Bonds\")]),_c('button',{attrs:{\"id\":\"b_ab\"}},[_vm._v(\"Atoms + Bonds\")])]),_vm._v(\" \"),_c('div',{attrs:{\"id\":\"menu\"}})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1b3977f2\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/css3d/css3dMolecules.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1b3977f2\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./css3dMolecules.vue\")\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1b3977f2\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./css3dMolecules.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./css3dMolecules.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./css3dMolecules.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1b3977f2\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./css3dMolecules.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1b3977f2\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/css3d/css3dMolecules.vue\n// module id = null\n// module chunks = ","import {\r\n\tBufferGeometry,\r\n\tFileLoader,\r\n\tFloat32BufferAttribute,\r\n\tLoader\r\n} from \"@/components/build/three.module.js\";\r\n\r\nvar PDBLoader = function ( manager ) {\r\n\r\n\tLoader.call( this, manager );\r\n\r\n};\r\n\r\nPDBLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\r\n\r\n\tconstructor: PDBLoader,\r\n\r\n\tload: function ( url, onLoad, onProgress, onError ) {\r\n\r\n\t\tvar scope = this;\r\n\r\n\t\tvar loader = new FileLoader( scope.manager );\r\n\t\tloader.setPath( scope.path );\r\n\t\tloader.setRequestHeader( scope.requestHeader );\r\n\t\tloader.setWithCredentials( scope.withCredentials );\r\n\t\tloader.load( url, function ( text ) {\r\n\r\n\t\t\ttry {\r\n\r\n\t\t\t\tonLoad( scope.parse( text ) );\r\n\r\n\t\t\t} catch ( e ) {\r\n\r\n\t\t\t\tif ( onError ) {\r\n\r\n\t\t\t\t\tonError( e );\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\tconsole.error( e );\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tscope.manager.itemError( url );\r\n\r\n\t\t\t}\r\n\r\n\t\t}, onProgress, onError );\r\n\r\n\t},\r\n\r\n\t// Based on CanvasMol PDB parser\r\n\r\n\tparse: function ( text ) {\r\n\r\n\t\tfunction trim( text ) {\r\n\r\n\t\t\treturn text.replace( /^\\s\\s*/, '' ).replace( /\\s\\s*$/, '' );\r\n\r\n\t\t}\r\n\r\n\t\tfunction capitalize( text ) {\r\n\r\n\t\t\treturn text.charAt( 0 ).toUpperCase() + text.substr( 1 ).toLowerCase();\r\n\r\n\t\t}\r\n\r\n\t\tfunction hash( s, e ) {\r\n\r\n\t\t\treturn 's' + Math.min( s, e ) + 'e' + Math.max( s, e );\r\n\r\n\t\t}\r\n\r\n\t\tfunction parseBond( start, length ) {\r\n\r\n\t\t\tvar eatom = parseInt( lines[ i ].substr( start, length ) );\r\n\r\n\t\t\tif ( eatom ) {\r\n\r\n\t\t\t\tvar h = hash( satom, eatom );\r\n\r\n\t\t\t\tif ( _bhash[ h ] === undefined ) {\r\n\r\n\t\t\t\t\t_bonds.push( [ satom - 1, eatom - 1, 1 ] );\r\n\t\t\t\t\t_bhash[ h ] = _bonds.length - 1;\r\n\r\n\t\t\t\t} else {\r\n\r\n\t\t\t\t\t// doesn't really work as almost all PDBs\r\n\t\t\t\t\t// have just normal bonds appearing multiple\r\n\t\t\t\t\t// times instead of being double/triple bonds\r\n\t\t\t\t\t// bonds[bhash[h]][2] += 1;\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\tfunction buildGeometry() {\r\n\r\n\t\t\tvar build = {\r\n\t\t\t\tgeometryAtoms: new BufferGeometry(),\r\n\t\t\t\tgeometryBonds: new BufferGeometry(),\r\n\t\t\t\tjson: {\r\n\t\t\t\t\tatoms: atoms\r\n\t\t\t\t}\r\n\t\t\t};\r\n\r\n\t\t\tvar geometryAtoms = build.geometryAtoms;\r\n\t\t\tvar geometryBonds = build.geometryBonds;\r\n\r\n\t\t\tvar i, l;\r\n\t\t\tvar x, y, z;\r\n\r\n\t\t\tvar verticesAtoms = [];\r\n\t\t\tvar colorsAtoms = [];\r\n\t\t\tvar verticesBonds = [];\r\n\r\n\t\t\t// atoms\r\n\r\n\t\t\tfor ( i = 0, l = atoms.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar atom = atoms[ i ];\r\n\r\n\t\t\t\tx = atom[ 0 ];\r\n\t\t\t\ty = atom[ 1 ];\r\n\t\t\t\tz = atom[ 2 ];\r\n\r\n\t\t\t\tverticesAtoms.push( x, y, z );\r\n\r\n\t\t\t\tvar r = atom[ 3 ][ 0 ] / 255;\r\n\t\t\t\tvar g = atom[ 3 ][ 1 ] / 255;\r\n\t\t\t\tvar b = atom[ 3 ][ 2 ] / 255;\r\n\r\n\t\t\t\tcolorsAtoms.push( r, g, b );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// bonds\r\n\r\n\t\t\tfor ( i = 0, l = _bonds.length; i < l; i ++ ) {\r\n\r\n\t\t\t\tvar bond = _bonds[ i ];\r\n\r\n\t\t\t\tvar start = bond[ 0 ];\r\n\t\t\t\tvar end = bond[ 1 ];\r\n\r\n\t\t\t\tvar startAtom = _atomMap[ start ];\r\n\t\t\t\tvar endAtom = _atomMap[ end ];\r\n\r\n\t\t\t\tx = startAtom[ 0 ];\r\n\t\t\t\ty = startAtom[ 1 ];\r\n\t\t\t\tz = startAtom[ 2 ];\r\n\r\n\t\t\t\tverticesBonds.push( x, y, z );\r\n\r\n\t\t\t\tx = endAtom[ 0 ];\r\n\t\t\t\ty = endAtom[ 1 ];\r\n\t\t\t\tz = endAtom[ 2 ];\r\n\r\n\t\t\t\tverticesBonds.push( x, y, z );\r\n\r\n\t\t\t}\r\n\r\n\t\t\t// build geometry\r\n\r\n\t\t\tgeometryAtoms.setAttribute( 'position', new Float32BufferAttribute( verticesAtoms, 3 ) );\r\n\t\t\tgeometryAtoms.setAttribute( 'color', new Float32BufferAttribute( colorsAtoms, 3 ) );\r\n\r\n\t\t\tgeometryBonds.setAttribute( 'position', new Float32BufferAttribute( verticesBonds, 3 ) );\r\n\r\n\t\t\treturn build;\r\n\r\n\t\t}\r\n\r\n\t\tvar CPK = { h: [ 255, 255, 255 ], he: [ 217, 255, 255 ], li: [ 204, 128, 255 ], be: [ 194, 255, 0 ], b: [ 255, 181, 181 ], c: [ 144, 144, 144 ], n: [ 48, 80, 248 ], o: [ 255, 13, 13 ], f: [ 144, 224, 80 ], ne: [ 179, 227, 245 ], na: [ 171, 92, 242 ], mg: [ 138, 255, 0 ], al: [ 191, 166, 166 ], si: [ 240, 200, 160 ], p: [ 255, 128, 0 ], s: [ 255, 255, 48 ], cl: [ 31, 240, 31 ], ar: [ 128, 209, 227 ], k: [ 143, 64, 212 ], ca: [ 61, 255, 0 ], sc: [ 230, 230, 230 ], ti: [ 191, 194, 199 ], v: [ 166, 166, 171 ], cr: [ 138, 153, 199 ], mn: [ 156, 122, 199 ], fe: [ 224, 102, 51 ], co: [ 240, 144, 160 ], ni: [ 80, 208, 80 ], cu: [ 200, 128, 51 ], zn: [ 125, 128, 176 ], ga: [ 194, 143, 143 ], ge: [ 102, 143, 143 ], as: [ 189, 128, 227 ], se: [ 255, 161, 0 ], br: [ 166, 41, 41 ], kr: [ 92, 184, 209 ], rb: [ 112, 46, 176 ], sr: [ 0, 255, 0 ], y: [ 148, 255, 255 ], zr: [ 148, 224, 224 ], nb: [ 115, 194, 201 ], mo: [ 84, 181, 181 ], tc: [ 59, 158, 158 ], ru: [ 36, 143, 143 ], rh: [ 10, 125, 140 ], pd: [ 0, 105, 133 ], ag: [ 192, 192, 192 ], cd: [ 255, 217, 143 ], in: [ 166, 117, 115 ], sn: [ 102, 128, 128 ], sb: [ 158, 99, 181 ], te: [ 212, 122, 0 ], i: [ 148, 0, 148 ], xe: [ 66, 158, 176 ], cs: [ 87, 23, 143 ], ba: [ 0, 201, 0 ], la: [ 112, 212, 255 ], ce: [ 255, 255, 199 ], pr: [ 217, 255, 199 ], nd: [ 199, 255, 199 ], pm: [ 163, 255, 199 ], sm: [ 143, 255, 199 ], eu: [ 97, 255, 199 ], gd: [ 69, 255, 199 ], tb: [ 48, 255, 199 ], dy: [ 31, 255, 199 ], ho: [ 0, 255, 156 ], er: [ 0, 230, 117 ], tm: [ 0, 212, 82 ], yb: [ 0, 191, 56 ], lu: [ 0, 171, 36 ], hf: [ 77, 194, 255 ], ta: [ 77, 166, 255 ], w: [ 33, 148, 214 ], re: [ 38, 125, 171 ], os: [ 38, 102, 150 ], ir: [ 23, 84, 135 ], pt: [ 208, 208, 224 ], au: [ 255, 209, 35 ], hg: [ 184, 184, 208 ], tl: [ 166, 84, 77 ], pb: [ 87, 89, 97 ], bi: [ 158, 79, 181 ], po: [ 171, 92, 0 ], at: [ 117, 79, 69 ], rn: [ 66, 130, 150 ], fr: [ 66, 0, 102 ], ra: [ 0, 125, 0 ], ac: [ 112, 171, 250 ], th: [ 0, 186, 255 ], pa: [ 0, 161, 255 ], u: [ 0, 143, 255 ], np: [ 0, 128, 255 ], pu: [ 0, 107, 255 ], am: [ 84, 92, 242 ], cm: [ 120, 92, 227 ], bk: [ 138, 79, 227 ], cf: [ 161, 54, 212 ], es: [ 179, 31, 212 ], fm: [ 179, 31, 186 ], md: [ 179, 13, 166 ], no: [ 189, 13, 135 ], lr: [ 199, 0, 102 ], rf: [ 204, 0, 89 ], db: [ 209, 0, 79 ], sg: [ 217, 0, 69 ], bh: [ 224, 0, 56 ], hs: [ 230, 0, 46 ], mt: [ 235, 0, 38 ], ds: [ 235, 0, 38 ], rg: [ 235, 0, 38 ], cn: [ 235, 0, 38 ], uut: [ 235, 0, 38 ], uuq: [ 235, 0, 38 ], uup: [ 235, 0, 38 ], uuh: [ 235, 0, 38 ], uus: [ 235, 0, 38 ], uuo: [ 235, 0, 38 ] };\r\n\r\n\t\tvar atoms = [];\r\n\r\n\t\tvar _bonds = [];\r\n\t\tvar _bhash = {};\r\n\t\tvar _atomMap = {};\r\n\r\n\t\tvar x, y, z, index, e;\r\n\r\n\t\t// parse\r\n\r\n\t\tvar lines = text.split( '\\n' );\r\n\r\n\t\tfor ( var i = 0, l = lines.length; i < l; i ++ ) {\r\n\r\n\t\t\tif ( lines[ i ].substr( 0, 4 ) === 'ATOM' || lines[ i ].substr( 0, 6 ) === 'HETATM' ) {\r\n\r\n\t\t\t\tx = parseFloat( lines[ i ].substr( 30, 7 ) );\r\n\t\t\t\ty = parseFloat( lines[ i ].substr( 38, 7 ) );\r\n\t\t\t\tz = parseFloat( lines[ i ].substr( 46, 7 ) );\r\n\t\t\t\tindex = parseInt( lines[ i ].substr( 6, 5 ) ) - 1;\r\n\r\n\t\t\t\te = trim( lines[ i ].substr( 76, 2 ) ).toLowerCase();\r\n\r\n\t\t\t\tif ( e === '' ) {\r\n\r\n\t\t\t\t\te = trim( lines[ i ].substr( 12, 2 ) ).toLowerCase();\r\n\r\n\t\t\t\t}\r\n\r\n\t\t\t\tvar atomData = [ x, y, z, CPK[ e ], capitalize( e ) ];\r\n\r\n\t\t\t\tatoms.push( atomData );\r\n\t\t\t\t_atomMap[ index ] = atomData;\r\n\r\n\t\t\t} else if ( lines[ i ].substr( 0, 6 ) === 'CONECT' ) {\r\n\r\n\t\t\t\tvar satom = parseInt( lines[ i ].substr( 6, 5 ) );\r\n\r\n\t\t\t\tparseBond( 11, 5 );\r\n\t\t\t\tparseBond( 16, 5 );\r\n\t\t\t\tparseBond( 21, 5 );\r\n\t\t\t\tparseBond( 26, 5 );\r\n\r\n\t\t\t}\r\n\r\n\t\t}\r\n\r\n\t\t// build and return geometry\r\n\r\n\t\treturn buildGeometry();\r\n\r\n\t}\r\n\r\n} );\r\n\r\nexport { PDBLoader };\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/components/jsm/loaders/PDBLoader.js"],"sourceRoot":""}