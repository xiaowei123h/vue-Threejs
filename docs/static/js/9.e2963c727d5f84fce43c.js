webpackJsonp([9],{"1k18":function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i("QEtz"),s=i("wIBv"),o=i("Iu6k"),r=(i("el/I"),{data:function(){return{container:null,stats:null,camera:null,scene:null,renderer:null,splineHelperObjects:[],splinePointsLength:4,positions:[],point:null,raycaster:null,pointer:null,onUpPosition:null,onDownPosition:null,geometry:null,transformControl:null,ARC_SEGMENTS:200,splines:{},params:null,gui:null}},mounted:function(){this.point=new this.$THREE.Vector3,this.raycaster=new this.$THREE.Raycaster,this.pointer=new this.$THREE.Vector2,this.onUpPosition=new this.$THREE.Vector2,this.onDownPosition=new this.$THREE.Vector2,this.geometry=new this.$THREE.BoxBufferGeometry(20,20,20),this.ARC_SEGMENTS=200,this.splines={},this.params={uniform:!0,tension:.5,centripetal:!0,chordal:!0,addPoint:this.addPoint,removePoint:this.removePoint,exportSpline:this.exportSpline},this.init(),this.animate()},beforeDestroy:function(){this.gui.destroy()},methods:{init:function(){var t=this;this.container=document.getElementById("container"),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(15790320),this.camera=new this.$THREE.PerspectiveCamera(70,this.$webglInnerWidth/window.innerHeight,1,1e4),this.camera.position.set(0,250,1e3),this.scene.add(this.camera),this.scene.add(new this.$THREE.AmbientLight(15790320));var e=new this.$THREE.SpotLight(16777215,1.5);e.position.set(0,1500,200),e.angle=.2*Math.PI,e.castShadow=!0,e.shadow.camera.near=200,e.shadow.camera.far=2e3,e.shadow.bias=-222e-6,e.shadow.mapSize.width=1024,e.shadow.mapSize.height=1024,this.scene.add(e);var i=new this.$THREE.PlaneBufferGeometry(2e3,2e3);i.rotateX(-Math.PI/2);var r=new this.$THREE.ShadowMaterial({opacity:.2}),a=new this.$THREE.Mesh(i,r);a.position.y=-200,a.receiveShadow=!0,this.scene.add(a);var h=new this.$THREE.GridHelper(2e3,100);h.position.y=-199,h.material.opacity=.25,h.material.transparent=!0,this.scene.add(h),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.renderer.shadowMap.enabled=!0,this.container.appendChild(this.renderer.domElement),this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),this.gui=new n.a,this.gui.add(this.params,"uniform"),this.gui.add(this.params,"tension",0,1).step(.01).onChange(function(e){t.splines.uniform.tension=e,t.updateSplineOutline()}),this.gui.add(this.params,"centripetal"),this.gui.add(this.params,"chordal"),this.gui.add(this.params,"addPoint"),this.gui.add(this.params,"removePoint"),this.gui.add(this.params,"exportSpline"),this.gui.open();var l=new s.b(this.camera,this.renderer.domElement);l.damping=.2,l.addEventListener("change",this.render),this.transformControl=new o.a(this.camera,this.renderer.domElement),this.transformControl.addEventListener("change",this.render),this.transformControl.addEventListener("dragging-changed",function(t){l.enabled=!t.value}),this.scene.add(this.transformControl),this.transformControl.addEventListener("objectChange",function(){t.updateSplineOutline()}),document.addEventListener("pointerdown",this.onPointerDown,!1),document.addEventListener("pointerup",this.onPointerUp,!1),document.addEventListener("pointermove",this.onPointerMove,!1);for(var d=0;d<this.splinePointsLength;d++)this.addSplineObject(this.positions[d]);this.positions.length=0;for(d=0;d<this.splinePointsLength;d++)this.positions.push(this.splineHelperObjects[d].position);var p=new this.$THREE.BufferGeometry;p.setAttribute("position",new this.$THREE.BufferAttribute(new Float32Array(3*this.ARC_SEGMENTS),3));var c=new this.$THREE.CatmullRomCurve3(this.positions);for(var m in c.curveType="catmullrom",c.mesh=new this.$THREE.Line(p.clone(),new this.$THREE.LineBasicMaterial({color:16711680,opacity:.35})),c.mesh.castShadow=!0,this.splines.uniform=c,(c=new this.$THREE.CatmullRomCurve3(this.positions)).curveType="centripetal",c.mesh=new this.$THREE.Line(p.clone(),new this.$THREE.LineBasicMaterial({color:65280,opacity:.35})),c.mesh.castShadow=!0,this.splines.centripetal=c,(c=new this.$THREE.CatmullRomCurve3(this.positions)).curveType="chordal",c.mesh=new this.$THREE.Line(p.clone(),new this.$THREE.LineBasicMaterial({color:255,opacity:.35})),c.mesh.castShadow=!0,this.splines.chordal=c,this.splines){var u=this.splines[m];this.scene.add(u.mesh)}this.load([new this.$THREE.Vector3(289.76843686945404,452.51481137238443,56.10018915737797),new this.$THREE.Vector3(-53.56300074753207,171.49711742836848,-14.495472686253045),new this.$THREE.Vector3(-91.40118730204415,176.4306956436485,-6.958271935582161),new this.$THREE.Vector3(-383.785318791128,491.1365363371675,47.869296953772746)]),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},addSplineObject:function(t){var e=new this.$THREE.MeshLambertMaterial({color:16777215*Math.random()}),i=new this.$THREE.Mesh(this.geometry,e);return t?i.position.copy(t):(i.position.x=1e3*Math.random()-500,i.position.y=600*Math.random(),i.position.z=800*Math.random()-400),i.castShadow=!0,i.receiveShadow=!0,this.scene.add(i),this.splineHelperObjects.push(i),i},addPoint:function(){this.splinePointsLength++,this.positions.push(this.addSplineObject().position),this.updateSplineOutline()},removePoint:function(){if(!(this.splinePointsLength<=4)){var t=this.splineHelperObjects.pop();this.splinePointsLength--,this.positions.pop(),this.transformControl.object===t&&this.transformControl.detach(),this.scene.remove(t),this.updateSplineOutline()}},updateSplineOutline:function(){for(var t in this.splines){for(var e=this.splines[t],i=e.mesh.geometry.attributes.position,n=0;n<this.ARC_SEGMENTS;n++){var s=n/(this.ARC_SEGMENTS-1);e.getPoint(s,this.point),i.setXYZ(n,this.point.x,this.point.y,this.point.z)}i.needsUpdate=!0}},exportSpline:function(){for(var t=[],e=0;e<this.splinePointsLength;e++){var i=this.splineHelperObjects[e].position;t.push("new this.$THREE.Vector3({0}, {1}, {2})".format("new this.$THREE.Vector3({0}, {1}, {2})",i.x,i.y,i.z))}console.log(t.join(",\n"));var n="["+t.join(",\n\t")+"]";prompt("copy and paste code",n)},load:function(t){for(;t.length>this.positions.length;)this.addPoint();for(;t.length<this.positions.length;)this.removePoint();for(var e=0;e<this.positions.length;e++)this.positions[e].copy(t[e]);this.updateSplineOutline()},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){this.splines.uniform.mesh.visible=this.params.uniform,this.splines.centripetal.mesh.visible=this.params.centripetal,this.splines.chordal.mesh.visible=this.params.chordal,this.renderer.render(this.scene,this.camera)},onPointerDown:function(t){this.onDownPosition.x=t.clientX,this.onDownPosition.y=t.clientY},onPointerUp:function(){this.onUpPosition.x=event.clientX,this.onUpPosition.y=event.clientY,0===this.onDownPosition.distanceTo(this.onUpPosition)&&this.transformControl.detach()},onPointerMove:function(t){this.pointer.x=2*(t.clientX/window.innerWidth-281)-1,this.pointer.y=-t.clientY/window.innerHeight*2+1,this.raycaster.setFromCamera(this.pointer,this.camera);var e=this.raycaster.intersectObjects(this.splineHelperObjects);if(e.length>0){var i=e[0].object;i!==this.transformControl.object&&this.transformControl.attach(i)}}}}),a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"webglGeometrySplineEditor-container"},[e("div",{attrs:{id:"container"}}),this._v(" "),e("div",{attrs:{id:"info"}},[e("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - geometry - catmull spline editor\n\t\t")])])}]};var h=i("VU/8")(r,a,!1,function(t){i("RvJH")},"data-v-0e1baf35",null);e.default=h.exports},RvJH:function(t,e){},"el/I":function(t,e){String.prototype.format=function(t,e,i,n){t=t;for(var s=[e,i,n],o=0;o<s.length;o++)t=t.replace("{"+o+"}",s[o]);return t}}});
//# sourceMappingURL=9.e2963c727d5f84fce43c.js.map