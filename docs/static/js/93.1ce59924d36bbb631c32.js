webpackJsonp([93],{"6y8B":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=i("wIBv"),r=i("xTnh"),s={data:function(){return{container:null,stats:null,camera:null,controls:null,scene:null,renderer:null,mesh:null,texture:null,worldWidth:256,worldDepth:256,worldHalfWidth:null,worldHalfDepth:null,helper:null,raycaster:null,mouse:null}},mounted:function(){this.worldHalfWidth=this.worldWidth/2,this.worldHalfDepth=this.worldDepth/2,this.raycaster=new this.$THREE.Raycaster,this.mouse=new this.$THREE.Vector2,this.init(),this.animate()},methods:{init:function(){this.container=document.getElementById("container"),this.container.innerHTML="",this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.$webglInnerWidth,window.innerHeight),this.container.appendChild(this.renderer.domElement),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(12571109),this.camera=new this.$THREE.PerspectiveCamera(60,this.$webglInnerWidth/window.innerHeight,10,2e4),this.controls=new n.a(this.camera,this.renderer.domElement),this.controls.minDistance=1e3,this.controls.maxDistance=1e4,this.controls.maxPolarAngle=Math.PI/2;var e=this.generateHeight(this.worldWidth,this.worldDepth);this.controls.target.y=e[this.worldHalfWidth+this.worldHalfDepth*this.worldWidth]+500,this.camera.position.y=this.controls.target.y+2e3,this.camera.position.x=2e3,this.controls.update();var t=new this.$THREE.PlaneBufferGeometry(7500,7500,this.worldWidth-1,this.worldDepth-1);t.rotateX(-Math.PI/2);for(var i=t.attributes.position.array,r=0,s=0,a=i.length;r<a;r++,s+=3)i[s+1]=10*e[r];t.computeFaceNormals(),this.texture=new this.$THREE.CanvasTexture(this.generateTexture(e,this.worldWidth,this.worldDepth)),this.texture.wrapS=this.$THREE.ClampToEdgeWrapping,this.texture.wrapT=this.$THREE.ClampToEdgeWrapping,this.mesh=new this.$THREE.Mesh(t,new this.$THREE.MeshBasicMaterial({map:this.texture})),this.scene.add(this.mesh);var h=new this.$THREE.ConeBufferGeometry(20,100,3);h.translate(0,50,0),h.rotateX(Math.PI/2),this.helper=new this.$THREE.Mesh(h,new this.$THREE.MeshNormalMaterial),this.scene.add(this.helper),this.container.addEventListener("mousemove",this.onMouseMove,!1),this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},generateHeight:function(e,t){for(var i=e*t,n=new Uint8Array(i),s=new r.a,a=100*Math.random(),h=1,o=0;o<4;o++){for(var l=0;l<i;l++){var d=l%e,c=~~(l/e);n[l]+=Math.abs(s.noise(d/h,c/h,a)*h*1.75)}h*=5}return n},generateTexture:function(e,t,i){var n,r,s,a,h=new this.$THREE.Vector3(0,0,0),o=new this.$THREE.Vector3(1,1,1);o.normalize();var l=document.createElement("canvas");l.width=t,l.height=i,(n=l.getContext("2d")).fillStyle="#000",n.fillRect(0,0,t,i);for(var d=0,c=0,m=(s=(r=n.getImageData(0,0,l.width,l.height)).data).length;d<m;d+=4,c++)h.x=e[c-2]-e[c+2],h.y=2,h.z=e[c-2*t]-e[c+2*t],h.normalize(),a=h.dot(o),s[d]=(96+128*a)*(.5+.007*e[c]),s[d+1]=(32+96*a)*(.5+.007*e[c]),s[d+2]=96*a*(.5+.007*e[c]);n.putImageData(r,0,0);var u=document.createElement("canvas");u.width=4*t,u.height=4*i,(n=u.getContext("2d")).scale(4,4),n.drawImage(l,0,0);for(d=0,m=(s=(r=n.getImageData(0,0,u.width,u.height)).data).length;d<m;d+=4){var w=~~(5*Math.random());s[d]+=w,s[d+1]+=w,s[d+2]+=w}return n.putImageData(r,0,0),u},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){this.renderer.render(this.scene,this.camera)},onMouseMove:function(e){this.mouse.x=e.clientX/this.renderer.domElement.clientWidth*2-1,this.mouse.y=-e.clientY/this.renderer.domElement.clientHeight*2+1,this.raycaster.setFromCamera(this.mouse,this.camera);var t=this.raycaster.intersectObject(this.mesh);t.length>0&&(this.helper.position.set(0,0,0),this.helper.lookAt(t[0].face.normal),this.helper.position.copy(t[0].point))}}},a={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglGeometryTerrainRaycast-container"},[t("div",{attrs:{id:"container"}}),this._v(" "),t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - webgl terrain raycasting demo")])])}]};var h=i("VU/8")(s,a,!1,function(e){i("p3ty")},"data-v-1f4f8ee0",null);t.default=h.exports},p3ty:function(e,t){}});
//# sourceMappingURL=93.1ce59924d36bbb631c32.js.map