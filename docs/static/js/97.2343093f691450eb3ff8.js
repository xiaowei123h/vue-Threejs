webpackJsonp([97],{bgXb:function(e,t){},qaQc:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,a=n("QEtz"),s=n("wIBv"),r=n("6+nK"),o=function(e){r._8.call(this,e)};o.prototype=Object.assign(Object.create(r._8.prototype),{constructor:o,load:function(e,t,n,i){var a=this,s=new r.H(a.manager);s.setPath(a.path),s.setResponseType("arraybuffer"),s.setRequestHeader(a.requestHeader),s.setWithCredentials(a.withCredentials),s.load(e,function(n){try{t(a.parse(n))}catch(t){i?i(t):console.error(t),a.manager.itemError(e)}},n,i)},parse:(i=[[-.525731,0,.850651],[-.442863,.238856,.864188],[-.295242,0,.955423],[-.309017,.5,.809017],[-.16246,.262866,.951056],[0,0,1],[0,.850651,.525731],[-.147621,.716567,.681718],[.147621,.716567,.681718],[0,.525731,.850651],[.309017,.5,.809017],[.525731,0,.850651],[.295242,0,.955423],[.442863,.238856,.864188],[.16246,.262866,.951056],[-.681718,.147621,.716567],[-.809017,.309017,.5],[-.587785,.425325,.688191],[-.850651,.525731,0],[-.864188,.442863,.238856],[-.716567,.681718,.147621],[-.688191,.587785,.425325],[-.5,.809017,.309017],[-.238856,.864188,.442863],[-.425325,.688191,.587785],[-.716567,.681718,-.147621],[-.5,.809017,-.309017],[-.525731,.850651,0],[0,.850651,-.525731],[-.238856,.864188,-.442863],[0,.955423,-.295242],[-.262866,.951056,-.16246],[0,1,0],[0,.955423,.295242],[-.262866,.951056,.16246],[.238856,.864188,.442863],[.262866,.951056,.16246],[.5,.809017,.309017],[.238856,.864188,-.442863],[.262866,.951056,-.16246],[.5,.809017,-.309017],[.850651,.525731,0],[.716567,.681718,.147621],[.716567,.681718,-.147621],[.525731,.850651,0],[.425325,.688191,.587785],[.864188,.442863,.238856],[.688191,.587785,.425325],[.809017,.309017,.5],[.681718,.147621,.716567],[.587785,.425325,.688191],[.955423,.295242,0],[1,0,0],[.951056,.16246,.262866],[.850651,-.525731,0],[.955423,-.295242,0],[.864188,-.442863,.238856],[.951056,-.16246,.262866],[.809017,-.309017,.5],[.681718,-.147621,.716567],[.850651,0,.525731],[.864188,.442863,-.238856],[.809017,.309017,-.5],[.951056,.16246,-.262866],[.525731,0,-.850651],[.681718,.147621,-.716567],[.681718,-.147621,-.716567],[.850651,0,-.525731],[.809017,-.309017,-.5],[.864188,-.442863,-.238856],[.951056,-.16246,-.262866],[.147621,.716567,-.681718],[.309017,.5,-.809017],[.425325,.688191,-.587785],[.442863,.238856,-.864188],[.587785,.425325,-.688191],[.688191,.587785,-.425325],[-.147621,.716567,-.681718],[-.309017,.5,-.809017],[0,.525731,-.850651],[-.525731,0,-.850651],[-.442863,.238856,-.864188],[-.295242,0,-.955423],[-.16246,.262866,-.951056],[0,0,-1],[.295242,0,-.955423],[.16246,.262866,-.951056],[-.442863,-.238856,-.864188],[-.309017,-.5,-.809017],[-.16246,-.262866,-.951056],[0,-.850651,-.525731],[-.147621,-.716567,-.681718],[.147621,-.716567,-.681718],[0,-.525731,-.850651],[.309017,-.5,-.809017],[.442863,-.238856,-.864188],[.16246,-.262866,-.951056],[.238856,-.864188,-.442863],[.5,-.809017,-.309017],[.425325,-.688191,-.587785],[.716567,-.681718,-.147621],[.688191,-.587785,-.425325],[.587785,-.425325,-.688191],[0,-.955423,-.295242],[0,-1,0],[.262866,-.951056,-.16246],[0,-.850651,.525731],[0,-.955423,.295242],[.238856,-.864188,.442863],[.262866,-.951056,.16246],[.5,-.809017,.309017],[.716567,-.681718,.147621],[.525731,-.850651,0],[-.238856,-.864188,-.442863],[-.5,-.809017,-.309017],[-.262866,-.951056,-.16246],[-.850651,-.525731,0],[-.716567,-.681718,-.147621],[-.716567,-.681718,.147621],[-.525731,-.850651,0],[-.5,-.809017,.309017],[-.238856,-.864188,.442863],[-.262866,-.951056,.16246],[-.864188,-.442863,.238856],[-.809017,-.309017,.5],[-.688191,-.587785,.425325],[-.681718,-.147621,.716567],[-.442863,-.238856,.864188],[-.587785,-.425325,.688191],[-.309017,-.5,.809017],[-.147621,-.716567,.681718],[-.425325,-.688191,.587785],[-.16246,-.262866,.951056],[.442863,-.238856,.864188],[.16246,-.262866,.951056],[.309017,-.5,.809017],[.147621,-.716567,.681718],[0,-.525731,.850651],[.425325,-.688191,.587785],[.587785,-.425325,.688191],[.688191,-.587785,.425325],[-.955423,.295242,0],[-.951056,.16246,.262866],[-1,0,0],[-.850651,0,.525731],[-.955423,-.295242,0],[-.951056,-.16246,.262866],[-.864188,.442863,-.238856],[-.951056,.16246,-.262866],[-.809017,.309017,-.5],[-.864188,-.442863,-.238856],[-.951056,-.16246,-.262866],[-.809017,-.309017,-.5],[-.681718,.147621,-.716567],[-.681718,-.147621,-.716567],[-.850651,0,-.525731],[-.688191,.587785,-.425325],[-.587785,.425325,-.688191],[-.425325,.688191,-.587785],[-.425325,-.688191,-.587785],[-.587785,-.425325,-.688191],[-.688191,-.587785,-.425325]],function(e){for(var t=new DataView(e),n={},a=["ident","version","skinwidth","skinheight","framesize","num_skins","num_vertices","num_st","num_tris","num_glcmds","num_frames","offset_skins","offset_st","offset_tris","offset_frames","offset_glcmds","offset_end"],s=0;s<a.length;s++)n[a[s]]=t.getInt32(4*s,!0);if(844121161===n.ident&&8===n.version){if(n.offset_end===t.byteLength){for(var o=new r.k,h=[],l=n.offset_st,c=(s=0,n.num_st);s<c;s++){var m=t.getInt16(l+0,!0),d=t.getInt16(l+2,!0);h.push(m/n.skinwidth,1-d/n.skinheight),l+=4}l=n.offset_tris;var p=[],u=[];for(s=0,c=n.num_tris;s<c;s++)p.push(t.getUint16(l+0,!0),t.getUint16(l+2,!0),t.getUint16(l+4,!0)),u.push(t.getUint16(l+6,!0),t.getUint16(l+8,!0),t.getUint16(l+10,!0)),l+=12;var g=new r._84,f=new r._84,w=[],v=[];for(l=n.offset_frames,s=0,c=n.num_frames;s<c;s++){f.set(t.getFloat32(l+0,!0),t.getFloat32(l+4,!0),t.getFloat32(l+8,!0)),g.set(t.getFloat32(l+12,!0),t.getFloat32(l+16,!0),t.getFloat32(l+20,!0)),l+=24;for(var y=0;y<16;y++){var _=t.getUint8(l+y,!0);if(0===_)break;w[y]=_}var b={name:String.fromCharCode.apply(null,w),vertices:[],normals:[]};for(l+=16,y=0;y<n.num_vertices;y++){var E=t.getUint8(l++,!0),k=t.getUint8(l++,!0),C=t.getUint8(l++,!0),W=i[t.getUint8(l++,!0)];E=E*f.x+g.x,k=k*f.y+g.y,C=C*f.z+g.z,b.vertices.push(E,C,k),b.normals.push(W[0],W[2],W[1])}v.push(b)}var R=[],B=[],T=[],A=v[0].vertices,H=v[0].normals;for(s=0,c=p.length;s<c;s++){E=A[P=3*p[s]],k=A[P+1],C=A[P+2],R.push(E,k,C);var S=H[P],I=H[P+1],U=H[P+2];B.push(S,I,U),m=h[P=2*u[s]],d=h[P+1],T.push(m,d)}o.setAttribute("position",new r.I(R,3)),o.setAttribute("normal",new r.I(B,3)),o.setAttribute("uv",new r.I(T,2));var $=[],x=[];for(s=0,c=v.length;s<c;s++){var z=(b=v[s]).name;if(b.vertices.length>0){R=[],y=0;for(var F=p.length;y<F;y++){var P=3*p[y];E=b.vertices[P],k=b.vertices[P+1],C=b.vertices[P+2],R.push(E,k,C)}var G=new r.I(R,3);G.name=z,$.push(G)}if(b.normals.length>0){for(B=[],y=0,F=p.length;y<F;y++)P=3*p[y],S=b.normals[P],I=b.normals[P+1],U=b.normals[P+2],B.push(S,I,U);var L=new r.I(B,3);L.name=z,x.push(L)}}return o.morphAttributes.position=$,o.morphAttributes.normal=x,o.morphTargetsRelative=!1,o.animations=r.d.CreateClipsFromMorphTargetSequences(v,10),o}console.error("Corrupted MD2 file")}else console.error("Not a valid MD2 file")})});var h={data:function(){return{SCREEN_WIDTH:null,SCREEN_HEIGHT:null,container:null,camera:null,scene:null,renderer:null,character:null,gui:null,playbackConfig:{speed:1,wireframe:!1},controls:null,clock:null,stats:null}},mounted:function(){this.SCREEN_WIDTH=this.$webglInnerWidth,this.SCREEN_HEIGHT=window.innerHeight,this.clock=new this.$THREE.Clock,this.init(),this.animate()},beforeDestroy:function(){this.gui.hide()},methods:{init:function(){var e=this;this.container=document.createElement("div"),document.getElementsByClassName("webglLoaderMd2-container")[0].appendChild(this.container),this.camera=new this.$THREE.PerspectiveCamera(40,this.$webglInnerWidth/window.innerHeight,1,1e3),this.camera.position.set(0,150,400),this.scene=new this.$THREE.Scene,this.scene.background=new this.$THREE.Color(328965),this.scene.fog=new this.$THREE.Fog(328965,400,1e3),this.scene.add(new this.$THREE.AmbientLight(2236962));var t=new this.$THREE.SpotLight(16777215,5,1e3);t.position.set(200,250,500),t.angle=.5,t.penumbra=.5,t.castShadow=!0,t.shadow.mapSize.width=1024,t.shadow.mapSize.height=1024,this.scene.add(t);var n=new this.$THREE.SpotLight(16777215,5,1e3);n.position.set(-100,350,350),n.angle=.5,n.penumbra=.5,n.castShadow=!0,n.shadow.mapSize.width=1024,n.shadow.mapSize.height=1024,this.scene.add(n);var i=(new this.$THREE.TextureLoader).load("static/textures/terrain/grasslight-big.jpg"),h=new this.$THREE.PlaneBufferGeometry(2e3,2e3),l=new this.$THREE.MeshPhongMaterial({color:16777215,map:i}),c=new this.$THREE.Mesh(h,l);c.rotation.x=-Math.PI/2,c.material.map.repeat.set(8,8),c.material.map.wrapS=c.material.map.wrapT=this.$THREE.RepeatWrapping,c.material.map.encoding=this.$THREE.sRGBEncoding,c.receiveShadow=!0,this.scene.add(c),this.renderer=new this.$THREE.WebGLRenderer({antialias:!0}),this.renderer.setPixelRatio(window.devicePixelRatio),this.renderer.setSize(this.SCREEN_WIDTH,this.SCREEN_HEIGHT),this.container.appendChild(this.renderer.domElement),this.renderer.outputEncoding=this.$THREE.sRGBEncoding,this.renderer.shadowMap.enabled=!0,this.stats=new this.$Stats,this.stats.dom.style.left="280px",this.container.appendChild(this.stats.dom),window.addEventListener("resize",this.onWindowResize,!1),this.controls=new s.a(this.camera,this.renderer.domElement),this.controls.target.set(0,50,0),this.controls.update(),this.gui=new a.a,this.gui.add(this.playbackConfig,"speed",0,2).onChange(function(){e.character.setPlaybackRate(e.playbackConfig.speed)}),this.gui.add(this.playbackConfig,"wireframe",!1).onChange(function(){e.character.setWireframe(e.playbackConfig.wireframe)});this.character=new function(){var e=this;function t(e,t){for(var n=new r._73,a=[],s=0;s<t.length;s++)a[s]=n.load(e+t[s],i),a[s].mapping=r._79,a[s].name=t[s],a[s].encoding=r._89;return a}function n(e,t){var n=new r._18({color:16755200,wireframe:!0,morphTargets:!0,morphNormals:!0}),i=new r._18({color:16777215,wireframe:!1,map:t,morphTargets:!0,morphNormals:!0}),a=new r._16(e,i);return a.rotation.y=-Math.PI/2,a.castShadow=!0,a.receiveShadow=!0,a.materialTexture=i,a.materialWireframe=n,a}function i(){e.loadCounter-=1,0===e.loadCounter&&e.onLoadComplete()}this.scale=1,this.animationFPS=6,this.root=new r._30,this.meshBody=null,this.meshWeapon=null,this.skinsBody=[],this.skinsWeapon=[],this.weapons=[],this.activeAnimation=null,this.mixer=null,this.onLoadComplete=function(){},this.loadCounter=0,this.loadParts=function(a){this.loadCounter=2*a.weapons.length+a.skins.length+1;for(var s=[],h=0;h<a.weapons.length;h++)s[h]=a.weapons[h][1];this.skinsBody=t(a.baseUrl+"skins/",a.skins),this.skinsWeapon=t(a.baseUrl+"skins/",s);var l=new o;l.load(a.baseUrl+a.body,function(t){var a=new r.h;a.setFromBufferAttribute(t.attributes.position),e.root.position.y=-e.scale*a.min.y;var s=n(t,e.skinsBody[0]);s.scale.set(e.scale,e.scale,e.scale),e.root.add(s),e.meshBody=s,e.meshBody.clipOffset=0,e.activeAnimationClipName=s.geometry.animations[0].name,e.mixer=new r.e(s),i()});var c=function(t,a){return function(s){var r=n(s,e.skinsWeapon[t]);r.scale.set(e.scale,e.scale,e.scale),r.visible=!1,r.name=a,e.root.add(r),e.weapons[t]=r,e.meshWeapon=r,i()}};for(h=0;h<a.weapons.length;h++)l.load(a.baseUrl+a.weapons[h][0],c(h,a.weapons[h][0]))},this.setPlaybackRate=function(e){this.mixer.timeScale=0!==e?1/e:0},this.setWireframe=function(e){e?(this.meshBody&&(this.meshBody.material=this.meshBody.materialWireframe),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialWireframe)):(this.meshBody&&(this.meshBody.material=this.meshBody.materialTexture),this.meshWeapon&&(this.meshWeapon.material=this.meshWeapon.materialTexture))},this.setSkin=function(e){this.meshBody&&!1===this.meshBody.material.wireframe&&(this.meshBody.material.map=this.skinsBody[e])},this.setWeapon=function(t){for(var n=0;n<this.weapons.length;n++)this.weapons[n].visible=!1;var i=this.weapons[t];i&&(i.visible=!0,this.meshWeapon=i,e.syncWeaponAnimation())},this.setAnimation=function(t){if(this.meshBody){this.meshBody.activeAction&&(this.meshBody.activeAction.stop(),this.meshBody.activeAction=null);var n=this.mixer.clipAction(t,this.meshBody);n&&(this.meshBody.activeAction=n.play())}e.activeClipName=t,e.syncWeaponAnimation()},this.syncWeaponAnimation=function(){var t=e.activeClipName;if(e.meshWeapon){this.meshWeapon.activeAction&&(this.meshWeapon.activeAction.stop(),this.meshWeapon.activeAction=null);var n=this.mixer.clipAction(t,this.meshWeapon);n&&(this.meshWeapon.activeAction=n.syncWith(this.meshBody.activeAction).play())}},this.update=function(e){this.mixer&&this.mixer.update(e)}},this.character.scale=3,this.character.onLoadComplete=function(){e.setupSkinsGUI(e.character),e.setupWeaponsGUI(e.character),e.setupGUIAnimations(e.character),e.character.setAnimation(e.character.meshBody.geometry.animations[0].name)},this.character.loadParts({baseUrl:"static/models/md2/ratamahatta/",body:"ratamahatta.md2",skins:["ratamahatta.png","ctf_b.png","ctf_r.png","dead.png","gearwhore.png"],weapons:[["weapon.md2","weapon.png"],["w_bfg.md2","w_bfg.png"],["w_blaster.md2","w_blaster.png"],["w_chaingun.md2","w_chaingun.png"],["w_glauncher.md2","w_glauncher.png"],["w_hyperblaster.md2","w_hyperblaster.png"],["w_machinegun.md2","w_machinegun.png"],["w_railgun.md2","w_railgun.png"],["w_rlauncher.md2","w_rlauncher.png"],["w_shotgun.md2","w_shotgun.png"],["w_sshotgun.md2","w_sshotgun.png"]]}),this.scene.add(this.character.root)},onWindowResize:function(){this.$onWindowResize(this.camera,this.renderer)},labelize:function(e){var t=e.split(".");return t.length>1?(t.length-=1,t.join(".")):e},setupWeaponsGUI:function(e){for(var t=this.gui.addFolder("Weapons"),n=function(t){return function(){e.setWeapon(t)}},i=[],a=0;a<e.weapons.length;a++){var s=e.weapons[a].name;this.playbackConfig[s]=n(a),i[a]=t.add(this.playbackConfig,s).name(this.labelize(s))}},setupSkinsGUI:function(e){for(var t=this.gui.addFolder("Skins"),n=function(t){return function(){e.setSkin(t)}},i=[],a=0;a<e.skinsBody.length;a++){var s=e.skinsBody[a].name;this.playbackConfig[s]=n(a),i[a]=t.add(this.playbackConfig,s).name(this.labelize(s))}},setupGUIAnimations:function(e){for(var t=this.gui.addFolder("Animations"),n=function(t){return function(){e.setAnimation(t.name)}},i=[],a=e.meshBody.geometry.animations,s=0;s<a.length;s++){var r=a[s];this.playbackConfig[r.name]=n(r),i[s]=t.add(this.playbackConfig,r.name,r.name),s++}},animate:function(){requestAnimationFrame(this.animate),this.render(),this.stats.update()},render:function(){var e=this.clock.getDelta();this.character.update(e),this.renderer.render(this.scene,this.camera)}}},l={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this.$createElement,t=this._self._c||e;return t("div",{staticClass:"webglLoaderMd2-container"},[t("div",{attrs:{id:"info"}},[t("a",{attrs:{href:"https://threejs.org",target:"_blank",rel:"noopener"}},[this._v("three.js")]),this._v(" - MD2 Loader -\n\t\t\tCharacter by "),t("a",{attrs:{href:"http://planetquake.gamespy.com/View.php?view=Quake2.Detail&id=368"}},[this._v("Brian Collins")])])])}]};var c=n("VU/8")(h,l,!1,function(e){n("bgXb")},"data-v-1abb0a27",null);t.default=c.exports}});
//# sourceMappingURL=97.2343093f691450eb3ff8.js.map